(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[6],{1697:function(e,t,n){n(52),e.exports=n(1698)},1698:function(e,t,n){"use strict";n.r(t);var c=n(6),a=n(7),r=n(27),i=n(9),o=n(8),s=n(2),l=n.n(s),d=n(23),h=n.n(d),j=n(17),b=n(5),m=n(1),O=n(10),u=n(15),p=(n(20),n(11),n(50)),f=(n(107),n(116),n(530),n(0)),x=window.app.pageOptions,g=x.repoID,v=x.repoName,w=x.checksums,N=x.transactionId,F=x.commitID,I=x.commitTime,k=x.commitDesc,C=x.commitRelativeTime,P=x.showAuthor,S=x.authorAvatarURL,D=x.authorName,M=x.authorNickName,_=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onSearchedClick=function(e){if(!0===e.is_dir){var t=m.hc+"library/"+e.repo_id+"/"+e.repo_name+e.path;Object(j.c)(t,{repalce:!0})}else{var n=m.hc+"lib/"+e.repo_id+"/file"+b.a.encodePath(e.path);window.open("about:blank").location.href=n}},a.renderFolder=function(e){a.setState({folderPath:e,folderItems:[],isLoading:!0}),O.b.listCommitDir(g,F,e).then((function(e){a.setState({isLoading:!1,folderItems:e.data.dirent_list})})).catch((function(e){a.setState({isLoading:!1,errorMsg:b.a.getErrorMsg(e,!0)})}))},a.clickFolderPath=function(e,t){t.preventDefault(),a.renderFolder(e)},a.renderPath=function(){var e=a.state.folderPath,t=e.split("/");return"/"==e?v:Object(f.jsxs)(l.a.Fragment,{children:[Object(f.jsx)("a",{href:"#",onClick:a.clickFolderPath.bind(Object(r.a)(a),"/"),children:v}),Object(f.jsx)("span",{children:" / "}),t.map((function(e,n){if(n>0&&n!=t.length-1)return Object(f.jsxs)(l.a.Fragment,{children:[Object(f.jsx)("a",{href:"#",onClick:a.clickFolderPath.bind(Object(r.a)(a),t.slice(0,n+1).join("/")),children:t[n]}),Object(f.jsx)("span",{children:" / "})]},n)})),t[t.length-1]]})},a.state={isLoading:!0,errorMsg:"",folderPath:"/",folderItems:[]},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.renderFolder(this.state.folderPath)}},{key:"render",value:function(){var e=this.state,t=(e.isConfirmDialogOpen,e.folderPath);return Object(f.jsx)(l.a.Fragment,{children:Object(f.jsxs)("div",{className:"h-100 d-flex flex-column",children:[Object(f.jsxs)("div",{className:"top-header d-flex justify-content-between",children:[Object(f.jsx)("a",{href:m.hc,children:Object(f.jsx)("img",{src:m.Hb+m.Cb,height:m.Bb,width:m.Db,title:m.ic,alt:"logo"})}),Object(f.jsx)(p.a,{onSearchedClick:this.onSearchedClick})]}),Object(f.jsx)("div",{className:"flex-auto container-fluid pt-4 pb-6 o-auto",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"col-md-10 offset-md-1",children:[Object(f.jsx)("h2",{dangerouslySetInnerHTML:{__html:b.a.generateDialogTitle(Object(m.jb)("{placeholder} Snapshot"),v)+' <span class="heading-commit-time">('.concat(I,")</span>")}}),"/"==t&&Object(f.jsxs)("div",{className:"d-flex mb-2 align-items-center",children:[Object(f.jsx)("p",{className:"m-0",children:k}),Object(f.jsxs)("div",{className:"ml-4 border-left pl-4 d-flex align-items-center",children:[P?Object(f.jsxs)(l.a.Fragment,{children:[Object(f.jsx)("img",{src:S,width:"20",height:"20",alt:"",className:"rounded mr-1"}),Object(f.jsx)("a",{href:"".concat(m.hc,"profile/").concat(encodeURIComponent(D),"/"),children:M})]}):Object(f.jsx)("span",{children:Object(m.jb)("Unknown")}),Object(f.jsx)("p",{className:"m-0 ml-2",dangerouslySetInnerHTML:{__html:C}})]})]}),Object(f.jsx)("div",{className:"d-flex justify-content-between align-items-center op-bar",children:Object(f.jsxs)("p",{className:"m-0",children:[Object(m.jb)("Current path: "),this.renderPath()]})}),Object(f.jsx)(y,{data:this.state,renderFolder:this.renderFolder})]})})})]})})}}]),n}(l.a.Component),y=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).theadData=[{width:"5%",text:""},{width:"50%",text:Object(m.jb)("Name")},{width:"15%",text:Object(m.jb)("Size")},{width:"15%",text:""},{width:"15%",text:""}],a}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props.data,n=t.isLoading,c=t.errorMsg,a=t.folderPath,r=t.folderItems;return n?Object(f.jsx)(u.a,{}):c?Object(f.jsx)("p",{className:"error mt-6 text-center",children:c}):Object(f.jsxs)("table",{className:"table-hover",children:[Object(f.jsx)("thead",{children:Object(f.jsx)("tr",{children:this.theadData.map((function(e,t){return Object(f.jsx)("th",{width:e.width,children:e.text},t)}))})}),Object(f.jsx)("tbody",{children:r.map((function(t,n){return Object(f.jsx)(U,{item:t,folderPath:a,renderFolder:e.props.renderFolder},n)}))})]})}}]),n}(l.a.Component),U=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleMouseOver=function(){a.setState({isIconShown:!0})},a.handleMouseOut=function(){a.setState({isIconShown:!1})},a.renderFolder=function(e){e.preventDefault();var t=a.props.item,n=a.props.folderPath;a.props.renderFolder(b.a.joinPath(n,t.name))},a.state={isIconShown:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.item,t=this.state.isIconShown,n=this.props.folderPath;return"dir"==e.type?Object(f.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(f.jsx)("td",{className:"text-center",children:Object(f.jsx)("img",{src:b.a.getFolderIconUrl(),alt:Object(m.jb)("Directory"),width:"24"})}),Object(f.jsx)("td",{children:Object(f.jsx)("a",{href:"#",onClick:this.renderFolder,children:e.name})}),Object(f.jsx)("td",{}),Object(f.jsx)("td",{})]}):Object(f.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(f.jsx)("td",{className:"text-center",children:Object(f.jsx)("img",{src:b.a.getFileIconUrl(e.name),alt:Object(m.jb)("File"),width:"24"})}),Object(f.jsx)("td",{children:Object(f.jsx)("a",{href:"".concat(m.hc,"repo/").concat(g,"/snapshot/files/?obj_id=").concat(e.obj_id,"&commit_id=").concat(F,"&p=").concat(encodeURIComponent(b.a.joinPath(n,e.name))),target:"_blank",children:e.name})}),Object(f.jsx)("td",{children:b.a.bytesToSize(e.size)}),Object(f.jsx)("td",{className:"text-center",children:Object(f.jsx)("a",{href:"".concat(m.hc,"api2/bloxberg-pdf/").concat(N,"/").concat(JSON.parse(w)[b.a.joinPath(n,e.name)],"/?p=").concat(encodeURIComponent(b.a.joinPath(n,e.name))),download:!0,className:"".concat(t?"":"invisible"),title:Object(m.jb)("Download Certificate"),children:Object(m.jb)("Download Certificate")})}),Object(f.jsx)("td",{className:"text-center",children:Object(f.jsx)("a",{href:"".concat(m.hc,"repo/").concat(g,"/").concat(e.obj_id,"/download/?file_name=").concat(encodeURIComponent(e.name),"&p=").concat(encodeURIComponent(b.a.joinPath(n,e.name))),className:"".concat(t?"":"invisible"),title:Object(m.jb)("Download File"),children:Object(m.jb)("Download File")})})]})}}]),n}(l.a.Component);h.a.render(Object(f.jsx)(_,{}),document.getElementById("wrapper"))},530:function(e,t,n){}},[[1697,1,0]]]);
//# sourceMappingURL=bloxbergRepoSnapshot.chunk.js.map