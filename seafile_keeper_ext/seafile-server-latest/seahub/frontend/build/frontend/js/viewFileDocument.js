webpackJsonp([11],{100:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(7),f=n(p),m=a(265),h=n(m),Y=a(266),L=n(Y),S=a(141);a(142),a(155);var Z={disabledDate:u.default.func.isRequired,value:u.default.object,onChange:u.default.func.isRequired},g=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.closeDialog=function(){a.setState({isOpen:!1})},a.openDialog=function(){a.setState({isOpen:!0})},a.clickOutsideToClose=function(e){a.inputRef.current.contains(e.target)||a.calendarContainerRef.current.contains(e.target)||a.closeDialog()},a.getCalendarContainer=function(){return a.calendarContainerRef.current},a.defaultCalendarValue=null,a.calendarContainerRef=d.default.createRef(),a.inputRef=d.default.createRef(),a.state={isOpen:!1},a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=window.app.config.lang;this.defaultCalendarValue=(0,f.default)().locale(e).clone(),document.addEventListener("click",this.clickOutsideToClose)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickOutsideToClose)}},{key:"render",value:function(){var e=this,t=this.props,a=!0;void 0!=t.showHourAndMinute&&(a=t.showHourAndMinute);var n=a?"YYYY-MM-DD HH:mm":"YYYY-MM-DD",r=d.default.createElement(h.default,{defaultValue:this.defaultCalendarValue,disabledDate:t.disabledDate,format:n,locale:(0,S.translateCalendar)(),showHourAndMinute:a});return d.default.createElement(L.default,{disabled:t.disabled,getCalendarContainer:this.getCalendarContainer,calendar:r,value:t.value,open:this.state.isOpen,onChange:t.onChange},function(a){var r=a.value;return d.default.createElement("div",null,d.default.createElement("input",{placeholder:n,style:{width:t.inputWidth||250},tabIndex:"-1",disabled:t.disabled,readOnly:!0,value:r&&r.format(n)||"",className:"form-control",onClick:e.openDialog,ref:e.inputRef}),d.default.createElement("div",{ref:e.calendarContainerRef}))})}}]),t}(d.default.Component);g.propsTypes=Z,t.default=g},105:function(e,t){},116:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),u=a(1),p=n(u),f=a(6),m=a(2),h=a(189),Y=n(h),L=a(191),S=n(L),Z=a(192),g=n(Z),C=a(193),X=n(C),J=a(194),P=n(J),w=a(195),b=n(w),D=a(4),E=a(8),T=n(E),v=a(3),y=a(5),M=n(y);a(149);var Q={isGroupOwnedRepo:p.default.bool,itemType:p.default.string.isRequired,itemName:p.default.string.isRequired,itemPath:p.default.string.isRequired,toggleDialog:p.default.func.isRequired,repoID:p.default.string.isRequired,repoEncrypted:p.default.bool,userPerm:p.default.string,enableDirPrivateShare:p.default.bool},H=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getInitialActiveTab=function(){var e=a.props,t=e.repoEncrypted,n=e.userPerm,r=e.enableDirPrivateShare,i=e.itemType,o=!t&&m.canGenerateShareLink,s=!t&&m.canGenerateUploadLink&&"rw"==n;return t&&(r="library"==i),o?"shareLink":s?"uploadLink":"file"==i||"dir"==i?"internalLink":r?"shareToUser":void 0},a.toggle=function(e){a.state.activeTab!==e&&a.setState({activeTab:e})},a.renderDirContent=function(){if(!a.state.isRepoJudgemented)return c.default.createElement(T.default,null);var e=a.state.activeTab,t=a.props,n=t.repoEncrypted,r=t.userPerm,i=t.enableDirPrivateShare,o=t.itemType,s=!n&&m.canGenerateShareLink,l=!n&&m.canGenerateUploadLink&&"rw"==r;return n&&(i="library"==o),c.default.createElement(d.Fragment,null,c.default.createElement("div",{className:"share-dialog-side"},c.default.createElement(f.Nav,{pills:!0},s&&c.default.createElement(f.NavItem,null,c.default.createElement(f.NavLink,{className:"shareLink"===e?"active":"",onClick:a.toggle.bind(a,"shareLink")},(0,m.gettext)("Share Link"))),l&&c.default.createElement(f.NavItem,null,c.default.createElement(f.NavLink,{className:"uploadLink"===e?"active":"",onClick:a.toggle.bind(a,"uploadLink")},(0,m.gettext)("Upload Link"))),"dir"===o&&c.default.createElement(f.NavItem,null,c.default.createElement(f.NavLink,{className:"internalLink"===e?"active":"",onClick:a.toggle.bind(a,"internalLink")},(0,m.gettext)("Internal Link"))),i&&c.default.createElement(d.Fragment,null,c.default.createElement(f.NavItem,null,c.default.createElement(f.NavLink,{className:"shareToUser"===e?"active":"",onClick:a.toggle.bind(a,"shareToUser")},(0,m.gettext)("Share to user"))),c.default.createElement(f.NavItem,null,c.default.createElement(f.NavLink,{className:"shareToGroup"===e?"active":"",onClick:a.toggle.bind(a,"shareToGroup")},(0,m.gettext)("Share to group"))),m.canInvitePeople&&c.default.createElement(f.NavItem,null,c.default.createElement(f.NavLink,{className:"invitePeople"===e?"active":"",onClick:a.toggle.bind(a,"invitePeople")},(0,m.gettext)("Invite Guest")))))),c.default.createElement("div",{className:"share-dialog-main"},c.default.createElement(f.TabContent,{activeTab:a.state.activeTab},s&&"shareLink"===e&&c.default.createElement(f.TabPane,{tabId:"shareLink"},c.default.createElement(X.default,{itemPath:a.props.itemPath,repoID:a.props.repoID,closeShareDialog:a.props.toggleDialog,itemType:o})),l&&"uploadLink"===e&&c.default.createElement(f.TabPane,{tabId:"uploadLink"},c.default.createElement(P.default,{itemPath:a.props.itemPath,repoID:a.props.repoID,closeShareDialog:a.props.toggleDialog})),"dir"===o&&"internalLink"===e&&c.default.createElement(b.default,{path:a.props.itemPath,repoID:a.props.repoID,direntType:o}),i&&c.default.createElement(d.Fragment,null,"shareToUser"===e&&c.default.createElement(f.TabPane,{tabId:"shareToUser"},c.default.createElement(Y.default,{itemType:a.props.itemType,isGroupOwnedRepo:a.props.isGroupOwnedRepo,itemPath:a.props.itemPath,repoID:a.props.repoID,isRepoOwner:a.state.isRepoOwner})),"shareToGroup"===e&&c.default.createElement(f.TabPane,{tabId:"shareToGroup"},c.default.createElement(S.default,{itemType:a.props.itemType,isGroupOwnedRepo:a.props.isGroupOwnedRepo,itemPath:a.props.itemPath,repoID:a.props.repoID,isRepoOwner:a.state.isRepoOwner})),m.canInvitePeople&&"invitePeople"===e&&c.default.createElement(f.TabPane,{tabId:"invitePeople"},c.default.createElement(g.default,{itemPath:a.props.itemPath,repoID:a.props.repoID}))))))},a.renderFileContent=function(){var e=a.state.activeTab,t=a.props,n=t.itemType,r=(t.itemName,t.repoEncrypted),i=!r&&m.canGenerateShareLink;return c.default.createElement(d.Fragment,null,c.default.createElement("div",{className:"share-dialog-side"},c.default.createElement(f.Nav,{pills:!0},i&&c.default.createElement(f.NavItem,null,c.default.createElement(f.NavLink,{className:"shareLink"===e?"active":"",onClick:a.toggle.bind(a,"shareLink")},(0,m.gettext)("Share Link"))),c.default.createElement(f.NavItem,null,c.default.createElement(f.NavLink,{className:"internalLink"===e?"active":"",onClick:a.toggle.bind(a,"internalLink")},(0,m.gettext)("Internal Link"))))),c.default.createElement("div",{className:"share-dialog-main"},c.default.createElement(f.TabContent,{activeTab:a.state.activeTab},i&&"shareLink"===e&&c.default.createElement(f.TabPane,{tabId:"shareLink"},c.default.createElement(X.default,{itemPath:a.props.itemPath,repoID:a.props.repoID,closeShareDialog:a.props.toggleDialog,itemType:n})),"internalLink"===e&&c.default.createElement(b.default,{path:a.props.itemPath,repoID:a.props.repoID}))))},a.renderExternalShareMessage=function(){return m.additionalShareDialogNote&&"object"===("undefined"===typeof m.additionalShareDialogNote?"undefined":s(m.additionalShareDialogNote))?c.default.createElement("div",{className:"external-share-message mt-2"},c.default.createElement("h6",null,m.additionalShareDialogNote.title),c.default.createElement("div",{style:{fontSize:"14px",color:"#666"}},m.additionalShareDialogNote.content)):null},a.state={activeTab:a.getInitialActiveTab(),isRepoJudgemented:!1,isRepoOwner:!1},a}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.repoID;D.seafileAPI.getRepoInfo(t).then(function(t){var a=t.data.owner_email===m.username;e.setState({isRepoJudgemented:!0,isRepoOwner:a})}).catch(function(e){var t=v.Utils.getErrorMsg(e);M.default.danger(t)})}},{key:"render",value:function(){var e=this.props,t=e.itemType,a=e.itemName;return c.default.createElement("div",null,c.default.createElement(f.Modal,{isOpen:!0,style:{maxWidth:"760px"},className:"share-dialog",toggle:this.props.toggleDialog},c.default.createElement(f.ModalHeader,{toggle:this.props.toggleDialog},(0,m.gettext)("Share")," ",c.default.createElement("span",{className:"op-target",title:a},a),this.renderExternalShareMessage()),c.default.createElement(f.ModalBody,{className:"share-dialog-content"},("library"===t||"dir"===t)&&this.renderDirContent(),"file"===t&&this.renderFileContent())))}}]),t}(c.default.Component);H.propTypes=Q,t.default=H},117:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(6),f=a(4),m=a(2),h=a(3),Y=a(5),L=n(Y),S={token:u.default.string.isRequired,linkType:u.default.string.isRequired,toggleSendLink:u.default.func.isRequired,closeShareDialog:u.default.func.isRequired},Z=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleEmailsInputChange=function(e){a.setState({emails:e.target.value})},a.handleMsgInputChange=function(e){a.setState({msg:e.target.value})},a.sendLink=function(){var e=a.state,t=e.emails,n=e.msg;if(!t.trim())return void a.setState({errorMsg:(0,m.gettext)("Please input at least an email.")});a.setState({btnDisabled:!0,sending:!0});var r=a.props,i=r.token;("uploadLink"==r.linkType?f.seafileAPI.sendUploadLink(i,t.trim(),n.trim()):f.seafileAPI.sendShareLink(i,t.trim(),n.trim())).then(function(e){a.props.closeShareDialog();var t=e.data,n=t.success,r=t.failed;if(n.length){var i=(0,m.gettext)("Successfully sent to {placeholder}").replace("{placeholder}",n.join(", "));L.default.success(i)}r.length&&r.map(function(e){var t=(0,m.gettext)("Failed to send to {email_placeholder}: {errorMsg_placeholder}").replace("{email_placeholder}",e.email).replace("{errorMsg_placeholder}",e.error_msg);L.default.warning(t)})}).catch(function(e){var t=h.Utils.getErrorMsg(e);a.setState({btnDisabled:!1,sending:!1,errorMsg:t})})},a.state={emails:"",msg:"",errorMsg:"",btnDisabled:!1,sending:!1},a}return o(t,e),s(t,[{key:"render",value:function(){var e=this.state,t=e.emails,a=e.msg,n=e.errorMsg,r=e.btnDisabled,i=e.sending;return d.default.createElement(p.Form,null,d.default.createElement(p.FormGroup,null,d.default.createElement(p.Label,{htmlFor:"emails",className:"text-secondary font-weight-normal"},(0,m.gettext)("Send to:")),d.default.createElement("input",{type:"text",id:"emails",className:"form-control w-75",value:t,onChange:this.handleEmailsInputChange,placeholder:(0,m.gettext)("Emails, separated by ','")})),d.default.createElement(p.FormGroup,null,d.default.createElement(p.Label,{htmlFor:"msg",className:"text-secondary font-weight-normal"},(0,m.gettext)("Message (optional):")),d.default.createElement("textarea",{className:"form-control w-75",id:"msg",value:a,onChange:this.handleMsgInputChange})),n&&d.default.createElement("p",{className:"error"},n),d.default.createElement(p.Button,{color:"primary",onClick:this.sendLink,disabled:r,className:"mr-2"},(0,m.gettext)("Send")),d.default.createElement(p.Button,{color:"secondary",onClick:this.props.toggleSendLink},(0,m.gettext)("Cancel")),i&&d.default.createElement("p",{className:"mt-2"},(0,m.gettext)("Sending...")))}}]),t}(d.default.Component);Z.propTypes=S,t.default=Z},120:function(e,t){},13:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r={NEW_FOLDER:{key:"New Folder",value:(0,n.gettext)("New Folder")},NEW_FILE:{key:"New File",value:(0,n.gettext)("New File")},SHARE:{key:"Share",value:(0,n.gettext)("Share")},DOWNLOAD:{key:"Download",value:(0,n.gettext)("Download")},DELETE:{key:"Delete",value:(0,n.gettext)("Delete")},RENAME:{key:"Rename",value:(0,n.gettext)("Rename")},MOVE:{key:"Move",value:(0,n.gettext)("Move")},COPY:{key:"Copy",value:(0,n.gettext)("Copy")},PERMISSION:{key:"Permission",value:(0,n.gettext)("Permission")},DETAILS:{key:"Details",value:(0,n.gettext)("Details")},OPEN_VIA_CLIENT:{key:"Open via Client",value:(0,n.gettext)("Open via Client")},LOCK:{key:"Lock",value:(0,n.gettext)("Lock")},UNLOCK:{key:"Unlock",value:(0,n.gettext)("Unlock")},COMMENT:{key:"Comment",value:(0,n.gettext)("Comment")},HISTORY:{key:"History",value:(0,n.gettext)("History")},ACCESS_LOG:{key:"Access Log",value:(0,n.gettext)("Access Log")},TAGS:{key:"Tags",value:(0,n.gettext)("Tags")},RELATED_FILES:{key:"Related Files",value:(0,n.gettext)("Related Files")}};t.default=r},14:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(10),u=n(c),p=a(1),f=n(p),m={children:f.default.object.isRequired},h=document.getElementById("modal-wrapper"),Y=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.el=document.createElement("div"),a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){h.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){h.removeChild(this.el)}},{key:"render",value:function(){return u.default.createPortal(this.props.children,this.el)}}]),t}(d.default.Component);Y.propTypes=m,t.default=Y},140:function(e,t){},141:function(e,t,a){"use strict";function n(){var e=window.app.config?window.app.config.lang:"zh-CH",t=void 0;switch(e){case"zh-CH":t=r;break;case"zh-tw":t=i;break;case"en":t=o;break;case"fr":t=s;break;case"de":t=l;break;case"es":case"es-ar":case"es-mx":t=d;break;case"pl":t=c;break;case"cs":t=u;break;default:t=r}return t}Object.defineProperty(t,"__esModule",{value:!0});var r=a(267),i=a(268),o=a(269),s=a(270),l=a(271),d=a(272),c=a(273),u=a(274);t.translateCalendar=n},142:function(e,t){},149:function(e,t){},150:function(e,t){},155:function(e,t){},16:function(e,t,a){"use strict";a(55),a(56),"undefined"===typeof Promise&&(a(57).enable(),window.Promise=a(50)),a(52),Object.assign=a(36)},178:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(3),f=a(64),m=n(f),h={isTextMode:u.default.bool.isRequired,isEditIconShow:u.default.bool.isRequired,permissionOptions:u.default.array.isRequired,currentPermission:u.default.string.isRequired,onPermissionChanged:u.default.func.isRequired},Y=function(e){function t(){var e,a,n,o;r(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.translatePermission=function(e){return p.Utils.getShareLinkPermissionObject(e).text},o=a,i(n,o)}return o(t,e),s(t,[{key:"render",value:function(){return d.default.createElement(m.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.permissionOptions,currentOption:this.props.currentPermission,onOptionChanged:this.props.onPermissionChanged,translateOption:this.translatePermission})}}]),t}(d.default.Component);Y.propTypes=h,t.default=Y},179:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){n(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.path=t.path,this.obj_name=t.obj_name,this.is_dir=t.is_dir,this.can_edit=t.can_edit,this.repo_folder_permission=t.repo_folder_permission,this.permissions=t.permissions,this.username=t.username,this.is_expired=t.is_expired,this.expire_date=t.expire_date,this.token=t.token,this.link=t.link,this.view_cnt=t.view_cnt,this.ctime=t.ctime};t.default=r},180:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){n(this,e),this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.path=t.path,this.link=t.link,this.obj_name=t.obj_name,this.username=t.username,this.ctime=t.ctime,this.token=t.token,this.view_cnt=t.view_cnt,this.expire_date=t.expire_date,this.is_expired=t.is_expired};t.default=r},189:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(2),f=a(6),m=a(4),h=a(3),Y=a(5),L=n(Y),S=a(47),Z=n(S),g=a(58),C=n(g);a(105),a(190);var X=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onMouseEnter=function(){a.setState({isOperationShow:!0})},a.onMouseLeave=function(){a.setState({isOperationShow:!1})},a.userAvatarOnMouseEnter=function(){a.setState({isUserDetailsPopoverOpen:!0})},a.userAvatarOnMouseLeave=function(){a.setState({isUserDetailsPopoverOpen:!1})},a.deleteShareItem=function(){var e=a.props.item;a.props.deleteShareItem(e.user_info.name)},a.onChangeUserPermission=function(e){var t=a.props.item;a.props.onChangeUserPermission(t,e)},a.state={isOperationShow:!1,isUserDetailsPopoverOpen:!1},a}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission,a=this.state.isUserDetailsPopoverOpen;return d.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},d.default.createElement("td",{className:"name"},d.default.createElement("div",{className:"position-relative"},d.default.createElement("img",{src:e.user_info.avatar_url,width:"24",alt:e.user_info.nickname,className:"rounded-circle mr-2 cursor-pointer",onMouseEnter:this.userAvatarOnMouseEnter,onMouseLeave:this.userAvatarOnMouseLeave}),d.default.createElement("span",null,e.user_info.nickname),a&&d.default.createElement("div",{className:"user-details-popover p-4 position-absolute w-100 mt-1"},d.default.createElement("div",{className:"user-details-main pb-3"},d.default.createElement("img",{src:e.user_info.avatar_url,width:"40",alt:e.user_info.nickname,className:"rounded-circle mr-2"}),d.default.createElement("span",{className:"user-details-name"},e.user_info.nickname)),d.default.createElement("dl",{className:"m-0 mt-3 d-flex"},d.default.createElement("dt",{className:"m-0 mr-3"},(0,p.gettext)("Email")),d.default.createElement("dd",{className:"m-0"},e.user_info.contact_email))))),d.default.createElement("td",null,d.default.createElement(C.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),d.default.createElement("td",null,d.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,p.gettext)("Delete")})))}}]),t}(d.default.Component),J=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.items;return d.default.createElement("tbody",null,t.map(function(t,a){return d.default.createElement(X,{key:a,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(d.default.Component),P={isGroupOwnedRepo:u.default.bool,itemPath:u.default.string.isRequired,itemType:u.default.string.isRequired,repoID:u.default.string.isRequired,isRepoOwner:u.default.bool.isRequired},w=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleSelectChange=function(e){a.setState({selectedOption:e}),a.options=[]},a.setPermission=function(e){a.setState({permission:e})},a.shareToUser=function(){var e=[],t=a.props.itemPath,n=a.props.repoID;if(a.state.selectedOption&&a.state.selectedOption.length>0)for(var r=0;r<a.state.selectedOption.length;r++)e[r]=a.state.selectedOption[r].email;a.props.isGroupOwnedRepo?m.seafileAPI.shareGroupOwnedRepoToUser(n,a.state.permission,e,t).then(function(e){var t=[];if(e.data.failed.length>0)for(var n=0;n<e.data.failed.length;n++)t[n]=e.data.failed[n];var r=e.data.success.map(function(e){return{user_info:{nickname:e.user_name,name:e.user_email},permission:e.permission,share_type:"user"}});a.setState({errorMsg:t,sharedItems:a.state.sharedItems.concat(r),selectedOption:null,permission:"rw"}),a.refs.userSelect.clearSelect()}).catch(function(e){if(e.response){var t=(0,p.gettext)("Library can not be shared to owner."),n=[];n.push(t),a.setState({errorMsg:n,selectedOption:null})}}):m.seafileAPI.shareFolder(n,t,"user",a.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var n=0;n<e.data.failed.length;n++)t[n]=e.data.failed[n];a.setState({errorMsg:t,sharedItems:a.state.sharedItems.concat(e.data.success),selectedOption:null,permission:"rw"}),a.refs.userSelect.clearSelect()}).catch(function(e){if(e.response){var t=(0,p.gettext)("Library can not be shared to owner."),n=[];n.push(t),a.setState({errorMsg:n,selectedOption:null})}})},a.deleteShareItem=function(e){var t=a.props.itemPath,n=a.props.repoID;a.props.isGroupOwnedRepo?m.seafileAPI.deleteGroupOwnedRepoSharedUserItem(n,e,t).then(function(t){a.setState({sharedItems:a.state.sharedItems.filter(function(t){return t.user_info.name!==e})})}).catch(function(e){var t=h.Utils.getErrorMsg(e);L.default.danger(t)}):m.seafileAPI.deleteShareToUserItem(n,t,"user",e).then(function(t){a.setState({sharedItems:a.state.sharedItems.filter(function(t){return t.user_info.name!==e})})}).catch(function(e){var t=h.Utils.getErrorMsg(e);L.default.danger(t)})},a.onChangeUserPermission=function(e,t){var n=a.props.itemPath,r=a.props.repoID,i=e.user_info.name;a.props.isGroupOwnedRepo?m.seafileAPI.modifyGroupOwnedRepoUserSharedPermission(r,t,i,n).then(function(){a.updateSharedItems(e,t)}).catch(function(e){var t=h.Utils.getErrorMsg(e);L.default.danger(t)}):m.seafileAPI.updateShareToUserItemPermission(r,n,"user",i,t).then(function(){a.updateSharedItems(e,t)}).catch(function(e){var t=h.Utils.getErrorMsg(e);L.default.danger(t)})},a.updateSharedItems=function(e,t){var n=e.user_info.name,r=a.state.sharedItems.map(function(e){var a=e.user_info.name;return n===a&&(e.permission=t,e.is_admin="admin"===t),e});a.setState({sharedItems:r})},a.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},a.options=[],a.permissions=[];var n=e.itemType,o=e.isRepoOwner;return"library"===n?a.permissions=o?["rw","r","admin","cloud-edit","preview"]:["rw","r","cloud-edit","preview"]:"dir"===a.props.itemType&&(a.permissions=["rw","r","cloud-edit","preview"]),!a.props.isGroupOwnedRepo&&p.isPro||(a.permissions=["rw","r"]),a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.itemPath,a=this.props.repoID;m.seafileAPI.listSharedItems(a,t,"user").then(function(t){0!==t.data.length&&e.setState({sharedItems:t.data})}).catch(function(e){var t=h.Utils.getErrorMsg(e);L.default.danger(t)})}},{key:"render",value:function(){var e=this.state.sharedItems,t=d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"47%"},(0,p.gettext)("User")),d.default.createElement("th",{width:"35%"},(0,p.gettext)("Permission")),d.default.createElement("th",{width:"18%"})));return d.default.createElement(l.Fragment,null,d.default.createElement("table",{className:"w-xs-200"},t,d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("td",null,d.default.createElement(Z.default,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:(0,p.gettext)("Select users..."),onSelectChange:this.handleSelectChange})),d.default.createElement("td",null,d.default.createElement(C.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),d.default.createElement("td",null,d.default.createElement(f.Button,{onClick:this.shareToUser},(0,p.gettext)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(e,t){var a="";return a=e.email?e.email+": "+e.error_msg:e,d.default.createElement("tr",{key:t},d.default.createElement("td",{colSpan:3},d.default.createElement("p",{className:"error"},a)))}))),d.default.createElement("div",{className:"share-list-container"},d.default.createElement("table",{className:"table-thead-hidden w-xs-200"},t,d.default.createElement(J,{items:e,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),t}(d.default.Component);w.propTypes=P,t.default=w},190:function(e,t){},191:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),u=a(1),p=n(u),f=a(6),m=a(80),h=n(m),Y=a(2),L=a(4),S=a(3),Z=a(5),g=n(Z),C=a(58),X=n(C),J=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onMouseEnter=function(){a.setState({isOperationShow:!0})},a.onMouseLeave=function(){a.setState({isOperationShow:!1})},a.deleteShareItem=function(){var e=a.props.item;a.props.deleteShareItem(e.group_info.id)},a.onChangeUserPermission=function(e){var t=a.props.item;a.props.onChangeUserPermission(t,e)},a.state={isOperationShow:!1},a}return o(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return c.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c.default.createElement("td",{className:"name"},e.group_info.name),c.default.createElement("td",null,c.default.createElement(X.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),c.default.createElement("td",null,c.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,Y.gettext)("Delete")})))}}]),t}(c.default.Component),P=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props.items;return c.default.createElement("tbody",null,t.map(function(t,a){return c.default.createElement(J,{key:a,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(c.default.Component),w={isGroupOwnedRepo:p.default.bool,itemPath:p.default.string.isRequired,itemType:p.default.string.isRequired,repoID:p.default.string.isRequired,isRepoOwner:p.default.bool.isRequired},b=function(e){return c.default.createElement("div",s({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),(0,Y.gettext)("Group not found"))},D=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleSelectChange=function(e){a.setState({selectedOption:e})},a.loadOptions=function(){L.seafileAPI.shareableGroups().then(function(e){for(var t=[],n=0;n<e.data.length;n++){var r={};r.value=e.data[n].name,r.id=e.data[n].id,r.label=e.data[n].name,t.push(r)}a.setState({options:t})}).catch(function(e){var t=S.Utils.getErrorMsg(e);g.default.danger(t)})},a.listSharedGroups=function(){var e=a.props.itemPath,t=a.props.repoID;L.seafileAPI.listSharedItems(t,e,"group").then(function(e){0!==e.data.length&&a.setState({sharedItems:e.data})}).catch(function(e){var t=S.Utils.getErrorMsg(e);g.default.danger(t)})},a.setPermission=function(e){a.setState({permission:e})},a.shareToGroup=function(){var e=[],t=a.props.itemPath,n=a.props.repoID,r=a.props.isGroupOwnedRepo;if(a.state.selectedOption&&a.state.selectedOption.length>0)for(var i=0;i<a.state.selectedOption.length;i++)e[i]=a.state.selectedOption[i].id;r?L.seafileAPI.shareGroupOwnedRepoToGroup(n,a.state.permission,e,t).then(function(e){var t=[];if(e.data.failed.length>0)for(var n=0;n<e.data.failed.length;n++)t[n]=e.data.failed[n];var r=e.data.success.map(function(e){return{group_info:{id:e.group_id,name:e.group_name},permission:e.permission,share_type:"group"}});a.setState({errorMsg:t,sharedItems:a.state.sharedItems.concat(r),selectedOption:null,permission:"rw"})}).catch(function(e){var t=S.Utils.getErrorMsg(e);g.default.danger(t)}):L.seafileAPI.shareFolder(n,t,"group",a.state.permission,e).then(function(e){var t=[];if(e.data.failed.length>0)for(var n=0;n<e.data.failed.length;n++)t[n]=e.data.failed[n];a.setState({errorMsg:t,sharedItems:a.state.sharedItems.concat(e.data.success),selectedOption:null,permission:"rw"})}).catch(function(e){var t=S.Utils.getErrorMsg(e);g.default.danger(t)})},a.deleteShareItem=function(e){var t=a.props.itemPath,n=a.props.repoID;a.props.isGroupOwnedRepo?L.seafileAPI.deleteGroupOwnedRepoSharedGroupItem(n,e,t).then(function(){a.setState({sharedItems:a.state.sharedItems.filter(function(t){return t.group_info.id!==e})})}).catch(function(e){var t=S.Utils.getErrorMsg(e);g.default.danger(t)}):L.seafileAPI.deleteShareToGroupItem(n,t,"group",e).then(function(){a.setState({sharedItems:a.state.sharedItems.filter(function(t){return t.group_info.id!==e})})}).catch(function(e){var t=S.Utils.getErrorMsg(e);g.default.danger(t)})},a.onChangeUserPermission=function(e,t){var n=a.props.itemPath,r=a.props.repoID,i=e.group_info.id;a.props.isGroupOwnedRepo?L.seafileAPI.modifyGroupOwnedRepoGroupSharedPermission(r,t,i,n).then(function(){a.updateSharedItems(e,t)}).catch(function(e){var t=S.Utils.getErrorMsg(e);g.default.danger(t)}):L.seafileAPI.updateShareToGroupItemPermission(r,n,"group",i,t).then(function(){a.updateSharedItems(e,t)}).catch(function(e){var t=S.Utils.getErrorMsg(e);g.default.danger(t)})},a.updateSharedItems=function(e,t){var n=e.group_info.id,r=a.state.sharedItems.map(function(e){var a=e.group_info.id;return n===a&&(e.permission=t,e.is_admin="admin"===t),e});a.setState({sharedItems:r})},a.state={options:[],selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},a.permissions=[];var n=e.itemType,o=e.isRepoOwner;return"library"===n?a.permissions=o?["rw","r","admin","cloud-edit","preview"]:["rw","r","cloud-edit","preview"]:"dir"===n&&(a.permissions=["rw","r","cloud-edit","preview"]),!a.props.isGroupOwnedRepo&&Y.isPro||(a.permissions=["rw","r"]),a}return o(t,e),l(t,[{key:"componentDidMount",value:function(){this.loadOptions(),this.listSharedGroups()}},{key:"render",value:function(){var e=c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{width:"47%"},(0,Y.gettext)("Group")),c.default.createElement("th",{width:"35%"},(0,Y.gettext)("Permission")),c.default.createElement("th",{width:"18%"})));return c.default.createElement(d.Fragment,null,c.default.createElement("table",{className:"w-xs-200"},e,c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement(h.default,{isMulti:!0,onChange:this.handleSelectChange,options:this.state.options,placeholder:(0,Y.gettext)("Select groups..."),maxMenuHeight:200,inputId:"react-select-2-input",value:this.state.selectedOption,components:{NoOptionsMessage:b}})),c.default.createElement("td",null,c.default.createElement(X.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),c.default.createElement("td",null,c.default.createElement(f.Button,{onClick:this.shareToGroup},(0,Y.gettext)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map(function(e,t){var a=e.group_name+": "+e.error_msg;return c.default.createElement("tr",{key:t},c.default.createElement("td",{colSpan:3},c.default.createElement("p",{className:"error"},a)))}))),c.default.createElement("div",{className:"share-list-container"},c.default.createElement("table",{className:"table-thead-hidden w-xs-200"},e,c.default.createElement(P,{items:this.state.sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),t}(c.default.Component);D.propTypes=w,t.default=D},192:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(2),f=a(7),m=n(f),h=a(6),Y=a(4),L=a(3),S=a(5),Z=n(S),g=a(8),C=n(g),X=a(58),J=n(X);a(105);var P=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onMouseEnter=function(){a.setState({isOperationShow:!0})},a.onMouseLeave=function(){a.setState({isOperationShow:!1})},a.deleteShareItem=function(){var e=a.props.item;a.props.deleteShareItem(e.token)},a.onChangeUserPermission=function(e){var t=a.props.item;a.props.onChangeUserPermission(t.token,e)},a.state={isOperationShow:!1},a}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return d.default.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},d.default.createElement("td",{className:"name"},e.accepter),d.default.createElement("td",null,d.default.createElement(J.default,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),d.default.createElement("td",null,(0,m.default)(e.expire_time).format("YYYY-MM-DD")),d.default.createElement("td",{className:"name"},e.inviter_name),d.default.createElement("td",null,d.default.createElement("span",{className:"sf2-icon-x3 action-icon "+(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:(0,p.gettext)("Delete")})))}}]),t}(d.default.Component),w=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.items;return d.default.createElement("tbody",null,t.map(function(t,a){return d.default.createElement(P,{key:a,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})}))}}]),t}(d.default.Component),b={itemPath:u.default.string.isRequired,repoID:u.default.string.isRequired},D=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleInputChange=function(e){var t=e.target.value;a.setState({emails:t}),a.state.errorMsg&&a.setState({errorMsg:""})},a.handleKeyDown=function(e){13===e.keyCode&&(e.preventDefault(),a.shareAndInvite())},a.setPermission=function(e){a.setState({permission:e})},a.onInvitePeople=function(e){e.push.apply(e,a.state.sharedItems),a.setState({sharedItems:e})},a.shareAndInvite=function(){var e=a.state.emails.trim();if(!e)return a.setState({errorMsg:(0,p.gettext)("It is required.")}),!1;var t=[];e=e.split(",");for(var n=0,r=e.length;n<r;n++){var i=e[n].trim();i&&t.push(i)}if(!t.length)return a.setState({errorMsg:(0,p.gettext)("Email is invalid.")}),!1;a.setState({isSubmitting:!0});var o=a.props.itemPath,s=a.props.repoID,l=a.state.permission;Y.seafileAPI.addRepoShareInvitations(s,o,t,l).then(function(e){var t=e.data.success;if(t.length){var n="";n=1==t.length?(0,p.gettext)("Successfully invited %(email).").replace("%(email)",t[0].accepter):(0,p.gettext)("Successfully invited %(email) and %(num) other people.").replace("%(email)",t[0].accepter).replace("%(num)",t.length-1),Z.default.success(n),a.onInvitePeople(t)}var r=e.data.failed;if(r.length)for(var i=0,o=r.length;i<o;i++){var s=r[i].email+": "+r[i].error_msg;Z.default.danger(s)}a.setState({isSubmitting:!1})}).catch(function(e){var t=L.Utils.getErrorMsg(e);Z.default.danger(t),a.setState({isSubmitting:!1})})},a.deleteShareItem=function(e){var t=a.props.itemPath,n=a.props.repoID;Y.seafileAPI.deleteRepoShareInvitation(n,t,e).then(function(t){a.setState({sharedItems:a.state.sharedItems.filter(function(t){return t.token!==e})})}).catch(function(e){var t=L.Utils.getErrorMsg(e);Z.default.danger(t)})},a.onChangeUserPermission=function(e,t){var n=a.props.itemPath,r=a.props.repoID;Y.seafileAPI.updateRepoShareInvitation(r,n,e,t).then(function(){a.updateSharedItems(e,t)}).catch(function(e){var t=L.Utils.getErrorMsg(e);Z.default.danger(t)})},a.updateSharedItems=function(e,t){var n=a.state.sharedItems.map(function(a){return a.token===e&&(a.permission=t),a});a.setState({sharedItems:n})},a.state={errorMsg:"",permission:"r",sharedItems:[],emails:"",isSubmitting:!1},a.permissions=["rw","r"],a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.itemPath,a=this.props.repoID;Y.seafileAPI.listRepoShareInvitations(a,t).then(function(t){0!==t.data.length&&e.setState({sharedItems:t.data.repo_share_invitation_list})}).catch(function(e){var t=L.Utils.getErrorMsg(e);Z.default.danger(t)})}},{key:"render",value:function(){var e=this.state,t=e.sharedItems,a=e.isSubmitting;return d.default.createElement(l.Fragment,null,d.default.createElement("table",{className:"table-thead-hidden w-xs-200"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"50%"},(0,p.gettext)("Invite Guest")),d.default.createElement("th",{width:"35%"},(0,p.gettext)("Permission")),d.default.createElement("th",{width:"15%"},""))),d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("td",null,d.default.createElement(h.Input,{type:"text",id:"emails",placeholder:(0,p.gettext)("Emails, separated by ','"),value:this.state.emails,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown})),d.default.createElement("td",null,d.default.createElement(J.default,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),d.default.createElement("td",null,d.default.createElement(h.Button,{onClick:this.shareAndInvite,disabled:a},a?d.default.createElement(C.default,null):(0,p.gettext)("Submit")))),this.state.errorMsg.length>0&&d.default.createElement("tr",{key:"error"},d.default.createElement("td",{colSpan:3},d.default.createElement("p",{className:"error"},this.state.errorMsg))))),d.default.createElement("div",{className:"share-list-container"},d.default.createElement("table",{className:"w-xs-200"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{width:"25%"},(0,p.gettext)("Email")),d.default.createElement("th",{width:"20%"},(0,p.gettext)("Permission")),d.default.createElement("th",{width:"20%"},(0,p.gettext)("Expiration")),d.default.createElement("th",{width:"20%"},(0,p.gettext)("Inviter")),d.default.createElement("th",{width:"15%"},""))),d.default.createElement(w,{items:t,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),t}(d.default.Component);D.propTypes=b,t.default=D},193:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(7),f=n(p),m=a(154),h=n(m),Y=a(6),L=a(2),S=a(178),Z=n(S),g=a(4),C=a(3),X=a(179),J=n(X),P=a(5),w=n(P),b=a(8),D=n(b),E=a(117),T=n(E),v=a(100),y=n(v),M={itemPath:u.default.string.isRequired,repoID:u.default.string.isRequired,closeShareDialog:u.default.func.isRequired},Q=C.Utils.isDesktop()?250:210,H=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setExp=function(e){a.setState({setExp:e.target.value})},a.disabledDate=function(e){if(!e)return!1;if(a.isExpireDaysNoLimit)return e.isBefore((0,f.default)(),"day");var t=(0,f.default)().add(L.shareLinkExpireDaysMin,"days"),n=(0,f.default)().add(L.shareLinkExpireDaysMax,"days");return 0!==L.shareLinkExpireDaysMin&&0!==L.shareLinkExpireDaysMax?e.isBefore(t,"day")||e.isAfter(n,"day"):0!==L.shareLinkExpireDaysMin&&0===L.shareLinkExpireDaysMax?e.isBefore(t,"day"):0===L.shareLinkExpireDaysMin&&0!==L.shareLinkExpireDaysMax?e.isBefore((0,f.default)(),"day")||e.isAfter(n,"day"):void 0},a.onExpDateChanged=function(e){a.setState({expDate:e})},a.onPasswordInputChecked=function(){a.setState({isShowPasswordInput:!a.state.isShowPasswordInput,password:"",passwdnew:"",errorInfo:""})},a.togglePasswordVisible=function(){a.setState({isPasswordVisible:!a.state.isPasswordVisible})},a.generatePassword=function(){var e=C.Utils.generatePassword(L.shareLinkPasswordMinLength);a.setState({password:e,passwdnew:e})},a.inputPassword=function(e){var t=e.target.value.trim();a.setState({password:t})},a.inputPasswordNew=function(e){var t=e.target.value.trim();a.setState({passwdnew:t})},a.setPermission=function(e){a.setState({currentPermission:e.target.value})},a.generateShareLink=function(){if(a.validateParamsInput()){a.setState({errorInfo:""});var e=a.props,t=e.itemPath,n=e.repoID,r=a.state,i=r.password,o=r.isExpireChecked,s=r.setExp,l=r.expireDays,d=r.expDate,c=void 0;if(L.isPro){var u=C.Utils.getShareLinkPermissionObject(a.state.currentPermission).permissionDetails;c=JSON.stringify(u)}var p="";o&&(p="by-days"==s?(0,f.default)().add(parseInt(l),"days").format():d.format()),g.seafileAPI.createShareLink(n,t,i,p,c).then(function(e){var t=new J.default(e.data);a.setState({sharedLinkInfo:t})}).catch(function(e){var t=C.Utils.getErrorMsg(e);w.default.danger(t)})}},a.onCopySharedLink=function(){var e=a.state.sharedLinkInfo.link;(0,h.default)(e),w.default.success((0,L.gettext)("Share link is copied to the clipboard.")),a.props.closeShareDialog()},a.onCopyDownloadLink=function(){var e=a.state.sharedLinkInfo.link+"?dl=1";(0,h.default)(e),w.default.success((0,L.gettext)("Direct download link is copied to the clipboard.")),a.props.closeShareDialog()},a.deleteShareLink=function(){var e=a.state.sharedLinkInfo;g.seafileAPI.deleteShareLink(e.token).then(function(){a.setState({password:"",passwordnew:"",isShowPasswordInput:!1,expireDays:a.defaultExpireDays,isExpireChecked:!a.isExpireDaysNoLimit,errorInfo:"",sharedLinkInfo:null,isNoticeMessageShow:!1})}).catch(function(e){var t=C.Utils.getErrorMsg(e);w.default.danger(t)})},a.onExpireChecked=function(e){a.setState({isExpireChecked:e.target.checked})},a.onExpireDaysChanged=function(e){var t=e.target.value.trim();a.setState({expireDays:t})},a.validateParamsInput=function(){var e=a.state,t=e.isShowPasswordInput,n=e.password,r=e.passwdnew,i=e.isExpireChecked,o=e.setExp,s=e.expireDays,l=e.expDate;if(t){if(0===n.length)return a.setState({errorInfo:"Please enter password"}),!1;if(n.length<L.shareLinkPasswordMinLength)return a.setState({errorInfo:"Password is too short"}),!1;if(n!==r)return a.setState({errorInfo:"Passwords don't match"}),!1}if(i){if("by-date"==o)return!!l||(a.setState({errorInfo:"Please select an expiration time"}),!1);var d=/^\d+$/;if(!s)return a.setState({errorInfo:"Please enter days"}),!1;if(!d.test(s))return a.setState({errorInfo:"Please enter a non-negative integer"}),!1;s=parseInt(s);var c=L.shareLinkExpireDaysMin,u=L.shareLinkExpireDaysMax;if(0!==c&&0==u&&s<c)return a.setState({errorInfo:"Please enter valid days"}),!1;if(0===c&&0!==u&&s>u)return a.setState({errorInfo:"Please enter valid days"}),!1;if(0!==c&&0!==u&&(s<c||s>u))return a.setState({errorInfo:"Please enter valid days"}),!1;a.setState({expireDays:s})}return!0},a.onNoticeMessageToggle=function(){a.setState({isNoticeMessageShow:!a.state.isNoticeMessageShow})},a.toggleSendLink=function(){a.setState({isSendLinkShown:!a.state.isSendLinkShown})},a.handleMouseOver=function(){a.setState({isOpIconShown:!0})},a.handleMouseOut=function(){a.setState({isOpIconShown:!1})},a.changePerm=function(e){var t=C.Utils.getShareLinkPermissionObject(e).permissionDetails;g.seafileAPI.updateShareLink(a.state.sharedLinkInfo.token,JSON.stringify(t)).then(function(e){var t=new J.default(e.data);a.setState({sharedLinkInfo:t});var n=(0,L.gettext)("Successfully modified permission.");w.default.success(n)}).catch(function(e){var t=C.Utils.getErrorMsg(e);w.default.danger(t)})},a.isExpireDaysNoLimit=0===L.shareLinkExpireDaysMin&&0===L.shareLinkExpireDaysMax&&0==L.shareLinkExpireDaysDefault,a.defaultExpireDays=a.isExpireDaysNoLimit?"":L.shareLinkExpireDaysDefault;var n="";return 0!==L.shareLinkExpireDaysMin&&0!==L.shareLinkExpireDaysMax?n=(0,L.gettext)("{minDays_placeholder} - {maxDays_placeholder} days").replace("{minDays_placeholder}",L.shareLinkExpireDaysMin).replace("{maxDays_placeholder}",L.shareLinkExpireDaysMax):0!==L.shareLinkExpireDaysMin&&0===L.shareLinkExpireDaysMax?n=(0,L.gettext)("Greater than or equal to {minDays_placeholder} days").replace("{minDays_placeholder}",L.shareLinkExpireDaysMin):0===L.shareLinkExpireDaysMin&&0!==L.shareLinkExpireDaysMax&&(n=(0,L.gettext)("Less than or equal to {maxDays_placeholder} days").replace("{maxDays_placeholder}",L.shareLinkExpireDaysMax)),a.expirationLimitTip=n,a.state={isOpIconShown:!1,isValidate:!1,isShowPasswordInput:!1,isPasswordVisible:!1,isExpireChecked:!a.isExpireDaysNoLimit,setExp:"by-days",expireDays:a.defaultExpireDays,expDate:null,password:"",passwdnew:"",errorInfo:"",sharedLinkInfo:null,isNoticeMessageShow:!1,isLoading:!0,permissionOptions:[],currentPermission:"",isSendLinkShown:!1},a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.itemPath,a=this.props.repoID;if(g.seafileAPI.getShareLink(a,t).then(function(t){if(0!==t.data.length){var a=new J.default(t.data[0]);e.setState({isLoading:!1,sharedLinkInfo:a})}else e.setState({isLoading:!1})}).catch(function(e){var t=C.Utils.getErrorMsg(e);w.default.danger(t)}),L.isPro)if("library"===this.props.itemType){var n=C.Utils.getShareLinkPermissionList(this.props.itemType,"",t);this.setState({permissionOptions:n,currentPermission:n[0]})}else{var r=void 0;"file"===this.props.itemType?r=g.seafileAPI.getFileInfo(a,t):"dir"===this.props.itemType&&(r=g.seafileAPI.getDirInfo(a,t)),r.then(function(a){var n=a.data.can_edit,r=a.data.permission,i=C.Utils.getShareLinkPermissionList(e.props.itemType,r,t,n);e.setState({permissionOptions:i,currentPermission:i[0]})}).catch(function(e){var t=C.Utils.getErrorMsg(e);w.default.danger(t)})}}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return d.default.createElement(D.default,null);var t=(0,L.gettext)("(at least {passwordLength} characters)");if(t=t.replace("{passwordLength}",L.shareLinkPasswordMinLength),this.state.sharedLinkInfo){var a=this.state.sharedLinkInfo,n=C.Utils.getShareLinkPermissionStr(a.permissions),r=this.state,i=r.permissionOptions,o=r.isOpIconShown;return d.default.createElement("div",null,d.default.createElement(Y.Form,{className:"mb-4"},d.default.createElement(Y.FormGroup,{className:"mb-0"},d.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Link:")),d.default.createElement("dd",{className:"d-flex"},d.default.createElement("span",null,a.link)," ",a.is_expired?d.default.createElement("span",{className:"err-message"},"(",(0,L.gettext)("Expired"),")"):d.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopySharedLink}))),!a.is_dir&&a.permissions.can_download&&d.default.createElement(Y.FormGroup,{className:"mb-0"},d.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Direct Download Link:")),d.default.createElement("dd",{className:"d-flex"},d.default.createElement("span",null,a.link,"?dl=1")," ",a.is_expired?d.default.createElement("span",{className:"err-message"},"(",(0,L.gettext)("Expired"),")"):d.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopyDownloadLink}))),a.expire_date&&d.default.createElement(Y.FormGroup,{className:"mb-0"},d.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Expiration Date:")),d.default.createElement("dd",null,(0,f.default)(a.expire_date).format("YYYY-MM-DD HH:mm:ss"))),L.isPro&&a.permissions&&d.default.createElement(Y.FormGroup,{className:"mb-0"},d.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Permission:")),d.default.createElement("dd",{style:{width:"250px"},onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},d.default.createElement(Z.default,{isTextMode:!0,isEditIconShow:o&&!a.is_expired,currentPermission:n,permissionOptions:i,onPermissionChanged:this.changePerm})))),L.canSendShareLinkEmail&&!this.state.isSendLinkShown&&!this.state.isNoticeMessageShow&&d.default.createElement(Y.Button,{onClick:this.toggleSendLink,className:"mr-2"},(0,L.gettext)("Send")),this.state.isSendLinkShown&&d.default.createElement(T.default,{linkType:"shareLink",token:a.token,toggleSendLink:this.toggleSendLink,closeShareDialog:this.props.closeShareDialog}),!this.state.isSendLinkShown&&!this.state.isNoticeMessageShow&&d.default.createElement(Y.Button,{onClick:this.onNoticeMessageToggle},(0,L.gettext)("Delete")),this.state.isNoticeMessageShow&&d.default.createElement("div",{className:"alert alert-warning"},d.default.createElement("h4",{className:"alert-heading"},(0,L.gettext)("Are you sure you want to delete the share link?")),d.default.createElement("p",{className:"mb-4"},(0,L.gettext)("If the share link is deleted, no one will be able to access it any more.")),d.default.createElement("button",{className:"btn btn-primary",onClick:this.deleteShareLink},(0,L.gettext)("Delete"))," ",d.default.createElement("button",{className:"btn btn-secondary",onClick:this.onNoticeMessageToggle},(0,L.gettext)("Cancel"))))}return d.default.createElement(Y.Form,{className:"generate-share-link"},d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},d.default.createElement(Y.Input,{type:"checkbox",onChange:this.onPasswordInputChecked}),d.default.createElement("span",null,(0,L.gettext)("Add password protection"))),this.state.isShowPasswordInput&&d.default.createElement("div",{className:"ml-4"},d.default.createElement(Y.FormGroup,null,d.default.createElement(Y.Label,{for:"passwd"},(0,L.gettext)("Password")),d.default.createElement("span",{className:"tip"},t),d.default.createElement(Y.InputGroup,{style:{width:Q}},d.default.createElement(Y.Input,{id:"passwd",type:this.state.isPasswordVisible?"text":"password",value:this.state.password||"",onChange:this.inputPassword}),d.default.createElement(Y.InputGroupAddon,{addonType:"append"},d.default.createElement(Y.Button,{onClick:this.togglePasswordVisible},d.default.createElement("i",{className:"link-operation-icon fas "+(this.state.isPasswordVisible?"fa-eye":"fa-eye-slash")})),d.default.createElement(Y.Button,{onClick:this.generatePassword},d.default.createElement("i",{className:"link-operation-icon fas fa-magic"}))))),d.default.createElement(Y.FormGroup,null,d.default.createElement(Y.Label,{for:"passwd-again"},(0,L.gettext)("Password again")),d.default.createElement(Y.Input,{id:"passwd-again",style:{width:Q},type:this.state.isPasswordVisible?"text":"password",value:this.state.passwdnew||"",onChange:this.inputPasswordNew})))),d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},this.isExpireDaysNoLimit?d.default.createElement(Y.Input,{type:"checkbox",onChange:this.onExpireChecked}):d.default.createElement(Y.Input,{type:"checkbox",checked:!0,readOnly:!0,disabled:!0}),d.default.createElement("span",null,(0,L.gettext)("Add auto expiration"))),this.state.isExpireChecked&&d.default.createElement("div",{className:"ml-4"},d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},d.default.createElement(Y.Input,{type:"radio",name:"set-exp",value:"by-days",checked:"by-days"==this.state.setExp,onChange:this.setExp,className:"mr-1"}),d.default.createElement("span",null,(0,L.gettext)("Expiration days"))),"by-days"==this.state.setExp&&d.default.createElement(l.Fragment,null,d.default.createElement(Y.InputGroup,{style:{width:Q}},d.default.createElement(Y.Input,{type:"text",value:this.state.expireDays,onChange:this.onExpireDaysChanged}),d.default.createElement(Y.InputGroupAddon,{addonType:"append"},d.default.createElement(Y.InputGroupText,null,(0,L.gettext)("days")))),!this.state.isExpireDaysNoLimit&&d.default.createElement(Y.FormText,{color:"muted"},this.expirationLimitTip))),d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},d.default.createElement(Y.Input,{type:"radio",name:"set-exp",value:"by-date",checked:"by-date"==this.state.setExp,onChange:this.setExp,className:"mr-1"}),d.default.createElement("span",null,(0,L.gettext)("Expiration time"))),"by-date"==this.state.setExp&&d.default.createElement(y.default,{inputWidth:Q,disabledDate:this.disabledDate,value:this.state.expDate,onChange:this.onExpDateChanged})))),L.isPro&&d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},d.default.createElement("span",null,(0,L.gettext)("Set permission"))),this.state.permissionOptions.map(function(t,a){return d.default.createElement(Y.FormGroup,{check:!0,className:"ml-4",key:a},d.default.createElement(Y.Label,{check:!0},d.default.createElement(Y.Input,{type:"radio",name:"permission",value:t,checked:e.state.currentPermission==t,onChange:e.setPermission,className:"mr-1"}),C.Utils.getShareLinkPermissionObject(t).text))})),this.state.errorInfo&&d.default.createElement(Y.Alert,{color:"danger",className:"mt-2"},(0,L.gettext)(this.state.errorInfo)),d.default.createElement(Y.Button,{onClick:this.generateShareLink,className:"mt-2"},(0,L.gettext)("Generate")))}}]),t}(d.default.Component);H.propTypes=M,t.default=H},194:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(154),f=n(p),m=a(7),h=n(m),Y=a(6),L=a(2),S=a(4),Z=a(3),g=a(180),C=n(g),X=a(5),J=n(X),P=a(117),w=n(P),b=a(100),D=n(b),E={itemPath:u.default.string.isRequired,repoID:u.default.string.isRequired,closeShareDialog:u.default.func.isRequired},T=Z.Utils.isDesktop()?250:210,v=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getUploadLink=function(){var e=a.props.itemPath,t=a.props.repoID;S.seafileAPI.getUploadLink(t,e).then(function(e){if(0!==e.data.length){var t=new C.default(e.data[0]);a.setState({sharedUploadInfo:t})}}).catch(function(e){var t=Z.Utils.getErrorMsg(e,!0);e.response&&403===e.response.status||J.default.danger(t),a.props.closeShareDialog()})},a.addPassword=function(){a.setState({showPasswordInput:!a.state.showPasswordInput,password:"",passwdnew:"",errorInfo:""})},a.togglePasswordVisible=function(){a.setState({passwordVisible:!a.state.passwordVisible})},a.generatePassword=function(){var e=Z.Utils.generatePassword(L.shareLinkPasswordMinLength);a.setState({password:e,passwordnew:e})},a.inputPassword=function(e){a.setState({password:e.target.value})},a.inputPasswordNew=function(e){a.setState({passwordnew:e.target.value})},a.generateUploadLink=function(){if(a.validateParamsInput()){a.setState({errorInfo:""});var e=a.props,t=e.itemPath,n=e.repoID,r=a.state,i=r.password,o=r.isExpireChecked,s=r.setExp,l=r.expireDays,d=r.expDate,c="";o&&(c="by-days"==s?(0,h.default)().add(parseInt(l),"days").format():d.format()),S.seafileAPI.createUploadLink(n,t,i,c).then(function(e){var t=new C.default(e.data);a.setState({sharedUploadInfo:t})}).catch(function(e){var t=Z.Utils.getErrorMsg(e);J.default.danger(t)})}},a.validateParamsInput=function(){var e=a.state,t=e.showPasswordInput,n=e.password,r=e.passwordnew,i=e.isExpireChecked,o=e.setExp,s=e.expireDays,l=e.expDate;if(t){if(0===n.length)return a.setState({errorInfo:(0,L.gettext)("Please enter password")}),!1;if(n.length<L.shareLinkPasswordMinLength)return a.setState({errorInfo:(0,L.gettext)("Password is too short")}),!1;if(n!==r)return a.setState({errorInfo:(0,L.gettext)("Passwords don't match")}),!1}if(i){if("by-date"==o)return!!l||(a.setState({errorInfo:"Please select an expiration time"}),!1);var d=/^\d+$/;if(!s)return a.setState({errorInfo:(0,L.gettext)("Please enter days")}),!1;if(!d.test(s))return a.setState({errorInfo:(0,L.gettext)("Please enter a non-negative integer")}),!1;a.setState({expireDays:parseInt(s)})}return!0},a.onExpireChecked=function(e){a.setState({isExpireChecked:e.target.checked})},a.setExp=function(e){a.setState({setExp:e.target.value})},a.disabledDate=function(e){if(!e)return!1;if(a.isExpireDaysNoLimit)return e.isBefore((0,h.default)(),"day");var t=(0,h.default)().add(L.uploadLinkExpireDaysMin,"days"),n=(0,h.default)().add(L.uploadLinkExpireDaysMax,"days");return 0!==L.uploadLinkExpireDaysMin&&0!==L.uploadLinkExpireDaysMax?e.isBefore(t,"day")||e.isAfter(n,"day"):0!==L.uploadLinkExpireDaysMin&&0===L.uploadLinkExpireDaysMax?e.isBefore(t,"day"):0===L.uploadLinkExpireDaysMin&&0!==L.uploadLinkExpireDaysMax?e.isBefore((0,h.default)(),"day")||e.isAfter(n,"day"):void 0},a.onExpDateChanged=function(e){a.setState({expDate:e})},a.onExpireDaysChanged=function(e){var t=e.target.value.trim();a.setState({expireDays:t})},a.onCopyUploadLink=function(){var e=a.state.sharedUploadInfo.link;(0,f.default)(e),J.default.success((0,L.gettext)("Upload link is copied to the clipboard.")),a.props.closeShareDialog()},a.deleteUploadLink=function(){var e=a.state.sharedUploadInfo;S.seafileAPI.deleteUploadLink(e.token).then(function(){a.setState({showPasswordInput:!1,expireDays:a.defaultExpireDays,isExpireChecked:!a.isExpireDaysNoLimit,password:"",passwordnew:"",sharedUploadInfo:null})}).catch(function(e){var t=Z.Utils.getErrorMsg(e);J.default.danger(t)})},a.toggleSendLink=function(){a.setState({isSendLinkShown:!a.state.isSendLinkShown})},a.isExpireDaysNoLimit=0===L.uploadLinkExpireDaysMin&&0===L.uploadLinkExpireDaysMax&&0==L.uploadLinkExpireDaysDefault,a.defaultExpireDays=a.isExpireDaysNoLimit?"":L.uploadLinkExpireDaysDefault;var n="";return 0!==L.uploadLinkExpireDaysMin&&0!==L.uploadLinkExpireDaysMax?n=(0,L.gettext)("{minDays_placeholder} - {maxDays_placeholder} days").replace("{minDays_placeholder}",L.uploadLinkExpireDaysMin).replace("{maxDays_placeholder}",L.uploadLinkExpireDaysMax):0!==L.uploadLinkExpireDaysMin&&0===L.uploadLinkExpireDaysMax?n=(0,L.gettext)("Greater than or equal to {minDays_placeholder} days").replace("{minDays_placeholder}",L.uploadLinkExpireDaysMin):0===L.uploadLinkExpireDaysMin&&0!==L.uploadLinkExpireDaysMax&&(n=(0,L.gettext)("Less than or equal to {maxDays_placeholder} days").replace("{maxDays_placeholder}",L.uploadLinkExpireDaysMax)),a.expirationLimitTip=n,a.state={showPasswordInput:!1,passwordVisible:!1,password:"",passwdnew:"",sharedUploadInfo:null,isSendLinkShown:!1,isExpireChecked:!a.isExpireDaysNoLimit,setExp:"by-days",expireDays:a.defaultExpireDays,expDate:null},a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.getUploadLink()}},{key:"render",value:function(){var e=this.state.isSendLinkShown,t=(0,L.gettext)("(at least {passwordLength} characters)");if(t=t.replace("{passwordLength}",L.shareLinkPasswordMinLength),this.state.sharedUploadInfo){var a=this.state.sharedUploadInfo;return d.default.createElement("div",null,d.default.createElement(Y.Form,{className:"mb-4"},d.default.createElement(Y.FormGroup,null,d.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Upload Link:")),d.default.createElement("dd",{className:"d-flex"},d.default.createElement("span",null,a.link),d.default.createElement("span",{className:"far fa-copy action-icon",onClick:this.onCopyUploadLink}))),a.expire_date&&d.default.createElement(Y.FormGroup,{className:"mb-0"},d.default.createElement("dt",{className:"text-secondary font-weight-normal"},(0,L.gettext)("Expiration Date:")),d.default.createElement("dd",null,(0,h.default)(a.expire_date).format("YYYY-MM-DD HH:mm:ss")))),L.canSendShareLinkEmail&&!e&&d.default.createElement(Y.Button,{onClick:this.toggleSendLink,className:"mr-2"},(0,L.gettext)("Send")),!e&&d.default.createElement(Y.Button,{onClick:this.deleteUploadLink},(0,L.gettext)("Delete")),e&&d.default.createElement(w.default,{linkType:"uploadLink",token:a.token,toggleSendLink:this.toggleSendLink,closeShareDialog:this.props.closeShareDialog}))}return d.default.createElement(Y.Form,{className:"generate-upload-link"},d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},d.default.createElement(Y.Input,{type:"checkbox",onChange:this.addPassword}),d.default.createElement("span",null,(0,L.gettext)("Add password protection"))),this.state.showPasswordInput&&d.default.createElement("div",{className:"ml-4"},d.default.createElement(Y.FormGroup,null,d.default.createElement(Y.Label,{for:"passwd"},(0,L.gettext)("Password")),d.default.createElement("span",{className:"tip"},t),d.default.createElement(Y.InputGroup,{style:{width:T}},d.default.createElement(Y.Input,{id:"passwd",type:this.state.passwordVisible?"text":"password",value:this.state.password||"",onChange:this.inputPassword}),d.default.createElement(Y.InputGroupAddon,{addonType:"append"},d.default.createElement(Y.Button,{onClick:this.togglePasswordVisible},d.default.createElement("i",{className:"link-operation-icon fas "+(this.state.passwordVisible?"fa-eye":"fa-eye-slash")})),d.default.createElement(Y.Button,{onClick:this.generatePassword},d.default.createElement("i",{className:"link-operation-icon fas fa-magic"}))))),d.default.createElement(Y.FormGroup,null,d.default.createElement(Y.Label,{for:"passwd-again"},(0,L.gettext)("Password again")),d.default.createElement(Y.Input,{id:"passwd-again",style:{width:T},type:this.state.passwordVisible?"text":"password",value:this.state.passwordnew||"",onChange:this.inputPasswordNew})))),d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},this.isExpireDaysNoLimit?d.default.createElement(Y.Input,{type:"checkbox",onChange:this.onExpireChecked}):d.default.createElement(Y.Input,{type:"checkbox",checked:!0,readOnly:!0,disabled:!0}),d.default.createElement("span",null,(0,L.gettext)("Add auto expiration"))),this.state.isExpireChecked&&d.default.createElement("div",{className:"ml-4"},d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},d.default.createElement(Y.Input,{type:"radio",name:"set-exp",value:"by-days",checked:"by-days"==this.state.setExp,onChange:this.setExp,className:"mr-1"}),d.default.createElement("span",null,(0,L.gettext)("Expiration days"))),"by-days"==this.state.setExp&&d.default.createElement(l.Fragment,null,d.default.createElement(Y.InputGroup,{style:{width:T}},d.default.createElement(Y.Input,{type:"text",value:this.state.expireDays,onChange:this.onExpireDaysChanged}),d.default.createElement(Y.InputGroupAddon,{addonType:"append"},d.default.createElement(Y.InputGroupText,null,(0,L.gettext)("days")))),!this.state.isExpireDaysNoLimit&&d.default.createElement(Y.FormText,{color:"muted"},this.expirationLimitTip))),d.default.createElement(Y.FormGroup,{check:!0},d.default.createElement(Y.Label,{check:!0},d.default.createElement(Y.Input,{type:"radio",name:"set-exp",value:"by-date",checked:"by-date"==this.state.setExp,onChange:this.setExp,className:"mr-1"}),d.default.createElement("span",null,(0,L.gettext)("Expiration time"))),"by-date"==this.state.setExp&&d.default.createElement(D.default,{inputWidth:T,disabledDate:this.disabledDate,value:this.state.expDate,onChange:this.onExpDateChanged})))),this.state.errorInfo&&d.default.createElement(Y.Alert,{color:"danger",className:"mt-2"},this.state.errorInfo),d.default.createElement(Y.Button,{className:"generate-link-btn",onClick:this.generateUploadLink},(0,L.gettext)("Generate")))}}]),t}(d.default.Component);v.propTypes=E,t.default=v},195:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(6),f=a(5),m=n(f),h=a(84),Y=n(h),L=a(2),S=a(4),Z=a(3),g=a(8),C=n(g),X={path:u.default.string.isRequired,repoID:u.default.string.isRequired,direntType:u.default.string},J=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.copyToClipBoard=function(){(0,Y.default)(a.state.smartLink);var e=(0,L.gettext)("Internal link has been copied to clipboard");m.default.success(e)},a.state={smartLink:"",isInternalLoding:!0},a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.repoID,n=t.path,r=t.direntType;S.seafileAPI.getInternalLink(a,n,r).then(function(t){e.setState({smartLink:t.data.smart_link,isInternalLoding:!1})}).catch(function(e){var t=Z.Utils.getErrorMsg(e);m.default.danger(t)})}},{key:"render",value:function(){return this.state.isInternalLoding?d.default.createElement(C.default,null):d.default.createElement("div",null,d.default.createElement("p",{className:"tip mb-1"},(0,L.gettext)("An internal link is a link to a file or folder that can be accessed by users with read permission to the file or folder.")),d.default.createElement("p",null,d.default.createElement("a",{target:"_blank",href:this.state.smartLink},this.state.smartLink)),d.default.createElement(p.Button,{onClick:this.copyToClipBoard,color:"primary",className:"mt-2"},(0,L.gettext)("Copy")))}}]),t}(d.default.Component);J.propTypes=X,t.default=J},2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dirPath="/",t.gettext=window.gettext,t.siteRoot=window.app.config.siteRoot,t.loginUrl=window.app.config.loginUrl,t.avatarInfo=window.app.config.avatarInfo,t.logoPath=window.app.config.logoPath,t.mediaUrl=window.app.config.mediaUrl,t.siteTitle=window.app.config.siteTitle,t.siteName=window.app.config.siteName,t.logoWidth=window.app.config.logoWidth,t.logoHeight=window.app.config.logoHeight,t.isPro="True"===window.app.config.isPro,t.isDocs="True"===window.app.config.isDocs,t.lang=window.app.config.lang,t.fileServerRoot=window.app.config.fileServerRoot,t.seafileVersion=window.app.config.seafileVersion,t.serviceURL=window.app.config.serviceURL,t.appAvatarURL=window.app.config.avatarURL,t.faviconPath=window.app.config.faviconPath,t.loginBGPath=window.app.config.loginBGPath,t.trashReposExpireDays=window.app.pageOptions.trashReposExpireDays,t.dtableWebServer=window.app.pageOptions.dtableWebServer,t.seafileCollabServer=window.app.pageOptions.seafileCollabServer,t.name=window.app.pageOptions.name,t.contactEmail=window.app.pageOptions.contactEmail,t.username=window.app.pageOptions.username,t.canAddRepo=window.app.pageOptions.canAddRepo,t.canAddGroup=window.app.pageOptions.canAddGroup,t.canGenerateShareLink=window.app.pageOptions.canGenerateShareLink,t.canGenerateUploadLink=window.app.pageOptions.canGenerateUploadLink,t.canSendShareLinkEmail=window.app.pageOptions.canSendShareLinkEmail,t.canViewOrg="True"===window.app.pageOptions.canViewOrg,t.fileAuditEnabled=window.app.pageOptions.fileAuditEnabled,t.enableFileComment=!!window.app.pageOptions.enableFileComment,t.folderPermEnabled=window.app.pageOptions.folderPermEnabled,t.enableResetEncryptedRepoPassword="True"===window.app.pageOptions.enableResetEncryptedRepoPassword,t.isEmailConfigured="True"===window.app.pageOptions.isEmailConfigured,t.enableUploadFolder="True"===window.app.pageOptions.enableUploadFolder,t.enableResumableFileUpload="True"===window.app.pageOptions.enableResumableFileUpload,t.resumableUploadFileBlockSize=window.app.pageOptions.resumableUploadFileBlockSize,t.storages=window.app.pageOptions.storages,t.enableRepoSnapshotLabel=window.app.pageOptions.enableRepoSnapshotLabel,t.shareLinkPasswordMinLength=window.app.pageOptions.shareLinkPasswordMinLength,t.shareLinkExpireDaysMin=window.app.pageOptions.shareLinkExpireDaysMin,t.shareLinkExpireDaysMax=window.app.pageOptions.shareLinkExpireDaysMax,t.sideNavFooterCustomHtml=window.app.pageOptions.sideNavFooterCustomHtml,t.shareLinkExpireDaysDefault=window.app.pageOptions.shareLinkExpireDaysDefault,t.uploadLinkExpireDaysMin=window.app.pageOptions.uploadLinkExpireDaysMin,t.uploadLinkExpireDaysMax=window.app.pageOptions.uploadLinkExpireDaysMax,t.uploadLinkExpireDaysDefault=window.app.pageOptions.uploadLinkExpireDaysDefault,t.maxFileName=window.app.pageOptions.maxFileName,t.canPublishRepo=window.app.pageOptions.canPublishRepo,t.enableEncryptedLibrary=window.app.pageOptions.enableEncryptedLibrary,t.enableRepoHistorySetting=window.app.pageOptions.enableRepoHistorySetting,t.isSystemStaff=window.app.pageOptions.isSystemStaff,t.thumbnailSizeForOriginal=window.app.pageOptions.thumbnailSizeForOriginal,t.repoPasswordMinLength=window.app.pageOptions.repoPasswordMinLength,t.canAddPublicRepo=window.app.pageOptions.canAddPublicRepo,t.canInvitePeople=window.app.pageOptions.canInvitePeople,t.canLockUnlockFile=window.app.pageOptions.canLockUnlockFile,t.customNavItems=window.app.pageOptions.customNavItems,t.enableShowContactEmailWhenSearchUser=window.app.pageOptions.enableShowContactEmailWhenSearchUser,t.maxUploadFileSize=window.app.pageOptions.maxUploadFileSize,t.maxNumberOfFilesForFileupload=window.app.pageOptions.maxNumberOfFilesForFileupload,t.curNoteMsg=window.app.pageOptions.curNoteMsg,t.curNoteID=window.app.pageOptions.curNoteID,t.enableTC=window.app.pageOptions.enableTC,t.workspaceID=window.app.pageOptions.workspaceID,t.showLogoutIcon=window.app.pageOptions.showLogoutIcon,t.additionalShareDialogNote=window.app.pageOptions.additionalShareDialogNote,t.additionalAppBottomLinks=window.app.pageOptions.additionalAppBottomLinks,t.additionalAboutDialogLinks=window.app.pageOptions.additionalAboutDialogLinks,t.slug=window.wiki?window.wiki.config.slug:"",t.repoID=window.wiki?window.wiki.config.repoId:"",t.initialPath=window.wiki?window.wiki.config.initial_path:"",t.permission=window.wiki?"True"===window.wiki.config.permission:"",t.isDir=window.wiki?window.wiki.config.isDir:"",t.serviceUrl=window.wiki?window.wiki.config.serviceUrl:"",t.isPublicWiki=window.wiki?"True"===window.wiki.config.isPublicWiki:"",t.sharedToken=window.wiki?window.wiki.config.sharedToken:"",t.sharedType=window.wiki?window.wiki.config.sharedType:"",t.hasIndex=window.wiki?window.wiki.config.hasIndex:"",t.PER_PAGE=25,t.historyRepoID=window.fileHistory?window.fileHistory.pageOptions.repoID:"",t.repoName=window.fileHistory?window.fileHistory.pageOptions.repoName:"",t.filePath=window.fileHistory?window.fileHistory.pageOptions.filePath:"",t.fileName=window.fileHistory?window.fileHistory.pageOptions.fileName:"",t.useNewAPI=window.fileHistory?window.fileHistory.pageOptions.use_new_api:"",t.canDownload=window.fileHistory?window.fileHistory.pageOptions.can_download_file:"",t.canCompare=window.fileHistory?window.fileHistory.pageOptions.can_compare:"",t.draftFilePath=window.draft?window.draft.config.draftFilePath:"",t.draftOriginFilePath=window.draft?window.draft.config.draftOriginFilePath:"",t.draftFileName=window.draft?window.draft.config.draftFileName:"",t.draftID=window.draft?window.draft.config.draftID:"",t.draftRepoID=window.draft?window.draft.config.draftRepoID:"",t.author=window.draft?window.draft.config.author:"",t.authorAvatar=window.draft?window.draft.config.authorAvatar:"",t.originFileExists=window.draft?window.draft.config.originFileExists:"",t.draftFileExists=window.draft?window.draft.config.draftFileExists:"",t.draftStatus=window.draft?window.draft.config.draftStatus:"",t.draftPublishVersion=window.draft?window.draft.config.draftPublishVersion:"",t.originFileVersion=window.draft?window.draft.config.originFileVersion:"",t.filePermission=window.draft?window.draft.config.perm:"",t.orgID=window.org?window.org.pageOptions.orgID:"",t.invitationLink=window.org?window.org.pageOptions.invitationLink:"",t.orgMemberQuotaEnabled=window.org?window.org.pageOptions.orgMemberQuotaEnabled:"",t.constanceEnabled=window.sysadmin?window.sysadmin.pageOptions.constance_enabled:"",t.multiTenancy=window.sysadmin?window.sysadmin.pageOptions.multi_tenancy:"",t.multiInstitution=window.sysadmin?window.sysadmin.pageOptions.multi_institution:"",t.sysadminExtraEnabled=window.sysadmin?window.sysadmin.pageOptions.sysadmin_extra_enabled:"",t.enableGuestInvitation=window.sysadmin?window.sysadmin.pageOptions.enable_guest_invitation:"",t.enableTermsAndConditions=window.sysadmin?window.sysadmin.pageOptions.enable_terms_and_conditions:"",t.isDefaultAdmin=window.sysadmin?window.sysadmin.pageOptions.is_default_admin:"",t.enableFileScan=window.sysadmin?window.sysadmin.pageOptions.enable_file_scan:"",t.canViewSystemInfo=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_system_info:"",t.canViewStatistic=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_statistic:"",t.canConfigSystem=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_config_system:"",t.canManageLibrary=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_library:"",t.canManageUser=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_user:"",t.canManageGroup=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_group:"",t.canViewUserLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_user_log:"",t.canViewAdminLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_admin_log:"",t.otherPermission=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.other_permission:"",t.enableWorkWeixin=window.sysadmin?window.sysadmin.pageOptions.enable_work_weixin:"",t.enableDingtalk=window.sysadmin?window.sysadmin.pageOptions.enable_dingtalk:"",t.enableSysAdminViewRepo=window.sysadmin?window.sysadmin.pageOptions.enableSysAdminViewRepo:"",t.haveLDAP=window.sysadmin?window.sysadmin.pageOptions.haveLDAP:"",t.enableShareLinkReportAbuse=window.sysadmin?window.sysadmin.pageOptions.enable_share_link_report_abuse:""},20:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.strChineseFirstPY="YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY"},21:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),l=a(10),d=n(l),c=a(22),u=n(c),p="undefined"!==typeof window&&"undefined"!==typeof window.document,f=function e(){var t=this;if(r(this,e),this._bindNotify=function(e){t.notifyHandler=e},this._bindGetToasts=function(e){t.getToastsHandler=e},this._bindCloseAll=function(e){t.closeAllHandler=e},this.getToasts=function(){return t.getToastsHandler()},this.closeAll=function(){return t.closeAllHandler()},this.notify=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,i({},a,{intent:"none"}))},this.success=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,i({},a,{intent:"success"}))},this.warning=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,i({},a,{intent:"warning"}))},this.danger=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,i({},a,{intent:"danger"}))},p){var a=document.createElement("div");a.setAttribute("data-evergreen-toaster-container",""),document.body.appendChild(a),d.default.render(s.default.createElement(u.default,{bindNotify:this._bindNotify,bindGetToasts:this._bindGetToasts,bindCloseAll:this._bindCloseAll}),a)}};t.default=f},22:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),p=n(u),f=a(11),m=a(1),h=n(m),Y=a(23),L=n(Y),S=(0,f.css)({maxWidth:560,margin:"0 auto",top:0,left:0,right:0,position:"fixed",zIndex:999999}),Z=function(e){return Object.hasOwnProperty.call(e,"id")},g=function(e){function t(e,a){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.getToasts=function(){return n.state.toasts},n.closeAll=function(){n.getToasts().forEach(function(e){return e.close()})},n.notify=function(e,t){if(Z(t)){var a=!0,r=!1,o=void 0;try{for(var s,l=n.state.toasts[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var d=s.value;String(d.id).startsWith(t.id)&&n.closeToast(d.id)}}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}}var c=n.createToastInstance(e,t);return n.setState(function(e){return{toasts:[c].concat(i(e.toasts))}}),c},n.createToastInstance=function(e,a){var r=++t.idCounter,i=Z(a)?a.id+"-"+r:r;return{id:i,title:e,description:a.description,hasCloseButton:a.hasCloseButton||!0,duration:a.duration||2,close:function(){return n.closeToast(i)},intent:a.intent}},n.closeToast=function(e){n.setState(function(t){return{toasts:t.toasts.map(function(t){return t.id===e?d({},t,{isShown:!1}):t})}})},n.removeToast=function(e){n.setState(function(t){return{toasts:t.toasts.filter(function(t){return t.id!==e})}})},e.bindNotify(n.notify),e.bindGetToasts(n.getToasts),e.bindCloseAll(n.closeAll),n.state={toasts:[]},n}return l(t,e),c(t,[{key:"render",value:function(){var e=this;return p.default.createElement("span",{className:S},this.state.toasts.map(function(t){var a=t.id,n=t.description,i=r(t,["id","description"]);return p.default.createElement(L.default,d({key:a,onRemove:function(){return e.removeToast(a)}},i),n)}))}}]),t}(p.default.PureComponent);g.propTypes={bindNotify:h.default.func.isRequired,bindGetToasts:h.default.func.isRequired,bindCloseAll:h.default.func.isRequired},g.idCounter=0,t.default=g},23:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(11),u=a(1),p=n(u),f=a(46),m=n(f),h=a(24),Y=n(h),L={deceleration:"cubic-bezier(0.0, 0.0, 0.2, 1)",acceleration:"cubic-bezier(0.4, 0.0, 1, 1)",spring:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},S=c.css.keyframes("openAnimation",{from:{opacity:0,transform:"translateY(-120%)"},to:{transform:"translateY(0)"}}),Z=c.css.keyframes("closeAnimation",{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0.9)",opacity:0}}),g=(0,c.css)({display:"flex",flexDirection:"column",alignItems:"center",height:0,transition:"all 240ms "+L.deceleration,'&[data-state="entering"], &[data-state="entered"]':{animation:S+" 240ms "+L.spring+" both"},'&[data-state="exiting"]':{animation:Z+" 120ms "+L.acceleration+" both"}}),C=function(e){function t(){var e,a,n,o;r(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={isShown:!0,height:0},n.close=function(){n.clearCloseTimer(),n.setState({isShown:!1})},n.startCloseTimer=function(){n.props.duration&&(n.closeTimer=setTimeout(function(){n.close()},1e3*n.props.duration))},n.clearCloseTimer=function(){n.closeTimer&&(clearTimeout(n.closeTimer),n.closeTimer=null)},n.handleMouseEnter=function(){n.clearCloseTimer()},n.handleMouseLeave=function(){n.startCloseTimer()},n.onRef=function(e){if(null!==e){var t=e.getBoundingClientRect(),a=t.height;n.setState({height:a})}},o=a,i(n,o)}return o(t,e),s(t,[{key:"componentDidUpdate",value:function(e){e.isShown!==this.props.isShown&&this.setState({isShown:this.props.isShown})}},{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var e=this;return d.default.createElement(m.default,{appear:!0,unmountOnExit:!0,timeout:240,in:this.state.isShown,onExited:this.props.onRemove},function(t){return d.default.createElement("div",{"data-state":t,className:g,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,style:{height:e.state.height,zIndex:e.props.zIndex,marginBottom:e.state.isShown?0:-e.state.height}},d.default.createElement("div",{ref:e.onRef,style:{padding:8}},d.default.createElement(Y.default,{intent:e.props.intent,title:e.props.title,children:e.props.children,isRemoveable:e.props.hasCloseButton,onRemove:function(){return e.close()}})))})}}]),t}(d.default.PureComponent);C.propTypes={zIndex:p.default.number,duration:p.default.number,onRemove:p.default.func,intent:p.default.oneOf(["none","success","warning","danger"]).isRequired,title:p.default.node,children:p.default.node,hasCloseButton:p.default.bool,isShown:p.default.bool},C.defaultProps={intent:"none"},t.default=C},2396:function(e,t,a){a(16),e.exports=a(2397)},2397:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(10),u=n(c),p=a(4),f=a(2),m=a(443),h=n(m),Y=a(448),L=n(Y),S=a(8),Z=n(S),g=a(283),C=n(g);a(284);var X=window.app.pageOptions,J=X.repoID,P=X.filePath,w=X.err,b=X.commitID,D=X.fileType,E=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){return d.default.createElement(h.default,{content:d.default.createElement(T,null)})}}]),t}(d.default.Component),T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!w,errorMsg:""},a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;if(!w){!function t(){p.seafileAPI.queryOfficeFileConvertStatus(J,b,P,D.toLowerCase()).then(function(a){switch(a.data.status){case"PROCESSING":e.setState({isLoading:!0}),setTimeout(t,2e3);break;case"ERROR":e.setState({isLoading:!1,errorMsg:(0,f.gettext)("Document convertion failed.")});break;case"DONE":e.setState({isLoading:!1,errorMsg:""});var n=document.createElement("script");n.type="text/javascript",n.src=f.mediaUrl+"js/pdf/viewer.js",document.body.append(n)}}).catch(function(t){t.response?e.setState({isLoading:!1,errorMsg:(0,f.gettext)("Document convertion failed.")}):e.setState({isLoading:!1,errorMsg:(0,f.gettext)("Please check the network.")})})}()}}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.errorMsg;return w?d.default.createElement(L.default,null):t?d.default.createElement(Z.default,null):a?d.default.createElement(L.default,{errorMsg:a}):d.default.createElement("div",{className:"file-view-content flex-1 pdf-file-view"},d.default.createElement(C.default,null))}}]),t}(d.default.Component);u.default.render(d.default.createElement(E,null),document.getElementById("wrapper"))},24:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=function(e){return e&&e.__esModule?e:{default:e}}(l),c=a(11),u=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.containerStyle=(0,c.css)({borderRadius:"3px",backgroundColor:"#fff",padding:"10px 16px",display:"flex",boxSizing:"border-box",boxShadow:"rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px",justifyContent:"space-between",flexDirection:"row"}),a.containerBorderSuccess=(0,c.css)({borderLeft:"3px solid rgb(71, 184, 129)"}),a.containerBorderWarn=(0,c.css)({borderLeft:"3px solid rgb(217, 130, 43)"}),a.containerBorderDanger=(0,c.css)({borderLeft:"3px solid rgb(236, 76, 71)"}),a.containerBorderNotify=(0,c.css)({borderLeft:"3px solid rgb(16, 112, 202)"}),a.toastTextTitle=(0,c.css)({fontWeight:"600",fontSize:"14px",color:"#435a6f",margin:"0"}),a.toastTextChild=(0,c.css)({fontSize:"14px",color:"#999",margin:"0"}),a.toastClose=(0,c.css)({marginLeft:"15px",height:"24px",width:"24px",lineHeight:"22px",fontWeight:"700",textAlign:"center",fontSize:"20px",color:"#000",cursor:"pointer",opacity:"0.5",":hover":{opacity:1}}),a.toastIcon=(0,c.css)({marginRight:"10px",width:"14px",height:"20px",lineHeight:"20px"}),a}return i(t,e),s(t,[{key:"getContainerStyle",value:function(e){switch(e){case"success":return{borderStyle:this.containerBorderSuccess,iconColor:(0,c.css)({color:"rgb(71, 184, 129)"}),iconClass:"fa fa-check-circle"};case"warning":return{borderStyle:this.containerBorderWarn,iconColor:(0,c.css)({color:"rgb(217, 130, 43)"}),iconClass:"fa fa-exclamation-triangle"};case"none":return{borderStyle:this.containerBorderNotify,iconColor:(0,c.css)({color:"rgb(16, 112, 202)"}),iconClass:"fa fa-exclamation-circle"};case"danger":return{borderStyle:this.containerBorderDanger,iconColor:(0,c.css)({color:"rgb(236, 76, 71)"}),iconClass:"fa fa-exclamation-circle"}}}},{key:"render",value:function(){var e=this.getContainerStyle(this.props.intent);return d.default.createElement("div",(0,c.css)(e.borderStyle,this.containerStyle),d.default.createElement("div",{className:this.toastIcon},d.default.createElement("i",o({className:e.iconClass},e.iconColor))),d.default.createElement("div",{className:this.toastTextContainer},d.default.createElement("p",{className:this.toastTextTitle},this.props.title),this.props.children?d.default.createElement("p",{className:this.toastTextChild},this.props.children):null),d.default.createElement("div",{onClick:this.props.onRemove,className:this.toastClose},d.default.createElement("span",null,"\xd7")))}}]),t}(d.default.PureComponent);t.default=u},242:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(6),f=a(2),m=a(4),h=a(47),Y=n(h),L=a(5),S=n(L),Z=a(3);a(150);var g={participant:u.default.object.isRequired,deleteFileParticipant:u.default.func.isRequired},C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onMouseOver=function(){a.setState({isOperationShow:!0})},a.onMouseLeave=function(){a.setState({isOperationShow:!1})},a.state={isOperationShow:!1},a}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props.participant;return d.default.createElement("div",{className:"participant-select-info",onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},d.default.createElement("div",{className:"d-flex",style:{maxWidth:"90%"}},d.default.createElement("img",{className:"avatar participant-select-avatar",src:e.avatar_url,alt:""}),d.default.createElement("span",{className:"participant-select-name ellipsis"},e.name)),d.default.createElement("i",{className:"action-icon sf2-icon-x3 "+(!this.state.isOperationShow&&"o-hidden"),title:(0,f.gettext)("Delete"),onClick:this.props.deleteFileParticipant.bind(this,e.email)}))}}]),t}(l.Component);C.propTypes=g;var X={repoID:u.default.string.isRequired,filePath:u.default.string.isRequired,toggleFileParticipantDialog:u.default.func.isRequired,fileParticipantList:u.default.array.isRequired,onParticipantsChange:u.default.func},J=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSelectChange=function(e){a.setState({selectedOption:e})},a.deleteFileParticipant=function(e){var t=a.props,n=t.repoID,r=t.filePath;m.seafileAPI.deleteFileParticipant(n,r,e).then(function(e){a.props.onParticipantsChange(n,r)}).catch(function(e){var t=Z.Utils.getErrorMsg(e);S.default.danger(t)}),a.refs.userSelect.clearSelect()},a.addFileParticipant=function(){var e=a.state.selectedOption,t=a.props,n=t.repoID,r=t.filePath;if(e&&0!==e.length){var i=e.map(function(e){return e.email});m.seafileAPI.addFileParticipants(n,r,i).then(function(e){a.props.onParticipantsChange(n,r),e.data.failed.map(function(e){var t=(0,f.gettext)("Failed to add {email_placeholder}: {error_msg_placeholder}").replace("{email_placeholder}",e.email).replace("{error_msg_placeholder}",e.error_msg);S.default.danger(t,{duration:3})})}).catch(function(e){S.default.danger(Z.Utils.getErrorMsg(e))}),a.setState({selectedOption:null}),a.refs.userSelect.clearSelect()}},a.state={selectedOption:null},a}return o(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.fileParticipantList.map(function(t,a){return d.default.createElement(C,{key:a,participant:t,deleteFileParticipant:e.deleteFileParticipant})});return d.default.createElement(p.Modal,{isOpen:!0,toggle:this.props.toggleFileParticipantDialog},d.default.createElement(p.ModalHeader,{toggle:this.props.toggleFileParticipantDialog},(0,f.gettext)("Participants")),d.default.createElement(p.ModalBody,null,d.default.createElement("div",{className:"participant-add"},d.default.createElement(Y.default,{ref:"userSelect",isMulti:!0,className:"participant-select",placeholder:(0,f.gettext)("Select users..."),onSelectChange:this.handleSelectChange}),d.default.createElement(p.Button,{className:"btn btn-secondary ml-2",onClick:this.addFileParticipant},(0,f.gettext)("Add"))),t),d.default.createElement(p.ModalFooter,null,d.default.createElement(p.Button,{color:"secondary",onClick:this.props.toggleFileParticipantDialog},(0,f.gettext)("Close"))))}}]),t}(l.Component);J.propTypes=X,t.default=J},25:function(e,t,a){"use strict";function n(){var e=o.loginUrl+"?next="+encodeURIComponent(location.href),t=(0,o.gettext)("Permission denied. Please try {placeholder-left}login again.{placeholder-right}");return t=t.replace("{placeholder-left}",'<a class="action-link p-0" href='+e+">"),t=t.replace("{placeholder-right}","</a>"),i.default.createElement("span",{className:"error",dangerouslySetInnerHTML:{__html:t}})}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=a(2);t.default=n},258:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(6),f=a(14),m=n(f),h=a(242),Y=n(h),L=a(2);a(150);var S={onParticipantsChange:u.default.func.isRequired,participants:u.default.array.isRequired,repoID:u.default.string.isRequired,filePath:u.default.string.isRequired,showIconTip:u.default.bool.isRequired},Z=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleDialog=function(){a.setState({showDialog:!a.state.showDialog})},a.tooltipToggle=function(){a.setState({tooltipOpen:!a.state.tooltipOpen})},a.state={showDialog:!1,tooltipOpen:!1},a.targetID="add-participant-icon",a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.targetID=this.targetID+Math.floor(1e3*Math.random())}},{key:"render",value:function(){var e=this.props,t=e.participants,a=e.repoID,n=e.filePath,r=e.showIconTip;return d.default.createElement("div",{className:"participants mb-2 position-relative"},t.map(function(e,t){return d.default.createElement(C,{item:e,index:t,key:t})}),d.default.createElement("span",{className:"add-participants",onClick:this.toggleDialog,id:this.targetID},d.default.createElement("i",{className:"fas fa-plus-circle"})),r&&d.default.createElement(p.Tooltip,{toggle:this.tooltipToggle,delay:{show:0,hide:0},target:this.targetID,placement:"bottom",isOpen:this.state.tooltipOpen},(0,L.gettext)("Add participants")),this.state.showDialog&&d.default.createElement(m.default,null,d.default.createElement(Y.default,{repoID:a,filePath:n,toggleFileParticipantDialog:this.toggleDialog,fileParticipantList:t,onParticipantsChange:this.props.onParticipantsChange})))}}]),t}(d.default.Component);Z.propTypes=S;var g={index:u.default.number.isRequired,item:u.default.object.isRequired},C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleAvatarTooltip=function(){a.setState({showAvatarTooltip:!a.state.showAvatarTooltip})},a.state={showAvatarTooltip:!1},a.targetID="participant-avatar-",a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.targetID=this.targetID+this.props.index+Math.floor(1e3*Math.random())}},{key:"render",value:function(){var e=this.props,t=e.item,a=e.index;return d.default.createElement("span",{className:"participant-avatar"},d.default.createElement("img",{src:t.avatar_url,className:"avatar",id:this.targetID,alt:"avatar",key:a}),d.default.createElement(p.Tooltip,{toggle:this.toggleAvatarTooltip,delay:{show:0,hide:0},target:this.targetID,placement:"bottom",isOpen:this.state.showAvatarTooltip},t.name))}}]),t}(d.default.Component);C.propTypes=g,t.default=Z},27:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(49),o=function(){function e(){n(this,e)}return r(e,[{key:"init",value:function(e){var t=e.server,a=e.username,n=e.password,r=e.token;return this.server=t,this.username=a,this.password=n,this.token=r,this.token&&this.server&&(this.req=i.create({baseURL:this.server,headers:{Authorization:"Token "+this.token}})),this}},{key:"initForSeahubUsage",value:function(e){var t=e.siteRoot,a=e.xcsrfHeaders;if(t&&"/"===t.charAt(t.length-1)){var n=t.substring(0,t.length-1);this.server=n}else this.server=t;return this.req=i.create({headers:{"X-CSRFToken":a}}),this}},{key:"_sendPostRequest",value:function(e,t){return t.getHeaders?this.req.post(e,t,{headers:t.getHeaders()}):this.req.post(e,t)}},{key:"getToken",value:function(){var e=this,t=this.server+"/api2/auth-token/";i.post(t,{username:this.username,password:this.password}).then(function(t){return e.token=t.data,e.token})}},{key:"certifyOnBloxberg",value:function(e,t){var a=this.server+"/api2/certify/",n={repo_id:e,path:t};return this.req.post(a,n)}},{key:"addDoi",value:function(e){var t=this.server+"/api2/doi/",a={repo_id:e};return this.req.post(t,a)}},{key:"canArchive",value:function(e){var t=this.server+"/api2/can-archive/",a={repo_id:e};return this.req.post(t,a)}},{key:"archiveLibrary",value:function(e){var t=this.server+"/api2/archive/",a={repo_id:e};return this.req.post(t,a)}},{key:"listLibraryDetails",value:function(){var e=this.server+"/api2/library-details/";return this.req.get(e)}},{key:"getArchiveMetadata",value:function(e){var t=this.server+"/api2/archive-metadata/?repo_id="+e;return this.req.get(t)}},{key:"updateArchiveMetadata",value:function(e,t){var a=this.server+"/api2/archive-metadata/";return t.repo_id=e,this.req.post(a,t)}},{key:"getMpgInstitutes",value:function(){var e=this.server+"/api2/mpg-institutes/";return this.req.get(e)}}]),e}();t.KeeperAPI=o},277:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(6),u=a(1),p=n(u),f=a(5),m=n(f),h=a(84),Y=n(h),L=a(2),S=a(4),Z=a(3);a(278);var g={path:p.default.string.isRequired,repoID:p.default.string.isRequired},C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isOpen:!1,smartLink:""},a.toggle=a.toggle.bind(a),a.getInternalLink=a.getInternalLink.bind(a),a.copyToClipBoard=a.copyToClipBoard.bind(a),a}return o(t,e),s(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"getInternalLink",value:function(){var e=this,t=this.props.repoID,a=this.props.path;S.seafileAPI.getInternalLink(t,a).then(function(t){e.setState({isOpen:!0,smartLink:t.data.smart_link})}).catch(function(e){var t=Z.Utils.getErrorMsg(e);m.default.danger(t)})}},{key:"copyToClipBoard",value:function(){(0,Y.default)(this.state.smartLink),this.setState({isOpen:!1});var e=(0,L.gettext)("Internal link has been copied to clipboard");m.default.success(e)}},{key:"render",value:function(){return d.default.createElement("span",{className:"file-internal-link",title:(0,L.gettext)("Internal Link")},d.default.createElement("i",{className:"fa fa-link",onClick:this.getInternalLink}),d.default.createElement(c.Modal,{isOpen:this.state.isOpen,toggle:this.toggle},d.default.createElement(c.ModalHeader,{toggle:this.toggle},(0,L.gettext)("Internal Link")),d.default.createElement(c.ModalBody,null,d.default.createElement("p",{className:"tip mb-1"},(0,L.gettext)("An internal link is a link to a file or folder that can be accessed by users with read permission to the file or folder.")),d.default.createElement("p",null,d.default.createElement("a",{target:"_blank",href:this.state.smartLink},this.state.smartLink))),d.default.createElement(c.ModalFooter,null,d.default.createElement(c.Button,{color:"secondary",onClick:this.toggle},(0,L.gettext)("Cancel")),d.default.createElement(c.Button,{color:"primary",onClick:this.copyToClipBoard},(0,L.gettext)("Copy")))))}}]),t}(d.default.Component);C.propTypes=g,t.default=C},278:function(e,t){},279:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={control:{backgroundColor:"#fff",fontSize:14,fontWeight:"normal"},highlighter:{overflow:"hidden"},input:{margin:0},"&singleLine":{control:{display:"inline-block",width:130},highlighter:{padding:1,border:"2px inset transparent"},input:{padding:1,border:"2px inset"}},"&multiLine":{control:{},highlighter:{padding:9},input:{padding:"8px 6px",minHeight:90,height:90,border:"1px solid #e6e6dd",borderRadius:"5px",overfflowY:"auto","&focused":{backgroundColor:"#cee4e5",outlineOffset:"-2px",outlineColor:"-webkit-focus-ring-color",outlineStyle:"auto",outlineWidth:"5px"}}},suggestions:{list:{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.15)",fontSize:14,maxHeight:200,overflow:"auto",position:"absolute",bottom:14,width:"150px"},item:{width:"auto",padding:"5px 15px",overflowX:"auto",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"#f19654",color:"#fff",fontWeight:"400"}}}},r={};t.defaultStyle=n,t.defaultMentionStyle=r},280:function(e,t){},283:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),l=function(e){return e&&e.__esModule?e:{default:e}}(s),d=a(2),c=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"render",value:function(){return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{id:"outerContainer"},l.default.createElement("div",{id:"sidebarContainer",className:"sf-hide"},l.default.createElement("div",{id:"toolbarSidebar"},l.default.createElement("div",{className:"splitToolbarButton toggled"},l.default.createElement("button",{id:"viewThumbnail",className:"toolbarButton toggled",title:"Show Thumbnails",tabIndex:"2","data-l10n-id":"thumbs"},l.default.createElement("span",{"data-l10n-id":"thumbs_label"},"Thumbnails")),l.default.createElement("button",{id:"viewOutline",className:"toolbarButton",title:"Show Document Outline (double-click to expand/collapse all items)",tabIndex:"3","data-l10n-id":"document_outline"},l.default.createElement("span",{"data-l10n-id":"document_outline_label"},"Document Outline")),l.default.createElement("button",{id:"viewAttachments",className:"toolbarButton",title:"Show Attachments",tabIndex:"4","data-l10n-id":"attachments"},l.default.createElement("span",{"data-l10n-id":"attachments_label"},"Attachments")))),l.default.createElement("div",{id:"sidebarContent"},l.default.createElement("div",{id:"thumbnailView"}),l.default.createElement("div",{id:"outlineView",className:"hidden"}),l.default.createElement("div",{id:"attachmentsView",className:"hidden"})),l.default.createElement("div",{id:"sidebarResizer",className:"hidden"})),l.default.createElement("div",{id:"mainContainer"},l.default.createElement("div",{className:"findbar hidden doorHanger sf-hide",id:"findbar"},l.default.createElement("div",{id:"findbarInputContainer"},l.default.createElement("input",{id:"findInput",className:"toolbarField",title:"Find",placeholder:"Find in document\u2026",tabIndex:"91","data-l10n-id":"find_input"}),l.default.createElement("div",{className:"splitToolbarButton"},l.default.createElement("button",{id:"findPrevious",className:"toolbarButton findPrevious",title:"Find the previous occurrence of the phrase",tabIndex:"92","data-l10n-id":"find_previous"},l.default.createElement("span",{"data-l10n-id":"find_previous_label"},"Previous")),l.default.createElement("div",{className:"splitToolbarButtonSeparator"}),l.default.createElement("button",{id:"findNext",className:"toolbarButton findNext",title:"Find the next occurrence of the phrase",tabIndex:"93","data-l10n-id":"find_next"},l.default.createElement("span",{"data-l10n-id":"find_next_label"},"Next")))),l.default.createElement("div",{id:"findbarOptionsOneContainer"},l.default.createElement("input",{type:"checkbox",id:"findHighlightAll",className:"toolbarField",tabIndex:"94"}),l.default.createElement("label",{htmlFor:"findHighlightAll",className:"toolbarLabel","data-l10n-id":"find_highlight"},"Highlight all"),l.default.createElement("input",{type:"checkbox",id:"findMatchCase",className:"toolbarField",tabIndex:"95"}),l.default.createElement("label",{htmlFor:"findMatchCase",className:"toolbarLabel","data-l10n-id":"find_match_case_label"},"Match case")),l.default.createElement("div",{id:"findbarOptionsTwoContainer"},l.default.createElement("input",{type:"checkbox",id:"findEntireWord",className:"toolbarField",tabIndex:"96"}),l.default.createElement("label",{htmlFor:"findEntireWord",className:"toolbarLabel","data-l10n-id":"find_entire_word_label"},"Whole words"),l.default.createElement("span",{id:"findResultsCount",className:"toolbarLabel hidden"})),l.default.createElement("div",{id:"findbarMessageContainer"},l.default.createElement("span",{id:"findMsg",className:"toolbarLabel"}))),l.default.createElement("div",{id:"secondaryToolbar",className:"secondaryToolbar hidden doorHangerRight sf-hide"},l.default.createElement("div",{id:"secondaryToolbarButtonContainer"},l.default.createElement("button",{id:"secondaryPresentationMode",className:"secondaryToolbarButton presentationMode visibleLargeView",title:"Switch to Presentation Mode",tabIndex:"51","data-l10n-id":"presentation_mode"},l.default.createElement("span",{"data-l10n-id":"presentation_mode_label"},"Presentation Mode")),l.default.createElement("button",{id:"secondaryOpenFile",className:"secondaryToolbarButton openFile visibleLargeView",title:"Open File",tabIndex:"52","data-l10n-id":"open_file"},l.default.createElement("span",{"data-l10n-id":"open_file_label"},"Open")),l.default.createElement("button",{id:"secondaryPrint",className:"secondaryToolbarButton print visibleMediumView",title:"Print",tabIndex:"53","data-l10n-id":"print"},l.default.createElement("span",{"data-l10n-id":"print_label"},"Print")),l.default.createElement("button",{id:"secondaryDownload",className:"secondaryToolbarButton download visibleMediumView",title:"Download",tabIndex:"54","data-l10n-id":"download"},l.default.createElement("span",{"data-l10n-id":"download_label"},"Download")),l.default.createElement("a",{href:"#",id:"secondaryViewBookmark",className:"secondaryToolbarButton bookmark visibleSmallView",title:"Current view (copy or open in new window)",tabIndex:"55","data-l10n-id":"bookmark"},l.default.createElement("span",{"data-l10n-id":"bookmark_label"},"Current View")),l.default.createElement("div",{className:"horizontalToolbarSeparator visibleLargeView"}),l.default.createElement("button",{id:"firstPage",className:"secondaryToolbarButton firstPage",title:"Go to First Page",tabIndex:"56","data-l10n-id":"first_page"},l.default.createElement("span",{"data-l10n-id":"first_page_label"},"Go to First Page")),l.default.createElement("button",{id:"lastPage",className:"secondaryToolbarButton lastPage",title:"Go to Last Page",tabIndex:"57","data-l10n-id":"last_page"},l.default.createElement("span",{"data-l10n-id":"last_page_label"},"Go to Last Page")),l.default.createElement("div",{className:"horizontalToolbarSeparator"}),l.default.createElement("button",{id:"pageRotateCw",className:"secondaryToolbarButton rotateCw",title:"Rotate Clockwise",tabIndex:"58","data-l10n-id":"page_rotate_cw"},l.default.createElement("span",{"data-l10n-id":"page_rotate_cw_label"},"Rotate Clockwise")),l.default.createElement("button",{id:"pageRotateCcw",className:"secondaryToolbarButton rotateCcw",title:"Rotate Counterclockwise",tabIndex:"59","data-l10n-id":"page_rotate_ccw"},l.default.createElement("span",{"data-l10n-id":"page_rotate_ccw_label"},"Rotate Counterclockwise")),l.default.createElement("div",{className:"horizontalToolbarSeparator"}),l.default.createElement("button",{id:"cursorSelectTool",className:"secondaryToolbarButton selectTool toggled",title:"Enable Text Selection Tool",tabIndex:"60","data-l10n-id":"cursor_text_select_tool"},l.default.createElement("span",{"data-l10n-id":"cursor_text_select_tool_label"},"Text Selection Tool")),l.default.createElement("button",{id:"cursorHandTool",className:"secondaryToolbarButton handTool",title:"Enable Hand Tool",tabIndex:"61","data-l10n-id":"cursor_hand_tool"},l.default.createElement("span",{"data-l10n-id":"cursor_hand_tool_label"},"Hand Tool")),l.default.createElement("div",{className:"horizontalToolbarSeparator"}),l.default.createElement("button",{id:"scrollVertical",className:"secondaryToolbarButton scrollModeButtons scrollVertical toggled",title:"Use Vertical Scrolling",tabIndex:"62","data-l10n-id":"scroll_vertical"},l.default.createElement("span",{"data-l10n-id":"scroll_vertical_label"},"Vertical Scrolling")),l.default.createElement("button",{id:"scrollHorizontal",className:"secondaryToolbarButton scrollModeButtons scrollHorizontal",title:"Use Horizontal Scrolling",tabIndex:"63","data-l10n-id":"scroll_horizontal"},l.default.createElement("span",{"data-l10n-id":"scroll_horizontal_label"},"Horizontal Scrolling")),l.default.createElement("button",{id:"scrollWrapped",className:"secondaryToolbarButton scrollModeButtons scrollWrapped",title:"Use Wrapped Scrolling",tabIndex:"64","data-l10n-id":"scroll_wrapped"},l.default.createElement("span",{"data-l10n-id":"scroll_wrapped_label"},"Wrapped Scrolling")),l.default.createElement("div",{className:"horizontalToolbarSeparator scrollModeButtons"}),l.default.createElement("button",{id:"spreadNone",className:"secondaryToolbarButton spreadModeButtons spreadNone toggled",title:"Do not join page spreads",tabIndex:"65","data-l10n-id":"spread_none"},l.default.createElement("span",{"data-l10n-id":"spread_none_label"},"No Spreads")),l.default.createElement("button",{id:"spreadOdd",className:"secondaryToolbarButton spreadModeButtons spreadOdd",title:"Join page spreads starting with odd-numbered pages",tabIndex:"66","data-l10n-id":"spread_odd"},l.default.createElement("span",{"data-l10n-id":"spread_odd_label"},"Odd Spreads")),l.default.createElement("button",{id:"spreadEven",className:"secondaryToolbarButton spreadModeButtons spreadEven",title:"Join page spreads starting with even-numbered pages",tabIndex:"67","data-l10n-id":"spread_even"},l.default.createElement("span",{"data-l10n-id":"spread_even_label"},"Even Spreads")),l.default.createElement("div",{className:"horizontalToolbarSeparator spreadModeButtons"}),l.default.createElement("button",{id:"documentProperties",className:"secondaryToolbarButton documentProperties",title:"Document Properties\u2026",tabIndex:"68","data-l10n-id":"document_properties"},l.default.createElement("span",{"data-l10n-id":"document_properties_label"},"Document Properties\u2026")))),l.default.createElement("div",{className:"toolbar"},l.default.createElement("div",{id:"toolbarContainer"},l.default.createElement("div",{id:"toolbarViewer"},l.default.createElement("div",{id:"toolbarViewerLeft",className:"sf-hide"},l.default.createElement("button",{id:"sidebarToggle",className:"toolbarButton",title:"Toggle Sidebar",tabIndex:"11","data-l10n-id":"toggle_sidebar"},l.default.createElement("span",{"data-l10n-id":"toggle_sidebar_label"},"Toggle Sidebar")),l.default.createElement("div",{className:"toolbarButtonSpacer"}),l.default.createElement("button",{id:"viewFind",className:"toolbarButton",title:"Find in Document",tabIndex:"12","data-l10n-id":"findbar"},l.default.createElement("span",{"data-l10n-id":"findbar_label"},"Find")),l.default.createElement("div",{className:"splitToolbarButton hiddenSmallView"},l.default.createElement("button",{className:"toolbarButton pageUp",title:"Previous Page",id:"previous",tabIndex:"13","data-l10n-id":"previous"},l.default.createElement("span",{"data-l10n-id":"previous_label"},"Previous")),l.default.createElement("div",{className:"splitToolbarButtonSeparator"}),l.default.createElement("button",{className:"toolbarButton pageDown",title:"Next Page",id:"next",tabIndex:"14","data-l10n-id":"next"},l.default.createElement("span",{"data-l10n-id":"next_label"},"Next"))),l.default.createElement("input",{type:"number",id:"pageNumber",className:"toolbarField pageNumber",title:"Page",defaultValue:"1",size:"4",min:"1",tabIndex:"15","data-l10n-id":"page"}),l.default.createElement("span",{id:"numPages",className:"toolbarLabel"})),l.default.createElement("div",{id:"toolbarViewerRight",className:"sf-hide"},l.default.createElement("button",{id:"presentationMode",className:"toolbarButton presentationMode hiddenLargeView",title:"Switch to Presentation Mode",tabIndex:"31","data-l10n-id":"presentation_mode"},l.default.createElement("span",{"data-l10n-id":"presentation_mode_label"},"Presentation Mode")),l.default.createElement("button",{id:"openFile",className:"toolbarButton openFile hiddenLargeView",title:"Open File",tabIndex:"32","data-l10n-id":"open_file"},l.default.createElement("span",{"data-l10n-id":"open_file_label"},"Open")),l.default.createElement("button",{id:"print",className:"toolbarButton print hiddenMediumView",title:"Print",tabIndex:"33","data-l10n-id":"print"},l.default.createElement("span",{"data-l10n-id":"print_label"},"Print")),l.default.createElement("button",{id:"download",className:"toolbarButton download hiddenMediumView",title:"Download",tabIndex:"34","data-l10n-id":"download"},l.default.createElement("span",{"data-l10n-id":"download_label"},"Download")),l.default.createElement("a",{href:"#",id:"viewBookmark",className:"toolbarButton bookmark hiddenSmallView",title:"Current view (copy or open in new window)",tabIndex:"35","data-l10n-id":"bookmark"},l.default.createElement("span",{"data-l10n-id":"bookmark_label"},"Current View")),l.default.createElement("div",{className:"verticalToolbarSeparator hiddenSmallView"}),l.default.createElement("button",{id:"secondaryToolbarToggle",className:"toolbarButton",title:"Tools",tabIndex:"36","data-l10n-id":"tools"},l.default.createElement("span",{"data-l10n-id":"tools_label"},"Tools"))),l.default.createElement("div",{id:"toolbarViewerMiddle",className:"zoom-toolbar"},l.default.createElement("div",{className:"splitToolbarButton d-flex flex-column"},l.default.createElement("button",{id:"restoreToAuto",title:(0,d.gettext)("Default Size"),className:"sf3-font sf3-font-page-size btn btn-icon rounded mb-4"}),l.default.createElement("button",{id:"zoomIn",className:"toolbarButton zoomIn sf3-font sf3-font-enlarge btn btn-icon rounded mb-2",title:(0,d.gettext)("Zoom In"),tabIndex:"22","data-l10n-id":"zoom_in"}),l.default.createElement("button",{id:"zoomOut",className:"toolbarButton zoomOut sf3-font sf3-font-narrow btn btn-icon rounded",title:(0,d.gettext)("Zoom Out"),tabIndex:"21","data-l10n-id":"zoom_out"}),l.default.createElement("div",{className:"splitToolbarButtonSeparator"})),l.default.createElement("span",{id:"scaleSelectContainer",className:"dropdownToolbarButton hidden"},l.default.createElement("select",{id:"scaleSelect",title:"Zoom",tabIndex:"23","data-l10n-id":"zoom",defaultValue:"auto"},l.default.createElement("option",{id:"pageAutoOption",title:"",value:"auto","data-l10n-id":"page_scale_auto"},"Automatic Zoom"),l.default.createElement("option",{id:"pageActualOption",title:"",value:"page-actual","data-l10n-id":"page_scale_actual"},"Actual Size"),l.default.createElement("option",{id:"pageFitOption",title:"",value:"page-fit","data-l10n-id":"page_scale_fit"},"Page Fit"),l.default.createElement("option",{id:"pageWidthOption",title:"",value:"page-width","data-l10n-id":"page_scale_width"},"Page Width"),l.default.createElement("option",{id:"customScaleOption",title:"",value:"custom",disabled:"disabled",hidden:!0}),l.default.createElement("option",{title:"",value:"0.5","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 50 }'},"50%"),l.default.createElement("option",{title:"",value:"0.75","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 75 }'},"75%"),l.default.createElement("option",{title:"",value:"1","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 100 }'},"100%"),l.default.createElement("option",{title:"",value:"1.25","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 125 }'},"125%"),l.default.createElement("option",{title:"",value:"1.5","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 150 }'},"150%"),l.default.createElement("option",{title:"",value:"2","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 200 }'},"200%"),l.default.createElement("option",{title:"",value:"3","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 300 }'},"300%"),l.default.createElement("option",{title:"",value:"4","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 400 }'},"400%"))))),l.default.createElement("div",{id:"loadingBar"},l.default.createElement("span",{className:"loading-icon loading-tip"}),l.default.createElement("div",{className:"progress hide"},l.default.createElement("div",{className:"glimmer"}))))),l.default.createElement("div",{id:"viewerContainer",tabIndex:"0"},l.default.createElement("div",{id:"viewer",className:"pdfViewer"})),l.default.createElement("div",{id:"errorWrapper",className:"hidden"},l.default.createElement("div",{id:"errorMessageLeft"},l.default.createElement("span",{id:"errorMessage"}),l.default.createElement("button",{id:"errorShowMore","data-l10n-id":"error_more_info"},"More Information"),l.default.createElement("button",{id:"errorShowLess","data-l10n-id":"error_less_info"},"Less Information")),l.default.createElement("div",{id:"errorMessageRight"},l.default.createElement("button",{id:"errorClose","data-l10n-id":"error_close"},"Close")),l.default.createElement("div",{className:"clearBoth"}),l.default.createElement("textarea",{id:"errorMoreInfo",readOnly:"readonly"}))),l.default.createElement("div",{id:"overlayContainer",className:"hidden sf-hide"},l.default.createElement("div",{id:"passwordOverlay",className:"container hidden"},l.default.createElement("div",{className:"dialog"},l.default.createElement("div",{className:"row"},l.default.createElement("p",{id:"passwordText","data-l10n-id":"password_label"},"Enter the password to open this PDF file:")),l.default.createElement("div",{className:"row"},l.default.createElement("input",{type:"password",id:"password",className:"toolbarField"})),l.default.createElement("div",{className:"buttonRow"},l.default.createElement("button",{id:"passwordCancel",className:"overlayButton"},l.default.createElement("span",{"data-l10n-id":"password_cancel"},"Cancel")),l.default.createElement("button",{id:"passwordSubmit",className:"overlayButton"},l.default.createElement("span",{"data-l10n-id":"password_ok"},"OK"))))),l.default.createElement("div",{id:"documentPropertiesOverlay",className:"container hidden"},l.default.createElement("div",{className:"dialog"},l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_file_name"},"File name:")," ",l.default.createElement("p",{id:"fileNameField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_file_size"},"File size:")," ",l.default.createElement("p",{id:"fileSizeField"},"-")),l.default.createElement("div",{className:"separator"}),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_title"},"Title:")," ",l.default.createElement("p",{id:"titleField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_author"},"Author:")," ",l.default.createElement("p",{id:"authorField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_subject"},"Subject:")," ",l.default.createElement("p",{id:"subjectField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_keywords"},"Keywords:")," ",l.default.createElement("p",{id:"keywordsField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_creation_date"},"Creation Date:")," ",l.default.createElement("p",{id:"creationDateField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_modification_date"},"Modification Date:")," ",l.default.createElement("p",{id:"modificationDateField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_creator"},"Creator:")," ",l.default.createElement("p",{id:"creatorField"},"-")),l.default.createElement("div",{className:"separator"}),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_producer"},"PDF Producer:")," ",l.default.createElement("p",{id:"producerField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_version"},"PDF Version:")," ",l.default.createElement("p",{id:"versionField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_page_count"},"Page Count:")," ",l.default.createElement("p",{id:"pageCountField"},"-")),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_page_size"},"Page Size:")," ",l.default.createElement("p",{id:"pageSizeField"},"-")),l.default.createElement("div",{className:"separator"}),l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"document_properties_linearized"},"Fast Web View:")," ",l.default.createElement("p",{id:"linearizedField"},"-")),l.default.createElement("div",{className:"buttonRow"},l.default.createElement("button",{id:"documentPropertiesClose",className:"overlayButton"},l.default.createElement("span",{"data-l10n-id":"document_properties_close"},"Close"))))),l.default.createElement("div",{id:"printServiceOverlay",className:"container hidden"},l.default.createElement("div",{className:"dialog"},l.default.createElement("div",{className:"row"},l.default.createElement("span",{"data-l10n-id":"print_progress_message"},"Preparing document for printing\u2026")),l.default.createElement("div",{className:"row"},l.default.createElement("progress",{value:"0",max:"100"}),l.default.createElement("span",{"data-l10n-id":"print_progress_percent","data-l10n-args":'{ "progress": 0 }',className:"relative-progress"},"0%")),l.default.createElement("div",{className:"buttonRow"},l.default.createElement("button",{id:"printCancel",className:"overlayButton"},l.default.createElement("span",{"data-l10n-id":"print_progress_close"},"Cancel"))))))),l.default.createElement("div",{id:"printContainer"}))}}]),t}(l.default.Component);t.default=c},284:function(e,t){},285:function(e,t){},3:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var r=a(2),i=a(20),o=a(13),s=n(o),l=a(0),d=n(l),c=a(5),u=n(c),p=a(25),f=n(p),m=t.Utils={keyCodes:{esc:27,space:32,tab:9,up:38,down:40},bytesToSize:function(e){if("undefined"==typeof e)return" ";if(e<0)return"--";var t=["bytes","KB","MB","GB","TB","PB"];if(0===e)return e+" "+t[0];var a=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===a?e+" "+t[a]:(e/Math.pow(1e3,a)).toFixed(1)+" "+t[a]},isHiDPI:function(){return(window.devicePixelRatio?window.devicePixelRatio:1)>1},isDesktop:function(){return window.innerWidth>=768},isWeChat:function(){var e=window.navigator.userAgent.toLowerCase(),t="micromessenger"==e.match(/MicroMessenger/i);return"micromessenger"==e.match(/MicroMessenger/i)&&"wxwork"==e.match(/wxwork/i)||t},FILEEXT_ICON_MAP:{md:"txt.png",txt:"txt.png",pdf:"pdf.png",doc:"word.png",docx:"word.png",odt:"word.png",fodt:"word.png",ppt:"ppt.png",pptx:"ppt.png",odp:"ppt.png",fodp:"ppt.png",xls:"excel.png",xlsx:"excel.png",ods:"excel.png",fods:"excel.png",mp4:"video.png",ogv:"video.png",webm:"video.png",mov:"video.png",flv:"video.png",wmv:"video.png",rmvb:"video.png",mp3:"music.png",oga:"music.png",ogg:"music.png",flac:"music.png",aac:"music.png",ac3:"music.png",wma:"music.png",jpg:"pic.png",jpeg:"pic.png",png:"pic.png",svg:"pic.png",gif:"pic.png",bmp:"pic.png",ico:"pic.png",default:"file.png"},imageCheck:function(e){return-1!=e.lastIndexOf(".")&&-1!=["gif","jpeg","jpg","png","ico","bmp","tif","tiff"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},getShareLinkPermissionList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=[];return"library"===e?r.push("preview_download"):"dir"===e?"rw"!=t&&"admin"!=t&&"r"!=t||r.push("preview_download"):"file"===e&&("rw"!=t&&"admin"!=t&&"r"!=t||r.push("preview_download"),this.isEditableOfficeFile(a)&&("rw"==t||"admin"==t)&&n&&r.push("edit_download")),r.push("preview_only"),r},getShareLinkPermissionStr:function(e){var t=e.can_edit,a=e.can_download;return t?a?"edit_download":"cloud_edit":a?"preview_download":"preview_only"},isEditableOfficeFile:function(e){return-1!=e.lastIndexOf(".")&&-1!=["docx","pptx","xlsx"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},videoCheck:function(e){return-1!=e.lastIndexOf(".")&&-1!=["mp4","ogv","webm","mov"].indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())},checkDuplicatedNameInList:function(e,t){return e.some(function(e){return e.name===t})},encodePath:function(e){if(!e)return"";for(var t=e.split("/"),a=[],n=0,r=t.length;n<r;n++)a.push(encodeURIComponent(t[n]));return a.join("/")},HTMLescape:function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML},generateDialogTitle:function(e,t){var a=this.HTMLescape(t),n='<span class="op-target ellipsis ellipsis-op-target" title='+a+">"+a+"</span>";return e.replace("{placeholder}",n)},getFileName:function(e){var t=e.lastIndexOf("/");return e.slice(t+1)},getPaths:function(e){for(var t=e.split("/").slice(1),a=[];t.length;)a.push("/"+t.join("/")),t.pop();return a.reverse()},getFolderName:function(e){return"/"===e?e:(e="/"!==e[e.length-1]?e:e.slice(0,e.length-2),e.slice(e.lastIndexOf("/")+1))},getDirName:function(e){var t=e.slice(0,e.lastIndexOf("/"));return""===t?"/":t},isChildPath:function(e,t){return this.getDirName(e)===t},isAncestorPath:function(e,t){return t.indexOf(e)>-1},renameAncestorPath:function(e,t,a){return e.replace(t,a)},joinPath:function(e,t){return"/"===e[e.length-1]?e+t:e+"/"+t},isSupportUploadFolder:function(){return-1!=navigator.userAgent.indexOf("Firefox")||navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Safari")>-1},isIEBrower:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,a=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;return t||a},getDefaultLibIconUrl:function(e){var t=m.isHiDPI()?48:24;t=e?256:t;return r.mediaUrl+"img/lib/"+t+"/lib.png"},getLibIconUrl:function(e,t){var a=e.permission||e.share_permission,n=m.isHiDPI()?48:24;n=t?256:n;var i="lib.png";switch(e.encrypted&&(i="lib-encrypted.png"),a){case"r":i="lib-readonly.png";break;case"preview":i="lib-cloud-preview.png";break;case"cloud-edit":i="lib-cloud-preview-edit.png"}return"read-only"==e.status&&(i="lib-readonly.png"),r.mediaUrl+"img/lib/"+n+"/"+i},getDirentIcon:function(e,t){var a=this.isHiDPI()?48:24;if(a=t?192:a,e.isDir()){var n=!1;return!e.permission||"r"!==e.permission&&"preview"!==e.permission||(n=!0),this.getFolderIconUrl(n,a)}return this.getFileIconUrl(e.name,a)},getAdminTemplateDirentIcon:function(e,t){var a=this.isHiDPI()?48:24;return a=t?192:a,e.is_file?this.getFileIconUrl(e.obj_name,a):this.getFolderIconUrl()},getFolderIconUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return t||(t=m.isHiDPI()?48:24),t=t>24?192:24,r.mediaUrl+"img/folder"+(e?"-read-only-":"-")+t+".png"},getFileIconUrl:function(e,t){t||(t=m.isHiDPI()?48:24),t=t>24?192:24;var a="";return-1==e.lastIndexOf(".")?r.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP.default:(a=e.substr(e.lastIndexOf(".")+1).toLowerCase(),this.FILEEXT_ICON_MAP[a]?r.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP[a]:r.mediaUrl+"img/file/"+t+"/"+this.FILEEXT_ICON_MAP.default)},getLibIconTitle:function(e){var t,a=e.permission||e.share_permission;if(e.encrypted)t=(0,r.gettext)("Encrypted library");else if(e.is_admin)t=(0,r.gettext)("Admin access");else switch(a){case"rw":t=(0,r.gettext)("Read-Write library");break;case"r":t=(0,r.gettext)("Read-Only library");break;case"cloud-edit":t=(0,r.gettext)("Online Read-Write library");break;case"preview":t=(0,r.gettext)("Online Read-Only library")}return t},getFolderIconTitle:function(e){var t;switch(e.permission){case"rw":t=(0,r.gettext)("Read-Write folder");break;case"r":t=(0,r.gettext)("Read-Only folder");break;case"cloud-edit":t=(0,r.gettext)("Online Read-Write folder");break;case"preview":t=(0,r.gettext)("Online Read-Only folder")}return t},getFolderOperationList:function(e,t,a,n){var i=[],o=s.default.SHARE,l=s.default.DOWNLOAD,d=s.default.DELETE,c=s.default.RENAME,u=s.default.MOVE,p=s.default.COPY,f=s.default.PERMISSION,h=s.default.OPEN_VIA_CLIENT,Y=a.permission;return n&&("rw"!=Y&&"r"!=Y||i.push(l),m.isHasPermissionToShare(t,Y,a)&&i.push(o),"rw"==Y&&i.push(d,"Divider")),"rw"==Y&&(i.push(c,u,p),r.folderPermEnabled&&(e&&t.has_been_shared_out||t.is_admin)&&i.push("Divider",f),i.push("Divider",h)),"r"!=Y||t.encrypted||i.push(p),i},getFileOperationList:function(e,t,a){var n=[],i=s.default.SHARE,o=s.default.DOWNLOAD,l=s.default.DELETE,d=s.default.RENAME,c=s.default.MOVE,u=s.default.COPY,p=s.default.TAGS,f=s.default.UNLOCK,h=s.default.LOCK,Y=s.default.COMMENT,L=s.default.HISTORY,S=s.default.ACCESS_LOG,Z=s.default.OPEN_VIA_CLIENT,g=t.permission;return a&&("rw"!=g&&"r"!=g||n.push(o),m.isHasPermissionToShare(e,g,t)&&n.push(i),"rw"==g&&(!t.is_locked||t.is_locked&&t.locked_by_me)&&n.push(l),n.push("Divider")),"rw"==g&&((!t.is_locked||t.is_locked&&t.locked_by_me)&&n.push(d,c),n.push(u,p),r.isPro&&(t.is_locked?(t.locked_by_me||"OnlineOffice"==t.lock_owner)&&n.push(f):n.push(h)),n.push("Divider"),r.enableFileComment&&n.push(Y),n.push(L),r.isPro&&r.fileAuditEnabled&&n.push(S),n.push("Divider",Z)),"r"==g&&(e.encrypted||n.push(u),r.enableFileComment&&n.push(Y),n.push(L)),n},getDirentOperationList:function(e,t,a,n){return"dir"==a.type?m.getFolderOperationList(e,t,a,n):m.getFileOperationList(t,a,n)},sharePerms:function(e){var t;switch(e){case"rw":t=(0,r.gettext)("Read-Write");break;case"r":t=(0,r.gettext)("Read-Only");break;case"admin":t=(0,r.gettext)("Admin");break;case"cloud-edit":t=(0,r.gettext)("Online Read-Write");break;case"preview":t=(0,r.gettext)("Online Read-Only")}return t},sharePermsExplanation:function(e){var t;switch(e){case"rw":t=(0,r.gettext)("User can read, write, upload, download and sync files.");break;case"r":t=(0,r.gettext)("User can read, download and sync files.");break;case"admin":t=(0,r.gettext)("Besides Write permission, user can also share the library.");break;case"cloud-edit":t=(0,r.gettext)("User can view and edit file online via browser. Files can't be downloaded.");break;case"preview":t=(0,r.gettext)("User can only view files online via browser. Files can't be downloaded.")}return t},getShareLinkPermissionObject:function(e){switch(e){case"preview_download":return{value:e,text:(0,r.gettext)("Preview and download"),permissionDetails:{can_edit:!1,can_download:!0}};case"preview_only":return{value:e,text:(0,r.gettext)("Preview only"),permissionDetails:{can_edit:!1,can_download:!1}};case"edit_download":return{value:e,text:(0,r.gettext)("Edit on cloud and download"),permissionDetails:{can_edit:!0,can_download:!0}};case"cloud_edit":return{value:e,text:(0,r.gettext)("Edit on cloud only"),permissionDetails:{can_edit:!0,can_download:!1}}}return{text:""}},formatSize:function(e){var t=e.bytes,a=e.precision||0;return t>=0&&t<1e3?t+" B":t>=1e3&&t<1e6?(t/1e3).toFixed(a)+" KB":t>=1e6&&t<1e9?(t/1e6).toFixed(a)+" MB":t>=1e9&&t<1e12?(t/1e9).toFixed(a)+" GB":t>=1e12?(t/1e12).toFixed(a)+" TB":t+" B"},formatBitRate:function(e){var t;return"number"!==typeof e?"":(t=e/8,t>=1e9?(t/1e9).toFixed(2)+" GB/s":t>=1e6?(t/1e6).toFixed(2)+" MB/s":t>=1e3?(t/1e3).toFixed(2)+" kB/s":t.toFixed(2)+" B/s")},isMarkdownFile:function(e){var t=e.lastIndexOf(".");if(-1===t)return!1;var a=e.substring(t).toLowerCase();return".md"===a||".markdown"===a},isInternalFileLink:function(e,t){return new RegExp(r.serviceURL+"/lib/"+t+"/file.*").test(e)},isInternalMarkdownLink:function(e,t){return new RegExp(r.serviceURL+"/lib/"+t+".*.md$").test(e)},isInternalDirLink:function(e,t){return new RegExp(r.serviceURL+"/library/"+t+".*").test(e)},getPathFromInternalMarkdownLink:function(e,t){var a=new RegExp(r.serviceURL+"/lib/"+t+"/file(.*.md)"),n=a.exec(e);return decodeURIComponent(n[1])},getPathFromInternalDirLink:function(e,t){var a=new RegExp(r.serviceURL+"/library/"+t+"(/.*)"),n=a.exec(e),i=decodeURIComponent(n[1]);return i=i.slice(1),i=i.slice(i.indexOf("/"))},isWikiInternalMarkdownLink:function(e,t){return t=encodeURIComponent(t),new RegExp(r.serviceURL+"/published/"+t+".*.md$").test(e)},isWikiInternalDirLink:function(e,t){return t=encodeURIComponent(t),new RegExp(r.serviceURL+"/published/"+t+".*").test(e)},getPathFromWikiInternalMarkdownLink:function(e,t){t=encodeURIComponent(t);var a=new RegExp(r.serviceURL+"/published/"+t+"(.*.md)"),n=a.exec(e),i=n[1];try{i=decodeURIComponent(i)}catch(e){i=i.replace(/%/g,"%25"),i=decodeURIComponent(i)}return i},getPathFromWikiInternalDirLink:function(e,t){t=encodeURIComponent(t);var a=new RegExp(r.serviceURL+"/published/"+t+"(/.*)"),n=a.exec(e),i=n[1];try{i=decodeURIComponent(i)}catch(e){i=i.replace(/%/g,"%25"),i=decodeURIComponent(i)}return i},compareTwoWord:function(e,t){var a,n,r=e.charCodeAt(0),o=t.charCodeAt(0);return 19968<r&&r<40869&&19968<o&&o<40869?(a=i.strChineseFirstPY.charAt(r-19968).toLowerCase(),n=i.strChineseFirstPY.charAt(o-19968).toLowerCase(),a>=n?1:-1):19968<r&&r<40869&&!(19968<o&&o<40869)?1:!(19968<r&&r<40869)&&19968<o&&o<40869?-1:(a=e.toLowerCase(),n=t.toLowerCase(),this.compareStrWithNumbersIn(a,n))},compareStrWithNumbersIn:function(e,t){var a,n,r,i=/\d+|\D+/g,o=/\d/,s=e.match(i),l=t.match(i),d=Math.min(s.length,l.length);if(s&&l&&(a=o.test(s[0]))==o.test(l[0]))for(var c=0;c<d;c++){if(n=s[c],r=l[c],a&&(n=parseInt(n,10),r=parseInt(r,10)),n!=r)return n<r?-1:1;a=!a}return(e>=t)-(e<=t)},sortRepos:function(e,t,a){var n=this,r=void 0;switch(t+"-"+a){case"name-asc":r=function(e,t){return e.repo_name?t.repo_name?n.compareTwoWord(e.repo_name,t.repo_name):-1:1};break;case"name-desc":r=function(e,t){return e.repo_name?t.repo_name?-n.compareTwoWord(e.repo_name,t.repo_name):1:-1};break;case"time-asc":r=function(e,t){return e.last_modified<t.last_modified?-1:1};break;case"time-desc":r=function(e,t){return e.last_modified<t.last_modified?1:-1};break;case"size-asc":r=function(e,t){if(e.size===t.size){return n.compareTwoWord(e.repo_name,t.repo_name)}return e.size_original<t.size_original?-1:1};break;case"size-desc":r=function(e,t){if(e.size===t.size){return-n.compareTwoWord(e.repo_name,t.repo_name)}return e.size_original<t.size_original?1:-1}}return e.sort(r),e},sortDirents:function(e,t,a){var n=this,r=void 0;switch(t+"-"+a){case"name-asc":r=function(e,t){return n.compareTwoWord(e.name,t.name)};break;case"name-desc":r=function(e,t){return-n.compareTwoWord(e.name,t.name)};break;case"time-asc":r=function(e,t){return e.mtime<t.mtime?-1:1};break;case"time-desc":r=function(e,t){return e.mtime<t.mtime?1:-1};break;case"size-asc":r=function(e,t){return"dir"==e.type&&"dir"==t.type?0:e.size_original<t.size_original?-1:1};break;case"size-desc":r=function(e,t){return"dir"==e.type&&"dir"==t.type?0:e.size_original<t.size_original?1:-1}}return e.sort(function(e,t){return"dir"==e.type&&"file"==t.type?-1:"file"==e.type&&"dir"==t.type?1:r(e,t)}),e},sortDirentsInSharedDir:function(e,t,a){var n=this,r=void 0;switch(t+"-"+a){case"name-asc":r=function(e,t){return e.is_dir?n.compareTwoWord(e.folder_name,t.folder_name):n.compareTwoWord(e.file_name,t.file_name)};break;case"name-desc":r=function(e,t){return-(e.is_dir?n.compareTwoWord(e.folder_name,t.folder_name):n.compareTwoWord(e.file_name,t.file_name))};break;case"time-asc":r=function(e,t){return e.last_modified<t.last_modified?-1:1};break;case"time-desc":r=function(e,t){return e.last_modified<t.last_modified?1:-1};break;case"size-asc":r=function(e,t){return e.is_dir?0:e.size<t.size?-1:1};break;case"size-desc":r=function(e,t){return e.is_dir?0:e.size<t.size?1:-1}}return e.sort(function(e,t){return e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:r(e,t)}),e},sortTraffic:function(e,t,a){var n=void 0;switch(a){case"asc":n=function(e,a){return e[t]<a[t]?-1:1};break;case"desc":n=function(e,a){return e[t]<a[t]?1:-1}}return e.sort(n),e},getErrorMsg:function(e,t){var a="";return e.response?403==e.response.status?(t&&u.default.danger(d.default.createElement(f.default,null),{id:"permission_denied",duration:3600}),a=(0,r.gettext)("Permission denied")):a=e.response.data&&e.response.data.error_msg?e.response.data.error_msg:(0,r.gettext)("Error"):a=(0,r.gettext)("Please check the network."),a},changeMarkdownNodes:function(e,t){return e.map(function(e){t(e),e.nodes&&e.nodes.length>0&&m.changeMarkdownNodes(e.nodes,t)}),e},chooseLanguage:function(e){var t=void 0;switch(e){case"py":t="python";break;case"js":t="javascript";break;case"c":t="text/x-csrc";break;case"cpp":t="text/x-c++src";break;case"java":t="text/x-java";break;case"cs":t="text/x-csharp";break;case"mdf":t="text/x-sql";break;case"html":t="htmlmixed";break;default:t=e}return t},DARK_COLOR_MAP:{red:"#D11507",orange:"#FF8C00",yellow:"#EDEF00",green:"#006400",cyan:"#00E0E1",blue:"#2510A3",indigo:"#350C56",purple:"#551054",pink:"#E3A5B0",azure:"#C4D0D0",lime:"#00E100",teal:"#006A6B",gray:"#545454","#FFA8A8":"#E49090","#FFA94D":"#E39136","#FFD43B":"#E0B815","#A0EC50":"#83CF32","#A9E34B":"#8DC72E","#63E6BE":"#43CAA4","#4FD2C9":"#2DB9B0","#72C3FC":"#57ABE3","#91A7FF":"#7A91E7","#E599F7":"#CC82DE","#B197FC":"#9B82E5","#F783AC":"#DF6D97","#CED4DA":"#A8ADB2"},getDarkColor:function(e){return this.DARK_COLOR_MAP[e]},getCopySuccessfulMessage:function(e){var t=void 0,a=e.length;return 1===a?t=(0,r.gettext)("Successfully copied %(name)s."):2===a?t=(0,r.gettext)("Successfully copied %(name)s and 1 other item."):(t=(0,r.gettext)("Successfully copied %(name)s and %(amount)s other items."),t=t.replace("%(amount)s",a-1)),t=t.replace("%(name)s",e[0])},getMoveSuccessMessage:function(e){var t=void 0,a=e.length;return 1===a?t=(0,r.gettext)("Successfully moved %(name)s."):2===a?t=(0,r.gettext)("Successfully moved %(name)s and 1 other item."):(t=(0,r.gettext)("Successfully moved %(name)s and %(amount)s other items."),t=t.replace("%(amount)s",a-1)),t=t.replace("%(name)s",e[0])},getCopyFailedMessage:function(e){var t=void 0,a=e.length;return a>1?(t=(0,r.gettext)("Failed to copy %(name)s and %(amount)s other item(s)."),t=t.replace("%(amount)s",a-1)):t=(0,r.gettext)("Failed to copy %(name)s."),t=t.replace("%(name)s",e[0])},getMoveFailedMessage:function(e){var t=void 0,a=e.length;return a>1?(t=(0,r.gettext)("Failed to move %(name)s and %(amount)s other item(s)."),t=t.replace("%(amount)s",a-1)):t=(0,r.gettext)("Failed to move %(name)s."),t=t.replace("%(name)s",e[0])},handleSearchedItemClick:function(e){if(!0===e.is_dir){var t=r.siteRoot+"library/"+e.repo_id+"/"+e.repo_name+e.path;window.open("about:blank").location.href=t}else{var a=r.siteRoot+"lib/"+e.repo_id+"/file"+m.encodePath(e.path);window.open("about:blank").location.href=a}},generatePassword:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz0123456789",a="",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},pathNormalize:function(e){for(var t=e.split("/"),a=[],n=0;n<t.length;n++)"."!==t[n]&&""!==t[n]&&(".."===t[n]?a.pop():a.push(t[n]));return a.join("/")},getEventData:function(e,t){return e.target.dataset?e.target.dataset[t]:e.target.getAttribute("data-"+t)},isHasPermissionToShare:function(e,t,a){var n=e.is_admin,i=e.is_virtual,o=e.encrypted,s=e.owner_email,l=s===r.username;if(o)return!0;if(a&&("rw"==t||"r"==t))return!0;if(r.canGenerateShareLink&&("rw"==t||"r"==t))return!0;if(r.canGenerateUploadLink&&"rw"==t)return!0;return!(i||!l&&!n)&&!0},registerGlobalVariable:function(e,t,a){window[e]||(window[e]={}),window[e][t]=a},formatTime:function(e){var t=parseInt(e),a=0,n=0;t>60&&(a=parseInt(t/60),t=parseInt(t%60)),a>60&&(n=parseInt(a/60),a=parseInt(a%60));var r=("00"+parseInt(t)).slice(-2);return r=a>0?("00"+parseInt(a)).slice(-2)+":"+r:"00:"+r,r=n>0?("00"+parseInt(n)).slice(-2)+":"+r:"00:"+r},hasNextPage:function(e,t,a){return e*t<a}}},4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seafileAPI=void 0;var n=a(48),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(61),o=a(27),s=a(2),l=new i.SeafileAPI,d=new o.KeeperAPI,c=r.default.load("sfcsrftoken");l.initForSeahubUsage({siteRoot:s.siteRoot,xcsrfHeaders:c}),d.initForSeahubUsage({siteRoot:s.siteRoot,xcsrfHeaders:c}),t.seafileAPI=l},443:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(162),f=n(p),m=a(4),h=a(2),Y=a(3),L=a(5),S=n(L),Z=a(444),g=n(Z),C=a(445),X=n(C),J=a(447),P=n(J);a(285);var w={onSave:u.default.func,content:u.default.object.isRequired,isSaving:u.default.bool,needSave:u.default.bool,participants:u.default.array,onParticipantsChange:u.default.func},b=window.app.pageOptions,D=b.isStarred,E=b.isLocked,T=b.lockedByMe,v=b.repoID,y=b.filePath,M=b.enableWatermark,Q=b.userNickName,H=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleCommentPanel=function(){a.setState({isCommentPanelOpen:!a.state.isCommentPanelOpen})},a.toggleStar=function(){a.state.isStarred?m.seafileAPI.unstarItem(v,y).then(function(e){a.setState({isStarred:!1})}).catch(function(e){var t=Y.Utils.getErrorMsg(e);S.default.danger(t)}):m.seafileAPI.starItem(v,y).then(function(e){a.setState({isStarred:!0})}).catch(function(e){var t=Y.Utils.getErrorMsg(e);S.default.danger(t)})},a.toggleLockFile=function(){a.state.isLocked?m.seafileAPI.unlockfile(v,y).then(function(e){a.setState({isLocked:!1,lockedByMe:!1})}).catch(function(e){var t=Y.Utils.getErrorMsg(e);S.default.danger(t)}):m.seafileAPI.lockfile(v,y).then(function(e){a.setState({isLocked:!0,lockedByMe:!0})}).catch(function(e){var t=Y.Utils.getErrorMsg(e);S.default.danger(t)})},a.state={isStarred:D,isLocked:E,lockedByMe:T,isCommentPanelOpen:!1},a}return o(t,e),s(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"h-100 d-flex flex-column"},d.default.createElement("div",{className:"file-view-header d-flex justify-content-between align-items-center"},d.default.createElement(g.default,{isStarred:this.state.isStarred,isLocked:this.state.isLocked,toggleStar:this.toggleStar}),d.default.createElement(X.default,{isLocked:this.state.isLocked,lockedByMe:this.state.lockedByMe,onSave:this.props.onSave,isSaving:this.props.isSaving,needSave:this.props.needSave,toggleLockFile:this.toggleLockFile,toggleCommentPanel:this.toggleCommentPanel})),d.default.createElement("div",{className:"file-view-body flex-auto d-flex o-hidden"},this.props.content,this.state.isCommentPanelOpen&&d.default.createElement(P.default,{toggleCommentPanel:this.toggleCommentPanel,participants:this.props.participants,onParticipantsChange:this.props.onParticipantsChange})))}}]),t}(d.default.Component);M&&f.default.init({watermark_txt:h.siteName+" "+Q,watermark_alpha:.075}),H.propTypes=w,t.default=H},444:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(7),f=n(p),m=a(2),h=a(277),Y=n(h),L={toggleStar:u.default.func.isRequired,isLocked:u.default.bool.isRequired,isStarred:u.default.bool.isRequired},S=window.app.pageOptions,Z=S.fileName,g=S.repoID,C=S.filePath,X=S.latestContributor,J=S.latestContributorName,P=S.lastModificationTime,w=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleStar=function(e){e.preventDefault(),a.props.toggleStar()},a}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.isStarred,a=e.isLocked,n=t?(0,m.gettext)("starred"):(0,m.gettext)("unstarred"),r=(0,m.gettext)("locked");return d.default.createElement("div",null,d.default.createElement("h2",{className:"file-title d-flex align-items-center"},d.default.createElement("span",{className:"file-name"},Z),d.default.createElement("a",{className:"file-star "+(t?"fa":"far")+" fa-star",href:"#",title:n,"aria-label":n,onClick:this.toggleStar}),d.default.createElement(Y.default,{repoID:g,path:C}),m.isPro&&a&&d.default.createElement("img",{className:"file-locked-icon",width:"16",src:m.mediaUrl+"img/file-locked-32.png",alt:r,title:r,"aria-label":r})),d.default.createElement("div",{className:"meta-info"},d.default.createElement("a",{href:m.siteRoot+"profile/"+encodeURIComponent(X)+"/"},J),d.default.createElement("span",{className:"ml-2"},(0,f.default)(1e3*P).format("YYYY-MM-DD HH:mm"))))}}]),t}(d.default.PureComponent);w.propTypes=L,t.default=w},445:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(6),f=a(446),m=n(f),h=a(2),Y=a(3),L=a(14),S=n(L),Z=a(116),g=n(Z),C={isLocked:u.default.bool.isRequired,lockedByMe:u.default.bool.isRequired,onSave:u.default.func,isSaving:u.default.bool,needSave:u.default.bool,toggleLockFile:u.default.func.isRequired,toggleCommentPanel:u.default.func.isRequired},X=window.app.pageOptions,J=X.canLockUnlockFile,P=(X.canGenerateShareLink,X.repoID),w=X.repoName,b=X.repoEncrypted,D=X.parentDir,E=X.filePerm,T=X.filePath,v=X.fileName,y=X.canEditFile,M=X.err,Q=(X.fileEnc,X.canDownloadFile),H=X.enableComment,N=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleShareDialog=function(){a.setState({isShareDialogOpen:!a.state.isShareDialogOpen})},a.toggle=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a.state={dropdownOpen:!1,isShareDialogOpen:!1},a}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.isLocked,a=e.lockedByMe,n=!1,r=void 0,i=void 0;J&&(t?a&&(n=!0,r=(0,h.gettext)("Unlock"),i="fa fa-unlock"):(n=!0,r=(0,h.gettext)("Lock"),i="fa fa-lock"));var o=!1;return b?o=!0:"rw"!=E&&"r"!=E||(o=!0),d.default.createElement(l.Fragment,null,d.default.createElement(p.ButtonGroup,{className:"d-none d-md-block"},d.default.createElement(m.default,{id:"open-parent-folder",icon:"fa fa-folder-open",text:(0,h.gettext)("Open parent folder"),tag:"a",href:h.siteRoot+"library/"+P+"/"+Y.Utils.encodePath(w+D)}),n&&d.default.createElement(m.default,{id:"lock-unlock-file",icon:i,text:r,onClick:this.props.toggleLockFile}),o&&d.default.createElement(m.default,{id:"share-file",icon:"fa fa-share-alt",text:(0,h.gettext)("Share"),onClick:this.toggleShareDialog}),"rw"==E&&d.default.createElement(m.default,{id:"history",icon:"fa fa-history",text:(0,h.gettext)("History"),tag:"a",href:h.siteRoot+"repo/file_revisions/"+P+"/?p="+encodeURIComponent(T)}),y&&!M&&(this.props.isSaving?d.default.createElement("button",{type:"button",className:"btn btn-icon btn-secondary btn-active"},d.default.createElement("i",{className:"fa fa-spin fa-spinner"})):this.props.needSave?d.default.createElement(m.default,{text:(0,h.gettext)("Save"),id:"saveButton",icon:"fa fa-save",onClick:this.props.onSave}):d.default.createElement("button",{type:"button",className:"btn btn-icon btn-secondary btn-active",disabled:!0},d.default.createElement("i",{className:"fa fa-save"}))),Q&&d.default.createElement(m.default,{id:"download-file",icon:"fa fa-download",text:(0,h.gettext)("Download"),tag:"a",href:"?dl=1"}),H&&d.default.createElement(m.default,{id:"comment",icon:"fa fa-comments",text:(0,h.gettext)("Comment"),onClick:this.props.toggleCommentPanel})),d.default.createElement(p.Dropdown,{isOpen:this.state.dropdownOpen,toggle:this.toggle,className:"d-block d-md-none"},d.default.createElement(p.ButtonGroup,null,y&&!M&&(this.props.isSaving?d.default.createElement("button",{type:"button",className:"btn btn-icon btn-secondary btn-active"},d.default.createElement("i",{className:"fa fa-spin fa-spinner"})):this.props.needSave?d.default.createElement(m.default,{text:(0,h.gettext)("Save"),id:"saveButton",icon:"fa fa-save",onClick:this.props.onSave}):d.default.createElement("button",{type:"button",className:"btn btn-icon btn-secondary btn-active",disabled:!0},d.default.createElement("i",{className:"fa fa-save"})))),d.default.createElement(p.DropdownToggle,{className:"sf2-icon-more mx-1"}),d.default.createElement(p.DropdownMenu,{right:!0},d.default.createElement(p.DropdownItem,null,d.default.createElement("a",{href:h.siteRoot+"library/"+P+"/"+Y.Utils.encodePath(w+D),className:"text-inherit"},(0,h.gettext)("Open parent folder"))),n&&d.default.createElement(p.DropdownItem,{onClick:this.props.toggleLockFile},r),o&&d.default.createElement(p.DropdownItem,{onClick:this.toggleShareDialog},(0,h.gettext)("Share")),"rw"==E&&d.default.createElement(p.DropdownItem,null,d.default.createElement("a",{href:h.siteRoot+"repo/file_revisions/"+P+"/?p="+encodeURIComponent(T)+"&referer="+encodeURIComponent(location.href),className:"text-inherit"},(0,h.gettext)("History"))),Q&&d.default.createElement(p.DropdownItem,null,d.default.createElement("a",{href:"?dl=1",className:"text-inherit"},(0,h.gettext)("Download"))),H&&d.default.createElement(p.DropdownItem,{onClick:this.props.toggleCommentPanel},(0,h.gettext)("Comment")))),this.state.isShareDialogOpen&&d.default.createElement(S.default,null,d.default.createElement(g.default,{itemType:"file",itemName:v,itemPath:T,userPerm:E,repoID:P,repoEncrypted:b,toggleDialog:this.toggleShareDialog})))}}]),t}(d.default.Component);N.propTypes=C,t.default=N},446:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(6),f={id:u.default.string.isRequired,icon:u.default.string.isRequired,text:u.default.string.isRequired,onClick:u.default.func,tag:u.default.string,href:u.default.string},m=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggle=function(){a.setState({tooltipOpen:!a.state.tooltipOpen})},a.state={tooltipOpen:!1},a}return o(t,e),s(t,[{key:"render",value:function(){var e=d.default.createElement(d.default.Fragment,null,d.default.createElement("span",{className:this.props.icon}),d.default.createElement(p.Tooltip,{toggle:this.toggle,delay:{show:0,hide:0},target:this.props.id,placement:"bottom",isOpen:this.state.tooltipOpen},this.props.text));return this.props.tag&&"a"==this.props.tag?d.default.createElement(p.Button,{id:this.props.id,className:"btn-icon",tag:"a",href:this.props.href},e):d.default.createElement(p.Button,{id:this.props.id,className:"btn-icon",onClick:this.props.onClick},e)}}]),t}(d.default.Component);m.propTypes=f,t.default=m},447:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(7),f=n(p),m=a(130),h=a(6),Y=a(2),L=a(4),S=a(258),Z=n(S),g=a(3),C=a(5),X=n(C),J=a(342),P=a(279);a(280);var w=window.app.pageOptions,b=w.username,D=w.repoID,E=w.filePath,T={toggleCommentPanel:u.default.func.isRequired,commentsNumber:u.default.number,participants:u.default.array,onParticipantsChange:u.default.func},v=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleResolvedComment=function(){a.setState({showResolvedComment:!a.state.showResolvedComment})},a.listComments=function(){L.seafileAPI.listComments(D,E).then(function(e){a.setState({commentsList:e.data.comments})}).catch(function(e){var t=g.Utils.getErrorMsg(e);X.default.danger(t)})},a.listRepoRelatedUsers=function(){L.seafileAPI.listRepoRelatedUsers(D).then(function(e){var t=e.data.user_list.map(function(e){return{id:e.email,display:e.name}});a.setState({relatedUsers:t})})},a.handleCommentChange=function(e){a.setState({comment:e.target.value})},a.addComment=function(){a.state.comment.trim()&&(L.seafileAPI.postComment(D,E,a.state.comment.trim()).then(function(){a.listComments()}).catch(function(e){X.default.danger(g.Utils.getErrorMsg(e))}),a.setState({comment:""}))},a.onSubmit=function(){a.addParticipant(b),0===a.toBeAddedParticipant.length?a.addComment():L.seafileAPI.addFileParticipants(D,E,a.toBeAddedParticipant).then(function(e){a.onParticipantsChange(D,E),a.toBeAddedParticipant=[],a.addComment()}).catch(function(e){X.default.danger(g.Utils.getErrorMsg(e))})},a.resolveComment=function(e){L.seafileAPI.updateComment(D,e.target.id,"true").then(function(){a.listComments()}).catch(function(e){var t=g.Utils.getErrorMsg(e);X.default.danger(t)})},a.deleteComment=function(e){L.seafileAPI.deleteComment(D,e.target.id).then(function(){a.listComments()}).catch(function(e){var t=g.Utils.getErrorMsg(e);X.default.danger(t)})},a.editComment=function(e,t){L.seafileAPI.updateComment(D,e,null,null,t).then(function(e){a.listComments()}).catch(function(e){var t=g.Utils.getErrorMsg(e);X.default.danger(t)})},a.onParticipantsChange=function(){a.props.onParticipantsChange?a.props.onParticipantsChange():a.getParticipants()},a.getParticipants=function(){a.props.participants?a.setState({participants:a.props.participants}):L.seafileAPI.listFileParticipants(D,E).then(function(e){a.setState({participants:e.data.participant_list})})},a.checkParticipant=function(e){return a.state.participants.map(function(e){return e.email}).includes(e)},a.addParticipant=function(e){a.checkParticipant(e)||a.toBeAddedParticipant.push(e)},a.renderUserSuggestion=function(e,t,a,n,r){return d.default.createElement("div",{className:"user "+(r?"focused":"")},a)},a.state={commentsList:[],showResolvedComment:!0,participants:null,relatedUsers:null,comment:""},a.toBeAddedParticipant=[],a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.listComments(),this.getParticipants(),this.listRepoRelatedUsers()}},{key:"componentWillReceiveProps",value:function(e){this.props.commentsNumber!==e.commentsNumber&&this.listComments(),this.props.participants!==e.participants&&this.setState({participants:e.participants})}},{key:"render",value:function(){var e=this,t=this.state,a=t.participants,n=t.commentsList;return d.default.createElement("div",{className:"seafile-comment"},d.default.createElement("div",{className:"seafile-comment-title"},d.default.createElement("div",{onClick:this.props.toggleCommentPanel,className:"seafile-comment-title-close"},d.default.createElement("i",{className:"fa fa-times-circle"})),d.default.createElement("div",{className:"seafile-comment-title-text"},(0,Y.gettext)("Comments"))),d.default.createElement("div",{className:"seafile-comment-toggle-resolved"},d.default.createElement("div",{className:"seafile-comment-title-text"},(0,Y.gettext)("Show resolved comments")),d.default.createElement("div",{className:"seafile-comment-title-toggle d-flex"},d.default.createElement("label",{className:"custom-switch",id:"toggle-resolved-comments"},d.default.createElement("input",{type:"checkbox",name:"option",className:"custom-switch-input",onChange:this.toggleResolvedComment,checked:this.state.showResolvedComment&&"checked"}),d.default.createElement("span",{className:"custom-switch-indicator"})))),d.default.createElement("ul",{className:"seafile-comment-list"},n.length>0&&n.map(function(t){var a=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments[2],new Date(t.created_at).getTime()),n=(0,f.default)(a).format("YYYY-MM-DD HH:mm");return d.default.createElement(d.default.Fragment,{key:t.id},d.default.createElement(M,{item:t,time:n,deleteComment:e.deleteComment,resolveComment:e.resolveComment,editComment:e.editComment,showResolvedComment:e.state.showResolvedComment}))}),0==n.length&&d.default.createElement("li",{className:"comment-vacant"},(0,Y.gettext)("No comment yet."))),d.default.createElement("div",{className:"seafile-comment-footer"},a&&d.default.createElement(Z.default,{onParticipantsChange:this.onParticipantsChange,participants:a,repoID:D,filePath:E,showIconTip:!0}),d.default.createElement(J.MentionsInput,{value:this.state.comment,onChange:this.handleCommentChange,placeholder:(0,Y.gettext)("Add a comment."),style:P.defaultStyle},d.default.createElement(J.Mention,{trigger:"@",displayTransform:function(e,t){return"@"+t},data:this.state.relatedUsers,renderSuggestion:this.renderUserSuggestion,style:P.defaultMentionStyle,onAdd:function(t,a){e.addParticipant(t)},appendSpaceOnAdd:!0})),d.default.createElement(h.Button,{className:"submit-comment",color:"primary",size:"sm",onClick:this.onSubmit},(0,Y.gettext)("Submit"))))}}]),t}(d.default.Component);v.propTypes=T;var y={time:u.default.string.isRequired,item:u.default.object.isRequired,deleteComment:u.default.func.isRequired,resolveComment:u.default.func.isRequired,showResolvedComment:u.default.bool.isRequired,editComment:u.default.func.isRequired},M=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleDropDownMenu=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a.convertComment=function(e){m.processor.process(e).then(function(e){var t=String(e);a.setState({html:t})})},a.toggleEditComment=function(){a.setState({editable:!a.state.editable})},a.updateComment=function(e){var t=a.state.newComment;a.props.item.comment!==t&&a.props.editComment(e.target.id,t),a.toggleEditComment()},a.handleCommentChange=function(e){a.setState({newComment:e.target.value})},a.onCommentClick=function(e){if("A"===e.target.nodeName){var t=e.target.previousSibling;t&&3===t.nodeType&&"@"===t.nodeValue.slice(-1)&&e.preventDefault()}},a.state={dropdownOpen:!1,html:"",newComment:a.props.item.comment,editable:!1},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.convertComment(this.props.item.comment)}},{key:"componentWillReceiveProps",value:function(e){this.convertComment(e.item.comment)}},{key:"render",value:function(){var e=this,t=this.props.item;return t.resolved&&!this.props.showResolvedComment?null:this.state.editable?d.default.createElement("li",{className:"seafile-comment-item",id:t.id},d.default.createElement("div",{className:"seafile-comment-info"},d.default.createElement("img",{className:"avatar",src:t.avatar_url,alt:""}),d.default.createElement("div",{className:"reviewer-info"},d.default.createElement("div",{className:"reviewer-name ellipsis"},t.user_name),d.default.createElement("div",{className:"review-time"},this.props.time))),d.default.createElement("div",{className:"seafile-edit-comment"},d.default.createElement("textarea",{className:"edit-comment-input",value:this.state.newComment,onChange:this.handleCommentChange,clos:"100",rows:"3",warp:"virtual"}),d.default.createElement(h.Button,{className:"comment-btn",color:"success",size:"sm",onClick:this.updateComment,id:t.id},(0,Y.gettext)("Update"))," ",d.default.createElement(h.Button,{className:"comment-btn",color:"secondary",size:"sm",onClick:this.toggleEditComment},(0,Y.gettext)("Cancel")))):d.default.createElement("li",{className:t.resolved?"seafile-comment-item seafile-comment-item-resolved":"seafile-comment-item",id:t.id},d.default.createElement("div",{className:"seafile-comment-info"},d.default.createElement("img",{className:"avatar",src:t.avatar_url,alt:""}),d.default.createElement("div",{className:"reviewer-info"},d.default.createElement("div",{className:"reviewer-name ellipsis"},t.user_name),d.default.createElement("div",{className:"review-time"},this.props.time)),d.default.createElement(h.Dropdown,{isOpen:this.state.dropdownOpen,size:"sm",className:"seafile-comment-dropdown",toggle:this.toggleDropDownMenu},d.default.createElement(h.DropdownToggle,{className:"seafile-comment-dropdown-btn"},d.default.createElement("i",{className:"fas fa-ellipsis-v"})),d.default.createElement(h.DropdownMenu,null,t.user_email===b&&d.default.createElement(h.DropdownItem,{onClick:this.props.deleteComment,className:"delete-comment",id:t.id},(0,Y.gettext)("Delete")),t.user_email===b&&d.default.createElement(h.DropdownItem,{onClick:this.toggleEditComment,className:"edit-comment",id:t.id},(0,Y.gettext)("Edit")),!t.resolved&&d.default.createElement(h.DropdownItem,{onClick:this.props.resolveComment,className:"seafile-comment-resolved",id:t.id},(0,Y.gettext)("Mark as resolved"))))),d.default.createElement("div",{className:"seafile-comment-content",dangerouslySetInnerHTML:{__html:this.state.html},onClick:function(t){return e.onCommentClick(t)}}))}}]),t}(d.default.Component);M.propTypes=y,t.default=v},448:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(2),f=window.app.pageOptions.err,m={errorMsg:u.default.string},h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=void 0;return e="File preview unsupported"==f?d.default.createElement("p",null,(0,p.gettext)("Online view is not applicable to this file format")):d.default.createElement("p",{className:"error"},f||this.props.errorMsg),d.default.createElement("div",{className:"file-view-content flex-1 o-auto"},d.default.createElement("div",{className:"file-view-tip"},e,d.default.createElement("a",{href:"?dl=1",className:"btn btn-secondary"},(0,p.gettext)("Download"))))}}]),t}(d.default.Component);h.propTypes=m,t.default=h},47:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=a(0),c=n(d),u=a(1),p=n(u),f=a(241),m=n(f),h=a(4),Y=a(2),L=a(3),S=a(5),Z=n(S);a(120);var g={placeholder:p.default.string.isRequired,onSelectChange:p.default.func.isRequired,isMulti:p.default.bool.isRequired,className:p.default.string},C=function(e){return c.default.createElement("div",l({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),(0,Y.gettext)("User not found"))},X=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSelectChange=function(e){a.options=[],a.props.onSelectChange(e)},a.loadOptions=function(e,t){var n=e.trim();n.length>0&&h.seafileAPI.searchUsers(n).then(function(e){a.options=[];for(var n=0;n<e.data.users.length;n++){var r=e.data.users[n],i={};i.value=r.name,i.email=r.email,i.label=Y.enableShowContactEmailWhenSearchUser?c.default.createElement("div",{className:"d-flex"},c.default.createElement("img",{src:r.avatar_url,className:"avatar",width:"24",alt:""}),c.default.createElement("div",{className:"ml-2"},c.default.createElement("span",{className:"user-option-name"},r.name),c.default.createElement("br",null),c.default.createElement("span",{className:"user-option-email"},r.contact_email))):c.default.createElement(c.default.Fragment,null,c.default.createElement("img",{src:r.avatar_url,className:"select-module select-module-icon avatar",alt:""}),c.default.createElement("span",{className:"select-module select-module-name"},r.name)),a.options.push(i)}t(a.options)}).catch(function(e){var t=L.Utils.getErrorMsg(e);Z.default.danger(t)})},a.clearSelect=function(){a.refs.userSelect.select.onChange([],{action:"clear"})},a.options=[],a}return o(t,e),s(t,[{key:"render",value:function(){return c.default.createElement(m.default,{isClearable:!0,classNamePrefix:!0,components:{NoOptionsMessage:C},isMulti:this.props.isMulti,loadOptions:this.loadOptions,onChange:this.handleSelectChange,placeholder:this.props.placeholder,className:"user-select "+this.props.className,value:this.props.value,ref:"userSelect"})}}]),t}(c.default.Component);X.propTypes=g,t.default=X},5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(21),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=new r.default;t.default=i},58:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(3),f=a(64),m=n(f),h={isTextMode:u.default.bool.isRequired,isEditIconShow:u.default.bool.isRequired,permissions:u.default.array.isRequired,currentPermission:u.default.string.isRequired,onPermissionChanged:u.default.func.isRequired},Y=function(e){function t(){var e,a,n,o;r(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.translatePermission=function(e){return p.Utils.sharePerms(e)},n.translateExplanation=function(e){return p.Utils.sharePermsExplanation(e)},o=a,i(n,o)}return o(t,e),s(t,[{key:"render",value:function(){return d.default.createElement(m.default,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.permissions,currentOption:this.props.currentPermission,onOptionChanged:this.props.onPermissionChanged,translateOption:this.translatePermission,translateExplanation:this.translateExplanation})}}]),t}(d.default.Component);Y.propTypes=h,t.default=Y},64:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),d=n(l),c=a(1),u=n(c),p=a(2),f=a(80),m=n(f);a(140);var h={isTextMode:u.default.bool.isRequired,isEditIconShow:u.default.bool.isRequired,options:u.default.array.isRequired,currentOption:u.default.string.isRequired,translateOption:u.default.func.isRequired,translateExplanation:u.default.func,onOptionChanged:u.default.func.isRequired,toggleItemFreezed:u.default.func},Y=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.setOptions=function(){a.options=[];for(var e=a.props.options,t=0,n=e.length;t<n;t++){var r={};r.value=e[t],e[t].length?r.label=d.default.createElement("div",null,a.props.translateOption(e[t]),a.props.translateExplanation&&d.default.createElement("div",{className:"permission-editor-explanation"},a.props.translateExplanation(e[t]))):r.label=d.default.createElement("div",{style:{minHeight:"1em"}}),a.options.push(r)}a.setState({options:a.options})},a.onEditPermission=function(e){e.nativeEvent.stopImmediatePropagation(),a.setState({isEditing:!0}),a.props.toggleItemFreezed&&a.props.toggleItemFreezed(!0)},a.onOptionChanged=function(e){var t=e.value;t!==a.props.currentOption&&a.props.onOptionChanged(t),a.setState({isEditing:!1}),a.props.toggleItemFreezed&&a.props.toggleItemFreezed(!1)},a.onSelectHandler=function(e){e.nativeEvent.stopImmediatePropagation()},a.onHideSelect=function(){a.setState({isEditing:!1}),a.props.toggleItemFreezed&&a.props.toggleItemFreezed(!1)},a.state={isEditing:!1,options:[]},a.options=[],a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onHideSelect),this.setOptions()}},{key:"componentWillReceiveProps",value:function(){this.setOptions()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onHideSelect)}},{key:"render",value:function(){var e=this.props,t=e.currentOption,a=e.isTextMode;return d.default.createElement("div",{className:"permission-editor",onClick:this.onSelectHandler},(!a||this.state.isEditing)&&d.default.createElement(m.default,{options:this.state.options,className:"permission-editor-select",classNamePrefix:"permission-editor",placeholder:this.props.translateOption(t),onChange:this.onOptionChanged,captureMenuScroll:!1}),a&&!this.state.isEditing&&d.default.createElement("div",null,this.props.translateOption(t),this.props.isEditIconShow&&d.default.createElement("span",{title:(0,p.gettext)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:this.onEditPermission})))}}]),t}(d.default.Component);Y.propTypes=h,t.default=Y},8:function(e,t,a){"use strict";function n(){return i.default.createElement("span",{className:"loading-icon loading-tip"})}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=n},84:function(e,t,a){"use strict";function n(e){var t=void 0,a=void 0,n=void 0,r=void 0,o=!1;try{t=(0,i.default)(),a=document.createRange(),n=document.getSelection(),r=document.createElement("a"),r.textContent=e,document.body.appendChild(r),a.selectNode(r),n.addRange(a);document.execCommand("copy");o=!0}catch(e){}finally{n&&("function"==typeof n.removeRange?n.removeRange(a):n.removeAllRanges()),r&&document.body.removeChild(r),t()}return o}Object.defineProperty(t,"__esModule",{value:!0});var r=a(205),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=n}},[2396]);