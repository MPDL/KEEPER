(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[34],{111:function(e,t,a){var n=a(358),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();e.exports=i},112:function(e,t){var a=Array.isArray;e.exports=a},136:function(e,t,a){var n=a(616),r=a(621);e.exports=function(e,t){var a=r(e,t);return n(a)?a:void 0}},1711:function(e,t,a){"use strict";var n=a(26),r=a(44),i=a(2),s=a.n(i),o=a(9),c=a.n(o),l=a(33),d=a.n(l),u=a(22),h={className:c.a.string,cssModule:c.a.object,size:c.a.string,bordered:c.a.bool,borderless:c.a.bool,striped:c.a.bool,dark:c.a.bool,hover:c.a.bool,responsive:c.a.oneOfType([c.a.bool,c.a.string]),tag:u.q,responsiveTag:u.q,innerRef:c.a.oneOfType([c.a.func,c.a.string,c.a.object])},p=function(e){var t=e.className,a=e.cssModule,i=e.size,o=e.bordered,c=e.borderless,l=e.striped,h=e.dark,p=e.hover,b=e.responsive,g=e.tag,j=e.responsiveTag,m=e.innerRef,f=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),O=Object(u.m)(d()(t,"table",!!i&&"table-"+i,!!o&&"table-bordered",!!c&&"table-borderless",!!l&&"table-striped",!!h&&"table-dark",!!p&&"table-hover"),a),v=s.a.createElement(g,Object(n.a)({},f,{ref:m,className:O}));if(b){var x=Object(u.m)(!0===b?"table-responsive":"table-responsive-"+b,a);return s.a.createElement(j,{className:x},v)}return v};p.propTypes=h,p.defaultProps={tag:"table",responsiveTag:"div"},t.a=p},172:function(e,t,a){var n=a(198),r=a(617),i=a(618),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?r(e):i(e)}},173:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},174:function(e,t,a){"use strict";var n=a(3),r=a(5),i=a(7),s=a(6),o=a(2),c=a.n(o),l=a(123),d=a(108),u=a(109),h=a(1051),p=a(1052),b=a(1050),g=a(450),j=a(1053),m=a(147),f=a(83),O=a(1),v=a(4),x=a(0),y=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChange=function(e){e.target.value.trim()?r.setState({isSubmitBtnActive:!0}):r.setState({isSubmitBtnActive:!1}),r.setState({childName:e.target.value})},r.handleSubmit=function(){if(r.state.isSubmitBtnActive){var e=r.state.childName;if(r.checkDuplicatedName()){var t=Object(O.pb)('The name "{name}" is already taken. Please choose a different name.');t=t.replace("{name}",v.a.HTMLescape(e)),r.setState({errMessage:t})}else{var a=r.state.parentPath+e;r.props.onAddFolder(a)}}},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.toggle=function(){r.props.addFolderCancel()},r.checkDuplicatedName=function(){return r.props.checkDuplicatedName(r.state.childName)},r.state={parentPath:"",childName:"",errMessage:"",isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.parentPath;"/"===e[e.length-1]?this.setState({parentPath:e}):this.setState({parentPath:e+"/"})}},{key:"render",value:function(){return Object(x.jsxs)(l.a,{isOpen:!0,toggle:this.toggle,autoFocus:!1,children:[Object(x.jsx)(d.a,{toggle:this.toggle,children:Object(O.pb)("New Folder")}),Object(x.jsxs)(u.a,{children:[Object(x.jsx)(h.a,{children:Object(x.jsxs)(p.a,{children:[Object(x.jsx)(b.a,{for:"folderName",children:Object(O.pb)("Name")}),Object(x.jsx)(g.a,{id:"folderName",value:this.state.childName,onKeyPress:this.handleKeyPress,onChange:this.handleChange,autoFocus:!0})]})}),this.state.errMessage&&Object(x.jsx)(j.a,{color:"danger",className:"mt-2",children:this.state.errMessage})]}),Object(x.jsxs)(m.a,{children:[Object(x.jsx)(f.a,{color:"secondary",onClick:this.toggle,children:Object(O.pb)("Cancel")}),Object(x.jsx)(f.a,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive,children:Object(O.pb)("Submit")})]})]})}}]),a}(c.a.Component);t.a=y},1786:function(e,t,a){a(71),e.exports=a(1801)},1787:function(e,t,a){},1788:function(e,t,a){},1789:function(e,t,a){},180:function(e,t,a){},1801:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(3),i=a(5),s=a(7),o=a(6),c=a(2),l=a.n(c),d=a(28),u=a.n(d),h=a(87),p=a.n(h),b=a(123),g=a(21),j=a(1),m=a(4),f=a(118),O=a(0),v=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).getActiveClass=function(t){return e.props.currentTab==t?"active":""},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"side-panel ".concat(this.props.isSidePanelClosed?"":"left-zero"),children:[Object(O.jsx)("div",{className:"side-panel-north",children:Object(O.jsx)(f.a,{onCloseSidePanel:this.props.onCloseSidePanel})}),Object(O.jsx)("div",{className:"side-panel-center",children:Object(O.jsx)("div",{className:"side-nav",children:Object(O.jsxs)("div",{className:"side-nav-con",children:[Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("System Admin")}),Object(O.jsxs)("ul",{className:"nav nav-pills flex-column nav-container",children:[j.x&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("info")),to:j.qc+"sys/info/",onClick:function(){return e.props.tabItemClick("info")},children:[Object(O.jsx)("span",{className:"sf2-icon-info","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Info")})]})}),j.Ab&&j.w&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("statistic")),to:j.qc+"sys/statistics/file/",onClick:function(){return e.props.tabItemClick("statistic")},children:[Object(O.jsx)("span",{className:"sf2-icon-histogram","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Statistic")})]})}),j.Zb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("devices")),to:j.qc+"sys/desktop-devices/",onClick:function(){return e.props.tabItemClick("devices")},children:[Object(O.jsx)("span",{className:"sf2-icon-monitor","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Devices")})]})}),j.z&&j.j&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("web-settings")),to:j.qc+"sys/web-settings/",onClick:function(){return e.props.tabItemClick("web-settings")},children:[Object(O.jsx)("span",{className:"sf2-icon-cog2","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Settings")})]})}),j.q&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("libraries")),to:j.qc+"sys/all-libraries/",onClick:function(){return e.props.tabItemClick("libraries")},children:[Object(O.jsx)("span",{className:"sf2-icon-library","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Libraries")})]})}),j.r&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("users")),to:j.qc+"sys/users/",onClick:function(){return e.props.tabItemClick("users")},children:[Object(O.jsx)("span",{className:"sf2-icon-user","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Users")})]})}),j.p&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("groups")),to:j.qc+"sys/groups/",onClick:function(){return e.props.tabItemClick("groups")},children:[Object(O.jsx)("span",{className:"sf2-icon-group","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Groups")})]})}),j.Ab&&j.p&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("departments")),to:j.qc+"sys/departments/",onClick:function(){return e.props.tabItemClick("departments")},children:[Object(O.jsx)("span",{className:"sf2-icon-organization","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Departments")})]})}),j.Pb&&j.Zb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("organizations")),to:j.qc+"sys/organizations/",onClick:function(){return e.props.tabItemClick("organizations")},children:[Object(O.jsx)("span",{className:"sf2-icon-organization","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Organizations")})]})}),j.Ob&&j.Zb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("institutions")),to:j.qc+"sys/institutions/",onClick:function(){return e.props.tabItemClick("institutions")},children:[Object(O.jsx)("span",{className:"sf2-icon-organization","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Institutions")})]})}),j.Zb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("notifications")),to:j.qc+"sys/notifications/",onClick:function(){return e.props.tabItemClick("notifications")},children:[Object(O.jsx)("span",{className:"sf2-icon-msgs","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Notifications")})]})}),j.Zb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("links")),to:j.qc+"sys/share-links/",onClick:function(){return e.props.tabItemClick("links")},children:[Object(O.jsx)("span",{className:"sf2-icon-link","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Links")})]})}),j.uc&&j.y&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("logs")),to:j.qc+"sys/logs/login",onClick:function(){return e.props.tabItemClick("logs")},children:[Object(O.jsx)("span",{className:"sf2-icon-clock","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Logs")})]})}),j.Ab&&j.Zb&&j.Q&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("file-scan-records")),to:j.qc+"sys/file-scan-records/",onClick:function(){return e.props.tabItemClick("file-scan-records")},children:[Object(O.jsx)("span",{className:"sf2-icon-security","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("File Scan")})]})}),j.Ab&&j.Zb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("virus-files")),to:j.qc+"sys/virus-files/all/",onClick:function(){return e.props.tabItemClick("virus-files")},children:[Object(O.jsx)("span",{className:"sf2-icon-security","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Virus Scan")})]})}),j.Ab&&j.R&&j.Zb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("invitations")),to:j.qc+"sys/invitations/",onClick:function(){return e.props.tabItemClick("invitations")},children:[Object(O.jsx)("span",{className:"sf2-icon-invite","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Invitations")})]})}),j.Zb&&j.fb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("termsandconditions")),to:j.qc+"sys/terms-and-conditions/",onClick:function(){return e.props.tabItemClick("termsandconditions")},children:[Object(O.jsx)("span",{className:"sf2-icon-wiki","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Terms and Conditions")})]})}),j.Ab&&j.u&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("adminLogs")),to:j.qc+"sys/admin-logs/operation",onClick:function(){return e.props.tabItemClick("adminLogs")},children:[Object(O.jsx)("span",{className:"sf2-icon-admin-log","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Admin Logs")})]})}),j.Zb&&j.hb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("work-weixin")),to:j.qc+"sys/work-weixin/",onClick:function(){return e.props.tabItemClick("work-weixin")},children:[Object(O.jsx)("span",{className:"sf3-font-enterprise-wechat sf3-font","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:"\u4f01\u4e1a\u5fae\u4fe1\u96c6\u6210"})]})}),j.Zb&&j.N&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("dingtalk")),to:j.qc+"sys/dingtalk/",onClick:function(){return e.props.tabItemClick("dingtalk")},children:[Object(O.jsx)("span",{className:"sf3-font-dingtalk sf3-font","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:"\u9489\u9489\u96c6\u6210"})]})}),j.Zb&&j.bb&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(g.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("abuse-reports")),to:j.qc+"sys/abuse-reports/",onClick:function(){return e.props.tabItemClick("abuse-reports")},children:[Object(O.jsx)("span",{className:"sf2-icon-monitor","aria-hidden":"true"}),Object(O.jsx)("span",{className:"nav-text",children:Object(j.pb)("Abuse Reports")})]})})]})]})})})]})}}]),a}(l.a.Component),x=v,y=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"main-panel",children:this.props.children})}}]),a}(c.Component),S=y,D=a(83),P=a(8),w=a(10),I=a(19),k=a(101),C=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"main-panel-north ".concat(this.props.children?"border-left-show":""),children:[Object(O.jsxs)("div",{className:"cur-view-toolbar",children:[Object(O.jsx)("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:Object(j.pb)("Side Nav Menu"),onClick:this.props.toggleSidePanel}),Object(O.jsx)("div",{className:"operation",children:this.props.children})]}),Object(O.jsxs)("div",{className:"common-toolbar",children:[this.props.search&&this.props.search,Object(O.jsx)(k.a,{isAdminPanel:!0})]})]})}}]),a}(c.Component),N=C,M=(a(1787),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).uploadLicenseFile=function(e){if(n.fileInput.current.files.length){var t=n.fileInput.current.files[0];P.b.sysAdminUploadLicense(t).then((function(e){var t=n.state.sysInfo;Object.assign(t,e.data,{with_license:!0}),n.setState({sysInfo:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))}},n.openFileInput=function(){n.fileInput.current.click()},n.renderLicenseDescString=function(e,t,a){return"life-time"==e?"zh-cn"==window.app.config.lang?"\u6c38\u4e45\u6388\u6743\u7ed9 "+t+"\uff0c\u6280\u672f\u652f\u6301\u670d\u52a1\u81f3 "+a+" \u5230\u671f":Object(j.pb)("licensed to {placeholder_license_to}, upgrade service expired in {placeholder_license_expiration}").replace("{placeholder_license_to}",t).replace("{placeholder_license_expiration}",a):Object(j.pb)("licensed to {placeholder_license_to}, expires on {placeholder_license_expiration}").replace("{placeholder_license_to}",t).replace("{placeholder_license_expiration}",a)},n.state={loading:!0,errorMsg:"",sysInfo:{}},n.fileInput=l.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetSysInfo().then((function(t){e.setState({loading:!1,sysInfo:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.sysInfo,t=e.license_mode,a=e.license_to,r=e.license_expiration,i=e.org_count,s=e.repos_count,o=e.total_files_count,l=e.total_storage,d=e.total_devices_count,u=e.current_connected_devices_count,h=e.license_maxusers,p=e.multi_tenancy_enabled,b=e.active_users_count,g=e.users_count,f=e.groups_count,v=e.with_license,x=this.state,y=x.loading,S=x.errorMsg;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container system-admin-info",children:[Object(O.jsx)("h2",{className:"heading",children:Object(j.pb)("Info")}),Object(O.jsxs)("div",{className:"content",children:[y&&Object(O.jsx)(I.a,{}),S&&Object(O.jsx)("p",{className:"error text-center mt-4",children:S}),!y&&!S&&Object(O.jsxs)("dl",{className:"flex-1 m-0",children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("System Info")}),j.Ab?Object(O.jsxs)("dd",{className:"info-item-content",children:[Object(j.pb)("Professional Edition"),v&&" "+this.renderLicenseDescString(t,a,r),Object(O.jsx)("br",{}),j.wb&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(D.a,{type:"button",className:"mt-2",onClick:this.openFileInput,children:Object(j.pb)("Upload license")}),Object(O.jsx)("input",{className:"d-none",type:"file",onChange:this.uploadLicenseFile,ref:this.fileInput})]})]}):Object(O.jsxs)("dd",{className:"info-item-content",children:[Object(j.pb)("Community Edition"),Object(O.jsx)("a",{className:"ml-1",href:"https://download.seafile.com/published/seafile-manual/deploy_pro/migrate_from_seafile_community_server.md",target:"_blank",children:Object(j.pb)("Upgrade to Pro Edition")})]}),Object(O.jsxs)("dt",{className:"info-item-heading",children:[Object(j.pb)("Libraries")," / ",Object(j.pb)("Files")]}),Object(O.jsxs)("dd",{className:"info-item-content",children:[s," / ",o]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Storage Used")}),Object(O.jsx)("dd",{className:"info-item-content",children:m.a.bytesToSize(l)}),Object(O.jsxs)("dt",{className:"info-item-heading",children:[Object(j.pb)("Total Devices")," / ",Object(j.pb)("Current Connected Devices")]}),Object(O.jsxs)("dd",{className:"info-item-content",children:[d," / ",u]}),j.Ab?Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("dt",{className:"info-item-heading",children:[Object(j.pb)("Activated Users")," / ",Object(j.pb)("Total Users")," / ",Object(j.pb)("Limits")]}),Object(O.jsxs)("dd",{className:"info-item-content",children:[b," / ",g," / ",v?h:"--"]})]}):Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("dt",{className:"info-item-heading",children:[Object(j.pb)("Activated Users")," / ",Object(j.pb)("Total Users")]}),Object(O.jsxs)("dd",{className:"info-item-content",children:[b," / ",g]})]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Groups")}),Object(O.jsx)("dd",{className:"info-item-content",children:f}),p&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Organizations")}),Object(O.jsx)("dd",{className:"info-item-content",children:i})]})]})]})]})})]})}}]),a}(c.Component)),_=M,A=a(12),L=a.n(A),T=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"fileStatistic",urlPart:"statistics/file",text:Object(j.pb)("File")},{name:"storageStatistic",urlPart:"statistics/storage",text:Object(j.pb)("Storage")},{name:"usersStatistic",urlPart:"statistics/user",text:Object(j.pb)("Users")},{name:"trafficStatistic",urlPart:"statistics/traffic",text:Object(j.pb)("Traffic")},{name:"reportsStatistic",urlPart:"statistics/reports",text:Object(j.pb)("Reports")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return Object(O.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(O.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,a){return Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},a)}))})})}}]),a}(l.a.Component),F=a(50),R=a(9),U=a.n(R),E=a(301),B=a(290),z=a.n(B),V=a(292),q=(a(542),{disabledDate:U.a.func.isRequired,value:U.a.object,onChange:U.a.func.isRequired}),W="YYYY-MM-DD",H=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).defaultCalendarValue=null,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=window.app.config.lang;this.defaultCalendarValue=L()().locale(e).clone()}},{key:"render",value:function(){var e=this.props,t=Object(O.jsx)(E.a,{defaultValue:this.defaultCalendarValue,disabledDate:e.disabledDate,format:W,locale:Object(V.a)()});return Object(O.jsx)(z.a,{calendar:t,value:e.value,onChange:e.onChange,children:function(e){var t=e.value;return Object(O.jsx)("span",{children:Object(O.jsx)("input",{placeholder:"yyyy-mm-dd",tabIndex:"-1",readOnly:!0,value:t&&t.format(W)||"",className:"form-control system-statistic-input"})})}})}}]),a}(l.a.Component);H.propsTypes=q;var Y=H,G=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).changeActive=function(e){if(n.state.statisticType!==e){var t,a=L()().format("YYYY-MM-DD 00:00:00");switch(e){case"oneWeek":t=L()().subtract(6,"d").format("YYYY-MM-DD 00:00:00");break;case"oneMonth":t=L()().subtract(29,"d").format("YYYY-MM-DD 00:00:00");break;case"oneYear":t=L()().subtract(364,"d").format("YYYY-MM-DD 00:00:00")}n.setState({statisticType:e});n.props.getActiviesFiles(t,a,"day")}},n.disabledStartDate=function(e){if(!e)return!1;var t=L()().format(),a=n.state.endValue;return a?a.isBefore(e)||L()(e).format()>t:t<L()(e).format()},n.disabledEndDate=function(e){if(!e)return!1;var t=L()().format(),a=n.state.startValue;return a?e.isBefore(a)||L()(e).format()>t:t<L()(e).format()},n.onChange=function(e,t){n.setState(Object(F.a)({},e,t))},n.onSubmit=function(){var e=n.state,t=e.startValue,a=e.endValue;if(t&&a){n.setState({statisticType:"itemButton"});var r=L()(t).format("YYYY-MM-DD 00:00:00"),i=L()(a).format("YYYY-MM-DD 00:00:00");n.props.getActiviesFiles(r,i,"day")}},n.state={statisticType:"oneWeek",startValue:null,endValue:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=L()().format("YYYY-MM-DD 00:00:00"),t=L()().subtract(6,"d").format("YYYY-MM-DD 00:00:00");this.props.getActiviesFiles(t,e,"day")}},{key:"render",value:function(){var e=this.state,t=e.statisticType,a=e.endValue,n=e.startValue;return Object(O.jsxs)(c.Fragment,{children:[this.props.children,Object(O.jsxs)("div",{className:"system-statistic-time-range",children:[Object(O.jsxs)("div",{className:"sys-stat-tool",children:[Object(O.jsx)("div",{className:"system-statistic-item border-right-0 rounded-left ".concat("oneWeek"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneWeek"),children:Object(j.pb)("7 Days")}),Object(O.jsx)("div",{className:"system-statistic-item border-right-0 ".concat("oneMonth"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneMonth"),children:Object(j.pb)("30 Days")}),Object(O.jsx)("div",{className:"system-statistic-item rounded-right ".concat("oneYear"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneYear"),children:Object(j.pb)("1 Year")})]}),Object(O.jsxs)("div",{className:"system-statistic-input-container",children:[Object(O.jsx)(Y,{disabledDate:this.disabledStartDate,value:n,onChange:this.onChange.bind(this,"startValue")}),Object(O.jsx)("span",{className:"system-statistic-connect",children:"-"}),Object(O.jsx)(Y,{disabledDate:this.disabledEndDate,value:a,onChange:this.onChange.bind(this,"endValue")}),Object(O.jsx)(D.a,{className:"operation-item system-statistic-button",onClick:this.onSubmit,children:Object(j.pb)("Submit")})]})]})]})}}]),a}(l.a.Component),Q=G,K=a(380),Z=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).titleCallback=function(e,t){return t.datasets[e.datasetIndex].label+": "+m.a.bytesToSize(e.yLabel)},n.ticksCallback=function(e,t,a){return m.a.bytesToSize(e)},n.state={data:{},opations:{}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labels,a=e.filesData,n=e.isTitleCallback,r=e.isTicksCallback,i=e.suggestedMaxNumbers,s=e.isLegendStatus,o=e.chartTitle,c=this,l={labels:t,datasets:a},d={title:{display:!0,fontSize:14,text:o},elements:{line:{fill:!1,tension:0,borderWidth:2}},legend:{display:s,labels:{usePointStyle:!0}},tooltips:{callbacks:{label:function(e,t){return n?c.titleCallback(e,t):t.datasets[e.datasetIndex].label+": "+e.yLabel}}},layout:{padding:{right:100}},scales:{yAxes:[{ticks:{beginAtZero:!0,suggestedMax:i,callback:function(e,t,a){return r?c.ticksCallback(e,t,a):e}}}],xAxes:[{ticks:{maxTicksLimit:20}}]}};this.setState({data:l,options:d})}},{key:"componentWillReceiveProps",value:function(e){var t={labels:e.labels,datasets:e.filesData};this.setState({data:t})}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.options;return Object(O.jsx)(K.Line,{data:t,options:a})}}]),a}(l.a.Component),X=Z,J=(a(696),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getActiviesFiles=function(e,t,a){var r=n.state.filesData;P.b.sysAdminStatisticFiles(e,t,a).then((function(e){var t=[],a=[],i=[],s=[],o=[],c=e.data;if(Array.isArray(c)){c.forEach((function(e){t.push(L()(e.datetime).format("YYYY-MM-DD")),a.push(e.added),i.push(e.deleted),o.push(e.modified),s.push(e.visited)}));var l={label:Object(j.pb)("Added"),data:a,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},d={label:Object(j.pb)("Visited"),data:s,borderColor:"#fd913a",backgroundColor:"#fd913a"},u={label:Object(j.pb)("Modified"),data:o,borderColor:"#72c3fc",backgroundColor:"#72c3fc"},h={label:Object(j.pb)("Deleted"),data:i,borderColor:"#f75356",backgroundColor:"#f75356"};r=[d,l,u,h]}n.setState({filesData:r,labels:t,isLoading:!1})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={filesData:[],labels:[],isLoading:!0},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.labels,a=e.filesData,r=e.isLoading;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(T,{currentItem:"fileStatistic"}),Object(O.jsxs)("div",{className:"cur-view-content",children:[Object(O.jsx)(Q,{getActiviesFiles:this.getActiviesFiles}),r&&Object(O.jsx)(I.a,{}),!r&&t.length>0&&Object(O.jsx)(X,{labels:t,filesData:a,suggestedMaxNumbers:10,isLegendStatus:!0,chartTitle:Object(j.pb)("File Operations")})]})]})]})}}]),a}(l.a.Component)),$=J,ee=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getActiviesFiles=function(e,t,a){var r=n.state.filesData;P.b.sysAdminStatisticStorages(e,t,a).then((function(e){var t=[],a=[],i=e.data;if(Array.isArray(i)){i.forEach((function(e){t.push(L()(e.datetime).format("YYYY-MM-DD")),a.push(e.total_storage)}));var s={label:Object(j.pb)("Total Storage"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"};r=[s]}n.setState({filesData:r,labels:t,isLoading:!1})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={filesData:[],labels:[],isLoading:!0},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.labels,a=e.filesData,r=e.isLoading;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(T,{currentItem:"storageStatistic"}),Object(O.jsxs)("div",{className:"cur-view-content",children:[Object(O.jsx)(Q,{getActiviesFiles:this.getActiviesFiles}),r&&Object(O.jsx)(I.a,{}),!r&&t.length>0&&Object(O.jsx)(X,{labels:t,filesData:a,suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!1,chartTitle:Object(j.pb)("Total Storage")})]})]})]})}}]),a}(l.a.Component),te=ee,ae=a(29),ne=a(450),re=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.sortBy,n="asc"==e.sortOrder?Object(O.jsx)("span",{className:"fas fa-caret-up"}):Object(O.jsx)("span",{className:"fas fa-caret-down"});return Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"16%",children:"user"==t?Object(j.pb)("User"):Object(j.pb)("Organization")}),Object(O.jsx)("th",{width:"11%",children:Object(O.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"sync_file_upload"),children:[Object(j.pb)("Sync Upload")," ","sync_file_upload"===a&&n]})}),Object(O.jsx)("th",{width:"14%",children:Object(O.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"sync_file_download"),children:[Object(j.pb)("Sync Download")," ","sync_file_download"===a&&n]})}),Object(O.jsx)("th",{width:"11%",children:Object(O.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"web_file_upload"),children:[Object(j.pb)("Web Upload")," ","web_file_upload"===a&&n]})}),Object(O.jsx)("th",{width:"14%",children:Object(O.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"web_file_download"),children:[Object(j.pb)("Web Download")," ","web_file_download"===a&&n]})}),Object(O.jsx)("th",{width:"17%",children:Object(O.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"link_file_upload"),children:[Object(j.pb)("Share link upload")," ","link_file_upload"===a&&n]})}),Object(O.jsx)("th",{width:"17%",children:Object(O.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"link_file_download"),children:[Object(j.pb)("Share link download")," ","link_file_download"===a&&n]})})]})}),Object(O.jsx)("tbody",{children:this.props.children})]})}}]),a}(l.a.Component),ie=re,se=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).trafficName=function(){var t=e.props,a=t.userTrafficItem;switch(t.type){case"user":return a.name?Object(O.jsx)("a",{href:j.qc+"useradmin/info/"+a.email+"/",children:a.name}):Object(O.jsx)("span",{children:"--"});case"org":return Object(O.jsx)("span",{children:a.org_name})}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.userTrafficItem,t=m.a.bytesToSize(e.sync_file_upload),a=m.a.bytesToSize(e.sync_file_download),n=m.a.bytesToSize(e.web_file_upload),r=m.a.bytesToSize(e.web_file_download),i=m.a.bytesToSize(e.link_file_upload),s=m.a.bytesToSize(e.link_file_download);return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:this.trafficName()}),Object(O.jsx)("td",{children:t}),Object(O.jsx)("td",{children:a}),Object(O.jsx)("td",{children:n}),Object(O.jsx)("td",{children:r}),Object(O.jsx)("td",{children:i}),Object(O.jsx)("td",{children:s})]})}}]),a}(l.a.Component),oe=se,ce=a(49),le=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.getTrafficList(n.state.month,n.state.currentPage-1)},n.getNextPage=function(){n.getTrafficList(n.state.month,n.state.currentPage+1)},n.handleChange=function(e){var t=e.target.value;n.setState({month:t})},n.handleKeyPress=function(e){var t=n.state.month;if("Enter"===e.key){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(t)){var a=Object(j.pb)("Invalid month, should be yyyymm.");return void n.setState({errorMessage:a})}n.getTrafficList(t,n.initPage),e.target.blur(),e.preventDefault()}},n.getTrafficList=function(e,t){var a=n.state,r=a.perPage,i=a.sortBy,s=a.sortOrder,o="asc"==s?i:"".concat(i,"_").concat(s);n.setState({isLoading:!0,errorMessage:""}),P.b.sysAdminListOrgTraffic(e,t,r,o).then((function(a){var r=a.data.org_monthly_traffic_list.slice(0);n.setState({month:e,currentPage:t,orgTrafficList:r,hasNextPage:a.data.has_next_page,isLoading:!1})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.sortItems=function(e){n.setState({sortBy:e,sortOrder:"asc"==n.state.sortOrder?"desc":"asc"},(function(){var e=n.state,t=e.month,a=e.currentPage;n.getTrafficList(t,a)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getTrafficList(n.initPage,n.initMonth)}))},n.state={orgTrafficList:[],perPage:25,currentPage:1,hasNextPage:!1,month:L()().format("YYYYMM"),isLoading:!1,errorMessage:"",sortBy:"link_file_download",sortOrder:"desc"},n.initPage=1,n.initMonth=L()().format("YYYYMM"),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getTrafficList(e.initMonth,e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.errorMessage,n=e.orgTrafficList,r=e.currentPage,i=e.hasNextPage,s=e.perPage,o=e.sortBy,l=e.sortOrder;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[Object(O.jsx)("span",{className:"statistic-reports-tip",children:Object(j.pb)("Month:")}),Object(O.jsx)(ne.a,{className:"statistic-reports-input",defaultValue:L()().format("YYYYMM"),onChange:this.handleChange,onKeyPress:this.handleKeyPress}),a&&Object(O.jsx)("div",{className:"error",children:a})]}),t&&Object(O.jsx)(I.a,{}),!t&&Object(O.jsx)(ie,{type:"org",sortItems:this.sortItems,sortBy:o,sortOrder:l,children:n.length>0&&n.map((function(e,t){return Object(O.jsx)(oe,{userTrafficItem:e,type:"org"},t)}))}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:r,hasNextPage:i,curPerPage:s,resetPerPage:this.resetPerPage})]})}}]),a}(l.a.Component),de=le,ue=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.getTrafficList(n.state.month,n.state.currentPage-1)},n.getNextPage=function(){n.getTrafficList(n.state.month,n.state.currentPage+1)},n.handleChange=function(e){var t=e.target.value;n.setState({month:t})},n.handleKeyPress=function(e){var t=n.state.month;if("Enter"===e.key){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(t)){var a=Object(j.pb)("Invalid month, should be yyyymm.");return void n.setState({errorMessage:a})}n.getTrafficList(t,n.initPage),e.target.blur(),e.preventDefault()}},n.getTrafficList=function(e,t){var a=n.state,r=a.perPage,i=a.sortBy,s=a.sortOrder,o="asc"==s?i:"".concat(i,"_").concat(s);n.setState({isLoading:!0,errorMessage:""}),P.b.sysAdminListUserTraffic(e,t,r,o).then((function(a){var r=a.data.user_monthly_traffic_list.slice(0);n.setState({month:e,currentPage:t,userTrafficList:r,hasNextPage:a.data.has_next_page,isLoading:!1})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.sortItems=function(e){n.setState({sortBy:e,sortOrder:"asc"==n.state.sortOrder?"desc":"asc"},(function(){var e=n.state,t=e.month,a=e.currentPage;n.getTrafficList(t,a)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getTrafficList(n.initMonth,n.initPage)}))},n.state={userTrafficList:[],hasNextPage:!1,perPage:25,currentPage:1,month:L()().format("YYYYMM"),isLoading:!1,errorMessage:"",sortBy:"link_file_download",sortOrder:"desc"},n.initPage=1,n.initMonth=L()().format("YYYYMM"),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getTrafficList(e.initMonth,e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.errorMessage,n=e.userTrafficList,r=e.currentPage,i=e.hasNextPage,s=e.perPage,o=e.sortBy,l=e.sortOrder;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[Object(O.jsx)("span",{className:"statistic-reports-tip",children:Object(j.pb)("Month:")}),Object(O.jsx)(ne.a,{className:"statistic-reports-input",defaultValue:L()().format("YYYYMM"),onChange:this.handleChange,onKeyPress:this.handleKeyPress}),a&&Object(O.jsx)("div",{className:"error",children:a})]}),t&&Object(O.jsx)(I.a,{}),!t&&Object(O.jsx)(ie,{type:"user",sortItems:this.sortItems,sortBy:o,sortOrder:l,children:n.length>0&&n.map((function(e,t){return Object(O.jsx)(oe,{userTrafficItem:e,type:"user"},t)}))}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:r,hasNextPage:i,curPerPage:s,resetPerPage:this.resetPerPage})]})}}]),a}(l.a.Component),he=ue,pe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).changeTabActive=function(e){n.setState({tabActive:e})},n.getActiviesFiles=function(e,t,a){P.b.sysAdminStatisticTraffic(e,t,a).then((function(e){var t=[],a=[],r=[],i=[],s=[],o=[],c=[],l=[],d=[],u=e.data;if(Array.isArray(u)){u.forEach((function(e){t.push(L()(e.datetime).format("YYYY-MM-DD")),i.push(e["link-file-upload"]),s.push(e["link-file-download"]),o.push(e["sync-file-upload"]),c.push(e["sync-file-download"]),l.push(e["web-file-upload"]),d.push(e["web-file-download"]),a.push(e["link-file-upload"]+e["sync-file-upload"]+e["web-file-upload"]),r.push(e["link-file-download"]+e["sync-file-download"]+e["web-file-download"])}));var h=[{label:Object(j.pb)("Upload"),data:i,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:Object(j.pb)("Download"),data:s,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],p=[{label:Object(j.pb)("Upload"),data:o,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:Object(j.pb)("Download"),data:c,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],b=[{label:Object(j.pb)("Upload"),data:l,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:Object(j.pb)("Download"),data:d,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],g=[{label:Object(j.pb)("Upload"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:Object(j.pb)("Download"),data:r,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}];n.setState({linkData:h,syncData:p,webData:b,filesData:g,labels:t,isLoading:!1})}})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.renderCommonTool=function(){var e=n.state.tabActive;return"system"===e?Object(O.jsx)(Q,{getActiviesFiles:n.getActiviesFiles,children:Object(O.jsxs)("div",{className:"statistic-traffic-tab",children:[Object(O.jsx)("div",{className:"statistic-traffic-tab-item ".concat("system"===e?"active":""),onClick:n.changeTabActive.bind(Object(ae.a)(n),"system"),children:Object(j.pb)("System")}),Object(O.jsx)("div",{className:"statistic-traffic-tab-item ".concat("user"===e?"active":""),onClick:n.changeTabActive.bind(Object(ae.a)(n),"user"),children:Object(j.pb)("Users")}),Object(O.jsx)("div",{className:"statistic-traffic-tab-item ".concat("organizations"===e?"active":""),onClick:n.changeTabActive.bind(Object(ae.a)(n),"organizations"),children:Object(j.pb)("Organizations")})]})}):Object(O.jsxs)("div",{className:"statistic-traffic-tab",children:[Object(O.jsx)("div",{className:"statistic-traffic-tab-item ".concat("system"===e?"active":""),onClick:n.changeTabActive.bind(Object(ae.a)(n),"system"),children:Object(j.pb)("System")}),Object(O.jsx)("div",{className:"statistic-traffic-tab-item ".concat("user"===e?"active":""),onClick:n.changeTabActive.bind(Object(ae.a)(n),"user"),children:Object(j.pb)("Users")}),Object(O.jsx)("div",{className:"statistic-traffic-tab-item ".concat("organizations"===e?"active":""),onClick:n.changeTabActive.bind(Object(ae.a)(n),"organizations"),children:Object(j.pb)("Organizations")})]})},n.state={filesData:[],linkData:[],syncData:[],webData:[],labels:[],isLoading:!0,tabActive:"system"},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.labels,a=e.filesData,r=e.linkData,i=e.syncData,s=e.webData,o=e.isLoading,l=e.tabActive;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(T,{currentItem:"trafficStatistic"}),Object(O.jsxs)("div",{className:"cur-view-content",children:[this.renderCommonTool(),o&&Object(O.jsx)(I.a,{}),!o&&"system"===l&&Object(O.jsxs)("div",{className:"statistic-traffic-chart-container",children:[Object(O.jsx)("div",{className:"mb-4",children:t.length>0&&Object(O.jsx)(X,{labels:t,filesData:a,chartTitle:Object(j.pb)("Total Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),Object(O.jsx)("div",{className:"mb-4",children:t.length>0&&Object(O.jsx)(X,{labels:t,filesData:s,chartTitle:Object(j.pb)("Web Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),Object(O.jsx)("div",{className:"mb-4",children:t.length>0&&Object(O.jsx)(X,{labels:t,filesData:r,chartTitle:Object(j.pb)("Share Link Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),Object(O.jsx)("div",{className:"mb-4",children:t.length>0&&Object(O.jsx)(X,{labels:t,filesData:i,chartTitle:Object(j.pb)("Sync Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})})]}),!o&&"user"===l&&Object(O.jsx)(he,{}),!o&&"organizations"===l&&Object(O.jsx)(de,{})]})]})]})}}]),a}(l.a.Component),be=pe,ge=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getActiviesFiles=function(e,t,a){var r=n.state.filesData;P.b.sysAdminStatisticActiveUsers(e,t,a).then((function(e){var t=[],a=[],i=e.data;if(Array.isArray(i)){i.forEach((function(e){t.push(L()(e.datetime).format("YYYY-MM-DD")),a.push(e.count)}));var s={label:Object(j.pb)("Active Users"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"};r=[s]}n.setState({filesData:r,labels:t,isLoading:!1})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={filesData:[],labels:[],isLoading:!0},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.labels,a=e.filesData,r=e.isLoading;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(T,{currentItem:"usersStatistic"}),Object(O.jsxs)("div",{className:"cur-view-content",children:[Object(O.jsx)(Q,{getActiviesFiles:this.getActiviesFiles}),r&&Object(O.jsx)(I.a,{}),!r&&t.length>0&&Object(O.jsx)(X,{labels:t,filesData:a,suggestedMaxNumbers:10,isLegendStatus:!1,chartTitle:Object(j.pb)("Active Users")})]})]})]})}}]),a}(l.a.Component),je=ge,me=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target.value;n.setState({month:t})},n.onGenerateReports=function(e){var t=j.qc+"api/v2.1/admin/statistics/",a=n.state.month;if(a){if("month"===e){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(a)){var r=Object(j.pb)("Invalid month, should be yyyymm.");return void n.setState({errorMessage:r})}}switch(e){case"month":t+="system-user-traffic/excel/?month="+a;break;case"storage":t+="system-user-storage/excel/?"}n.setState({errorMessage:""}),window.location.href=t}else{var i=Object(j.pb)("It is required.");n.setState({errorMessage:i})}},n.state={month:L()().format("YYYYMM"),errorMessage:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.errorMessage;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(T,{currentItem:"reportsStatistic"}),Object(O.jsxs)("div",{className:"cur-view-content",children:[Object(O.jsxs)("div",{className:"statistic-reports",children:[Object(O.jsx)("div",{className:"statistic-reports-title",children:Object(j.pb)("Monthly User Traffic")}),Object(O.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[Object(O.jsx)("span",{className:"statistic-reports-tip",children:Object(j.pb)("Month:")}),Object(O.jsx)(ne.a,{className:"statistic-reports-input",defaultValue:L()().format("YYYYMM"),onChange:this.handleChange}),Object(O.jsx)(D.a,{className:"statistic-reports-submit operation-item",onClick:this.onGenerateReports.bind(this,"month"),children:Object(j.pb)("Create Report")})]}),e&&Object(O.jsx)("div",{className:"error",children:e})]}),Object(O.jsxs)("div",{className:"statistic-reports",children:[Object(O.jsx)("div",{className:"statistic-reports-title",children:Object(j.pb)("User Storage")}),Object(O.jsx)(D.a,{className:"mt-4 operation-item",onClick:this.onGenerateReports.bind(this,"storage"),children:Object(j.pb)("Create Report")})]})]})]})]})}}]),a}(l.a.Component),fe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"desktop",urlPart:"desktop-devices",text:Object(j.pb)("Desktop")},{name:"mobile",urlPart:"mobile-devices",text:Object(j.pb)("Mobile")}],j.Ab&&n.navItems.push({name:"errors",urlPart:"device-errors",text:Object(j.pb)("Errors")}),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return Object(O.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(O.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,a){return Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},a)}))})})}}]),a}(l.a.Component),Oe=a(36),ve=a(381),xe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPageDevicesList=function(){n.props.getDevicesListByPage(n.props.pageInfo.current_page-1)},n.getNextPageDevicesList=function(){n.props.getDevicesListByPage(n.props.pageInfo.current_page+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.pageInfo,i=e.curPerPage;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var s=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No connected devices")})}),o=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"19%",children:Object(j.pb)("User")}),Object(O.jsxs)("th",{width:"19%",children:[Object(j.pb)("Platform")," / ",Object(j.pb)("Version")]}),Object(O.jsx)("th",{width:"19%",children:Object(j.pb)("Device Name")}),Object(O.jsx)("th",{width:"19%",children:Object(j.pb)("IP")}),Object(O.jsx)("th",{width:"19%",children:Object(j.pb)("Last Access")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(ye,{item:e},t)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPageDevicesList,gotoNextPage:this.getNextPageDevicesList,currentPage:r.current_page,hasNextPage:r.has_next_page,curPerPage:i,resetPerPage:this.props.resetPerPage})]});return n.length?o:s}}]),a}(c.Component),ye=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.handleUnlink=function(e){e.preventDefault(),n.props.item.is_desktop_client?n.toggleUnlinkDeviceDialog():n.unlinkDevice(!0)},n.toggleUnlinkDeviceDialog=function(){n.setState({isUnlinkDeviceDialogOpen:!n.state.isUnlinkDeviceDialogOpen})},n.unlinkDevice=function(e){var t=n.props.item,a=t.platform,r=t.device_id,i=t.user;P.b.sysAdminUnlinkDevice(a,r,i,e).then((function(e){n.setState({unlinked:!0});var t=Object(j.pb)("Successfully unlinked the device.");w.a.success(t)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={unlinked:!1,isOpIconShown:!1,isUnlinkDeviceDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.unlinked,n=t.isUnlinkDeviceDialogOpen,r=t.isOpIconShown;return a?null:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[Object(O.jsx)("td",{children:e.user_name}),Object(O.jsxs)("td",{children:[e.platform," / ",e.client_version]}),Object(O.jsx)("td",{children:e.device_name}),Object(O.jsx)("td",{children:e.last_login_ip}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{title:L()(e.last_accessed).format("llll"),children:L()(e.last_accessed).fromNow()})}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"#",className:"sf2-icon-delete action-icon ".concat(r?"":"invisible"),title:Object(j.pb)("Unlink"),onClick:this.handleUnlink})})]}),n&&Object(O.jsx)(ve.a,{unlinkDevice:this.unlinkDevice,toggleDialog:this.toggleUnlinkDeviceDialog})]})}}]),a}(c.Component),Se=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getDevicesListByPage=function(e){var t=n.props.devicesPlatform,a=n.state.perPage;P.b.sysAdminListDevices(t,e,a).then((function(e){n.setState({devicesData:e.data.devices,pageInfo:e.data.page_info,loading:!1})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getDevicesListByPage(1)}))},n.state={loading:!0,errorMsg:"",devicesData:{},pageInfo:{},perPage:25},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getDevicesListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(xe,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesData,getDevicesListByPage:this.getDevicesListByPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,pageInfo:this.state.pageInfo})})}}]),a}(c.Component),De=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(fe,{currentItem:"desktop"}),Object(O.jsx)(Se,{devicesPlatform:"desktop"})]})})]})}}]),a}(c.Component),Pe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(fe,{currentItem:"mobile"}),Object(O.jsx)(Se,{devicesPlatform:"mobile"})]})})]})}}]),a}(c.Component),we=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/users/").concat(encodeURIComponent(this.props.email),"/"),children:this.props.name})}}]),a}(c.Component),Ie=we,ke=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPageDeviceErrorsList=function(){n.props.getDeviceErrorsListByPage(n.props.pageInfo.current_page-1)},n.getNextPageDeviceErrorsList=function(){n.props.getDeviceErrorsListByPage(n.props.pageInfo.current_page+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.pageInfo,i=e.curPerPage;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var s=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No sync errors")})}),o=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"16%",children:Object(j.pb)("User")}),Object(O.jsxs)("th",{width:"20%",children:[Object(j.pb)("Device")," / ",Object(j.pb)("Version")]}),Object(O.jsx)("th",{width:"16%",children:Object(j.pb)("IP")}),Object(O.jsx)("th",{width:"16%",children:Object(j.pb)("Library")}),Object(O.jsx)("th",{width:"16%",children:Object(j.pb)("Error")}),Object(O.jsx)("th",{width:"16%",children:Object(j.pb)("Time")})]})}),Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(Ce,{item:e},t)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPageDeviceErrorsList,gotoNextPage:this.getNextPageDeviceErrorsList,currentPage:r.current_page,hasNextPage:r.has_next_page,curPerPage:i,resetPerPage:this.props.resetPerPage})]});return n.length?o:s}}]),a}(c.Component),Ce=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.state={isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item;return Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsxs)("td",{children:[e.device_name," / ",e.client_version]}),Object(O.jsx)("td",{children:e.device_ip}),Object(O.jsx)("td",{children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sysadmin/#libs/").concat(e.repo_id),children:e.repo_name})}),Object(O.jsx)("td",{children:e.error_msg}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{className:"item-meta-info",title:L()(e.last_accessed).format("llll"),children:L()(e.error_time).fromNow()})})]})}}]),a}(c.Component),Ne=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getDeviceErrorsListByPage=function(e){var t=n.state.perPage;P.b.sysAdminListDeviceErrors(e,t).then((function(e){n.setState({loading:!1,devicesErrors:e.data.device_errors,pageInfo:e.data.page_info,isCleanBtnShown:e.data.length>0})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.clean=function(){P.b.sysAdminClearDeviceErrors().then((function(e){n.setState({devicesErrors:[],isCleanBtnShown:!1});var t=Object(j.pb)("Successfully cleaned all errors.");w.a.success(t)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getDeviceErrorsListByPage(1)}))},n.state={loading:!0,errorMsg:"",devicesErrors:[],isCleanBtnShown:!1,pageInfo:{},perPage:25},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getDeviceErrorsListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[this.state.isCleanBtnShown?Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"operation-item",onClick:this.clean,children:Object(j.pb)("Clean")})})):Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(fe,{currentItem:"errors"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(ke,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesErrors,getDeviceErrorsListByPage:this.getDeviceErrorsListByPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,pageInfo:this.state.pageInfo})})]})})]})}}]),a}(c.Component),Me=a(108),_e=a(109),Ae=a(1051),Le=a(1052),Te=a(1826),Fe=a(1827),Re=a(941),Ue=a(147),Ee=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggle=function(){n.props.toggle()},n.handleQuotaChange=function(e){var t=e.target.value;n.setState({quota:t,isSubmitBtnActive:""!=t.trim()})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateQuota(n.state.quota.trim()),n.toggle()},n.state={quota:"",isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.quota,a=e.isSubmitBtnActive;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("Set Quota")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ae.a,{children:Object(O.jsxs)(Le.a,{children:[Object(O.jsxs)(Te.a,{children:[Object(O.jsx)(ne.a,{type:"text",className:"form-control",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleQuotaChange}),Object(O.jsx)(Fe.a,{addonType:"append",children:Object(O.jsx)(Re.a,{children:"MB"})})]}),Object(O.jsxs)("p",{className:"small text-secondary mt-2 mb-2",children:[Object(j.pb)("An integer that is greater than or equal to 0."),Object(O.jsx)("br",{}),Object(j.pb)("Tip: 0 means default limit")]})]})})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!a,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Be=a(1053),ze=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggle=function(){n.props.toggle()},n.openFileInput=function(){n.fileInputRef.current.click()},n.uploadFile=function(e){if(n.fileInputRef.current.files.length){var t=n.fileInputRef.current.files[0].name;if("xlsx"==t.substr(t.lastIndexOf(".")+1)){var a=n.fileInputRef.current.files[0];n.props.importUserInBatch(a),n.toggle()}else n.setState({errorMsg:Object(j.pb)("Please choose a .xlsx file.")})}},n.state={errorMsg:""},n.fileInputRef=l.a.createRef(),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.errorMsg;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("Import users from a .xlsx file")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsx)("p",{children:Object(O.jsx)("a",{className:"text-secondary small",href:"".concat(j.qc,"useradmin/batchadduser/example/"),children:Object(j.pb)("Download an example file")})}),Object(O.jsx)("button",{className:"btn btn-outline-primary",onClick:this.openFileInput,children:Object(j.pb)("Upload file")}),Object(O.jsx)("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInputRef}),e&&Object(O.jsx)(Be.a,{color:"danger",children:e})]}),Object(O.jsx)(Ue.a,{children:Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")})})]})}}]),a}(l.a.Component),Ve=a(1050),qe=a(113),We=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).translateRoles=function(e){switch(e){case"default":return Object(j.pb)("Default");case"guest":return Object(j.pb)("Guest");default:return e}},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)(qe.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.roleOptions,currentOption:this.props.currentRole,onOptionChanged:this.props.onRoleChanged,translateOption:this.translateRoles})}}]),a}(l.a.Component),He=We,Ye=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).checkSubmitBtnActive=function(){var e=n.state,t=e.email,a=e.password,r=e.passwordAgain,i=!0;i=!!(t.trim()&&a.trim()&&r.trim()),n.setState({isSubmitBtnActive:i})},n.toggle=function(){n.props.toggleDialog()},n.togglePasswordVisible=function(){n.setState({isPasswordVisible:!n.state.isPasswordVisible})},n.inputPassword=function(e){var t=e.target.value;n.setState({password:t,errorMsg:""},n.checkSubmitBtnActive)},n.inputPasswordAgain=function(e){var t=e.target.value;n.setState({passwordAgain:t,errorMsg:""},n.checkSubmitBtnActive)},n.generatePassword=function(){var e=m.a.generatePassword(8);n.setState({password:e,passwordAgain:e},n.checkSubmitBtnActive)},n.inputEmail=function(e){var t=e.target.value;n.setState({email:t},n.checkSubmitBtnActive)},n.inputName=function(e){var t=e.target.value;n.setState({name:t})},n.updateRole=function(e){n.setState({role:e})},n.handleSubmit=function(){var e=n.state,t=e.email,a=e.password,r=e.passwordAgain,i=e.name,s=e.role;if(a==r){var o={email:t.trim(),name:i.trim(),password:a.trim()};n.props.showRole&&(o.role=s),n.props.addUser(o),n.toggle()}else n.setState({errorMsg:Object(j.pb)("Passwords do not match.")})},n.state={errorMsg:"",isPasswordVisible:!1,password:"",passwordAgain:"",email:"",name:"",role:"default",isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.dialogTitle,a=e.showRole,n=this.state,r=n.errorMsg,i=n.isPasswordVisible,s=n.email,o=n.name,c=n.role,l=n.password,d=n.passwordAgain,u=n.isSubmitBtnActive;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:t||Object(j.pb)("Add Member")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsxs)(Ae.a,{autoComplete:"off",children:[Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Email")}),Object(O.jsx)(ne.a,{value:s,onChange:this.inputEmail})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Name(optional)")}),Object(O.jsx)(ne.a,{type:"text",value:o,onChange:this.inputName})]}),a&&Object(O.jsxs)(Le.a,{children:[Object(O.jsxs)(Ve.a,{children:[Object(j.pb)("Role"),Object(O.jsx)("span",{className:"small text-secondary ml-1 fas fa-question-circle",title:Object(j.pb)("You can also add a user as a guest, who will not be allowed to create libraries and groups.")})]}),Object(O.jsx)(He,{isTextMode:!1,isEditIconShow:!1,currentRole:c,roleOptions:this.props.availableRoles,onRoleChanged:this.updateRole})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Password")}),Object(O.jsxs)(Te.a,{children:[Object(O.jsx)(ne.a,{autoComplete:"new-password",type:i?"text":"password",value:l||"",onChange:this.inputPassword}),Object(O.jsxs)(Fe.a,{addonType:"append",children:[Object(O.jsx)(D.a,{className:"mt-0",onClick:this.togglePasswordVisible,children:Object(O.jsx)("i",{className:"link-operation-icon fas ".concat(this.state.isPasswordVisible?"fa-eye":"fa-eye-slash")})}),Object(O.jsx)(D.a,{className:"mt-0",onClick:this.generatePassword,children:Object(O.jsx)("i",{className:"link-operation-icon fas fa-magic"})})]})]})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Password again")}),Object(O.jsx)(ne.a,{type:i?"text":"password",value:d||"",onChange:this.inputPasswordAgain})]})]}),r&&Object(O.jsx)(Be.a,{color:"danger",children:r})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!u,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Ge=a(75),Qe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggle=function(){n.props.toggle()},n.handleSelectChange=function(e){n.setState({options:e,isSubmitBtnActive:e.length>0})},n.handleSubmit=function(){n.props.addAdminInBatch(n.state.options.map((function(e){return e.email}))),n.toggle()},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.state={options:null,isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("Add Admin")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ge.a,{isMulti:!0,className:"reviewer-select",placeholder:Object(j.pb)("Search users..."),onSelectChange:this.handleSelectChange})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Ke=a(57),Ze=function e(t){Object(r.a)(this,e),this.email=t.email,this.name=t.name,this.contact_email=t.contact_email,this.login_id=t.login_id,this.last_login=t.last_login,this.last_access_time=t.last_access_time,this.create_time=t.create_time,this.is_active=t.is_active,this.is_staff=t.is_staff,this.reference_id=t.reference_id,this.department=t.department,this.quota_total=t.quota_total,this.quota_usage=t.quota_usage,this.role=t.role,this.institution=t.institution,t.org_id&&(this.org_id=t.org_id),t.org_name&&(this.org_name=t.org_name),this.isSelected=!1},Xe=function e(t){Object(r.a)(this,e),this.email=t.email,this.name=t.name,this.contact_email=t.contact_email,this.login_id=t.login_id,this.last_login=t.last_login,this.last_access_time=t.last_access_time,this.create_time=t.create_time,this.is_active=t.is_active,this.is_staff=t.is_staff,this.quota_total=t.quota_total,this.quota_usage=t.quota_usage,this.admin_role=t.admin_role,this.isSelected=!1},Je=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState({value:e.target.value})},n.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),n.handleSubmit())},n.handleSubmit=function(){var e=n.state.value.trim();if(!e)return!1;n.props.submit(e)},n.state={value:""},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"input-icon",children:[Object(O.jsx)("i",{className:"d-flex input-icon-addon fas fa-search"}),Object(O.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"17rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"})]})}}]),a}(l.a.Component),$e=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"database",urlPart:"users",text:Object(j.pb)("Database")}],j.sb&&n.navItems.push({name:"ldap",urlPart:"users/ldap",text:Object(j.pb)("LDAP")},{name:"ldap-imported",urlPart:"users/ldap-imported",text:Object(j.pb)("LDAP(imported)")}),j.wb&&n.navItems.push({name:"admin",urlPart:"users/admins",text:Object(j.pb)("Admin")}),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return Object(O.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(O.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,a){return Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},a)}))})})}}]),a}(l.a.Component),et=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).translateStatus=function(e){switch(e){case"active":return Object(j.pb)("Active");case"inactive":return Object(j.pb)("Inactive")}},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)(qe.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.statusOptions,currentOption:this.props.currentStatus,onOptionChanged:this.props.onStatusChanged,translateOption:this.translateStatus})}}]),a}(l.a.Component),tt=et,at=a(73),nt=window.sysadmin.pageOptions,rt=nt.availableRoles,it=nt.availableAdminRoles,st=nt.institutions,ot=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n.sortByQuotaUsage=function(e){e.preventDefault(),n.props.sortByQuotaUsage()},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isAdmin,n=t.loading,r=t.errorMsg,i=t.items,s=t.isAllUsersSelected,o=t.curPerPage,l=t.hasNextPage,d=t.currentPage,u=t.sortBy,h=t.sortOrder;if(n)return Object(O.jsx)(I.a,{});if(r)return Object(O.jsx)("p",{className:"error text-center mt-4",children:r});var p,b=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No users")})}),g=[];p=""==u?Object(O.jsx)("span",{className:"fas fa-sort"}):Object(O.jsx)("span",{className:"fas ".concat("asc"==h?"fa-caret-up":"fa-caret-down")});var m=Object(j.pb)("Space Used"),f=void 0!=u?Object(O.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage,children:[m," ",p]}):m,v=Object(O.jsxs)(c.Fragment,{children:[f," / ".concat(Object(j.pb)("Quota"))]}),x="".concat(Object(j.pb)("Name")," / ").concat(Object(j.pb)("Contact Email")),y="".concat(Object(j.pb)("Created At")," / ").concat(Object(j.pb)("Last Login")," / ").concat(Object(j.pb)("Last Access"));j.Ab?g.push({width:"20%",text:x},{width:"15%",text:Object(j.pb)("Status")},{width:"15%",text:Object(j.pb)("Role")}):g.push({width:"30%",text:x},{width:"20%",text:Object(j.pb)("Status")}),j.Ob&&!a?g.push({width:"14%",text:v},{width:"14%",text:Object(j.pb)("Institution")},{width:"14%",text:y},{width:"5%",text:""}):g.push({width:"20%",text:v},{width:"22%",text:y},{width:"5%",text:""});var S=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"3%",className:"pl-2",children:Object(O.jsx)("input",{type:"checkbox",className:"vam",onChange:this.props.toggleSelectAllUsers,checked:s})}),g.map((function(e,t){return Object(O.jsx)("th",{width:e.width,children:e.text},t)}))]})}),Object(O.jsx)("tbody",{children:i.map((function(t,a){return Object(O.jsx)(ct,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,updateUser:e.props.updateUser,deleteUser:e.props.deleteUser,updateAdminRole:e.props.updateAdminRole,revokeAdmin:e.props.revokeAdmin,onUserSelected:e.props.onUserSelected,isAdmin:e.props.isAdmin,isLDAPImported:e.props.isLDAPImported},a)}))})]}),!this.props.isAdmin&&!this.props.isSearchResult&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:d,hasNextPage:l,curPerPage:o,resetPerPage:this.props.resetPerPage})]});return i.length?S:b}}]),a}(c.Component),ct=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.toggleDeleteUserDialog=function(){n.setState({isDeleteUserDialogOpen:!n.state.isDeleteUserDialogOpen})},n.toggleResetUserPasswordDialog=function(){n.setState({isResetUserPasswordDialogOpen:!n.state.isResetUserPasswordDialogOpen})},n.toggleRevokeAdminDialog=function(){n.setState({isRevokeAdminDialogOpen:!n.state.isRevokeAdminDialogOpen})},n.onUserSelected=function(){n.props.onUserSelected(n.props.item)},n.updateStatus=function(e){var t="active"==e;t&&w.a.notify(Object(j.pb)("It may take some time, please wait.")),n.props.updateUser(n.props.item.email,"is_active",t)},n.updateRole=function(e){n.props.updateUser(n.props.item.email,"role",e)},n.updateAdminRole=function(e){n.props.updateAdminRole(n.props.item.email,e)},n.translateAdminRole=function(e){switch(e){case"default_admin":return Object(j.pb)("Default Admin");case"system_admin":return Object(j.pb)("System Admin");case"daily_admin":return Object(j.pb)("Daily Admin");case"audit_admin":return Object(j.pb)("Audit Admin");default:return e}},n.updateInstitution=function(e){n.props.updateUser(n.props.item.email,"institution",e)},n.translateInstitution=function(e){return e},n.updateQuota=function(e){n.props.updateUser(n.props.item.email,"quota_total",e)},n.deleteUser=function(){w.a.notify(Object(j.pb)("It may take some time, please wait.")),n.props.deleteUser(n.props.item.email)},n.resetPassword=function(){w.a.notify(Object(j.pb)("It may take some time, please wait.")),P.b.sysAdminResetUserPassword(n.props.item.email).then((function(e){w.a.success(e.data.reset_tip)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.revokeAdmin=function(){var e=n.props.item;n.props.revokeAdmin(e.email,e.name)},n.getMenuOperations=function(){var e=n.props,t=e.isAdmin,a=e.isLDAPImported,r=e.isSearchResult,i=e.item,s=["Delete"];return(!a||r&&"db"==i.source)&&s.push("Reset Password"),t&&(s=["Revoke Admin"]),s},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(j.pb)("Delete");break;case"Reset Password":t=Object(j.pb)("Reset Password");break;case"Revoke Admin":t=Object(j.pb)("Revoke Admin")}return t},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteUserDialog();break;case"Reset Password":n.toggleResetUserPasswordDialog();break;case"Revoke Admin":n.toggleRevokeAdminDialog()}},n.state={isOpIconShown:!1,highlight:!1,isSetQuotaDialogOpen:!1,isDeleteUserDialogOpen:!1,isResetUserPasswordDialogOpen:!1,isRevokeAdminDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.isAdmin,n=this.state,r=n.isOpIconShown,i=n.isSetQuotaDialogOpen,s=n.isDeleteUserDialogOpen,o=n.isResetUserPasswordDialogOpen,l=n.isRevokeAdminDialogOpen,d='<span class="op-target">'+m.a.HTMLescape(t.name)+"</span>",u=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",d),h=Object(j.pb)("Are you sure you want to reset the password of {placeholder} ?").replace("{placeholder}",d),p=Object(j.pb)("Are you sure you want to revoke the admin permission of {placeholder} ?").replace("{placeholder}",d);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{className:"pl-2",children:Object(O.jsx)("input",{type:"checkbox",className:"vam",onChange:this.onUserSelected,checked:t.isSelected})}),Object(O.jsxs)("td",{children:[Object(O.jsx)(Ie,{email:t.email,name:t.name}),t.contact_email&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("br",{}),t.contact_email]}),t.org_id&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("br",{}),Object(O.jsxs)(g.a,{to:"".concat(j.qc,"sys/organizations/").concat(t.org_id,"/info/"),children:["(",t.org_name,")"]})]})]}),Object(O.jsx)("td",{children:Object(O.jsx)(tt,{isTextMode:!0,isEditIconShow:r,currentStatus:t.is_active?"active":"inactive",statusOptions:["active","inactive"],onStatusChanged:this.updateStatus})}),j.Ab&&Object(O.jsx)("td",{children:a?Object(O.jsx)(qe.a,{isTextMode:!0,isEditIconShow:r,options:it,currentOption:t.admin_role,onOptionChanged:this.updateAdminRole,translateOption:this.translateAdminRole}):Object(O.jsx)(He,{isTextMode:!0,isEditIconShow:r,currentRole:t.role,roleOptions:rt,onRoleChanged:this.updateRole})}),Object(O.jsxs)("td",{children:["".concat(m.a.bytesToSize(t.quota_usage)," / ").concat(t.quota_total>0?m.a.bytesToSize(t.quota_total):"--"),Object(O.jsx)("span",{title:Object(j.pb)("Edit"),className:"fa fa-pencil-alt attr-action-icon ".concat(r?"":"invisible"),onClick:this.toggleSetQuotaDialog})]}),j.Ob&&!a&&Object(O.jsx)("td",{children:Object(O.jsx)(qe.a,{isTextMode:!0,isEditIconShow:r&&st.length>0,options:st,currentOption:t.institution,onOptionChanged:this.updateInstitution,translateOption:this.translateInstitution})}),Object(O.jsxs)("td",{children:["".concat(t.create_time?L()(t.create_time).format("YYYY-MM-DD HH:mm"):"--"," /"),Object(O.jsx)("br",{}),"".concat(t.last_login?L()(t.last_login).fromNow():"--"),Object(O.jsx)("br",{}),"".concat(t.last_access_time?L()(t.last_access_time).fromNow():"--")]}),Object(O.jsx)("td",{children:t.email!=j.Cc&&r&&Object(O.jsx)(at.a,{operations:this.getMenuOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),i&&Object(O.jsx)(Ee,{toggle:this.toggleSetQuotaDialog,updateQuota:this.updateQuota}),s&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete User"),message:u,executeOperation:this.deleteUser,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteUserDialog}),o&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Reset Password"),message:h,executeOperation:this.resetPassword,confirmBtnText:Object(j.pb)("Reset"),toggleDialog:this.toggleResetUserPasswordDialog}),l&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Revoke Admin"),message:p,executeOperation:this.revokeAdmin,confirmBtnText:Object(j.pb)("Revoke"),toggleDialog:this.toggleRevokeAdminDialog})]})}}]),a}(c.Component),lt=ot,dt=window.sysadmin.pageOptions.availableRoles,ut=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleImportUserDialog=function(){n.setState({isImportUserDialogOpen:!n.state.isImportUserDialogOpen})},n.toggleAddUserDialog=function(){n.setState({isAddUserDialogOpen:!n.state.isAddUserDialogOpen})},n.toggleBatchSetQuotaDialog=function(){n.setState({isBatchSetQuotaDialogOpen:!n.state.isBatchSetQuotaDialogOpen})},n.toggleBatchDeleteUserDialog=function(){n.setState({isBatchDeleteUserDialogOpen:!n.state.isBatchDeleteUserDialogOpen})},n.onUserSelected=function(e){var t=!1,a=[],r=n.state.userList.map((function(n){return n.email===e.email&&(n.isSelected=!n.isSelected),1==n.isSelected?(t=!0,a.push(n)):a=a.filter((function(e){return e.email!=n.email})),n}));n.setState({userList:r,hasUserSelected:t,selectedUserList:a})},n.toggleSelectAllUsers=function(){if(n.state.isAllUsersSelected){var e=n.state.userList.map((function(e){return e.isSelected=!1,e}));n.setState({userList:e,hasUserSelected:!1,isAllUsersSelected:!1,selectedUserList:[]})}else{var t=n.state.userList.map((function(e){return e.isSelected=!0,e}));n.setState({userList:t,hasUserSelected:!0,isAllUsersSelected:!0,selectedUserList:t})}},n.getUserList=function(){P.b.sysAdminListAdmins().then((function(e){var t=e.data.admin_user_list.map((function(e){return new Xe(e)}));n.setState({userList:t,loading:!1})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.getUsersListByPage=function(e){var t=n.state,a=t.perPage,r=t.sortBy,i=t.sortOrder,s=n.props.isLDAPImported;P.b.sysAdminListUsers(e,a,s,r,i).then((function(t){var r=t.data.data.map((function(e){return new Ze(e)}));n.setState({userList:r,loading:!1,hasNextPage:m.a.hasNextPage(e,a,t.data.total_count),currentPage:e})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.sortByQuotaUsage=function(){n.setState({sortBy:"quota_usage",sortOrder:"asc"==n.state.sortOrder?"desc":"asc",currentPage:1},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=n.state,r=a.currentPage,i=a.sortBy,s=a.sortOrder;t.set("page",r),t.set("order_by",i),t.set("direction",s),e.search=t.toString(),Object(g.c)(e.toString()),n.getUsersListByPage(r)}))},n.deleteUser=function(e){P.b.sysAdminDeleteUser(e).then((function(t){var a=n.state.userList.filter((function(t){return t.email!=e}));n.setState({userList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.setUserQuotaInBatch=function(e){var t=n.state.selectedUserList.map((function(e){return e.email}));P.b.sysAdminSetUserQuotaInBatch(t,e).then((function(e){var t=n.state.userList.map((function(t){return e.data.success.map((function(e){t.email==e.email&&(t.quota_total=e.quota_total)})),t}));n.setState({userList:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteUserInBatch=function(){var e=n.state.selectedUserList.map((function(e){return e.email}));P.b.sysAdminDeleteUserInBatch(e).then((function(t){if(t.data.success.length){var a=n.state.userList.filter((function(e){return!t.data.success.some((function(t){return t.email==e.email}))}));n.setState({userList:a,hasUserSelected:e.length!=t.data.success.length});var r=t.data.success.length,i=1==r?Object(j.pb)("Successfully deleted 1 user."):Object(j.pb)("Successfully deleted {user_number_placeholder} users.").replace("{user_number_placeholder}",r);w.a.success(i)}t.data.failed.map((function(e){var t="".concat(e.email,": ").concat(e.error_msg);w.a.danger(t)}))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.importUserInBatch=function(e){w.a.notify(Object(j.pb)("It may take some time, please wait.")),P.b.sysAdminImportUserViaFile(e).then((function(e){if(e.data.success.length){var t=e.data.success.map((function(e){return void 0==e.institution&&(e.institution=""),new Ze(e)}));n.setState({userList:t.concat(n.state.userList)})}e.data.failed.map((function(e){var t="".concat(e.email,": ").concat(e.error_msg);w.a.danger(t)}))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.addUser=function(e){w.a.notify(Object(j.pb)("It may take some time, please wait."));var t=e.email,a=e.name,r=e.role,i=e.password;P.b.sysAdminAddUser(t,a,r,i).then((function(e){var t=n.state.userList;t.unshift(e.data),n.setState({userList:t}),w.a.success(e.data.add_user_tip)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getUsersListByPage(1)}))},n.updateUser=function(e,t,a){P.b.sysAdminUpdateUser(e,t,a).then((function(r){var i=n.state.userList.map((function(a){return a.email==e&&(a[t]=r.data[t]),a}));n.setState({userList:i});var s="is_active"==t&&a?r.data.update_status_tip:Object(j.pb)("Edit succeeded");w.a.success(s)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateAdminRole=function(e,t){P.b.sysAdminUpdateAdminRole(e,t).then((function(t){var a=n.state.userList.map((function(a){return a.email==e&&(a.admin_role=t.data.role),a}));n.setState({userList:a}),w.a.success(Object(j.pb)("Edit succeeded"))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.revokeAdmin=function(e,t){P.b.sysAdminUpdateUser(e,"is_staff",!1).then((function(a){var r=n.state.userList.filter((function(t){return t.email!=e}));n.setState({userList:r}),w.a.success(Object(j.pb)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",t))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.getOperationsForAll=function(){var e=n.props,t=e.isAdmin,a=e.isLDAPImported;return t?Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:n.toggleBatchAddAdminDialog,children:Object(j.pb)("Add Admin")}):a?Object(O.jsx)("a",{className:"btn btn-secondary operation-item",href:"".concat(j.qc,"sys/useradmin/export-excel/"),children:Object(j.pb)("Export Excel")}):Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:n.toggleImportUserDialog,children:Object(j.pb)("Import Users")}),Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:n.toggleAddUserDialog,children:Object(j.pb)("Add User")}),Object(O.jsx)("a",{className:"btn btn-secondary operation-item",href:"".concat(j.qc,"sys/useradmin/export-excel/"),children:Object(j.pb)("Export Excel")})]})},n.getCurrentNavItem=function(){var e=n.props,t=e.isAdmin,a=e.isLDAPImported,r="database";return t?r="admin":a&&(r="ldap-imported"),r},n.toggleBatchAddAdminDialog=function(){n.setState({isBatchAddAdminDialogOpen:!n.state.isBatchAddAdminDialogOpen})},n.addAdminInBatch=function(e){P.b.sysAdminAddAdminInBatch(e).then((function(e){var t=e.data.success.map((function(e){return new Xe(e)}));n.setState({userList:t.concat(n.state.userList)}),e.data.failed.map((function(e){var t="".concat(e.email,": ").concat(e.error_msg);w.a.danger(t)}))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.getSearch=function(){return n.props.isAdmin?null:Object(O.jsx)(Je,{placeholder:Object(j.pb)("Search users"),submit:n.searchItems})},n.searchItems=function(e){Object(g.c)("".concat(j.qc,"sys/search-users/?query=").concat(encodeURIComponent(e)))},n.state={loading:!0,errorMsg:"",userList:[],hasNextPage:!1,currentPage:1,perPage:25,hasUserSelected:!1,selectedUserList:[],isAllUsersSelected:!1,isImportUserDialogOpen:!1,isAddUserDialogOpen:!1,isBatchSetQuotaDialogOpen:!1,isBatchDeleteUserDialogOpen:!1,isBatchAddAdminDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.isAdmin)this.getUserList();else{var t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage,i=a.sortBy,s=void 0===i?"":i,o=a.sortOrder,c=void 0===o?"asc":o;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n),sortBy:t.get("order_by")||s,sortOrder:t.get("direction")||c},(function(){e.getUsersListByPage(e.state.currentPage)}))}}},{key:"render",value:function(){var e=this.props,t=e.isAdmin,a=e.isLDAPImported,r=this.state,i=r.hasUserSelected,s=r.isImportUserDialogOpen,o=r.isAddUserDialogOpen,l=r.isBatchDeleteUserDialogOpen,d=r.isBatchSetQuotaDialogOpen,u=r.isBatchAddAdminDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({search:this.getSearch()},this.props),{},{children:i?Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchSetQuotaDialog,children:Object(j.pb)("Set Quota")}),Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchDeleteUserDialog,children:Object(j.pb)("Delete Users")})]}):this.getOperationsForAll()})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)($e,{currentItem:this.getCurrentNavItem()}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(lt,{isAdmin:t,isLDAPImported:a,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getUsersListByPage,updateUser:this.updateUser,deleteUser:this.deleteUser,updateAdminRole:this.updateAdminRole,revokeAdmin:this.revokeAdmin,onUserSelected:this.onUserSelected,isAllUsersSelected:this.isAllUsersSelected,toggleSelectAllUsers:this.toggleSelectAllUsers})})]})}),s&&Object(O.jsx)(ze,{toggle:this.toggleImportUserDialog,importUserInBatch:this.importUserInBatch}),o&&Object(O.jsx)(Ye,{dialogTitle:Object(j.pb)("Add User"),showRole:j.Ab,availableRoles:dt,addUser:this.addUser,toggleDialog:this.toggleAddUserDialog}),d&&Object(O.jsx)(Ee,{toggle:this.toggleBatchSetQuotaDialog,updateQuota:this.setUserQuotaInBatch}),l&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Users"),message:Object(j.pb)("Are you sure you want to delete the selected user(s) ?"),executeOperation:this.deleteUserInBatch,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleBatchDeleteUserDialog}),u&&Object(O.jsx)(Qe,{addAdminInBatch:this.addAdminInBatch,toggle:this.toggleBatchAddAdminDialog})]})}}]),a}(c.Component),ht=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)(ut,Object(n.a)({isAdmin:!0},this.props))}}]),a}(c.Component),pt=ht,bt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)(ut,Object(n.a)({isLDAPImported:!0},this.props))}}]),a}(c.Component),gt=bt,jt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.curPerPage,i=e.hasNextPage,s=e.currentPage;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center mt-4",children:a});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No users")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"40%",children:Object(j.pb)("Email")}),Object(O.jsxs)("th",{width:"30%",children:[Object(j.pb)("Space Used")," / ",Object(j.pb)("Quota")]}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Last Login")})]})}),Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(mt,{item:e},t)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:s,hasNextPage:i,curPerPage:r,resetPerPage:this.props.resetPerPage})]});return n.length?l:o}}]),a}(c.Component),mt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item;m.a.HTMLescape(e.email);return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.email})}),Object(O.jsx)("td",{children:"".concat(m.a.bytesToSize(e.quota_usage)," / ").concat(e.quota_total>0?m.a.bytesToSize(e.quota_total):"--")}),Object(O.jsx)("td",{children:e.last_login?L()(e.last_login).fromNow():"--"})]})})}}]),a}(c.Component),ft=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getUsersListByPage=function(e){var t=n.state.perPage;P.b.sysAdminListLDAPUsers(e,t).then((function(t){n.setState({loading:!1,userList:t.data.ldap_user_list,hasNextPage:t.data.has_next_page,currentPage:e})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getUsersListByPage(1)}))},n.state={loading:!0,errorMsg:"",userList:{},hasNextPage:!1,currentPage:1,perPage:25},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getUsersListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)($e,{currentItem:"ldap"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(jt,{resetPerPage:this.resetPerPage,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,getListByPage:this.getUsersListByPage})})]})})]})}}]),a}(c.Component),Ot=a(1833),vt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleBatchSetQuotaDialog=function(){n.setState({isBatchSetQuotaDialogOpen:!n.state.isBatchSetQuotaDialogOpen})},n.toggleBatchDeleteUserDialog=function(){n.setState({isBatchDeleteUserDialogOpen:!n.state.isBatchDeleteUserDialogOpen})},n.onUserSelected=function(e){var t=!1,a=[],r=n.state.userList.map((function(n){return n.email===e.email&&(n.isSelected=!n.isSelected),1==n.isSelected?(t=!0,a.push(n)):a=a.filter((function(e){return e.email!=n.email})),n}));n.setState({userList:r,hasUserSelected:t,selectedUserList:a})},n.toggleSelectAllUsers=function(){if(n.state.isAllUsersSelected){var e=n.state.userList.map((function(e){return e.isSelected=!1,e}));n.setState({userList:e,hasUserSelected:!1,isAllUsersSelected:!1,selectedUserList:[]})}else{var t=n.state.userList.map((function(e){return e.isSelected=!0,e}));n.setState({userList:t,hasUserSelected:!0,isAllUsersSelected:!0,selectedUserList:t})}},n.getItems=function(e){P.b.sysAdminSearchUsers(n.state.query.trim(),e,n.state.perPage).then((function(e){n.setState({userList:e.data.user_list,loading:!1,pageInfo:e.data.page_info})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getItems(1)}))},n.deleteUser=function(e){P.b.sysAdminDeleteUser(e).then((function(t){var a=n.state.userList.filter((function(t){return t.email!=e}));n.setState({userList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.setUserQuotaInBatch=function(e){var t=n.state.selectedUserList.map((function(e){return e.email}));P.b.sysAdminSetUserQuotaInBatch(t,e).then((function(e){var t=n.state.userList.map((function(t){return e.data.success.map((function(e){t.email==e.email&&(t.quota_total=e.quota_total)})),t}));n.setState({userList:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteUserInBatch=function(){var e=n.state.selectedUserList.map((function(e){return e.email}));P.b.sysAdminDeleteUserInBatch(e).then((function(t){if(t.data.success.length){var a=n.state.userList.filter((function(e){return!t.data.success.some((function(t){return t.email==e.email}))}));n.setState({userList:a,hasUserSelected:e.length!=t.data.success.length});var r=t.data.success.length,i=1==r?Object(j.pb)("Successfully deleted 1 user."):Object(j.pb)("Successfully deleted {user_number_placeholder} users.").replace("{user_number_placeholder}",r);w.a.success(i)}t.data.failed.map((function(e){var t="".concat(e.email,": ").concat(e.error_msg);w.a.danger(t)}))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateUser=function(e,t,a){P.b.sysAdminUpdateUser(e,t,a).then((function(r){var i=n.state.userList.map((function(a){return a.email==e&&(a[t]=r.data[t]),a}));n.setState({userList:i});var s="is_active"==t&&a?r.data.update_status_tip:Object(j.pb)("Edit succeeded");w.a.success(s)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateAdminRole=function(e,t){P.b.sysAdminUpdateAdminRole(e,t).then((function(t){var a=n.state.userList.map((function(a){return a.email==e&&(a.admin_role=t.data.role),a}));n.setState({userList:a}),w.a.success(Object(j.pb)("Edit succeeded"))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.revokeAdmin=function(e,t){P.b.sysAdminUpdateUser(e,"is_staff",!1).then((function(a){var r=n.state.userList.filter((function(t){return t.email!=e}));n.setState({userList:r}),w.a.success(Object(j.pb)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",t))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.handleInputChange=function(e){n.setState({query:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.query;n.setState({isSubmitBtnActive:e.trim()})},n.getPreviousPageList=function(){n.getItems(n.state.pageInfo.current_page-1)},n.getNextPageList=function(){n.getItems(n.state.pageInfo.current_page+1)},n.handleKeyDown=function(e){13===e.keyCode&&(n.state.isSubmitBtnActive&&n.getItems())},n.state={query:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",userList:[],pageInfo:{has_next_page:!1,current_page:1},currentPage:1,perPage:25,hasUserSelected:!1,selectedUserList:[],isAllUsersSelected:!1,isBatchSetQuotaDialogOpen:!1,isBatchDeleteUserDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({query:t.get("query")||"",currentPage:parseInt(t.get("page")||n),perPage:parseInt(t.get("per_page")||r)},(function(){e.getItems(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.isSubmitBtnActive,r=this.state,i=r.hasUserSelected,s=r.isBatchDeleteUserDialogOpen,o=r.isBatchSetQuotaDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[i?Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchSetQuotaDialog,children:Object(j.pb)("Set Quota")}),Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchDeleteUserDialog,children:Object(j.pb)("Delete Users")})]})})):Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Users")})}),Object(O.jsxs)("div",{className:"cur-view-content",children:[Object(O.jsxs)("div",{className:"mt-4 mb-6",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.pb)("Search Users")}),Object(O.jsxs)(Ae.a,{tag:"div",children:[Object(O.jsx)(Le.a,{row:!0,children:Object(O.jsx)(Ot.a,{sm:5,children:Object(O.jsx)(ne.a,{type:"text",name:"query",value:t,placeholder:Object(j.pb)("Search users"),onChange:this.handleInputChange,onKeyDown:this.handleKeyDown})})}),Object(O.jsx)(Le.a,{row:!0,children:Object(O.jsx)(Ot.a,{sm:{size:5},children:Object(O.jsx)("button",{className:"btn btn-outline-primary",disabled:!a,onClick:this.getItems,children:Object(j.pb)("Submit")})})})]})]}),Object(O.jsxs)("div",{className:"mt-4 mb-6",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.pb)("Result")}),Object(O.jsx)(lt,{isLDAPImported:!1,isAdmin:!1,isSearchResult:!0,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,updateUser:this.updateUser,deleteUser:this.deleteUser,updateAdminRole:this.updateAdminRole,revokeAdmin:this.revokeAdmin,onUserSelected:this.onUserSelected,isAllUsersSelected:this.isAllUsersSelected,toggleSelectAllUsers:this.toggleSelectAllUsers})]})]})]})}),o&&Object(O.jsx)(Ee,{toggle:this.toggleBatchSetQuotaDialog,updateQuota:this.setUserQuotaInBatch}),s&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Users"),message:Object(j.pb)("Are you sure you want to delete the selected user(s) ?"),executeOperation:this.deleteUserInBatch,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleBatchDeleteUserDialog}),this.state.pageInfo&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:this.state.pageInfo.current_page,hasNextPage:this.state.pageInfo.has_next_page,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage})]})}}]),a}(c.Component),xt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggle=function(){n.props.toggle()},n.handleRateLimitChange=function(e){var t=e.target.value;n.setState({rateLimit:t,isSubmitBtnActive:""!=t.trim()})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateUploadDownloadRateLimit(n.props.uploadOrDownload,n.state.rateLimit.trim()),n.toggle()},n.state={rateLimit:"",isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.rateLimit,a=e.isSubmitBtnActive;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:"upload"==this.props.uploadOrDownload?Object(j.pb)("Set Upload Rate Limit"):Object(j.pb)("Set Download Rate Limit")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ae.a,{children:Object(O.jsxs)(Le.a,{children:[Object(O.jsxs)(Te.a,{children:[Object(O.jsx)(ne.a,{type:"text",className:"form-control",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleRateLimitChange}),Object(O.jsx)(Fe.a,{addonType:"append",children:Object(O.jsx)(Re.a,{children:"kB/s"})})]}),Object(O.jsxs)("p",{className:"small text-secondary mt-2 mb-2",children:[Object(j.pb)("An integer that is greater than or equal to 0."),Object(O.jsx)("br",{}),Object(j.pb)("Tip: 0 means default limit")]})]})})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!a,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),yt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target.value;n.setState({value:t})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateValue(n.state.value.trim()),n.props.toggleDialog()},n.state={value:n.props.value,isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.dialogTitle,e.toggleDialog);return Object(O.jsxs)(b.a,{isOpen:!0,toggle:t,children:[Object(O.jsx)(Me.a,{toggle:t,children:this.props.dialogTitle}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ae.a,{children:Object(O.jsx)(Le.a,{children:Object(O.jsx)(ne.a,{type:"text",value:this.state.value,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})})})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:t,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),St=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"info",urlPart:"",text:Object(j.pb)("Info")},{name:"owned-repos",urlPart:"owned-libraries",text:Object(j.pb)("Owned Libraries")},{name:"shared-repos",urlPart:"shared-libraries",text:Object(j.pb)("Shared Libraries")},{name:"links",urlPart:"shared-links",text:Object(j.pb)("Shared Links")},{name:"groups",urlPart:"groups",text:Object(j.pb)("Groups")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentItem,a=e.email,n=e.userName;return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsxs)("h3",{className:"sf-heading",children:[Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/users/"),children:Object(j.pb)("Users")})," / ",n]})}),Object(O.jsx)("ul",{className:"nav border-bottom mx-4",children:this.navItems.map((function(e,n){return Object(O.jsx)("li",{className:"nav-item mr-2",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/users/").concat(encodeURIComponent(a),"/").concat(e.urlPart),className:"nav-link ".concat(t==e.name?" active":""),children:e.text})},n)}))})]})}}]),a}(l.a.Component),Dt=window.sysadmin.pageOptions.twoFactorAuthEnabled,Pt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.toggleSetUserUploadRateLimitDialog=function(){n.setState({isSetUserUploadRateLimitDialogOpen:!n.state.isSetUserUploadRateLimitDialogOpen})},n.toggleSetUserDownloadRateLimitDialog=function(){n.setState({isSetUserDownloadRateLimitDialogOpen:!n.state.isSetUserDownloadRateLimitDialogOpen})},n.updateQuota=function(e){n.props.updateUser("quota_total",e)},n.updateUploadDownloadRateLimit=function(e,t){"upload"==e&&n.props.updateUser("upload_rate_limit",t),"download"==e&&n.props.updateUser("download_rate_limit",t)},n.toggleDialog=function(e,t){n.setState({currentKey:e,dialogTitle:t,isUpdateUserDialogOpen:!n.state.isUpdateUserDialogOpen})},n.toggleSetNameDialog=function(){n.toggleDialog("name",Object(j.pb)("Set Name"))},n.toggleSetUserLoginIDDialog=function(){n.toggleDialog("login_id",Object(j.pb)("Set Login ID"))},n.toggleSetUserComtactEmailDialog=function(){n.toggleDialog("contact_email",Object(j.pb)("Set Contact Email"))},n.toggleSetUserReferenceIDDialog=function(){n.toggleDialog("reference_id",Object(j.pb)("Set Reference ID"))},n.updateValue=function(e){n.props.updateUser(n.state.currentKey,e)},n.toggleUpdateUserDialog=function(){n.toggleDialog("","")},n.showEditIcon=function(e){return Object(O.jsx)("span",{title:Object(j.pb)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},n.state={currentKey:"",dialogTitle:"",isSetQuotaDialogOpen:!1,isSetUserUploadRateLimitDialogOpen:!1,isSetUserDownloadRateLimitDialogOpen:!1,isUpdateUserDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg;e.userInfo;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center mt-4",children:a});var n=this.props.userInfo,r=this.state,i=r.currentKey,s=r.dialogTitle,o=r.isSetQuotaDialogOpen,l=r.isUpdateUserDialogOpen,d=r.isSetUserUploadRateLimitDialogOpen,u=r.isSetUserDownloadRateLimitDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("dl",{className:"m-0",children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Avatar")}),Object(O.jsx)("dd",{className:"info-item-content",children:Object(O.jsx)("img",{src:n.avatar_url,alt:n.name,width:"80",className:"rounded"})}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Email")}),Object(O.jsx)("dd",{className:"info-item-content",children:n.email}),n.org_name&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Organization")}),Object(O.jsx)("dd",{className:"info-item-content",children:n.org_name})]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Name")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[n.name||"--",this.showEditIcon(this.toggleSetNameDialog)]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Login ID")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[n.login_id||"--",this.showEditIcon(this.toggleSetUserLoginIDDialog)]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Contact Email")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[n.contact_email||"--",this.showEditIcon(this.toggleSetUserComtactEmailDialog)]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Reference ID")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[n.reference_id||"--",this.showEditIcon(this.toggleSetUserReferenceIDDialog)]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Space Used / Quota")}),Object(O.jsxs)("dd",{className:"info-item-content",children:["".concat(m.a.bytesToSize(n.quota_usage)," / ").concat(n.quota_total>0?m.a.bytesToSize(n.quota_total):"--"),this.showEditIcon(this.toggleSetQuotaDialog)]}),j.Ab&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Upload Rate Limit")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[n.upload_rate_limit>0?n.upload_rate_limit+" kB/s":"--",this.showEditIcon(this.toggleSetUserUploadRateLimitDialog)]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Download Rate Limit")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[n.download_rate_limit>0?n.download_rate_limit+" kB/s":"--",this.showEditIcon(this.toggleSetUserDownloadRateLimitDialog)]})]}),Dt&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Two-Factor Authentication")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[n.has_default_device?Object(O.jsxs)(Le.a,{children:[Object(O.jsx)("p",{className:"mb-1",children:Object(j.pb)("Status: enabled")}),Object(O.jsx)(D.a,{onClick:this.props.disable2FA,children:Object(j.pb)("Disable Two-Factor Authentication")})]}):Object(O.jsx)(Le.a,{children:Object(O.jsx)(D.a,{disabled:!0,children:Object(j.pb)("Disable Two-Factor Authentication")})}),Object(O.jsx)(Le.a,{check:!0,children:Object(O.jsxs)(Ve.a,{check:!0,children:[Object(O.jsx)(ne.a,{type:"checkbox",checked:n.is_force_2fa,onChange:this.props.toggleForce2fa}),Object(O.jsx)("span",{children:Object(j.pb)("Force Two-Factor Authentication")})]})})]})]})]}),o&&Object(O.jsx)(Ee,{updateQuota:this.updateQuota,toggle:this.toggleSetQuotaDialog}),j.Ab&&d&&Object(O.jsx)(xt,{uploadOrDownload:"upload",updateUploadDownloadRateLimit:this.updateUploadDownloadRateLimit,toggle:this.toggleSetUserUploadRateLimitDialog}),j.Ab&&u&&Object(O.jsx)(xt,{uploadOrDownload:"download",updateUploadDownloadRateLimit:this.updateUploadDownloadRateLimit,toggle:this.toggleSetUserDownloadRateLimitDialog}),l&&Object(O.jsx)(yt,{dialogTitle:s,value:n[i],updateValue:this.updateValue,toggleDialog:this.toggleUpdateUserDialog})]})}}]),a}(c.Component),wt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).updateUser=function(e,t){var a=n.state.userInfo.email;P.b.sysAdminUpdateUser(a,e,t).then((function(t){var a=n.state.userInfo;a[e]=t.data[e],n.setState({userInfo:a}),w.a.success(Object(j.pb)("Edit succeeded"))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.disable2FA=function(){var e=n.state.userInfo.email;P.b.sysAdminDeleteTwoFactorAuth(e).then((function(e){var t=n.state.userInfo;t.has_default_device=!1,n.setState({userInfo:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.toggleForce2fa=function(e){var t=n.state.userInfo.email,a=e.target.checked;P.b.sysAdminSetForceTwoFactorAuth(t,a).then((function(e){var t=n.state.userInfo;t.is_force_2fa=a,n.setState({userInfo:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",userInfo:{}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);P.b.sysAdminGetUser(t,160).then((function(t){e.setState({loading:!1,userInfo:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.userInfo;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(St,{currentItem:"info",email:this.props.email,userName:e.name}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Pt,{loading:this.state.loading,errorMsg:this.state.errorMsg,userInfo:this.state.userInfo,updateUser:this.updateUser,disable2FA:this.disable2FA,toggleForce2fa:this.toggleForce2fa})})]})})]})}}]),a}(c.Component),It=a(229),kt=window.sysadmin.pageOptions.enableSysAdminViewRepo,Ct=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No libraries")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Size")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Last Update")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Nt,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteRepo:e.props.deleteRepo,transferRepo:e.props.transferRepo},a)}))})]})});return r.length?s:i}}]),a}(c.Component),Nt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleDeleteDialog=function(){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteRepo=function(){n.props.deleteRepo(n.props.item.id)},n.toggleTransferDialog=function(){n.setState({isTransferDialogOpen:!n.state.isTransferDialogOpen})},n.transferRepo=function(e){n.props.transferRepo(n.props.item.id,e.email),n.toggleTransferDialog()},n.renderRepoName=function(){var e=n.props.item;return e.name?j.Ab&&kt&&!e.encrypted?Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/libraries/").concat(e.id,"/"),children:e.name}):e.name:Object(j.pb)("Broken ({repo_id_placeholder})").replace("{repo_id_placeholder}",e.id)},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(j.pb)("Delete");break;case"Transfer":t=Object(j.pb)("Transfer")}return t},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteDialog();break;case"Transfer":n.toggleTransferDialog()}},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=t.isTransferDialogOpen,i=m.a.getLibIconUrl(e),s=m.a.getLibIconTitle(e),o='<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>",l=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",o);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:i,title:s,alt:s,width:"24"})}),Object(O.jsx)("td",{children:this.renderRepoName()}),Object(O.jsx)("td",{children:m.a.bytesToSize(e.size)}),Object(O.jsx)("td",{children:L()(e.last_modified).fromNow()}),Object(O.jsx)("td",{children:a&&Object(O.jsx)(at.a,{operations:["Delete","Transfer"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Library"),message:l,executeOperation:this.deleteRepo,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&Object(O.jsx)(It.a,{itemName:e.name,submit:this.transferRepo,canTransferToDept:!1,toggleDialog:this.toggleTransferDialog})]})}}]),a}(c.Component),Mt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).deleteRepo=function(e){P.b.sysAdminDeleteRepo(e).then((function(t){var a=n.state.repoList.filter((function(t){return t.id!=e}));n.setState({repoList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.transferRepo=function(e,t){P.b.sysAdminTransferRepo(e,t).then((function(t){var a=n.state.repoList.filter((function(t){return t.id!=e}));n.setState({repoList:a});var r=Object(j.pb)("Successfully transferred the library.");w.a.success(r)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",userInfo:{},repoList:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);P.b.sysAdminGetUser(t).then((function(t){e.setState({userInfo:t.data})})),P.b.sysAdminListReposByOwner(t).then((function(t){e.setState({loading:!1,repoList:t.data.repos})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(St,{currentItem:"owned-repos",email:this.props.email,userName:this.state.userInfo.name}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Ct,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,deleteRepo:this.deleteRepo,transferRepo:this.transferRepo})})]})})]})}}]),a}(c.Component),_t=window.sysadmin.pageOptions.enableSysAdminViewRepo,At=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center mt-4",children:a});var r=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No libraries")})}),i=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Share From")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Size")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Last Update")})]})}),Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(Lt,{item:e},t)}))})]})});return n.length?i:r}}]),a}(c.Component),Lt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).renderRepoName=function(){var e=n.props.item;return e.name?j.Ab&&_t&&!e.encrypted?Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/libraries/").concat(e.id,"/"),children:e.name}):e.name:Object(j.pb)("Broken ({repo_id_placeholder})").replace("{repo_id_placeholder}",e.id)},n.getOwnerLink=function(){var e,t=n.props.item,a=t.owner_email.indexOf("@seafile_group");if(-1==a)e=Object(O.jsx)(Ie,{email:t.owner_email,name:t.owner_name});else{var r=t.owner_email.substring(0,a);e=Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/departments/").concat(r,"/"),children:t.owner_name})}return e},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=m.a.getLibIconUrl(e),a=m.a.getLibIconTitle(e);return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:t,title:a,alt:a,width:"24"})}),Object(O.jsx)("td",{children:this.renderRepoName()}),Object(O.jsx)("td",{children:this.getOwnerLink()}),Object(O.jsx)("td",{children:m.a.bytesToSize(e.size)}),Object(O.jsx)("td",{children:L()(e.last_modify).fromNow()})]})})}}]),a}(c.Component),Tt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={loading:!0,errorMsg:"",userInfo:{},repoList:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);P.b.sysAdminGetUser(t).then((function(t){e.setState({userInfo:t.data})})),P.b.sysAdminListShareInRepos(t).then((function(t){e.setState({loading:!1,repoList:t.data.repo_list})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(St,{currentItem:"shared-repos",email:this.props.email,userName:this.state.userInfo.name}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(At,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList})})]})})]})}}]),a}(c.Component),Ft=a(260),Rt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No shared links")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Size")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Type")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Visits")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Ut,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteItem:e.props.deleteItem},a)}))})]})});return r.length?s:i}}]),a}(c.Component),Ut=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleLinkDialog=function(){n.setState({isLinkDialogOpen:!n.state.isLinkDialogOpen})},n.deleteItem=function(){n.props.deleteItem(n.props.item)},n.translateOperations=function(e){var t="";switch(e){case"View":t=Object(j.pb)("View");break;case"Delete":t=Object(j.pb)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"View":n.toggleLinkDialog();break;case"Delete":n.deleteItem()}},n.getRoleText=function(){var e;switch(n.props.item.role){case"Owner":e=Object(j.pb)("Owner");break;case"Admin":e=Object(j.pb)("Admin");break;case"Member":e=Object(j.pb)("Member")}return e},n.getIconUrl=function(){var e=n.props.item;return"upload"==e.type||e.is_dir?m.a.getFolderIconUrl():m.a.getFileIconUrl(e.obj_name)},n.state={isOpIconShown:!1,highlight:!1,isLinkDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isLinkDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:this.getIconUrl(),alt:"",width:"24"})}),Object(O.jsx)("td",{children:"/"==e.obj_name?e.repo_name:e.obj_name}),"upload"==e.type?Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("td",{}),Object(O.jsx)("td",{children:Object(j.pb)("Upload")})]}):Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("td",{children:e.is_dir?null:m.a.bytesToSize(e.size)}),Object(O.jsx)("td",{children:Object(j.pb)("Download")})]}),Object(O.jsx)("td",{children:e.view_cnt}),Object(O.jsx)("td",{children:a&&Object(O.jsx)(at.a,{operations:["View","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),n&&Object(O.jsx)(Ft.a,{link:e.link,toggleDialog:this.toggleLinkDialog})]})}}]),a}(c.Component),Et=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).deleteItem=function(e){var t=e.type,a=e.token;"download"==t?P.b.sysAdminDeleteShareLink(a).then((function(e){var t=n.state.shareLinkItems.filter((function(e){return e.token!=a}));n.setState({shareLinkItems:t}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)})):P.b.sysAdminDeleteUploadLink(a).then((function(e){var t=n.state.uploadLinkItems.filter((function(e){return e.token!=a}));n.setState({uploadLinkItems:t}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",userInfo:{},uploadLinkItems:[],shareLinkItems:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);P.b.sysAdminGetUser(t).then((function(t){e.setState({userInfo:t.data})})),P.b.sysAdminListShareLinksByUser(t).then((function(t){var a=t.data.share_link_list.map((function(e){return e.type="download",e}));a.sort((function(e,t){return e.is_dir?-1:1})),e.setState({loading:!1,shareLinkItems:a})})),P.b.sysAdminListUploadLinksByUser(t).then((function(t){var a=t.data.upload_link_list.map((function(e){return e.type="upload",e}));e.setState({loading:!1,uploadLinkItems:a})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.shareLinkItems,a=e.uploadLinkItems;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(St,{currentItem:"links",email:this.props.email,userName:this.state.userInfo.name}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Rt,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:[].concat(a,t),deleteItem:this.deleteItem})})]})})]})}}]),a}(c.Component),Bt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No groups")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Role")}),Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Created At")})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(zt,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem},a)}))})]})});return r.length?s:i}}]),a}(c.Component),zt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.getRoleText=function(){var e;switch(n.props.item.role){case"Owner":e=Object(j.pb)("Owner");break;case"Admin":e=Object(j.pb)("Admin");break;case"Member":e=Object(j.pb)("Member")}return e},n.state={isOpIconShown:!1,highlight:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=(this.state.isOpIconShown,m.a.HTMLescape(e.name),0==e.parent_group_id?"".concat(j.qc,"sys/groups/").concat(e.id,"/libraries/"):"".concat(j.qc,"sys/departments/").concat(e.id,"/"));return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)(g.a,{to:t,children:e.name})}),Object(O.jsx)("td",{children:this.getRoleText()}),Object(O.jsx)("td",{children:L()(e.created_at).format("YYYY-MM-DD HH:mm")})]})})}}]),a}(c.Component),Vt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={loading:!0,errorMsg:"",userInfo:{},items:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);P.b.sysAdminGetUser(t).then((function(t){e.setState({userInfo:t.data})})),P.b.sysAdminListGroupsJoinedByUser(t).then((function(t){e.setState({loading:!1,items:t.data.group_list})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(St,{currentItem:"groups",email:this.props.email,userName:this.state.userInfo.name}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Bt,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items})})]})})]})}}]),a}(c.Component),qt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleRepoNameChange=function(e){var t=e.target.value;n.setState({repoName:t,isSubmitBtnActive:t.trim()})},n.handleSubmit=function(){var e=n.state,t=e.repoName,a=e.ownerEmail;n.props.createRepo(t.trim(),a),n.toggle()},n.handleSelectChange=function(e){n.setState({ownerEmail:e?e.email:""})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.toggle=function(){n.props.toggleDialog()},n.state={repoName:"",ownerEmail:"",errMessage:"",isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,autoFocus:!1,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("New Library")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsxs)(Ae.a,{children:[Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{for:"repoName",children:Object(j.pb)("Name")}),Object(O.jsx)(ne.a,{id:"repoName",onKeyPress:this.handleKeyPress,value:this.state.repoName,onChange:this.handleRepoNameChange,autoFocus:!0})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsxs)(Ve.a,{for:"userSelect",children:[Object(j.pb)("Owner"),Object(O.jsx)("span",{className:"small text-secondary",children:Object(j.pb)("(If left blank, owner will be admin)")})]}),Object(O.jsx)(Ge.a,{id:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:Object(j.pb)("Select a user"),onSelectChange:this.handleSelectChange})]})]}),this.state.errMessage&&Object(O.jsx)(Be.a,{color:"danger",children:this.state.errMessage})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Wt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"all",urlPart:"all-libraries",text:Object(j.pb)("All")},{name:"system",urlPart:"system-library",text:Object(j.pb)("System")},{name:"trash",urlPart:"trash-libraries",text:Object(j.pb)("Trash")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return Object(O.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(O.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,a){return Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},a)}))})})}}]),a}(l.a.Component),Ht=a(23),Yt=a(185),Gt=a(1828),Qt=a(1829),Kt=a(1830),Zt=a(1831),Xt=a(1832),Jt=a(86),$t=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onMouseEnter=function(){n.setState({isOperationShow:!0})},n.onMouseLeave=function(){n.setState({isOperationShow:!1})},n.deleteShareItem=function(){var e=n.props.item;n.props.deleteShareItem(e.user_email)},n.onChangeUserPermission=function(e){var t=n.props.item;n.props.onChangeUserPermission(t,e)},n.state={isOperationShow:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=m.a.getSharedPermission(e);return Object(O.jsxs)("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(O.jsx)("td",{className:"name",children:e.user_name}),Object(O.jsx)("td",{children:Object(O.jsx)(Jt.a,{repoID:e.repo_id,isTextMode:!0,autoFocus:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{className:"sf2-icon-x3 action-icon ".concat(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:Object(j.pb)("Delete")})})]})}}]),a}(l.a.Component),ea=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.items;return Object(O.jsx)("tbody",{children:t.map((function(t,a){return Object(O.jsx)($t,{item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission},a)}))})}}]),a}(l.a.Component),ta=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSelectChange=function(e){n.setState({selectedOption:e}),n.options=[]},n.setPermission=function(e){n.setState({permission:e})},n.shareToUser=function(){var e=[],t=n.props.repoID;if(n.state.selectedOption&&n.state.selectedOption.length>0)for(var a=0;a<n.state.selectedOption.length;a++)e[a]=n.state.selectedOption[a].email;P.b.sysAdminAddRepoSharedItem(t,"user",e,n.state.permission).then((function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var r=e.data.success;n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(r),selectedOption:null,permission:"rw"}),n.refs.userSelect.clearSelect()})).catch((function(e){if(e.response){var t=Object(j.pb)("Library can not be shared to owner."),a=[];a.push(t),n.setState({errorMsg:a,selectedOption:null})}}))},n.deleteShareItem=function(e){var t=n.props.repoID;P.b.sysAdminDeleteRepoSharedItem(t,"user",e).then((function(t){n.setState({sharedItems:n.state.sharedItems.filter((function(t){return t.user_email!==e}))})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.onChangeUserPermission=function(e,t){var a=n.props.repoID,r=e.user_email;P.b.sysAdminUpdateRepoSharedItemPermission(a,"user",r,t).then((function(){n.updateSharedItems(e,t)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateSharedItems=function(e,t){var a=e.user_name,r=n.state.sharedItems.map((function(e){var n=e.user_name;return a===n&&(e.permission=t,e.is_admin="admin"===t),e}));n.setState({sharedItems:r})},n.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},n.options=[],n.permissions=["rw","r"],j.Ab&&n.permissions.push("admin","cloud-edit","preview"),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.repoID;P.b.sysAdminListRepoSharedItems(t,"user").then((function(t){0!==t.data.length&&e.setState({sharedItems:t.data})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))}},{key:"render",value:function(){var e=this.state.sharedItems;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"50%",children:Object(j.pb)("User")}),Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Permission")}),Object(O.jsx)("th",{width:"15%"})]})}),Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ge.a,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:Object(j.pb)("Search users..."),onSelectChange:this.handleSelectChange})}),Object(O.jsx)("td",{children:Object(O.jsx)(Jt.a,{repoID:this.props.repoID,isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})}),Object(O.jsx)("td",{children:Object(O.jsx)(D.a,{onClick:this.shareToUser,children:Object(j.pb)("Submit")})})]}),this.state.errorMsg.length>0&&this.state.errorMsg.map((function(e,t){var a="";return a=e.email?e.email+": "+e.error_msg:e,Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,children:Object(O.jsx)("p",{className:"error",children:a})})},t)}))]})]}),Object(O.jsx)("div",{className:"share-list-container",children:Object(O.jsxs)("table",{className:"table-thead-hidden",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"50%",children:Object(j.pb)("User")}),Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Permission")}),Object(O.jsx)("th",{width:"15%"})]})}),Object(O.jsx)(ea,{items:e,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission})]})})]})}}]),a}(l.a.Component),aa=a(102),na=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onMouseEnter=function(){n.setState({isOperationShow:!0})},n.onMouseLeave=function(){n.setState({isOperationShow:!1})},n.deleteShareItem=function(){var e=n.props.item;n.props.deleteShareItem(e.group_id)},n.onChangeUserPermission=function(e){var t=n.props.item;n.props.onChangeUserPermission(t,e)},n.state={isOperationShow:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=m.a.getSharedPermission(e);return Object(O.jsxs)("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(O.jsx)("td",{className:"name",children:e.group_name}),Object(O.jsx)("td",{children:Object(O.jsx)(Jt.a,{repoID:e.repo_id,isTextMode:!0,autoFocus:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{className:"sf2-icon-x3 action-icon ".concat(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:Object(j.pb)("Delete")})})]})}}]),a}(l.a.Component),ra=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.items;return Object(O.jsx)("tbody",{children:t.map((function(t,a){return Object(O.jsx)(na,{item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission},a)}))})}}]),a}(l.a.Component),ia=function(e){return Object(O.jsx)("div",Object(n.a)(Object(n.a)({},e.innerProps),{},{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"},children:Object(j.pb)("Group not found")}))},sa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSelectChange=function(e){n.setState({selectedOption:e})},n.loadOptions=function(){P.b.shareableGroups().then((function(e){n.options=[];for(var t=0;t<e.data.length;t++){var a={};a.value=e.data[t].name,a.id=e.data[t].id,a.label=e.data[t].name,n.options.push(a)}})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.listSharedGroups=function(){var e=n.props.repoID;P.b.sysAdminListRepoSharedItems(e,"group").then((function(e){0!==e.data.length&&n.setState({sharedItems:e.data})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.setPermission=function(e){n.setState({permission:e})},n.shareToGroup=function(){var e=[],t=n.props.repoID;if(n.state.selectedOption&&n.state.selectedOption.length>0)for(var a=0;a<n.state.selectedOption.length;a++)e[a]=n.state.selectedOption[a].id;P.b.sysAdminAddRepoSharedItem(t,"group",e,n.state.permission).then((function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var r=e.data.success;n.setState({errorMsg:t,sharedItems:n.state.sharedItems.concat(r),selectedOption:null,permission:"rw"})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteShareItem=function(e){var t=n.props.repoID;P.b.sysAdminDeleteRepoSharedItem(t,"group",e).then((function(){n.setState({sharedItems:n.state.sharedItems.filter((function(t){return t.group_id!==e}))})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.onChangeUserPermission=function(e,t){var a=n.props.repoID,r=e.group_id;P.b.sysAdminUpdateRepoSharedItemPermission(a,"group",r,t).then((function(){n.updateSharedItems(e,t)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateSharedItems=function(e,t){var a=e.group_id,r=n.state.sharedItems.map((function(e){var n=e.group_id;return a===n&&(e.permission=t,e.is_admin="admin"===t),e}));n.setState({sharedItems:r})},n.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},n.options=[],n.permissions=["rw","r"],j.Ab&&n.permissions.push("admin","cloud-edit","preview"),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadOptions(),this.listSharedGroups()}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"50%",children:Object(j.pb)("Group")}),Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Permission")}),Object(O.jsx)("th",{width:"15%"})]})}),Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)(aa.a,{isMulti:!0,onChange:this.handleSelectChange,options:this.options,placeholder:Object(j.pb)("Select groups..."),maxMenuHeight:200,inputId:"react-select-2-input",value:this.state.selectedOption,components:{NoOptionsMessage:ia}})}),Object(O.jsx)("td",{children:Object(O.jsx)(Jt.a,{repoID:this.props.repoID,isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})}),Object(O.jsx)("td",{children:Object(O.jsx)(D.a,{onClick:this.shareToGroup,children:Object(j.pb)("Submit")})})]}),this.state.errorMsg.length>0&&this.state.errorMsg.map((function(e,t){var a=e.group_name+": "+e.error_msg;return Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,children:Object(O.jsx)("p",{className:"error",children:a})})},t)}))]})]}),Object(O.jsx)("div",{className:"share-list-container",children:Object(O.jsxs)("table",{className:"table-thead-hidden",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"50%",children:Object(j.pb)("Group")}),Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Permission")}),Object(O.jsx)("th",{width:"15%"})]})}),Object(O.jsx)(ra,{items:this.state.sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission})]})})]})}}]),a}(l.a.Component),oa=(a(544),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getInitialActiveTab=function(){return"shareToUser"},n.toggle=function(e){n.state.activeTab!==e&&n.setState({activeTab:e})},n.renderDirContent=function(){var e=n.state.activeTab,t=n.props,a=t.enableDirPrivateShare,r=t.isGroupOwnedRepo;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("div",{className:"share-dialog-side",children:Object(O.jsx)(Gt.a,{pills:!0,children:a&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Qt.a,{children:Object(O.jsx)(Kt.a,{className:"shareToUser"===e?"active":"",onClick:n.toggle.bind(Object(ae.a)(n),"shareToUser"),children:Object(j.pb)("Share to user")})}),Object(O.jsx)(Qt.a,{children:Object(O.jsx)(Kt.a,{className:"shareToGroup"===e?"active":"",onClick:n.toggle.bind(Object(ae.a)(n),"shareToGroup"),children:Object(j.pb)("Share to group")})})]})})}),Object(O.jsx)("div",{className:"share-dialog-main",children:Object(O.jsx)(Zt.a,{activeTab:n.state.activeTab,children:a&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Xt.a,{tabId:"shareToUser",children:Object(O.jsx)(ta,{itemType:"library",isGroupOwnedRepo:r,itemPath:n.props.itemPath,repoID:n.props.repoID,isRepoOwner:n.state.isRepoOwner})}),Object(O.jsx)(Xt.a,{tabId:"shareToGroup",children:Object(O.jsx)(sa,{itemType:"library",isGroupOwnedRepo:r,itemPath:n.props.itemPath,repoID:n.props.repoID,isRepoOwner:n.state.isRepoOwner})})]})})})]})},n.state={activeTab:n.getInitialActiveTab(),isRepoOwner:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsxs)(b.a,{isOpen:!0,style:{maxWidth:"720px"},className:"share-dialog",toggle:this.props.toggleDialog,children:[Object(O.jsxs)(Me.a,{toggle:this.props.toggleDialog,children:[Object(j.pb)("Share")," ",Object(O.jsx)("span",{className:"op-target",title:this.props.itemName,children:this.props.itemName})]}),Object(O.jsx)(_e.a,{className:"share-dialog-content",children:this.renderDirContent()})]})})}}]),a}(l.a.Component)),ca=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).submit=function(){var e=n.state.keepDays;n.state.autoHistory&&(e=n.state.expireDays);var t=n.props.repoID;if(/^-?\d+$/.test(e)){var a=Object(j.pb)("Successfully set library history.");P.b.sysAdminUpdateRepoHistorySetting(t,e).then((function(e){w.a.success(a),n.setState({keepDays:e.data.keep_days}),n.props.toggleDialog()})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))}else n.setState({errorInfo:Object(j.pb)("Please enter a non-negative integer")})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.submit(),e.preventDefault())},n.onChange=function(e){var t=e.target.value;n.setState({keepDays:t,expireDays:t})},n.setLimitDays=function(e){"allHistory"===e?n.setState({keepDays:-1}):"noHistory"===e?n.setState({keepDays:0}):n.setState({disabled:!1}),n.setState({allHistory:"allHistory"===e,noHistory:"noHistory"===e,autoHistory:"autoHistory"===e})},n.state={keepDays:-1,expireDays:30,disabled:!0,allHistory:!0,noHistory:!1,autoHistory:!1,errorInfo:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetRepoHistorySetting(this.props.repoID).then((function(t){e.setState({keepDays:t.data.keep_days,allHistory:t.data.keep_days<0,noHistory:0===t.data.keep_days,autoHistory:t.data.keep_days>0,disabled:!(t.data.keep_days>0),expireDays:t.data.keep_days>0?t.data.keep_days:30})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))}},{key:"render",value:function(){var e=this,t=this.props.itemName;return Object(O.jsxs)(b.a,{isOpen:!0,children:[Object(O.jsxs)(Me.a,{toggle:this.props.toggleDialog,children:[Object(O.jsx)("span",{className:"op-target",title:t,children:t})," ",Object(j.pb)("History Setting")]}),Object(O.jsx)(_e.a,{children:Object(O.jsxs)(Ae.a,{children:[Object(O.jsxs)(Le.a,{check:!0,children:[Object(O.jsx)(ne.a,{type:"radio",name:"radio1",checked:this.state.allHistory,onChange:function(){e.setLimitDays("allHistory")}})," ",Object(O.jsx)(Ve.a,{children:Object(j.pb)("Keep full history")})]}),Object(O.jsxs)(Le.a,{check:!0,children:[Object(O.jsx)(ne.a,{type:"radio",name:"radio1",checked:this.state.noHistory,onChange:function(){e.setLimitDays("noHistory")}})," ",Object(O.jsx)(Ve.a,{children:Object(j.pb)("Don't keep history")})]}),Object(O.jsxs)(Le.a,{check:!0,children:[Object(O.jsx)(ne.a,{type:"radio",name:"radio1",checked:this.state.autoHistory,onChange:function(){e.setLimitDays("autoHistory")}})," ",Object(O.jsx)(Ve.a,{children:Object(j.pb)("Only keep a period of history:")}),Object(O.jsx)(ne.a,{type:"text",className:"expire-input",value:this.state.expireDays,onChange:this.onChange,disabled:this.state.disabled,onKeyDown:this.handleKeyPress})," ",Object(O.jsx)(Ve.a,{children:Object(O.jsx)("span",{children:Object(j.pb)("days")})})]}),this.state.errorInfo&&Object(O.jsx)(Be.a,{color:"danger",children:this.state.errorInfo})]})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggleDialog,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.submit,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),la=window.sysadmin.pageOptions.enableSysAdminViewRepo,da=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n.sortByFileCount=function(e){e.preventDefault(),n.props.sortItems("file_count")},n.sortBySize=function(e){e.preventDefault(),n.props.sortItems("size")},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.pageInfo,s=t.curPerPage,o=t.sortBy;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center",children:n});var l=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No libraries")})}),d=Object(O.jsx)("span",{className:"fas fa-sort"}),u=Object(O.jsx)("span",{className:"fas fa-caret-down"}),h=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"15%",children:void 0!=o?Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount,children:[Object(j.pb)("Files")," ","file_count"==o?u:d]})," / ",Object(O.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize,children:[Object(j.pb)("Size")," ","size"==o?u:d]})]}):Object(j.pb)("Files")/Object(j.pb)("Size")}),Object(O.jsx)("th",{width:"32%",children:"ID"}),Object(O.jsx)("th",{width:"18%",children:Object(j.pb)("Owner")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(ua,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,onTransferRepo:e.props.onTransferRepo},a)}))})]}),i&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:i.current_page,hasNextPage:i.has_next_page,curPerPage:s,resetPerPage:this.props.resetPerPage})]});return r.length?h:l}}]),a}(c.Component),ua=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onDeleteRepo=function(e){P.b.sysAdminDeleteRepo(e.id).then((function(t){n.props.onDeleteRepo(e),n.setState({isDeleteDialogOpen:!1,isRepoDeleted:!0});var a=Object(j.pb)("Successfully deleted {name}.").replace("{name}",e.name);w.a.success(a)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t),n.setState({isRepoDeleted:!1})}))},n.onTransferRepo=function(e){P.b.sysAdminTransferRepo(n.props.repo.id,e.email).then((function(e){n.props.onTransferRepo(e.data);var t=Object(j.pb)("Successfully transferred the library.");w.a.success(t)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)})),n.toggleTransferDialog()},n.handleMouseOver=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseOut=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){switch(e){case"Share":n.toggleShareDialog();break;case"Delete":n.toggleDeleteDialog();break;case"Transfer":n.toggleTransferDialog();break;case"History Setting":n.toggleHistorySettingDialog()}},n.toggleShareDialog=function(){n.setState({isShareDialogOpen:!n.state.isShareDialogOpen})},n.toggleDeleteDialog=function(){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleTransferDialog=function(){n.setState({isTransferDialogOpen:!n.state.isTransferDialogOpen})},n.toggleHistorySettingDialog=function(){n.setState({isHistorySettingDialogOpen:!n.state.isHistorySettingDialogOpen})},n.renderRepoName=function(){var e=n.props.repo;return e.name?j.Ab&&la&&!e.encrypted?Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/libraries/").concat(e.id,"/"),children:e.name}):e.name:"--"},n.translateOperations=function(e){var t="";switch(e){case"Share":t=Object(j.pb)("Share");break;case"Delete":t=Object(j.pb)("Delete");break;case"Transfer":t=Object(j.pb)("Transfer");break;case"History Setting":t=Object(j.pb)("History Setting")}return t},n.getOperations=function(){var e=["Delete","Transfer"];return n.props.repo.encrypted||e.push("Share"),e.push("History Setting"),e},n.state={isOpIconShown:!1,highlight:!1,isShareDialogOpen:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1,isHistorySettingDialogOpen:!1,isRepoDeleted:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e,t=this.props.repo,a=this.state,n=a.isOpIconShown,r=a.isShareDialogOpen,i=a.isDeleteDialogOpen,s=a.isTransferDialogOpen,o=a.isHistorySettingDialogOpen,l=m.a.getLibIconUrl(t),d=m.a.getLibIconTitle(t),u=t.owner_email.indexOf("@seafile_group"),h=-1!=u;return h&&(e=t.owner_email.substring(0,u)),Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:l,title:d,alt:d,width:"24"})}),Object(O.jsx)("td",{children:this.renderRepoName()}),Object(O.jsx)("td",{children:"".concat(t.file_count," / ").concat(m.a.bytesToSize(t.size))}),Object(O.jsx)("td",{children:t.id}),Object(O.jsx)("td",{children:h?Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/departments/").concat(e,"/"),children:t.owner_name}):Object(O.jsx)(Ie,{email:t.owner_email,name:t.owner_name})}),Object(O.jsx)("td",{children:!h&&n&&Object(O.jsx)(at.a,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),r&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(oa,{itemName:t.name,itemPath:"/",repoID:t.id,isGroupOwnedRepo:h,repoEncrypted:t.encrypted,enableDirPrivateShare:!0,userPerm:t.permission,toggleDialog:this.toggleShareDialog})}),i&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Yt.a,{repo:t,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.onDeleteRepo,toggle:this.toggleDeleteDialog})}),s&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(It.a,{itemName:t.name,submit:this.onTransferRepo,canTransferToDept:!1,toggleDialog:this.toggleTransferDialog})}),o&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(ca,{repoID:t.id,itemName:t.name,toggleDialog:this.toggleHistorySettingDialog})})]})}}]),a}(c.Component),ha=da,pa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleCreateRepoDialog=function(){n.setState({isCreateRepoDialogOpen:!n.state.isCreateRepoDialogOpen})},n.getReposByPage=function(e){var t=n.state,a=t.perPage,r=t.sortBy;P.b.sysAdminListAllRepos(e,a,r).then((function(e){n.setState({loading:!1,repos:e.data.repos,pageInfo:e.data.page_info})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.sortItems=function(e){n.setState({currentPage:1,sortBy:e},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=n.state,r=a.currentPage,i=a.sortBy;t.set("page",r),t.set("order_by",i),e.search=t.toString(),Object(g.c)(e.toString()),n.getReposByPage(r)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getReposByPage(1)}))},n.createRepo=function(e,t){P.b.sysAdminCreateRepo(e,t).then((function(e){n.state.repos.unshift(e.data),n.setState({repos:n.state.repos})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.onDeleteRepo=function(e){var t=n.state.repos.filter((function(t){return t.id!=e.id}));n.setState({repos:t})},n.onTransferRepo=function(e){var t=n.state.repos.map((function(t){return t.id==e.id?e:t}));n.setState({repos:t})},n.getSearch=function(){return Object(O.jsx)(Je,{placeholder:Object(j.pb)("Search libraries by name or ID"),submit:n.searchRepos})},n.searchRepos=function(e){Object(g.c)("".concat(j.qc,"sys/search-libraries/?name_or_id=").concat(encodeURIComponent(e)))},n.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:25,sortBy:"",isCreateRepoDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage,s=a.sortBy;this.setState({sortBy:t.get("order_by")||s,perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getReposByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isCreateRepoDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({search:this.getSearch()},this.props),{},{children:Object(O.jsxs)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleCreateRepoDialog,children:[Object(O.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(j.pb)("New Library")]})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Wt,{currentItem:"all"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(ha,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,sortBy:this.state.sortBy,sortItems:this.sortItems,pageInfo:this.state.pageInfo,curPerPage:this.state.perPage,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,onDeleteRepo:this.onDeleteRepo,onTransferRepo:this.onTransferRepo})})]})}),e&&Object(O.jsx)(qt,{createRepo:this.createRepo,toggleDialog:this.toggleCreateRepoDialog})]})}}]),a}(c.Component),ba=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items;return t?Object(O.jsx)(I.a,{}):a?Object(O.jsx)("p",{className:"error text-center",children:a}):Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"33%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"34%",children:"ID"}),Object(O.jsx)("th",{width:"33%",children:Object(j.pb)("Description")})]})}),Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(ga,{item:e},t)}))})]})})}}]),a}(c.Component),ga=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/libraries/").concat(e.id,"/"),children:e.name})}),Object(O.jsx)("td",{children:e.id}),Object(O.jsx)("td",{children:e.description})]})}}]),a}(c.Component),ja=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={loading:!0,errorMsg:"",items:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetSystemRepoInfo().then((function(t){var a=[];a.push(t.data),e.setState({items:a,loading:!1})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Wt,{currentItem:"system"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(ba,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items})})]})})]})}}]),a}(c.Component),ma=window.sysadmin.pageOptions.trashReposExpireDays,fa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.pageInfo,s=t.curPerPage;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No deleted libraries")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("p",{className:"mt-4 small text-secondary",children:Object(j.pb)("Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.").replace("{trashReposExpireDays}",ma)}),Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"43%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"27%",children:Object(j.pb)("Owner")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Deleted Time")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Oa,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,onRestoreRepo:e.props.onRestoreRepo},a)}))})]}),i&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:i.current_page,hasNextPage:i.has_next_page,curPerPage:s,resetPerPage:this.props.resetPerPage})]});return r.length?l:o}}]),a}(c.Component),Oa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseOut=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onDeleteRepo=function(){var e=n.props.repo;P.b.sysAdminDeleteTrashRepo(e.id).then((function(t){n.props.onDeleteRepo(e);var a=Object(j.pb)("Successfully deleted {name}.").replace("{name}",e.name);w.a.success(a)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.onRestoreRepo=function(){var e=n.props.repo;P.b.sysAdminRestoreTrashRepo(e.id).then((function(t){n.props.onRestoreRepo(e);var a=Object(j.pb)("Successfully restored the library.");w.a.success(a)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.toggleDeleteRepoDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteRepoDialogOpen:!n.state.isDeleteRepoDialogOpen})},n.toggleRestoreRepoDialog=function(e){e&&e.preventDefault(),n.setState({isRestoreRepoDialogOpen:!n.state.isRestoreRepoDialogOpen})},n.translateOperations=function(e){var t="";switch(e){case"Restore":t=Object(j.pb)("Restore");break;case"Delete":t=Object(j.pb)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"Restore":n.toggleRestoreRepoDialog();break;case"Delete":n.toggleDeleteRepoDialog()}},n.state={highlight:!1,isOpIconShown:!1,isDeleteRepoDialogOpen:!1,isRestoreRepoDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.repo,t=this.state,a=t.isOpIconShown,n=t.isDeleteRepoDialogOpen,r=t.isRestoreRepoDialogOpen,i=m.a.getLibIconUrl(e),s=m.a.getLibIconTitle(e),o='<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>";return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:i,title:s,alt:s,width:"24"})}),Object(O.jsx)("td",{children:e.name}),Object(O.jsx)("td",{children:-1==e.owner.indexOf("@seafile_group")?Object(O.jsx)(Ie,{email:e.owner,name:e.owner_name}):e.group_name}),Object(O.jsx)("td",{children:L()(e.delete_time).fromNow()}),Object(O.jsx)("td",{children:a&&Object(O.jsx)(at.a,{operations:["Restore","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),n&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Library"),message:Object(j.pb)("Are you sure you want to delete {placeholder} completely?").replace("{placeholder}",o),executeOperation:this.onDeleteRepo,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteRepoDialog})}),r&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Ke.a,{title:Object(j.pb)("Restore Library"),message:Object(j.pb)("Are you sure you want to restore {placeholder}?").replace("{placeholder}",o),executeOperation:this.onRestoreRepo,confirmBtnText:Object(j.pb)("Restore"),toggleDialog:this.toggleRestoreRepoDialog})})]})}}]),a}(c.Component),va=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleCleanTrashDialog=function(){n.setState({isCleanTrashDialogOpen:!n.state.isCleanTrashDialogOpen})},n.getReposByPage=function(e){var t=n.state.perPage;P.b.sysAdminListTrashRepos(e,t).then((function(e){n.setState({repos:e.data.repos,pageInfo:e.data.page_info,loading:!1})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getReposByPage(1)}))},n.onDeleteRepo=function(e){var t=n.state.repos.filter((function(t){return t.id!=e.id}));n.setState({repos:t})},n.onRestoreRepo=function(e){var t=n.state.repos.filter((function(t){return t.id!=e.id}));n.setState({repos:t})},n.cleanTrash=function(){P.b.sysAdminCleanTrashRepos().then((function(e){n.setState({repos:[]}),w.a.success(Object(j.pb)("Successfully cleared trash."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.getSearch=function(){return Object(O.jsx)(Je,{placeholder:Object(j.pb)("Search libraries by owner"),submit:n.searchRepos})},n.searchRepos=function(e){P.b.sysAdminSearchTrashRepos(e).then((function(e){n.setState({repos:e.data.repos,pageInfo:null,errorMsg:"",loading:!1})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:25,isCleanTrashDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getReposByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isCleanTrashDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[this.state.repos.length?Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"operation-item",onClick:this.toggleCleanTrashDialog,children:Object(j.pb)("Clean")})})):Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Wt,{currentItem:"trash"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(fa,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,pageInfo:this.state.pageInfo,onDeleteRepo:this.onDeleteRepo,onRestoreRepo:this.onRestoreRepo,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,curPerPage:this.state.perPage})})]})}),e&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Clear Trash"),message:Object(j.pb)("Are you sure you want to clear trash?"),executeOperation:this.cleanTrash,confirmBtnText:Object(j.pb)("Clear"),toggleDialog:this.toggleCleanTrashDialog})]})}}]),a}(c.Component),xa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getRepos=function(){var e=n.state.name;P.b.sysAdminSearchRepos(e).then((function(e){n.setState({loading:!1,errorMsg:"",repos:e.data.repo_list})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.searchRepos=function(){n.getRepos()},n.onDeleteRepo=function(e){var t=n.state.repos.filter((function(t){return t.id!=e.id}));n.setState({repos:t})},n.onTransferRepo=function(e){var t=n.state.repos.map((function(t){return t.id==e.id?e:t}));n.setState({repos:t})},n.handleNameInputChange=function(e){n.setState({name:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.name;n.setState({isSubmitBtnActive:e.trim()})},n.handleKeyDown=function(e){13===e.keyCode&&(n.state.isSubmitBtnActive&&n.searchRepos())},n.state={name:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",repos:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({name:e.get("name_or_id")||""},this.getRepos)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.isSubmitBtnActive;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Libraries")})}),Object(O.jsxs)("div",{className:"cur-view-content",children:[Object(O.jsxs)("div",{className:"mt-4 mb-6",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.pb)("Search Libraries")}),Object(O.jsx)("p",{className:"text-secondary small",children:Object(j.pb)("Tip: you can search by keyword in name or ID.")}),Object(O.jsxs)(Ae.a,{tag:"div",children:[Object(O.jsxs)(Le.a,{row:!0,children:[Object(O.jsx)(Ve.a,{for:"name",sm:1,children:Object(j.pb)("Name or ID")}),Object(O.jsx)(Ot.a,{sm:5,children:Object(O.jsx)(ne.a,{type:"text",name:"name",id:"name",value:t,onChange:this.handleNameInputChange,onKeyDown:this.handleKeyDown})})]}),Object(O.jsx)(Le.a,{row:!0,children:Object(O.jsx)(Ot.a,{sm:{size:5,offset:1},children:Object(O.jsx)("button",{className:"btn btn-outline-primary",disabled:!a,onClick:this.searchRepos,children:Object(j.pb)("Submit")})})})]})]}),Object(O.jsxs)("div",{className:"mt-4 mb-6",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.pb)("Result")}),Object(O.jsx)(ha,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,onDeleteRepo:this.onDeleteRepo,onTransferRepo:this.onTransferRepo})]})]})]})})]})}}]),a}(c.Component),ya=a(133),Sa=a(174),Da=function(){function e(t){Object(r.a)(this,e),this.name=t.obj_name,this.mtime=t.last_update,this.size=t.file_size,this.is_file=t.is_file}return Object(i.a)(e,[{key:"isDir",value:function(){return!this.is_file}}]),e}(),Pa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).onPathClick=function(t){var a=m.a.getEventData(t,"path");e.props.onPathClick(a)},e.turnPathToLink=function(t){var a=(t="/"===t[t.length-1]?t.slice(0,t.length-1):t).split("/"),n="";return a.map((function(t,r){if(""!==t)return r===a.length-1?Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("span",{className:"path-split",children:"/"}),Object(O.jsx)("span",{className:"path-file-name",children:t})]},r):(n+="/"+t,Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("span",{className:"path-split",children:"/"}),Object(O.jsx)("a",{className:"path-link","data-path":n,onClick:e.onPathClick,children:t})]},r))}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isSystemRepo,a=e.currentPath,n=e.repoName,r=this.turnPathToLink(a);return Object(O.jsxs)("div",{className:"path-container",children:[t?Object(O.jsx)("a",{href:"".concat(j.qc,"sys/system-library/"),children:Object(j.pb)("System")}):Object(O.jsx)("a",{href:"".concat(j.qc,"sys/all-libraries/"),children:Object(j.pb)("All")}),Object(O.jsx)("span",{className:"path-split",children:"/"}),"/"===a||""===a?Object(O.jsx)("span",{className:"path-repo-name",children:n}):Object(O.jsx)("a",{className:"path-link","data-path":"/",onClick:this.onPathClick,children:n}),r]})}}]),a}(l.a.Component),wa=Pa,Ia=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.openFolder=function(){n.props.openFolder(n.props.dirent)},n.deleteDirent=function(e){e.preventDefault(),n.props.deleteDirent(n.props.dirent)},n.downloadDirent=function(e){e.preventDefault(),n.props.downloadDirent(n.props.dirent)},n.state={isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,a=(e.isDeleteDialogOpen,this.props),n=a.dirent,r=a.fromSystemRepo,i=m.a.getDirentIcon(n);return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[Object(O.jsx)("td",{className:"text-center",children:Object(O.jsx)("img",{src:i,width:"24",alt:""})}),Object(O.jsx)("td",{children:n.is_file?n.name:Object(O.jsx)(g.a,{to:"#",onClick:this.openFolder,children:n.name})}),Object(O.jsxs)("td",{children:[t&&r&&Object(O.jsx)("a",{href:"#",className:"op-icon sf2-icon-delete",title:Object(j.pb)("Delete"),onClick:this.deleteDirent}),t&&n.is_file&&Object(O.jsx)("a",{href:"#",className:"op-icon sf2-icon-download",title:Object(j.pb)("Download"),onClick:this.downloadDirent})]}),Object(O.jsx)("td",{children:n.size}),Object(O.jsx)("td",{children:L()(n.mtime).fromNow()})]})})}}]),a}(l.a.Component),ka=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.direntList;return a?Object(O.jsx)(I.a,{}):n?Object(O.jsx)("p",{className:"error text-center mt-4",children:n}):Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"55%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"10%"}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Size")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Last Update")})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Ia,{dirent:t,openFolder:e.props.openFolder,deleteDirent:e.props.deleteDirent,downloadDirent:e.props.downloadDirent,fromSystemRepo:e.props.fromSystemRepo},a)}))})]})})}}]),a}(l.a.Component),Ca=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onPathClick=function(e){n.loadDirentList(e)},n.toggleNewFolderDialog=function(){n.setState({isNewFolderDialogOpen:!n.state.isNewFolderDialogOpen})},n.createNewFolder=function(e){var t=m.a.getFileName(e);P.b.sysAdminCreateSysRepoFolder(n.props.repoID,n.state.path,t).then((function(e){var t=new Da(e.data),a=n.state.direntList;a.unshift(t),n.setState({direntList:a}),n.toggleNewFolderDialog()})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.openFolder=function(e){var t=m.a.joinPath(n.state.path,e.name);e.is_file||n.loadDirentList(t)},n.loadDirentList=function(e){var t=n.props.repoID;P.b.sysAdminListRepoDirents(t,e).then((function(a){var r=a.data,i=r.is_system_library,s=r.repo_name,o=r.dirent_list,c=[];o.forEach((function(e){var t=new Da(e);c.push(t)})),n.setState({loading:!1,repoName:s,isSystemRepo:i,direntList:c,path:e},(function(){var a=j.qc+"sys/libraries/"+t+"/"+encodeURIComponent(n.state.repoName)+m.a.encodePath(e);window.history.replaceState({url:a,path:e},e,a)}))})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.deleteDirent=function(e){var t=m.a.joinPath(n.state.path,e.name);P.b.sysAdminDeleteRepoDirent(n.props.repoID,t).then((function(t){w.a.success(Object(j.pb)("Successfully deleted 1 item."));var a=n.state.direntList.filter((function(t){return t.name!=e.name}));n.setState({direntList:a})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.downloadDirent=function(e){var t=m.a.joinPath(n.state.path,e.name);P.b.sysAdminGetRepoFileDownloadURL(n.props.repoID,t).then((function(e){location.href=e.data.download_url})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.openFileInput=function(){n.fileInput.current.click()},n.onFileInputChange=function(){if(n.fileInput.current.files.length){var e=n.fileInput.current.files[0],t=n.state.path;P.b.sydAdminGetSysRepoItemUploadURL(t).then((function(a){var r=new FormData;r.append("parent_dir",t),r.append("file",e),ya.a.post(a.data.upload_link,r).then((function(e){var t=e.data[0],a=new Da({is_file:!0,obj_name:t.name,file_size:m.a.bytesToSize(t.size),last_update:(new Date).getTime()}),r=n.state.direntList,i=r.filter((function(e){return!e.is_file}));r.splice(i.length,0,a),n.setState({direntList:r})}))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))}},n.checkDuplicatedName=function(e){return n.state.direntList.some((function(t){return t.name===e}))},n.state={loading:!0,errorMsg:"",isSystemRepo:!1,repoName:"",path:"",direntList:[],isNewFolderDialogOpen:!1},n.fileInput=l.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadDirentList("/")}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.errorMsg,r=e.repoName,i=e.direntList,s=e.isSystemRepo,o=e.path,l=e.isNewFolderDialogOpen,d=this.props.repoID;return Object(O.jsxs)(c.Fragment,{children:[s?Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("input",{className:"d-none",type:"file",onChange:this.onFileInputChange,ref:this.fileInput}),Object(O.jsx)(D.a,{className:"operation-item",onClick:this.openFileInput,children:Object(j.pb)("Upload")}),Object(O.jsx)(D.a,{className:"operation-item",onClick:this.toggleNewFolderDialog,children:Object(j.pb)("New Folder")})]})})):Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path align-items-center",children:Object(O.jsx)(wa,{isSystemRepo:s,repoID:d,repoName:r,currentPath:o,onPathClick:this.onPathClick})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(ka,{loading:t,errorMsg:a,fromSystemRepo:s,direntList:i,openFolder:this.openFolder,deleteDirent:this.deleteDirent,downloadDirent:this.downloadDirent})})]})}),l&&Object(O.jsx)(Sa.a,{parentPath:o,checkDuplicatedName:this.checkDuplicatedName,onAddFolder:this.createNewFolder,addFolderCancel:this.toggleNewFolderDialog})]})}}]),a}(c.Component),Na=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleRepoNameChange=function(e){e.target.value.trim()?n.setState({isSubmitBtnActive:!0}):n.setState({isSubmitBtnActive:!1}),n.setState({groupName:e.target.value})},n.handleSubmit=function(){var e=n.state.groupName.trim();n.props.createGroup(e,n.state.ownerEmail)},n.handleSelectChange=function(e){n.setState({ownerEmail:e?e.email:""})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.toggle=function(){n.props.toggleDialog()},n.state={groupName:"",ownerEmail:"",errMessage:"",isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,autoFocus:!1,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("New Group")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsx)(Ae.a,{children:Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{for:"groupName",children:Object(j.pb)("Name")}),Object(O.jsx)(ne.a,{id:"groupName",onKeyPress:this.handleKeyPress,value:this.state.groupName,onChange:this.handleRepoNameChange,autoFocus:!0}),Object(O.jsxs)(Ve.a,{className:"mt-2",children:[Object(j.pb)("Owner"),Object(O.jsx)("span",{className:"small text-secondary",children:Object(j.pb)("(If left blank, owner will be admin)")})]}),Object(O.jsx)(Ge.a,{isMulti:!1,className:"reviewer-select",placeholder:Object(j.pb)("Select a user"),onSelectChange:this.handleSelectChange})]})}),this.state.errMessage&&Object(O.jsx)(Be.a,{color:"danger",children:this.state.errMessage})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Ma=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSelectChange=function(e){n.setState({selectedOption:e,submitBtnDisabled:null==e})},n.submit=function(){var e=n.state.selectedOption.email;n.props.transferGroup(e),n.props.toggleDialog()},n.state={selectedOption:null,submitBtnDisabled:!0},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.submitBtnDisabled,t='<span class="op-target">'+m.a.HTMLescape(this.props.groupName)+"</span>",a=Object(j.pb)("Transfer Group {placeholder} to").replace("{placeholder}",t);return Object(O.jsxs)(b.a,{isOpen:!0,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggleDialog,children:Object(O.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ge.a,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:Object(j.pb)("Select a user"),onSelectChange:this.handleSelectChange})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggleDialog,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.submit,disabled:e,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),_a=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPage=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.pageInfo,s=t.curPerPage;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No groups")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"40%",children:Object(j.pb)("Owner")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Created At")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Aa,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroup:e.props.deleteGroup,transferGroup:e.props.transferGroup},a)}))})]}),i&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i.current_page,hasNextPage:i.has_next_page,curPerPage:s,resetPerPage:this.props.resetPerPage})]});return r.length?l:o}}]),a}(c.Component),Aa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteDialog();break;case"Transfer":n.toggleTransferDialog()}},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleTransferDialog=function(e){e&&e.preventDefault(),n.setState({isTransferDialogOpen:!n.state.isTransferDialogOpen})},n.deleteGroup=function(){n.props.deleteGroup(n.props.item.id)},n.transferGroup=function(e){n.props.transferGroup(n.props.item.id,e)},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(j.pb)("Delete");break;case"Transfer":t=Object(j.pb)("Transfer")}return t},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=t.isTransferDialogOpen,i='<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>",s=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",i),o=0==e.parent_group_id?"".concat(j.qc,"sys/groups/").concat(e.id,"/libraries/"):"".concat(j.qc,"sys/departments/").concat(e.id,"/");return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)(g.a,{to:o,children:e.name})}),Object(O.jsx)("td",{children:"system admin"==e.owner?"--":Object(O.jsx)(Ie,{email:e.owner,name:e.owner_name})}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{title:L()(e.created_at).format("llll"),children:L()(e.created_at).fromNow()})}),Object(O.jsx)("td",{children:a&&"system admin"!=e.owner&&Object(O.jsx)(at.a,{operations:["Delete","Transfer"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Group"),message:s,executeOperation:this.deleteGroup,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&Object(O.jsx)(Ma,{groupName:e.name,transferGroup:this.transferGroup,toggleDialog:this.toggleTransferDialog})]})}}]),a}(c.Component),La=_a,Ta=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleCreateGroupDialog=function(){n.setState({isCreateGroupDialogOpen:!n.state.isCreateGroupDialogOpen})},n.getGroupListByPage=function(e){P.b.sysAdminListAllGroups(e,n.state.perPage).then((function(e){n.setState({loading:!1,groupList:e.data.groups,pageInfo:e.data.page_info})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getGroupListByPage(1)}))},n.createGroup=function(e,t){P.b.sysAdminCreateNewGroup(e,t).then((function(e){var t=n.state.groupList;t.unshift(e.data),n.setState({groupList:t}),n.toggleCreateGroupDialog()})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteGroup=function(e){P.b.sysAdminDismissGroupByID(e).then((function(t){var a=n.state.groupList.filter((function(t){return t.id!=e}));n.setState({groupList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.transferGroup=function(e,t){P.b.sysAdminTransferGroup(t,e).then((function(t){var a=n.state.groupList.map((function(a){return a.id==e&&(a=t.data),a}));n.setState({groupList:a}),w.a.success(Object(j.pb)("Successfully transferred the group."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.getSearch=function(){return Object(O.jsx)(Je,{placeholder:Object(j.pb)("Search groups by name"),submit:n.searchGroups})},n.searchGroups=function(e){Object(g.c)("".concat(j.qc,"sys/search-groups/?name=").concat(encodeURIComponent(e)))},n.state={loading:!0,errorMsg:"",groupList:[],pageInfo:{},perPage:25,isCreateGroupDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getGroupListByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isCreateGroupDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({search:this.getSearch()},this.props),{},{children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(D.a,{className:"operation-item",onClick:this.toggleCreateGroupDialog,children:Object(j.pb)("New Group")}),Object(O.jsx)("a",{className:"btn btn-secondary operation-item",href:"".concat(j.qc,"sys/groupadmin/export-excel/"),children:Object(j.pb)("Export Excel")})]})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Groups")})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(La,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,pageInfo:this.state.pageInfo,deleteGroup:this.deleteGroup,transferGroup:this.transferGroup,getListByPage:this.getGroupListByPage,resetPerPage:this.resetPerPage,curPerPage:this.state.perPage})})]})}),e&&Object(O.jsx)(Na,{createGroup:this.createGroup,toggleDialog:this.toggleCreateGroupDialog})]})}}]),a}(c.Component),Fa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getGroups=function(){var e=n.state.name;P.b.sysAdminSearchGroups(e).then((function(e){n.setState({loading:!1,groupList:e.data.group_list})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.deleteGroup=function(e){P.b.sysAdminDismissGroupByID(e).then((function(t){var a=n.state.groupList.filter((function(t){return t.id!=e}));n.setState({groupList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.transferGroup=function(e,t){P.b.sysAdminTransferGroup(t,e).then((function(t){var a=n.state.groupList.map((function(a){return a.id==e&&(a=t.data),a}));n.setState({groupList:a}),w.a.success(Object(j.pb)("Successfully transferred the group."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.handleNameInputChange=function(e){n.setState({name:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.name;n.setState({isSubmitBtnActive:e.trim()})},n.handleKeyDown=function(e){13===e.keyCode&&(n.state.isSubmitBtnActive&&n.getGroups())},n.state={name:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",groupList:[],pageInfo:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({name:e.get("name")||""},this.getGroups)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.isSubmitBtnActive;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Groups")})}),Object(O.jsxs)("div",{className:"cur-view-content",children:[Object(O.jsxs)("div",{className:"mt-4 mb-6",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.pb)("Search Groups")}),Object(O.jsx)("p",{className:"text-secondary small",children:Object(j.pb)("Tip: you can search by keyword in name.")}),Object(O.jsxs)(Ae.a,{tag:"div",children:[Object(O.jsxs)(Le.a,{row:!0,children:[Object(O.jsx)(Ve.a,{for:"name",sm:1,children:Object(j.pb)("Name")}),Object(O.jsx)(Ot.a,{sm:5,children:Object(O.jsx)(ne.a,{type:"text",name:"name",id:"name",value:t,onChange:this.handleNameInputChange,onKeyDown:this.handleKeyDown})})]}),Object(O.jsx)(Le.a,{row:!0,children:Object(O.jsx)(Ot.a,{sm:{size:5,offset:1},children:Object(O.jsx)("button",{className:"btn btn-outline-primary",disabled:!a,onClick:this.getGroups,children:Object(j.pb)("Submit")})})})]})]}),Object(O.jsxs)("div",{className:"mt-4 mb-6",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.pb)("Result")}),Object(O.jsx)(La,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,deleteGroup:this.deleteGroup,transferGroup:this.transferGroup})]})]})]})})]})}}]),a}(c.Component),Ra=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"repos",urlPart:"groups/"+n.props.groupID+"/libraries",text:Object(j.pb)("Libraries")},{name:"members",urlPart:"groups/"+n.props.groupID+"/members",text:Object(j.pb)("Members")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.groupName,a=e.currentItem;return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsxs)("h3",{className:"sf-heading",children:[Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/groups/"),children:Object(j.pb)("Groups")})," / ",t]})}),Object(O.jsx)("ul",{className:"nav border-bottom mx-4",children:this.navItems.map((function(e,t){return Object(O.jsx)("li",{className:"nav-item mr-2",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/").concat(e.urlPart,"/"),className:"nav-link ".concat(a==e.name?" active":""),children:e.text})},t)}))})]})}}]),a}(l.a.Component),Ua=window.sysadmin.pageOptions.enableSysAdminViewRepo,Ea=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No libraries")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Size")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Shared By")}),Object(O.jsx)("th",{width:"10%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Ba,{item:t,unshareRepo:e.props.unshareRepo},a)}))})]})});return r.length?s:i}}]),a}(c.Component),Ba=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleUnshareRepoDialog=function(e){e&&e.preventDefault(),n.setState({isUnshareRepoDialogOpen:!n.state.isUnshareRepoDialogOpen})},n.unshareRepo=function(){var e=n.props.item;n.props.unshareRepo(e.repo_id,e.name),n.toggleUnshareRepoDialog()},n.renderRepoName=function(){var e=n.props.item,t=e;return t.id=e.repo_id,t.name?j.Ab&&Ua&&!t.encrypted?Object(O.jsx)("a",{href:"".concat(j.qc,"sys/libraries/").concat(t.id,"/"),children:t.name}):t.name:"--"},n.state={isOpIconShown:!1,isUnshareRepoDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,a=e.isUnshareRepoDialogOpen,n=this.props.item,r=m.a.getLibIconUrl(n),i=m.a.getLibIconTitle(n),s='<span class="op-target">'+m.a.HTMLescape(n.name)+"</span>",o=Object(j.pb)("Are you sure you want to unshare {placeholder} ?").replace("{placeholder}",s);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:r,title:i,alt:i,width:"24"})}),Object(O.jsx)("td",{children:this.renderRepoName()}),Object(O.jsx)("td",{children:m.a.bytesToSize(n.size)}),Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:n.shared_by,name:n.shared_by_name})}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"#",className:"action-icon sf2-icon-x3 ".concat(t?"":"invisible"),title:Object(j.pb)("Unshare"),onClick:this.toggleUnshareRepoDialog})})]}),a&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Unshare Library"),message:o,executeOperation:this.unshareRepo,confirmBtnText:Object(j.pb)("Unshare"),toggleDialog:this.toggleUnshareRepoDialog})]})}}]),a}(c.Component),za=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).unshareRepo=function(e,t){P.b.sysAdminUnshareRepoFromGroup(n.props.groupID,e).then((function(a){var r=n.state.repoList.filter((function(t){return t.repo_id!=e}));n.setState({repoList:r});var i=Object(j.pb)("Successfully unshared library {placeholder}").replace("{placeholder}",t);w.a.success(i)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",groupName:"",repoList:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminListGroupRepos(this.props.groupID).then((function(t){e.setState({loading:!1,repoList:t.data.libraries,groupName:t.data.group_name})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Ra,{groupID:this.props.groupID,groupName:this.state.groupName,currentItem:"repos"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Ea,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,unshareRepo:this.unshareRepo})})]})})]})}}]),a}(c.Component),Va=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSelectChange=function(e){n.setState({selectedOptions:e,isSubmitBtnDisabled:!e.length})},n.addMembers=function(){var e=n.state.selectedOptions.map((function(e){return e.email}));n.props.addMembers(e),n.props.toggle()},n.state={selectedOptions:null,isSubmitBtnDisabled:!0},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.isSubmitBtnDisabled;return Object(O.jsxs)(b.a,{isOpen:!0,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("Add Member")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ge.a,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:Object(j.pb)("Search users..."),onSelectChange:this.handleSelectChange})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.addMembers,disabled:e,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),qa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).translateRoles=function(e){switch(e){case"Member":return Object(j.pb)("Member");case"Admin":return Object(j.pb)("Admin");default:return e}},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)(qe.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.roleOptions,currentOption:this.props.currentRole,onOptionChanged:this.props.onRoleChanged,translateOption:this.translateRoles})}}]),a}(l.a.Component),Wa=qa,Ha=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.pageInfo,s=t.curPerPage;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No members")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"55%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Role")}),Object(O.jsx)("th",{width:"10%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Ya,{item:t,removeMember:e.props.removeMember,updateMemberRole:e.props.updateMemberRole},a)}))})]}),i&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:i.current_page,hasNextPage:i.has_next_page,curPerPage:s,resetPerPage:this.props.resetPerPage})]});return r.length?l:o}}]),a}(c.Component),Ya=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.removeMember=function(){var e=n.props.item;n.props.removeMember(e.email,e.name),n.toggleDeleteDialog()},n.updateMemberRole=function(e){n.props.updateMemberRole(n.props.item.email,e)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,a=e.isDeleteDialogOpen,n=this.props.item,r='<span class="op-target">'+m.a.HTMLescape(n.name)+"</span>",i=Object(j.pb)("Are you sure you want to remove {placeholder} ?").replace("{placeholder}",r);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:n.avatar_url,alt:"",className:"rounded-circle",width:"24"})}),Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:n.email,name:n.name})}),Object(O.jsx)("td",{children:"Owner"==n.role?Object(j.pb)("Owner"):Object(O.jsx)(Wa,{isTextMode:!0,isEditIconShow:t,roleOptions:["Member","Admin"],currentRole:n.role,onRoleChanged:this.updateMemberRole})}),Object(O.jsx)("td",{children:"Owner"!=n.role&&Object(O.jsx)("a",{href:"#",className:"action-icon sf2-icon-x3 ".concat(t?"":"invisible"),title:Object(j.pb)("Remove"),onClick:this.toggleDeleteDialog})})]}),a&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Remove Member"),message:i,executeOperation:this.removeMember,confirmBtnText:Object(j.pb)("Remove"),toggleDialog:this.toggleDeleteDialog})]})}}]),a}(c.Component),Ga=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getListByPage=function(e){var t=n.state.perPage;P.b.sysAdminListGroupMembers(n.props.groupID,e,t).then((function(e){n.setState({loading:!1,memberList:e.data.members,groupName:e.data.group_name,pageInfo:e.data.page_info})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getListByPage(1)}))},n.toggleAddMemgerDialog=function(){n.setState({isAddMemberDialogOpen:!n.state.isAddMemberDialogOpen})},n.addMembers=function(e){P.b.sysAdminAddGroupMember(n.props.groupID,e).then((function(e){var t=e.data.success;t.length&&(n.setState({memberList:t.concat(n.state.memberList)}),t.map((function(e){var t=Object(j.pb)("Successfully added {email_placeholder}").replace("{email_placeholder}",e.email);w.a.success(t)}))),e.data.failed.map((function(e){var t=Object(j.pb)("Failed to add {email_placeholder}: {error_msg_placeholder}").replace("{email_placeholder}",e.email).replace("{error_msg_placeholder}",e.error_msg);w.a.danger(t,{duration:3})}))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.removeMember=function(e,t){P.b.sysAdminDeleteGroupMember(n.props.groupID,e).then((function(a){var r=n.state.memberList.filter((function(t){return t.email!=e}));n.setState({memberList:r}),w.a.success(Object(j.pb)("Successfully removed {placeholder}.").replace("{placeholder}",t))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateMemberRole=function(e,t){var a="Admin"==t;P.b.sysAdminUpdateGroupMemberRole(n.props.groupID,e,a).then((function(a){var r=n.state.memberList.map((function(a){return a.email==e&&(a.role=t),a}));n.setState({memberList:r})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",groupName:"",memberList:[],pageInfo:{},currentPage:1,perPage:25,isAddMemberDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({currentPage:parseInt(t.get("page")||n),perPage:parseInt(t.get("per_page")||r)},(function(){e.getListByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isAddMemberDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleAddMemgerDialog,children:Object(j.pb)("Add Member")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Ra,{currentItem:"members",groupID:this.props.groupID,groupName:this.state.groupName}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Ha,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.memberList,removeMember:this.removeMember,updateMemberRole:this.updateMemberRole,pageInfo:this.state.pageInfo,curPerPage:this.state.perPage,getListByPage:this.getListByPage,resetPerPage:this.resetPerPage})})]})}),e&&Object(O.jsx)(Va,{addMembers:this.addMembers,toggle:this.toggleAddMemgerDialog})]})}}]),a}(c.Component),Qa=(a(180),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"h-100 org-departments",children:this.props.children})}}]),a}(l.a.Component)),Ka=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){if(n.validateName()){var e=-1;n.props.parentGroupID&&(e=n.props.parentGroupID),P.b.sysAdminAddNewDepartment(e,n.state.departName.trim()).then((function(e){n.props.toggle(),n.props.onAddNewDepartment(e.data)})).catch((function(e){var t=Object(j.pb)(e.response.data.error_msg);n.setState({errMessage:t})}))}},n.validateName=function(){var e="";return!!n.state.departName.trim().length||(e=Object(j.pb)("Name is required"),n.setState({errMessage:e}),!1)},n.handleChange=function(e){n.setState({departName:e.target.value})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.state={departName:"",errMessage:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.parentGroupID?Object(j.pb)("New Sub-department"):Object(j.pb)("New Department");return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:e}),Object(O.jsxs)(_e.a,{children:[Object(O.jsx)(Ae.a,{children:Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{for:"departName",children:Object(j.pb)("Name")}),Object(O.jsx)(ne.a,{id:"departName",onKeyPress:this.handleKeyPress,value:this.state.departName,onChange:this.handleChange,autoFocus:!0})]})}),this.state.errMessage&&Object(O.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Za=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){n.validateName()&&P.b.sysAdminRenameDepartment(n.props.groupID,n.state.departmentName.trim()).then((function(e){n.props.toggle(),n.props.onDepartmentNameChanged(e.data),w.a.success(Object(j.pb)("Success"))})).catch((function(e){var t=m.a.getErrorMsg(e);n.setState({errMessage:t})}))},n.validateName=function(){var e="";return!!n.state.departmentName.trim().length||(e=Object(j.pb)("Name is required"),n.setState({errMessage:e}),!1)},n.handleChange=function(e){n.setState({departmentName:e.target.value})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.onAfterModelOpened=function(){n.newInput.current&&(n.newInput.current.focus(),n.newInput.current.select())},n.state={departmentName:n.props.name,errMessage:""},n.newInput=l.a.createRef(),n}return Object(i.a)(a,[{key:"render",value:function(){var e=Object(j.pb)("Rename Department");return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,onOpened:this.onAfterModelOpened,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:e}),Object(O.jsxs)(_e.a,{children:[Object(O.jsx)(Ae.a,{children:Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{for:"departmentName",children:Object(j.pb)("Name")}),Object(O.jsx)(ne.a,{id:"departmentName",onKeyPress:this.handleKeyPress,value:this.state.departmentName,onChange:this.handleChange,innerRef:this.newInput})]})}),this.state.errMessage&&Object(O.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Xa=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).deleteDepart=function(){n.props.toggle();var e=n.props.group;P.b.sysAdminDeleteDepartment(e.id).then((function(t){n.props.onDeleteDepartment(e.id)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.group,t=Object(j.pb)("Are you sure you want to delete {placeholder} ?");return t=t.replace("{placeholder}",'<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>"),Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("Delete Department")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)("p",{dangerouslySetInnerHTML:{__html:t}})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.deleteDepart,children:Object(j.pb)("Delete")})]})]})}}]),a}(l.a.Component),Ja=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).setGroupQuota=function(){var e=n.state.quota;if(e.length&&/^[1-9]\d*$/im.test(e)||-2==e){n.setState({errMessage:""});var t=-2==n.state.quota?n.state.quota:1e6*n.state.quota;P.b.sysAdminUpdateDepartmentQuota(n.props.groupID,t).then((function(e){n.props.toggle(),n.props.onSetQuota(e.data)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))}else{var a=Object(j.pb)("Quota is invalid.");n.setState({errMessage:a})}},n.handleChange=function(e){var t=e.target.value.trim();n.setState({quota:t})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.setGroupQuota(),e.preventDefault())},n.state={quota:"",errMessage:""},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("Set Quota")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsxs)(Te.a,{children:[Object(O.jsx)(ne.a,{onKeyPress:this.handleKeyPress,value:this.state.quota,onChange:this.handleChange,autoFocus:!0}),Object(O.jsx)(Fe.a,{addonType:"append",children:"MB"})]}),Object(O.jsxs)("p",{className:"tip",children:[Object(O.jsx)("br",{}),Object(O.jsx)("span",{children:Object(j.pb)("An integer that is greater than 0 or equal to -2.")}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{children:Object(j.pb)("Tip: -2 means no limit.")})]}),this.state.errMessage&&Object(O.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.setGroupQuota,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),$a=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseOut=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.translateOperations=function(e){var t="";switch(e){case"Rename":t=Object(j.pb)("Rename");break;case"Delete":t=Object(j.pb)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"Rename":n.toggleRenameDialog();break;case"Delete":n.toggleDeleteDialog()}},n.toggleRenameDialog=function(){n.setState({isRenameDialogOpen:!n.state.isRenameDialogOpen})},n.toggleDeleteDialog=function(){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.state={isOpIconShown:!1,highlight:!1,isSetQuotaDialogOpen:!1,isDeleteDialogOpen:!1,isRenameDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.group,t=this.state,a=t.highlight,n=t.isOpIconShown,r=t.isRenameDialogOpen,i=t.isDeleteDialogOpen,s=t.isSetQuotaDialogOpen,o=j.qc+"sys/departments/"+e.id+"/";return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)(g.a,{to:o,children:e.name})}),Object(O.jsx)("td",{children:L()(e.created_at).fromNow()}),Object(O.jsxs)("td",{children:[m.a.bytesToSize(e.quota)," ",Object(O.jsx)("span",{onClick:this.toggleSetQuotaDialog,title:Object(j.pb)("Edit"),className:"fa fa-pencil-alt attr-action-icon ".concat(a?"":"vh")})]}),Object(O.jsx)("td",{children:n&&Object(O.jsx)(at.a,{operations:["Rename","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),i&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Xa,{group:e,onDeleteDepartment:this.props.onDeleteDepartment,toggle:this.toggleDeleteDialog})}),s&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Ja,{groupID:e.id,onSetQuota:this.props.onSetDepartmentQuota,toggle:this.toggleSetQuotaDialog})}),r&&Object(O.jsx)(Za,{groupID:e.id,name:e.name,toggle:this.toggleRenameDialog,onDepartmentNameChanged:this.props.onDepartmentNameChanged})]})}}]),a}(l.a.Component);L.a.locale(j.Db);var en=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.listDepartments=function(){P.b.sysAdminListAllDepartments().then((function(e){n.setState({groups:e.data.data})}))},n.toggleAddDepartDialog=function(){n.setState({isShowAddDepartDialog:!n.state.isShowAddDepartDialog})},n.onDepartmentNameChanged=function(e){n.setState({groups:n.state.groups.map((function(t){return t.id==e.id&&(t.name=e.name),t}))})},n.onAddNewDepartment=function(e){var t=n.state.groups;t.unshift(e),n.setState({groups:t})},n.onDeleteDepartment=function(e){var t=n.state.groups;n.setState({groups:t.filter((function(t){return t.id!=e}))})},n.onSetDepartmentQuota=function(e){var t=n.state.groups;n.setState({groups:t.map((function(t){return t.id==e.id&&(t.quota=e.quota),t}))})},n.state={groups:null,groupID:"",isShowAddDepartDialog:!1,isItemFreezed:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.listDepartments()}},{key:"render",value:function(){var e=this,t=this.state.groups,a=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("button",{className:"btn btn-secondary operation-item",title:Object(j.pb)("New Department"),onClick:this.toggleAddDepartDialog,children:Object(j.pb)("New Department")}),this.state.isShowAddDepartDialog&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Ka,{onAddNewDepartment:this.onAddNewDepartment,groupID:this.state.groupID,toggle:this.toggleAddDepartDialog})})]});return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:a})),Object(O.jsx)("div",{className:"main-panel-center flex-row h-100",children:Object(O.jsxs)("div",{className:"cur-view-container o-auto",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("div",{className:"fleft",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Departments")})})}),Object(O.jsx)("div",{className:"cur-view-content",children:t&&t.length>0?Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"40%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Created At")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Quota")}),Object(O.jsx)("th",{width:"15%"})]})}),Object(O.jsx)("tbody",{children:t.map((function(t,a){return Object(O.jsx)(c.Fragment,{children:Object(O.jsx)($a,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDepartmentNameChanged:e.onDepartmentNameChanged,onDeleteDepartment:e.onDeleteDepartment,onSetDepartmentQuota:e.onSetDepartmentQuota})},t.id)}))})]}):Object(O.jsx)("p",{className:"no-group",children:Object(j.pb)("No departments")})})]})})]})}}]),a}(l.a.Component),tn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSelectChange=function(e){n.setState({selectedOption:e})},n.handleSubmit=function(){if(n.state.selectedOption){var e=n.state.selectedOption.map((function(e){return e.email}));n.refs.orgSelect.clearSelect(),n.setState({errMessage:[]}),P.b.sysAdminAddGroupMember(n.props.groupID,e).then((function(e){n.setState({selectedOption:null}),e.data.failed.length>0&&n.setState({errMessage:e.data.failed[0].error_msg}),e.data.success.length>0&&(n.props.onAddNewMembers(e.data.success),n.props.toggle())})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))}},n.state={selectedOption:null,errMessage:""},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("Add Member")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsx)(Ge.a,{placeholder:Object(j.pb)("Search users..."),onSelectChange:this.handleSelectChange,ref:"orgSelect",isMulti:!0,className:"org-add-member-select"}),this.state.errMessage&&Object(O.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),an=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){n.validateName()&&P.b.sysAdminAddRepoInDepartment(n.props.groupID,n.state.repoName.trim()).then((function(e){n.props.toggle(),n.props.onAddNewRepo(e.data)})).catch((function(e){var t=m.a.getErrorMsg(e);n.setState({errMessage:t})}))},n.validateName=function(){var e="";return!!n.state.repoName.trim().length||(e=Object(j.pb)("Name is required"),n.setState({errMessage:e}),!1)},n.handleChange=function(e){n.setState({repoName:e.target.value})},n.handleKeyPress=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.state={repoName:"",errMessage:""},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("New Library")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsx)(Ae.a,{children:Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{for:"repoName",children:Object(j.pb)("Name")}),Object(O.jsx)(ne.a,{id:"repoName",onKeyPress:this.handleKeyPress,value:this.state.repoName,onChange:this.handleChange,autoFocus:!0})]})}),this.state.errMessage&&Object(O.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component);L.a.locale(j.Db);var nn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getDepartmentInfo=function(e){P.b.sysAdminGetDepartmentInfo(e,!0).then((function(e){n.setState({ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.onDepartmentNameChanged=function(e){n.setState({groupName:e.name})},n.toggleRenameDepartmentDialog=function(){n.setState({isShowRenameDepartmentDialog:!n.state.isShowRenameDepartmentDialog})},n.toggleAddRepoDialog=function(){n.setState({isShowAddRepoDialog:!n.state.isShowAddRepoDialog})},n.toggleAddMemberDialog=function(){n.setState({isShowAddMemberDialog:!n.state.isShowAddMemberDialog})},n.toggleAddDepartmentDialog=function(){n.setState({isShowAddDepartmentDialog:!n.state.isShowAddDepartmentDialog})},n.state={groupName:"",ancestorGroups:[],isShowAddDepartmentDialog:!1,isShowAddMemberDialog:!1,isShowRenameDepartmentDialog:!1,isShowAddRepoDialog:!1},n.navItems=[{name:"subDepartments",urlPart:"/",text:Object(j.pb)("Sub-departments")},{name:"members",urlPart:"/members/",text:Object(j.pb)("Members")},{name:"repos",urlPart:"/libraries/",text:Object(j.pb)("Libraries")}],n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.getDepartmentInfo(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&this.getDepartmentInfo(e.groupID)}},{key:"render",value:function(){var e=this.props,t=e.groupID,a=e.currentItem,r=this.state.groupName,i="btn btn-secondary operation-item",s=Object(O.jsxs)(c.Fragment,{children:[t&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("button",{className:i,title:Object(j.pb)("Rename Department"),onClick:this.toggleRenameDepartmentDialog,children:Object(j.pb)("Rename Department")}),"subDepartments"==a&&Object(O.jsx)("button",{className:i,title:Object(j.pb)("New Sub-department"),onClick:this.toggleAddDepartmentDialog,children:Object(j.pb)("New Sub-department")}),"members"==a&&Object(O.jsx)("button",{className:i,title:Object(j.pb)("Add Member"),onClick:this.toggleAddMemberDialog,children:Object(j.pb)("Add Member")}),"repos"==a&&Object(O.jsx)("button",{className:i,onClick:this.toggleAddRepoDialog,title:Object(j.pb)("New Library"),children:Object(j.pb)("New Library")})]}),this.state.isShowRenameDepartmentDialog&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Za,{groupID:t,name:r,toggle:this.toggleRenameDepartmentDialog,onDepartmentNameChanged:this.onDepartmentNameChanged})}),this.state.isShowAddMemberDialog&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(tn,{toggle:this.toggleAddMemberDialog,onAddNewMembers:this.props.onAddNewMembers,groupID:t})}),this.state.isShowAddRepoDialog&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(an,{toggle:this.toggleAddRepoDialog,onAddNewRepo:this.props.onAddNewRepo,groupID:t})}),this.state.isShowAddDepartmentDialog&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Ka,{onAddNewDepartment:this.props.onAddNewDepartment,parentGroupID:t,toggle:this.toggleAddDepartmentDialog})})]});return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:s})),Object(O.jsx)("div",{className:"main-panel-center flex-row h-100",children:Object(O.jsxs)("div",{className:"cur-view-container o-auto",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("div",{className:"fleft",children:Object(O.jsxs)("h3",{className:"sf-heading",children:[t?Object(O.jsx)(g.a,{to:j.qc+"sys/departments/",children:Object(j.pb)("Departments")}):Object(O.jsx)("span",{children:Object(j.pb)("Departments")}),this.state.ancestorGroups.map((function(e){var t=j.qc+"sys/departments/"+e.id+"/";return Object(O.jsxs)("span",{children:[" / ",Object(O.jsx)(g.a,{to:t,children:e.name})]},e.id)})),t&&Object(O.jsxs)("span",{children:[" / ",r]})]})})}),Object(O.jsx)("ul",{className:"nav border-bottom mx-4",children:this.navItems.map((function(e,n){return Object(O.jsx)("li",{className:"nav-item mr-2",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/departments/").concat(t).concat(e.urlPart),className:"nav-link ".concat(a==e.name?" active":""),children:e.text})},n)}))}),this.props.children]})})]})}}]),a}(l.a.Component);L.a.locale(j.Db);var rn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).listSubDepartments=function(e){P.b.sysAdminGetDepartmentInfo(e,!0).then((function(e){n.setState({groups:e.data.groups})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.onSubDepartmentNameChanged=function(e){n.setState({groups:n.state.groups.map((function(t){return t.id==e.id&&(t.name=e.name),t}))})},n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.onAddNewDepartment=function(e){var t=n.state.groups;t.unshift(e),n.setState({groups:t})},n.onDeleteDepartment=function(e){var t=n.state.groups;n.setState({groups:t.filter((function(t){return t.id!=e}))})},n.onSetDepartmentQuota=function(e){var t=n.state.groups;n.setState({groups:t.map((function(t){return t.id==e.id&&(t.quota=e.quota),t}))})},n.state={isItemFreezed:!1,groups:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.listSubDepartments(this.props.groupID)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&this.listSubDepartments(e.groupID)}},{key:"render",value:function(){var e=this,t=this.state.groups,a=this.props.groupID;return Object(O.jsx)(nn,{groupID:a,currentItem:"subDepartments",onAddNewDepartment:this.onAddNewDepartment,children:Object(O.jsx)("div",{className:"cur-view-content",children:t&&t.length>0?Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"40%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Created At")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Quota")}),Object(O.jsx)("th",{width:"15%"})]})}),Object(O.jsx)("tbody",{children:t.map((function(t,a){return Object(O.jsx)($a,{isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDepartmentNameChanged:e.onSubDepartmentNameChanged,group:t,onDeleteDepartment:e.onDeleteDepartment,onSetDepartmentQuota:e.onSetDepartmentQuota},t.id)}))})]}):Object(O.jsx)("p",{className:"no-group",children:Object(j.pb)("No sub-departments")})})})}}]),a}(l.a.Component),sn=a(46),on=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).deleteMember=function(){var e=n.props.member.email;P.b.sysAdminDeleteGroupMember(n.props.groupID,e).then((function(e){e.data.success&&(n.props.onMemberChanged(),n.props.toggle())})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n}return Object(i.a)(a,[{key:"render",value:function(){var e=Object(j.pb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+m.a.HTMLescape(this.props.member.name)+"</span>"),Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("Delete Member")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.deleteMember,children:Object(j.pb)("Delete")})]})]})}}]),a}(l.a.Component),cn=a(295),ln=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onMouseEnter=function(){n.props.isItemFreezed||n.setState({highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({highlight:!1})},n.toggleMemberRoleMenu=function(){n.setState({showRoleMenu:!n.state.showRoleMenu})},n.onChangeUserRole=function(e){var t="Admin"===e;P.b.sysAdminUpdateGroupMemberRole(n.props.groupID,n.props.member.email,t).then((function(e){n.props.onMemberChanged()})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)})),n.setState({highlight:!1})},n.state={highlight:!1,showRoleMenu:!1},n.roles=["Admin","Member"],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.member,t=this.state.highlight;return"Owner"===e.role?null:Object(O.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:e.avatar_url,alt:"member-header",width:"24",className:"avatar"})}),Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsx)("td",{children:Object(O.jsx)(cn.a,{isTextMode:!0,isEditIconShow:t,currentRole:e.role,roles:this.roles,onRoleChanged:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})}),this.props.isItemFreezed?Object(O.jsx)("td",{}):Object(O.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteMemberDialog.bind(this,e),children:Object(O.jsx)("span",{className:"sf2-icon-x3 action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),a}(l.a.Component);L.a.locale(j.Db);var dn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).listMembers=function(e,t,a){P.b.sysAdminListGroupMembers(e,t,a).then((function(e){n.setState({members:e.data.members,currentPageInfo:e.data.page_info})})).catch((function(e){var t=m.a.getErrorMsg(e);n.setState({membersErrorMsg:t})}))},n.getPreviousPageList=function(){n.listMembers(n.props.groupID,n.state.currentPageInfo.current_page-1,n.state.perPage)},n.getNextPageList=function(){n.listMembers(n.props.groupID,n.state.currentPageInfo.current_page+1,n.state.perPage)},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.listMembers(n.props.groupID,1,e)}))},n.toggleCancel=function(){n.setState({showDeleteMemberDialog:!1})},n.onMemberChanged=function(){n.listMembers(n.props.groupID,n.state.currentPageInfo.current_page,n.state.perPage)},n.toggleItemFreezed=function(e){n.setState({isItemFreezed:e})},n.showDeleteMemberDialog=function(e){n.setState({showDeleteMemberDialog:!0,deletedMember:e})},n.onAddNewMembers=function(e){var t=n.state.members;t.unshift.apply(t,Object(sn.a)(e)),n.setState({members:t})},n.state={isItemFreezed:!1,members:[],membersErrorMsg:"",currentPageInfo:{},currentPage:1,perPage:25,deletedMember:{},showDeleteMemberDialog:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){var t=e.props.groupID;e.listMembers(t,e.state.currentPage,e.state.perPage)}))}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&this.listMembers(e.groupID,this.state.currentPage,this.state.perPage)}},{key:"render",value:function(){var e=this,t=this.state,a=t.members,n=t.membersErrorMsg,r=this.props.groupID;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(nn,{groupID:r,currentItem:"members",onAddNewMembers:this.onAddNewMembers,children:Object(O.jsx)("div",{className:"cur-view-content",children:n?Object(O.jsx)("p",{className:"error text-center",children:n}):0==a.length?Object(O.jsx)("p",{className:"no-member",children:Object(j.pb)("No members")}):Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"50%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Role")}),Object(O.jsx)("th",{width:"30%"})]})}),Object(O.jsx)("tbody",{children:a.map((function(t,a){return Object(O.jsx)(c.Fragment,{children:Object(O.jsx)(ln,{member:t,showDeleteMemberDialog:e.showDeleteMemberDialog,isItemFreezed:e.state.isItemFreezed,onMemberChanged:e.onMemberChanged,toggleItemFreezed:e.toggleItemFreezed,groupID:r})},a)}))})]}),this.state.currentPageInfo&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:this.state.currentPageInfo.current_page,hasNextPage:this.state.currentPageInfo.has_next_page,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage})]})})}),this.state.showDeleteMemberDialog&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(on,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:r})})]})}}]),a}(l.a.Component),un=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).deleteRepo=function(){P.b.sysAdminDeleteRepoInDepartment(n.props.groupID,n.props.repo.repo_id).then((function(e){e.data.success&&(n.props.onRepoChanged(),n.props.toggle())})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.repo,t=Object(j.pb)("Are you sure you want to delete {placeholder} ?");return t=t.replace("{placeholder}",'<span class="op-target">'+m.a.HTMLescape(e.name||e.repo_name)+"</span>"),Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("Delete Library")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.deleteRepo,children:Object(j.pb)("Delete")})]})]})}}]),a}(l.a.Component),hn=window.sysadmin.pageOptions.enableSysAdminViewRepo,pn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onMouseEnter=function(){n.setState({highlight:!0})},n.onMouseLeave=function(){n.setState({highlight:!1})},n.state={highlight:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.repo,t=e.name||e.repo_name,a=this.state.highlight,n=m.a.getLibIconUrl(e);return Object(O.jsxs)("tr",{className:a?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:n,width:"24",alt:Object(j.pb)("icon")})}),hn?Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"".concat(j.qc,"sys/libraries/").concat(e.repo_id,"/").concat(encodeURIComponent(t),"/"),children:t})}):Object(O.jsx)("td",{children:t}),Object(O.jsx)("td",{children:m.a.bytesToSize(e.size)}),Object(O.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteRepoDialog.bind(this,e),children:Object(O.jsx)("span",{className:"sf2-icon-delete action-icon ".concat(a?"":"vh"),title:"Delete"})})]})}}]),a}(l.a.Component);L.a.locale(j.Db);var bn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).listGroupRepo=function(e){P.b.sysAdminListGroupRepos(e).then((function(e){n.setState({repos:e.data.libraries})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.toggleCancel=function(){n.setState({showDeleteRepoDialog:!1})},n.onRepoChanged=function(){n.listGroupRepo(n.props.groupID)},n.showDeleteRepoDialog=function(e){n.setState({showDeleteRepoDialog:!0,deletedRepo:e})},n.onAddNewRepo=function(e){var t=n.state.repos;t.unshift(e),n.setState({repos:t})},n.state={repos:[],deletedRepo:{},showDeleteRepoDialog:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listGroupRepo(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&this.listGroupRepo(e.groupID)}},{key:"render",value:function(){var e=this,t=this.state.repos,a=this.props.groupID;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(nn,{groupID:a,currentItem:"repos",onAddNewRepo:this.onAddNewRepo,children:t.length>0?Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"50%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Size")}),Object(O.jsx)("th",{width:"15%"})]})}),Object(O.jsx)("tbody",{children:t.map((function(t,a){return Object(O.jsx)(pn,{repo:t,showDeleteRepoDialog:e.showDeleteRepoDialog},a)}))})]})}):Object(O.jsx)("p",{className:"no-libraty",children:Object(j.pb)("No libraries")})}),this.state.showDeleteRepoDialog&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(un,{toggle:this.toggleCancel,onRepoChanged:this.onRepoChanged,repo:this.state.deletedRepo,groupID:a})})]})}}]),a}(l.a.Component),gn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"shareLinks",urlPart:"share-links",text:Object(j.pb)("Share Links")},{name:"uploadLinks",urlPart:"upload-links",text:Object(j.pb)("Upload Links")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return Object(O.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(O.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,a){return Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},a)}))})})}}]),a}(l.a.Component),jn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getShareLinksByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getShareLinksByPage(n.props.currentPage+1)},n.sortByTime=function(e){e.preventDefault(),n.props.sortItems("ctime")},n.sortByCount=function(e){e.preventDefault(),n.props.sortItems("view_cnt")},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.perPage,s=t.currentPage,o=t.hasNextPage,l=t.sortBy,d=t.sortOrder;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center",children:n});var u=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No share links")})}),h=Object(O.jsx)("span",{className:"fas fa-sort"}),p=Object(O.jsx)("span",{className:"fas ".concat("asc"==d?"fa-caret-up":"fa-caret-down")}),b=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"18%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"18%",children:Object(j.pb)("Token")}),Object(O.jsx)("th",{width:"18%",children:Object(j.pb)("Owner")}),Object(O.jsx)("th",{width:"15%",children:Object(O.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByTime,children:[Object(j.pb)("Created At")," ","ctime"==l?p:h]})}),Object(O.jsx)("th",{width:"10%",children:Object(O.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByCount,children:[Object(j.pb)("Count")," ","view_cnt"==l?p:h]})}),Object(O.jsx)("th",{width:"11%",children:Object(j.pb)("Expiration")}),Object(O.jsx)("th",{width:"10%"})]})}),r&&Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(mn,{item:t,deleteShareLink:e.props.deleteShareLink},a)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:s,hasNextPage:o,curPerPage:i,resetPerPage:this.props.resetPerPage})]});return r.length?b:u}}]),a}(c.Component),mn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.deleteShareLink=function(){n.props.deleteShareLink(n.props.item.token)},n.renderExpiration=function(){var e=n.props.item;if(!e.expire_date)return"--";var t=L()(e.expire_date).format("YYYY-MM-DD"),a=L()(e.expire_date).format("YYYY-MM-DD HH:mm:ss");return Object(O.jsx)("span",{className:e.is_expired?"error":"",title:a,children:t})},n.state={isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.isOpIconShown,t=this.props.item,a="action-icon sf2-icon-delete ".concat(e?"":"invisible");return Object(O.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(O.jsx)("td",{children:t.obj_name}),Object(O.jsx)("td",{children:t.token}),Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:t.creator_email,name:t.creator_name})}),Object(O.jsx)("td",{children:L()(t.ctime).fromNow()}),Object(O.jsx)("td",{children:t.view_cnt}),Object(O.jsx)("td",{children:this.renderExpiration()}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"#",className:a,title:Object(j.pb)("Remove"),onClick:this.deleteShareLink})})]})}}]),a}(c.Component),fn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getShareLinksByPage=function(e){var t=n.state,a=t.perPage,r=t.sortBy,i=t.sortOrder;P.b.sysAdminListShareLinks(e,a,r,i).then((function(t){n.setState({shareLinkList:t.data.share_link_list,loading:!1,currentPage:e,hasNextPage:m.a.hasNextPage(e,a,t.data.count)})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.sortItems=function(e){n.setState({currentPage:1,sortBy:e,sortOrder:"asc"==n.state.sortOrder?"desc":"asc"},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=n.state,r=a.currentPage,i=a.sortBy,s=a.sortOrder;t.set("page",r),t.set("order_by",i),t.set("direction",s),e.search=t.toString(),Object(g.c)(e.toString()),n.getShareLinksByPage(r)}))},n.deleteShareLink=function(e){P.b.sysAdminDeleteShareLink(e).then((function(t){var a=n.state.shareLinkList.filter((function(t){return t.token!=e}));n.setState({shareLinkList:a})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getShareLinksByPage(n.initPage)}))},n.state={loading:!0,errorMsg:"",shareLinkList:[],perPage:25,currentPage:1,hasNextPage:!1,sortBy:"",sortOrder:"asc"},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage,i=a.sortBy,s=a.sortOrder;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n),sortBy:t.get("order_by")||i,sortOrder:t.get("direction")||s},(function(){e.getShareLinksByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.shareLinkList,a=e.currentPage,r=e.perPage,i=e.hasNextPage;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(gn,{currentItem:"shareLinks"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(jn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:r,hasNextPage:i,getShareLinksByPage:this.getShareLinksByPage,resetPerPage:this.resetPerPage,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,deleteShareLink:this.deleteShareLink})})]})})]})}}]),a}(c.Component),On=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getUploadLinksByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getUploadLinksByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.perPage,s=t.currentPage,o=t.hasNextPage;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center",children:n});var l=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No upload links")})}),d=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"18%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"18%",children:Object(j.pb)("Token")}),Object(O.jsx)("th",{width:"18%",children:Object(j.pb)("Owner")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Created At")}),Object(O.jsx)("th",{width:"10%",children:Object(j.pb)("Count")}),Object(O.jsx)("th",{width:"11%",children:Object(j.pb)("Expiration")}),Object(O.jsx)("th",{width:"10%"})]})}),r&&Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(vn,{item:t,deleteUploadLink:e.props.deleteUploadLink},a)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:s,hasNextPage:o,curPerPage:i,resetPerPage:this.props.resetPerPage})]});return r.length?d:l}}]),a}(c.Component),vn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.deleteUploadLink=function(){n.props.deleteUploadLink(n.props.item.token)},n.renderExpiration=function(){var e=n.props.item;if(!e.expire_date)return"--";var t=L()(e.expire_date).format("YYYY-MM-DD"),a=L()(e.expire_date).format("YYYY-MM-DD HH:mm:ss");return Object(O.jsx)("span",{className:e.is_expired?"error":"",title:a,children:t})},n.state={isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.isOpIconShown,t=this.props.item,a="action-icon sf2-icon-delete ".concat(e?"":"invisible");return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(O.jsx)("td",{children:t.path}),Object(O.jsx)("td",{children:t.token}),Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:t.creator_email,name:t.creator_name})}),Object(O.jsx)("td",{children:L()(t.ctime).fromNow()}),Object(O.jsx)("td",{children:t.view_cnt}),Object(O.jsx)("td",{children:this.renderExpiration()}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"#",className:a,title:Object(j.pb)("Remove"),onClick:this.deleteUploadLink})})]})})}}]),a}(c.Component),xn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getUploadLinksByPage=function(e){var t=n.state.perPage;P.b.sysAdminListAllUploadLinks(e,t).then((function(a){n.setState({uploadLinkList:a.data.upload_link_list,loading:!1,currentPage:e,hasNextPage:m.a.hasNextPage(e,t,a.data.count)})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.deleteUploadLink=function(e){P.b.sysAdminDeleteUploadLink(e).then((function(t){var a=n.state.uploadLinkList.filter((function(t){return t.token!=e}));n.setState({uploadLinkList:a})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getUploadLinksByPage(n.initPage)}))},n.state={loading:!0,errorMsg:"",uploadLinkList:[],perPage:25,currentPage:1,hasNextPage:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getUploadLinksByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.uploadLinkList,a=e.currentPage,r=e.perPage,i=e.hasNextPage;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(gn,{currentItem:"uploadLinks"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(On,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:r,hasNextPage:i,getUploadLinksByPage:this.getUploadLinksByPage,resetPerPage:this.resetPerPage,deleteUploadLink:this.deleteUploadLink})})]})})]})}}]),a}(c.Component),yn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).checkSubmitBtnActive=function(){var e=n.state,t=e.name,a=e.email,r=e.password,i=e.passwordAgain,s=!0;s=""!=t.trim()&&""!=a.trim()&&""!=r.trim()&&""!=i.trim(),n.setState({isSubmitBtnActive:s})},n.toggle=function(){n.props.toggleDialog()},n.inputPassword=function(e){var t=e.target.value;n.setState({password:t},n.checkSubmitBtnActive)},n.inputPasswordAgain=function(e){var t=e.target.value;n.setState({passwordAgain:t},n.checkSubmitBtnActive)},n.inputEmail=function(e){var t=e.target.value;n.setState({email:t},n.checkSubmitBtnActive)},n.inputName=function(e){var t=e.target.value;n.setState({name:t},n.checkSubmitBtnActive)},n.handleSubmit=function(){var e=n.state,t=e.name,a=e.email,r=e.password;if(r==e.passwordAgain){var i={orgName:t.trim(),ownerEmail:a.trim(),password:r.trim()};n.props.addOrg(i),n.toggle()}else n.setState({errorMsg:Object(j.pb)("Passwords do not match.")})},n.state={name:"",email:"",password:"",passwordAgain:"",errorMsg:"",isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.errorMsg,a=e.password,n=e.passwordAgain,r=e.email,i=e.name,s=e.isSubmitBtnActive;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("Add Organization")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsxs)(Ae.a,{autoComplete:"off",children:[Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Name")}),Object(O.jsx)(ne.a,{value:i,onChange:this.inputName})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsxs)(Ve.a,{children:[Object(j.pb)("Owner"),Object(O.jsx)("span",{className:"small text-secondary ml-1 fas fa-question-circle",title:Object(j.pb)("Owner can use admin panel in an organization, must be a new account.")})]}),Object(O.jsx)(ne.a,{value:r,onChange:this.inputEmail})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Password")}),Object(O.jsx)(ne.a,{type:"password",value:a,onChange:this.inputPassword})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Password again")}),Object(O.jsx)(ne.a,{type:"password",value:n,onChange:this.inputPasswordAgain})]})]}),t&&Object(O.jsx)(Be.a,{color:"danger",children:t})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!s,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Sn=window.sysadmin.pageOptions.availableRoles,Dn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No organizations")})}),s=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Creator")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Role")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Space Used")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Created At")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Pn,{item:t,updateRole:e.props.updateRole,deleteOrg:e.props.deleteOrg},a)}))})]}),this.props.currentPage&&Object(O.jsx)(ce.a,{currentPage:this.props.currentPage,hasNextPage:this.props.hasNextPage,curPerPage:this.props.curPerPage,resetPerPage:this.props.resetPerPage,gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage})]});return r.length?s:i}}]),a}(c.Component),Pn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen},(function(){n.state.isDeleteDialogOpen&&P.b.sysAdminGetOrg(n.props.item.org_id).then((function(e){var t='<span class="op-target">'+m.a.HTMLescape(e.data.org_name)+"</span>",a='<span class="op-target">'+m.a.HTMLescape(e.data.users_count)+"</span>",r='<span class="op-target">'+m.a.HTMLescape(e.data.repos_count)+"</span>",i=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",t)+"<br/>"+Object(j.pb)("{userCount} user(s) and {repoCount} libraries of this organization will also be deleted.").replace("{userCount}",a).replace("{repoCount}",r);n.setState({deleteDialogMsg:i})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))}))},n.updateRole=function(e){n.props.updateRole(n.props.item.org_id,e)},n.deleteOrg=function(){w.a.notify(Object(j.pb)("It may take some time, please wait.")),n.props.deleteOrg(n.props.item.org_id)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1,deleteDialogMsg:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=t.deleteDialogMsg;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/organizations/").concat(e.org_id,"/info/"),children:e.org_name})}),Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.creator_email,name:e.creator_name})}),Object(O.jsx)("td",{children:Object(O.jsx)(He,{isTextMode:!0,isEditIconShow:a,currentRole:e.role,roleOptions:Sn,onRoleChanged:this.updateRole})}),Object(O.jsx)("td",{children:"".concat(m.a.bytesToSize(e.quota_usage)," / ").concat(e.quota>0?m.a.bytesToSize(e.quota):"--")}),Object(O.jsx)("td",{children:L()(e.ctime).format("YYYY-MM-DD HH:mm:ss")}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete ".concat(a?"":"invisible"),title:Object(j.pb)("Delete"),onClick:this.toggleDeleteDialog})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Organization"),message:r,executeOperation:this.deleteOrg,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteDialog})]})}}]),a}(c.Component),wn=Dn,In=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getItemsByPage=function(e){var t=n.state.perPage;P.b.sysAdminListOrgs(e,t).then((function(a){n.setState({loading:!1,orgList:a.data.organizations,currentPage:e,hasNextPage:m.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getItemsByPage(1)}))},n.toggleAddOrgDialog=function(){n.setState({isAddOrgDialogOpen:!n.state.isAddOrgDialogOpen})},n.updateRole=function(e,t){var a={};a.role=t,P.b.sysAdminUpdateOrg(e,a).then((function(a){var r=n.state.orgList.map((function(a){return a.org_id==e&&(a.role=t),a}));n.setState({orgList:r}),w.a.success(Object(j.pb)("Edit succeeded"))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.addOrg=function(e){var t=e.orgName,a=e.ownerEmail,r=e.password;P.b.sysAdminAddOrg(t,a,r).then((function(e){var t=n.state.orgList;t.unshift(e.data),n.setState({orgList:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteOrg=function(e){P.b.sysAdminDeleteOrg(e).then((function(t){var a=n.state.orgList.filter((function(t){return t.org_id!=e}));n.setState({orgList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.getSearch=function(){return Object(O.jsx)(Je,{placeholder:Object(j.pb)("Search organizations"),submit:n.searchItems})},n.searchItems=function(e){Object(g.c)("".concat(j.qc,"sys/search-organizations/?query=").concat(encodeURIComponent(e)))},n.state={loading:!0,errorMsg:"",orgList:[],currentPage:1,perPage:25,hasNextPage:!1,isAddOrgDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getItemsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isAddOrgDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({search:this.getSearch()},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleAddOrgDialog,children:Object(j.pb)("Add Organization")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Organizations")})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(wn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.orgList,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getItemsByPage,updateRole:this.updateRole,deleteOrg:this.deleteOrg})})]})}),e&&Object(O.jsx)(yn,{addOrg:this.addOrg,toggleDialog:this.toggleAddOrgDialog})]})}}]),a}(c.Component),kn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getItems=function(){P.b.sysAdminSearchOrgs(n.state.query.trim()).then((function(e){n.setState({loading:!1,orgList:e.data.organization_list})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.updateRole=function(e,t){var a={};a.role=t,P.b.sysAdminUpdateOrg(e,a).then((function(a){var r=n.state.orgList.map((function(a){return a.org_id==e&&(a.role=t),a}));n.setState({orgList:r}),w.a.success(Object(j.pb)("Edit succeeded"))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteOrg=function(e){P.b.sysAdminDeleteOrg(e).then((function(t){var a=n.state.orgList.filter((function(t){return t.org_id!=e}));n.setState({orgList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.handleInputChange=function(e){n.setState({query:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.query;n.setState({isSubmitBtnActive:e.trim()})},n.handleKeyDown=function(e){13===e.keyCode&&(n.state.isSubmitBtnActive&&n.getItems())},n.state={query:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",orgList:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({query:e.get("query")||""},this.getItems)}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.isSubmitBtnActive;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Organizations")})}),Object(O.jsxs)("div",{className:"cur-view-content",children:[Object(O.jsxs)("div",{className:"mt-4 mb-6",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.pb)("Search Organizations")}),Object(O.jsx)("p",{className:"text-secondary small",children:Object(j.pb)("Tip: you can search by keyword in name.")}),Object(O.jsxs)(Ae.a,{tag:"div",children:[Object(O.jsxs)(Le.a,{row:!0,children:[Object(O.jsx)(Ve.a,{for:"name",sm:1,children:Object(j.pb)("Name")}),Object(O.jsx)(Ot.a,{sm:5,children:Object(O.jsx)(ne.a,{type:"text",name:"query",id:"name",value:t,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown})})]}),Object(O.jsx)(Le.a,{row:!0,children:Object(O.jsx)(Ot.a,{sm:{size:5,offset:1},children:Object(O.jsx)("button",{className:"btn btn-outline-primary",disabled:!a,onClick:this.getItems,children:Object(j.pb)("Submit")})})})]})]}),Object(O.jsxs)("div",{className:"mt-4 mb-6",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.pb)("Result")}),Object(O.jsx)(wn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.orgList,updateRole:this.updateRole,deleteOrg:this.deleteOrg})]})]})]})})]})}}]),a}(c.Component),Cn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggle=function(){n.props.toggle()},n.handleInputChange=function(e){var t=e.target.value;n.setState({name:t,isSubmitBtnActive:""!=t.trim()})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateName(n.state.name.trim()),n.toggle()},n.state={name:n.props.name,isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.isSubmitBtnActive;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("Set Name")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ae.a,{children:Object(O.jsx)(Le.a,{children:Object(O.jsx)(ne.a,{type:"text",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})})})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!a,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Nn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggle=function(){n.props.toggle()},n.handleInputChange=function(e){var t=e.target.value;n.setState({value:t,isSubmitBtnActive:""!=t.trim()})},n.handleKeyPress=function(e){"Enter"==e.key&&(n.handleSubmit(),e.preventDefault())},n.handleSubmit=function(){n.props.updateValue(n.state.value.trim()),n.toggle()},n.state={value:n.props.value,isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.isSubmitBtnActive;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("Set max number of members")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ae.a,{children:Object(O.jsx)(Le.a,{children:Object(O.jsx)(ne.a,{type:"text",className:"form-control",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})})})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!a,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Mn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"info",urlPart:"info",text:Object(j.pb)("Info")},{name:"users",urlPart:"users",text:Object(j.pb)("Members")},{name:"groups",urlPart:"groups",text:Object(j.pb)("Groups")},{name:"repos",urlPart:"libraries",text:Object(j.pb)("Libraries")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentItem,a=e.orgID,n=e.orgName;return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsxs)("h3",{className:"sf-heading",children:[Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/organizations/"),children:Object(j.pb)("Organizations")})," / ",n]})}),Object(O.jsx)("ul",{className:"nav border-bottom mx-4",children:this.navItems.map((function(e,n){return Object(O.jsx)("li",{className:"nav-item mr-2",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/organizations/").concat(a,"/").concat(e.urlPart,"/"),className:"nav-link ".concat(t==e.name?" active":""),children:e.text})},n)}))})]})}}]),a}(l.a.Component),_n=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.toggleSetNameDialog=function(){n.setState({isSetNameDialogOpen:!n.state.isSetNameDialogOpen})},n.toggleSetMaxUserNumberDialog=function(){n.setState({isSetMaxUserNumberDialogOpen:!n.state.isSetMaxUserNumberDialogOpen})},n.showEditIcon=function(e){return Object(O.jsx)("span",{title:Object(j.pb)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},n.state={isSetQuotaDialogOpen:!1,isSetNameDialogOpen:!1,isSetMaxUserNumberDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg;e.orgInfo;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var n=this.props.orgInfo,r=n.org_name,i=n.users_count,s=n.max_user_number,o=n.groups_count,l=n.quota,d=n.quota_usage,u=this.state,h=u.isSetQuotaDialogOpen,p=u.isSetNameDialogOpen,b=u.isSetMaxUserNumberDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("dl",{className:"m-0",children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Name")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[r,this.showEditIcon(this.toggleSetNameDialog)]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Number of members")}),Object(O.jsx)("dd",{className:"info-item-content",children:i}),s&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Max number of members")}),Object(O.jsxs)("dd",{className:"info-item-content",children:[s,this.showEditIcon(this.toggleSetMaxUserNumberDialog)]})]}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Number of groups")}),Object(O.jsx)("dd",{className:"info-item-content",children:o}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Space Used")}),Object(O.jsxs)("dd",{className:"info-item-content",children:["".concat(m.a.bytesToSize(d)," / ").concat(l>0?m.a.bytesToSize(l):"--"),this.showEditIcon(this.toggleSetQuotaDialog)]})]}),h&&Object(O.jsx)(Ee,{updateQuota:this.props.updateQuota,toggle:this.toggleSetQuotaDialog}),p&&Object(O.jsx)(Cn,{name:r,updateName:this.props.updateName,toggle:this.toggleSetNameDialog}),b&&Object(O.jsx)(Nn,{value:s,updateValue:this.props.updateMaxUserNumber,toggle:this.toggleSetMaxUserNumberDialog})]})}}]),a}(c.Component),An=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).updateQuota=function(e){var t={quota:e};P.b.sysAdminUpdateOrg(n.props.orgID,t).then((function(e){var t=Object.assign(n.state.orgInfo,{quota:e.data.quota});n.setState({orgInfo:t}),w.a.success(Object(j.pb)("Successfully set quota."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateName=function(e){var t={orgName:e};P.b.sysAdminUpdateOrg(n.props.orgID,t).then((function(e){var t=Object.assign(n.state.orgInfo,{org_name:e.data.org_name});n.setState({orgInfo:t}),w.a.success(Object(j.pb)("Successfully set name."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateMaxUserNumber=function(e){var t={maxUserNumber:e};P.b.sysAdminUpdateOrg(n.props.orgID,t).then((function(e){var t=Object.assign(n.state.orgInfo,{max_user_number:e.data.max_user_number});n.setState({orgInfo:t}),w.a.success(Object(j.pb)("Successfully set max number of members."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",orgInfo:{}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetOrg(this.props.orgID).then((function(t){e.setState({loading:!1,orgInfo:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.orgInfo;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Mn,{currentItem:"info",orgID:this.props.orgID,orgName:e.org_name}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(_n,{orgID:this.props.orgID,loading:this.state.loading,errorMsg:this.state.errorMsg,orgInfo:this.state.orgInfo,updateQuota:this.updateQuota,updateName:this.updateName,updateMaxUserNumber:this.updateMaxUserNumber})})]})})]})}}]),a}(c.Component),Ln=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).translateStatus=function(e){switch(e){case"is_org_staff":return Object(j.pb)("Admin");case"not_is_org_staff":return Object(j.pb)("Member")}},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsx)(qe.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.statusOptions,currentOption:this.props.currentStatus,onOptionChanged:this.props.onStatusChanged,translateOption:this.translateStatus})}}]),a}(l.a.Component),Tn=Ln,Fn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No members")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Status")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Membership")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Space Used")}),Object(O.jsxs)("th",{width:"25%",children:[Object(j.pb)("Created At")," / ",Object(j.pb)("Last Login")]}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Rn,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,updateStatus:e.props.updateStatus,updateMembership:e.props.updateMembership,deleteUser:e.props.deleteUser},a)}))})]})});return r.length?s:i}}]),a}(c.Component),Rn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){switch(e){case"Delete":n.toggleDeleteDialog();break;case"Reset Password":n.toggleResetPasswordDialog()}},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleResetPasswordDialog=function(e){e&&e.preventDefault(),n.setState({isResetPasswordDialogOpen:!n.state.isResetPasswordDialogOpen})},n.updateStatus=function(e){n.props.updateStatus(n.props.item.email,e)},n.updateMembership=function(e){n.props.updateMembership(n.props.item.email,e)},n.deleteUser=function(){var e=n.props.item;n.props.deleteUser(e.org_id,e.email)},n.resetPassword=function(){P.b.sysAdminResetUserPassword(n.props.item.email).then((function(e){w.a.success(e.data.reset_tip)})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(j.pb)("Delete");break;case"Reset Password":t=Object(j.pb)("Reset Password")}return t},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isResetPasswordDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=t.isResetPasswordDialogOpen,i='<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>",s=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",i),o=Object(j.pb)("Are you sure you want to reset the password of {placeholder} ?").replace("{placeholder}",i);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsx)("td",{children:Object(O.jsx)(tt,{isTextMode:!0,isEditIconShow:a,currentStatus:e.active?"active":"inactive",statusOptions:["active","inactive"],onStatusChanged:this.updateStatus})}),Object(O.jsx)("td",{children:Object(O.jsx)(Tn,{isTextMode:!0,isEditIconShow:a,currentStatus:e.is_org_staff?"is_org_staff":"not_is_org_staff",statusOptions:["is_org_staff","not_is_org_staff"],onStatusChanged:this.updateMembership})}),Object(O.jsx)("td",{children:"".concat(m.a.bytesToSize(e.quota_usage)," / ").concat(e.quota_total>0?m.a.bytesToSize(e.quota_total):"--")}),Object(O.jsxs)("td",{children:[L()(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?L()(e.last_login).fromNow():"--"]}),Object(O.jsx)("td",{children:a&&e.email!=j.Cc&&Object(O.jsx)(at.a,{operations:["Delete","Reset Password"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Member"),message:s,executeOperation:this.deleteUser,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Reset Password"),message:o,executeOperation:this.resetPassword,confirmBtnText:Object(j.pb)("Reset"),toggleDialog:this.toggleResetPasswordDialog})]})}}]),a}(c.Component),Un=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleAddUserDialog=function(){n.setState({isAddUserDialogOpen:!n.state.isAddUserDialogOpen})},n.addUser=function(e){var t=e.email,a=e.name,r=e.password;P.b.sysAdminAddOrgUser(n.props.orgID,t,a,r).then((function(e){var t=n.state.userList;t.unshift(e.data),n.setState({userList:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteUser=function(e,t){P.b.sysAdminDeleteOrgUser(e,t).then((function(e){var a=n.state.userList.filter((function(e){return e.email!=t}));n.setState({userList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateStatus=function(e,t){var a="active"==t;P.b.sysAdminUpdateOrgUser(n.props.orgID,e,"active",a).then((function(t){var a=n.state.userList.map((function(a){return a.email==e&&(a.active=t.data.active),a}));n.setState({userList:a})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateMembership=function(e,t){var a="is_org_staff"==t;P.b.sysAdminUpdateOrgUser(n.props.orgID,e,"is_org_staff",a).then((function(t){var a=n.state.userList.map((function(a){return a.email==e&&(a.is_org_staff=t.data.is_org_staff),a}));n.setState({userList:a})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",orgName:"",userList:[],isAddUserDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetOrg(this.props.orgID).then((function(t){e.setState({orgName:t.data.org_name})})),P.b.sysAdminListOrgUsers(this.props.orgID).then((function(t){e.setState({loading:!1,userList:t.data.users})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.isAddUserDialogOpen,a=e.orgName;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleAddUserDialog,children:Object(j.pb)("Add Member")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Mn,{currentItem:"users",orgID:this.props.orgID,orgName:a}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Fn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,updateStatus:this.updateStatus,updateMembership:this.updateMembership,deleteUser:this.deleteUser})})]})}),t&&Object(O.jsx)(Ye,{addUser:this.addUser,toggleDialog:this.toggleAddUserDialog})]})}}]),a}(c.Component),En=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No groups")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Creator")}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Created At")}),Object(O.jsx)("th",{width:"10%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Bn,{item:t,deleteGroup:e.props.deleteGroup},a)}))})]})});return r.length?s:i}}]),a}(c.Component),Bn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteGroup=function(){n.toggleDeleteDialog(),n.props.deleteGroup(n.props.item.group_id)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r='<span class="op-target">'+m.a.HTMLescape(e.group_name)+"</span>",i=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",r),s=0==e.parent_group_id?"".concat(j.qc,"sys/groups/").concat(e.group_id,"/libraries/"):"".concat(j.qc,"sys/departments/").concat(e.group_id,"/");return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:s,children:e.group_name})}),Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.creator_email,name:e.creator_name})}),Object(O.jsx)("td",{children:L()(e.created_at).format("YYYY-MM-DD HH:mm:ss")}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete ".concat(a?"":"invisible"),title:Object(j.pb)("Delete"),onClick:this.toggleDeleteDialog})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Group"),message:i,executeOperation:this.deleteGroup,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteDialog})]})}}]),a}(c.Component),zn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).deleteGroup=function(e){P.b.sysAdminDismissGroupByID(e).then((function(t){var a=n.state.groupList.filter((function(t){return t.group_id!=e}));n.setState({groupList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",orgName:"",groupList:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetOrg(this.props.orgID).then((function(t){e.setState({orgName:t.data.org_name})})),P.b.sysAdminListOrgGroups(this.props.orgID).then((function(t){e.setState({loading:!1,groupList:t.data.group_list})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Mn,{currentItem:"groups",orgID:this.props.orgID,orgName:this.state.orgName}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(En,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,deleteGroup:this.deleteGroup})})]})})]})}}]),a}(c.Component),Vn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No libraries")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%"}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"35%",children:Object(j.pb)("ID")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Owner")}),Object(O.jsx)("th",{width:"10%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(qn,{item:t,deleteRepo:e.props.deleteRepo},a)}))})]})});return r.length?s:i}}]),a}(c.Component),qn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteRepo=function(){n.props.deleteRepo(n.props.item.repo_id)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=m.a.getLibIconUrl(e),i=m.a.getLibIconTitle(e),s='<span class="op-target">'+m.a.HTMLescape(e.repo_name)+"</span>",o=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",s);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:r,title:i,alt:i,width:"24"})}),Object(O.jsx)("td",{children:e.repo_name}),Object(O.jsx)("td",{children:e.repo_id}),Object(O.jsx)("td",{children:e.owner_email?-1==e.owner_email.indexOf("@seafile_group")?Object(O.jsx)(Ie,{email:e.owner_email,name:e.owner_name}):e.owner_name:"--"}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete ".concat(a?"":"invisible"),title:Object(j.pb)("Delete"),onClick:this.toggleDeleteDialog})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Library"),message:o,executeOperation:this.deleteRepo,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteDialog})]})}}]),a}(c.Component),Wn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).deleteRepo=function(e){P.b.sysAdminDeleteRepo(e).then((function(t){var a=n.state.repoList.filter((function(t){return t.repo_id!=e}));n.setState({repoList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",orgName:"",repoList:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetOrg(this.props.orgID).then((function(t){e.setState({orgName:t.data.org_name})})),P.b.sysAdminListOrgRepos(this.props.orgID).then((function(t){e.setState({loading:!1,repoList:t.data.repo_list})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Mn,{currentItem:"repos",orgID:this.props.orgID,orgName:this.state.orgName}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Vn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,deleteRepo:this.deleteRepo})})]})})]})}}]),a}(c.Component),Hn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target.value;n.setState({value:t,isSubmitBtnActive:""!=t.trim()})},n.handleSubmit=function(){n.toggle(),n.props.addInstitution(n.state.value.trim())},n.toggle=function(){n.props.toggle()},n.state={value:"",isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("Add institution")}),Object(O.jsx)(_e.a,{children:Object(O.jsxs)(Ae.a,{children:[Object(O.jsx)("p",{children:Object(j.pb)("Name")}),Object(O.jsx)(Le.a,{children:Object(O.jsx)(ne.a,{value:this.state.value,onChange:this.handleChange})})]})}),Object(O.jsx)(Ue.a,{children:Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive,children:Object(j.pb)("Submit")})})]})}}]),a}(l.a.Component),Yn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getInstitutionsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getInstitutionsByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.perPage,s=t.currentPage,o=t.hasNextPage;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var l=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No institutions")})}),d=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"75%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Created At")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Gn,{item:t,deleteInstitution:e.props.deleteInstitution},a)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:s,hasNextPage:o,curPerPage:i,resetPerPage:this.props.resetPerPage})]});return r.length?d:l}}]),a}(c.Component),Gn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.setState({isOpIconShown:!0})},n.handleMouseLeave=function(){n.setState({isOpIconShown:!1})},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteInstitution=function(){n.props.deleteInstitution(n.props.item.id)},n.state={isOpIconShown:!1,isDeleteDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r='<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>",i=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",r);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/institutions/").concat(e.id,"/info/"),children:e.name})}),Object(O.jsx)("td",{children:L()(e.ctime).fromNow()}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete ".concat(a?"":"invisible"),title:Object(j.pb)("Delete"),onClick:this.toggleDeleteDialog})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Institution"),message:i,executeOperation:this.deleteInstitution,confirmBtnText:Object(j.pb)("Delete"),toggleDialog:this.toggleDeleteDialog})]})}}]),a}(c.Component),Qn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getInstitutionsByPage=function(e){var t=n.state.perPage;P.b.sysAdminListInstitutions(e,t).then((function(a){n.setState({loading:!1,institutionList:a.data.institution_list,currentPage:e,hasNextPage:m.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getInstitutionsByPage(n.initPage)}))},n.toggleAddInstitutionDialog=function(){n.setState({isAddInstitutionDialogOpen:!n.state.isAddInstitutionDialogOpen})},n.addInstitution=function(e){P.b.sysAdminAddInstitution(e).then((function(e){var t=n.state.institutionList;t.push(e.data),n.setState({institutionList:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteInstitution=function(e){P.b.sysAdminDeleteInstitution(e).then((function(t){var a=n.state.institutionList.filter((function(t){return t.id!=e}));n.setState({institutionList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",institutionList:[],perPage:25,currentPage:1,hasNextPage:!1,isAddInstitutionDialogOpen:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getInstitutionsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isAddInstitutionDialogOpen,a=e.hasNextPage,r=e.currentPage,i=e.perPage;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleAddInstitutionDialog,children:Object(j.pb)("Add Institution")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Institutions")})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Yn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.institutionList,deleteInstitution:this.deleteInstitution,currentPage:r,perPage:i,hasNextPage:a,getInstitutionsByPage:this.getInstitutionsByPage,resetPerPage:this.resetPerPage})})]})}),t&&Object(O.jsx)(Hn,{addInstitution:this.addInstitution,toggle:this.toggleAddInstitutionDialog})]})}}]),a}(c.Component),Kn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"info",urlPart:"info",text:Object(j.pb)("Info")},{name:"members",urlPart:"members",text:Object(j.pb)("Members")},{name:"admins",urlPart:"admins",text:Object(j.pb)("Admins")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentItem,a=e.institutionID,n=e.institutionName;return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsxs)("h3",{className:"sf-heading",children:[Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/institutions/"),children:Object(j.pb)("Institutions")})," / ",n]})}),Object(O.jsx)("ul",{className:"nav border-bottom mx-4",children:this.navItems.map((function(e,n){return Object(O.jsx)("li",{className:"nav-item mr-2",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/institutions/").concat(a,"/").concat(e.urlPart,"/"),className:"nav-link ".concat(t==e.name?" active":""),children:e.text})},n)}))})]})}}]),a}(l.a.Component),Zn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.showEditIcon=function(e){return Object(O.jsx)("span",{title:Object(j.pb)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},n.state={isSetQuotaDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.institutionInfo;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var r=n.name,i=n.user_count,s=n.quota_total,o=n.quota_used,l=this.state.isSetQuotaDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("dl",{className:"m-0",children:[Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Name")}),Object(O.jsx)("dd",{className:"info-item-content",children:r}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Number of members")}),Object(O.jsx)("dd",{className:"info-item-content",children:i}),Object(O.jsx)("dt",{className:"info-item-heading",children:Object(j.pb)("Space Used")}),Object(O.jsxs)("dd",{className:"info-item-content",children:["".concat(m.a.bytesToSize(o)," / ").concat(s>0?m.a.bytesToSize(s):"--"),this.showEditIcon(this.toggleSetQuotaDialog)]})]}),l&&Object(O.jsx)(Ee,{updateQuota:this.props.updateQuota,toggle:this.toggleSetQuotaDialog})]})}}]),a}(c.Component),Xn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).updateQuota=function(e){P.b.sysAdminUpdateInstitution(n.props.institutionID,e).then((function(e){var t=Object.assign(n.state.institutionInfo,{quota_total:e.data.quota_total});n.setState({institutionInfo:t}),w.a.success(Object(j.pb)("Successfully set quota."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",institutionInfo:{}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetInstitution(this.props.institutionID).then((function(t){e.setState({loading:!1,institutionInfo:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.institutionInfo;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Kn,{currentItem:"info",institutionID:this.props.institutionID,institutionName:e.name}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Zn,{loading:this.state.loading,errorMsg:this.state.errorMsg,institutionInfo:this.state.institutionInfo,updateQuota:this.updateQuota})})]})})]})}}]),a}(c.Component),Jn=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSelectChange=function(e){n.setState({selectedOption:e})},n.handleSubmit=function(){if(n.state.selectedOption){var e=n.state.selectedOption.map((function(e){return e.email}));n.props.addUser(e)}},n.state={selectedOption:[]},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("Add Member")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ge.a,{placeholder:Object(j.pb)("Search users..."),onSelectChange:this.handleSelectChange,isMulti:!0,className:"org-add-member-select"})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,children:Object(j.pb)("Submit")}),Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")})]})]})}}]),a}(l.a.Component),$n=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getInstitutionUsersByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getInstitutionUsersByPage(n.props.currentPage+1)},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.perPage,s=t.currentPage,o=t.hasNextPage;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var l=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No members")})}),d=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"10%",children:Object(j.pb)("Status")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Space Used")}),Object(O.jsxs)("th",{width:"40%",children:[Object(j.pb)("Created At")," / ",Object(j.pb)("Last Login")]}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(er,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,setAdmin:e.props.setAdmin,deleteUser:e.props.deleteUser},a)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:s,hasNextPage:o,curPerPage:i,resetPerPage:this.props.resetPerPage})]});return r.length?d:l}}]),a}(c.Component),er=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleSetAdminDialog=function(e){e&&e.preventDefault(),n.setState({isSetAdminDialogOpen:!n.state.isSetAdminDialogOpen})},n.setAdmin=function(){n.props.setAdmin(n.props.item.email)},n.onMenuItemClick=function(e){switch(e){case"Delete":n.props.deleteUser(n.props.item.email);break;case"Set Admin":n.toggleSetAdminDialog()}},n.getOperations=function(){var e=[];return n.props.item.is_institution_admin||e.push("Set Admin"),e.push("Delete"),e},n.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(j.pb)("Delete");break;case"Set Admin":t=Object(j.pb)("Set Admin")}return t},n.state={isOpIconShown:!1,highlight:!1,isSetAdminDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isSetAdminDialogOpen,r='<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>",i=Object(j.pb)("Are you sure you want to set {placeholder} as Admin?").replace("{placeholder}",r);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsx)("td",{children:e.is_active?Object(j.pb)("Active"):Object(j.pb)("Inactive")}),Object(O.jsx)("td",{children:"".concat(m.a.bytesToSize(e.quota_usage)," / ").concat(e.quota_total>0?m.a.bytesToSize(e.quota_total):"--")}),Object(O.jsxs)("td",{children:[L()(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?L()(e.last_login).fromNow():"--"]}),Object(O.jsx)("td",{children:a&&Object(O.jsx)(at.a,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Set Admin"),message:i,executeOperation:this.setAdmin,toggleDialog:this.toggleSetAdminDialog,confirmBtnText:Object(j.pb)("Set Admin")})]})}}]),a}(c.Component),tr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getInstitutionUsersByPage=function(e){var t=n.state.perPage;P.b.sysAdminListInstitutionUsers(n.props.institutionID,e,t).then((function(a){n.setState({loading:!1,userList:a.data.user_list,currentPage:e,hasNextPage:m.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.setAdmin=function(e){P.b.sysAdminUpdateInstitutionUser(n.props.institutionID,e,!0).then((function(t){var a=n.state.userList.map((function(t){return t.email==e&&(t.is_institution_admin=!0),t}));n.setState({userList:a}),w.a.success(Object(j.pb)("Success"))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.toggleAddUserDialog=function(){n.setState({isAddUserDialogOpen:!n.state.isAddUserDialogOpen})},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getInstitutionUsersByPage(n.initPage)}))},n.addUser=function(e){P.b.sysAdminAddInstitutionUserBatch(n.props.institutionID,e).then((function(e){n.toggleAddUserDialog();var t=e.data.success,a=e.data.failed;if(t.length){var r=n.state.userList.concat(t);n.setState({userList:r})}a.map((function(e){w.a.danger(e.error_msg)}))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteUser=function(e){P.b.sysAdminDeleteInstitutionUser(n.props.institutionID,e).then((function(t){var a=n.state.userList.filter((function(t){return t.email!=e}));n.setState({userList:a}),w.a.success("success")})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",institutionName:"",userList:[],perPage:25,currentPage:1,hasNextPage:!1,isAddUserDialogOpen:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetInstitution(this.props.institutionID).then((function(t){e.setState({institutionName:t.data.name})}));var t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getInstitutionUsersByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isAddUserDialogOpen,a=e.institutionName,r=e.hasNextPage,i=e.currentPage,s=e.perPage;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleAddUserDialog,children:Object(j.pb)("Add Member")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Kn,{currentItem:"members",institutionID:this.props.institutionID,institutionName:a}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)($n,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,setAdmin:this.setAdmin,deleteUser:this.deleteUser,currentPage:i,perPage:s,hasNextPage:r,getInstitutionUsersByPage:this.getInstitutionUsersByPage,resetPerPage:this.resetPerPage})})]})}),t&&Object(O.jsx)(Jn,{addUser:this.addUser,toggle:this.toggleAddUserDialog})]})}}]),a}(c.Component),ar=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No admins")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"10%",children:Object(j.pb)("Status")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Space Used")}),Object(O.jsxs)("th",{width:"40%",children:[Object(j.pb)("Created At")," / ",Object(j.pb)("Last Login")]}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(nr,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,revokeAdmin:e.props.revokeAdmin,deleteUser:e.props.deleteUser},a)}))})]})});return r.length?s:i}}]),a}(c.Component),nr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleRevokeAdminDialog=function(e){e&&e.preventDefault(),n.setState({isRevokeAdminDialogOpen:!n.state.isRevokeAdminDialogOpen})},n.revokeAdmin=function(){n.props.revokeAdmin(n.props.item)},n.onMenuItemClick=function(e){if("Revoke Admin"===e)n.toggleRevokeAdminDialog()},n.translateOperations=function(e){var t="";if("Revoke Admin"===e)t=Object(j.pb)("Revoke Admin");return t},n.state={isOpIconShown:!1,highlight:!1,isRevokeAdminDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isRevokeAdminDialogOpen,r='<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>",i=Object(j.pb)("Are you sure you want to revoke the admin permission of {placeholder} ?").replace("{placeholder}",r);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsx)("td",{children:e.is_active?Object(j.pb)("Active"):Object(j.pb)("Inactive")}),Object(O.jsx)("td",{children:"".concat(m.a.bytesToSize(e.quota_usage)," / ").concat(e.quota_total>0?m.a.bytesToSize(e.quota_total):"--")}),Object(O.jsxs)("td",{children:[L()(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?L()(e.last_login).fromNow():"--"]}),Object(O.jsx)("td",{children:a&&Object(O.jsx)(at.a,{operations:["Revoke Admin"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Revoke Admin"),message:i,executeOperation:this.revokeAdmin,confirmBtnText:Object(j.pb)("Revoke"),toggleDialog:this.toggleRevokeAdminDialog})]})}}]),a}(c.Component),rr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).revokeAdmin=function(e){var t=e.email,a=e.name;P.b.sysAdminUpdateInstitutionUser(n.props.institutionID,t,!1).then((function(e){var r=n.state.userList.filter((function(e){return e.email!=t}));n.setState({userList:r}),w.a.success(Object(j.pb)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",a))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteUser=function(e){P.b.sysAdminDeleteInstitutionUser(n.props.institutionID,e).then((function(t){var a=n.state.userList.filter((function(t){return t.email!=e}));n.setState({userList:a}),w.a.success("success")})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",institutionName:"",userList:[],isAddUserDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetInstitution(this.props.institutionID).then((function(t){e.setState({institutionName:t.data.name})})),P.b.sysAdminListInstitutionAdmins(this.props.institutionID).then((function(t){e.setState({loading:!1,userList:t.data.user_list})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.institutionName;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Kn,{currentItem:"admins",institutionID:this.props.institutionID,institutionName:e}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(ar,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,revokeAdmin:this.revokeAdmin,deleteUser:this.deleteUser})})]})})]})}}]),a}(c.Component),ir=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"loginLogs",urlPart:"logs/login",text:Object(j.pb)("Login")},{name:"fileAccessLogs",urlPart:"logs/file-access",text:Object(j.pb)("File Access")},{name:"fileUpdateLogs",urlPart:"logs/file-update",text:Object(j.pb)("File Update")},{name:"sharePermissionLogs",urlPart:"logs/share-permission",text:Object(j.pb)("Permission")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return Object(O.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(O.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,a){return Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},a)}))})})}}]),a}(l.a.Component),sr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).downloadExcel=function(){if(n.isValidDateStr()){var e=n.state,t=e.startDateStr,a=e.endDateStr,r=j.qc;switch(n.props.logType){case"login":r+="sys/loginadmin/export-excel/";break;case"fileAccess":r+="sys/log/fileaudit/export-excel/";break;case"fileUpdate":r+="sys/log/fileupdate/export-excel/";break;case"sharePermission":r+="sys/log/permaudit/export-excel/"}location.href=r+"?start="+t+"&end="+a,n.props.toggle()}},n.isValidDateStr=function(){var e=n.state,t=e.startDateStr,a=e.endDateStr;return!!(L()(t,"YYYY-MM-DD",!0).isValid()&&L()(a,"YYYY-MM-DD",!0).isValid()&&L()(t).isBefore(a))||(n.setState({errMsg:Object(j.pb)("Date Invalid.")}),!1)},n.handleStartChange=function(e){var t=e.target.value.trim();n.setState({startDateStr:t,errMsg:""})},n.handleEndChange=function(e){var t=e.target.value.trim();n.setState({endDateStr:t,errMsg:""})},n.state={loading:!0,startDateStr:"",endDateStr:"",errMsg:""},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:Object(j.pb)("Choose date")}),Object(O.jsxs)(_e.a,{children:[Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Start date")}),Object(O.jsx)(ne.a,{value:this.state.startDateStr,onChange:this.handleStartChange,placeholder:"yyyy-mm-dd",autoFocus:!0})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("End date")}),Object(O.jsx)(ne.a,{value:this.state.endDateStr,onChange:this.handleEndChange,placeholder:"yyyy-mm-dd"})]}),this.state.errMsg&&Object(O.jsx)(Be.a,{className:"mt-2",color:"danger",children:Object(j.pb)(this.state.errMsg)})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.props.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.downloadExcel,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),or=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,s=e.hasNextPage;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No login logs")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("IP")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Status")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Time")})]})}),n&&Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(cr,{item:e},t)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:s,curPerPage:r,resetPerPage:this.props.resetPerPage})]});return n.length?l:o}}]),a}(c.Component),cr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.state={isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item;return Object(O.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsx)("td",{children:e.login_ip}),Object(O.jsx)("td",{children:e.log_success?Object(j.pb)("Success"):Object(j.pb)("Failed")}),Object(O.jsx)("td",{children:L()(e.login_time).fromNow()})]})}}]),a}(c.Component),lr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.getLogsByPage=function(e){var t=n.state.perPage;P.b.sysAdminListLoginLogs(e,t).then((function(a){n.setState({logList:a.data.login_log_list,loading:!1,currentPage:e,hasNextPage:m.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getLogsByPage(n.initPage)}))},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,r=e.perPage,i=e.hasNextPage,s=e.isExportExcelDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog,children:Object(j.pb)("Export Excel")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(ir,{currentItem:"loginLogs"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(or,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:r,hasNextPage:i,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})})]})}),s&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(sr,{logType:"login",toggle:this.toggleExportExcelDialog})})]})}}]),a}(c.Component),dr=a(314),ur=a(317),hr=a(316),pr=a(191),br=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleMenu=function(){n.setState({isMenuShown:!n.state.isMenuShown},(function(){n.props.toggleFreezeItem(n.state.isMenuShown)}))},n.onItemClick=function(){n.props.filterItems(),n.props.toggleFreezeItem(!1)},n.state={isMenuShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.filterBy;return Object(O.jsxs)(dr.a,{isOpen:this.state.isMenuShown,toggle:this.toggleMenu,children:[Object(O.jsx)(ur.a,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down",title:Object(j.pb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isMenuShown}),Object(O.jsx)(hr.a,{children:Object(O.jsx)(pr.a,{onClick:this.onItemClick,children:Object(j.pb)("only show {placeholder}").replace("{placeholder}",e)})})]})}}]),a}(l.a.Component),gr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.filterBy;return Object(O.jsxs)(D.a,{color:"secondary",className:"my-2 mr-2",onClick:this.props.toggleFilter,children:[Object(O.jsx)("span",{className:"text-primary",children:e}),Object(O.jsx)("span",{className:"ml-2 close",style:{fontSize:"1.2rem"},children:"x"})]})}}]),a}(l.a.Component),jr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n.toggleFilterByUser=function(){n.props.filterByUser(null)},n.toggleFilterByRepo=function(){n.props.filterByRepo(null)},n.toggleFreezeItem=function(e){n.setState({isItemFreezed:e})},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.userFilteredBy,s=t.repoFilteredBy,o=t.perPage,l=t.currentPage,d=t.hasNextPage;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center",children:n});var u=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No file access logs")})}),h=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{children:[i&&Object(O.jsx)(gr,{filterBy:r[0].name,toggleFilter:this.toggleFilterByUser}),s&&Object(O.jsx)(gr,{filterBy:r[0].repo_name,toggleFilter:this.toggleFilterByRepo})]}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"10%",children:Object(j.pb)("Type")}),Object(O.jsxs)("th",{width:"20%",children:[Object(j.pb)("IP")," / ",Object(j.pb)("Device")]}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Date")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Library")}),Object(O.jsxs)("th",{width:"15%",children:[Object(j.pb)("File")," / ",Object(j.pb)("Folder")]})]})}),r&&Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(mr,{item:t,isFreezed:e.state.isItemFreezed,toggleFreezeItem:e.toggleFreezeItem,userFilteredBy:i,repoFilteredBy:s,filterByUser:e.props.filterByUser,filterByRepo:e.props.filterByRepo},a)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:l,hasNextPage:d,curPerPage:o,resetPerPage:this.props.resetPerPage})]});return r.length?h:u}}]),a}(c.Component),mr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isFreezed||n.setState({isHighlighted:!0,isOpIconShown:!0})},n.handleMouseLeave=function(){n.props.isFreezed||n.setState({isHighlighted:!1,isOpIconShown:!1})},n.filterByUser=function(){var e=n.props.item;n.props.filterByUser(e.email)},n.filterByRepo=function(){var e=n.props.item;n.props.filterByRepo(e.repo_id)},n.toggleFreezeItem=function(e){n.props.toggleFreezeItem(e),e||n.setState({isHighlighted:!1,isOpIconShown:!1})},n.state={isHighlighted:!1,isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isHighlighted,a=e.isOpIconShown,n=this.props,r=n.item,i=n.userFilteredBy,s=n.repoFilteredBy;return Object(O.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsxs)("td",{children:[Object(O.jsx)(Ie,{email:r.email,name:r.name}),a&&!i&&Object(O.jsx)(br,{filterBy:r.name,filterItems:this.filterByUser,toggleFreezeItem:this.toggleFreezeItem})]}),Object(O.jsx)("td",{children:r.event_type}),Object(O.jsxs)("td",{children:[r.ip," / ",r.device||"--"]}),Object(O.jsx)("td",{children:L()(r.time).fromNow()}),Object(O.jsxs)("td",{children:[r.repo_name?r.repo_name:Object(j.pb)("Deleted"),a&&r.repo_name&&!s&&Object(O.jsx)(br,{filterBy:r.repo_name,filterItems:this.filterByRepo,toggleFreezeItem:this.toggleFreezeItem})]}),Object(O.jsx)("td",{children:r.file_or_dir_name})]})}}]),a}(c.Component),fr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.getLogsByPage=function(e){var t=n.state,a=t.perPage,r=t.userFilteredBy,i=t.repoFilteredBy;P.b.sysAdminListFileAccessLogs(e,a,r,i).then((function(t){n.setState({logList:t.data.file_access_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getLogsByPage(n.initPage)}))},n.updateURL=function(e){var t=new URL(location.href),a=new URLSearchParams(t.search);for(var n in e)null==e[n]?a.delete(n):a.set(n,e[n]);t.search=a.toString(),Object(g.c)(t.toString())},n.filterByUser=function(e){n.setState({userFilteredBy:e},(function(){n.getLogsByPage(n.initPage),n.updateURL({email:e})}))},n.filterByRepo=function(e){n.setState({repoFilteredBy:e},(function(){n.getLogsByPage(n.initPage),n.updateURL({repo_id:e})}))},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n),userFilteredBy:t.get("email"),repoFilteredBy:t.get("repo_id")},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.userFilteredBy,r=e.repoFilteredBy,i=e.currentPage,s=e.perPage,o=e.hasNextPage,l=e.isExportExcelDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog,children:Object(j.pb)("Export Excel")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(ir,{currentItem:"fileAccessLogs"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(jr,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,userFilteredBy:a,repoFilteredBy:r,filterByUser:this.filterByUser,filterByRepo:this.filterByRepo,currentPage:i,perPage:s,hasNextPage:o,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})})]})}),l&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(sr,{logType:"fileAccess",toggle:this.toggleExportExcelDialog})})]})}}]),a}(c.Component),Or=a(379),vr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,s=e.hasNextPage;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No file update logs")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Date")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Library")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Action")})]})}),n&&Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(xr,{item:e},t)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:s,curPerPage:r,resetPerPage:this.props.resetPerPage})]});return n.length?l:o}}]),a}(c.Component),xr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.toggleCommitDetailsDialog=function(){n.setState({isCommitDetailsDialogOpen:!n.state.isCommitDetailsDialogOpen})},n.showCommitDetails=function(e){e.preventDefault(),n.setState({isCommitDetailsDialogOpen:!n.state.isCommitDetailsDialogOpen})},n.state={isOpIconShown:!1,isCommitDetailsDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsx)("td",{children:L()(e.time).fromNow()}),Object(O.jsx)("td",{children:e.repo_name?e.repo_name:Object(j.pb)("Deleted")}),Object(O.jsxs)("td",{children:[e.file_operation,e.repo_name&&!e.repo_encrypted&&Object(O.jsx)("a",{className:"ml-1",href:"#",onClick:this.showCommitDetails,children:Object(j.pb)("Details")})]})]}),this.state.isCommitDetailsDialogOpen&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Or.a,{repoID:e.repo_id,commitID:e.commit_id,commitTime:e.time,toggleDialog:this.toggleCommitDetailsDialog})})]})}}]),a}(c.Component),yr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.getLogsByPage=function(e){var t=n.state.perPage;P.b.sysAdminListFileUpdateLogs(e,t).then((function(t){n.setState({logList:t.data.file_update_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getLogsByPage(n.initPage)}))},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,r=e.perPage,i=e.hasNextPage,s=e.isExportExcelDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog,children:Object(j.pb)("Export Excel")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(ir,{currentItem:"fileUpdateLogs"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(vr,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:r,hasNextPage:i,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})})]})}),s&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(sr,{logType:"fileUpdate",toggle:this.toggleExportExcelDialog})})]})}}]),a}(c.Component),Sr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,s=e.hasNextPage;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No permission logs")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Share From")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Share To")}),Object(O.jsx)("th",{width:"10%",children:Object(j.pb)("Actions")}),Object(O.jsx)("th",{width:"13%",children:Object(j.pb)("Permission")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Library")}),Object(O.jsx)("th",{width:"12%",children:Object(j.pb)("Folder")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Date")})]})}),n&&Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(Dr,{item:e},t)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:s,curPerPage:r,resetPerPage:this.props.resetPerPage})]});return n.length?l:o}}]),a}(c.Component),Dr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.getActionTextByEType=function(e){return-1!=e.indexOf("add")?Object(j.pb)("Add"):-1!=e.indexOf("modify")?Object(j.pb)("Modify"):-1!=e.indexOf("delete")?Object(j.pb)("Delete"):""},n.getShareTo=function(e){switch(e.share_type){case"user":return Object(O.jsx)(Ie,{email:e.to_user_email,name:e.to_user_name});case"group":return Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/groups/").concat(e.to_group_id,"/libraries/"),children:e.to_group_name});case"department":return Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/departments/").concat(e.to_group_id,"/"),children:e.to_group_name});case"all":return Object(O.jsx)(g.a,{to:"".concat(j.qc,"org/"),children:Object(j.pb)("All")});default:return Object(j.pb)("Deleted")}},n.state={isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item;return Object(O.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.from_user_email,name:e.from_user_name})}),Object(O.jsx)("td",{children:this.getShareTo(e)}),Object(O.jsx)("td",{children:this.getActionTextByEType(e.etype)}),Object(O.jsx)("td",{children:m.a.sharePerms(e.permission)}),Object(O.jsx)("td",{children:e.repo_name?e.repo_name:Object(j.pb)("Deleted")}),Object(O.jsx)("td",{children:e.folder}),Object(O.jsx)("td",{children:L()(e.date).fromNow()})]})}}]),a}(c.Component),Pr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.getLogsByPage=function(e){var t=n.state.perPage;P.b.sysAdminListSharePermissionLogs(e,t).then((function(t){n.setState({logList:t.data.share_permission_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getLogsByPage(n.initPage)}))},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,r=e.perPage,i=e.hasNextPage,s=e.isExportExcelDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog,children:Object(j.pb)("Export Excel")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(ir,{currentItem:"sharePermissionLogs"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Sr,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:r,hasNextPage:i,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})})]})}),s&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(sr,{logType:"sharePermission",toggle:this.toggleExportExcelDialog})})]})}}]),a}(c.Component),wr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headingText,a=e.children;return Object(O.jsxs)("div",{className:"mb-4",children:[Object(O.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:t}),a]})}}]),a}(c.Component),Ir=a(1834),kr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.helpTip,a=e.displayName,n=e.mainContent,r=e.extraContent;return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)(Ir.a,{className:"my-4",children:[Object(O.jsx)(Ot.a,{md:"3",children:Object(O.jsx)(Ve.a,{className:"web-setting-label",children:a})}),Object(O.jsxs)(Ot.a,{md:"5",children:[n,t&&Object(O.jsx)("p",{className:"small text-secondary mt-1",children:t})]}),Object(O.jsx)(Ot.a,{md:"4",children:r})]})})}}]),a}(c.Component),Cr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleBtns=function(){n.setState({isBtnsShown:!n.state.isBtnsShown})},n.hideBtns=function(e){n.state.isBtnsShown&&(n.props.value!=n.state.value&&n.setState({value:n.props.value}),n.toggleBtns())},n.onInputChange=function(e){n.setState({value:e.target.value})},n.onSubmit=function(e){var t=n.state.value.trim();t!=n.props.value&&n.props.saveSetting(n.props.keyText,t),n.toggleBtns()},n.state={isBtnsShown:!1,value:n.props.value},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isBtnsShown,a=e.value,n=this.props,r=n.helpTip,i=n.displayName,s=n.inputType;return Object(O.jsx)(kr,{displayName:i,helpTip:r,mainContent:Object(O.jsx)(ne.a,{type:s||"text",className:"textarea"==s?"web-setting-textarea":"",onChange:this.onInputChange,onFocus:this.toggleBtns,onBlur:this.hideBtns,value:a}),extraContent:t?Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(D.a,{className:"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit",onMouseDown:this.onSubmit,title:Object(j.pb)("Submit")}),Object(O.jsx)(D.a,{className:"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel",title:Object(j.pb)("Cancel")})]}):null})}}]),a}(c.Component),Nr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).uploadFile=function(){if(n.fileInput.current.files.length){var e=n.fileInput.current.files[0];n.props.postFile(e,n.props.keyText)}},n.openFileInput=function(){n.fileInput.current.click()},n.fileInput=l.a.createRef(),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.helpTip,a=e.filePath,n=e.fileWidth,r=e.fileHeight,i=e.displayName;return Object(O.jsx)(kr,{displayName:i,helpTip:t,mainContent:Object(O.jsx)("img",{src:a+"?t="+(new Date).getTime(),alt:i,width:n,height:r,className:"mb-1"}),extraContent:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.openFileInput,children:Object(j.pb)("Change")}),Object(O.jsx)("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInput})]})})}}]),a}(c.Component),Mr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onInputChange=function(e){var t=e.target.checked,a=t?1:0;n.setState({inputChecked:t}),n.props.saveSetting(n.props.keyText,a)},n.state={inputChecked:n.props.value},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props,a=t.helpTip,n=t.displayName;return Object(O.jsx)(kr,{displayName:n,mainContent:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(ne.a,{className:"ml-0",checked:e,type:"checkbox",onChange:this.onInputChange}),Object(O.jsx)("p",{className:"ml-4",children:a})]})})}}]),a}(c.Component),_r=(a(697),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).saveSetting=function(e,t){P.b.sysAdminSetSysSettingInfo(e,t).then((function(e){n.setState({config_dict:e.data}),w.a.success(Object(j.pb)("Success"))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.postFile=function(e,t){var a;"Logo"==t?a=P.b.sysAdminUpdateLogo(e):"Favicon"==t?a=P.b.sysAdminUpdateFavicon(e):"loginBGImage"==t&&(a=P.b.sysAdminUpdateLoginBG(e)),a.then((function(e){"Logo"==t?n.setState({logoPath:e.data.logo_path}):"Favicon"==t?n.setState({faviconPath:e.data.favicon_path}):"loginBGImage"==t&&n.setState({loginBGPath:e.data.login_bg_image_path}),w.a.success(Object(j.pb)("Success"))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",config_dict:null,logoPath:j.Nb+j.Ib,faviconPath:j.Nb+j.ib,loginBGPath:j.Nb+j.Fb},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminGetSysSettingInfo().then((function(t){e.setState({loading:!1,config_dict:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.errorMsg,r=e.config_dict,i=e.logoPath,s=e.faviconPath,o=e.loginBGPath;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Settings")})}),Object(O.jsxs)("div",{className:"cur-view-content container mw-100",children:[t&&Object(O.jsx)(I.a,{}),a&&Object(O.jsx)("p",{className:"error text-center mt-4",children:a}),!t&&!a&&r&&Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("p",{className:"small text-secondary my-4",children:Object(j.pb)("Note: Settings via web interface are saved in database table (seahub-db/constance_config). They have a higher priority over the settings in config files.")}),Object(O.jsx)(wr,{headingText:"URL",children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:"SERVICE_URL",keyText:"SERVICE_URL",value:r.SERVICE_URL,helpTip:Object(j.pb)("The URL of the server, like https://seafile.example.com or http://192.168.1.2:8000")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:"FILE_SERVER_ROOT",keyText:"FILE_SERVER_ROOT",value:r.FILE_SERVER_ROOT,helpTip:Object(j.pb)("The internal URL for downloading/uploading files. Users will not be able to download/upload files if this is not set correctly. If you config Seafile behind Nginx/Apache, it should be SERVICE_URL/seafhttp, like https://seafile.example.com/seafhttp .")})]})}),Object(O.jsx)(wr,{headingText:Object(j.pb)("Branding"),children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:"SITE_TITLE",keyText:"SITE_TITLE",value:r.SITE_TITLE,helpTip:Object(j.pb)("Site title shown in a browser tab")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:"SITE_NAME",keyText:"SITE_NAME",value:r.SITE_NAME,helpTip:Object(j.pb)("Site name used in email sending")}),Object(O.jsx)(Nr,{postFile:this.postFile,displayName:"Logo",keyText:"Logo",filePath:i,fileWidth:256,fileHeight:64,helpTip:"logo.png, 256px * 64px"}),Object(O.jsx)(Nr,{postFile:this.postFile,displayName:"Favicon",keyText:"Favicon",filePath:s,fileWidth:32,fileHeight:32,helpTip:"favicon.ico, 32px * 32px"}),Object(O.jsx)(Nr,{postFile:this.postFile,displayName:Object(j.pb)("Login Background Image"),keyText:"loginBGImage",filePath:o,fileWidth:240,fileHeight:160,helpTip:"login-bg.jpg, 2400px * 1600px"}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"ENABLE_BRANDING_CSS",keyText:"ENABLE_BRANDING_CSS",value:r.ENABLE_BRANDING_CSS,helpTip:Object(j.pb)("Use custom CSS")}),Object(O.jsx)(Cr,{inputType:"textarea",saveSetting:this.saveSetting,displayName:Object(j.pb)("Custom CSS"),keyText:"CUSTOM_CSS",value:r.CUSTOM_CSS,helpTip:""})]})}),Object(O.jsx)(wr,{headingText:Object(j.pb)("User"),children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("allow new registrations"),keyText:"ENABLE_SIGNUP",value:r.ENABLE_SIGNUP,helpTip:Object(j.pb)("Allow new user registrations. Uncheck this to prevent anyone from creating a new account.")}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("activate after registration"),keyText:"ACTIVATE_AFTER_REGISTRATION",value:r.ACTIVATE_AFTER_REGISTRATION,helpTip:Object(j.pb)("Activate user immediately after registration. If unchecked, a user need to be activated by administrator or via activation email")}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("send activation email"),keyText:"REGISTRATION_SEND_MAIL",value:r.REGISTRATION_SEND_MAIL,helpTip:Object(j.pb)("Send activation Email after user registration.")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("keep sign in"),keyText:"LOGIN_REMEMBER_DAYS",value:r.LOGIN_REMEMBER_DAYS,helpTip:Object(j.pb)("Number of days that keep user sign in.")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:"LOGIN_ATTEMPT_LIMIT",keyText:"LOGIN_ATTEMPT_LIMIT",value:r.LOGIN_ATTEMPT_LIMIT,helpTip:Object(j.pb)("The maximum number of failed login attempts before showing CAPTCHA.")}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"FREEZE_USER_ON_LOGIN_FAILED",keyText:"FREEZE_USER_ON_LOGIN_FAILED",value:r.FREEZE_USER_ON_LOGIN_FAILED,helpTip:Object(j.pb)("Freeze user account when failed login attempts exceed limit.")})]})}),Object(O.jsx)(wr,{headingText:Object(j.pb)("Groups"),children:Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"ENABLE_SHARE_TO_ALL_GROUPS",keyText:"ENABLE_SHARE_TO_ALL_GROUPS",value:r.ENABLE_SHARE_TO_ALL_GROUPS,helpTip:Object(j.pb)("Enable users to share libraries to any groups in the system.")})}),Object(O.jsx)(wr,{headingText:Object(j.pb)("Password"),children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"strong password",keyText:"USER_STRONG_PASSWORD_REQUIRED",value:r.USER_STRONG_PASSWORD_REQUIRED,helpTip:Object(j.pb)("Force user to use a strong password when sign up or change password.")}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"force password change",keyText:"FORCE_PASSWORD_CHANGE",value:r.FORCE_PASSWORD_CHANGE,helpTip:Object(j.pb)("Force user to change password when account is newly added or reset by admin")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("password minimum length"),keyText:"USER_PASSWORD_MIN_LENGTH",value:r.USER_PASSWORD_MIN_LENGTH,helpTip:Object(j.pb)("The least number of characters an account password should include.")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("password strength level"),keyText:"USER_PASSWORD_STRENGTH_LEVEL",value:r.USER_PASSWORD_STRENGTH_LEVEL,helpTip:Object(j.pb)("The level(1-4) of an account password's strength. For example, '3' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols")}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"enable two factor authentication",keyText:"ENABLE_TWO_FACTOR_AUTH",value:r.ENABLE_TWO_FACTOR_AUTH,helpTip:Object(j.pb)("Enable two factor authentication")})]})}),Object(O.jsx)(wr,{headingText:Object(j.pb)("Library"),children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"library history",keyText:"ENABLE_REPO_HISTORY_SETTING",value:r.ENABLE_REPO_HISTORY_SETTING,helpTip:Object(j.pb)("Allow user to change library history settings")}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"encrypted library",keyText:"ENABLE_ENCRYPTED_LIBRARY",value:r.ENABLE_ENCRYPTED_LIBRARY,helpTip:Object(j.pb)("Allow user to create encrypted libraries")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("library password minimum length"),keyText:"REPO_PASSWORD_MIN_LENGTH",value:r.REPO_PASSWORD_MIN_LENGTH,helpTip:Object(j.pb)("The least number of characters an encrypted library password should include.")}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("share/upload link force password"),keyText:"SHARE_LINK_FORCE_USE_PASSWORD",value:r.SHARE_LINK_FORCE_USE_PASSWORD,helpTip:Object(j.pb)("Force user use password when generating share/upload link.")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("share/upload link password minimum length"),keyText:"SHARE_LINK_PASSWORD_MIN_LENGTH",value:r.SHARE_LINK_PASSWORD_MIN_LENGTH,helpTip:Object(j.pb)("The least number of characters a share/upload link password should include.")}),Object(O.jsx)(Cr,{saveSetting:this.saveSetting,displayName:Object(j.pb)("share/upload link password strength level"),keyText:"SHARE_LINK_PASSWORD_STRENGTH_LEVEL",value:r.SHARE_LINK_PASSWORD_STRENGTH_LEVEL,helpTip:Object(j.pb)("The level(1-4) of a share/upload link password's strength. For example, '3' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols")}),Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"ENABLE_USER_CLEAN_TRASH",keyText:"ENABLE_USER_CLEAN_TRASH",value:r.ENABLE_USER_CLEAN_TRASH,helpTip:Object(j.pb)("Allow user to clean library trash")})]})}),Object(O.jsx)(wr,{headingText:Object(j.pb)("Online Preview"),children:Object(O.jsx)(Cr,{inputType:"textarea",saveSetting:this.saveSetting,displayName:Object(j.pb)("text file extensions"),keyText:"TEXT_PREVIEW_EXT",value:r.TEXT_PREVIEW_EXT,helpTip:Object(j.pb)("Extensions of text files that can be online previewed, each suffix is separated by a comma.")})}),Object(O.jsx)(wr,{headingText:Object(j.pb)("Sync"),children:Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"DISABLE_SYNC_WITH_ANY_FOLDER",keyText:"DISABLE_SYNC_WITH_ANY_FOLDER",value:r.DISABLE_SYNC_WITH_ANY_FOLDER,helpTip:Object(j.pb)("If turn on, the desktop clients will not be able to sync a folder outside the default Seafile folder.")})}),j.Ab&&Object(O.jsx)(wr,{headingText:Object(j.pb)("Terms"),children:Object(O.jsx)(Mr,{saveSetting:this.saveSetting,displayName:"ENABLE_TERMS_AND_CONDITIONS",keyText:"ENABLE_TERMS_AND_CONDITIONS",value:r.ENABLE_TERMS_AND_CONDITIONS,helpTip:Object(j.pb)("Enable system admin to add Terms and Conditions, and all users will have to accept the terms.")})})]})]})]})})]})}}]),a}(c.Component)),Ar=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target.value;n.setState({value:t,isSubmitBtnActive:""!=t.trim()})},n.handleSubmit=function(){n.toggle(),n.props.addNotification(n.state.value.trim())},n.toggle=function(){n.props.toggle()},n.state={value:"",isSubmitBtnActive:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:Object(j.pb)("Add new notification")}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(Ae.a,{children:Object(O.jsx)(Le.a,{children:Object(O.jsx)(ne.a,{type:"textarea",value:this.state.value,onChange:this.handleChange})})})}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:Object(j.pb)("Cancel")}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive,children:Object(j.pb)("Submit")})]})]})}}]),a}(l.a.Component),Lr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No notifications")})}),s=Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"95%",children:Object(j.pb)("Notification Detail")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Tr,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteNotification:e.props.deleteNotification,setToCurrent:e.props.setToCurrent},a)}))})]});return r.length?s:i}}]),a}(c.Component),Tr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleDeleteDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.deleteNotification=function(){n.props.deleteNotification(n.props.item.id),n.toggleDeleteDialog()},n.setToCurrent=function(){n.props.setToCurrent(n.props.item.id)},n.onMenuItemClick=function(e){switch(e){case"Set to current":n.setToCurrent();break;case"Delete":n.toggleDeleteDialog()}},n.translateOperations=function(e){var t="";switch(e){case"Set to current":t=Object(j.pb)("Set to current");break;case"Delete":t=Object(j.pb)("Delete")}return t},n.getOperations=function(){var e=[];return n.props.item.is_current||e.push("Set to current"),e.push("Delete"),e},n.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsxs)("td",{children:[e.msg,e.is_current&&Object(O.jsx)("span",{className:"small text-orange",children:Object(j.pb)("(current notification)")})]}),Object(O.jsx)("td",{children:a&&Object(O.jsx)(at.a,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),n&&Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete Notification"),message:Object(j.pb)("Are you sure you want to delete the notification ?"),toggleDialog:this.toggleDeleteDialog,executeOperation:this.deleteNotification,confirmBtnText:Object(j.pb)("Delete")})]})}}]),a}(c.Component),Fr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleAddNotificationDialog=function(){n.setState({isAddNotificationDialogOpen:!n.state.isAddNotificationDialogOpen})},n.addNotification=function(e){P.b.sysAdminAddSysNotification(e).then((function(e){var t=n.state.notificationList;t.unshift(e.data.notification),n.setState({notificationList:t})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteNotification=function(e){P.b.sysAdminDeleteSysNotification(e).then((function(t){var a=n.state.notificationList.filter((function(t){return t.id!=e}));n.setState({notificationList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.setToCurrent=function(e){P.b.sysAdminSetSysNotificationToCurrent(e).then((function(t){var a=n.state.notificationList.map((function(t){return t.id==e?t.is_current=!0:t.is_current=!1,t}));n.setState({notificationList:a})})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",notificationList:[],isAddNotificationDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminListAllSysNotifications().then((function(t){e.setState({loading:!1,notificationList:t.data.notifications})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.isAddNotificationDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleAddNotificationDialog,children:Object(j.pb)("Add new notification")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("All Notifications")})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Lr,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.notificationList,deleteNotification:this.deleteNotification,setToCurrent:this.setToCurrent})})]})}),e&&Object(O.jsx)(Ar,{addNotification:this.addNotification,toggle:this.toggleAddNotificationDialog})]})}}]),a}(c.Component),Rr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.records;return t?Object(O.jsx)("span",{className:"loading-icon loading-tip"}):a?Object(O.jsx)("p",{className:"error text-center",children:a}):Object(O.jsxs)("table",{width:"100%",className:"table table-hover table-vcenter",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"16%",children:Object(j.pb)("Library")}),Object(O.jsx)("th",{width:"30%",children:"ID"}),Object(O.jsx)("th",{width:"30%",children:Object(j.pb)("Path")}),Object(O.jsx)("th",{width:"12%",children:Object(j.pb)("Label")}),Object(O.jsx)("th",{width:"12%",children:Object(j.pb)("Suggestion")})]})}),Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(Ur,{record:e},t)}))})]})}}]),a}(c.Component),Ur=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.record;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.repo_name}),Object(O.jsx)("td",{children:e.repo_id}),Object(O.jsx)("td",{children:e.path}),Object(O.jsx)("td",{children:e.detail.label}),Object(O.jsx)("td",{children:e.detail.suggestion})]})}}]),a}(c.Component),Er=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={loading:!0,errorMsg:"",records:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.listFileScanRecords().then((function(t){e.setState({loading:!1,records:t.data.record_list})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(O.jsxs)(l.a.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center",children:Object(O.jsxs)("div",{className:"cur-view-container",id:"content-scan-records",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Content Scan Records")})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Rr,{loading:this.state.loading,errorMsg:this.state.errorMsg,records:this.state.records})})]})})]})}}]),a}(c.Component),Br=a(262),zr=a.n(Br),Vr=a(1711),qr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.newUsersTempObj,n=t.checkedDepartmentId,r=t.isMembersListLoading,i=t.canCheckUserIds,s=this.props.membersList.map((function(t,r){var i=t.avatar;return i=t.avatar&&t.avatar.length>0?t.avatar.substring(0,t.avatar.length-1)+"100":j.qc+"media/avatars/default.png",Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:!t.email&&Object(O.jsx)("input",{type:"checkbox",className:"vam",onChange:function(){return e.props.onUserChecked(t)},checked:t.userid in a?"checked":""})}),Object(O.jsx)("td",{children:Object(O.jsx)("img",{className:"avatar",src:i,alt:""})}),Object(O.jsx)("td",{children:t.name}),Object(O.jsx)("td",{children:t.mobile}),Object(O.jsx)("td",{children:t.contact_email}),Object(O.jsx)("td",{children:t.email&&Object(O.jsx)("i",{className:"sf2-icon-tick"})})]},n.toString()+t.userid)}));return Object(O.jsxs)("div",{className:"dir-content-main",children:[r&&Object(O.jsx)(I.a,{}),!r&&this.props.membersList.length>0&&Object(O.jsxs)(Vr.a,{hover:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%",children:i.length>0&&Object(O.jsx)("input",{type:"checkbox",className:"vam",checked:this.props.isCheckedAll,onChange:function(){return e.props.onAllUsersChecked()}})}),Object(O.jsx)("th",{width:"10%"}),Object(O.jsx)("th",{width:"20%",children:"\u540d\u79f0"}),Object(O.jsx)("th",{width:"20%",children:"\u624b\u673a\u53f7"}),Object(O.jsx)("th",{width:"30%",children:"\u90ae\u7bb1"}),Object(O.jsx)("th",{width:"15%",children:"\u5df2\u6dfb\u52a0"})]})}),Object(O.jsx)("tbody",{children:s})]}),!r&&0===this.props.membersList.length&&Object(O.jsxs)("div",{className:"message empty-tip text-center",children:[Object(O.jsx)("img",{src:"".concat(j.qc,"media/img/member-list-empty-2x.png"),alt:""}),Object(O.jsx)("h4",{children:"\u6210\u5458\u5217\u8868\u4e3a\u7a7a"})]})]})}}]),a}(c.Component),Wr=a(33),Hr=a.n(Wr),Yr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleChildren=function(e){e.preventDefault(),e.stopPropagation(),n.setState({isChildrenShow:!n.state.isChildrenShow})},n.dropdownToggle=function(e){e.stopPropagation(),n.setState({dropdownOpen:!n.state.dropdownOpen})},n.onMouseEnter=function(){n.setState({active:!0})},n.onMouseLeave=function(){n.state.dropdownOpen||n.setState({active:!1})},n.importDepartmentDialogToggle=function(e){n.setState({active:!1}),n.props.importDepartmentDialogToggle(e)},n.renderTreeNodes=function(e){if(e.length>0)return e.map((function(e){return Object(O.jsx)(a,{department:e,isChildrenShow:n.state.isChildrenShow,onChangeDepartment:n.props.onChangeDepartment,checkedDepartmentId:n.props.checkedDepartmentId,importDepartmentDialogToggle:n.importDepartmentDialogToggle},e.id)}))},n.changeDept=function(e){var t=n.props,a=t.department,r=t.checkedDepartmentId;n.props.onChangeDepartment(e),r!==a.id||n.state.isChildrenShow||n.setState({isChildrenShow:!0})},n.state={isChildrenShow:!1,dropdownOpen:!1,active:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){0===this.props.index&&(this.setState({isChildrenShow:!0}),this.props.onChangeDepartment(this.props.department.id))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isChildrenShow,n=t.department,r=t.checkedDepartmentId,i=Hr()({"folder-toggle-icon fa fa-caret-down":n.children&&this.state.isChildrenShow,"folder-toggle-icon fa fa-caret-right":n.children&&!this.state.isChildrenShow}),s=Hr()({"tree-node-inner":!0,"tree-node-inner-hover":this.state.active,"tree-node-hight-light":r===n.id});return Object(O.jsxs)(c.Fragment,{children:[a&&Object(O.jsxs)("div",{className:s,onClick:function(){return e.changeDept(n.id)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(O.jsx)("span",{className:"tree-node-icon",onClick:function(t){return e.toggleChildren(t)},children:Object(O.jsx)("i",{className:i})}),Object(O.jsx)("span",{className:"tree-node-text",children:n.name}),j.Ab&&Object(O.jsxs)(dr.a,{isOpen:this.state.dropdownOpen,toggle:function(t){return e.dropdownToggle(t)},direction:"down",style:this.state.active?{}:{opacity:0},children:[Object(O.jsx)(ur.a,{tag:"i",className:"fa fa-ellipsis-v cursor-pointer attr-action-icon",title:Object(j.pb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen}),Object(O.jsx)(hr.a,{className:"drop-list",right:!0,children:Object(O.jsx)(pr.a,{onClick:this.importDepartmentDialogToggle.bind(this,n),id:n.id,children:"\u5bfc\u5165\u90e8\u95e8"})})]})]}),this.state.isChildrenShow&&Object(O.jsx)("div",{className:"department-children",children:n.children&&this.renderTreeNodes(n.children)})]})}}]),a}(c.Component),Gr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.departmentsTree;return Object(O.jsx)("div",{className:"dir-content-nav",children:Object(O.jsx)("div",{className:"tree-view tree",children:this.props.isTreeLoading?Object(O.jsx)(I.a,{}):Object(O.jsx)("div",{className:"tree-node",children:t.length>0&&t.map((function(t,a){return Object(O.jsx)(Yr,{index:a,department:t,isChildrenShow:!0,onChangeDepartment:e.props.onChangeDepartment,checkedDepartmentId:e.props.checkedDepartmentId,importDepartmentDialogToggle:e.props.importDepartmentDialogToggle},t.id)}))})})})}}]),a}(c.Component),Qr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggle=function(){n.props.importDepartmentDialogToggle(null)},n.handleSubmit=function(){n.props.onImportDepartmentSubmit(),n.setState({isLoading:!0})},n.state={isLoading:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.departmentsCount,a=e.membersCount,n=e.departmentName;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsxs)(Me.a,{toggle:this.toggle,children:[Object(O.jsx)("span",{children:"\u5bfc\u5165\u90e8\u95e8 "}),Object(O.jsx)("span",{className:"op-target",title:n,children:n})]}),Object(O.jsxs)(_e.a,{children:[Object(O.jsxs)("p",{children:["\u5c06\u8981\u5bfc\u5165 ",Object(O.jsx)("strong",{children:t})," \u4e2a\u90e8\u95e8\uff0c\u5176\u4e2d\u5305\u62ec ",Object(O.jsx)("strong",{children:a})," \u4e2a\u6210\u5458"]}),this.state.isLoading&&Object(O.jsx)(I.a,{})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:"\u53d6\u6d88"}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,children:"\u5bfc\u5165"})]})]})}}]),a}(l.a.Component),Kr=(a(929),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getDepartmentsTree=function(e){for(var t=[],a=[],n=0;n<e.length;n++)-1===t.indexOf(e[n].id)&&t.push(e[n].id),-1===a.indexOf(e[n].parentid)&&a.push(e[n].parentid);var r=a.filter((function(e){return-1!==t.indexOf(e)})),i=a.concat(r).filter((function(e){return-1===a.indexOf(e)||-1===r.indexOf(e)})),s=zr()(e);return s.filter((function(e){var t=s.filter((function(t){return e.id===t.parentid}));return t.length>0&&(e.children=t),-1!==i.indexOf(e.parentid)}))},n.getWorkWeixinDepartmentsList=function(e){P.b.adminListWorkWeixinDepartments(e).then((function(t){if(e)n.setState({importDepartmentChildrenCount:t.data.department.length,importDepartmentMembersCount:n.state.membersTempObj[e].length});else{var a=n.getDepartmentsTree(t.data.department);n.setState({isTreeLoading:!1,departmentsTree:a})}})).catch((function(e){n.handleError(e),n.setState({isTreeLoading:!1,isMembersListLoading:!1}),e.response&&403===e.response.status&&(window.location=j.qc+"sys/useradmin/")}))},n.getWorkWeixinDepartmentMembersList=function(e){n.setState({isMembersListLoading:!0}),P.b.adminListWorkWeixinDepartmentMembers(e,{fetch_child:!0}).then((function(t){var a=n.state.membersTempObj;a[e]=t.data.userlist;var r=n.getCanCheckUserIds(t.data.userlist);n.setState({membersTempObj:a,membersList:t.data.userlist,isMembersListLoading:!1,canCheckUserIds:r})})).catch((function(e){n.setState({isMembersListLoading:!1}),n.handleError(e)}))},n.getCanCheckUserIds=function(e){var t=[];return e.forEach((function(e){e.email||t.push(e.userid)})),t},n.onChangeDepartment=function(e){if(n.setState({newUsersTempObj:{},isCheckedAll:!1,checkedDepartmentId:e}),e in n.state.membersTempObj){var t=n.getCanCheckUserIds(n.state.membersTempObj[e]);n.setState({membersList:n.state.membersTempObj[e],canCheckUserIds:t})}else n.getWorkWeixinDepartmentMembersList(e)},n.onUserChecked=function(e){if(-1!==n.state.canCheckUserIds.indexOf(e.userid)){var t=n.state.newUsersTempObj;e.userid in t?(delete t[e.userid],n.state.isCheckedAll&&n.setState({isCheckedAll:!1})):(t[e.userid]=e,Object.keys(t).length===n.state.canCheckUserIds.length&&n.setState({isCheckedAll:!0})),n.setState({newUsersTempObj:t})}},n.onAllUsersChecked=function(){n.setState({isCheckedAll:!n.state.isCheckedAll},(function(){if(n.state.isCheckedAll){for(var e={},t=n.state.membersList.filter((function(e){return-1!==n.state.canCheckUserIds.indexOf(e.userid)})),a=0;a<t.length;a++)e[t[a].userid]=t[a];n.setState({newUsersTempObj:e})}else n.setState({newUsersTempObj:{}})}))},n.onSubmit=function(){var e=n.state.newUsersTempObj;if("{}"!==JSON.stringify(e)){var t=[];for(var a in e)t.push(e[a]);0!==t.length?P.b.adminAddWorkWeixinUsersBatch(t).then((function(e){if(n.setState({newUsersTempObj:{},isCheckedAll:!1}),e.data.success&&n.handleSubmitSuccess(e.data.success),e.data.failed)for(var t=e.data.failed,a=0;a<t.length;a++)w.a.danger(t[a].name+" "+t[a].error_msg,{duration:3})})).catch((function(e){n.handleError(e)})):w.a.danger("\u672a\u9009\u62e9\u6210\u5458",{duration:3})}},n.handleSubmitSuccess=function(e){for(var t=n.state,a=t.membersTempObj,r=t.membersList,i=t.canCheckUserIds,s=0;s<e.length;s++){var o=e[s],c=o.userid,l=o.name,d=o.email;w.a.success(l+" \u6210\u529f\u5bfc\u5165",{duration:1}),-1!==i.indexOf(c)&&i.splice(i.indexOf(c),1);for(var u=0;u<r.length;u++)if(r[u].userid===c){r[u].email=d;break}for(var h in a)for(var p=0;p<a[h].length;p++)if(a[h][p].userid===c){a[h][p].email=d;break}}n.setState({membersTempObj:a,membersList:r,canCheckUserIds:i})},n.importDepartmentDialogToggle=function(e){n.setState({isImportDepartmentDialogShow:!n.state.isImportDepartmentDialogShow,importDepartment:e},(function(){e&&n.getWorkWeixinDepartmentsList(e.id)}))},n.onImportDepartmentSubmit=function(){var e=n.state.importDepartment;e&&P.b.adminImportWorkWeixinDepartment(e.id).then((function(t){n.setState({isMembersListLoading:!0,checkedDepartmentId:e.id,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[]}),n.getWorkWeixinDepartmentMembersList(e.id),n.importDepartmentDialogToggle(null),t.data.success&&n.handleImportDepartmentSubmitSuccess(t.data.success),t.data.failed&&n.handleImportDepartmentSubmitFailed(t.data.failed)})).catch((function(e){n.handleError(e)}))},n.handleImportDepartmentSubmitSuccess=function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],r="department"===n.type?"\u90e8\u95e8 "+n.department_name+" \u5bfc\u5165\u6210\u529f":n.api_user_name+" \u5bfc\u5165\u6210\u529f";w.a.success(r,{duration:3})}},n.handleImportDepartmentSubmitFailed=function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],r="department"===n.type?n.department_name:n.api_user_name;w.a.danger(r+" "+n.msg,{duration:3})}},n.handleError=function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)},n.state={isTreeLoading:!0,isMembersListLoading:!0,departmentsTree:[],checkedDepartmentId:0,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[],isImportDepartmentDialogShow:!1,importDepartment:null,importDepartmentChildrenCount:0,importDepartmentMembersCount:0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getWorkWeixinDepartmentsList(null)}},{key:"render",value:function(){var e=this.state,t=e.isImportDepartmentDialogShow,a=e.isTreeLoading,r=e.importDepartment,i=e.importDepartmentChildrenCount,s=e.importDepartmentMembersCount,o=!(!j.Ab||!t||a||!r);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"operation-item",onClick:this.onSubmit,children:"\u5bfc\u5165\u7528\u6237"})})),Object(O.jsx)("div",{className:"main-panel-center",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:"\u4f01\u4e1a\u5fae\u4fe1\u96c6\u6210"})}),Object(O.jsxs)("div",{className:"cur-view-content d-flex flex-row",children:[Object(O.jsx)(Gr,{departmentsTree:this.state.departmentsTree,isTreeLoading:this.state.isTreeLoading,onChangeDepartment:this.onChangeDepartment,checkedDepartmentId:this.state.checkedDepartmentId,importDepartmentDialogToggle:this.importDepartmentDialogToggle}),Object(O.jsx)("div",{className:"dir-content-resize"}),Object(O.jsx)(qr,{isMembersListLoading:this.state.isMembersListLoading,membersList:this.state.membersList,checkedDepartmentId:this.state.checkedDepartmentId,newUsersTempObj:this.state.newUsersTempObj,onUserChecked:this.onUserChecked,onAllUsersChecked:this.onAllUsersChecked,isCheckedAll:this.state.isCheckedAll,canCheckUserIds:this.state.canCheckUserIds})]})]})}),o&&Object(O.jsx)(Qr,{importDepartmentDialogToggle:this.importDepartmentDialogToggle,onImportDepartmentSubmit:this.onImportDepartmentSubmit,departmentsCount:i,membersCount:s,departmentName:r.name})]})}}]),a}(c.Component)),Zr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.newUsersTempObj,n=t.checkedDepartmentId,r=t.isMembersListLoading,i=t.canCheckUserIds,s=this.props.membersList.map((function(t,r){var i=t.avatar;return i=t.avatar&&t.avatar.length>0?t.avatar:j.qc+"media/avatars/default.png",Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:!t.email&&Object(O.jsx)("input",{type:"checkbox",className:"vam",onChange:function(){return e.props.onUserChecked(t)},checked:t.userid in a?"checked":""})}),Object(O.jsx)("td",{children:Object(O.jsx)("img",{className:"avatar",src:i,alt:""})}),Object(O.jsx)("td",{children:t.name}),Object(O.jsx)("td",{children:t.mobile}),Object(O.jsx)("td",{children:t.contact_email}),Object(O.jsx)("td",{children:t.email&&Object(O.jsx)("i",{className:"sf2-icon-tick"})})]},n.toString()+t.userid)}));return Object(O.jsxs)("div",{className:"dir-content-main",children:[r&&Object(O.jsx)(I.a,{}),!r&&this.props.membersList.length>0&&Object(O.jsxs)(Vr.a,{hover:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"5%",children:i.length>0&&Object(O.jsx)("input",{type:"checkbox",className:"vam",checked:this.props.isCheckedAll,onChange:function(){return e.props.onAllUsersChecked()}})}),Object(O.jsx)("th",{width:"10%"}),Object(O.jsx)("th",{width:"20%",children:"\u540d\u79f0"}),Object(O.jsx)("th",{width:"20%",children:"\u624b\u673a\u53f7"}),Object(O.jsx)("th",{width:"30%",children:"\u90ae\u7bb1"}),Object(O.jsx)("th",{width:"15%",children:"\u5df2\u6dfb\u52a0"})]})}),Object(O.jsx)("tbody",{children:s})]}),!r&&0===this.props.membersList.length&&Object(O.jsxs)("div",{className:"message empty-tip text-center",children:[Object(O.jsx)("img",{src:"".concat(j.qc,"media/img/member-list-empty-2x.png"),alt:""}),Object(O.jsx)("h4",{children:"\u6210\u5458\u5217\u8868\u4e3a\u7a7a"})]})]})}}]),a}(c.Component),Xr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleChildren=function(e){e.preventDefault(),e.stopPropagation(),n.setState({isChildrenShow:!n.state.isChildrenShow})},n.dropdownToggle=function(e){e.stopPropagation(),n.setState({dropdownOpen:!n.state.dropdownOpen})},n.onMouseEnter=function(){n.setState({active:!0})},n.onMouseLeave=function(){n.state.dropdownOpen||n.setState({active:!1})},n.importDepartmentDialogToggle=function(e){n.setState({active:!1}),n.props.importDepartmentDialogToggle(e)},n.renderTreeNodes=function(e){if(e.length>0)return e.map((function(e){return Object(O.jsx)(a,{department:e,isChildrenShow:n.state.isChildrenShow,onChangeDepartment:n.props.onChangeDepartment,checkedDepartmentId:n.props.checkedDepartmentId,importDepartmentDialogToggle:n.importDepartmentDialogToggle},e.id)}))},n.changeDept=function(e){var t=n.props,a=t.department,r=t.checkedDepartmentId;n.props.onChangeDepartment(e),r!==a.id||n.state.isChildrenShow||n.setState({isChildrenShow:!0})},n.state={isChildrenShow:!1,dropdownOpen:!1,active:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){0===this.props.index&&(this.setState({isChildrenShow:!0}),this.props.onChangeDepartment(this.props.department.id))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isChildrenShow,n=t.department,r=t.checkedDepartmentId,i=Hr()({"folder-toggle-icon fa fa-caret-down":n.children&&this.state.isChildrenShow,"folder-toggle-icon fa fa-caret-right":n.children&&!this.state.isChildrenShow}),s=Hr()({"tree-node-inner":!0,"tree-node-inner-hover":this.state.active,"tree-node-hight-light":r===n.id});return Object(O.jsxs)(c.Fragment,{children:[a&&Object(O.jsxs)("div",{className:s,onClick:function(){return e.changeDept(n.id)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(O.jsx)("span",{className:"tree-node-icon",onClick:function(t){return e.toggleChildren(t)},children:Object(O.jsx)("i",{className:i})}),Object(O.jsx)("span",{className:"tree-node-text",children:n.name}),j.Ab&&Object(O.jsxs)(dr.a,{isOpen:this.state.dropdownOpen,toggle:function(t){return e.dropdownToggle(t)},direction:"down",style:this.state.active?{}:{opacity:0},children:[Object(O.jsx)(ur.a,{tag:"i",className:"fa fa-ellipsis-v cursor-pointer attr-action-icon",title:Object(j.pb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen}),Object(O.jsx)(hr.a,{className:"drop-list",right:!0,children:Object(O.jsx)(pr.a,{onClick:this.importDepartmentDialogToggle.bind(this,n),id:n.id,children:"\u5bfc\u5165\u90e8\u95e8"})})]})]}),this.state.isChildrenShow&&Object(O.jsx)("div",{className:"department-children",children:n.children&&this.renderTreeNodes(n.children)})]})}}]),a}(c.Component),Jr=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.departmentsTree;return Object(O.jsx)("div",{className:"dir-content-nav",children:Object(O.jsx)("div",{className:"tree-view tree",children:this.props.isTreeLoading?Object(O.jsx)(I.a,{}):Object(O.jsx)("div",{className:"tree-node",children:t.length>0&&t.map((function(t,a){return Object(O.jsx)(Xr,{index:a,department:t,isChildrenShow:!0,onChangeDepartment:e.props.onChangeDepartment,checkedDepartmentId:e.props.checkedDepartmentId,importDepartmentDialogToggle:e.props.importDepartmentDialogToggle},t.id)}))})})})}}]),a}(c.Component),$r=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggle=function(){n.props.importDepartmentDialogToggle(null)},n.handleSubmit=function(){n.props.onImportDepartmentSubmit(),n.setState({isLoading:!0})},n.state={isLoading:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.departmentsCount,a=e.membersCount,n=e.departmentName;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,children:[Object(O.jsxs)(Me.a,{toggle:this.toggle,children:[Object(O.jsx)("span",{children:"\u5bfc\u5165\u90e8\u95e8 "}),Object(O.jsx)("span",{className:"op-target",title:n,children:n})]}),Object(O.jsxs)(_e.a,{children:[Object(O.jsxs)("p",{children:["\u5c06\u8981\u5bfc\u5165 ",Object(O.jsx)("strong",{children:t})," \u4e2a\u90e8\u95e8\uff0c\u5176\u4e2d\u5305\u62ec ",Object(O.jsx)("strong",{children:a})," \u4e2a\u6210\u5458"]}),this.state.isLoading&&Object(O.jsx)(I.a,{})]}),Object(O.jsxs)(Ue.a,{children:[Object(O.jsx)(D.a,{color:"secondary",onClick:this.toggle,children:"\u53d6\u6d88"}),Object(O.jsx)(D.a,{color:"primary",onClick:this.handleSubmit,children:"\u5bfc\u5165"})]})]})}}]),a}(l.a.Component),ei=(a(1788),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getDepartmentsTree=function(e){for(var t=[],a=[],n=0;n<e.length;n++)-1===t.indexOf(e[n].id)&&t.push(e[n].id),-1===a.indexOf(e[n].parentid)&&a.push(e[n].parentid);var r=a.filter((function(e){return-1!==t.indexOf(e)})),i=a.concat(r).filter((function(e){return-1===a.indexOf(e)||-1===r.indexOf(e)})),s=zr()(e);return s.filter((function(e){var t=s.filter((function(t){return e.id===t.parentid}));return t.length>0&&(e.children=t),-1!==i.indexOf(e.parentid)}))},n.getDingtalkDepartmentsList=function(e){P.b.adminListDingtalkDepartments(e).then((function(t){if(e)n.setState({importDepartmentChildrenCount:t.data.department.length,importDepartmentMembersCount:n.state.membersTempObj[e].length});else{var a=n.getDepartmentsTree(t.data.department);n.setState({isTreeLoading:!1,departmentsTree:a})}})).catch((function(e){n.handleError(e),n.setState({isTreeLoading:!1,isMembersListLoading:!1}),e.response&&403===e.response.status&&(window.location=j.qc+"sys/useradmin/")}))},n.getDingtalkDepartmentMembersList=function(e){n.setState({isMembersListLoading:!0}),P.b.adminListDingtalkDepartmentMembers(e).then((function(t){var a=n.state.membersTempObj;a[e]=t.data.userlist;var r=n.getCanCheckUserIds(t.data.userlist);n.setState({membersTempObj:a,membersList:t.data.userlist,isMembersListLoading:!1,canCheckUserIds:r})})).catch((function(e){n.setState({isMembersListLoading:!1}),n.handleError(e)}))},n.getCanCheckUserIds=function(e){var t=[];return e.forEach((function(e){e.email||t.push(e.userid)})),t},n.onChangeDepartment=function(e){if(n.setState({newUsersTempObj:{},isCheckedAll:!1,checkedDepartmentId:e}),e in n.state.membersTempObj){var t=n.getCanCheckUserIds(n.state.membersTempObj[e]);n.setState({membersList:n.state.membersTempObj[e],canCheckUserIds:t})}else n.getDingtalkDepartmentMembersList(e)},n.onUserChecked=function(e){if(-1!==n.state.canCheckUserIds.indexOf(e.userid)){var t=n.state.newUsersTempObj;e.userid in t?(delete t[e.userid],n.state.isCheckedAll&&n.setState({isCheckedAll:!1})):(t[e.userid]=e,Object.keys(t).length===n.state.canCheckUserIds.length&&n.setState({isCheckedAll:!0})),n.setState({newUsersTempObj:t})}},n.onAllUsersChecked=function(){n.setState({isCheckedAll:!n.state.isCheckedAll},(function(){if(n.state.isCheckedAll){for(var e={},t=n.state.membersList.filter((function(e){return-1!==n.state.canCheckUserIds.indexOf(e.userid)})),a=0;a<t.length;a++)e[t[a].userid]=t[a];n.setState({newUsersTempObj:e})}else n.setState({newUsersTempObj:{}})}))},n.onSubmit=function(){var e=n.state.newUsersTempObj;if("{}"!==JSON.stringify(e)){var t=[];for(var a in e)t.push(e[a]);0!==t.length?P.b.adminAddDingtalkUsersBatch(t).then((function(e){if(n.setState({newUsersTempObj:{},isCheckedAll:!1}),e.data.success&&n.handleSubmitSuccess(e.data.success),e.data.failed)for(var t=e.data.failed,a=0;a<t.length;a++)w.a.danger(t[a].name+" "+t[a].error_msg,{duration:3})})).catch((function(e){n.handleError(e)})):w.a.danger("\u672a\u9009\u62e9\u6210\u5458",{duration:3})}},n.handleSubmitSuccess=function(e){for(var t=n.state,a=t.membersTempObj,r=t.membersList,i=t.canCheckUserIds,s=0;s<e.length;s++){var o=e[s],c=o.userid,l=o.name,d=o.email;w.a.success(l+" \u6210\u529f\u5bfc\u5165",{duration:1}),-1!==i.indexOf(c)&&i.splice(i.indexOf(c),1);for(var u=0;u<r.length;u++)if(r[u].userid===c){r[u].email=d;break}for(var h in a)for(var p=0;p<a[h].length;p++)if(a[h][p].userid===c){a[h][p].email=d;break}}n.setState({membersTempObj:a,membersList:r,canCheckUserIds:i})},n.importDepartmentDialogToggle=function(e){n.setState({isImportDepartmentDialogShow:!n.state.isImportDepartmentDialogShow,importDepartment:e},(function(){e&&n.getDingtalkDepartmentsList(e.id)}))},n.onImportDepartmentSubmit=function(){var e=n.state.importDepartment;e&&P.b.adminImportDingtalkDepartment(e.id).then((function(t){n.setState({isMembersListLoading:!0,checkedDepartmentId:e.id,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[]}),n.getDingtalkDepartmentMembersList(e.id),n.importDepartmentDialogToggle(null),t.data.success&&n.handleImportDepartmentSubmitSuccess(t.data.success),t.data.failed&&n.handleImportDepartmentSubmitFailed(t.data.failed)})).catch((function(e){n.handleError(e)}))},n.handleImportDepartmentSubmitSuccess=function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],r="department"===n.type?"\u90e8\u95e8 "+n.department_name+" \u5bfc\u5165\u6210\u529f":n.api_user_name+" \u5bfc\u5165\u6210\u529f";w.a.success(r,{duration:3})}},n.handleImportDepartmentSubmitFailed=function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],r="department"===n.type?n.department_name:n.api_user_name;w.a.danger(r+" "+n.msg,{duration:3})}},n.handleError=function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)},n.state={isTreeLoading:!0,isMembersListLoading:!0,departmentsTree:[],checkedDepartmentId:0,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[],isImportDepartmentDialogShow:!1,importDepartment:null,importDepartmentChildrenCount:0,importDepartmentMembersCount:0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getDingtalkDepartmentsList(null)}},{key:"render",value:function(){var e=this.state,t=e.isImportDepartmentDialogShow,a=e.isTreeLoading,r=e.importDepartment,i=e.importDepartmentChildrenCount,s=e.importDepartmentMembersCount,o=!(!j.Ab||!t||a||!r);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"operation-item",onClick:this.onSubmit,children:"\u5bfc\u5165\u7528\u6237"})})),Object(O.jsx)("div",{className:"main-panel-center",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:"\u9489\u9489\u96c6\u6210"})}),Object(O.jsxs)("div",{className:"cur-view-content d-flex flex-row",children:[Object(O.jsx)(Jr,{departmentsTree:this.state.departmentsTree,isTreeLoading:this.state.isTreeLoading,onChangeDepartment:this.onChangeDepartment,checkedDepartmentId:this.state.checkedDepartmentId,importDepartmentDialogToggle:this.importDepartmentDialogToggle}),Object(O.jsx)("div",{className:"dir-content-resize"}),Object(O.jsx)(Zr,{isMembersListLoading:this.state.isMembersListLoading,membersList:this.state.membersList,checkedDepartmentId:this.state.checkedDepartmentId,newUsersTempObj:this.state.newUsersTempObj,onUserChecked:this.onUserChecked,onAllUsersChecked:this.onAllUsersChecked,isCheckedAll:this.state.isCheckedAll,canCheckUserIds:this.state.canCheckUserIds})]})]})}),o&&Object(O.jsx)($r,{importDepartmentDialogToggle:this.importDepartmentDialogToggle,onImportDepartmentSubmit:this.onImportDepartmentSubmit,departmentsCount:i,membersCount:s,departmentName:r.name})]})}}]),a}(c.Component)),ti=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getItemsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getItemsByPage(n.props.currentPage+1)},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=(t.pageInfo,t.curPerPage),s=t.hasNextPage,o=t.currentPage;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center mt-4",children:n});var l=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No invitations")})}),d=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Inviter")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Accepter")}),Object(O.jsx)("th",{width:"9%",children:Object(j.pb)("Type")}),Object(O.jsx)("th",{width:"14%",children:Object(j.pb)("Invited at")}),Object(O.jsx)("th",{width:"14%",children:Object(j.pb)("Accepted at")}),Object(O.jsx)("th",{width:"18%",children:Object(j.pb)("Expired at")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(ai,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteItem:e.props.deleteItem},a)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:s,curPerPage:i,resetPerPage:this.props.resetPerPage})]});return r.length?d:l}}]),a}(c.Component),ai=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.deleteItem=function(){n.props.deleteItem(n.props.item)},n.translateOperations=function(e){var t="";if("Delete"===e)t=Object(j.pb)("Delete");return t},n.onMenuItemClick=function(e){if("Delete"===e)n.deleteItem()},n.getInviteTypeText=function(){var e="";if("Guest"===n.props.item.invite_type)e=Object(j.pb)("Guest");return e},n.state={isOpIconShown:!1,highlight:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state.isOpIconShown;return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.inviter_email,name:e.inviter_name})}),Object(O.jsx)("td",{children:e.accept_time?Object(O.jsx)(Ie,{email:e.accepter_email,name:e.accepter_name}):e.accepter_email}),Object(O.jsx)("td",{children:this.getInviteTypeText()}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{title:L()(e.invite_time).format("llll"),children:L()(e.invite_time).fromNow()})}),Object(O.jsx)("td",{children:e.accept_time?Object(O.jsx)("span",{title:L()(e.accept_time).format("llll"),children:L()(e.accept_time).fromNow()}):"--"}),Object(O.jsx)("td",{children:e.is_expired?Object(O.jsx)("span",{className:"text-red",children:L()(e.expire_time).format("YYYY-MM-DD HH:mm")}):L()(e.expire_time).format("YYYY-MM-DD HH:mm")}),Object(O.jsx)("td",{children:t&&Object(O.jsx)(at.a,{operations:["Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]})})}}]),a}(c.Component),ni=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getItemsByPage=function(e){var t=n.state.perPage;P.b.sysAdminListInvitations(e,t).then((function(a){n.setState({loading:!1,items:a.data.invitation_list,hasNextPage:m.a.hasNextPage(e,t,a.data.total_count),currentPage:e})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.deleteItem=function(e){var t=e.token;P.b.sysAdminDeleteInvitation(t).then((function(e){var a=n.state.items.filter((function(e){return e.token!=t}));n.setState({items:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteItemInBatch=function(){P.b.sysAdminDeleteExpiredInvitations().then((function(e){var t=n.state.items,a=n.state.items.filter((function(e){return!e.is_expired||e.accept_time}));a.length<t.length&&(n.setState({items:a}),w.a.success(Object(j.pb)("Operation succeeded.")))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getItemsByPage(1)}))},n.state={loading:!0,errorMsg:"",items:[],totalItemCount:0,hasNextPage:!1,currentPage:1,perPage:25},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getItemsByPage(e.state.currentPage)}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.deleteItemInBatch,children:Object(j.pb)("Delete Expired Invitations")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Invitations")})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(ti,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getItemsByPage:this.getItemsByPage,deleteItem:this.deleteItem})})]})})]})}}]),a}(c.Component),ri=a(228),ii=a(54),si=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).onKeyDown=function(e){e.stopPropagation()},e.toggle=function(){if(e.isContentChanged()){var t=e.getCurrentContent();e.props.onCommit(t)}e.props.onCloseEditorDialog()},e.isContentChanged=function(){return e.simpleEditor.hasContentChange()},e.getCurrentContent=function(){return e.simpleEditor.getMarkdown()},e.setSimpleEditorRef=function(t){e.simpleEditor=t},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.content,a=e.title;return Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.toggle,onKeyDown:this.onKeyDown,wrapClassName:"conditions-editor-dialog-wrapper",className:"conditions-editor-dialog",contentClassName:"conditions-editor-dialog-content",size:"lg",style:{width:770},children:[Object(O.jsx)(Me.a,{className:"conditions-editor-dialog-title",toggle:this.toggle,children:a}),Object(O.jsx)(_e.a,{className:"conditions-editor-dialog-main",children:Object(O.jsx)(ii.g,{onRef:this.setSimpleEditorRef.bind(this),value:t||""})})]})}}]),a}(l.a.Component);si.defaultProps={title:Object(j.pb)("Terms")};var oi=si,ci=(a(1789),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleNameChange=function(e){n.setState({name:e.target.value.trim()})},n.handleVersionNumberChange=function(e){n.setState({versionNumber:e.target.value.trim()})},n.handleTextChange=function(e){n.setState({text:e.target.value.trim()})},n.setActive=function(){n.setState({isActive:!0})},n.setInActive=function(){n.setState({isActive:!1})},n.addTerm=function(){var e=n.state,t=e.name,a=e.versionNumber,r=e.text,i=e.isActive;""!==t?""!==a?isNaN(a)?n.setState({errMsg:Object(j.pb)("Version Number must be a number.")}):""!==r?n.props.isUpdate?n.props.updateTerm(t,a,r,i):n.props.addTerm(t,a,r,i):n.setState({errMsg:Object(j.pb)("Text is required.")}):n.setState({errMsg:Object(j.pb)("Version Number is required.")}):n.setState({errMsg:Object(j.pb)("Name is required.")})},n.onContentClick=function(){n.setState({isConditionsEditorDialogShow:!n.state.isConditionsEditorDialogShow})},n.onCloseEditorDialog=function(){n.setState({isConditionsEditorDialogShow:!1})},n.onUpdateContent=function(e){n.setState({text:e})},n.state={name:"",versionNumber:"",text:"",isActive:!0,errorMsg:"",isConditionsEditorDialogShow:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.oldTermObj;e&&this.setState({name:e.name,versionNumber:e.version_number,text:e.text,isActive:!(""===e.activate_time)})}},{key:"render",value:function(){var e=this.props.isUpdate?Object(j.pb)("Update Terms and Conditions"):Object(j.pb)("Add Terms and Conditions");return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)(b.a,{isOpen:!0,toggle:this.props.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.props.toggle,children:e}),Object(O.jsxs)(_e.a,{children:[Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{for:"name",children:Object(j.pb)("Name")}),Object(O.jsx)(ne.a,{id:"name",value:this.state.name,onChange:this.handleNameChange})]}),Object(O.jsxs)(Le.a,{children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Version Number")}),Object(O.jsx)(ne.a,{value:this.state.versionNumber,onChange:this.handleVersionNumberChange})]}),Object(O.jsxs)(Le.a,{className:"form-content",children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Text")}),Object(O.jsx)(ri.a,{content:this.state.text,onContentClick:this.onContentClick})]}),Object(O.jsxs)(Le.a,{tag:"fieldset",children:[Object(O.jsx)(Ve.a,{children:Object(j.pb)("Activated")}),Object(O.jsx)(Le.a,{check:!0,children:Object(O.jsxs)(Ve.a,{check:!0,children:[Object(O.jsx)(ne.a,{type:"radio",checked:this.state.isActive,onChange:this.setActive})," ",Object(j.pb)("On")]})}),Object(O.jsx)(Le.a,{check:!0,children:Object(O.jsxs)(Ve.a,{check:!0,children:[Object(O.jsx)(ne.a,{type:"radio",checked:!this.state.isActive,onChange:this.setInActive})," ",Object(j.pb)("Off")]})})]}),this.state.errMsg&&Object(O.jsx)(Be.a,{color:"danger",children:this.state.errMsg})]}),Object(O.jsx)(Ue.a,{children:Object(O.jsx)(D.a,{color:"primary",onClick:this.addTerm,children:Object(j.pb)("Submit")})})]}),this.state.isConditionsEditorDialogShow&&Object(O.jsx)(oi,{content:this.state.text,onCommit:this.onUpdateContent,onCloseEditorDialog:this.onCloseEditorDialog})]})}}]),a}(l.a.Component)),li=/\[.+\]\(\S+\)|<img src=(\S+).+\/>|!\[\]\(\S+\)|<\S+>/g,di=/^<img src="(\S+)" .+\/>/,ui=/^!\[\]\((\S+)\)/,hi=/^\[.+\]\(\S+\)/,pi=/^<\S+>$/,bi=function(e){for(var t="",a=e.replace(li,""),n=0;n<a.length&&("#"===a[n]||("\n"===a[n]?t+=" ":t+=a[n],30!==t.length));n++);var r=e.match(li);if(r){var i=function(e){var t={links:[],images:[]};return e.forEach((function(e){if(e.search(hi)>=0||e.search(pi)>=0)t.links.push(e);else{var a=e.match(di),n=e.match(ui);a?t.images.push(a[1]):n&&t.images.push(n[1])}})),t}(r);return{previewText:t,images:i.images,links:i.links}}return{previewText:t,images:[],links:[]}},gi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).toggle=function(){e.props.onClosePreviewDialog()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.content;return Object(O.jsxs)(b.a,{isOpen:!0,size:"lg",style:{width:600},wrapClassName:"conditions-perview-wrapper",toggle:this.toggle,children:[Object(O.jsx)(Me.a,{toggle:this.toggle,children:t}),Object(O.jsx)(_e.a,{children:Object(O.jsx)(ri.a,{content:a})})]})}}]),a}(l.a.Component);gi.defaultProps={title:Object(j.pb)("Terms")};var ji=gi,mi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.toggleUpdateDialog=function(e){n.setState({isUpdateDialogOpen:!n.state.isUpdateDialogOpen})},n.toggleDeleteDialog=function(e){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.toggleTermsContentDialog=function(e){n.setState({isTermsPerviewDialogOpen:!n.state.isTermsPerviewDialogOpen})},n.onMenuItemClick=function(e){switch(e){case"Update":n.toggleUpdateDialog();break;case"Delete":n.toggleDeleteDialog()}},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.deleteTerm=function(){n.props.deleteTerm(n.props.item.id),n.toggleDeleteDialog()},n.updateTerm=function(e,t,a,r){n.props.updateTerm(n.props.item.id,e,t,a,r),n.toggleUpdateDialog()},n.translateOperations=function(e){var t="";switch(e){case"Update":t=Object(j.pb)("Update");break;case"Delete":t=Object(j.pb)("Delete")}return t},n.state={itemContent:"...",isOpIconShown:!1,isUpdateDialogOpen:!1,isDeleteDialogOpen:!1,isTermsPerviewDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.item.text;ii.k.process(t).then((function(t){var a=String(t);e.setState({itemContent:a})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.item.text!==this.props.item.text){var a=e.item.text;ii.k.process(a).then((function(e){var a=String(e);t.setState({itemContent:a})}))}}},{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isDeleteDialogOpen,n=t.isUpdateDialogOpen,r=t.isTermsPerviewDialogOpen,i=bi(e.text),s='<span class="op-target">'+m.a.HTMLescape(e.name)+"</span>",o=Object(j.pb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",s);return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:e.name}),Object(O.jsx)("td",{children:e.version_number}),Object(O.jsx)("td",{className:"ellipsis",children:Object(O.jsx)("a",{href:"#",onClick:this.toggleTermsContentDialog,children:i.previewText})}),Object(O.jsx)("td",{children:L()(e.ctime).fromNow()}),Object(O.jsx)("td",{children:e.activate_time?L()(e.activate_time).fromNow():"--"}),Object(O.jsx)("td",{children:this.state.isOpIconShown&&Object(O.jsx)(at.a,{operations:["Update","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),a&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(Ke.a,{title:Object(j.pb)("Delete T&C"),message:o,toggleDialog:this.toggleDeleteDialog,executeOperation:this.deleteTerm,confirmBtnText:Object(j.pb)("Delete")})}),n&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(ci,{updateTerm:this.updateTerm,toggle:this.toggleUpdateDialog,isUpdate:!0,oldTermObj:e})}),r&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(ji,{content:e.text,onClosePreviewDialog:this.toggleTermsContentDialog})})]})}}]),a}(c.Component),fi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return Object(O.jsx)(I.a,{});if(n)return Object(O.jsx)("p",{className:"error text-center",children:n});var i=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No terms and conditions")})}),s=Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"10%",children:Object(j.pb)("Version")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Text")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Created")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Activated")}),Object(O.jsx)("th",{width:"5%"})]})}),r&&Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(mi,{item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteTerm:e.props.deleteTerm,updateTerm:e.props.updateTerm},a)}))})]})});return r.length?s:i}}]),a}(c.Component),Oi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleAddTermDialog=function(){n.setState({isAddTermDialogOpen:!n.state.isAddTermDialogOpen})},n.addTerm=function(e,t,a,n){P.b.sysAdminAddTermAndCondition(e,t,a,n).then((function(e){location.reload()})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.updateTerm=function(e,t,a,r,i){P.b.sysAdminUpdateTermAndCondition(e,t,a,r,i).then((function(t){var a=n.state.termList.map((function(a){return a.id==e?t.data:a}));n.setState({termList:a}),w.a.success(Object(j.pb)("Update succeeded."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.deleteTerm=function(e){P.b.sysAdminDeleteTermAndCondition(e).then((function(t){var a=n.state.termList.filter((function(t){return t.id!=e}));n.setState({termList:a}),w.a.success(Object(j.pb)("Successfully deleted 1 item."))})).catch((function(e){var t=m.a.getErrorMsg(e);w.a.danger(t)}))},n.state={loading:!0,errorMsg:"",termList:[],isAddTermDialogOpen:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.b.sysAdminListTermsAndConditions().then((function(t){e.setState({termList:t.data.term_and_condition_list,loading:!1})})).catch((function(t){e.setState({loading:!1,errorMsg:m.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.termList,a=e.isAddTermDialogOpen;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsx)(D.a,{className:"btn btn-secondary operation-item",onClick:this.toggleAddTermDialog,children:Object(j.pb)("Add")})})),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Terms and Conditions")})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(fi,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,deleteTerm:this.deleteTerm,updateTerm:this.updateTerm})})]})}),a&&Object(O.jsx)(Ht.a,{children:Object(O.jsx)(ci,{isUpdate:!1,addTerm:this.addTerm,toggle:this.toggleAddTermDialog})})]})}}]),a}(c.Component),vi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"all",urlPart:"all",text:Object(j.pb)("All")},{name:"unhandled",urlPart:"unhandled",text:Object(j.pb)("Unhandled")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return Object(O.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(O.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,a){return Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/virus-files/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},a)}))})})}}]),a}(l.a.Component),xi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){n.props.handleFile(n.props.virusFile.virus_id,e)},n.translateOperations=function(e){var t="";switch(e){case"delete":t=Object(j.pb)("Delete");break;case"ignore":t=Object(j.pb)("Ignore");break;case"do-not-ignore":t=Object(j.pb)("Don't ignore")}return t},n.state={highlight:!1,isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.virusFile,t="",a=[];return e.has_deleted?t=Object(O.jsx)("span",{className:"text-green",children:Object(j.pb)("Deleted")}):e.has_ignored?(t=Object(O.jsx)("span",{className:"text-orange",children:Object(j.pb)("Ignored")}),a=["do-not-ignore"]):(t=Object(O.jsx)("span",{className:"text-red",children:Object(j.pb)("Unhandled")}),a=["delete","ignore"]),Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{children:e.repo_name}),Object(O.jsx)("td",{children:e.repo_owner}),Object(O.jsx)("td",{children:e.file_path}),Object(O.jsx)("td",{children:t}),Object(O.jsx)("td",{children:a.length>0&&this.state.isOpIconShown&&Object(O.jsx)(at.a,{operations:a,translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]})}}]),a}(c.Component),yi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.virusFiles,i=t.curPerPage,s=t.hasNextPage,o=t.currentPage;return a?Object(O.jsx)(I.a,{}):n?Object(O.jsx)("p",{className:"error text-center mt-4",children:n}):Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"27%",children:Object(j.pb)("Library")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Owner")}),Object(O.jsx)("th",{width:"28%",children:Object(j.pb)("Virus File")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Status")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(xi,{virusFile:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,handleFile:e.props.handleFile},a)}))})]}),r.length>0&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:s,curPerPage:i,resetPerPage:this.props.resetPerPage})]})}}]),a}(c.Component),Si=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getListByPage=function(e){var t=n.state.perPage;P.b.listVirusFiles(e,t).then((function(e){var t=e.data;n.setState({loading:!1,virusFiles:t.virus_file_list,hasNextPage:t.has_next_page})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getListByPage(1)}))},n.handleFile=function(e,t){var a;switch(t){case"delete":a=P.b.deleteVirusFile(e);break;case"ignore":a=P.b.toggleIgnoreVirusFile(e,!0);break;case"do-not-ignore":a=P.b.toggleIgnoreVirusFile(e,!1)}a.then((function(a){n.setState({virusFiles:n.state.virusFiles.map((function(n){return n.virus_id==e&&("delete"==t?n.has_deleted=!0:n=a.data.virus_file),n}))})})).catch((function(e){w.a.danger(m.a.getErrorMsg(e))}))},n.state={loading:!0,errorMsg:"",virusFiles:[],currentPage:1,perPage:25,hasNextPage:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(vi,{currentItem:"all"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(yi,{loading:this.state.loading,errorMsg:this.state.errorMsg,virusFiles:this.state.virusFiles,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getListByPage,handleFile:this.handleFile})})]})})]})}}]),a}(c.Component),Di=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onMenuItemClick=function(e){n.props.handleFile(n.props.virusFile.virus_id,e)},n.translateOperations=function(e){var t="";switch(e){case"delete":t=Object(j.pb)("Delete");break;case"ignore":t=Object(j.pb)("Ignore");break;case"do-not-ignore":t=Object(j.pb)("Don't ignore")}return t},n.toggleItemSelected=function(e){n.props.toggleItemSelected(n.props.virusFile,e.target.checked)},n.state={highlight:!1,isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.virusFile,t="",a=[];return e.has_deleted?t=Object(O.jsx)("span",{className:"text-green",children:Object(j.pb)("Deleted")}):e.has_ignored?(t=Object(O.jsx)("span",{className:"text-orange",children:Object(j.pb)("Ignored")}),a=["do-not-ignore"]):(t=Object(O.jsx)("span",{className:"text-red",children:Object(j.pb)("Unhandled")}),a=["delete","ignore"]),Object(O.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(O.jsx)("td",{className:"text-center",children:Object(O.jsx)("input",{type:"checkbox",checked:e.isSelected,onChange:this.toggleItemSelected})}),Object(O.jsx)("td",{children:e.repo_name}),Object(O.jsx)("td",{children:e.repo_owner}),Object(O.jsx)("td",{children:e.file_path}),Object(O.jsx)("td",{children:t}),Object(O.jsx)("td",{children:a.length>0&&this.state.isOpIconShown&&Object(O.jsx)(at.a,{operations:a,translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]})}}]),a}(c.Component),Pi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPage=function(){n.props.getListByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getListByPage(n.props.currentPage+1)},n.state={isItemFreezed:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.virusFiles,i=t.curPerPage,s=t.hasNextPage,o=t.currentPage,l=t.isAllItemsSelected;return a?Object(O.jsx)(I.a,{}):n?Object(O.jsx)("p",{className:"error text-center mt-4",children:n}):Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"3%",className:"text-center",children:Object(O.jsx)("input",{type:"checkbox",checked:l,onChange:this.props.toggleAllSelected})}),Object(O.jsx)("th",{width:"24%",children:Object(j.pb)("Library")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Owner")}),Object(O.jsx)("th",{width:"28%",children:Object(j.pb)("Virus File")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Status")}),Object(O.jsx)("th",{width:"5%"})]})}),Object(O.jsx)("tbody",{children:r.map((function(t,a){return Object(O.jsx)(Di,{virusFile:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,handleFile:e.props.handleFile,toggleItemSelected:e.props.toggleItemSelected},a)}))})]}),r.length>0&&Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:s,curPerPage:i,resetPerPage:this.props.resetPerPage})]})}}]),a}(c.Component),wi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getListByPage=function(e){var t=n.state.perPage;P.b.listVirusFiles(e,t,!1).then((function(e){var t=e.data,a=t.virus_file_list.map((function(e){return e.isSelected=!1,e}));n.setState({loading:!1,virusFiles:a,hasNextPage:t.has_next_page})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getListByPage(1)}))},n.handleFile=function(e,t){var a;switch(t){case"delete":a=P.b.deleteVirusFile(e);break;case"ignore":a=P.b.toggleIgnoreVirusFile(e,!0);break;case"do-not-ignore":a=P.b.toggleIgnoreVirusFile(e,!1)}a.then((function(a){n.setState({virusFiles:n.state.virusFiles.map((function(n){return n.virus_id==e&&("delete"==t?n.has_deleted=!0:n=a.data.virus_file),n}))})})).catch((function(e){w.a.danger(m.a.getErrorMsg(e))}))},n.toggleAllSelected=function(){n.setState((function(e){return{isAllItemsSelected:!e.isAllItemsSelected,virusFiles:n.state.virusFiles.map((function(t){return t.isSelected=!e.isAllItemsSelected,t}))}}))},n.toggleItemSelected=function(e,t){n.setState({virusFiles:n.state.virusFiles.map((function(a){return a===e&&(a.isSelected=t),a}))},(function(){n.setState({isAllItemsSelected:!n.state.virusFiles.some((function(e){return!e.isSelected}))})}))},n.handleSelectedItems=function(e){var t=n.state.virusFiles.filter((function(t){return"delete-virus"==e?t.isSelected&&!t.has_deleted:t.isSelected&&!t.has_ignored})).map((function(e){return e.virus_id}));P.b.batchProcessVirusFiles(t,e).then((function(t){var a=n.state.virusFiles;t.data.success.forEach((function(t){var n=a.find((function(e){return e.virus_id==t.virus_id}));"delete-virus"==e?n.has_deleted=!0:n.has_ignored=!0})),n.setState({virusFiles:a}),t.data.failed.forEach((function(t){var n=a.find((function(e){return e.virus_id==t.virus_id})),r="delete-virus"==e?Object(j.pb)("Failed to delete %(virus_file) from library %(library): %(error_msg)"):Object(j.pb)("Failed to ignore %(virus_file) from library %(library): %(error_msg)");r=r.replace("%(virus_file)",n.file_path).replace("%(library)",n.repo_name).replace("%(error_msg)",t.error_msg),w.a.danger(r)}))})).catch((function(e){w.a.danger(m.a.getErrorMsg(e))}))},n.deleteSelectedItems=function(){n.handleSelectedItems("delete-virus")},n.ignoreSelectedItems=function(){n.handleSelectedItems("ignore-virus")},n.state={loading:!0,errorMsg:"",virusFiles:[],isAllItemsSelected:!1,selectedItems:[],currentPage:1,perPage:25,hasNextPage:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return Object(O.jsxs)(c.Fragment,{children:[this.state.virusFiles.some((function(e){return e.isSelected}))?Object(O.jsx)(N,Object(n.a)(Object(n.a)({},this.props),{},{children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(D.a,{onClick:this.deleteSelectedItems,className:"operation-item",children:Object(j.pb)("Delete")}),Object(O.jsx)(D.a,{onClick:this.ignoreSelectedItems,className:"operation-item",children:Object(j.pb)("Ignore")})]})})):Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(vi,{currentItem:"unhandled"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Pi,{loading:this.state.loading,errorMsg:this.state.errorMsg,virusFiles:this.state.virusFiles,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getListByPage,handleFile:this.handleFile,isAllItemsSelected:this.state.isAllItemsSelected,toggleAllSelected:this.toggleAllSelected,toggleItemSelected:this.toggleItemSelected})})]})})]})}}]),a}(c.Component),Ii=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).navItems=[{name:"adminOperationLogs",urlPart:"admin-logs/operation",text:Object(j.pb)("Admin Operation Logs")},{name:"adminLoginLogs",urlPart:"admin-logs/login",text:Object(j.pb)("Admin Login Logs")}],n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return Object(O.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(O.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,a){return Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(g.a,{to:"".concat(j.qc,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},a)}))})})}}]),a}(l.a.Component),ki=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,s=e.hasNextPage;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No Admin operation logs")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Operation")}),Object(O.jsx)("th",{width:"50%",children:Object(j.pb)("Detail")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Time")})]})}),n&&Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(Ci,{item:e},t)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:s,curPerPage:r,resetPerPage:this.props.resetPerPage})]});return n.length?l:o}}]),a}(c.Component),Ci=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getOperationText=function(e){switch(e){case"repo_create":return Object(j.pb)("Create Library");case"repo_delete":return Object(j.pb)("Delete Library");case"repo_transfer":return Object(j.pb)("Transfer Library");case"group_create":return Object(j.pb)("Create Group");case"group_transfer":return Object(j.pb)("Transfer Group");case"group_delete":return Object(j.pb)("Delete Group");case"user_add":return Object(j.pb)("Add User");case"user_delete":return Object(j.pb)("Delete User");default:return""}},n.getOperationDetail=function(e){var t=e.detail,a="";t.owner&&(a=j.qc+"sys/users/"+encodeURIComponent(t.owner)+"/");var n="";t.email&&(n=j.qc+"sys/users/"+encodeURIComponent(t.email)+"/");var r="",i="",s="";switch("repo_create"!=e.operation&&"repo_delete"!=e.operation&&"repo_transfer"!=e.operation||(i=j.qc+"sys/libraries/"+t.id+"/"+encodeURIComponent(t.name)+"/"),"group_create"!=e.operation&&"group_delete"!=e.operation&&"group_transfer"!=e.operation||(s=j.qc+"sys/groups/"+t.id+"/libraries/"),e.operation){case"repo_create":return r=Object(j.pb)("Created library {library_name} with {owner} as its owner").replace("{owner}",'<a href="'+a+'">'+t.owner+"</a>"),r=j.Ab&&j.eb?r.replace("{library_name}",'<a href="'+i+'">'+t.name+"</a>"):r.replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"repo_delete":return r=Object(j.pb)("Deleted library {library_name}").replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"repo_transfer":return r=Object(j.pb)("Transferred library {library_name} from {user_from} to {user_to}").replace("{user_from}",'<span class="font-weight-bold">'+t.from+"</span>").replace("{user_to}",'<span class="font-weight-bold">'+t.to+"</span>"),r=j.Ab&&j.eb?r.replace("{library_name}",'<a href="'+i+'">'+t.name+"</a>"):r.replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"group_create":return r=Object(j.pb)("Created group {group_name}").replace("{group_name}",'<a href="'+s+'">'+t.name+"</a>");case"group_transfer":return r=Object(j.pb)("Transferred group {group_name} from {user_from} to {user_to}").replace("{user_from}",'<span class="font-weight-bold">'+t.from+"</span>").replace("{user_to}",'<span class="font-weight-bold">'+t.to+"</span>").replace("{group_name}",'<a href="'+s+'">'+t.name+"</a>");case"group_delete":return r=Object(j.pb)("Deleted group {group_name}").replace("{group_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"user_add":return r=Object(j.pb)("Added user {user}").replace("{user}",'<a href="'+n+'">'+t.email+"</a>");case"user_delete":return r=Object(j.pb)("Deleted user {user}").replace("{user}",'<span class="font-weight-bold">'+t.email+"</span>");default:return""}},n.state={isOpIconShown:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item;return Object(O.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsx)("td",{children:this.getOperationText(e.operation)}),Object(O.jsx)("td",{children:Object(O.jsx)("span",{dangerouslySetInnerHTML:{__html:this.getOperationDetail(e)}})}),Object(O.jsx)("td",{children:L()(e.datetime).fromNow()})]})}}]),a}(c.Component),Ni=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getLogsByPage=function(e){var t=n.state.perPage;P.b.sysAdminListAdminLogs(e,t).then((function(a){n.setState({logList:a.data.data,loading:!1,currentPage:e,hasNextPage:m.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getLogsByPage(n.initPage)}))},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,r=e.perPage,i=e.hasNextPage;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Ii,{currentItem:"adminOperationLogs"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(ki,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:r,hasNextPage:i,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})})]})})]})}}]),a}(c.Component),Mi=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getPreviousPage=function(){n.props.getLogsByPage(n.props.currentPage-1)},n.getNextPage=function(){n.props.getLogsByPage(n.props.currentPage+1)},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,s=e.hasNextPage;if(t)return Object(O.jsx)(I.a,{});if(a)return Object(O.jsx)("p",{className:"error text-center",children:a});var o=Object(O.jsx)(Oe.a,{children:Object(O.jsx)("h2",{children:Object(j.pb)("No Admin login logs")})}),l=Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Name")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("IP")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Status")}),Object(O.jsx)("th",{width:"25%",children:Object(j.pb)("Time")})]})}),n&&Object(O.jsx)("tbody",{children:n.map((function(e,t){return Object(O.jsx)(_i,{item:e},t)}))})]}),Object(O.jsx)(ce.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:s,curPerPage:r,resetPerPage:this.props.resetPerPage})]});return n.length?l:o}}]),a}(c.Component),_i=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item;return Object(O.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(O.jsx)("td",{children:Object(O.jsx)(Ie,{email:e.email,name:e.name})}),Object(O.jsx)("td",{children:e.login_ip}),Object(O.jsx)("td",{children:e.login_success?Object(j.pb)("Success"):Object(j.pb)("Failed")}),Object(O.jsx)("td",{children:L()(e.login_time).fromNow()})]})}}]),a}(c.Component),Ai=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getLogsByPage=function(e){var t=n.state.perPage;P.b.sysAdminListAdminLoginLogs(e,t).then((function(a){n.setState({logList:a.data.data,loading:!1,currentPage:e,hasNextPage:m.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){n.setState({loading:!1,errorMsg:m.a.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getLogsByPage(n.initPage)}))},n.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1},n.initPage=1,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,r=e.perPage,i=e.hasNextPage;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center flex-row",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)(Ii,{currentItem:"adminLoginLogs"}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsx)(Mi,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:r,hasNextPage:i,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})})]})})]})}}]),a}(c.Component),Li=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).listAbuseReports=function(){P.b.sysAdminListAbuseReports().then((function(e){n.setState({abuseReportList:e.data.abuse_report_list})})).catch((function(e){n.handleError(e)}))},n.updateAbuseReport=function(e,t){P.b.sysAdminUpdateAbuseReport(e,t).then((function(e){var a=n.state.abuseReportList.map((function(a,n){return a.id===t&&(a.handled=e.data.handled),a}));n.setState({abuseReportList:a})})).catch((function(e){n.handleError(e)}))},n.handleError=function(e){e.response?w.a.danger(e.response.data.error_msg||e.response.data.detail||Object(j.pb)("Error"),{duration:3}):w.a.danger(Object(j.pb)("Please check the network."),{duration:3})},n.state={abuseReportList:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.listAbuseReports()}},{key:"render",value:function(){var e=this,t=(m.a.isDesktop(),this.state.abuseReportList.map((function(t,a){var n=(!t.handled).toString(),r=t.id,i=j.qc+"lib/"+t.repo_id+"/file"+t.file_path;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.repo_name}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:i,target:"_blank",children:t.file_path})}),Object(O.jsx)("td",{children:t.reporter}),Object(O.jsx)("td",{children:t.abuse_type}),Object(O.jsx)("td",{children:t.description}),Object(O.jsx)("td",{children:L()(t.time).format("YYYY-MM-DD")}),Object(O.jsx)("td",{children:Object(O.jsx)("p",{onClick:e.updateAbuseReport.bind(e,n,r),className:"op-target ellipsis ellipsis-op-target cursor-pointer",children:Object(j.pb)(t.handled.toString())})})]},a)})));return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(N,Object(n.a)({},this.props)),Object(O.jsx)("div",{className:"main-panel-center",children:Object(O.jsxs)("div",{className:"cur-view-container",children:[Object(O.jsx)("div",{className:"cur-view-path",children:Object(O.jsx)("h3",{className:"sf-heading",children:Object(j.pb)("Abuse Reports")})}),Object(O.jsx)("div",{className:"cur-view-content",children:Object(O.jsxs)("table",{className:"table-hover",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Library")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("File")}),Object(O.jsx)("th",{width:"10%",children:Object(j.pb)("Reporter")}),Object(O.jsx)("th",{width:"15%",children:Object(j.pb)("Abuse Type")}),Object(O.jsx)("th",{width:"20%",children:Object(j.pb)("Description")}),Object(O.jsx)("th",{width:"10%",children:Object(j.pb)("Time")}),Object(O.jsx)("th",{width:"5%",children:Object(j.pb)("Handled")})]})}),Object(O.jsx)("tbody",{children:t})]})})]})})]})}}]),a}(c.Component),Ti=(a(221),a(130),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getCurrentTabForPageList=function(e){for(var t,a,n="".concat(j.qc,"sys/"),r=0,i=e.length;r<i;r++){t=e[r].urlPartList,a=e[r].tab;for(var s=0,o=t.length;s<o;s++)if(-1!=location.href.indexOf("".concat(n).concat(t[s])))return a}},n.onCloseSidePanel=function(){n.setState({isSidePanelClosed:!n.state.isSidePanelClosed})},n.tabItemClick=function(e){n.setState({currentTab:e}),m.a.isDesktop()||n.state.isSidePanelClosed||n.setState({isSidePanelClosed:!0})},n.toggleSidePanel=function(){n.setState({isSidePanelClosed:!n.state.isSidePanelClosed})},n.state={isSidePanelClosed:!1,currentTab:"file-scan"},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2],a=this.getCurrentTabForPageList([{tab:"devices",urlPartList:["desktop-devices","mobile-devices","device-errors"]},{tab:"libraries",urlPartList:["all-libraries","search-libraries","system-library","trash-libraries","libraries/"]},{tab:"statistic",urlPartList:["statistics/file","statistics/storage","statistics/user","statistics/traffic","statistics/reports"]},{tab:"users",urlPartList:["users/","search-users/"]},{tab:"groups",urlPartList:["groups/","search-groups/"]},{tab:"organizations",urlPartList:["organizations/","search-organizations/"]},{tab:"links",urlPartList:["share-links/","upload-links/"]},{tab:"institutions",urlPartList:["institutions/"]},{tab:"termsandconditions",urlPartList:["terms-and-conditions/"]},{tab:"departments",urlPartList:["departments/"]},{tab:"logs",urlPartList:["logs/"]},{tab:"virus-files",urlPartList:["virus-files/"]},{tab:"adminLogs",urlPartList:["admin-logs/"]}]);t=a||t,this.setState({currentTab:t})}},{key:"componentWillMount",value:function(){m.a.isDesktop()||this.setState({isSidePanelClosed:!0})}},{key:"render",value:function(){var e=this.state,t=e.currentTab,a=e.isSidePanelClosed,r={toggleSidePanel:this.toggleSidePanel};return Object(O.jsxs)("div",{id:"main",children:[Object(O.jsx)(x,{isSidePanelClosed:a,onCloseSidePanel:this.onCloseSidePanel,currentTab:t,tabItemClick:this.tabItemClick}),Object(O.jsx)(S,{children:Object(O.jsxs)(g.b,{className:"reach-router",children:[Object(O.jsx)(_,Object(n.a)({path:j.qc+"sys/info"},r)),Object(O.jsx)($,Object(n.a)({path:j.qc+"sys/statistics/file"},r)),Object(O.jsx)(te,Object(n.a)({path:j.qc+"sys/statistics/storage"},r)),Object(O.jsx)(je,Object(n.a)({path:j.qc+"sys/statistics/user"},r)),Object(O.jsx)(be,Object(n.a)({path:j.qc+"sys/statistics/traffic"},r)),Object(O.jsx)(me,Object(n.a)({path:j.qc+"sys/statistics/reports"},r)),Object(O.jsx)(De,Object(n.a)({path:j.qc+"sys/desktop-devices"},r)),Object(O.jsx)(Pe,Object(n.a)({path:j.qc+"sys/mobile-devices"},r)),Object(O.jsx)(Ne,Object(n.a)({path:j.qc+"sys/device-errors"},r)),Object(O.jsx)(pa,Object(n.a)({path:j.qc+"sys/all-libraries"},r)),Object(O.jsx)(ja,Object(n.a)({path:j.qc+"sys/system-library"},r)),Object(O.jsx)(va,Object(n.a)({path:j.qc+"sys/trash-libraries"},r)),Object(O.jsx)(xa,Object(n.a)({path:j.qc+"sys/search-libraries"},r)),Object(O.jsx)(Ca,Object(n.a)({path:j.qc+"sys/libraries/:repoID/*"},r)),Object(O.jsx)(_r,Object(n.a)({path:j.qc+"sys/web-settings"},r)),Object(O.jsx)(Fr,Object(n.a)({path:j.qc+"sys/notifications"},r)),Object(O.jsx)(Ta,Object(n.a)({path:j.qc+"sys/groups"},r)),Object(O.jsx)(Fa,Object(n.a)({path:j.qc+"sys/search-groups"},r)),Object(O.jsx)(za,Object(n.a)({path:j.qc+"sys/groups/:groupID/libraries"},r)),Object(O.jsx)(Ga,Object(n.a)({path:j.qc+"sys/groups/:groupID/members"},r)),Object(O.jsxs)(Qa,{path:j.qc+"sys/departments",children:[Object(O.jsx)(en,Object(n.a)({path:"/"},r)),Object(O.jsx)(rn,Object(n.a)({path:"/:groupID"},r)),Object(O.jsx)(dn,Object(n.a)({path:"/:groupID/members"},r)),Object(O.jsx)(bn,Object(n.a)({path:"/:groupID/libraries"},r))]}),Object(O.jsx)(fn,Object(n.a)({path:j.qc+"sys/share-links"},r)),Object(O.jsx)(xn,Object(n.a)({path:j.qc+"sys/upload-links"},r)),Object(O.jsx)(In,Object(n.a)({path:j.qc+"sys/organizations"},r)),Object(O.jsx)(kn,Object(n.a)({path:j.qc+"sys/search-organizations"},r)),Object(O.jsx)(An,Object(n.a)({path:j.qc+"sys/organizations/:orgID/info"},r)),Object(O.jsx)(Un,Object(n.a)({path:j.qc+"sys/organizations/:orgID/users"},r)),Object(O.jsx)(zn,Object(n.a)({path:j.qc+"sys/organizations/:orgID/groups"},r)),Object(O.jsx)(Wn,Object(n.a)({path:j.qc+"sys/organizations/:orgID/libraries"},r)),Object(O.jsx)(Qn,Object(n.a)({path:j.qc+"sys/institutions"},r)),Object(O.jsx)(Xn,Object(n.a)({path:j.qc+"sys/institutions/:institutionID/info"},r)),Object(O.jsx)(tr,Object(n.a)({path:j.qc+"sys/institutions/:institutionID/members"},r)),Object(O.jsx)(rr,Object(n.a)({path:j.qc+"sys/institutions/:institutionID/admins"},r)),Object(O.jsx)(lr,Object(n.a)({path:j.qc+"sys/logs/login"},r)),Object(O.jsx)(fr,Object(n.a)({path:j.qc+"sys/logs/file-access"},r)),Object(O.jsx)(yr,Object(n.a)({path:j.qc+"sys/logs/file-update"},r)),Object(O.jsx)(Pr,Object(n.a)({path:j.qc+"sys/logs/share-permission"},r)),Object(O.jsx)(Ni,Object(n.a)({path:j.qc+"sys/admin-logs/operation"},r)),Object(O.jsx)(Ai,Object(n.a)({path:j.qc+"sys/admin-logs/login"},r)),Object(O.jsx)(ut,Object(n.a)({path:j.qc+"sys/users"},r)),Object(O.jsx)(pt,Object(n.a)({path:j.qc+"sys/users/admins"},r)),Object(O.jsx)(gt,Object(n.a)({path:j.qc+"sys/users/ldap-imported"},r)),Object(O.jsx)(ft,Object(n.a)({path:j.qc+"sys/users/ldap"},r)),Object(O.jsx)(vt,Object(n.a)({path:j.qc+"sys/search-users"},r)),Object(O.jsx)(wt,Object(n.a)({path:j.qc+"sys/users/:email"},r)),Object(O.jsx)(Mt,Object(n.a)({path:j.qc+"sys/users/:email/owned-libraries"},r)),Object(O.jsx)(Tt,Object(n.a)({path:j.qc+"sys/users/:email/shared-libraries"},r)),Object(O.jsx)(Et,Object(n.a)({path:j.qc+"sys/users/:email/shared-links"},r)),Object(O.jsx)(Vt,Object(n.a)({path:j.qc+"sys/users/:email/groups"},r)),Object(O.jsx)(ni,Object(n.a)({path:j.qc+"sys/invitations"},r)),Object(O.jsx)(Oi,Object(n.a)({path:j.qc+"sys/terms-and-conditions/"},r)),Object(O.jsx)(Si,Object(n.a)({path:j.qc+"sys/virus-files/all"},r)),Object(O.jsx)(wi,Object(n.a)({path:j.qc+"sys/virus-files/unhandled"},r)),Object(O.jsx)(Er,Object(n.a)({path:j.qc+"sys/file-scan-records"},r)),Object(O.jsx)(Kr,Object(n.a)({path:j.qc+"sys/work-weixin"},r)),Object(O.jsx)(ei,Object(n.a)({path:j.qc+"sys/dingtalk"},r)),Object(O.jsx)(Li,Object(n.a)({path:j.qc+"sys/abuse-reports"},r))]})}),Object(O.jsx)(p.a,{query:"(max-width: 767.8px)",children:Object(O.jsx)(b.a,{zIndex:"1030",isOpen:!a,toggle:this.toggleSidePanel,contentClassName:"d-none"})})]})}}]),a}(l.a.Component));u.a.render(Object(O.jsx)(Ti,{}),document.getElementById("wrapper"))},196:function(e,t,a){var n=a(606),r=a(607),i=a(608),s=a(609),o=a(610);function c(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=s,c.prototype.set=o,e.exports=c},197:function(e,t,a){var n=a(356);e.exports=function(e,t){for(var a=e.length;a--;)if(n(e[a][0],t))return a;return-1}},198:function(e,t,a){var n=a(111).Symbol;e.exports=n},199:function(e,t,a){var n=a(136)(Object,"create");e.exports=n},200:function(e,t,a){var n=a(630);e.exports=function(e,t){var a=e.__data__;return n(t)?a["string"==typeof t?"string":"hash"]:a.map}},201:function(e,t,a){var n=a(257);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},250:function(e,t,a){var n=a(605),r=a(173);e.exports=function e(t,a,i,s,o){return t===a||(null==t||null==a||!r(t)&&!r(a)?t!==t&&a!==a:n(t,a,i,s,e,o))}},251:function(e,t,a){var n=a(136)(a(111),"Map");e.exports=n},252:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},253:function(e,t,a){var n=a(622),r=a(629),i=a(631),s=a(632),o=a(633);function c(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=s,c.prototype.set=o,e.exports=c},254:function(e,t,a){var n=a(650),r=a(657),i=a(365);e.exports=function(e){return i(e)?n(e):r(e)}},255:function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},256:function(e,t,a){var n=a(112),r=a(257),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!r(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))}},257:function(e,t,a){var n=a(172),r=a(173);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==n(e)}},260:function(e,t,a){"use strict";var n=a(3),r=a(5),i=a(7),s=a(6),o=a(2),c=a.n(o),l=a(123),d=a(108),u=a(109),h=a(147),p=a(83),b=a(161),g=a(1),j=a(10),m=a(0),f=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).copyToClipboard=function(){Object(b.a)(r.props.link),r.props.toggleDialog(),j.a.success(Object(g.pb)("The link is copied to the clipboard."))},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.link,a=e.toggleDialog;return Object(m.jsxs)(l.a,{isOpen:!0,toggle:a,children:[Object(m.jsx)(d.a,{toggle:a,children:Object(g.pb)("Link")}),Object(m.jsx)(u.a,{children:Object(m.jsx)("a",{href:t,children:t})}),Object(m.jsxs)(h.a,{children:[Object(m.jsx)(p.a,{color:"primary",onClick:this.copyToClipboard,children:Object(g.pb)("Copy")}),Object(m.jsx)(p.a,{color:"secondary",onClick:a,children:Object(g.pb)("Close")})]})]})}}]),a}(c.a.Component);t.a=f},262:function(e,t,a){e.exports=function(){return function(t){if(/number|string|boolean/.test(typeof t))return t;if(t instanceof Date)return new Date(t.getTime());var a=t instanceof Array?[]:{};return n(t,a),a;function n(t,a){for(var r in t){var i=t[r];i instanceof Date?e(a,r,new Date(i.getTime())):i instanceof Function?e(a,r,i):i instanceof Array?n(i,e(a,r,[])):i instanceof Object?n(i,e(a,r,{})):e(a,r,i)}}};function e(e,t,a){return e instanceof Array?(e.push(a),e[e.length-1]):e instanceof Object?(e[t]=a,e[t]):void 0}}()},353:function(e,t,a){var n=a(354),r={};for(var i in n)n.hasOwnProperty(i)&&(r[n[i]]=i);var s=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var o in s)if(s.hasOwnProperty(o)){if(!("channels"in s[o]))throw new Error("missing channels property: "+o);if(!("labels"in s[o]))throw new Error("missing channel labels property: "+o);if(s[o].labels.length!==s[o].channels)throw new Error("channel and label counts mismatch: "+o);var c=s[o].channels,l=s[o].labels;delete s[o].channels,delete s[o].labels,Object.defineProperty(s[o],"channels",{value:c}),Object.defineProperty(s[o],"labels",{value:l})}s.rgb.hsl=function(e){var t,a,n=e[0]/255,r=e[1]/255,i=e[2]/255,s=Math.min(n,r,i),o=Math.max(n,r,i),c=o-s;return o===s?t=0:n===o?t=(r-i)/c:r===o?t=2+(i-n)/c:i===o&&(t=4+(n-r)/c),(t=Math.min(60*t,360))<0&&(t+=360),a=(s+o)/2,[t,100*(o===s?0:a<=.5?c/(o+s):c/(2-o-s)),100*a]},s.rgb.hsv=function(e){var t,a,n,r,i,s=e[0]/255,o=e[1]/255,c=e[2]/255,l=Math.max(s,o,c),d=l-Math.min(s,o,c),u=function(e){return(l-e)/6/d+.5};return 0===d?r=i=0:(i=d/l,t=u(s),a=u(o),n=u(c),s===l?r=n-a:o===l?r=1/3+t-n:c===l&&(r=2/3+a-t),r<0?r+=1:r>1&&(r-=1)),[360*r,100*i,100*l]},s.rgb.hwb=function(e){var t=e[0],a=e[1],n=e[2];return[s.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(a,n))),100*(n=1-1/255*Math.max(t,Math.max(a,n)))]},s.rgb.cmyk=function(e){var t,a=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*((1-a-(t=Math.min(1-a,1-n,1-r)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-r-t)/(1-t)||0),100*t]},s.rgb.keyword=function(e){var t=r[e];if(t)return t;var a,i,s,o=1/0;for(var c in n)if(n.hasOwnProperty(c)){var l=n[c],d=(i=e,s=l,Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)+Math.pow(i[2]-s[2],2));d<o&&(o=d,a=c)}return a},s.keyword.rgb=function(e){return n[e]},s.rgb.xyz=function(e){var t=e[0]/255,a=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*a+.0722*n),100*(.0193*t+.1192*a+.9505*n)]},s.rgb.lab=function(e){var t=s.rgb.xyz(e),a=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,a=(a/=95.047)>.008856?Math.pow(a,1/3):7.787*a+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(a-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},s.hsl.rgb=function(e){var t,a,n,r,i,s=e[0]/360,o=e[1]/100,c=e[2]/100;if(0===o)return[i=255*c,i,i];t=2*c-(a=c<.5?c*(1+o):c+o-c*o),r=[0,0,0];for(var l=0;l<3;l++)(n=s+1/3*-(l-1))<0&&n++,n>1&&n--,i=6*n<1?t+6*(a-t)*n:2*n<1?a:3*n<2?t+(a-t)*(2/3-n)*6:t,r[l]=255*i;return r},s.hsl.hsv=function(e){var t=e[0],a=e[1]/100,n=e[2]/100,r=a,i=Math.max(n,.01);return a*=(n*=2)<=1?n:2-n,r*=i<=1?i:2-i,[t,100*(0===n?2*r/(i+r):2*a/(n+a)),100*((n+a)/2)]},s.hsv.rgb=function(e){var t=e[0]/60,a=e[1]/100,n=e[2]/100,r=Math.floor(t)%6,i=t-Math.floor(t),s=255*n*(1-a),o=255*n*(1-a*i),c=255*n*(1-a*(1-i));switch(n*=255,r){case 0:return[n,c,s];case 1:return[o,n,s];case 2:return[s,n,c];case 3:return[s,o,n];case 4:return[c,s,n];case 5:return[n,s,o]}},s.hsv.hsl=function(e){var t,a,n,r=e[0],i=e[1]/100,s=e[2]/100,o=Math.max(s,.01);return n=(2-i)*s,a=i*o,[r,100*(a=(a/=(t=(2-i)*o)<=1?t:2-t)||0),100*(n/=2)]},s.hwb.rgb=function(e){var t,a,n,r,i,s,o,c=e[0]/360,l=e[1]/100,d=e[2]/100,u=l+d;switch(u>1&&(l/=u,d/=u),n=6*c-(t=Math.floor(6*c)),0!==(1&t)&&(n=1-n),r=l+n*((a=1-d)-l),t){default:case 6:case 0:i=a,s=r,o=l;break;case 1:i=r,s=a,o=l;break;case 2:i=l,s=a,o=r;break;case 3:i=l,s=r,o=a;break;case 4:i=r,s=l,o=a;break;case 5:i=a,s=l,o=r}return[255*i,255*s,255*o]},s.cmyk.rgb=function(e){var t=e[0]/100,a=e[1]/100,n=e[2]/100,r=e[3]/100;return[255*(1-Math.min(1,t*(1-r)+r)),255*(1-Math.min(1,a*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r))]},s.xyz.rgb=function(e){var t,a,n,r=e[0]/100,i=e[1]/100,s=e[2]/100;return a=-.9689*r+1.8758*i+.0415*s,n=.0557*r+-.204*i+1.057*s,t=(t=3.2406*r+-1.5372*i+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(a=Math.min(Math.max(0,a),1)),255*(n=Math.min(Math.max(0,n),1))]},s.xyz.lab=function(e){var t=e[0],a=e[1],n=e[2];return a/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,500*(t-a),200*(a-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},s.lab.xyz=function(e){var t,a,n,r=e[0];t=e[1]/500+(a=(r+16)/116),n=a-e[2]/200;var i=Math.pow(a,3),s=Math.pow(t,3),o=Math.pow(n,3);return a=i>.008856?i:(a-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=o>.008856?o:(n-16/116)/7.787,[t*=95.047,a*=100,n*=108.883]},s.lab.lch=function(e){var t,a=e[0],n=e[1],r=e[2];return(t=360*Math.atan2(r,n)/2/Math.PI)<0&&(t+=360),[a,Math.sqrt(n*n+r*r),t]},s.lch.lab=function(e){var t,a=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[a,n*Math.cos(t),n*Math.sin(t)]},s.rgb.ansi16=function(e){var t=e[0],a=e[1],n=e[2],r=1 in arguments?arguments[1]:s.rgb.hsv(e)[2];if(0===(r=Math.round(r/50)))return 30;var i=30+(Math.round(n/255)<<2|Math.round(a/255)<<1|Math.round(t/255));return 2===r&&(i+=60),i},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){var t=e[0],a=e[1],n=e[2];return t===a&&a===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(a/255*5)+Math.round(n/255*5)},s.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var a=.5*(1+~~(e>50));return[(1&t)*a*255,(t>>1&1)*a*255,(t>>2&1)*a*255]},s.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var a;return e-=16,[Math.floor(e/36)/5*255,Math.floor((a=e%36)/6)/5*255,a%6/5*255]},s.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var a=t[0];3===t[0].length&&(a=a.split("").map((function(e){return e+e})).join(""));var n=parseInt(a,16);return[n>>16&255,n>>8&255,255&n]},s.rgb.hcg=function(e){var t,a=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(a,n),r),s=Math.min(Math.min(a,n),r),o=i-s;return t=o<=0?0:i===a?(n-r)/o%6:i===n?2+(r-a)/o:4+(a-n)/o+4,t/=6,[360*(t%=1),100*o,100*(o<1?s/(1-o):0)]},s.hsl.hcg=function(e){var t=e[1]/100,a=e[2]/100,n=1,r=0;return(n=a<.5?2*t*a:2*t*(1-a))<1&&(r=(a-.5*n)/(1-n)),[e[0],100*n,100*r]},s.hsv.hcg=function(e){var t=e[1]/100,a=e[2]/100,n=t*a,r=0;return n<1&&(r=(a-n)/(1-n)),[e[0],100*n,100*r]},s.hcg.rgb=function(e){var t=e[0]/360,a=e[1]/100,n=e[2]/100;if(0===a)return[255*n,255*n,255*n];var r,i=[0,0,0],s=t%1*6,o=s%1,c=1-o;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=c,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=c,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=c}return r=(1-a)*n,[255*(a*i[0]+r),255*(a*i[1]+r),255*(a*i[2]+r)]},s.hcg.hsv=function(e){var t=e[1]/100,a=t+e[2]/100*(1-t),n=0;return a>0&&(n=t/a),[e[0],100*n,100*a]},s.hcg.hsl=function(e){var t=e[1]/100,a=e[2]/100*(1-t)+.5*t,n=0;return a>0&&a<.5?n=t/(2*a):a>=.5&&a<1&&(n=t/(2*(1-a))),[e[0],100*n,100*a]},s.hcg.hwb=function(e){var t=e[1]/100,a=t+e[2]/100*(1-t);return[e[0],100*(a-t),100*(1-a)]},s.hwb.hcg=function(e){var t=e[1]/100,a=1-e[2]/100,n=a-t,r=0;return n<1&&(r=(a-n)/(1-n)),[e[0],100*n,100*r]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=s.gray.hsv=function(e){return[0,0,e[0]]},s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),a=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(a.length)+a},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},354:function(e,t,a){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},355:function(e,t,a){var n=a(196),r=a(611),i=a(612),s=a(613),o=a(614),c=a(615);function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=c,e.exports=l},356:function(e,t){e.exports=function(e,t){return e===t||e!==e&&t!==t}},357:function(e,t,a){var n=a(172),r=a(252);e.exports=function(e){if(!r(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},358:function(e,t,a){(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.exports=a}).call(this,a(94))},359:function(e,t){var a=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return a.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},360:function(e,t,a){var n=a(634),r=a(637),i=a(638);e.exports=function(e,t,a,s,o,c){var l=1&a,d=e.length,u=t.length;if(d!=u&&!(l&&u>d))return!1;var h=c.get(e),p=c.get(t);if(h&&p)return h==t&&p==e;var b=-1,g=!0,j=2&a?new n:void 0;for(c.set(e,t),c.set(t,e);++b<d;){var m=e[b],f=t[b];if(s)var O=l?s(f,m,b,t,e,c):s(m,f,b,e,t,c);if(void 0!==O){if(O)continue;g=!1;break}if(j){if(!r(t,(function(e,t){if(!i(j,t)&&(m===e||o(m,e,a,s,c)))return j.push(t)}))){g=!1;break}}else if(m!==f&&!o(m,f,a,s,c)){g=!1;break}}return c.delete(e),c.delete(t),g}},361:function(e,t,a){var n=a(652),r=a(173),i=Object.prototype,s=i.hasOwnProperty,o=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return r(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=c},362:function(e,t,a){(function(e){var n=a(111),r=a(653),i=t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=s&&s.exports===i?n.Buffer:void 0,c=(o?o.isBuffer:void 0)||r;e.exports=c}).call(this,a(244)(e))},363:function(e,t){var a=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&a.test(e))&&e>-1&&e%1==0&&e<t}},364:function(e,t,a){var n=a(654),r=a(655),i=a(656),s=i&&i.isTypedArray,o=s?r(s):n;e.exports=o},365:function(e,t,a){var n=a(357),r=a(255);e.exports=function(e){return null!=e&&r(e.length)&&!n(e)}},366:function(e,t,a){var n=a(252);e.exports=function(e){return e===e&&!n(e)}},367:function(e,t){e.exports=function(e,t){return function(a){return null!=a&&(a[e]===t&&(void 0!==t||e in Object(a)))}}},368:function(e,t,a){var n=a(369),r=a(201);e.exports=function(e,t){for(var a=0,i=(t=n(t,e)).length;null!=e&&a<i;)e=e[r(t[a++])];return a&&a==i?e:void 0}},369:function(e,t,a){var n=a(112),r=a(256),i=a(683),s=a(686);e.exports=function(e,t){return n(e)?e:r(e,t)?[e]:i(s(e))}},379:function(e,t,a){"use strict";var n=a(3),r=a(5),i=a(7),s=a(6),o=a(2),c=a.n(o),l=a(123),d=a(108),u=a(109),h=a(12),p=a.n(h),b=a(1),g=a(8),j=a(4),m=a(19),f=(a(560),a(0)),O=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={isLoading:!0,errorMsg:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.repoID,n=t.commitID;g.b.getCommitDetails(a,n).then((function(t){e.setState({isLoading:!1,errorMsg:"",commitDetails:t.data})})).catch((function(t){var a=j.a.getErrorMsg(t);e.setState({isLoading:!1,errorMsg:a})}))}},{key:"render",value:function(){var e=this.props,t=e.toggleDialog;e.commitTime;return Object(f.jsxs)(l.a,{isOpen:!0,centered:!0,toggle:t,children:[Object(f.jsx)(d.a,{toggle:t,children:Object(b.pb)("Modification Details")}),Object(f.jsxs)(u.a,{children:[Object(f.jsx)("p",{className:"small",children:p()(this.props.commitTime).format("YYYY-MM-DD HH:mm:ss")}),Object(f.jsx)(v,{data:this.state})]})]})}}]),a}(c.a.Component),v=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).renderDetails=function(e){for(var t=[{type:"new",title:Object(b.pb)("New files")},{type:"removed",title:Object(b.pb)("Deleted files")},{type:"renamed",title:Object(b.pb)("Renamed or Moved files")},{type:"modified",title:Object(b.pb)("Modified files")},{type:"newdir",title:Object(b.pb)("New directories")},{type:"deldir",title:Object(b.pb)("Deleted directories")}],a=!0,n=0,r=t.length;n<r;n++)if(e[t[n].type].length){a=!1;break}return a?Object(f.jsx)("p",{children:e.cmt_desc}):Object(f.jsx)(c.a.Fragment,{children:t.map((function(t,a){if(e[t.type].length)return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)("h6",{children:t.title}),Object(f.jsx)("ul",{children:e[t.type].map((function(e,t){return Object(f.jsx)("li",{dangerouslySetInnerHTML:{__html:e},className:"commit-detail-item"},t)}))})]},a)}))})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.isLoading,a=e.errorMsg,n=e.commitDetails;return t?Object(f.jsx)(m.a,{}):a?Object(f.jsx)("p",{className:"error mt-4 text-center",children:a}):this.renderDetails(n)}}]),a}(c.a.Component);t.a=O},380:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Chart",{enumerable:!0,get:function(){return i.default}}),t.defaults=t.Scatter=t.Bubble=t.Polar=t.Radar=t.HorizontalBar=t.Bar=t.Line=t.Pie=t.Doughnut=t.default=void 0;var n=c(a(2)),r=c(a(9)),i=c(a(562)),s=c(a(604)),o=c(a(666));function c(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t,a){return t&&g(e.prototype,t),a&&g(e,a),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=y(e);if(t){var r=y(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v(this,a)}}function v(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D="undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&"production",P=function(e){m(a,e);var t=O(a);function a(){var e;return b(this,a),S(x(e=t.call(this)),"handleOnClick",(function(t){var a=e.chartInstance,n=e.props,r=n.getDatasetAtEvent,i=n.getElementAtEvent,s=n.getElementsAtEvent,o=n.onElementsClick;r&&r(a.getDatasetAtEvent(t),t),i&&i(a.getElementAtEvent(t),t),s&&s(a.getElementsAtEvent(t),t),o&&o(a.getElementsAtEvent(t),t)})),S(x(e),"ref",(function(t){e.element=t})),e.chartInstance=void 0,e}return j(a,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(){if(this.props.redraw)return this.destroyChart(),void this.renderChart();this.updateChart()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=(t.redraw,t.type),n=t.options,r=t.plugins,i=t.legend,o=t.height,c=t.width;if(!0===e.redraw)return!0;if(o!==e.height||c!==e.width)return!0;if(a!==e.type)return!0;if(!(0,s.default)(i,e.legend))return!0;if(!(0,s.default)(n,e.options))return!0;var l=this.transformDataProp(e);return!(0,s.default)(this.shadowDataProp,l)||!(0,s.default)(r,e.plugins)}},{key:"componentWillUnmount",value:function(){this.destroyChart()}},{key:"transformDataProp",value:function(e){var t=e.data;return"function"==typeof t?t(this.element):t}},{key:"memoizeDataProps",value:function(){if(this.props.data){var e=this.transformDataProp(this.props);return this.shadowDataProp=p(p({},e),{},{datasets:e.datasets&&e.datasets.map((function(e){return p({},e)}))}),this.saveCurrentDatasets(),e}}},{key:"checkDatasets",value:function(e){var t="production"!==D&&"prod"!==D,n=this.props.datasetKeyProvider!==a.getLabelAsKey,r=e.length>1;if(t&&r&&!n){var i=!1;e.forEach((function(e){e.label||(i=!0)})),i&&console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the "label" property on each dataset is used. Alternatively, you may provide a "datasetKeyProvider" as a prop that returns a unique key.')}}},{key:"getCurrentDatasets",value:function(){return this.chartInstance&&this.chartInstance.config.data&&this.chartInstance.config.data.datasets||[]}},{key:"saveCurrentDatasets",value:function(){var e=this;this.datasets=this.datasets||{},this.getCurrentDatasets().forEach((function(t){e.datasets[e.props.datasetKeyProvider(t)]=t}))}},{key:"updateChart",value:function(){var e=this,t=this.props.options,a=this.memoizeDataProps(this.props);if(this.chartInstance){t&&(this.chartInstance.options=i.default.helpers.configMerge(this.chartInstance.options,t));var n=this.getCurrentDatasets(),r=a.datasets||[];this.checkDatasets(n);var s=(0,o.default)(n,this.props.datasetKeyProvider);this.chartInstance.config.data.datasets=r.map((function(t){var a=s[e.props.datasetKeyProvider(t)];if(a&&a.type===t.type&&t.data){a.data.splice(t.data.length),t.data.forEach((function(e,n){a.data[n]=t.data[n]}));t.data;var n=u(t,["data"]);return p(p({},a),n)}return t}));a.datasets;var c=u(a,["datasets"]);this.chartInstance.config.data=p(p({},this.chartInstance.config.data),c),this.chartInstance.update()}}},{key:"renderChart",value:function(){var e=this.props,t=e.options,n=e.legend,r=e.type,o=e.plugins,c=this.element,l=this.memoizeDataProps();"undefined"===typeof n||(0,s.default)(a.defaultProps.legend,n)||(t.legend=n),this.chartInstance=new i.default(c,{type:r,data:l,options:t,plugins:o})}},{key:"destroyChart",value:function(){if(this.chartInstance){this.saveCurrentDatasets();var e=Object.values(this.datasets);this.chartInstance.config.data.datasets=e,this.chartInstance.destroy()}}},{key:"render",value:function(){var e=this.props,t=e.height,a=e.width,r=e.id;return n.default.createElement("canvas",{ref:this.ref,height:t,width:a,id:r,onClick:this.handleOnClick})}}]),a}(n.default.Component);S(P,"getLabelAsKey",(function(e){return e.label})),S(P,"propTypes",{data:r.default.oneOfType([r.default.object,r.default.func]).isRequired,getDatasetAtEvent:r.default.func,getElementAtEvent:r.default.func,getElementsAtEvent:r.default.func,height:r.default.number,legend:r.default.object,onElementsClick:r.default.func,options:r.default.object,plugins:r.default.arrayOf(r.default.object),redraw:r.default.bool,type:function(e,t,a){if(!i.default.controllers[e[t]])return new Error("Invalid chart type `"+e[t]+"` supplied to `"+a+"`.")},width:r.default.number,datasetKeyProvider:r.default.func}),S(P,"defaultProps",{legend:{display:!0,position:"bottom"},type:"doughnut",height:150,width:300,redraw:!1,options:{},datasetKeyProvider:P.getLabelAsKey});var w=P;t.default=w;var I=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"doughnut"}))}}]),a}(n.default.Component);t.Doughnut=I;var k=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"pie"}))}}]),a}(n.default.Component);t.Pie=k;var C=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"line"}))}}]),a}(n.default.Component);t.Line=C;var N=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"bar"}))}}]),a}(n.default.Component);t.Bar=N;var M=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"horizontalBar"}))}}]),a}(n.default.Component);t.HorizontalBar=M;var _=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"radar"}))}}]),a}(n.default.Component);t.Radar=_;var A=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"polarArea"}))}}]),a}(n.default.Component);t.Polar=A;var L=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"bubble"}))}}]),a}(n.default.Component);t.Bubble=L;var T=function(e){m(a,e);var t=O(a);function a(){return b(this,a),t.apply(this,arguments)}return j(a,[{key:"render",value:function(){var e=this;return n.default.createElement(P,l({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"scatter"}))}}]),a}(n.default.Component);t.Scatter=T;var F=i.default.defaults;t.defaults=F}).call(this,a(171))},381:function(e,t,a){"use strict";var n=a(3),r=a(5),i=a(7),s=a(6),o=a(2),c=a.n(o),l=a(1),d=a(123),u=a(108),h=a(109),p=a(147),b=a(83),g=a(0),j=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleInputChange=function(e){r.setState({inputChecked:e.target.checked})},r.unlinkDevice=function(){r.props.toggleDialog(),r.props.unlinkDevice(r.state.inputChecked)},r.state={inputChecked:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props.toggleDialog;return Object(g.jsxs)(d.a,{isOpen:!0,toggle:t,children:[Object(g.jsx)(u.a,{toggle:t,children:Object(l.pb)("Unlink device")}),Object(g.jsxs)(h.a,{children:[Object(g.jsx)("p",{children:Object(l.pb)("Are you sure you want to unlink this device?")}),l.Ab&&Object(g.jsxs)("div",{className:"d-flex align-items-center",children:[Object(g.jsx)("input",{id:"delete-files",className:"mr-1",type:"checkbox",checked:e,onChange:this.handleInputChange}),Object(g.jsx)("label",{htmlFor:"delete-files",className:"m-0",children:Object(l.pb)("Delete files from this device the next time it comes online.")})]})]}),Object(g.jsxs)(p.a,{children:[Object(g.jsx)(b.a,{color:"secondary",onClick:t,children:Object(l.pb)("Cancel")}),Object(g.jsx)(b.a,{color:"primary",onClick:this.unlinkDevice,children:Object(l.pb)("Unlink")})]})]})}}]),a}(c.a.Component);t.a=j},560:function(e,t,a){},562:function(e,t,a){var n=a(563)();a(564)(n),a(569)(n),a(570)(n),a(571)(n),a(572)(n),a(573)(n),a(574)(n),a(575)(n),a(576)(n),a(577)(n),a(578)(n),a(579)(n),a(580)(n),a(581)(n),a(582)(n),a(583)(n),a(584)(n),a(585)(n),a(586)(n),a(587)(n),a(588)(n),a(589)(n),a(590)(n),a(591)(n),a(592)(n),a(593)(n),a(594)(n),a(595)(n),a(596)(n),a(597)(n),a(598)(n),a(599)(n),a(600)(n),a(601)(n),a(602)(n),a(603)(n),window.Chart=e.exports=n},563:function(e,t,a){"use strict";e.exports=function(){var e=function e(t,a){var n=this,r=e.helpers;return n.config=a||{data:{datasets:[]}},t.length&&t[0].getContext&&(t=t[0]),t.getContext&&(t=t.getContext("2d")),n.ctx=t,n.canvas=t.canvas,t.canvas.style.display=t.canvas.style.display||"block",n.width=t.canvas.width||parseInt(r.getStyle(t.canvas,"width"),10)||r.getMaximumWidth(t.canvas),n.height=t.canvas.height||parseInt(r.getStyle(t.canvas,"height"),10)||r.getMaximumHeight(t.canvas),n.aspectRatio=n.width/n.height,(isNaN(n.aspectRatio)||!1===isFinite(n.aspectRatio))&&(n.aspectRatio=void 0!==a.aspectRatio?a.aspectRatio:2),n.originalCanvasStyleWidth=t.canvas.style.width,n.originalCanvasStyleHeight=t.canvas.style.height,r.retinaScale(n),n.controller=new e.Controller(n),r.addResizeListener(t.canvas.parentNode,(function(){n.controller&&n.controller.config.options.responsive&&n.controller.resize()})),n.controller?n.controller:n};return e.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"single",animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var a=0;a<e.data.datasets.length;a++)t.push('<li><span style="background-color:'+e.data.datasets[a].backgroundColor+'"></span>'),e.data.datasets[a].label&&t.push(e.data.datasets[a].label),t.push("</li>");return t.push("</ul>"),t.join("")}}},e.Chart=e,e}},564:function(e,t,a){"use strict";var n=a(565);e.exports=function(e){var t=e.helpers={};t.each=function(e,a,n,r){var i,s;if(t.isArray(e))if(s=e.length,r)for(i=s-1;i>=0;i--)a.call(n,e[i],i);else for(i=0;i<s;i++)a.call(n,e[i],i);else if("object"===typeof e){var o=Object.keys(e);for(s=o.length,i=0;i<s;i++)a.call(n,e[o[i]],o[i])}},t.clone=function(e){var a={};return t.each(e,(function(e,n){t.isArray(e)?a[n]=e.slice(0):a[n]="object"===typeof e&&null!==e?t.clone(e):e})),a},t.extend=function(e){for(var a=function(t,a){e[a]=t},n=1,r=arguments.length;n<r;n++)t.each(arguments[n],a);return e},t.configMerge=function(a){var n=t.clone(a);return t.each(Array.prototype.slice.call(arguments,1),(function(a){t.each(a,(function(a,r){if("scales"===r)n[r]=t.scaleMerge(n.hasOwnProperty(r)?n[r]:{},a);else if("scale"===r)n[r]=t.configMerge(n.hasOwnProperty(r)?n[r]:{},e.scaleService.getScaleDefaults(a.type),a);else if(n.hasOwnProperty(r)&&t.isArray(n[r])&&t.isArray(a)){var i=n[r];t.each(a,(function(e,a){a<i.length?"object"===typeof i[a]&&null!==i[a]&&"object"===typeof e&&null!==e?i[a]=t.configMerge(i[a],e):i[a]=e:i.push(e)}))}else n.hasOwnProperty(r)&&"object"===typeof n[r]&&null!==n[r]&&"object"===typeof a?n[r]=t.configMerge(n[r],a):n[r]=a}))})),n},t.scaleMerge=function(a,n){var r=t.clone(a);return t.each(n,(function(a,n){"xAxes"===n||"yAxes"===n?r.hasOwnProperty(n)?t.each(a,(function(a,i){var s=t.getValueOrDefault(a.type,"xAxes"===n?"category":"linear"),o=e.scaleService.getScaleDefaults(s);i>=r[n].length||!r[n][i].type?r[n].push(t.configMerge(o,a)):a.type&&a.type!==r[n][i].type?r[n][i]=t.configMerge(r[n][i],o,a):r[n][i]=t.configMerge(r[n][i],a)})):(r[n]=[],t.each(a,(function(a){var i=t.getValueOrDefault(a.type,"xAxes"===n?"category":"linear");r[n].push(t.configMerge(e.scaleService.getScaleDefaults(i),a))}))):r.hasOwnProperty(n)&&"object"===typeof r[n]&&null!==r[n]&&"object"===typeof a?r[n]=t.configMerge(r[n],a):r[n]=a})),r},t.getValueAtIndexOrDefault=function(e,a,n){return void 0===e||null===e?n:t.isArray(e)?a<e.length?e[a]:n:e},t.getValueOrDefault=function(e,t){return void 0===e?t:e},t.indexOf=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var a=0,n=e.length;a<n;++a)if(e[a]===t)return a;return-1},t.where=function(e,a){if(t.isArray(e)&&Array.prototype.filter)return e.filter(a);var n=[];return t.each(e,(function(e){a(e)&&n.push(e)})),n},t.findIndex=Array.prototype.findIndex?function(e,t,a){return e.findIndex(t,a)}:function(e,t,a){a=void 0===a?e:a;for(var n=0,r=e.length;n<r;++n)if(t.call(a,e[n],n,e))return n;return-1},t.findNextWhere=function(e,t,a){void 0!==a&&null!==a||(a=-1);for(var n=a+1;n<e.length;n++){var r=e[n];if(t(r))return r}},t.findPreviousWhere=function(e,t,a){void 0!==a&&null!==a||(a=e.length);for(var n=a-1;n>=0;n--){var r=e[n];if(t(r))return r}},t.inherits=function(e){var a=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return a.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=a.prototype,n.prototype=new r,n.extend=t.inherits,e&&t.extend(n.prototype,e),n.__super__=a.prototype,n},t.noop=function(){},t.uid=function(){var e=0;return function(){return e++}}(),t.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},t.almostEquals=function(e,t,a){return Math.abs(e-t)<a},t.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},t.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},t.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},t.log10=Math.log10?function(e){return Math.log10(e)}:function(e){return Math.log(e)/Math.LN10},t.toRadians=function(e){return e*(Math.PI/180)},t.toDegrees=function(e){return e*(180/Math.PI)},t.getAngleFromPoint=function(e,t){var a=t.x-e.x,n=t.y-e.y,r=Math.sqrt(a*a+n*n),i=Math.atan2(n,a);return i<-.5*Math.PI&&(i+=2*Math.PI),{angle:i,distance:r}},t.aliasPixel=function(e){return e%2===0?0:.5},t.splineCurve=function(e,t,a,n){var r=e.skip?t:e,i=t,s=a.skip?t:a,o=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),c=Math.sqrt(Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2)),l=o/(o+c),d=c/(o+c),u=n*(l=isNaN(l)?0:l),h=n*(d=isNaN(d)?0:d);return{previous:{x:i.x-u*(s.x-r.x),y:i.y-u*(s.y-r.y)},next:{x:i.x+h*(s.x-r.x),y:i.y+h*(s.y-r.y)}}},t.EPSILON=Number.EPSILON||1e-14,t.splineCurveMonotone=function(e){var a,n,r,i,s,o,c,l,d,u=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),h=u.length;for(a=0;a<h;++a)(r=u[a]).model.skip||(n=a>0?u[a-1]:null,(i=a<h-1?u[a+1]:null)&&!i.model.skip&&(r.deltaK=(i.model.y-r.model.y)/(i.model.x-r.model.x)),!n||n.model.skip?r.mK=r.deltaK:!i||i.model.skip?r.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(r.deltaK)?r.mK=0:r.mK=(n.deltaK+r.deltaK)/2);for(a=0;a<h-1;++a)r=u[a],i=u[a+1],r.model.skip||i.model.skip||(t.almostEquals(r.deltaK,0,this.EPSILON)?r.mK=i.mK=0:(s=r.mK/r.deltaK,o=i.mK/r.deltaK,(l=Math.pow(s,2)+Math.pow(o,2))<=9||(c=3/Math.sqrt(l),r.mK=s*c*r.deltaK,i.mK=o*c*r.deltaK)));for(a=0;a<h;++a)(r=u[a]).model.skip||(n=a>0?u[a-1]:null,i=a<h-1?u[a+1]:null,n&&!n.model.skip&&(d=(r.model.x-n.model.x)/3,r.model.controlPointPreviousX=r.model.x-d,r.model.controlPointPreviousY=r.model.y-d*r.mK),i&&!i.model.skip&&(d=(i.model.x-r.model.x)/3,r.model.controlPointNextX=r.model.x+d,r.model.controlPointNextY=r.model.y+d*r.mK))},t.nextItem=function(e,t,a){return a?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},t.previousItem=function(e,t,a){return a?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},t.niceNum=function(e,a){var n=Math.floor(t.log10(e)),r=e/Math.pow(10,n);return(a?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,n)};var a=t.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(1-Math.pow(2,-10*e/1))},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:1===(e/=1)?1:(a||(a=.3),n<Math.abs(1)?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/a))},easeOutElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:1===(e/=1)?1:(a||(a=.3),n<Math.abs(1)?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/a)+1)},easeInOutElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:2===(e/=.5)?1:(a||(a=.3*1.5*1),n<Math.abs(1)?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),e<1?n*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/a)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/a)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-a.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e*1:e<2/2.75?1*(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return e<.5?.5*a.easeInBounce(2*e):.5*a.easeOutBounce(2*e-1)+.5}};function r(e,t,a){var n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[a])):n=e,n}function i(e){return void 0!==e&&null!==e&&"none"!==e}function s(e,t,a){var n=document.defaultView,s=e.parentNode,o=n.getComputedStyle(e)[t],c=n.getComputedStyle(s)[t],l=i(o),d=i(c),u=Number.POSITIVE_INFINITY;return l||d?Math.min(l?r(o,e,a):u,d?r(c,s,a):u):"none"}t.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},t.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e,1e3/60)},t.getRelativePosition=function(e,a){var n,r,i=e.originalEvent||e,s=e.currentTarget||e.srcElement,o=s.getBoundingClientRect(),c=i.touches;c&&c.length>0?(n=c[0].clientX,r=c[0].clientY):(n=i.clientX,r=i.clientY);var l=parseFloat(t.getStyle(s,"padding-left")),d=parseFloat(t.getStyle(s,"padding-top")),u=parseFloat(t.getStyle(s,"padding-right")),h=parseFloat(t.getStyle(s,"padding-bottom")),p=o.right-o.left-l-u,b=o.bottom-o.top-d-h;return{x:n=Math.round((n-o.left-l)/p*s.width/a.currentDevicePixelRatio),y:r=Math.round((r-o.top-d)/b*s.height/a.currentDevicePixelRatio)}},t.addEvent=function(e,t,a){e.addEventListener?e.addEventListener(t,a):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},t.removeEvent=function(e,a,n){e.removeEventListener?e.removeEventListener(a,n,!1):e.detachEvent?e.detachEvent("on"+a,n):e["on"+a]=t.noop},t.bindEvents=function(e,a,n){var r=e.events=e.events||{};t.each(a,(function(a){r[a]=function(){n.apply(e,arguments)},t.addEvent(e.chart.canvas,a,r[a])}))},t.unbindEvents=function(e,a){var n=e.chart.canvas;t.each(a,(function(e,a){t.removeEvent(n,a,e)}))},t.getConstraintWidth=function(e){return s(e,"max-width","clientWidth")},t.getConstraintHeight=function(e){return s(e,"max-height","clientHeight")},t.getMaximumWidth=function(e){var a=e.parentNode,n=parseInt(t.getStyle(a,"padding-left"),10),r=parseInt(t.getStyle(a,"padding-right"),10),i=a.clientWidth-n-r,s=t.getConstraintWidth(e);return isNaN(s)?i:Math.min(i,s)},t.getMaximumHeight=function(e){var a=e.parentNode,n=parseInt(t.getStyle(a,"padding-top"),10),r=parseInt(t.getStyle(a,"padding-bottom"),10),i=a.clientHeight-n-r,s=t.getConstraintHeight(e);return isNaN(s)?i:Math.min(i,s)},t.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},t.retinaScale=function(e){var t=e.ctx,a=e.canvas,n=a.width,r=a.height,i=e.currentDevicePixelRatio=window.devicePixelRatio||1;1!==i&&(a.height=r*i,a.width=n*i,t.scale(i,i),e.originalDevicePixelRatio=e.originalDevicePixelRatio||i),a.style.width=n+"px",a.style.height=r+"px"},t.clear=function(e){e.ctx.clearRect(0,0,e.width,e.height)},t.fontString=function(e,t,a){return t+" "+e+"px "+a},t.longestText=function(e,a,n,r){var i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==a&&(i=r.data={},s=r.garbageCollect=[],r.font=a),e.font=a;var o=0;t.each(n,(function(a){void 0!==a&&null!==a&&!0!==t.isArray(a)?o=t.measureText(e,i,s,o,a):t.isArray(a)&&t.each(a,(function(a){void 0===a||null===a||t.isArray(a)||(o=t.measureText(e,i,s,o,a))}))}));var c=s.length/2;if(c>n.length){for(var l=0;l<c;l++)delete i[s[l]];s.splice(0,c)}return o},t.measureText=function(e,t,a,n,r){var i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>n&&(n=i),n},t.numberOfLabelLines=function(e){var a=1;return t.each(e,(function(e){t.isArray(e)&&e.length>a&&(a=e.length)})),a},t.drawRoundedRectangle=function(e,t,a,n,r,i){e.beginPath(),e.moveTo(t+i,a),e.lineTo(t+n-i,a),e.quadraticCurveTo(t+n,a,t+n,a+i),e.lineTo(t+n,a+r-i),e.quadraticCurveTo(t+n,a+r,t+n-i,a+r),e.lineTo(t+i,a+r),e.quadraticCurveTo(t,a+r,t,a+r-i),e.lineTo(t,a+i),e.quadraticCurveTo(t,a,t+i,a),e.closePath()},t.color=function(t){return n?t instanceof CanvasGradient?n(e.defaults.global.defaultColor):n(t):(console.error("Color.js not found!"),t)},t.addResizeListener=function(e,t){var a=document.createElement("iframe"),n="chartjs-hidden-iframe";a.classlist?a.classlist.add(n):a.setAttribute("class",n),a.tabIndex=-1;var r=a.style;r.width="100%",r.display="block",r.border=0,r.height=0,r.margin=0,r.position="absolute",r.left=0,r.right=0,r.top=0,r.bottom=0,e.insertBefore(a,e.firstChild),(a.contentWindow||a).onresize=function(){if(t)return t()}},t.removeResizeListener=function(e){var t=e.querySelector(".chartjs-hidden-iframe");t&&t.parentNode.removeChild(t)},t.isArray=Array.isArray?function(e){return Array.isArray(e)}:function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.arrayEquals=function(e,a){var n,r,i,s;if(!e||!a||e.length!==a.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=a[n],i instanceof Array&&s instanceof Array){if(!t.arrayEquals(i,s))return!1}else if(i!==s)return!1;return!0},t.callCallback=function(e,t,a){e&&"function"===typeof e.call&&e.apply(a,t)},t.getHoverColor=function(e){return e instanceof CanvasPattern?e:t.color(e).saturate(.5).darken(.1).rgbString()}}},565:function(e,t,a){var n=a(566),r=a(568),i=function e(t){return t instanceof e?t:this instanceof e?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"===typeof t?(a=r.getRgba(t))?this.setValues("rgb",a):(a=r.getHsla(t))?this.setValues("hsl",a):(a=r.getHwb(t))&&this.setValues("hwb",a):"object"===typeof t&&(void 0!==(a=t).r||void 0!==a.red?this.setValues("rgb",a):void 0!==a.l||void 0!==a.lightness?this.setValues("hsl",a):void 0!==a.v||void 0!==a.value?this.setValues("hsv",a):void 0!==a.w||void 0!==a.whiteness?this.setValues("hwb",a):void 0===a.c&&void 0===a.cyan||this.setValues("cmyk",a)))):new e(t);var a};i.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return r.hexString(this.values.rgb)},rgbString:function(){return r.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return r.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return r.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return r.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return r.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return r.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return r.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],a=0;a<e.length;a++){var n=e[a]/255;t[a]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),a=e.luminosity();return t>a?(t+.05)/(a+.05):(a+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,a=(t[0]+e)%360;return t[0]=a<0?360+a:a,this.setValues("hsl",t),this},mix:function(e,t){var a=this,n=e,r=void 0===t?.5:t,i=2*r-1,s=a.alpha()-n.alpha(),o=((i*s===-1?i:(i+s)/(1+i*s))+1)/2,c=1-o;return this.rgb(o*a.red()+c*n.red(),o*a.green()+c*n.green(),o*a.blue()+c*n.blue()).alpha(a.alpha()*r+n.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var e,t,a=new i,n=this.values,r=a.values;for(var s in n)n.hasOwnProperty(s)&&(e=n[s],"[object Array]"===(t={}.toString.call(e))?r[s]=e.slice(0):"[object Number]"===t?r[s]=e:console.error("unexpected color value:",e));return a}},i.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},i.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},i.prototype.getValues=function(e){for(var t=this.values,a={},n=0;n<e.length;n++)a[e.charAt(n)]=t[e][n];return 1!==t.alpha&&(a.a=t.alpha),a},i.prototype.setValues=function(e,t){var a,r,i=this.values,s=this.spaces,o=this.maxes,c=1;if(this.valid=!0,"alpha"===e)c=t;else if(t.length)i[e]=t.slice(0,e.length),c=t[e.length];else if(void 0!==t[e.charAt(0)]){for(a=0;a<e.length;a++)i[e][a]=t[e.charAt(a)];c=t.a}else if(void 0!==t[s[e][0]]){var l=s[e];for(a=0;a<e.length;a++)i[e][a]=t[l[a]];c=t.alpha}if(i.alpha=Math.max(0,Math.min(1,void 0===c?i.alpha:c)),"alpha"===e)return!1;for(a=0;a<e.length;a++)r=Math.max(0,Math.min(o[e][a],i[e][a])),i[e][a]=Math.round(r);for(var d in s)d!==e&&(i[d]=n[e][d](i[e]));return!0},i.prototype.setSpace=function(e,t){var a=t[0];return void 0===a?this.getValues(e):("number"===typeof a&&(a=Array.prototype.slice.call(t)),this.setValues(e,a),this)},i.prototype.setChannel=function(e,t,a){var n=this.values[e];return void 0===a?n[t]:(a===n[t]||(n[t]=a,this.setValues(e,n)),this)},"undefined"!==typeof window&&(window.Color=i),e.exports=i},566:function(e,t,a){var n=a(353),r=a(567),i={};Object.keys(n).forEach((function(e){i[e]={},Object.defineProperty(i[e],"channels",{value:n[e].channels}),Object.defineProperty(i[e],"labels",{value:n[e].labels});var t=r(e);Object.keys(t).forEach((function(a){var n=t[a];i[e][a]=function(e){var t=function(t){if(void 0===t||null===t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var a=e(t);if("object"===typeof a)for(var n=a.length,r=0;r<n;r++)a[r]=Math.round(a[r]);return a};return"conversion"in e&&(t.conversion=e.conversion),t}(n),i[e][a].raw=function(e){var t=function(t){return void 0===t||null===t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)}))})),e.exports=i},567:function(e,t,a){var n=a(353);function r(e){var t=function(){for(var e={},t=Object.keys(n),a=t.length,r=0;r<a;r++)e[t[r]]={distance:-1,parent:null};return e}(),a=[e];for(t[e].distance=0;a.length;)for(var r=a.pop(),i=Object.keys(n[r]),s=i.length,o=0;o<s;o++){var c=i[o],l=t[c];-1===l.distance&&(l.distance=t[r].distance+1,l.parent=r,a.unshift(c))}return t}function i(e,t){return function(a){return t(e(a))}}function s(e,t){for(var a=[t[e].parent,e],r=n[t[e].parent][e],s=t[e].parent;t[s].parent;)a.unshift(t[s].parent),r=i(n[t[s].parent][s],r),s=t[s].parent;return r.conversion=a,r}e.exports=function(e){for(var t=r(e),a={},n=Object.keys(t),i=n.length,o=0;o<i;o++){var c=n[o];null!==t[c].parent&&(a[c]=s(c,t))}return a}},568:function(e,t,a){var n=a(354);function r(e){if(e){var t=[0,0,0],a=1,r=e.match(/^#([a-fA-F0-9]{3,4})$/i),i="";if(r){i=(r=r[1])[3];for(var s=0;s<t.length;s++)t[s]=parseInt(r[s]+r[s],16);i&&(a=Math.round(parseInt(i+i,16)/255*100)/100)}else if(r=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){i=r[2],r=r[1];for(s=0;s<t.length;s++)t[s]=parseInt(r.slice(2*s,2*s+2),16);i&&(a=Math.round(parseInt(i,16)/255*100)/100)}else if(r=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(s=0;s<t.length;s++)t[s]=parseInt(r[s+1]);a=parseFloat(r[4])}else if(r=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(s=0;s<t.length;s++)t[s]=Math.round(2.55*parseFloat(r[s+1]));a=parseFloat(r[4])}else if(r=e.match(/(\w+)/)){if("transparent"==r[1])return[0,0,0,0];if(!(t=n[r[1]]))return}for(s=0;s<t.length;s++)t[s]=d(t[s],0,255);return a=a||0==a?d(a,0,1):1,t[3]=a,t}}function i(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var a=parseFloat(t[4]);return[d(parseInt(t[1]),0,360),d(parseFloat(t[2]),0,100),d(parseFloat(t[3]),0,100),d(isNaN(a)?1:a,0,1)]}}}function s(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var a=parseFloat(t[4]);return[d(parseInt(t[1]),0,360),d(parseFloat(t[2]),0,100),d(parseFloat(t[3]),0,100),d(isNaN(a)?1:a,0,1)]}}}function o(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function c(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function l(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function d(e,t,a){return Math.min(Math.max(t,e),a)}function u(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}e.exports={getRgba:r,getHsla:i,getRgb:function(e){var t=r(e);return t&&t.slice(0,3)},getHsl:function(e){var t=i(e);return t&&t.slice(0,3)},getHwb:s,getAlpha:function(e){var t=r(e);if(t)return t[3];if(t=i(e))return t[3];if(t=s(e))return t[3]},hexString:function(e,t){t=void 0!==t&&3===e.length?t:e[3];return"#"+u(e[0])+u(e[1])+u(e[2])+(t>=0&&t<1?u(Math.round(255*t)):"")},rgbString:function(e,t){if(t<1||e[3]&&e[3]<1)return o(e,t);return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:o,percentString:function(e,t){if(t<1||e[3]&&e[3]<1)return c(e,t);var a=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return"rgb("+a+"%, "+n+"%, "+r+"%)"},percentaString:c,hslString:function(e,t){if(t<1||e[3]&&e[3]<1)return l(e,t);return"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:l,hwbString:function(e,t){void 0===t&&(t=void 0!==e[3]?e[3]:1);return"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return h[e.slice(0,3)]}};var h={};for(var p in n)h[n[p]]=p},569:function(e,t,a){"use strict";e.exports=function(e){(e.canvasHelpers={}).drawPoint=function(e,t,a,n,r){var i,s,o,c,l,d;if("object"!==typeof t||"[object HTMLImageElement]"!==(i=t.toString())&&"[object HTMLCanvasElement]"!==i){if(!(isNaN(a)||a<=0)){switch(t){default:e.beginPath(),e.arc(n,r,a,0,2*Math.PI),e.closePath(),e.fill();break;case"triangle":e.beginPath(),l=(s=3*a/Math.sqrt(3))*Math.sqrt(3)/2,e.moveTo(n-s/2,r+l/3),e.lineTo(n+s/2,r+l/3),e.lineTo(n,r-2*l/3),e.closePath(),e.fill();break;case"rect":d=1/Math.SQRT2*a,e.beginPath(),e.fillRect(n-d,r-d,2*d,2*d),e.strokeRect(n-d,r-d,2*d,2*d);break;case"rectRot":d=1/Math.SQRT2*a,e.beginPath(),e.moveTo(n-d,r),e.lineTo(n,r+d),e.lineTo(n+d,r),e.lineTo(n,r-d),e.closePath(),e.fill();break;case"cross":e.beginPath(),e.moveTo(n,r+a),e.lineTo(n,r-a),e.moveTo(n-a,r),e.lineTo(n+a,r),e.closePath();break;case"crossRot":e.beginPath(),o=Math.cos(Math.PI/4)*a,c=Math.sin(Math.PI/4)*a,e.moveTo(n-o,r-c),e.lineTo(n+o,r+c),e.moveTo(n-o,r+c),e.lineTo(n+o,r-c),e.closePath();break;case"star":e.beginPath(),e.moveTo(n,r+a),e.lineTo(n,r-a),e.moveTo(n-a,r),e.lineTo(n+a,r),o=Math.cos(Math.PI/4)*a,c=Math.sin(Math.PI/4)*a,e.moveTo(n-o,r-c),e.lineTo(n+o,r+c),e.moveTo(n-o,r+c),e.lineTo(n+o,r-c),e.closePath();break;case"line":e.beginPath(),e.moveTo(n-a,r),e.lineTo(n+a,r),e.closePath();break;case"dash":e.beginPath(),e.moveTo(n,r),e.lineTo(n+a,r),e.closePath()}e.stroke()}}else e.drawImage(t,n-t.width/2,r-t.height/2)}}},570:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.elements={},e.Element=function(e){t.extend(this,e),this.initialize.apply(this,arguments)},t.extend(e.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=t.clone(e._model)),e._start=t.clone(e._view),e},transition:function(e){var a=this;return a._view||(a._view=t.clone(a._model)),1===e?(a._view=a._model,a._start=null,a):(a._start||a.pivot(),t.each(a._model,(function(n,r){if("_"===r[0]);else if(a._view.hasOwnProperty(r))if(n===a._view[r]);else if("string"===typeof n)try{var i=t.color(a._model[r]).mix(t.color(a._start[r]),e);a._view[r]=i.rgbString()}catch(o){a._view[r]=n}else if("number"===typeof n){var s=void 0!==a._start[r]&&!1===isNaN(a._start[r])?a._start[r]:0;a._view[r]=(a._model[r]-s)*e+s}else a._view[r]=n;else"number"!==typeof n||isNaN(a._view[r])?a._view[r]=n:a._view[r]=n*e}),a),a)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return t.isNumber(this._model.x)&&t.isNumber(this._model.y)}}),e.Element.extend=t.inherits}},571:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:t.noop,onComplete:t.noop},e.Animation=e.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),e.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(e,t,a,n){var r=this;n||(e.animating=!0);for(var i=0;i<r.animations.length;++i)if(r.animations[i].chartInstance===e)return void(r.animations[i].animationObject=t);r.animations.push({chartInstance:e,animationObject:t}),1===r.animations.length&&r.requestAnimationFrame()},cancelAnimation:function(e){var a=t.findIndex(this.animations,(function(t){return t.chartInstance===e}));-1!==a&&(this.animations.splice(a,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=t.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){var e=this,t=Date.now(),a=0;e.dropFrames>1&&(a=Math.floor(e.dropFrames),e.dropFrames=e.dropFrames%1);for(var n=0;n<e.animations.length;)null===e.animations[n].animationObject.currentStep&&(e.animations[n].animationObject.currentStep=0),e.animations[n].animationObject.currentStep+=1+a,e.animations[n].animationObject.currentStep>e.animations[n].animationObject.numSteps&&(e.animations[n].animationObject.currentStep=e.animations[n].animationObject.numSteps),e.animations[n].animationObject.render(e.animations[n].chartInstance,e.animations[n].animationObject),e.animations[n].animationObject.onAnimationProgress&&e.animations[n].animationObject.onAnimationProgress.call&&e.animations[n].animationObject.onAnimationProgress.call(e.animations[n].chartInstance,e.animations[n]),e.animations[n].animationObject.currentStep===e.animations[n].animationObject.numSteps?(e.animations[n].animationObject.onAnimationComplete&&e.animations[n].animationObject.onAnimationComplete.call&&e.animations[n].animationObject.onAnimationComplete.call(e.animations[n].chartInstance,e.animations[n]),e.animations[n].chartInstance.animating=!1,e.animations.splice(n,1)):++n;var r=(Date.now()-t)/e.frameDuration;e.dropFrames+=r,e.animations.length>0&&e.requestAnimationFrame()}}}},572:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.types={},e.instances={},e.controllers={},e.Controller=function(a){return this.chart=a,this.config=a.config,this.options=this.config.options=t.configMerge(e.defaults.global,e.defaults[this.config.type],this.config.options||{}),this.id=t.uid(),Object.defineProperty(this,"data",{get:function(){return this.config.data}}),e.instances[this.id]=this,this.options.responsive&&this.resize(!0),this.initialize(),this},t.extend(e.Controller.prototype,{initialize:function(){var t=this;return e.plugins.notify("beforeInit",[t]),t.bindEvents(),t.ensureScalesHaveIDs(),t.buildOrUpdateControllers(),t.buildScales(),t.updateLayout(),t.resetElements(),t.initToolTip(),t.update(),e.plugins.notify("afterInit",[t]),t},clear:function(){return t.clear(this.chart),this},stop:function(){return e.animationService.cancelAnimation(this),this},resize:function(a){var n=this,r=n.chart,i=r.canvas,s=t.getMaximumWidth(i),o=r.aspectRatio,c=n.options.maintainAspectRatio&&!1===isNaN(o)&&isFinite(o)&&0!==o?s/o:t.getMaximumHeight(i);if(!(r.width!==s||r.height!==c))return n;i.width=r.width=s,i.height=r.height=c,t.retinaScale(r);var l={width:s,height:c};return e.plugins.notify("resize",[n,l]),n.options.onResize&&n.options.onResize(n,l),a||(n.stop(),n.update(n.options.responsiveAnimationDuration)),n},ensureScalesHaveIDs:function(){var e=this.options,a=e.scales||{},n=e.scale;t.each(a.xAxes,(function(e,t){e.id=e.id||"x-axis-"+t})),t.each(a.yAxes,(function(e,t){e.id=e.id||"y-axis-"+t})),n&&(n.id=n.id||"scale")},buildScales:function(){var a=this,n=a.options,r=a.scales={},i=[];n.scales&&(i=i.concat((n.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category"}})),(n.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear"}})))),n.scale&&i.push({options:n.scale,dtype:"radialLinear",isDefault:!0}),t.each(i,(function(n){var i=n.options,s=t.getValueOrDefault(i.type,n.dtype),o=e.scaleService.getScaleConstructor(s);if(o){var c=new o({id:i.id,options:i,ctx:a.chart.ctx,chart:a});r[c.id]=c,n.isDefault&&(a.scale=c)}})),e.scaleService.addScalesToLayout(this)},updateLayout:function(){e.layoutService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(){var a=this,n=[],r=[];if(t.each(a.data.datasets,(function(t,i){var s=a.getDatasetMeta(i);s.type||(s.type=t.type||a.config.type),n.push(s.type),s.controller?s.controller.updateIndex(i):(s.controller=new e.controllers[s.type](a,i),r.push(s.controller))}),a),n.length>1)for(var i=1;i<n.length;i++)if(n[i]!==n[i-1]){a.isCombo=!0;break}return r},resetElements:function(){var e=this;t.each(e.data.datasets,(function(t,a){e.getDatasetMeta(a).controller.reset()}),e)},update:function(a,n){var r=this;e.plugins.notify("beforeUpdate",[r]),r.tooltip._data=r.data;var i=r.buildOrUpdateControllers();t.each(r.data.datasets,(function(e,t){r.getDatasetMeta(t).controller.buildOrUpdateElements()}),r),e.layoutService.update(r,r.chart.width,r.chart.height),e.plugins.notify("afterScaleUpdate",[r]),t.each(i,(function(e){e.reset()})),r.updateDatasets(),e.plugins.notify("afterUpdate",[r]),r.render(a,n)},updateDatasets:function(){var t,a,n=this;if(e.plugins.notify("beforeDatasetsUpdate",[n])){for(t=0,a=n.data.datasets.length;t<a;++t)n.getDatasetMeta(t).controller.update();e.plugins.notify("afterDatasetsUpdate",[n])}},render:function(a,n){var r=this;e.plugins.notify("beforeRender",[r]);var i=r.options.animation;if(i&&("undefined"!==typeof a&&0!==a||"undefined"===typeof a&&0!==i.duration)){var s=new e.Animation;s.numSteps=(a||i.duration)/16.66,s.easing=i.easing,s.render=function(e,a){var n=t.easingEffects[a.easing],r=a.currentStep/a.numSteps,i=n(r);e.draw(i,r,a.currentStep)},s.onAnimationProgress=i.onProgress,s.onAnimationComplete=i.onComplete,e.animationService.addAnimation(r,s,a,n)}else r.draw(),i&&i.onComplete&&i.onComplete.call&&i.onComplete.call(r);return r},draw:function(a){var n=this,r=a||1;n.clear(),e.plugins.notify("beforeDraw",[n,r]),t.each(n.boxes,(function(e){e.draw(n.chartArea)}),n),n.scale&&n.scale.draw(),e.plugins.notify("beforeDatasetsDraw",[n,r]),t.each(n.data.datasets,(function(e,t){n.isDatasetVisible(t)&&n.getDatasetMeta(t).controller.draw(a)}),n,!0),e.plugins.notify("afterDatasetsDraw",[n,r]),n.tooltip.transition(r).draw(),e.plugins.notify("afterDraw",[n,r])},getElementAtEvent:function(e){var a=this,n=t.getRelativePosition(e,a.chart),r=[];return t.each(a.data.datasets,(function(e,i){if(a.isDatasetVisible(i)){var s=a.getDatasetMeta(i);t.each(s.data,(function(e){if(e.inRange(n.x,n.y))return r.push(e),r}))}})),r.slice(0,1)},getElementsAtEvent:function(e){var a=this,n=t.getRelativePosition(e,a.chart),r=[],i=function(){if(a.data.datasets)for(var e=0;e<a.data.datasets.length;e++){var t=a.getDatasetMeta(e);if(a.isDatasetVisible(e))for(var r=0;r<t.data.length;r++)if(t.data[r].inRange(n.x,n.y))return t.data[r]}}.call(a);return i?(t.each(a.data.datasets,(function(e,t){if(a.isDatasetVisible(t)){var n=a.getDatasetMeta(t).data[i._index];n&&!n._view.skip&&r.push(n)}}),a),r):r},getElementsAtXAxis:function(e){var a=this,n=t.getRelativePosition(e,a.chart),r=[],i=function(){if(a.data.datasets)for(var e=0;e<a.data.datasets.length;e++){var t=a.getDatasetMeta(e);if(a.isDatasetVisible(e))for(var r=0;r<t.data.length;r++)if(t.data[r].inLabelRange(n.x,n.y))return t.data[r]}}.call(a);return i?(t.each(a.data.datasets,(function(e,n){if(a.isDatasetVisible(n)){var s=a.getDatasetMeta(n),o=t.findIndex(s.data,(function(e){return i._model.x===e._model.x}));-1===o||s.data[o]._view.skip||r.push(s.data[o])}}),a),r):r},getElementsAtEventForMode:function(e,t){var a=this;switch(t){case"single":return a.getElementAtEvent(e);case"label":return a.getElementsAtEvent(e);case"dataset":return a.getDatasetAtEvent(e);case"x-axis":return a.getElementsAtXAxis(e);default:return e}},getDatasetAtEvent:function(e){var t=this.getElementAtEvent(e);return t.length>0&&(t=this.getDatasetMeta(t[0]._datasetIndex).data),t},getDatasetMeta:function(e){var t=this,a=t.data.datasets[e];a._meta||(a._meta={});var n=a._meta[t.id];return n||(n=a._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),n},getVisibleDatasetCount:function(){for(var e=0,t=0,a=this.data.datasets.length;t<a;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"===typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var a=this;a.stop(),a.clear(),t.unbindEvents(a,a.events),t.removeResizeListener(a.chart.canvas.parentNode);var n=a.chart.canvas;n.width=a.chart.width,n.height=a.chart.height,void 0!==a.chart.originalDevicePixelRatio&&a.chart.ctx.scale(1/a.chart.originalDevicePixelRatio,1/a.chart.originalDevicePixelRatio),n.style.width=a.chart.originalCanvasStyleWidth,n.style.height=a.chart.originalCanvasStyleHeight,e.plugins.notify("destroy",[a]),delete e.instances[a.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new e.Tooltip({_chart:t.chart,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this;t.bindEvents(e,e.options.events,(function(t){e.eventHandler(t)}))},updateHoverStyle:function(e,t,a){var n,r,i,s=a?"setHoverStyle":"removeHoverStyle";switch(t){case"single":e=[e[0]];break;case"label":case"dataset":case"x-axis":break;default:return}for(r=0,i=e.length;r<i;++r)(n=e[r])&&this.getDatasetMeta(n._datasetIndex).controller[s](n)},eventHandler:function(e){var a=this,n=a.tooltip,r=a.options||{},i=r.hover,s=r.tooltips;return a.lastActive=a.lastActive||[],a.lastTooltipActive=a.lastTooltipActive||[],"mouseout"===e.type?(a.active=[],a.tooltipActive=[]):(a.active=a.getElementsAtEventForMode(e,i.mode),a.tooltipActive=a.getElementsAtEventForMode(e,s.mode)),i.onHover&&i.onHover.call(a,a.active),a.legend&&a.legend.handleEvent&&a.legend.handleEvent(e),"mouseup"!==e.type&&"click"!==e.type||r.onClick&&r.onClick.call(a,e,a.active),a.lastActive.length&&a.updateHoverStyle(a.lastActive,i.mode,!1),a.active.length&&i.mode&&a.updateHoverStyle(a.active,i.mode,!0),(s.enabled||s.custom)&&(n.initialize(),n._active=a.tooltipActive,n.update(!0)),n.pivot(),a.animating||t.arrayEquals(a.active,a.lastActive)&&t.arrayEquals(a.tooltipActive,a.lastTooltipActive)||(a.stop(),(s.enabled||s.custom)&&n.update(!0),a.render(i.animationDuration,!0)),a.lastActive=a.active,a.lastTooltipActive=a.tooltipActive,a}})}},573:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=t.noop;e.DatasetController=function(e,t){this.initialize(e,t)},t.extend(e.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){var a=this;a.chart=e,a.index=t,a.linkScales(),a.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),a=e.getDataset();null===t.xAxisID&&(t.xAxisID=a.xAxisID||e.chart.options.scales.xAxes[0].id),null===t.yAxisID&&(t.yAxisID=a.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},reset:function(){this.update(!0)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,a=t.dataElementType;return a&&new a({_chart:t.chart.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,a=this,n=a.getMeta(),r=a.getDataset().data||[],i=n.data;for(e=0,t=r.length;e<t;++e)i[e]=i[e]||a.createMetaData(n,e);n.dataset=n.dataset||a.createMetaDataset()},addElementAndReset:function(e){var t=this,a=t.createMetaData(e);t.getMeta().data.splice(e,0,a),t.updateElement(a,e,!0)},buildOrUpdateElements:function(){var e=this.getMeta().data,t=this.getDataset().data.length,a=e.length;if(t<a)e.splice(t,a-t);else if(t>a)for(var n=a;n<t;++n)this.addElementAndReset(n)},update:a,draw:function(e){var a=e||1;t.each(this.getMeta().data,(function(e){e.transition(a).draw()}))},removeHoverStyle:function(e,a){var n=this.chart.data.datasets[e._datasetIndex],r=e._index,i=e.custom||{},s=t.getValueAtIndexOrDefault,o=e._model;o.backgroundColor=i.backgroundColor?i.backgroundColor:s(n.backgroundColor,r,a.backgroundColor),o.borderColor=i.borderColor?i.borderColor:s(n.borderColor,r,a.borderColor),o.borderWidth=i.borderWidth?i.borderWidth:s(n.borderWidth,r,a.borderWidth)},setHoverStyle:function(e){var a=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=t.getValueAtIndexOrDefault,s=t.getHoverColor,o=e._model;o.backgroundColor=r.hoverBackgroundColor?r.hoverBackgroundColor:i(a.hoverBackgroundColor,n,s(o.backgroundColor)),o.borderColor=r.hoverBorderColor?r.hoverBorderColor:i(a.hoverBorderColor,n,s(o.borderColor)),o.borderWidth=r.hoverBorderWidth?r.hoverBorderWidth:i(a.hoverBorderWidth,n,o.borderWidth)}}),e.DatasetController.extend=t.inherits}},574:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.layoutService={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),e.boxes.push(t)},removeBox:function(e,t){e.boxes&&e.boxes.splice(e.boxes.indexOf(t),1)},update:function(e,a,n){if(e){var r=t.where(e.boxes,(function(e){return"left"===e.options.position})),i=t.where(e.boxes,(function(e){return"right"===e.options.position})),s=t.where(e.boxes,(function(e){return"top"===e.options.position})),o=t.where(e.boxes,(function(e){return"bottom"===e.options.position})),c=t.where(e.boxes,(function(e){return"chartArea"===e.options.position}));s.sort((function(e,t){return(t.options.fullWidth?1:0)-(e.options.fullWidth?1:0)})),o.sort((function(e,t){return(e.options.fullWidth?1:0)-(t.options.fullWidth?1:0)}));var l=a-0,d=n-0,u=d/2,h=(a-l/2)/(r.length+i.length),p=(n-u)/(s.length+o.length),b=l,g=d,j=[];t.each(r.concat(i,s,o),(function(e){var t,a=e.isHorizontal();a?(t=e.update(e.options.fullWidth?l:b,p),g-=t.height):(t=e.update(h,u),b-=t.width),j.push({horizontal:a,minSize:t,box:e})}));var m=0,f=0,O=0,v=0;t.each(r.concat(i),P),t.each(r,(function(e){m+=e.width})),t.each(i,(function(e){f+=e.width})),t.each(s.concat(o),P),t.each(s,(function(e){O+=e.height})),t.each(o,(function(e){v+=e.height})),t.each(r.concat(i),(function(e){var a=t.findNextWhere(j,(function(t){return t.box===e})),n={left:0,right:0,top:O,bottom:v};a&&e.update(a.minSize.width,g,n)})),m=0,f=0,O=0,v=0,t.each(r,(function(e){m+=e.width})),t.each(i,(function(e){f+=e.width})),t.each(s,(function(e){O+=e.height})),t.each(o,(function(e){v+=e.height}));var x=n-O-v,y=a-m-f;y===b&&x===g||(t.each(r,(function(e){e.height=x})),t.each(i,(function(e){e.height=x})),t.each(s,(function(e){e.options.fullWidth||(e.width=y)})),t.each(o,(function(e){e.options.fullWidth||(e.width=y)})),g=x,b=y);var S=0,D=0;t.each(r.concat(s),w),S+=b,D+=g,t.each(i,w),t.each(o,w),e.chartArea={left:m,top:O,right:m+b,bottom:O+g},t.each(c,(function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(b,g)}))}function P(e){var a=t.findNextWhere(j,(function(t){return t.box===e}));if(a)if(e.isHorizontal()){var n={left:m,right:f,top:0,bottom:0};e.update(e.options.fullWidth?l:b,d/2,n)}else e.update(a.minSize.width,g)}function w(e){e.isHorizontal()?(e.left=e.options.fullWidth?0:m,e.right=e.options.fullWidth?a-0:m+b,e.top=D,e.bottom=D+e.height,D=e.bottom):(e.left=S,e.right=S+e.width,e.top=O,e.bottom=O+g,S=e.right)}}}}},575:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.scaleService={constructors:{},defaults:{},registerScaleType:function(e,a,n){this.constructors[e]=a,this.defaults[e]=t.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(a){return this.defaults.hasOwnProperty(a)?t.scaleMerge(e.defaults.scale,this.defaults[a]):{}},updateScaleDefaults:function(e,a){var n=this.defaults;n.hasOwnProperty(e)&&(n[e]=t.extend(n[e],a))},addScalesToLayout:function(a){t.each(a.scales,(function(t){e.layoutService.addBox(a,t)}))}}}},576:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers.noop;e.plugins={_plugins:[],register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)}))},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)}))},clear:function(){this._plugins=[]},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t){var a,n,r=this._plugins,i=r.length;for(a=0;a<i;++a)if("function"===typeof(n=r[a])[e]&&!1===n[e].apply(n,t||[]))return!1;return!0}},e.PluginBase=e.Element.extend({beforeInit:t,afterInit:t,beforeUpdate:t,afterUpdate:t,beforeDraw:t,afterDraw:t,destroy:t}),e.pluginService=e.plugins}},577:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:10,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:function(e){return t.isArray(e)?e:""+e}}},e.Scale=e.Element.extend({beforeUpdate:function(){t.callCallback(this.options.beforeUpdate,[this])},update:function(e,a,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=a,r.margins=t.extend({left:0,right:0,top:0,bottom:0},n),r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeDataLimits(),r.determineDataLimits(),r.afterDataLimits(),r.beforeBuildTicks(),r.buildTicks(),r.afterBuildTicks(),r.beforeTickToLabelConversion(),r.convertTicksToLabels(),r.afterTickToLabelConversion(),r.beforeCalculateTickRotation(),r.calculateTickRotation(),r.afterCalculateTickRotation(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:function(){t.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){t.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){t.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){t.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:t.noop,afterDataLimits:function(){t.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){t.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:t.noop,afterBuildTicks:function(){t.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){t.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this;e.ticks=e.ticks.map((function(t,a,n){return e.options.ticks.userCallback?e.options.ticks.userCallback(t,a,n):e.options.ticks.callback(t,a,n)}),e)},afterTickToLabelConversion:function(){t.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){t.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var a=this,n=a.ctx,r=e.defaults.global,i=a.options.ticks,s=t.getValueOrDefault(i.fontSize,r.defaultFontSize),o=t.getValueOrDefault(i.fontStyle,r.defaultFontStyle),c=t.getValueOrDefault(i.fontFamily,r.defaultFontFamily),l=t.fontString(s,o,c);n.font=l;var d,u=n.measureText(a.ticks[0]).width,h=n.measureText(a.ticks[a.ticks.length-1]).width;if(a.labelRotation=i.minRotation||0,a.paddingRight=0,a.paddingLeft=0,a.options.display&&a.isHorizontal()){a.paddingRight=h/2+3,a.paddingLeft=u/2+3,a.longestTextCache||(a.longestTextCache={});for(var p,b,g=t.longestText(n,l,a.ticks,a.longestTextCache),j=g,m=a.getPixelForTick(1)-a.getPixelForTick(0)-6;j>m&&a.labelRotation<i.maxRotation;){if(p=Math.cos(t.toRadians(a.labelRotation)),b=Math.sin(t.toRadians(a.labelRotation)),(d=p*u)+s/2>a.yLabelWidth&&(a.paddingLeft=d+s/2),a.paddingRight=s/2,b*g>a.maxHeight){a.labelRotation--;break}a.labelRotation++,j=p*g}}a.margins&&(a.paddingLeft=Math.max(a.paddingLeft-a.margins.left,0),a.paddingRight=Math.max(a.paddingRight-a.margins.right,0))},afterCalculateTickRotation:function(){t.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){t.callCallback(this.options.beforeFit,[this])},fit:function(){var a=this,n=a.minSize={width:0,height:0},r=a.options,i=e.defaults.global,s=r.ticks,o=r.scaleLabel,c=r.gridLines,l=r.display,d=a.isHorizontal(),u=t.getValueOrDefault(s.fontSize,i.defaultFontSize),h=t.getValueOrDefault(s.fontStyle,i.defaultFontStyle),p=t.getValueOrDefault(s.fontFamily,i.defaultFontFamily),b=t.fontString(u,h,p),g=t.getValueOrDefault(o.fontSize,i.defaultFontSize),j=r.gridLines.tickMarkLength;if(n.width=d?a.isFullWidth()?a.maxWidth-a.margins.left-a.margins.right:a.maxWidth:l&&c.drawTicks?j:0,n.height=d?l&&c.drawTicks?j:0:a.maxHeight,o.display&&l&&(d?n.height+=1.5*g:n.width+=1.5*g),s.display&&l){a.longestTextCache||(a.longestTextCache={});var m=t.longestText(a.ctx,b,a.ticks,a.longestTextCache),f=t.numberOfLabelLines(a.ticks),O=.5*u;if(d){a.longestLabelWidth=m;var v=Math.sin(t.toRadians(a.labelRotation))*a.longestLabelWidth+u*f+O*f;n.height=Math.min(a.maxHeight,n.height+v),a.ctx.font=b;var x=a.ctx.measureText(a.ticks[0]).width,y=a.ctx.measureText(a.ticks[a.ticks.length-1]).width,S=Math.cos(t.toRadians(a.labelRotation)),D=Math.sin(t.toRadians(a.labelRotation));a.paddingLeft=0!==a.labelRotation?S*x+3:x/2+3,a.paddingRight=0!==a.labelRotation?D*(u/2)+3:y/2+3}else{var P=a.maxWidth-n.width;s.mirror?m=0:m+=a.options.ticks.padding,m<P?n.width+=m:n.width=a.maxWidth,a.paddingTop=u/2,a.paddingBottom=u/2}}a.margins&&(a.paddingLeft=Math.max(a.paddingLeft-a.margins.left,0),a.paddingTop=Math.max(a.paddingTop-a.margins.top,0),a.paddingRight=Math.max(a.paddingRight-a.margins.right,0),a.paddingBottom=Math.max(a.paddingBottom-a.margins.bottom,0)),a.width=n.width,a.height=n.height},afterFit:function(){t.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){return null===e||"undefined"===typeof e||"number"===typeof e&&isNaN(e)?NaN:"object"===typeof e?e instanceof Date||e.isValid?e:this.getRightValue(this.isHorizontal()?e.x:e.y):e},getLabelForIndex:t.noop,getPixelForValue:t.noop,getValueForPixel:t.noop,getPixelForTick:function(e,t){var a=this;if(a.isHorizontal()){var n=(a.width-(a.paddingLeft+a.paddingRight))/Math.max(a.ticks.length-(a.options.gridLines.offsetGridLines?0:1),1),r=n*e+a.paddingLeft;t&&(r+=n/2);var i=a.left+Math.round(r);return i+=a.isFullWidth()?a.margins.left:0}var s=a.height-(a.paddingTop+a.paddingBottom);return a.top+e*(s/(a.ticks.length-1))},getPixelForDecimal:function(e){var t=this;if(t.isHorizontal()){var a=(t.width-(t.paddingLeft+t.paddingRight))*e+t.paddingLeft,n=t.left+Math.round(a);return n+=t.isFullWidth()?t.margins.left:0}return t.top+e*t.height},getBasePixel:function(){var e=this,t=e.min,a=e.max;return e.getPixelForValue(e.beginAtZero?0:t<0&&a<0?a:t>0&&a>0?t:0)},draw:function(a){var n=this,r=n.options;if(r.display){var i,s,o=n.ctx,c=e.defaults.global,l=r.ticks,d=r.gridLines,u=r.scaleLabel,h=0!==n.labelRotation,p=l.autoSkip,b=n.isHorizontal();l.maxTicksLimit&&(s=l.maxTicksLimit);var g=t.getValueOrDefault(l.fontColor,c.defaultFontColor),j=t.getValueOrDefault(l.fontSize,c.defaultFontSize),m=t.getValueOrDefault(l.fontStyle,c.defaultFontStyle),f=t.getValueOrDefault(l.fontFamily,c.defaultFontFamily),O=t.fontString(j,m,f),v=d.tickMarkLength,x=t.getValueOrDefault(d.borderDash,c.borderDash),y=t.getValueOrDefault(d.borderDashOffset,c.borderDashOffset),S=t.getValueOrDefault(u.fontColor,c.defaultFontColor),D=t.getValueOrDefault(u.fontSize,c.defaultFontSize),P=t.getValueOrDefault(u.fontStyle,c.defaultFontStyle),w=t.getValueOrDefault(u.fontFamily,c.defaultFontFamily),I=t.fontString(D,P,w),k=t.toRadians(n.labelRotation),C=Math.cos(k),N=n.longestLabelWidth*C;o.fillStyle=g;var M=[];if(b){if(i=!1,h&&(N/=2),(N+l.autoSkipPadding)*n.ticks.length>n.width-(n.paddingLeft+n.paddingRight)&&(i=1+Math.floor((N+l.autoSkipPadding)*n.ticks.length/(n.width-(n.paddingLeft+n.paddingRight)))),s&&n.ticks.length>s)for(;!i||n.ticks.length/(i||1)>s;)i||(i=1),i+=1;p||(i=!1)}var _="right"===r.position?n.left:n.right-v,A="right"===r.position?n.left+v:n.right,L="bottom"===r.position?n.top:n.bottom-v,T="bottom"===r.position?n.top+v:n.bottom;if(t.each(n.ticks,(function(e,s){if(void 0!==e&&null!==e){var o=n.ticks.length===s+1;if((!(i>1&&s%i>0||s%i===0&&s+i>=n.ticks.length)||o)&&void 0!==e&&null!==e){var c,u,p,g,j,m,f,O,S,D,P,w;s===("undefined"!==typeof n.zeroLineIndex?n.zeroLineIndex:0)?(c=d.zeroLineWidth,u=d.zeroLineColor):(c=t.getValueAtIndexOrDefault(d.lineWidth,s),u=t.getValueAtIndexOrDefault(d.color,s));var I="middle",C="middle";if(b){h||(C="top"===r.position?"bottom":"top"),I=h?"right":"center";var N=n.getPixelForTick(s)+t.aliasPixel(c);P=n.getPixelForTick(s,d.offsetGridLines)+l.labelOffset,w=h?n.top+12:"top"===r.position?n.bottom-v:n.top+v,p=j=f=S=N,g=L,m=T,O=a.top,D=a.bottom}else{"left"===r.position?l.mirror?(P=n.right+l.padding,I="left"):(P=n.right-l.padding,I="right"):l.mirror?(P=n.left-l.padding,I="right"):(P=n.left+l.padding,I="left");var F=n.getPixelForTick(s);F+=t.aliasPixel(c),w=n.getPixelForTick(s,d.offsetGridLines),p=_,j=A,f=a.left,S=a.right,g=m=O=D=F}M.push({tx1:p,ty1:g,tx2:j,ty2:m,x1:f,y1:O,x2:S,y2:D,labelX:P,labelY:w,glWidth:c,glColor:u,glBorderDash:x,glBorderDashOffset:y,rotation:-1*k,label:e,textBaseline:C,textAlign:I})}}})),t.each(M,(function(e){if(d.display&&(o.save(),o.lineWidth=e.glWidth,o.strokeStyle=e.glColor,o.setLineDash&&(o.setLineDash(e.glBorderDash),o.lineDashOffset=e.glBorderDashOffset),o.beginPath(),d.drawTicks&&(o.moveTo(e.tx1,e.ty1),o.lineTo(e.tx2,e.ty2)),d.drawOnChartArea&&(o.moveTo(e.x1,e.y1),o.lineTo(e.x2,e.y2)),o.stroke(),o.restore()),l.display){o.save(),o.translate(e.labelX,e.labelY),o.rotate(e.rotation),o.font=O,o.textBaseline=e.textBaseline,o.textAlign=e.textAlign;var a=e.label;if(t.isArray(a))for(var n=0,r=-(a.length-1)*j*.75;n<a.length;++n)o.fillText(""+a[n],0,r),r+=1.5*j;else o.fillText(a,0,0);o.restore()}})),u.display){var F,R,U=0;if(b)F=n.left+(n.right-n.left)/2,R="bottom"===r.position?n.bottom-D/2:n.top+D/2;else{var E="left"===r.position;F=E?n.left+D/2:n.right-D/2,R=n.top+(n.bottom-n.top)/2,U=E?-.5*Math.PI:.5*Math.PI}o.save(),o.translate(F,R),o.rotate(U),o.textAlign="center",o.textBaseline="middle",o.fillStyle=S,o.font=I,o.fillText(u.labelString,0,0),o.restore()}if(d.drawBorder){o.lineWidth=t.getValueAtIndexOrDefault(d.lineWidth,0),o.strokeStyle=t.getValueAtIndexOrDefault(d.color,0);var B=n.left,z=n.right,V=n.top,q=n.bottom,W=t.aliasPixel(o.lineWidth);b?(V=q="top"===r.position?n.bottom:n.top,V+=W,q+=W):(B=z="left"===r.position?n.right:n.left,B+=W,z+=W),o.beginPath(),o.moveTo(B,V),o.lineTo(z,q),o.stroke()}}}})}},578:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};var a=t.noop;e.Title=e.Element.extend({initialize:function(a){var n=this;t.extend(n,a),n.options=t.configMerge(e.defaults.global.title,a.options),n.legendHitBoxes=[]},beforeUpdate:function(){var a=this.chart.options;a&&a.title&&(this.options=t.configMerge(e.defaults.global.title,a.title))},update:function(e,t,a){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=a,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:a,beforeSetDimensions:a,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:a,beforeBuildLabels:a,buildLabels:a,afterBuildLabels:a,beforeFit:a,fit:function(){var a=this,n=t.getValueOrDefault,r=a.options,i=e.defaults.global,s=r.display,o=n(r.fontSize,i.defaultFontSize),c=a.minSize;a.isHorizontal()?(c.width=a.maxWidth,c.height=s?o+2*r.padding:0):(c.width=s?o+2*r.padding:0,c.height=a.maxHeight),a.width=c.width,a.height=c.height},afterFit:a,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var a=this,n=a.ctx,r=t.getValueOrDefault,i=a.options,s=e.defaults.global;if(i.display){var o,c,l=r(i.fontSize,s.defaultFontSize),d=r(i.fontStyle,s.defaultFontStyle),u=r(i.fontFamily,s.defaultFontFamily),h=t.fontString(l,d,u),p=0,b=a.top,g=a.left,j=a.bottom,m=a.right;n.fillStyle=r(i.fontColor,s.defaultFontColor),n.font=h,a.isHorizontal()?(o=g+(m-g)/2,c=b+(j-b)/2):(o="left"===i.position?g+l/2:m-l/2,c=b+(j-b)/2,p=Math.PI*("left"===i.position?-.5:.5)),n.save(),n.translate(o,c),n.rotate(p),n.textAlign="center",n.textBaseline="middle",n.fillText(i.text,0,0),n.restore()}}}),e.plugins.register({beforeInit:function(t){var a=t.options.title;a&&(t.titleBlock=new e.Title({ctx:t.chart.ctx,options:a,chart:t}),e.layoutService.addBox(t,t.titleBlock))}})}},579:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=t.noop;e.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(e,t){var a=t.datasetIndex,n=this.chart,r=n.getDatasetMeta(a);r.hidden=null===r.hidden?!n.data.datasets[a].hidden:null,n.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var a=e.data;return t.isArray(a.datasets)?a.datasets.map((function(a,n){return{text:a.label,fillStyle:t.isArray(a.backgroundColor)?a.backgroundColor[0]:a.backgroundColor,hidden:!e.isDatasetVisible(n),lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:a.borderWidth,strokeStyle:a.borderColor,pointStyle:a.pointStyle,datasetIndex:n}}),this):[]}}},e.Legend=e.Element.extend({initialize:function(e){t.extend(this,e),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:a,update:function(e,t,a){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=a,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:a,beforeSetDimensions:a,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:a,beforeBuildLabels:a,buildLabels:function(){var e=this;e.legendItems=e.options.labels.generateLabels.call(e,e.chart),e.options.reverse&&e.legendItems.reverse()},afterBuildLabels:a,beforeFit:a,fit:function(){var a=this,n=a.options,r=n.labels,i=n.display,s=a.ctx,o=e.defaults.global,c=t.getValueOrDefault,l=c(r.fontSize,o.defaultFontSize),d=c(r.fontStyle,o.defaultFontStyle),u=c(r.fontFamily,o.defaultFontFamily),h=t.fontString(l,d,u),p=a.legendHitBoxes=[],b=a.minSize,g=a.isHorizontal();if(g?(b.width=a.maxWidth,b.height=i?10:0):(b.width=i?10:0,b.height=a.maxHeight),i)if(s.font=h,g){var j=a.lineWidths=[0],m=a.legendItems.length?l+r.padding:0;s.textAlign="left",s.textBaseline="top",t.each(a.legendItems,(function(e,t){var n=(r.usePointStyle?l*Math.sqrt(2):r.boxWidth)+l/2+s.measureText(e.text).width;j[j.length-1]+n+r.padding>=a.width&&(m+=l+r.padding,j[j.length]=a.left),p[t]={left:0,top:0,width:n,height:l},j[j.length-1]+=n+r.padding})),b.height+=m}else{var f=r.padding,O=a.columnWidths=[],v=r.padding,x=0,y=0,S=l+f;t.each(a.legendItems,(function(e,t){var a=(r.usePointStyle?2*r.boxWidth:r.boxWidth)+l/2+s.measureText(e.text).width;y+S>b.height&&(v+=x+r.padding,O.push(x),x=0,y=0),x=Math.max(x,a),y+=S,p[t]={left:0,top:0,width:a,height:l}})),v+=x,O.push(x),b.width+=v}a.width=b.width,a.height=b.height},afterFit:a,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var a=this,n=a.options,r=n.labels,i=e.defaults.global,s=i.elements.line,o=a.width,c=a.lineWidths;if(n.display){var l,d=a.ctx,u=t.getValueOrDefault,h=u(r.fontColor,i.defaultFontColor),p=u(r.fontSize,i.defaultFontSize),b=u(r.fontStyle,i.defaultFontStyle),g=u(r.fontFamily,i.defaultFontFamily),j=t.fontString(p,b,g);d.textAlign="left",d.textBaseline="top",d.lineWidth=.5,d.strokeStyle=h,d.fillStyle=h,d.font=j;var m=r.boxWidth,f=a.legendHitBoxes,O=a.isHorizontal();l=O?{x:a.left+(o-c[0])/2,y:a.top+r.padding,line:0}:{x:a.left+r.padding,y:a.top+r.padding,line:0};var v=p+r.padding;t.each(a.legendItems,(function(t,h){var b=d.measureText(t.text).width,g=r.usePointStyle?p+p/2+b:m+p/2+b,j=l.x,x=l.y;O?j+g>=o&&(x=l.y+=v,l.line++,j=l.x=a.left+(o-c[l.line])/2):x+v>a.bottom&&(j=l.x=j+a.columnWidths[l.line]+r.padding,x=l.y=a.top,l.line++),function(t,a,r){if(!(isNaN(m)||m<=0)){d.save(),d.fillStyle=u(r.fillStyle,i.defaultColor),d.lineCap=u(r.lineCap,s.borderCapStyle),d.lineDashOffset=u(r.lineDashOffset,s.borderDashOffset),d.lineJoin=u(r.lineJoin,s.borderJoinStyle),d.lineWidth=u(r.lineWidth,s.borderWidth),d.strokeStyle=u(r.strokeStyle,i.defaultColor);var o=0===u(r.lineWidth,s.borderWidth);if(d.setLineDash&&d.setLineDash(u(r.lineDash,s.borderDash)),n.labels&&n.labels.usePointStyle){var c=p*Math.SQRT2/2,l=c/Math.SQRT2,h=t+l,b=a+l;e.canvasHelpers.drawPoint(d,r.pointStyle,c,h,b)}else o||d.strokeRect(t,a,m,p),d.fillRect(t,a,m,p);d.restore()}}(j,x,t),f[h].left=j,f[h].top=x,function(e,t,a,n){d.fillText(a.text,m+p/2+e,t),a.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(m+p/2+e,t+p/2),d.lineTo(m+p/2+e+n,t+p/2),d.stroke())}(j,x,t,b),O?l.x+=g+r.padding:l.y+=v}))}},handleEvent:function(e){var a=this,n=a.options,r="mouseup"===e.type?"click":e.type;if("mousemove"===r){if(!n.onHover)return}else{if("click"!==r)return;if(!n.onClick)return}var i=t.getRelativePosition(e,a.chart.chart),s=i.x,o=i.y;if(s>=a.left&&s<=a.right&&o>=a.top&&o<=a.bottom)for(var c=a.legendHitBoxes,l=0;l<c.length;++l){var d=c[l];if(s>=d.left&&s<=d.left+d.width&&o>=d.top&&o<=d.top+d.height){if("click"===r){n.onClick.call(a,e,a.legendItems[l]);break}if("mousemove"===r){n.onHover.call(a,e,a.legendItems[l]);break}}}}}),e.plugins.register({beforeInit:function(t){var a=t.options.legend;a&&(t.legend=new e.Legend({ctx:t.chart.ctx,options:a,chart:t}),e.layoutService.addBox(t,t.legend))}})}},580:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;function a(e,a){return a&&(t.isArray(a)?Array.prototype.push.apply(e,a):e.push(a)),e}function n(e){var t=e._xScale,a=e._yScale||e._scale,n=e._index,r=e._datasetIndex;return{xLabel:t?t.getLabelForIndex(n,r):"",yLabel:a?a.getLabelForIndex(n,r):"",index:n,datasetIndex:r}}e.defaults.global.tooltips={enabled:!0,custom:null,mode:"single",backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,yAlign:"center",xAlign:"center",caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",callbacks:{beforeTitle:t.noop,title:function(e,t){var a="",n=t.labels,r=n?n.length:0;if(e.length>0){var i=e[0];i.xLabel?a=i.xLabel:r>0&&i.index<r&&(a=n[i.index])}return a},afterTitle:t.noop,beforeBody:t.noop,beforeLabel:t.noop,label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": "+e.yLabel},labelColor:function(e,t){var a=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:a.borderColor,backgroundColor:a.backgroundColor}},afterLabel:t.noop,afterBody:t.noop,beforeFooter:t.noop,footer:t.noop,afterFooter:t.noop}},e.Tooltip=e.Element.extend({initialize:function(){var a=e.defaults.global,n=this._options,r=t.getValueOrDefault;t.extend(this,{_model:{xPadding:n.xPadding,yPadding:n.yPadding,xAlign:n.xAlign,yAlign:n.yAlign,bodyFontColor:n.bodyFontColor,_bodyFontFamily:r(n.bodyFontFamily,a.defaultFontFamily),_bodyFontStyle:r(n.bodyFontStyle,a.defaultFontStyle),_bodyAlign:n.bodyAlign,bodyFontSize:r(n.bodyFontSize,a.defaultFontSize),bodySpacing:n.bodySpacing,titleFontColor:n.titleFontColor,_titleFontFamily:r(n.titleFontFamily,a.defaultFontFamily),_titleFontStyle:r(n.titleFontStyle,a.defaultFontStyle),titleFontSize:r(n.titleFontSize,a.defaultFontSize),_titleAlign:n.titleAlign,titleSpacing:n.titleSpacing,titleMarginBottom:n.titleMarginBottom,footerFontColor:n.footerFontColor,_footerFontFamily:r(n.footerFontFamily,a.defaultFontFamily),_footerFontStyle:r(n.footerFontStyle,a.defaultFontStyle),footerFontSize:r(n.footerFontSize,a.defaultFontSize),_footerAlign:n.footerAlign,footerSpacing:n.footerSpacing,footerMarginTop:n.footerMarginTop,caretSize:n.caretSize,cornerRadius:n.cornerRadius,backgroundColor:n.backgroundColor,opacity:0,legendColorBackground:n.multiKeyBackground}})},getTitle:function(){var e=this,t=e._options,n=t.callbacks,r=n.beforeTitle.apply(e,arguments),i=n.title.apply(e,arguments),s=n.afterTitle.apply(e,arguments),o=[];return o=a(o,r),o=a(o,i),o=a(o,s)},getBeforeBody:function(){var e=this._options.callbacks.beforeBody.apply(this,arguments);return t.isArray(e)?e:void 0!==e?[e]:[]},getBody:function(e,n){var r=this,i=r._options.callbacks,s=[];return t.each(e,(function(e){var t={before:[],lines:[],after:[]};a(t.before,i.beforeLabel.call(r,e,n)),a(t.lines,i.label.call(r,e,n)),a(t.after,i.afterLabel.call(r,e,n)),s.push(t)})),s},getAfterBody:function(){var e=this._options.callbacks.afterBody.apply(this,arguments);return t.isArray(e)?e:void 0!==e?[e]:[]},getFooter:function(){var e=this,t=e._options.callbacks,n=t.beforeFooter.apply(e,arguments),r=t.footer.apply(e,arguments),i=t.afterFooter.apply(e,arguments),s=[];return s=a(s,n),s=a(s,r),s=a(s,i)},update:function(e){var a,r,i=this,s=i._options,o=i._model,c=i._active,l=i._data,d=i._chartInstance;if(c.length){o.opacity=1;var u=[],h=function(e){if(!e.length)return!1;var t,a,n=[],r=[];for(t=0,a=e.length;t<a;++t){var i=e[t];if(i&&i.hasValue()){var s=i.tooltipPosition();n.push(s.x),r.push(s.y)}}var o=0,c=0;for(t=0;t<n.length;++t)n[t]&&(o+=n[t],c+=r[t]);return{x:Math.round(o/n.length),y:Math.round(c/n.length)}}(c),p=[];for(a=0,r=c.length;a<r;++a)p.push(n(c[a]));s.itemSort&&(p=p.sort((function(e,t){return s.itemSort(e,t,l)}))),c.length>1&&t.each(p,(function(e){u.push(s.callbacks.labelColor.call(i,e,d))})),t.extend(o,{title:i.getTitle(p,l),beforeBody:i.getBeforeBody(p,l),body:i.getBody(p,l),afterBody:i.getAfterBody(p,l),footer:i.getFooter(p,l),x:Math.round(h.x),y:Math.round(h.y),caretPadding:t.getValueOrDefault(h.padding,2),labelColors:u});var b=i.getTooltipSize(o);i.determineAlignment(b),t.extend(o,i.getBackgroundPoint(o,b))}else i._model.opacity=0;return e&&s.custom&&s.custom.call(i,o),i},getTooltipSize:function(e){var a=this._chart.ctx,n={height:2*e.yPadding,width:0},r=e.body,i=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);i+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,o=e.footer.length,c=e.titleFontSize,l=e.bodyFontSize,d=e.footerFontSize;n.height+=s*c,n.height+=(s-1)*e.titleSpacing,n.height+=s?e.titleMarginBottom:0,n.height+=i*l,n.height+=i?(i-1)*e.bodySpacing:0,n.height+=o?e.footerMarginTop:0,n.height+=o*d,n.height+=o?(o-1)*e.footerSpacing:0;var u=0,h=function(e){n.width=Math.max(n.width,a.measureText(e).width+u)};return a.font=t.fontString(c,e._titleFontStyle,e._titleFontFamily),t.each(e.title,h),a.font=t.fontString(l,e._bodyFontStyle,e._bodyFontFamily),t.each(e.beforeBody.concat(e.afterBody),h),u=r.length>1?l+2:0,t.each(r,(function(e){t.each(e.before,h),t.each(e.lines,h),t.each(e.after,h)})),u=0,a.font=t.fontString(d,e._footerFontStyle,e._footerFontFamily),t.each(e.footer,h),n.width+=2*e.xPadding,n},determineAlignment:function(e){var t,a,n,r,i,s=this,o=s._model,c=s._chart,l=s._chartInstance.chartArea;o.y<e.height?o.yAlign="top":o.y>c.height-e.height&&(o.yAlign="bottom");var d=(l.left+l.right)/2,u=(l.top+l.bottom)/2;"center"===o.yAlign?(t=function(e){return e<=d},a=function(e){return e>d}):(t=function(t){return t<=e.width/2},a=function(t){return t>=c.width-e.width/2}),n=function(t){return t+e.width>c.width},r=function(t){return t-e.width<0},i=function(e){return e<=u?"top":"bottom"},t(o.x)?(o.xAlign="left",n(o.x)&&(o.xAlign="center",o.yAlign=i(o.y))):a(o.x)&&(o.xAlign="right",r(o.x)&&(o.xAlign="center",o.yAlign=i(o.y)))},getBackgroundPoint:function(e,t){var a={x:e.x,y:e.y},n=e.caretSize,r=e.caretPadding,i=e.cornerRadius,s=e.xAlign,o=e.yAlign,c=n+r,l=i+r;return"right"===s?a.x-=t.width:"center"===s&&(a.x-=t.width/2),"top"===o?a.y+=c:a.y-="bottom"===o?t.height+c:t.height/2,"center"===o?"left"===s?a.x+=c:"right"===s&&(a.x-=c):"left"===s?a.x-=l:"right"===s&&(a.x+=l),a},drawCaret:function(e,a,n){var r,i,s,o,c,l,d=this._view,u=this._chart.ctx,h=d.caretSize,p=d.cornerRadius,b=d.xAlign,g=d.yAlign,j=e.x,m=e.y,f=a.width,O=a.height;"center"===g?("left"===b?(i=(r=j)-h,s=r):(i=(r=j+f)+h,s=r),o=(c=m+O/2)-h,l=c+h):("left"===b?s=(i=(r=j+p)+h)+h:"right"===b?s=(i=(r=j+f-p)-h)-h:(r=(i=j+f/2)-h,s=i+h),"top"===g?(c=(o=m)-h,l=o):(c=(o=m+O)+h,l=o));var v=t.color(d.backgroundColor);u.fillStyle=v.alpha(n*v.alpha()).rgbString(),u.beginPath(),u.moveTo(r,o),u.lineTo(i,c),u.lineTo(s,l),u.closePath(),u.fill()},drawTitle:function(e,a,n,r){var i=a.title;if(i.length){n.textAlign=a._titleAlign,n.textBaseline="top";var s,o,c=a.titleFontSize,l=a.titleSpacing,d=t.color(a.titleFontColor);for(n.fillStyle=d.alpha(r*d.alpha()).rgbString(),n.font=t.fontString(c,a._titleFontStyle,a._titleFontFamily),s=0,o=i.length;s<o;++s)n.fillText(i[s],e.x,e.y),e.y+=c+l,s+1===i.length&&(e.y+=a.titleMarginBottom-l)}},drawBody:function(e,a,n,r){var i=a.bodyFontSize,s=a.bodySpacing,o=a.body;n.textAlign=a._bodyAlign,n.textBaseline="top";var c=t.color(a.bodyFontColor),l=c.alpha(r*c.alpha()).rgbString();n.fillStyle=l,n.font=t.fontString(i,a._bodyFontStyle,a._bodyFontFamily);var d=0,u=function(t){n.fillText(t,e.x+d,e.y),e.y+=i+s};t.each(a.beforeBody,u);var h=o.length>1;d=h?i+2:0,t.each(o,(function(s,o){t.each(s.before,u),t.each(s.lines,(function(s){h&&(n.fillStyle=t.color(a.legendColorBackground).alpha(r).rgbaString(),n.fillRect(e.x,e.y,i,i),n.strokeStyle=t.color(a.labelColors[o].borderColor).alpha(r).rgbaString(),n.strokeRect(e.x,e.y,i,i),n.fillStyle=t.color(a.labelColors[o].backgroundColor).alpha(r).rgbaString(),n.fillRect(e.x+1,e.y+1,i-2,i-2),n.fillStyle=l),u(s)})),t.each(s.after,u)})),d=0,t.each(a.afterBody,u),e.y-=s},drawFooter:function(e,a,n,r){var i=a.footer;if(i.length){e.y+=a.footerMarginTop,n.textAlign=a._footerAlign,n.textBaseline="top";var s=t.color(a.footerFontColor);n.fillStyle=s.alpha(r*s.alpha()).rgbString(),n.font=t.fontString(a.footerFontSize,a._footerFontStyle,a._footerFontFamily),t.each(i,(function(t){n.fillText(t,e.x,e.y),e.y+=a.footerFontSize+a.footerSpacing}))}},draw:function(){var e=this._chart.ctx,a=this._view;if(0!==a.opacity){var n=this.getTooltipSize(a),r={x:a.x,y:a.y},i=Math.abs(a.opacity<.001)?0:a.opacity;if(this._options.enabled){var s=t.color(a.backgroundColor);e.fillStyle=s.alpha(i*s.alpha()).rgbString(),t.drawRoundedRectangle(e,r.x,r.y,n.width,n.height,a.cornerRadius),e.fill(),this.drawCaret(r,n,i),r.x+=a.xPadding,r.y+=a.yPadding,this.drawTitle(r,a,e,i),this.drawBody(r,a,e,i),this.drawFooter(r,a,e,i)}}}})}},581:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=e.defaults.global;a.elements.arc={backgroundColor:a.defaultColor,borderColor:"#fff",borderWidth:2},e.elements.Arc=e.Element.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,a){var n=this._view;if(n){for(var r=t.getAngleFromPoint(n,{x:e,y:a}),i=r.angle,s=r.distance,o=n.startAngle,c=n.endAngle;c<o;)c+=2*Math.PI;for(;i>c;)i-=2*Math.PI;for(;i<o;)i+=2*Math.PI;var l=i>=o&&i<=c,d=s>=n.innerRadius&&s<=n.outerRadius;return l&&d}return!1},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,a=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*a,y:e.y+Math.sin(t)*a}},draw:function(){var e=this._chart.ctx,t=this._view,a=t.startAngle,n=t.endAngle;e.beginPath(),e.arc(t.x,t.y,t.outerRadius,a,n),e.arc(t.x,t.y,t.innerRadius,n,a,!0),e.closePath(),e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth,e.fillStyle=t.backgroundColor,e.fill(),e.lineJoin="bevel",t.borderWidth&&e.stroke()}})}},582:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=e.defaults.global;e.defaults.global.elements.line={tension:.4,backgroundColor:a.defaultColor,borderWidth:3,borderColor:a.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0},e.elements.Line=e.Element.extend({draw:function(){var e=this,n=e._view,r=n.spanGaps,i=n.scaleZero,s=e._loop,o=e._chart.ctx;function c(e,t){var a=t._view;!0===t._view.steppedLine?(o.lineTo(a.x,e._view.y),o.lineTo(a.x,a.y)):0===t._view.tension?o.lineTo(a.x,a.y):o.bezierCurveTo(e._view.controlPointNextX,e._view.controlPointNextY,a.controlPointPreviousX,a.controlPointPreviousY,a.x,a.y)}o.save();var l,d,u,h,p=e._children.slice(),b=-1;if(s&&p.length&&p.push(p[0]),p.length&&n.fill){for(o.beginPath(),l=0;l<p.length;++l)d=p[l],u=t.previousItem(p,l),h=d._view,0===l?(s?o.moveTo(i.x,i.y):o.moveTo(h.x,i),h.skip||(b=l,o.lineTo(h.x,h.y))):(u=-1===b?u:p[b],h.skip?r||b!==l-1||(s?o.lineTo(i.x,i.y):o.lineTo(u._view.x,i)):(b!==l-1?r&&-1!==b?c(u,d):(s||o.lineTo(h.x,i),o.lineTo(h.x,h.y)):c(u,d),b=l));s||-1===b||o.lineTo(p[b]._view.x,i),o.fillStyle=n.backgroundColor||a.defaultColor,o.closePath(),o.fill()}var g=a.elements.line;for(o.lineCap=n.borderCapStyle||g.borderCapStyle,o.setLineDash&&o.setLineDash(n.borderDash||g.borderDash),o.lineDashOffset=n.borderDashOffset||g.borderDashOffset,o.lineJoin=n.borderJoinStyle||g.borderJoinStyle,o.lineWidth=n.borderWidth||g.borderWidth,o.strokeStyle=n.borderColor||a.defaultColor,o.beginPath(),b=-1,l=0;l<p.length;++l)d=p[l],u=t.previousItem(p,l),h=d._view,0===l?h.skip||(o.moveTo(h.x,h.y),b=l):(u=-1===b?u:p[b],h.skip||(b!==l-1&&!r||-1===b?o.moveTo(h.x,h.y):c(u,d),b=l));o.stroke(),o.restore()}})}},583:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=e.defaults.global,n=a.defaultColor;a.elements.point={radius:3,pointStyle:"circle",backgroundColor:n,borderWidth:1,borderColor:n,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},e.elements.Point=e.Element.extend({inRange:function(e,t){var a=this._view;return!!a&&Math.pow(e-a.x,2)+Math.pow(t-a.y,2)<Math.pow(a.hitRadius+a.radius,2)},inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hitRadius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(){var r=this._view,i=this._chart.ctx,s=r.pointStyle,o=r.radius,c=r.x,l=r.y;r.skip||(i.strokeStyle=r.borderColor||n,i.lineWidth=t.getValueOrDefault(r.borderWidth,a.elements.point.borderWidth),i.fillStyle=r.backgroundColor||n,e.canvasHelpers.drawPoint(i,s,o,c,l))}})}},584:function(e,t,a){"use strict";e.exports=function(e){var t=e.defaults.global;t.elements.rectangle={backgroundColor:t.defaultColor,borderWidth:0,borderColor:t.defaultColor,borderSkipped:"bottom"},e.elements.Rectangle=e.Element.extend({draw:function(){var e=this._chart.ctx,t=this._view,a=t.width/2,n=t.x-a,r=t.x+a,i=t.base-(t.base-t.y),s=t.borderWidth/2;t.borderWidth&&(n+=s,r-=s,i+=s),e.beginPath(),e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth;var o=[[n,t.base],[n,i],[r,i],[r,t.base]],c=["bottom","left","top","right"].indexOf(t.borderSkipped,0);function l(e){return o[(c+e)%4]}-1===c&&(c=0),e.moveTo.apply(e,l(0));for(var d=1;d<4;d++)e.lineTo.apply(e,l(d));e.fill(),t.borderWidth&&e.stroke()},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){var a=this._view;return!!a&&(a.y<a.base?e>=a.x-a.width/2&&e<=a.x+a.width/2&&t>=a.y&&t<=a.base:e>=a.x-a.width/2&&e<=a.x+a.width/2&&t>=a.base&&t<=a.y)},inLabelRange:function(e){var t=this._view;return!!t&&(e>=t.x-t.width/2&&e<=t.x+t.width/2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}})}},585:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=t.noop;e.LinearScaleBase=e.Scale.extend({handleTickRangeOptions:function(){var e=this,a=e.options.ticks;if(a.beginAtZero){var n=t.sign(e.min),r=t.sign(e.max);n<0&&r<0?e.max=0:n>0&&r>0&&(e.min=0)}void 0!==a.min?e.min=a.min:void 0!==a.suggestedMin&&(e.min=Math.min(e.min,a.suggestedMin)),void 0!==a.max?e.max=a.max:void 0!==a.suggestedMax&&(e.max=Math.max(e.max,a.suggestedMax)),e.min===e.max&&(e.max++,a.beginAtZero||e.min--)},getTickLimit:a,handleDirectionalChanges:a,buildTicks:function(){var e,a=this,n=a.options,r=a.ticks=[],i=n.ticks,s=t.getValueOrDefault,o=a.getTickLimit();if(o=Math.max(2,o),i.fixedStepSize&&i.fixedStepSize>0||i.stepSize&&i.stepSize>0)e=s(i.fixedStepSize,i.stepSize);else{var c=t.niceNum(a.max-a.min,!1);e=t.niceNum(c/(o-1),!0)}var l=Math.floor(a.min/e)*e,d=Math.ceil(a.max/e)*e,u=(d-l)/e;u=t.almostEquals(u,Math.round(u),e/1e3)?Math.round(u):Math.ceil(u),r.push(void 0!==i.min?i.min:l);for(var h=1;h<u;++h)r.push(l+h*e);r.push(void 0!==i.max?i.max:d),a.handleDirectionalChanges(),a.max=t.max(r),a.min=t.min(r),i.reverse?(r.reverse(),a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),e.Scale.prototype.convertTicksToLabels.call(t)}})}},586:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=e.Scale.extend({getLabels:function(){var e=this.chart.data;return(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e,a=this,n=a.getLabels();a.minIndex=0,a.maxIndex=n.length-1,void 0!==a.options.ticks.min&&(e=t.indexOf(n,a.options.ticks.min),a.minIndex=-1!==e?e:a.minIndex),void 0!==a.options.ticks.max&&(e=t.indexOf(n,a.options.ticks.max),a.maxIndex=-1!==e?e:a.maxIndex),a.min=n[a.minIndex],a.max=n[a.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var a=this,n=a.chart.data,r=a.isHorizontal();return n.xLabels&&r||n.yLabels&&!r?a.getRightValue(n.datasets[t].data[e]):a.ticks[e]},getPixelForValue:function(e,t,a,n){var r=this,i=Math.max(r.maxIndex+1-r.minIndex-(r.options.gridLines.offsetGridLines?0:1),1);if(void 0!==e&&isNaN(t)){var s=r.getLabels().indexOf(e);t=-1!==s?s:t}if(r.isHorizontal()){var o=(r.width-(r.paddingLeft+r.paddingRight))/i,c=o*(t-r.minIndex)+r.paddingLeft;return(r.options.gridLines.offsetGridLines&&n||r.maxIndex===r.minIndex&&n)&&(c+=o/2),r.left+Math.round(c)}var l=(r.height-(r.paddingTop+r.paddingBottom))/i,d=l*(t-r.minIndex)+r.paddingTop;return r.options.gridLines.offsetGridLines&&n&&(d+=l/2),r.top+Math.round(d)},getPixelForTick:function(e,t){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null,t)},getValueForPixel:function(e){var t=this,a=Math.max(t.ticks.length-(t.options.gridLines.offsetGridLines?0:1),1),n=t.isHorizontal(),r=(n?t.width-(t.paddingLeft+t.paddingRight):t.height-(t.paddingTop+t.paddingBottom))/a;return e-=n?t.left:t.top,t.options.gridLines.offsetGridLines&&(e-=r/2),(e-=n?t.paddingLeft:t.paddingTop)<=0?0:Math.round(e/r)},getBasePixel:function(){return this.bottom}});e.scaleService.registerScaleType("category",a,{position:"bottom"})}},587:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a={position:"left",ticks:{callback:function(e,a,n){var r=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(r)>1&&e!==Math.floor(e)&&(r=e-Math.floor(e));var i=t.log10(Math.abs(r)),s="";if(0!==e){var o=-1*Math.floor(i);o=Math.max(Math.min(o,20),0),s=e.toFixed(o)}else s="0";return s}}},n=e.LinearScaleBase.extend({determineDataLimits:function(){var e=this,a=e.options,n=e.chart,r=n.data.datasets,i=e.isHorizontal();function s(t){return i?t.xAxisID===e.id:t.yAxisID===e.id}if(e.min=null,e.max=null,a.stacked){var o={};t.each(r,(function(r,i){var c=n.getDatasetMeta(i);void 0===o[c.type]&&(o[c.type]={positiveValues:[],negativeValues:[]});var l=o[c.type].positiveValues,d=o[c.type].negativeValues;n.isDatasetVisible(i)&&s(c)&&t.each(r.data,(function(t,n){var r=+e.getRightValue(t);isNaN(r)||c.data[n].hidden||(l[n]=l[n]||0,d[n]=d[n]||0,a.relativePoints?l[n]=100:r<0?d[n]+=r:l[n]+=r)}))})),t.each(o,(function(a){var n=a.positiveValues.concat(a.negativeValues),r=t.min(n),i=t.max(n);e.min=null===e.min?r:Math.min(e.min,r),e.max=null===e.max?i:Math.max(e.max,i)}))}else t.each(r,(function(a,r){var i=n.getDatasetMeta(r);n.isDatasetVisible(r)&&s(i)&&t.each(a.data,(function(t,a){var n=+e.getRightValue(t);isNaN(n)||i.data[a].hidden||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n))}))}));this.handleTickRangeOptions()},getTickLimit:function(){var a,n=this,r=n.options.ticks;if(n.isHorizontal())a=Math.min(r.maxTicksLimit?r.maxTicksLimit:11,Math.ceil(n.width/50));else{var i=t.getValueOrDefault(r.fontSize,e.defaults.global.defaultFontSize);a=Math.min(r.maxTicksLimit?r.maxTicksLimit:11,Math.ceil(n.height/(2*i)))}return a},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t,a,n=this,r=n.paddingLeft,i=n.paddingBottom,s=n.start,o=+n.getRightValue(e),c=n.end-s;return n.isHorizontal()?(a=n.width-(r+n.paddingRight),t=n.left+a/c*(o-s),Math.round(t+r)):(a=n.height-(n.paddingTop+i),t=n.bottom-i-a/c*(o-s),Math.round(t))},getValueForPixel:function(e){var t=this,a=t.isHorizontal(),n=t.paddingLeft,r=t.paddingBottom,i=a?t.width-(n+t.paddingRight):t.height-(t.paddingTop+r),s=(a?e-t.left-n:t.bottom-r-e)/i;return t.start+(t.end-t.start)*s},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}});e.scaleService.registerScaleType("linear",n,a)}},588:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a={position:"left",ticks:{callback:function(e,a,n){var r=e/Math.pow(10,Math.floor(t.log10(e)));return 0===e?"0":1===r||2===r||5===r||0===a||a===n.length-1?e.toExponential():""}}},n=e.Scale.extend({determineDataLimits:function(){var e=this,a=e.options,n=a.ticks,r=e.chart,i=r.data.datasets,s=t.getValueOrDefault,o=e.isHorizontal();function c(t){return o?t.xAxisID===e.id:t.yAxisID===e.id}if(e.min=null,e.max=null,e.minNotZero=null,a.stacked){var l={};t.each(i,(function(n,i){var s=r.getDatasetMeta(i);r.isDatasetVisible(i)&&c(s)&&(void 0===l[s.type]&&(l[s.type]=[]),t.each(n.data,(function(t,n){var r=l[s.type],i=+e.getRightValue(t);isNaN(i)||s.data[n].hidden||(r[n]=r[n]||0,a.relativePoints?r[n]=100:r[n]+=i)})))})),t.each(l,(function(a){var n=t.min(a),r=t.max(a);e.min=null===e.min?n:Math.min(e.min,n),e.max=null===e.max?r:Math.max(e.max,r)}))}else t.each(i,(function(a,n){var i=r.getDatasetMeta(n);r.isDatasetVisible(n)&&c(i)&&t.each(a.data,(function(t,a){var n=+e.getRightValue(t);isNaN(n)||i.data[a].hidden||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n),0!==n&&(null===e.minNotZero||n<e.minNotZero)&&(e.minNotZero=n))}))}));e.min=s(n.min,e.min),e.max=s(n.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(t.log10(e.min))-1),e.max=Math.pow(10,Math.floor(t.log10(e.max))+1)):(e.min=1,e.max=10))},buildTicks:function(){for(var e=this,a=e.options.ticks,n=t.getValueOrDefault,r=e.ticks=[],i=n(a.min,Math.pow(10,Math.floor(t.log10(e.min))));i<e.max;){var s,o;r.push(i),0===i?(s=Math.floor(t.log10(e.minNotZero)),o=Math.round(e.minNotZero/Math.pow(10,s))):(s=Math.floor(t.log10(i)),o=Math.floor(i/Math.pow(10,s))+1),10===o&&(o=1,++s),i=o*Math.pow(10,s)}var c=n(a.max,i);r.push(c),e.isHorizontal()||r.reverse(),e.max=t.max(r),e.min=t.min(r),a.reverse?(r.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),e.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},getPixelForValue:function(e){var a,n,r,i=this,s=i.start,o=+i.getRightValue(e),c=i.paddingTop,l=i.paddingBottom,d=i.paddingLeft,u=i.options.ticks;return i.isHorizontal()?(r=t.log10(i.end)-t.log10(s),0===o?n=i.left+d:(a=i.width-(d+i.paddingRight),n=i.left+a/r*(t.log10(o)-t.log10(s)),n+=d)):(a=i.height-(c+l),0!==s||u.reverse?0===i.end&&u.reverse?(r=t.log10(i.start)-t.log10(i.minNotZero),n=o===i.end?i.top+c:o===i.minNotZero?i.top+c+.02*a:i.top+c+.02*a+.98*a/r*(t.log10(o)-t.log10(i.minNotZero))):(r=t.log10(i.end)-t.log10(s),a=i.height-(c+l),n=i.bottom-l-a/r*(t.log10(o)-t.log10(s))):(r=t.log10(i.end)-t.log10(i.minNotZero),n=o===s?i.bottom-l:o===i.minNotZero?i.bottom-l-.02*a:i.bottom-l-.02*a-.98*a/r*(t.log10(o)-t.log10(i.minNotZero)))),n},getValueForPixel:function(e){var a,n,r=this,i=t.log10(r.end)-t.log10(r.start);return r.isHorizontal()?(n=r.width-(r.paddingLeft+r.paddingRight),a=r.start*Math.pow(10,(e-r.left-r.paddingLeft)*i/n)):(n=r.height-(r.paddingTop+r.paddingBottom),a=Math.pow(10,(r.bottom-r.paddingBottom-e)*i/n)/r.start),a}});e.scaleService.registerScaleType("logarithmic",n,a)}},589:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=e.defaults.global,n=e.LinearScaleBase.extend({getValueCount:function(){return this.chart.data.labels.length},setDimensions:function(){var e=this,n=e.options,r=n.ticks;e.width=e.maxWidth,e.height=e.maxHeight,e.xCenter=Math.round(e.width/2),e.yCenter=Math.round(e.height/2);var i=t.min([e.height,e.width]),s=t.getValueOrDefault(r.fontSize,a.defaultFontSize);e.drawingArea=n.display?i/2-(s/2+r.backdropPaddingY):i/2},determineDataLimits:function(){var e=this,a=e.chart;e.min=null,e.max=null,t.each(a.data.datasets,(function(n,r){if(a.isDatasetVisible(r)){var i=a.getDatasetMeta(r);t.each(n.data,(function(t,a){var n=+e.getRightValue(t);isNaN(n)||i.data[a].hidden||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n))}))}})),e.handleTickRangeOptions()},getTickLimit:function(){var e=this.options.ticks,n=t.getValueOrDefault(e.fontSize,a.defaultFontSize);return Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*n)))},convertTicksToLabels:function(){var t=this;e.LinearScaleBase.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e,n,r,i,s,o,c,l,d,u,h,p,b=this.options.pointLabels,g=t.getValueOrDefault(b.fontSize,a.defaultFontSize),j=t.getValueOrDefault(b.fontStyle,a.defaultFontStyle),m=t.getValueOrDefault(b.fontFamily,a.defaultFontFamily),f=t.fontString(g,j,m),O=t.min([this.height/2-g-5,this.width/2]),v=this.width,x=0;for(this.ctx.font=f,n=0;n<this.getValueCount();n++){e=this.getPointPosition(n,O),r=this.ctx.measureText(this.pointLabels[n]?this.pointLabels[n]:"").width+5;var y=360*(this.getIndexAngle(n)+Math.PI/2)/(2*Math.PI)%360;0===y||180===y?(i=r/2,e.x+i>v&&(v=e.x+i,s=n),e.x-i<x&&(x=e.x-i,c=n)):y<180?e.x+r>v&&(v=e.x+r,s=n):e.x-r<x&&(x=e.x-r,c=n)}d=x,u=Math.ceil(v-this.width),o=this.getIndexAngle(s),l=this.getIndexAngle(c),h=u/Math.sin(o+Math.PI/2),p=d/Math.sin(l+Math.PI/2),h=t.isNumber(h)?h:0,p=t.isNumber(p)?p:0,this.drawingArea=Math.round(O-(p+h)/2),this.setCenterPoint(p,h)},setCenterPoint:function(e,t){var a=this,n=a.width-t-a.drawingArea,r=e+a.drawingArea;a.xCenter=Math.round((r+n)/2+a.left),a.yCenter=Math.round(a.height/2+a.top)},getIndexAngle:function(e){var t=2*Math.PI/this.getValueCount(),a=(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360;return e*t-Math.PI/2+a},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var a=t.drawingArea/(t.max-t.min);return t.options.reverse?(t.max-e)*a:(e-t.min)*a},getPointPosition:function(e,t){var a=this,n=a.getIndexAngle(e);return{x:Math.round(Math.cos(n)*t)+a.xCenter,y:Math.round(Math.sin(n)*t)+a.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this,t=e.min,a=e.max;return e.getPointPositionForValue(0,e.beginAtZero?0:t<0&&a<0?a:t>0&&a>0?t:0)},draw:function(){var e=this,n=e.options,r=n.gridLines,i=n.ticks,s=n.angleLines,o=n.pointLabels,c=t.getValueOrDefault;if(n.display){var l=e.ctx,d=c(i.fontSize,a.defaultFontSize),u=c(i.fontStyle,a.defaultFontStyle),h=c(i.fontFamily,a.defaultFontFamily),p=t.fontString(d,u,h);if(t.each(e.ticks,(function(s,o){if(o>0||n.reverse){var u=e.getDistanceFromCenterForValue(e.ticksAsNumbers[o]),h=e.yCenter-u;if(r.display&&0!==o)if(l.strokeStyle=t.getValueAtIndexOrDefault(r.color,o-1),l.lineWidth=t.getValueAtIndexOrDefault(r.lineWidth,o-1),n.lineArc)l.beginPath(),l.arc(e.xCenter,e.yCenter,u,0,2*Math.PI),l.closePath(),l.stroke();else{l.beginPath();for(var b=0;b<e.getValueCount();b++){var g=e.getPointPosition(b,u);0===b?l.moveTo(g.x,g.y):l.lineTo(g.x,g.y)}l.closePath(),l.stroke()}if(i.display){var j=c(i.fontColor,a.defaultFontColor);if(l.font=p,i.showLabelBackdrop){var m=l.measureText(s).width;l.fillStyle=i.backdropColor,l.fillRect(e.xCenter-m/2-i.backdropPaddingX,h-d/2-i.backdropPaddingY,m+2*i.backdropPaddingX,d+2*i.backdropPaddingY)}l.textAlign="center",l.textBaseline="middle",l.fillStyle=j,l.fillText(s,e.xCenter,h)}}})),!n.lineArc){l.lineWidth=s.lineWidth,l.strokeStyle=s.color;for(var b=e.getDistanceFromCenterForValue(n.reverse?e.min:e.max),g=c(o.fontSize,a.defaultFontSize),j=c(o.fontStyle,a.defaultFontStyle),m=c(o.fontFamily,a.defaultFontFamily),f=t.fontString(g,j,m),O=e.getValueCount()-1;O>=0;O--){if(s.display){var v=e.getPointPosition(O,b);l.beginPath(),l.moveTo(e.xCenter,e.yCenter),l.lineTo(v.x,v.y),l.stroke(),l.closePath()}var x=e.getPointPosition(O,b+5),y=c(o.fontColor,a.defaultFontColor);l.font=f,l.fillStyle=y;var S=e.pointLabels,D=360*(this.getIndexAngle(O)+Math.PI/2)/(2*Math.PI)%360;l.textAlign=0===D||180===D?"center":D<180?"left":"right",l.textBaseline=90===D||270===D?"middle":D>270||D<90?"bottom":"top",l.fillText(S[O]?S[O]:"",x.x,x.y)}}}}});e.scaleService.registerScaleType("radialLinear",n,{display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2},pointLabels:{fontSize:10,callback:function(e){return e}}})}},590:function(e,t,a){"use strict";var n=a(12);n="function"===typeof n?n:window.moment,e.exports=function(e){var t=e.helpers,a={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},r=e.Scale.extend({initialize:function(){if(!n)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");e.Scale.prototype.initialize.call(this)},getLabelMoment:function(e,t){return null===e||null===t?null:"undefined"!==typeof this.labelMoments[e]?this.labelMoments[e][t]:null},getLabelDiff:function(e,t){var a=this;return null===e||null===t?null:(void 0===a.labelDiffs&&a.buildLabelDiffs(),"undefined"!==typeof a.labelDiffs[e]?a.labelDiffs[e][t]:null)},getMomentStartOf:function(e){var t=this;return"week"===t.options.time.unit&&!1!==t.options.time.isoWeekday?e.clone().startOf("isoWeek").isoWeekday(t.options.time.isoWeekday):e.clone().startOf(t.tickUnit)},determineDataLimits:function(){var e=this;e.labelMoments=[];var a=[];e.chart.data.labels&&e.chart.data.labels.length>0?(t.each(e.chart.data.labels,(function(t){var n=e.parseTime(t);n.isValid()&&(e.options.time.round&&n.startOf(e.options.time.round),a.push(n))}),e),e.firstTick=n.min.call(e,a),e.lastTick=n.max.call(e,a)):(e.firstTick=null,e.lastTick=null),t.each(e.chart.data.datasets,(function(r,i){var s=[],o=e.chart.isDatasetVisible(i);"object"===typeof r.data[0]&&null!==r.data[0]?t.each(r.data,(function(t){var a=e.parseTime(e.getRightValue(t));a.isValid()&&(e.options.time.round&&a.startOf(e.options.time.round),s.push(a),o&&(e.firstTick=null!==e.firstTick?n.min(e.firstTick,a):a,e.lastTick=null!==e.lastTick?n.max(e.lastTick,a):a))}),e):s=a,e.labelMoments.push(s)}),e),e.options.time.min&&(e.firstTick=e.parseTime(e.options.time.min)),e.options.time.max&&(e.lastTick=e.parseTime(e.options.time.max)),e.firstTick=(e.firstTick||n()).clone(),e.lastTick=(e.lastTick||n()).clone()},buildLabelDiffs:function(){var e=this;e.labelDiffs=[];var a=[];e.chart.data.labels&&e.chart.data.labels.length>0&&t.each(e.chart.data.labels,(function(t){var n=e.parseTime(t);n.isValid()&&(e.options.time.round&&n.startOf(e.options.time.round),a.push(n.diff(e.firstTick,e.tickUnit,!0)))}),e),t.each(e.chart.data.datasets,(function(n){var r=[];"object"===typeof n.data[0]&&null!==n.data[0]?t.each(n.data,(function(t){var a=e.parseTime(e.getRightValue(t));a.isValid()&&(e.options.time.round&&a.startOf(e.options.time.round),r.push(a.diff(e.firstTick,e.tickUnit,!0)))}),e):r=a,e.labelDiffs.push(r)}),e)},buildTicks:function(){var n=this;n.ctx.save();var r,i=t.getValueOrDefault(n.options.ticks.fontSize,e.defaults.global.defaultFontSize),s=t.getValueOrDefault(n.options.ticks.fontStyle,e.defaults.global.defaultFontStyle),o=t.getValueOrDefault(n.options.ticks.fontFamily,e.defaults.global.defaultFontFamily),c=t.fontString(i,s,o);if(n.ctx.font=c,n.ticks=[],n.unitScale=1,n.scaleSizeInUnits=0,n.options.time.unit)n.tickUnit=n.options.time.unit||"day",n.displayFormat=n.options.time.displayFormats[n.tickUnit],n.scaleSizeInUnits=n.lastTick.diff(n.firstTick,n.tickUnit,!0),n.unitScale=t.getValueOrDefault(n.options.time.unitStepSize,1);else{var l=n.isHorizontal()?n.width-(n.paddingLeft+n.paddingRight):n.height-(n.paddingTop+n.paddingBottom),d=n.tickFormatFunction(n.firstTick,0,[]),u=n.ctx.measureText(d).width,h=l/(u=u*Math.cos(t.toRadians(n.options.ticks.maxRotation))+i*Math.sin(t.toRadians(n.options.ticks.maxRotation)));n.tickUnit=n.options.time.minUnit,n.scaleSizeInUnits=n.lastTick.diff(n.firstTick,n.tickUnit,!0),n.displayFormat=n.options.time.displayFormats[n.tickUnit];for(var p=0,b=a.units[p];p<a.units.length;){if(n.unitScale=1,t.isArray(b.steps)&&Math.ceil(n.scaleSizeInUnits/h)<t.max(b.steps)){for(var g=0;g<b.steps.length;++g)if(b.steps[g]>=Math.ceil(n.scaleSizeInUnits/h)){n.unitScale=t.getValueOrDefault(n.options.time.unitStepSize,b.steps[g]);break}break}if(!1===b.maxStep||Math.ceil(n.scaleSizeInUnits/h)<b.maxStep){n.unitScale=t.getValueOrDefault(n.options.time.unitStepSize,Math.ceil(n.scaleSizeInUnits/h));break}++p,b=a.units[p],n.tickUnit=b.name;var j=n.firstTick.diff(n.getMomentStartOf(n.firstTick),n.tickUnit,!0),m=n.getMomentStartOf(n.lastTick.clone().add(1,n.tickUnit)).diff(n.lastTick,n.tickUnit,!0);n.scaleSizeInUnits=n.lastTick.diff(n.firstTick,n.tickUnit,!0)+j+m,n.displayFormat=n.options.time.displayFormats[b.name]}}if(n.options.time.min?r=n.getMomentStartOf(n.firstTick):(n.firstTick=n.getMomentStartOf(n.firstTick),r=n.firstTick),!n.options.time.max){var f=n.getMomentStartOf(n.lastTick),O=f.diff(n.lastTick,n.tickUnit,!0);O<0?n.lastTick=n.getMomentStartOf(n.lastTick.add(1,n.tickUnit)):O>=0&&(n.lastTick=f),n.scaleSizeInUnits=n.lastTick.diff(n.firstTick,n.tickUnit,!0)}n.options.time.displayFormat&&(n.displayFormat=n.options.time.displayFormat),n.ticks.push(n.firstTick.clone());for(var v=1;v<=n.scaleSizeInUnits;++v){var x=r.clone().add(v,n.tickUnit);if(n.options.time.max&&x.diff(n.lastTick,n.tickUnit,!0)>=0)break;v%n.unitScale===0&&n.ticks.push(x)}0===n.ticks[n.ticks.length-1].diff(n.lastTick,n.tickUnit)&&0!==n.scaleSizeInUnits||(n.options.time.max?(n.ticks.push(n.lastTick.clone()),n.scaleSizeInUnits=n.lastTick.diff(n.ticks[0],n.tickUnit,!0)):(n.ticks.push(n.lastTick.clone()),n.scaleSizeInUnits=n.lastTick.diff(n.firstTick,n.tickUnit,!0))),n.ctx.restore(),n.labelDiffs=void 0},getLabelForIndex:function(e,t){var a=this,n=a.chart.data.labels&&e<a.chart.data.labels.length?a.chart.data.labels[e]:"";return"object"===typeof a.chart.data.datasets[t].data[0]&&(n=a.getRightValue(a.chart.data.datasets[t].data[e])),a.options.time.tooltipFormat&&(n=a.parseTime(n).format(a.options.time.tooltipFormat)),n},tickFormatFunction:function(e,a,n){var r=e.format(this.displayFormat),i=this.options.ticks,s=t.getValueOrDefault(i.callback,i.userCallback);return s?s(r,a,n):r},convertTicksToLabels:function(){var e=this;e.tickMoments=e.ticks,e.ticks=e.ticks.map(e.tickFormatFunction,e)},getPixelForValue:function(e,t,a){var n=this,r=null;if(void 0!==t&&void 0!==a&&(r=n.getLabelDiff(a,t)),null===r&&(e&&e.isValid||(e=n.parseTime(n.getRightValue(e))),e&&e.isValid&&e.isValid()&&(r=e.diff(n.firstTick,n.tickUnit,!0))),null!==r){var i=0!==r?r/n.scaleSizeInUnits:r;if(n.isHorizontal()){var s=(n.width-(n.paddingLeft+n.paddingRight))*i+n.paddingLeft;return n.left+Math.round(s)}var o=(n.height-(n.paddingTop+n.paddingBottom))*i+n.paddingTop;return n.top+Math.round(o)}},getPixelForTick:function(e){return this.getPixelForValue(this.tickMoments[e],null,null)},getValueForPixel:function(e){var t=this,a=t.isHorizontal()?t.width-(t.paddingLeft+t.paddingRight):t.height-(t.paddingTop+t.paddingBottom),r=(e-(t.isHorizontal()?t.left+t.paddingLeft:t.top+t.paddingTop))/a;return r*=t.scaleSizeInUnits,t.firstTick.clone().add(n.duration(r,t.tickUnit).asSeconds(),"seconds")},parseTime:function(e){var t=this;return"string"===typeof t.options.time.parser?n(e,t.options.time.parser):"function"===typeof t.options.time.parser?t.options.time.parser(e):"function"===typeof e.getMonth||"number"===typeof e?n(e):e.isValid&&e.isValid()?e:"string"!==typeof t.options.time.format&&t.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),t.options.time.format(e)):n(e,t.options.time.format)}});e.scaleService.registerScaleType("time",r,{position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}})}},591:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},e.controllers.bar=e.DatasetController.extend({dataElementType:e.elements.Rectangle,initialize:function(t,a){e.DatasetController.prototype.initialize.call(this,t,a),this.getMeta().bar=!0},getBarCount:function(){var e=this,a=0;return t.each(e.chart.data.datasets,(function(t,n){e.chart.getDatasetMeta(n).bar&&e.chart.isDatasetVisible(n)&&++a}),e),a},update:function(e){var a=this;t.each(a.getMeta().data,(function(t,n){a.updateElement(t,n,e)}),a)},updateElement:function(e,a,n){var r=this,i=r.getMeta(),s=r.getScaleForId(i.xAxisID),o=r.getScaleForId(i.yAxisID),c=o.getBasePixel(),l=r.chart.options.elements.rectangle,d=e.custom||{},u=r.getDataset();t.extend(e,{_xScale:s,_yScale:o,_datasetIndex:r.index,_index:a,_model:{x:r.calculateBarX(a,r.index),y:n?c:r.calculateBarY(a,r.index),label:r.chart.data.labels[a],datasetLabel:u.label,base:n?c:r.calculateBarBase(r.index,a),width:r.calculateBarWidth(a),backgroundColor:d.backgroundColor?d.backgroundColor:t.getValueAtIndexOrDefault(u.backgroundColor,a,l.backgroundColor),borderSkipped:d.borderSkipped?d.borderSkipped:l.borderSkipped,borderColor:d.borderColor?d.borderColor:t.getValueAtIndexOrDefault(u.borderColor,a,l.borderColor),borderWidth:d.borderWidth?d.borderWidth:t.getValueAtIndexOrDefault(u.borderWidth,a,l.borderWidth)}}),e.pivot()},calculateBarBase:function(e,t){var a=this,n=a.getMeta(),r=a.getScaleForId(n.yAxisID),i=0;if(r.options.stacked){for(var s=a.chart,o=s.data.datasets,c=Number(o[e].data[t]),l=0;l<e;l++){var d=o[l],u=s.getDatasetMeta(l);if(u.bar&&u.yAxisID===r.id&&s.isDatasetVisible(l)){var h=Number(d.data[t]);i+=c<0?Math.min(h,0):Math.max(h,0)}}return r.getPixelForValue(i)}return r.getBasePixel()},getRuler:function(e){var t,a=this,n=a.getMeta(),r=a.getScaleForId(n.xAxisID),i=a.getBarCount(),s=(t="category"===r.options.type?r.getPixelForTick(e+1)-r.getPixelForTick(e):r.width/r.ticks.length)*r.options.categoryPercentage,o=(t-t*r.options.categoryPercentage)/2,c=s/i;r.ticks.length!==a.chart.data.labels.length&&(c*=r.ticks.length/a.chart.data.labels.length);return{datasetCount:i,tickWidth:t,categoryWidth:s,categorySpacing:o,fullBarWidth:c,barWidth:c*r.options.barPercentage,barSpacing:c-c*r.options.barPercentage}},calculateBarWidth:function(e){var t=this.getScaleForId(this.getMeta().xAxisID);if(t.options.barThickness)return t.options.barThickness;var a=this.getRuler(e);return t.options.stacked?a.categoryWidth:a.barWidth},getBarIndex:function(e){var t,a=0;for(t=0;t<e;++t)this.chart.getDatasetMeta(t).bar&&this.chart.isDatasetVisible(t)&&++a;return a},calculateBarX:function(e,t){var a=this,n=a.getMeta(),r=a.getScaleForId(n.xAxisID),i=a.getBarIndex(t),s=a.getRuler(e),o=r.getPixelForValue(null,e,t,a.chart.isCombo);return o-=a.chart.isCombo?s.tickWidth/2:0,r.options.stacked?o+s.categoryWidth/2+s.categorySpacing:o+s.barWidth/2+s.categorySpacing+s.barWidth*i+s.barSpacing/2+s.barSpacing*i},calculateBarY:function(e,t){var a=this,n=a.getMeta(),r=a.getScaleForId(n.yAxisID),i=Number(a.getDataset().data[e]);if(r.options.stacked){for(var s=0,o=0,c=0;c<t;c++){var l=a.chart.data.datasets[c],d=a.chart.getDatasetMeta(c);if(d.bar&&d.yAxisID===r.id&&a.chart.isDatasetVisible(c)){var u=Number(l.data[e]);u<0?o+=u||0:s+=u||0}}return i<0?r.getPixelForValue(o+i):r.getPixelForValue(s+i)}return r.getPixelForValue(i)},draw:function(e){var a=this,n=e||1;t.each(a.getMeta().data,(function(e,t){var r=a.getDataset().data[t];null===r||void 0===r||isNaN(r)||e.transition(n).draw()}),a)},setHoverStyle:function(e){var a=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=e._model;i.backgroundColor=r.hoverBackgroundColor?r.hoverBackgroundColor:t.getValueAtIndexOrDefault(a.hoverBackgroundColor,n,t.getHoverColor(i.backgroundColor)),i.borderColor=r.hoverBorderColor?r.hoverBorderColor:t.getValueAtIndexOrDefault(a.hoverBorderColor,n,t.getHoverColor(i.borderColor)),i.borderWidth=r.hoverBorderWidth?r.hoverBorderWidth:t.getValueAtIndexOrDefault(a.hoverBorderWidth,n,i.borderWidth)},removeHoverStyle:function(e){var a=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=e._model,s=this.chart.options.elements.rectangle;i.backgroundColor=r.backgroundColor?r.backgroundColor:t.getValueAtIndexOrDefault(a.backgroundColor,n,s.backgroundColor),i.borderColor=r.borderColor?r.borderColor:t.getValueAtIndexOrDefault(a.borderColor,n,s.borderColor),i.borderWidth=r.borderWidth?r.borderWidth:t.getValueAtIndexOrDefault(a.borderWidth,n,s.borderWidth)}}),e.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(e,t){var a="";return e.length>0&&(e[0].yLabel?a=e[0].yLabel:t.labels.length>0&&e[0].index<t.labels.length&&(a=t.labels[e[0].index])),a},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": "+e.xLabel}}}},e.controllers.horizontalBar=e.controllers.bar.extend({updateElement:function(e,a,n){var r=this,i=r.getMeta(),s=r.getScaleForId(i.xAxisID),o=r.getScaleForId(i.yAxisID),c=s.getBasePixel(),l=e.custom||{},d=r.getDataset(),u=r.chart.options.elements.rectangle;t.extend(e,{_xScale:s,_yScale:o,_datasetIndex:r.index,_index:a,_model:{x:n?c:r.calculateBarX(a,r.index),y:r.calculateBarY(a,r.index),label:r.chart.data.labels[a],datasetLabel:d.label,base:n?c:r.calculateBarBase(r.index,a),height:r.calculateBarHeight(a),backgroundColor:l.backgroundColor?l.backgroundColor:t.getValueAtIndexOrDefault(d.backgroundColor,a,u.backgroundColor),borderSkipped:l.borderSkipped?l.borderSkipped:u.borderSkipped,borderColor:l.borderColor?l.borderColor:t.getValueAtIndexOrDefault(d.borderColor,a,u.borderColor),borderWidth:l.borderWidth?l.borderWidth:t.getValueAtIndexOrDefault(d.borderWidth,a,u.borderWidth)},draw:function(){var e=this._chart.ctx,t=this._view,a=t.height/2,n=t.y-a,r=t.y+a,i=t.base-(t.base-t.x),s=t.borderWidth/2;t.borderWidth&&(n+=s,r-=s,i+=s),e.beginPath(),e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth;var o=[[t.base,r],[t.base,n],[i,n],[i,r]],c=["bottom","left","top","right"].indexOf(t.borderSkipped,0);function l(e){return o[(c+e)%4]}-1===c&&(c=0),e.moveTo.apply(e,l(0));for(var d=1;d<4;d++)e.lineTo.apply(e,l(d));e.fill(),t.borderWidth&&e.stroke()},inRange:function(e,t){var a=this._view,n=!1;return a&&(n=a.x<a.base?t>=a.y-a.height/2&&t<=a.y+a.height/2&&e>=a.x&&e<=a.base:t>=a.y-a.height/2&&t<=a.y+a.height/2&&e>=a.base&&e<=a.x),n}}),e.pivot()},calculateBarBase:function(e,t){var a=this,n=a.getMeta(),r=a.getScaleForId(n.xAxisID),i=0;if(r.options.stacked){for(var s=a.chart,o=s.data.datasets,c=Number(o[e].data[t]),l=0;l<e;l++){var d=o[l],u=s.getDatasetMeta(l);if(u.bar&&u.xAxisID===r.id&&s.isDatasetVisible(l)){var h=Number(d.data[t]);i+=c<0?Math.min(h,0):Math.max(h,0)}}return r.getPixelForValue(i)}return r.getBasePixel()},getRuler:function(e){var t,a=this,n=a.getMeta(),r=a.getScaleForId(n.yAxisID),i=a.getBarCount(),s=(t="category"===r.options.type?r.getPixelForTick(e+1)-r.getPixelForTick(e):r.width/r.ticks.length)*r.options.categoryPercentage,o=(t-t*r.options.categoryPercentage)/2,c=s/i;r.ticks.length!==a.chart.data.labels.length&&(c*=r.ticks.length/a.chart.data.labels.length);return{datasetCount:i,tickHeight:t,categoryHeight:s,categorySpacing:o,fullBarHeight:c,barHeight:c*r.options.barPercentage,barSpacing:c-c*r.options.barPercentage}},calculateBarHeight:function(e){var t=this,a=t.getScaleForId(t.getMeta().yAxisID);if(a.options.barThickness)return a.options.barThickness;var n=t.getRuler(e);return a.options.stacked?n.categoryHeight:n.barHeight},calculateBarX:function(e,t){var a=this,n=a.getMeta(),r=a.getScaleForId(n.xAxisID),i=Number(a.getDataset().data[e]);if(r.options.stacked){for(var s=0,o=0,c=0;c<t;c++){var l=a.chart.data.datasets[c],d=a.chart.getDatasetMeta(c);if(d.bar&&d.xAxisID===r.id&&a.chart.isDatasetVisible(c)){var u=Number(l.data[e]);u<0?o+=u||0:s+=u||0}}return i<0?r.getPixelForValue(o+i):r.getPixelForValue(s+i)}return r.getPixelForValue(i)},calculateBarY:function(e,t){var a=this,n=a.getMeta(),r=a.getScaleForId(n.yAxisID),i=a.getBarIndex(t),s=a.getRuler(e),o=r.getPixelForValue(null,e,t,a.chart.isCombo);return o-=a.chart.isCombo?s.tickHeight/2:0,r.options.stacked?o+s.categoryHeight/2+s.categorySpacing:o+s.barHeight/2+s.categorySpacing+s.barHeight*i+s.barSpacing/2+s.barSpacing*i}})}},592:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",n=t.datasets[e.datasetIndex].data[e.index];return a+": ("+n.x+", "+n.y+", "+n.r+")"}}}},e.controllers.bubble=e.DatasetController.extend({dataElementType:e.elements.Point,update:function(e){var a=this,n=a.getMeta().data;t.each(n,(function(t,n){a.updateElement(t,n,e)}))},updateElement:function(a,n,r){var i=this,s=i.getMeta(),o=i.getScaleForId(s.xAxisID),c=i.getScaleForId(s.yAxisID),l=a.custom||{},d=i.getDataset(),u=d.data[n],h=i.chart.options.elements.point,p=i.index;t.extend(a,{_xScale:o,_yScale:c,_datasetIndex:p,_index:n,_model:{x:r?o.getPixelForDecimal(.5):o.getPixelForValue("object"===typeof u?u:NaN,n,p,i.chart.isCombo),y:r?c.getBasePixel():c.getPixelForValue(u,n,p),radius:r?0:l.radius?l.radius:i.getRadius(u),hitRadius:l.hitRadius?l.hitRadius:t.getValueAtIndexOrDefault(d.hitRadius,n,h.hitRadius)}}),e.DatasetController.prototype.removeHoverStyle.call(i,a,h);var b=a._model;b.skip=l.skip?l.skip:isNaN(b.x)||isNaN(b.y),a.pivot()},getRadius:function(e){return e.r||this.chart.options.elements.point.radius},setHoverStyle:function(a){var n=this;e.DatasetController.prototype.setHoverStyle.call(n,a);var r=n.chart.data.datasets[a._datasetIndex],i=a._index,s=a.custom||{};a._model.radius=s.hoverRadius?s.hoverRadius:t.getValueAtIndexOrDefault(r.hoverRadius,i,n.chart.options.elements.point.hoverRadius)+n.getRadius(r.data[i])},removeHoverStyle:function(t){var a=this;e.DatasetController.prototype.removeHoverStyle.call(a,t,a.chart.options.elements.point);var n=a.chart.data.datasets[t._datasetIndex].data[t._index],r=t.custom||{};t._model.radius=r.radius?r.radius:a.getRadius(n)}})}},593:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers,a=e.defaults;a.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var a=e.data,n=a.datasets,r=a.labels;if(n.length)for(var i=0;i<n[0].data.length;++i)t.push('<li><span style="background-color:'+n[0].backgroundColor[i]+'"></span>'),r[i]&&t.push(r[i]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var a=e.data;return a.labels.length&&a.datasets.length?a.labels.map((function(n,r){var i=e.getDatasetMeta(0),s=a.datasets[0],o=i.data[r],c=o&&o.custom||{},l=t.getValueAtIndexOrDefault,d=e.options.elements.arc;return{text:n,fillStyle:c.backgroundColor?c.backgroundColor:l(s.backgroundColor,r,d.backgroundColor),strokeStyle:c.borderColor?c.borderColor:l(s.borderColor,r,d.borderColor),lineWidth:c.borderWidth?c.borderWidth:l(s.borderWidth,r,d.borderWidth),hidden:isNaN(s.data[r])||i.data[r].hidden,index:r}})):[]}},onClick:function(e,t){var a,n,r,i=t.index,s=this.chart;for(a=0,n=(s.data.datasets||[]).length;a<n;++a)(r=s.getDatasetMeta(a)).data[i]&&(r.data[i].hidden=!r.data[i].hidden);s.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+t.datasets[e.datasetIndex].data[e.index]}}}},a.pie=t.clone(a.doughnut),t.extend(a.pie,{cutoutPercentage:0}),e.controllers.doughnut=e.controllers.pie=e.DatasetController.extend({dataElementType:e.elements.Arc,linkScales:t.noop,getRingIndex:function(e){for(var t=0,a=0;a<e;++a)this.chart.isDatasetVisible(a)&&++t;return t},update:function(e){var a=this,n=a.chart,r=n.chartArea,i=n.options,s=i.elements.arc,o=r.right-r.left-s.borderWidth,c=r.bottom-r.top-s.borderWidth,l=Math.min(o,c),d={x:0,y:0},u=a.getMeta(),h=i.cutoutPercentage,p=i.circumference;if(p<2*Math.PI){var b=i.rotation%(2*Math.PI),g=(b+=2*Math.PI*(b>=Math.PI?-1:b<-Math.PI?1:0))+p,j={x:Math.cos(b),y:Math.sin(b)},m={x:Math.cos(g),y:Math.sin(g)},f=b<=0&&0<=g||b<=2*Math.PI&&2*Math.PI<=g,O=b<=.5*Math.PI&&.5*Math.PI<=g||b<=2.5*Math.PI&&2.5*Math.PI<=g,v=b<=-Math.PI&&-Math.PI<=g||b<=Math.PI&&Math.PI<=g,x=b<=.5*-Math.PI&&.5*-Math.PI<=g||b<=1.5*Math.PI&&1.5*Math.PI<=g,y=h/100,S={x:v?-1:Math.min(j.x*(j.x<0?1:y),m.x*(m.x<0?1:y)),y:x?-1:Math.min(j.y*(j.y<0?1:y),m.y*(m.y<0?1:y))},D={x:f?1:Math.max(j.x*(j.x>0?1:y),m.x*(m.x>0?1:y)),y:O?1:Math.max(j.y*(j.y>0?1:y),m.y*(m.y>0?1:y))},P={width:.5*(D.x-S.x),height:.5*(D.y-S.y)};l=Math.min(o/P.width,c/P.height),d={x:-.5*(D.x+S.x),y:-.5*(D.y+S.y)}}n.borderWidth=a.getMaxBorderWidth(u.data),n.outerRadius=Math.max((l-n.borderWidth)/2,0),n.innerRadius=Math.max(h?n.outerRadius/100*h:1,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),n.offsetX=d.x*n.outerRadius,n.offsetY=d.y*n.outerRadius,u.total=a.calculateTotal(),a.outerRadius=n.outerRadius-n.radiusLength*a.getRingIndex(a.index),a.innerRadius=a.outerRadius-n.radiusLength,t.each(u.data,(function(t,n){a.updateElement(t,n,e)}))},updateElement:function(e,a,n){var r=this,i=r.chart,s=i.chartArea,o=i.options,c=o.animation,l=(s.left+s.right)/2,d=(s.top+s.bottom)/2,u=o.rotation,h=o.rotation,p=r.getDataset(),b=n&&c.animateRotate||e.hidden?0:r.calculateCircumference(p.data[a])*(o.circumference/(2*Math.PI)),g=n&&c.animateScale?0:r.innerRadius,j=n&&c.animateScale?0:r.outerRadius,m=t.getValueAtIndexOrDefault;t.extend(e,{_datasetIndex:r.index,_index:a,_model:{x:l+i.offsetX,y:d+i.offsetY,startAngle:u,endAngle:h,circumference:b,outerRadius:j,innerRadius:g,label:m(p.label,a,i.data.labels[a])}});var f=e._model;this.removeHoverStyle(e),n&&c.animateRotate||(f.startAngle=0===a?o.rotation:r.getMeta().data[a-1]._model.endAngle,f.endAngle=f.startAngle+f.circumference),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},calculateTotal:function(){var e,a=this.getDataset(),n=this.getMeta(),r=0;return t.each(n.data,(function(t,n){e=a.data[n],isNaN(e)||t.hidden||(r+=Math.abs(e))})),r},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(e/t):0},getMaxBorderWidth:function(e){for(var t,a,n=0,r=this.index,i=e.length,s=0;s<i;s++)t=e[s]._model?e[s]._model.borderWidth:0,n=(a=e[s]._chart?e[s]._chart.config.data.datasets[r].hoverBorderWidth:0)>(n=t>n?t:n)?a:n;return n}})}},594:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;function a(e,a){return t.getValueOrDefault(e.showLine,a.showLines)}e.defaults.line={showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},e.controllers.line=e.DatasetController.extend({datasetElementType:e.elements.Line,dataElementType:e.elements.Point,addElementAndReset:function(t){var n=this,r=n.chart.options,i=n.getMeta();e.DatasetController.prototype.addElementAndReset.call(n,t),a(n.getDataset(),r)&&0!==i.dataset._model.tension&&n.updateBezierControlPoints()},update:function(e){var n,r,i,s=this,o=s.getMeta(),c=o.dataset,l=o.data||[],d=s.chart.options,u=d.elements.line,h=s.getScaleForId(o.yAxisID),p=s.getDataset(),b=a(p,d);for(b&&(i=c.custom||{},void 0!==p.tension&&void 0===p.lineTension&&(p.lineTension=p.tension),c._scale=h,c._datasetIndex=s.index,c._children=l,c._model={spanGaps:p.spanGaps?p.spanGaps:d.spanGaps,tension:i.tension?i.tension:t.getValueOrDefault(p.lineTension,u.tension),backgroundColor:i.backgroundColor?i.backgroundColor:p.backgroundColor||u.backgroundColor,borderWidth:i.borderWidth?i.borderWidth:p.borderWidth||u.borderWidth,borderColor:i.borderColor?i.borderColor:p.borderColor||u.borderColor,borderCapStyle:i.borderCapStyle?i.borderCapStyle:p.borderCapStyle||u.borderCapStyle,borderDash:i.borderDash?i.borderDash:p.borderDash||u.borderDash,borderDashOffset:i.borderDashOffset?i.borderDashOffset:p.borderDashOffset||u.borderDashOffset,borderJoinStyle:i.borderJoinStyle?i.borderJoinStyle:p.borderJoinStyle||u.borderJoinStyle,fill:i.fill?i.fill:void 0!==p.fill?p.fill:u.fill,steppedLine:i.steppedLine?i.steppedLine:t.getValueOrDefault(p.steppedLine,u.stepped),cubicInterpolationMode:i.cubicInterpolationMode?i.cubicInterpolationMode:t.getValueOrDefault(p.cubicInterpolationMode,u.cubicInterpolationMode),scaleTop:h.top,scaleBottom:h.bottom,scaleZero:h.getBasePixel()},c.pivot()),n=0,r=l.length;n<r;++n)s.updateElement(l[n],n,e);for(b&&0!==c._model.tension&&s.updateBezierControlPoints(),n=0,r=l.length;n<r;++n)l[n].pivot()},getPointBackgroundColor:function(e,a){var n=this.chart.options.elements.point.backgroundColor,r=this.getDataset(),i=e.custom||{};return i.backgroundColor?n=i.backgroundColor:r.pointBackgroundColor?n=t.getValueAtIndexOrDefault(r.pointBackgroundColor,a,n):r.backgroundColor&&(n=r.backgroundColor),n},getPointBorderColor:function(e,a){var n=this.chart.options.elements.point.borderColor,r=this.getDataset(),i=e.custom||{};return i.borderColor?n=i.borderColor:r.pointBorderColor?n=t.getValueAtIndexOrDefault(r.pointBorderColor,a,n):r.borderColor&&(n=r.borderColor),n},getPointBorderWidth:function(e,a){var n=this.chart.options.elements.point.borderWidth,r=this.getDataset(),i=e.custom||{};return i.borderWidth?n=i.borderWidth:r.pointBorderWidth?n=t.getValueAtIndexOrDefault(r.pointBorderWidth,a,n):r.borderWidth&&(n=r.borderWidth),n},updateElement:function(e,a,n){var r,i,s=this,o=s.getMeta(),c=e.custom||{},l=s.getDataset(),d=s.index,u=l.data[a],h=s.getScaleForId(o.yAxisID),p=s.getScaleForId(o.xAxisID),b=s.chart.options.elements.point,g=1===(s.chart.data.labels||[]).length||1===l.data.length||s.chart.isCombo;void 0!==l.radius&&void 0===l.pointRadius&&(l.pointRadius=l.radius),void 0!==l.hitRadius&&void 0===l.pointHitRadius&&(l.pointHitRadius=l.hitRadius),r=p.getPixelForValue("object"===typeof u?u:NaN,a,d,g),i=n?h.getBasePixel():s.calculatePointY(u,a,d),e._xScale=p,e._yScale=h,e._datasetIndex=d,e._index=a,e._model={x:r,y:i,skip:c.skip||isNaN(r)||isNaN(i),radius:c.radius||t.getValueAtIndexOrDefault(l.pointRadius,a,b.radius),pointStyle:c.pointStyle||t.getValueAtIndexOrDefault(l.pointStyle,a,b.pointStyle),backgroundColor:s.getPointBackgroundColor(e,a),borderColor:s.getPointBorderColor(e,a),borderWidth:s.getPointBorderWidth(e,a),tension:o.dataset._model?o.dataset._model.tension:0,steppedLine:!!o.dataset._model&&o.dataset._model.steppedLine,hitRadius:c.hitRadius||t.getValueAtIndexOrDefault(l.pointHitRadius,a,b.hitRadius)}},calculatePointY:function(e,t,a){var n,r,i,s=this,o=s.chart,c=s.getMeta(),l=s.getScaleForId(c.yAxisID),d=0,u=0;if(l.options.stacked){for(n=0;n<a;n++)if(r=o.data.datasets[n],"line"===(i=o.getDatasetMeta(n)).type&&i.yAxisID===l.id&&o.isDatasetVisible(n)){var h=Number(l.getRightValue(r.data[t]));h<0?u+=h||0:d+=h||0}var p=Number(l.getRightValue(e));return p<0?l.getPixelForValue(u+p):l.getPixelForValue(d+p)}return l.getPixelForValue(e)},updateBezierControlPoints:function(){var e,a,n,r,i=this,s=i.getMeta(),o=i.chart.chartArea,c=s.data||[];function l(e,t,a){return Math.max(Math.min(e,a),t)}if(s.dataset._model.spanGaps&&(c=c.filter((function(e){return!e._model.skip}))),"monotone"===s.dataset._model.cubicInterpolationMode)t.splineCurveMonotone(c);else for(e=0,a=c.length;e<a;++e)n=c[e]._model,r=t.splineCurve(t.previousItem(c,e)._model,n,t.nextItem(c,e)._model,s.dataset._model.tension),n.controlPointPreviousX=r.previous.x,n.controlPointPreviousY=r.previous.y,n.controlPointNextX=r.next.x,n.controlPointNextY=r.next.y;if(i.chart.options.elements.line.capBezierPoints)for(e=0,a=c.length;e<a;++e)(n=c[e]._model).controlPointPreviousX=l(n.controlPointPreviousX,o.left,o.right),n.controlPointPreviousY=l(n.controlPointPreviousY,o.top,o.bottom),n.controlPointNextX=l(n.controlPointNextX,o.left,o.right),n.controlPointNextY=l(n.controlPointNextY,o.top,o.bottom)},draw:function(e){var t,n,r=this,i=r.getMeta(),s=i.data||[],o=e||1;for(t=0,n=s.length;t<n;++t)s[t].transition(o);for(a(r.getDataset(),r.chart.options)&&i.dataset.transition(o).draw(),t=0,n=s.length;t<n;++t)s[t].draw()},setHoverStyle:function(e){var a=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=e._model;i.radius=r.hoverRadius||t.getValueAtIndexOrDefault(a.pointHoverRadius,n,this.chart.options.elements.point.hoverRadius),i.backgroundColor=r.hoverBackgroundColor||t.getValueAtIndexOrDefault(a.pointHoverBackgroundColor,n,t.getHoverColor(i.backgroundColor)),i.borderColor=r.hoverBorderColor||t.getValueAtIndexOrDefault(a.pointHoverBorderColor,n,t.getHoverColor(i.borderColor)),i.borderWidth=r.hoverBorderWidth||t.getValueAtIndexOrDefault(a.pointHoverBorderWidth,n,i.borderWidth)},removeHoverStyle:function(e){var a=this,n=a.chart.data.datasets[e._datasetIndex],r=e._index,i=e.custom||{},s=e._model;void 0!==n.radius&&void 0===n.pointRadius&&(n.pointRadius=n.radius),s.radius=i.radius||t.getValueAtIndexOrDefault(n.pointRadius,r,a.chart.options.elements.point.radius),s.backgroundColor=a.getPointBackgroundColor(e,r),s.borderColor=a.getPointBorderColor(e,r),s.borderWidth=a.getPointBorderWidth(e,r)}})}},595:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0,ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,aspectRatio:1,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var a=e.data,n=a.datasets,r=a.labels;if(n.length)for(var i=0;i<n[0].data.length;++i)t.push('<li><span style="background-color:'+n[0].backgroundColor[i]+'">'),r[i]&&t.push(r[i]),t.push("</span></li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var a=e.data;return a.labels.length&&a.datasets.length?a.labels.map((function(n,r){var i=e.getDatasetMeta(0),s=a.datasets[0],o=i.data[r].custom||{},c=t.getValueAtIndexOrDefault,l=e.options.elements.arc;return{text:n,fillStyle:o.backgroundColor?o.backgroundColor:c(s.backgroundColor,r,l.backgroundColor),strokeStyle:o.borderColor?o.borderColor:c(s.borderColor,r,l.borderColor),lineWidth:o.borderWidth?o.borderWidth:c(s.borderWidth,r,l.borderWidth),hidden:isNaN(s.data[r])||i.data[r].hidden,index:r}})):[]}},onClick:function(e,t){var a,n,r,i=t.index,s=this.chart;for(a=0,n=(s.data.datasets||[]).length;a<n;++a)(r=s.getDatasetMeta(a)).data[i].hidden=!r.data[i].hidden;s.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}},e.controllers.polarArea=e.DatasetController.extend({dataElementType:e.elements.Arc,linkScales:t.noop,update:function(e){var a=this,n=a.chart,r=n.chartArea,i=a.getMeta(),s=n.options,o=s.elements.arc,c=Math.min(r.right-r.left,r.bottom-r.top);n.outerRadius=Math.max((c-o.borderWidth/2)/2,0),n.innerRadius=Math.max(s.cutoutPercentage?n.outerRadius/100*s.cutoutPercentage:1,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),a.outerRadius=n.outerRadius-n.radiusLength*a.index,a.innerRadius=a.outerRadius-n.radiusLength,i.count=a.countVisibleElements(),t.each(i.data,(function(t,n){a.updateElement(t,n,e)}))},updateElement:function(e,a,n){for(var r=this,i=r.chart,s=r.getDataset(),o=i.options,c=o.animation,l=i.scale,d=t.getValueAtIndexOrDefault,u=i.data.labels,h=r.calculateCircumference(s.data[a]),p=l.xCenter,b=l.yCenter,g=0,j=r.getMeta(),m=0;m<a;++m)isNaN(s.data[m])||j.data[m].hidden||++g;var f=o.startAngle,O=e.hidden?0:l.getDistanceFromCenterForValue(s.data[a]),v=f+h*g,x=v+(e.hidden?0:h),y=c.animateScale?0:l.getDistanceFromCenterForValue(s.data[a]);t.extend(e,{_datasetIndex:r.index,_index:a,_scale:l,_model:{x:p,y:b,innerRadius:0,outerRadius:n?y:O,startAngle:n&&c.animateRotate?f:v,endAngle:n&&c.animateRotate?f:x,label:d(u,a,u[a])}}),r.removeHoverStyle(e),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},countVisibleElements:function(){var e=this.getDataset(),a=this.getMeta(),n=0;return t.each(a.data,(function(t,a){isNaN(e.data[a])||t.hidden||n++})),n},calculateCircumference:function(e){var t=this.getMeta().count;return t>0&&!isNaN(e)?2*Math.PI/t:0}})}},596:function(e,t,a){"use strict";e.exports=function(e){var t=e.helpers;e.defaults.radar={scale:{type:"radialLinear"},elements:{line:{tension:0}}},e.controllers.radar=e.DatasetController.extend({datasetElementType:e.elements.Line,dataElementType:e.elements.Point,linkScales:t.noop,addElementAndReset:function(t){e.DatasetController.prototype.addElementAndReset.call(this,t),this.updateBezierControlPoints()},update:function(e){var a=this,n=a.getMeta(),r=n.dataset,i=n.data,s=r.custom||{},o=a.getDataset(),c=a.chart.options.elements.line,l=a.chart.scale;void 0!==o.tension&&void 0===o.lineTension&&(o.lineTension=o.tension),t.extend(n.dataset,{_datasetIndex:a.index,_children:i,_loop:!0,_model:{tension:s.tension?s.tension:t.getValueOrDefault(o.lineTension,c.tension),backgroundColor:s.backgroundColor?s.backgroundColor:o.backgroundColor||c.backgroundColor,borderWidth:s.borderWidth?s.borderWidth:o.borderWidth||c.borderWidth,borderColor:s.borderColor?s.borderColor:o.borderColor||c.borderColor,fill:s.fill?s.fill:void 0!==o.fill?o.fill:c.fill,borderCapStyle:s.borderCapStyle?s.borderCapStyle:o.borderCapStyle||c.borderCapStyle,borderDash:s.borderDash?s.borderDash:o.borderDash||c.borderDash,borderDashOffset:s.borderDashOffset?s.borderDashOffset:o.borderDashOffset||c.borderDashOffset,borderJoinStyle:s.borderJoinStyle?s.borderJoinStyle:o.borderJoinStyle||c.borderJoinStyle,scaleTop:l.top,scaleBottom:l.bottom,scaleZero:l.getBasePosition()}}),n.dataset.pivot(),t.each(i,(function(t,n){a.updateElement(t,n,e)}),a),a.updateBezierControlPoints()},updateElement:function(e,a,n){var r=this,i=e.custom||{},s=r.getDataset(),o=r.chart.scale,c=r.chart.options.elements.point,l=o.getPointPositionForValue(a,s.data[a]);t.extend(e,{_datasetIndex:r.index,_index:a,_scale:o,_model:{x:n?o.xCenter:l.x,y:n?o.yCenter:l.y,tension:i.tension?i.tension:t.getValueOrDefault(s.tension,r.chart.options.elements.line.tension),radius:i.radius?i.radius:t.getValueAtIndexOrDefault(s.pointRadius,a,c.radius),backgroundColor:i.backgroundColor?i.backgroundColor:t.getValueAtIndexOrDefault(s.pointBackgroundColor,a,c.backgroundColor),borderColor:i.borderColor?i.borderColor:t.getValueAtIndexOrDefault(s.pointBorderColor,a,c.borderColor),borderWidth:i.borderWidth?i.borderWidth:t.getValueAtIndexOrDefault(s.pointBorderWidth,a,c.borderWidth),pointStyle:i.pointStyle?i.pointStyle:t.getValueAtIndexOrDefault(s.pointStyle,a,c.pointStyle),hitRadius:i.hitRadius?i.hitRadius:t.getValueAtIndexOrDefault(s.hitRadius,a,c.hitRadius)}}),e._model.skip=i.skip?i.skip:isNaN(e._model.x)||isNaN(e._model.y)},updateBezierControlPoints:function(){var e=this.chart.chartArea,a=this.getMeta();t.each(a.data,(function(n,r){var i=n._model,s=t.splineCurve(t.previousItem(a.data,r,!0)._model,i,t.nextItem(a.data,r,!0)._model,i.tension);i.controlPointPreviousX=Math.max(Math.min(s.previous.x,e.right),e.left),i.controlPointPreviousY=Math.max(Math.min(s.previous.y,e.bottom),e.top),i.controlPointNextX=Math.max(Math.min(s.next.x,e.right),e.left),i.controlPointNextY=Math.max(Math.min(s.next.y,e.bottom),e.top),n.pivot()}))},draw:function(e){var a=this.getMeta(),n=e||1;t.each(a.data,(function(e){e.transition(n)})),a.dataset.transition(n).draw(),t.each(a.data,(function(e){e.draw()}))},setHoverStyle:function(e){var a=this.chart.data.datasets[e._datasetIndex],n=e.custom||{},r=e._index,i=e._model;i.radius=n.hoverRadius?n.hoverRadius:t.getValueAtIndexOrDefault(a.pointHoverRadius,r,this.chart.options.elements.point.hoverRadius),i.backgroundColor=n.hoverBackgroundColor?n.hoverBackgroundColor:t.getValueAtIndexOrDefault(a.pointHoverBackgroundColor,r,t.getHoverColor(i.backgroundColor)),i.borderColor=n.hoverBorderColor?n.hoverBorderColor:t.getValueAtIndexOrDefault(a.pointHoverBorderColor,r,t.getHoverColor(i.borderColor)),i.borderWidth=n.hoverBorderWidth?n.hoverBorderWidth:t.getValueAtIndexOrDefault(a.pointHoverBorderWidth,r,i.borderWidth)},removeHoverStyle:function(e){var a=this.chart.data.datasets[e._datasetIndex],n=e.custom||{},r=e._index,i=e._model,s=this.chart.options.elements.point;i.radius=n.radius?n.radius:t.getValueAtIndexOrDefault(a.radius,r,s.radius),i.backgroundColor=n.backgroundColor?n.backgroundColor:t.getValueAtIndexOrDefault(a.pointBackgroundColor,r,s.backgroundColor),i.borderColor=n.borderColor?n.borderColor:t.getValueAtIndexOrDefault(a.pointBorderColor,r,s.borderColor),i.borderWidth=n.borderWidth?n.borderWidth:t.getValueAtIndexOrDefault(a.pointBorderWidth,r,s.borderWidth)}})}},597:function(e,t,a){"use strict";e.exports=function(e){e.Bar=function(t,a){return a.type="bar",new e(t,a)}}},598:function(e,t,a){"use strict";e.exports=function(e){e.Bubble=function(t,a){return a.type="bubble",new e(t,a)}}},599:function(e,t,a){"use strict";e.exports=function(e){e.Doughnut=function(t,a){return a.type="doughnut",new e(t,a)}}},600:function(e,t,a){"use strict";e.exports=function(e){e.Line=function(t,a){return a.type="line",new e(t,a)}}},601:function(e,t,a){"use strict";e.exports=function(e){e.PolarArea=function(t,a){return a.type="polarArea",new e(t,a)}}},602:function(e,t,a){"use strict";e.exports=function(e){e.Radar=function(t,a){return a.options=e.helpers.configMerge({aspectRatio:1},a.options),a.type="radar",new e(t,a)}}},603:function(e,t,a){"use strict";e.exports=function(e){e.defaults.scatter={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}},e.controllers.scatter=e.controllers.line,e.Scatter=function(t,a){return a.type="scatter",new e(t,a)}}},604:function(e,t,a){var n=a(250);e.exports=function(e,t){return n(e,t)}},605:function(e,t,a){var n=a(355),r=a(360),i=a(639),s=a(643),o=a(661),c=a(112),l=a(362),d=a(364),u="[object Arguments]",h="[object Array]",p="[object Object]",b=Object.prototype.hasOwnProperty;e.exports=function(e,t,a,g,j,m){var f=c(e),O=c(t),v=f?h:o(e),x=O?h:o(t),y=(v=v==u?p:v)==p,S=(x=x==u?p:x)==p,D=v==x;if(D&&l(e)){if(!l(t))return!1;f=!0,y=!1}if(D&&!y)return m||(m=new n),f||d(e)?r(e,t,a,g,j,m):i(e,t,v,a,g,j,m);if(!(1&a)){var P=y&&b.call(e,"__wrapped__"),w=S&&b.call(t,"__wrapped__");if(P||w){var I=P?e.value():e,k=w?t.value():t;return m||(m=new n),j(I,k,a,g,m)}}return!!D&&(m||(m=new n),s(e,t,a,g,j,m))}},606:function(e,t){e.exports=function(){this.__data__=[],this.size=0}},607:function(e,t,a){var n=a(197),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,a=n(t,e);return!(a<0)&&(a==t.length-1?t.pop():r.call(t,a,1),--this.size,!0)}},608:function(e,t,a){var n=a(197);e.exports=function(e){var t=this.__data__,a=n(t,e);return a<0?void 0:t[a][1]}},609:function(e,t,a){var n=a(197);e.exports=function(e){return n(this.__data__,e)>-1}},610:function(e,t,a){var n=a(197);e.exports=function(e,t){var a=this.__data__,r=n(a,e);return r<0?(++this.size,a.push([e,t])):a[r][1]=t,this}},611:function(e,t,a){var n=a(196);e.exports=function(){this.__data__=new n,this.size=0}},612:function(e,t){e.exports=function(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}},613:function(e,t){e.exports=function(e){return this.__data__.get(e)}},614:function(e,t){e.exports=function(e){return this.__data__.has(e)}},615:function(e,t,a){var n=a(196),r=a(251),i=a(253);e.exports=function(e,t){var a=this.__data__;if(a instanceof n){var s=a.__data__;if(!r||s.length<199)return s.push([e,t]),this.size=++a.size,this;a=this.__data__=new i(s)}return a.set(e,t),this.size=a.size,this}},616:function(e,t,a){var n=a(357),r=a(619),i=a(252),s=a(359),o=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,d=c.toString,u=l.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||r(e))&&(n(e)?h:o).test(s(e))}},617:function(e,t,a){var n=a(198),r=Object.prototype,i=r.hasOwnProperty,s=r.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,o),a=e[o];try{e[o]=void 0;var n=!0}catch(c){}var r=s.call(e);return n&&(t?e[o]=a:delete e[o]),r}},618:function(e,t){var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},619:function(e,t,a){var n=a(620),r=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!r&&r in e}},620:function(e,t,a){var n=a(111)["__core-js_shared__"];e.exports=n},621:function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},622:function(e,t,a){var n=a(623),r=a(196),i=a(251);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||r),string:new n}}},623:function(e,t,a){var n=a(624),r=a(625),i=a(626),s=a(627),o=a(628);function c(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=s,c.prototype.set=o,e.exports=c},624:function(e,t,a){var n=a(199);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},625:function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},626:function(e,t,a){var n=a(199),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var a=t[e];return"__lodash_hash_undefined__"===a?void 0:a}return r.call(t,e)?t[e]:void 0}},627:function(e,t,a){var n=a(199),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:r.call(t,e)}},628:function(e,t,a){var n=a(199);e.exports=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},629:function(e,t,a){var n=a(200);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},630:function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},631:function(e,t,a){var n=a(200);e.exports=function(e){return n(this,e).get(e)}},632:function(e,t,a){var n=a(200);e.exports=function(e){return n(this,e).has(e)}},633:function(e,t,a){var n=a(200);e.exports=function(e,t){var a=n(this,e),r=a.size;return a.set(e,t),this.size+=a.size==r?0:1,this}},634:function(e,t,a){var n=a(253),r=a(635),i=a(636);function s(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new n;++t<a;)this.add(e[t])}s.prototype.add=s.prototype.push=r,s.prototype.has=i,e.exports=s},635:function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},636:function(e,t){e.exports=function(e){return this.__data__.has(e)}},637:function(e,t){e.exports=function(e,t){for(var a=-1,n=null==e?0:e.length;++a<n;)if(t(e[a],a,e))return!0;return!1}},638:function(e,t){e.exports=function(e,t){return e.has(t)}},639:function(e,t,a){var n=a(198),r=a(640),i=a(356),s=a(360),o=a(641),c=a(642),l=n?n.prototype:void 0,d=l?l.valueOf:void 0;e.exports=function(e,t,a,n,l,u,h){switch(a){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new r(e),new r(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=o;case"[object Set]":var b=1&n;if(p||(p=c),e.size!=t.size&&!b)return!1;var g=h.get(e);if(g)return g==t;n|=2,h.set(e,t);var j=s(p(e),p(t),n,l,u,h);return h.delete(e),j;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},640:function(e,t,a){var n=a(111).Uint8Array;e.exports=n},641:function(e,t){e.exports=function(e){var t=-1,a=Array(e.size);return e.forEach((function(e,n){a[++t]=[n,e]})),a}},642:function(e,t){e.exports=function(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=e})),a}},643:function(e,t,a){var n=a(644),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,a,i,s,o){var c=1&a,l=n(e),d=l.length;if(d!=n(t).length&&!c)return!1;for(var u=d;u--;){var h=l[u];if(!(c?h in t:r.call(t,h)))return!1}var p=o.get(e),b=o.get(t);if(p&&b)return p==t&&b==e;var g=!0;o.set(e,t),o.set(t,e);for(var j=c;++u<d;){var m=e[h=l[u]],f=t[h];if(i)var O=c?i(f,m,h,t,e,o):i(m,f,h,e,t,o);if(!(void 0===O?m===f||s(m,f,a,i,o):O)){g=!1;break}j||(j="constructor"==h)}if(g&&!j){var v=e.constructor,x=t.constructor;v==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof x&&x instanceof x||(g=!1)}return o.delete(e),o.delete(t),g}},644:function(e,t,a){var n=a(645),r=a(647),i=a(254);e.exports=function(e){return n(e,i,r)}},645:function(e,t,a){var n=a(646),r=a(112);e.exports=function(e,t,a){var i=t(e);return r(e)?i:n(i,a(e))}},646:function(e,t){e.exports=function(e,t){for(var a=-1,n=t.length,r=e.length;++a<n;)e[r+a]=t[a];return e}},647:function(e,t,a){var n=a(648),r=a(649),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(e){return null==e?[]:(e=Object(e),n(s(e),(function(t){return i.call(e,t)})))}:r;e.exports=o},648:function(e,t){e.exports=function(e,t){for(var a=-1,n=null==e?0:e.length,r=0,i=[];++a<n;){var s=e[a];t(s,a,e)&&(i[r++]=s)}return i}},649:function(e,t){e.exports=function(){return[]}},650:function(e,t,a){var n=a(651),r=a(361),i=a(112),s=a(362),o=a(363),c=a(364),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var a=i(e),d=!a&&r(e),u=!a&&!d&&s(e),h=!a&&!d&&!u&&c(e),p=a||d||u||h,b=p?n(e.length,String):[],g=b.length;for(var j in e)!t&&!l.call(e,j)||p&&("length"==j||u&&("offset"==j||"parent"==j)||h&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||o(j,g))||b.push(j);return b}},651:function(e,t){e.exports=function(e,t){for(var a=-1,n=Array(e);++a<e;)n[a]=t(a);return n}},652:function(e,t,a){var n=a(172),r=a(173);e.exports=function(e){return r(e)&&"[object Arguments]"==n(e)}},653:function(e,t){e.exports=function(){return!1}},654:function(e,t,a){var n=a(172),r=a(255),i=a(173),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&r(e.length)&&!!s[n(e)]}},655:function(e,t){e.exports=function(e){return function(t){return e(t)}}},656:function(e,t,a){(function(e){var n=a(358),r=t&&!t.nodeType&&t,i=r&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===r&&n.process,o=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=o}).call(this,a(244)(e))},657:function(e,t,a){var n=a(658),r=a(659),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return r(e);var t=[];for(var a in Object(e))i.call(e,a)&&"constructor"!=a&&t.push(a);return t}},658:function(e,t){var a=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||a)}},659:function(e,t,a){var n=a(660)(Object.keys,Object);e.exports=n},660:function(e,t){e.exports=function(e,t){return function(a){return e(t(a))}}},661:function(e,t,a){var n=a(662),r=a(251),i=a(663),s=a(664),o=a(665),c=a(172),l=a(359),d="[object Map]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",b="[object DataView]",g=l(n),j=l(r),m=l(i),f=l(s),O=l(o),v=c;(n&&v(new n(new ArrayBuffer(1)))!=b||r&&v(new r)!=d||i&&v(i.resolve())!=u||s&&v(new s)!=h||o&&v(new o)!=p)&&(v=function(e){var t=c(e),a="[object Object]"==t?e.constructor:void 0,n=a?l(a):"";if(n)switch(n){case g:return b;case j:return d;case m:return u;case f:return h;case O:return p}return t}),e.exports=v},662:function(e,t,a){var n=a(136)(a(111),"DataView");e.exports=n},663:function(e,t,a){var n=a(136)(a(111),"Promise");e.exports=n},664:function(e,t,a){var n=a(136)(a(111),"Set");e.exports=n},665:function(e,t,a){var n=a(136)(a(111),"WeakMap");e.exports=n},666:function(e,t,a){var n=a(667),r=a(669)((function(e,t,a){n(e,a,t)}));e.exports=r},667:function(e,t,a){var n=a(668);e.exports=function(e,t,a){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}},668:function(e,t,a){var n=a(136),r=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=r},669:function(e,t,a){var n=a(670),r=a(671),i=a(677),s=a(112);e.exports=function(e,t){return function(a,o){var c=s(a)?n:r,l=t?t():{};return c(a,e,i(o,2),l)}}},670:function(e,t){e.exports=function(e,t,a,n){for(var r=-1,i=null==e?0:e.length;++r<i;){var s=e[r];t(n,s,a(s),e)}return n}},671:function(e,t,a){var n=a(672);e.exports=function(e,t,a,r){return n(e,(function(e,n,i){t(r,e,a(e),i)})),r}},672:function(e,t,a){var n=a(673),r=a(676)(n);e.exports=r},673:function(e,t,a){var n=a(674),r=a(254);e.exports=function(e,t){return e&&n(e,t,r)}},674:function(e,t,a){var n=a(675)();e.exports=n},675:function(e,t){e.exports=function(e){return function(t,a,n){for(var r=-1,i=Object(t),s=n(t),o=s.length;o--;){var c=s[e?o:++r];if(!1===a(i[c],c,i))break}return t}}},676:function(e,t,a){var n=a(365);e.exports=function(e,t){return function(a,r){if(null==a)return a;if(!n(a))return e(a,r);for(var i=a.length,s=t?i:-1,o=Object(a);(t?s--:++s<i)&&!1!==r(o[s],s,o););return a}}},677:function(e,t,a){var n=a(678),r=a(681),i=a(692),s=a(112),o=a(693);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?r(e[0],e[1]):n(e):o(e)}},678:function(e,t,a){var n=a(679),r=a(680),i=a(367);e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(a){return a===e||n(a,e,t)}}},679:function(e,t,a){var n=a(355),r=a(250);e.exports=function(e,t,a,i){var s=a.length,o=s,c=!i;if(null==e)return!o;for(e=Object(e);s--;){var l=a[s];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<o;){var d=(l=a[s])[0],u=e[d],h=l[1];if(c&&l[2]){if(void 0===u&&!(d in e))return!1}else{var p=new n;if(i)var b=i(u,h,d,e,t,p);if(!(void 0===b?r(h,u,3,i,p):b))return!1}}return!0}},680:function(e,t,a){var n=a(366),r=a(254);e.exports=function(e){for(var t=r(e),a=t.length;a--;){var i=t[a],s=e[i];t[a]=[i,s,n(s)]}return t}},681:function(e,t,a){var n=a(250),r=a(682),i=a(689),s=a(256),o=a(366),c=a(367),l=a(201);e.exports=function(e,t){return s(e)&&o(t)?c(l(e),t):function(a){var s=r(a,e);return void 0===s&&s===t?i(a,e):n(t,s,3)}}},682:function(e,t,a){var n=a(368);e.exports=function(e,t,a){var r=null==e?void 0:n(e,t);return void 0===r?a:r}},683:function(e,t,a){var n=a(684),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,a,n,r){t.push(n?r.replace(i,"$1"):a||e)})),t}));e.exports=s},684:function(e,t,a){var n=a(685);e.exports=function(e){var t=n(e,(function(e){return 500===a.size&&a.clear(),e})),a=t.cache;return t}},685:function(e,t,a){var n=a(253);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var a=function a(){var n=arguments,r=t?t.apply(this,n):n[0],i=a.cache;if(i.has(r))return i.get(r);var s=e.apply(this,n);return a.cache=i.set(r,s)||i,s};return a.cache=new(r.Cache||n),a}r.Cache=n,e.exports=r},686:function(e,t,a){var n=a(687);e.exports=function(e){return null==e?"":n(e)}},687:function(e,t,a){var n=a(198),r=a(688),i=a(112),s=a(257),o=n?n.prototype:void 0,c=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return r(t,e)+"";if(s(t))return c?c.call(t):"";var a=t+"";return"0"==a&&1/t==-Infinity?"-0":a}},688:function(e,t){e.exports=function(e,t){for(var a=-1,n=null==e?0:e.length,r=Array(n);++a<n;)r[a]=t(e[a],a,e);return r}},689:function(e,t,a){var n=a(690),r=a(691);e.exports=function(e,t){return null!=e&&r(e,t,n)}},690:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},691:function(e,t,a){var n=a(369),r=a(361),i=a(112),s=a(363),o=a(255),c=a(201);e.exports=function(e,t,a){for(var l=-1,d=(t=n(t,e)).length,u=!1;++l<d;){var h=c(t[l]);if(!(u=null!=e&&a(e,h)))break;e=e[h]}return u||++l!=d?u:!!(d=null==e?0:e.length)&&o(d)&&s(h,d)&&(i(e)||r(e))}},692:function(e,t){e.exports=function(e){return e}},693:function(e,t,a){var n=a(694),r=a(695),i=a(256),s=a(201);e.exports=function(e){return i(e)?n(s(e)):r(e)}},694:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},695:function(e,t,a){var n=a(368);e.exports=function(e){return function(t){return n(t,e)}}},696:function(e,t,a){},697:function(e,t,a){},73:function(e,t,a){"use strict";var n=a(3),r=a(5),i=a(7),s=a(6),o=a(2),c=a.n(o),l=a(314),d=a(317),u=a(316),h=a(191),p=a(1),b=a(4),g=a(0),j=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMenuItemClick=function(e){var t=b.a.getEventData(e,"op");r.props.onMenuItemClick(t)},r.onDropdownToggleClick=function(e){r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():r.props.onUnfreezedItem()}))},r.state={isItemMenuShow:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.operations,n=t.translateOperations;return Object(g.jsxs)(l.a,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(g.jsx)(d.a,{tag:"i",className:"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle fa fa-ellipsis-v",title:Object(p.pb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),Object(g.jsx)(u.a,{className:"my-1 mr-2",children:a.map((function(t,a){return Object(g.jsx)(h.a,{"data-op":t,onClick:e.onMenuItemClick,children:n(t)},a)}))})]})}}]),a}(c.a.Component);t.a=j},929:function(e,t,a){}},[[1786,1,0]]]);
//# sourceMappingURL=sysAdmin.chunk.js.map