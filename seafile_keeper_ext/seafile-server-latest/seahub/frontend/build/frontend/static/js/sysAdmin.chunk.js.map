{"version":3,"sources":["../node_modules/lodash/_root.js","../node_modules/lodash/isArray.js","../node_modules/lodash/_getNative.js","../node_modules/reactstrap/es/Table.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","components/dialog/create-folder-dialog.js","pages/sys-admin/side-panel.js","pages/sys-admin/main-panel.js","pages/sys-admin/main-panel-topbar.js","pages/sys-admin/info.js","pages/sys-admin/statistic/statistic-nav.js","pages/sys-admin/statistic/picker.js","pages/sys-admin/statistic/statistic-common-tool.js","pages/sys-admin/statistic/statistic-chart.js","pages/sys-admin/statistic/statistic-file.js","pages/sys-admin/statistic/statistic-storage.js","pages/sys-admin/statistic/traffic-table.js","pages/sys-admin/statistic/traffic-table-body.js","pages/sys-admin/statistic/statistic-traffic-orgs.js","pages/sys-admin/statistic/statistic-traffic-users.js","pages/sys-admin/statistic/statistic-traffic.js","pages/sys-admin/statistic/statistic-users.js","pages/sys-admin/statistic/statistic-reports.js","pages/sys-admin/devices/devices-nav.js","pages/sys-admin/devices/devices-by-platform.js","pages/sys-admin/devices/desktop-devices.js","pages/sys-admin/devices/mobile-devices.js","pages/sys-admin/user-link.js","pages/sys-admin/devices/devices-errors.js","components/dialog/sysadmin-dialog/set-quota.js","components/dialog/sysadmin-dialog/sysadmin-import-user-dialog.js","components/select-editor/sysadmin-user-role-editor.js","components/dialog/sysadmin-dialog/sysadmin-add-user-dialog.js","components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog.js","models/sysadmin-user.js","models/sysadmin-admin-user.js","pages/sys-admin/search.js","pages/sys-admin/users/users-nav.js","components/select-editor/sysadmin-user-status-editor.js","pages/sys-admin/users/users-content.js","pages/sys-admin/users/users.js","pages/sys-admin/users/admin-users.js","pages/sys-admin/users/ldap-imported-users.js","pages/sys-admin/users/ldap-users.js","pages/sys-admin/users/search-users.js","components/dialog/sysadmin-dialog/set-upload-download-rate-limit.js","components/dialog/sysadmin-dialog/update-user.js","pages/sys-admin/users/user-nav.js","pages/sys-admin/users/user-info.js","pages/sys-admin/users/user-repos.js","pages/sys-admin/users/user-shared-repos.js","pages/sys-admin/users/user-links.js","pages/sys-admin/users/user-groups.js","components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog.js","pages/sys-admin/repos/repos-nav.js","components/dialog/sysadmin-dialog/sysadmin-share-to-user.js","components/dialog/sysadmin-dialog/sysadmin-share-to-group.js","components/dialog/sysadmin-dialog/sysadmin-share-dialog.js","components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog.js","pages/sys-admin/repos/repos.js","pages/sys-admin/repos/all-repos.js","pages/sys-admin/repos/system-repo.js","pages/sys-admin/repos/trash-repos.js","pages/sys-admin/repos/search-repos.js","models/system-admin/dirent.js","pages/sys-admin/repos/dir-path-bar.js","pages/sys-admin/repos/dir-content.js","pages/sys-admin/repos/dir-view.js","components/dialog/sysadmin-dialog/sysadmin-create-group-dialog.js","components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog.js","pages/sys-admin/groups/groups-content.js","pages/sys-admin/groups/groups.js","pages/sys-admin/groups/search-groups.js","pages/sys-admin/groups/group-nav.js","pages/sys-admin/groups/group-repos.js","components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog.js","components/select-editor/sysadmin-group-role-editor.js","pages/sys-admin/groups/group-members.js","pages/sys-admin/departments/departments.js","components/dialog/sysadmin-dialog/sysadmin-add-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog.js","pages/sys-admin/departments/group-item.js","pages/sys-admin/departments/department-list.js","components/dialog/sysadmin-dialog/sysadmin-add-member-dialog.js","components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog.js","pages/sys-admin/departments/department.js","pages/sys-admin/departments/sub-departments.js","components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog.js","pages/sys-admin/departments/member-item.js","pages/sys-admin/departments/department-members.js","components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog.js","pages/sys-admin/departments/repo-item.js","pages/sys-admin/departments/department-libraries.js","pages/sys-admin/links/links-nav.js","pages/sys-admin/links/share-links.js","pages/sys-admin/links/upload-links.js","components/dialog/sysadmin-dialog/sysadmin-add-org-dialog.js","pages/sys-admin/orgs/orgs-content.js","pages/sys-admin/orgs/orgs.js","pages/sys-admin/orgs/search-orgs.js","components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog.js","components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog.js","pages/sys-admin/orgs/org-nav.js","pages/sys-admin/orgs/org-info.js","components/select-editor/sysadmin-user-membership-editor.js","pages/sys-admin/orgs/org-users.js","pages/sys-admin/orgs/org-groups.js","pages/sys-admin/orgs/org-repos.js","components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog.js","pages/sys-admin/institutions/institutions.js","pages/sys-admin/institutions/institution-nav.js","pages/sys-admin/institutions/institution-info.js","components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog.js","pages/sys-admin/institutions/institution-users.js","pages/sys-admin/institutions/institution-admins.js","pages/sys-admin/logs-page/logs-nav.js","components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog.js","pages/sys-admin/logs-page/login-logs.js","pages/sys-admin/logs-page/file-access-item-menu.js","pages/sys-admin/logs-page/file-access-toggle-filter.js","pages/sys-admin/logs-page/file-access-logs.js","pages/sys-admin/logs-page/file-update-logs.js","pages/sys-admin/logs-page/share-permission-logs.js","pages/sys-admin/web-settings/section.js","pages/sys-admin/web-settings/setting-item-base.js","pages/sys-admin/web-settings/input-item.js","pages/sys-admin/web-settings/file-item.js","pages/sys-admin/web-settings/checkbox-item.js","pages/sys-admin/web-settings/web-settings.js","components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog.js","pages/sys-admin/notifications/notifications.js","pages/sys-admin/file-scan-records.js","pages/sys-admin/work-weixin/work-weixin-department-members-list.js","pages/sys-admin/work-weixin/work-weixin-departments-tree-node.js","pages/sys-admin/work-weixin/work-weixin-departments-tree-panel.js","components/dialog/import-work-weixin-department-dialog.js","pages/sys-admin/work-weixin-departments.js","pages/sys-admin/dingtalk/dingtalk-department-members-list.js","pages/sys-admin/dingtalk/dingtalk-departments-tree-node.js","pages/sys-admin/dingtalk/dingtalk-departments-tree-panel.js","components/dialog/import-dingtalk-department-dialog.js","pages/sys-admin/dingtalk-departments.js","pages/sys-admin/invitations/invitations.js","components/dialog/terms-editor-dialog.js","components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog.js","utils/markdown-utils.js","components/dialog/terms-preview-dialog.js","pages/sys-admin/terms-and-conditions/item.js","pages/sys-admin/terms-and-conditions/content.js","pages/sys-admin/terms-and-conditions/terms-and-conditions.js","pages/sys-admin/virus-scan/nav.js","pages/sys-admin/virus-scan/all-virus-files.js","pages/sys-admin/virus-scan/unhandled-virus-files.js","pages/sys-admin/admin-logs/logs-nav.js","pages/sys-admin/admin-logs/operation-logs.js","pages/sys-admin/admin-logs/login-logs.js","pages/sys-admin/abuse-reports.js","pages/sys-admin/index.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_toKey.js","../node_modules/lodash/_baseIsEqual.js","../node_modules/lodash/_Map.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/keys.js","../node_modules/lodash/isLength.js","../node_modules/lodash/_isKey.js","../node_modules/lodash/isSymbol.js","components/dialog/share-admin-link.js","../node_modules/deep-copy/index.js","../node_modules/color-convert/conversions.js","../node_modules/color-name/index.js","../node_modules/lodash/_Stack.js","../node_modules/lodash/eq.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_equalArrays.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/_isStrictComparable.js","../node_modules/lodash/_matchesStrictComparable.js","../node_modules/lodash/_baseGet.js","../node_modules/lodash/_castPath.js","components/dialog/commit-details.js","../node_modules/react-chartjs-2/es/index.js","components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog.js","../node_modules/chart.js/src/chart.js","../node_modules/chart.js/src/core/core.js","../node_modules/chart.js/src/core/core.helpers.js","../node_modules/chartjs-color/index.js","../node_modules/color-convert/index.js","../node_modules/color-convert/route.js","../node_modules/chartjs-color-string/color-string.js","../node_modules/chart.js/src/core/core.canvasHelpers.js","../node_modules/chart.js/src/core/core.element.js","../node_modules/chart.js/src/core/core.animation.js","../node_modules/chart.js/src/core/core.controller.js","../node_modules/chart.js/src/core/core.datasetController.js","../node_modules/chart.js/src/core/core.layoutService.js","../node_modules/chart.js/src/core/core.scaleService.js","../node_modules/chart.js/src/core/core.plugin.js","../node_modules/chart.js/src/core/core.scale.js","../node_modules/chart.js/src/core/core.title.js","../node_modules/chart.js/src/core/core.legend.js","../node_modules/chart.js/src/core/core.tooltip.js","../node_modules/chart.js/src/elements/element.arc.js","../node_modules/chart.js/src/elements/element.line.js","../node_modules/chart.js/src/elements/element.point.js","../node_modules/chart.js/src/elements/element.rectangle.js","../node_modules/chart.js/src/scales/scale.linearbase.js","../node_modules/chart.js/src/scales/scale.category.js","../node_modules/chart.js/src/scales/scale.linear.js","../node_modules/chart.js/src/scales/scale.logarithmic.js","../node_modules/chart.js/src/scales/scale.radialLinear.js","../node_modules/chart.js/src/scales/scale.time.js","../node_modules/chart.js/src/controllers/controller.bar.js","../node_modules/chart.js/src/controllers/controller.bubble.js","../node_modules/chart.js/src/controllers/controller.doughnut.js","../node_modules/chart.js/src/controllers/controller.line.js","../node_modules/chart.js/src/controllers/controller.polarArea.js","../node_modules/chart.js/src/controllers/controller.radar.js","../node_modules/chart.js/src/charts/Chart.Bar.js","../node_modules/chart.js/src/charts/Chart.Bubble.js","../node_modules/chart.js/src/charts/Chart.Doughnut.js","../node_modules/chart.js/src/charts/Chart.Line.js","../node_modules/chart.js/src/charts/Chart.PolarArea.js","../node_modules/chart.js/src/charts/Chart.Radar.js","../node_modules/chart.js/src/charts/Chart.Scatter.js","../node_modules/lodash/isEqual.js","../node_modules/lodash/_baseIsEqualDeep.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_stackClear.js","../node_modules/lodash/_stackDelete.js","../node_modules/lodash/_stackGet.js","../node_modules/lodash/_stackHas.js","../node_modules/lodash/_stackSet.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_arraySome.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_equalByTag.js","../node_modules/lodash/_Uint8Array.js","../node_modules/lodash/_mapToArray.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_equalObjects.js","../node_modules/lodash/_getAllKeys.js","../node_modules/lodash/_baseGetAllKeys.js","../node_modules/lodash/_arrayPush.js","../node_modules/lodash/_getSymbols.js","../node_modules/lodash/_arrayFilter.js","../node_modules/lodash/stubArray.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/_baseKeys.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_nativeKeys.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_getTag.js","../node_modules/lodash/_DataView.js","../node_modules/lodash/_Promise.js","../node_modules/lodash/_Set.js","../node_modules/lodash/_WeakMap.js","../node_modules/lodash/keyBy.js","../node_modules/lodash/_baseAssignValue.js","../node_modules/lodash/_defineProperty.js","../node_modules/lodash/_createAggregator.js","../node_modules/lodash/_arrayAggregator.js","../node_modules/lodash/_baseAggregator.js","../node_modules/lodash/_baseEach.js","../node_modules/lodash/_baseForOwn.js","../node_modules/lodash/_baseFor.js","../node_modules/lodash/_createBaseFor.js","../node_modules/lodash/_createBaseEach.js","../node_modules/lodash/_baseIteratee.js","../node_modules/lodash/_baseMatches.js","../node_modules/lodash/_baseIsMatch.js","../node_modules/lodash/_getMatchData.js","../node_modules/lodash/_baseMatchesProperty.js","../node_modules/lodash/get.js","../node_modules/lodash/_stringToPath.js","../node_modules/lodash/_memoizeCapped.js","../node_modules/lodash/memoize.js","../node_modules/lodash/toString.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/hasIn.js","../node_modules/lodash/_baseHasIn.js","../node_modules/lodash/_hasPath.js","../node_modules/lodash/identity.js","../node_modules/lodash/property.js","../node_modules/lodash/_baseProperty.js","../node_modules/lodash/_basePropertyDeep.js","components/dialog/op-menu.js"],"names":["freeGlobal","require","freeSelf","self","Object","root","Function","module","exports","isArray","Array","baseIsNative","getValue","object","key","value","undefined","propTypes","className","PropTypes","string","cssModule","size","bordered","bool","borderless","striped","dark","hover","responsive","oneOfType","tag","tagPropType","responsiveTag","innerRef","func","Table","props","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","table","React","createElement","_extends","ref","responsiveClassName","defaultProps","Symbol","getRawTag","objectToString","symToStringTag","toStringTag","CreateForder","handleChange","e","target","trim","setState","isSubmitBtnActive","childName","handleSubmit","state","newName","checkDuplicatedName","errMessage","gettext","replace","Utils","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","preventDefault","toggle","addFolderCancel","this","length","isOpen","autoFocus","for","id","onKeyPress","onChange","color","onClick","disabled","Component","SidePanel","getActiveClass","tab","currentTab","isSidePanelClosed","onCloseSidePanel","canViewSystemInfo","to","siteRoot","tabItemClick","isPro","canViewStatistic","otherPermission","constanceEnabled","canConfigSystem","canManageLibrary","canManageUser","canManageGroup","multiTenancy","multiInstitution","sysadminExtraEnabled","canViewUserLog","enableFileScan","enableGuestInvitation","enableTermsAndConditions","canViewAdminLog","enableWorkWeixin","enableDingtalk","enableShareLinkReportAbuse","MainPanel","children","MainPanelTopbar","title","toggleSidePanel","search","isAdminPanel","Info","uploadLicenseFile","fileInput","current","files","file","seafileAPI","sysAdminUploadLicense","then","res","info","sysInfo","assign","data","with_license","catch","error","errMsg","getErrorMsg","toaster","danger","openFileInput","click","renderLicenseDescString","license_mode","license_to","license_expiration","window","app","config","lang","loading","errorMsg","createRef","sysAdminGetSysInfo","org_count","repos_count","total_files_count","total_storage","total_devices_count","current_connected_devices_count","license_maxusers","multi_tenancy_enabled","active_users_count","users_count","groups_count","isDefaultAdmin","Button","type","href","bytesToSize","Nav","navItems","name","urlPart","text","currentItem","map","item","index","propsTypes","disabledDate","isRequired","FORMAT","Picker","defaultCalendarValue","moment","locale","clone","calendar","defaultValue","format","translateCalendar","placeholder","tabIndex","readOnly","StatisticCommonTool","changeActive","statisticTypeName","statisticType","startTime","endTime","subtract","getActiviesFiles","disabledStartDate","startValue","today","endValue","isBefore","disabledEndDate","field","onSubmit","bind","StatisticChart","titleCallback","tooltipItem","datasets","datasetIndex","label","yLabel","ticksCallback","values","opations","labels","filesData","isTitleCallback","isTicksCallback","suggestedMaxNumbers","isLegendStatus","chartTitle","_this","options","display","fontSize","elements","line","fill","tension","borderWidth","legend","usePointStyle","tooltips","callbacks","layout","padding","right","scales","yAxes","ticks","beginAtZero","suggestedMax","callback","xAxes","maxTicksLimit","nextProps","StatisticFile","groupBy","sysAdminStatisticFiles","added","deleted","visited","modified","forEach","push","datetime","addedData","borderColor","backgroundColor","visitedData","modifiedData","deletedData","isLoading","err","StatisticStorage","sysAdminStatisticStorages","totalStorage","TrafficTable","sortBy","sortIcon","sortOrder","width","sortItems","TrafficTableBody","trafficName","userTrafficItem","email","org_name","syncUploadSize","sync_file_upload","syncDownloadSize","sync_file_download","webUploadSize","web_file_upload","webDownloadSize","web_file_download","linkUploadSize","link_file_upload","linkDownloadSize","link_file_download","OrgsTraffic","getPreviousPage","getTrafficList","month","currentPage","getNextPage","test","errorMessage","initPage","blur","page","perPage","orderBy","sysAdminListOrgTraffic","orgTrafficList","org_monthly_traffic_list","slice","hasNextPage","has_next_page","resetPerPage","newPerPage","initMonth","urlParams","URL","location","searchParams","parseInt","get","Input","gotoPreviousPage","gotoNextPage","curPerPage","UsersTraffic","sysAdminListUserTraffic","userTrafficList","user_monthly_traffic_list","StatisticTraffic","changeTabActive","activeName","tabActive","sysAdminStatisticTraffic","total_upload","total_download","link_upload","link_download","sync_upload","sync_download","web_upload","web_download","linkData","syncData","webData","renderCommonTool","StatisticUsers","sysAdminStatisticActiveUsers","count","userCount","StatisticReports","onGenerateReports","url","Content","getPreviousPageDevicesList","getDevicesListByPage","pageInfo","current_page","getNextPageDevicesList","items","emptyTip","Item","handleMouseOver","isOpIconShown","handleMouseOut","handleUnlink","is_desktop_client","toggleUnlinkDeviceDialog","unlinkDevice","isUnlinkDeviceDialogOpen","deleteFiles","platform","device_id","user","sysAdminUnlinkDevice","unlinked","message","success","onMouseEnter","onMouseLeave","user_name","client_version","device_name","last_login_ip","last_accessed","fromNow","toggleDialog","DevicesByPlatform","devicesPlatform","per_page","sysAdminListDevices","devicesData","devices","page_info","DesktopDevices","MobileDevices","UserLink","encodeURIComponent","getPreviousPageDeviceErrorsList","getDeviceErrorsListByPage","getNextPageDeviceErrorsList","device_ip","repo_id","repo_name","error_msg","error_time","DeviceErrors","sysAdminListDeviceErrors","devicesErrors","device_errors","isCleanBtnShown","clean","sysAdminClearDeviceErrors","SetQuotaDialog","handleQuotaChange","quota","updateQuota","Modal","ModalHeader","ModalBody","Form","FormGroup","InputGroup","InputGroupAddon","addonType","InputGroupText","ModalFooter","SysAdminImportUserDialog","fileInputRef","uploadFile","fileName","substr","lastIndexOf","importUserInBatch","Alert","SysAdminUserRoleEditor","translateRoles","role","isTextMode","isEditIconShow","roleOptions","currentOption","currentRole","onOptionChanged","onRoleChanged","translateOption","SysAdminAddUserDialog","checkSubmitBtnActive","password","passwordAgain","btnActive","togglePasswordVisible","isPasswordVisible","inputPassword","passwd","inputPasswordAgain","generatePassword","val","inputEmail","inputName","updateRole","showRole","addUser","dialogTitle","autoComplete","Label","availableRoles","SysAdminBatchAddAdminDialog","handleSelectChange","addAdminInBatch","isMulti","onSelectChange","SysAdminUser","contact_email","login_id","last_login","last_access_time","create_time","is_active","is_staff","reference_id","department","quota_total","quota_usage","institution","org_id","isSelected","SysAdminAdminUser","admin_role","Search","handleInputChange","submit","style","haveLDAP","SysAdminUserStatusEditor","translateStatus","status","statusOptions","currentStatus","onStatusChanged","sysadmin","pageOptions","availableAdminRoles","institutions","onFreezedItem","isItemFreezed","onUnfreezedItem","getListByPage","sortByQuotaUsage","isAdmin","isAllUsersSelected","columns","spaceText","spaceEl","colSpaceText","colNameText","colCreatedText","toggleSelectAllUsers","checked","updateUser","deleteUser","updateAdminRole","revokeAdmin","onUserSelected","isLDAPImported","isSearchResult","handleMouseEnter","highlight","handleMouseLeave","isOpIconShow","toggleSetQuotaDialog","isSetQuotaDialogOpen","toggleDeleteUserDialog","isDeleteUserDialogOpen","toggleResetUserPasswordDialog","isResetUserPasswordDialogOpen","toggleRevokeAdminDialog","isRevokeAdminDialogOpen","updateStatus","isActive","notify","translateAdminRole","updateInstitution","translateInstitution","inst","resetPassword","sysAdminResetUserPassword","reset_tip","getMenuOperations","list","source","translateOperations","translateResult","onMenuItemClick","operation","itemName","deleteDialogMsg","resetPasswordDialogMsg","revokeAdminDialogMsg","username","operations","executeOperation","confirmBtnText","Users","toggleImportUserDialog","isImportUserDialogOpen","toggleAddUserDialog","isAddUserDialogOpen","toggleBatchSetQuotaDialog","isBatchSetQuotaDialogOpen","toggleBatchDeleteUserDialog","isBatchDeleteUserDialogOpen","hasUserSelected","selectedUserList","users","userList","filter","thisuser","getUserList","sysAdminListAdmins","admin_user_list","getUsersListByPage","sysAdminListUsers","total_count","URLSearchParams","set","toString","navigate","sysAdminDeleteUser","newUserList","setUserQuotaInBatch","quotaTotal","emails","sysAdminSetUserQuotaInBatch","resultUser","deleteUserInBatch","sysAdminDeleteUserInBatch","oldUser","some","deletedUser","msg","failed","sysAdminImportUserViaFile","concat","sysAdminAddUser","unshift","add_user_tip","sysAdminUpdateUser","update_status_tip","sysAdminUpdateAdminRole","getOperationsForAll","toggleBatchAddAdminDialog","getCurrentNavItem","isBatchAddAdminDialogOpen","sysAdminAddAdminInBatch","getSearch","searchItems","keyword","AdminUsers","LDAPImportedUsers","sysAdminListLDAPUsers","ldap_user_list","SearchUsers","getItems","sysAdminSearchUsers","query","user_list","getPreviousPageList","getNextPageList","handleKeyDown","keyCode","params","document","row","Col","sm","onKeyDown","SysAdminSetUploadDownloadRateLimitDialog","handleRateLimitChange","rateLimit","updateUploadDownloadRateLimit","uploadOrDownload","UpdateUser","updateValue","userName","twoFactorAuthEnabled","toggleSetUserUploadRateLimitDialog","isSetUserUploadRateLimitDialogOpen","toggleSetUserDownloadRateLimitDialog","isSetUserDownloadRateLimitDialogOpen","currentKey","isUpdateUserDialogOpen","toggleSetNameDialog","toggleSetUserLoginIDDialog","toggleSetUserComtactEmailDialog","toggleSetUserReferenceIDDialog","toggleUpdateUserDialog","showEditIcon","action","userInfo","src","avatar_url","alt","upload_rate_limit","download_rate_limit","has_default_device","disable2FA","check","is_force_2fa","toggleForce2fa","User","sysAdminDeleteTwoFactorAuth","sysAdminSetForceTwoFactorAuth","decodeURIComponent","sysAdminGetUser","enableSysAdminViewRepo","deleteRepo","transferRepo","toggleDeleteDialog","isDeleteDialogOpen","toggleTransferDialog","isTransferDialogOpen","owner","renderRepoName","repo","encrypted","iconUrl","getLibIconUrl","iconTitle","getLibIconTitle","last_modified","canTransferToDept","Repos","repoID","sysAdminDeleteRepo","newRepoList","repoList","sysAdminTransferRepo","sysAdminListReposByOwner","repos","getOwnerLink","link","owner_email","indexOf","owner_name","groupID","substring","last_modify","sysAdminListShareInRepos","repo_list","deleteItem","toggleLinkDialog","isLinkDialogOpen","getRoleText","roleText","getIconUrl","is_dir","getFolderIconUrl","getFileIconUrl","obj_name","view_cnt","Links","token","sysAdminDeleteShareLink","shareLinkItems","sysAdminDeleteUploadLink","uploadLinkItems","sysAdminListShareLinksByUser","share_link_list","sort","a","b","sysAdminListUploadLinksByUser","upload_link_list","parent_group_id","created_at","Groups","sysAdminListGroupsJoinedByUser","group_list","SysAdminCreateRepoDialog","handleRepoNameChange","repoName","ownerEmail","createRepo","option","UserItem","isOperationShow","deleteShareItem","user_email","onChangeUserPermission","permission","currentPermission","getSharedPermission","permissions","onPermissionChanged","UserList","SysAdminShareToUser","selectedOption","setPermission","shareToUser","i","sysAdminAddRepoSharedItem","newItems","sharedItems","refs","userSelect","clearSelect","response","useremail","sysAdminDeleteRepoSharedItem","userEmail","sysAdminUpdateRepoSharedItemPermission","updateSharedItems","sharedItem","sharedItemUsername","is_admin","sysAdminListRepoSharedItems","colSpan","GroupItem","group_id","group_name","GroupList","NoOptionsMessage","innerProps","margin","textAlign","SysAdminShareToGroup","loadOptions","shareableGroups","obj","listSharedGroups","shareToGroup","groups","sharedItemGroupID","maxMenuHeight","inputId","components","SysAdminShareDialog","getInitialActiveTab","activeTab","renderDirContent","enableDirPrivateShare","isGroupOwnedRepo","pills","NavItem","NavLink","TabContent","TabPane","tabId","itemType","itemPath","isRepoOwner","maxWidth","SysAdminLibHistorySettingDialog","days","keepDays","autoHistory","expireDays","sysAdminUpdateRepoHistorySetting","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","sysAdminGetRepoHistorySetting","sortByFileCount","sortBySize","initialSortIcon","onDeleteRepo","onTransferRepo","isRepoDeleted","toggleShareDialog","toggleHistorySettingDialog","isShareDialogOpen","isHistorySettingDialogOpen","getOperations","departmentID","file_count","repoEncrypted","userPerm","AllRepos","toggleCreateRepoDialog","isCreateRepoDialogOpen","getReposByPage","sysAdminListAllRepos","Owner","sysAdminCreateRepo","targetRepo","searchRepos","repoNameOrID","description","SystemRepo","sysAdminGetSystemRepoInfo","trashReposExpireDays","onRestoreRepo","sysAdminDeleteTrashRepo","sysAdminRestoreTrashRepo","toggleDeleteRepoDialog","isDeleteRepoDialogOpen","toggleRestoreRepoDialog","isRestoreRepoDialogOpen","delete_time","TrashRepos","toggleCleanTrashDialog","isCleanTrashDialogOpen","sysAdminListTrashRepos","cleanTrash","sysAdminCleanTrashRepos","sysAdminSearchTrashRepos","SearchRepos","getRepos","sysAdminSearchRepos","handleNameInputChange","offset","Dirent","mtime","last_update","file_size","is_file","DirPath","onPathClick","getEventData","turnPathToLink","pathList","split","nodePath","isSystemRepo","currentPath","pathElem","DirentItem","openFolder","dirent","deleteDirent","downloadDirent","fromSystemRepo","getDirentIcon","DirContent","direntList","DirView","loadDirentList","toggleNewFolderDialog","isNewFolderDialogOpen","createNewFolder","folderName","getFileName","sysAdminCreateSysRepoFolder","new_dirent","direntPath","joinPath","sysAdminListRepoDirents","is_system_library","dirent_list","encodePath","history","replaceState","sysAdminDeleteRepoDirent","sysAdminGetRepoFileDownloadURL","download_url","onFileInputChange","sydAdminGetSysRepoItemUploadURL","formData","FormData","append","axios","post","upload_link","fileObj","newDirent","Date","getTime","dirs","splice","SysAdminCreateGroupDialog","groupName","createGroup","SysAdminTransferGroupDialog","submitBtnDisabled","receiver","transferGroup","dangerouslySetInnerHTML","__html","deleteGroup","groupUrl","toggleCreateGroupDialog","isCreateGroupDialogOpen","getGroupListByPage","sysAdminListAllGroups","groupList","OnwerEmail","sysAdminCreateNewGroup","newGroupList","sysAdminDismissGroupByID","receiverEmail","sysAdminTransferGroup","searchGroups","SearchGroups","getGroups","sysAdminSearchGroups","unshareRepo","toggleUnshareRepoDialog","isUnshareRepoDialogOpen","dialogMsg","shared_by","shared_by_name","GroupRepos","sysAdminUnshareRepoFromGroup","sysAdminListGroupRepos","libraries","SysAdminGroupAddMemberDialog","selectedOptions","isSubmitBtnDisabled","addMembers","SysAdminGroupRoleEditor","removeMember","updateMemberRole","GroupMembers","sysAdminListGroupMembers","memberList","members","toggleAddMemgerDialog","isAddMemberDialogOpen","sysAdminAddGroupMember","newMemberList","duration","sysAdminDeleteGroupMember","sysAdminUpdateGroupMemberRole","Departments","AddDepartDialog","validateName","parentGroup","parentGroupID","sysAdminAddNewDepartment","departName","onAddNewDepartment","header","RenameDepartmentDialog","sysAdminRenameDepartment","departmentName","onDepartmentNameChanged","onAfterModelOpened","newInput","focus","select","onOpened","DeleteDepartmentDialog","deleteDepart","group","sysAdminDeleteDepartment","onDeleteDepartment","tipMessage","SetGroupQuotaDialog","setGroupQuota","newQuota","sysAdminUpdateDepartmentQuota","onSetQuota","toggleRenameDialog","isRenameDialogOpen","newHref","onSetDepartmentQuota","DepartmentList","listDepartments","sysAdminListAllDepartments","toggleAddDepartDialog","isShowAddDepartDialog","dept","newDepartment","topbarChildren","AddMemberDialog","orgSelect","onAddNewMembers","AddRepoDialog","sysAdminAddRepoInDepartment","onAddNewRepo","Department","getDepartmentInfo","sysAdminGetDepartmentInfo","ancestorGroups","ancestor_groups","toggleRenameDepartmentDialog","isShowRenameDepartmentDialog","toggleAddRepoDialog","isShowAddRepoDialog","toggleAddMemberDialog","isShowAddMemberDialog","toggleAddDepartmentDialog","isShowAddDepartmentDialog","topBtn","ancestor","SubDepartments","listSubDepartments","onSubDepartmentNameChanged","DeleteMemberDialog","deleteMember","member","onMemberChanged","MemberItem","toggleMemberRoleMenu","showRoleMenu","onChangeUserRole","roles","toggleItemFreezed","showDeleteMemberDialog","DepartmentMembers","listMembers","currentPageInfo","membersErrorMsg","toggleCancel","isFreezed","deletedMember","newMembers","DeleteRepoDialog","sysAdminDeleteRepoInDepartment","onRepoChanged","RepoItem","showDeleteRepoDialog","DepartmentDetail","listGroupRepo","deletedRepo","newRepo","getShareLinksByPage","sortByTime","sortByCount","deleteShareLink","renderExpiration","expire_date","expire_time","is_expired","deleteIcon","onMouseOver","onMouseOut","creator_email","creator_name","ctime","ShareLinks","sysAdminListShareLinks","shareLinkList","linkToken","newShareLinkList","getUploadLinksByPage","deleteUploadLink","UploadLinks","sysAdminListAllUploadLinks","uploadLinkList","newUploadLinkList","SysAdminAddOrgDialog","orgName","addOrg","deleteOrg","sysAdminGetOrg","repoCount","Orgs","getItemsByPage","sysAdminListOrgs","orgList","organizations","toggleAddOrgDialog","isAddOrgDialogOpen","orgID","orgInfo","sysAdminUpdateOrg","newOrgList","org","sysAdminAddOrg","sysAdminDeleteOrg","SearchOrgs","sysAdminSearchOrgs","organization_list","SysAdminSetOrgNameDialog","updateName","SysAdminSetOrgMaxUserNumberDialog","isSetNameDialogOpen","toggleSetMaxUserNumberDialog","isSetMaxUserNumberDialogOpen","max_user_number","updateMaxUserNumber","OrgInfo","newOrgInfo","newValue","maxUserNumber","SysAdminUserMembershipEditor","updateMembership","toggleResetPasswordDialog","isResetPasswordDialogOpen","statusValue","membershipValue","active","is_org_staff","OrgUsers","newUserInfo","sysAdminAddOrgUser","sysAdminDeleteOrgUser","sysAdminUpdateOrgUser","isOrgStaff","sysAdminListOrgUsers","OrgGroups","sysAdminListOrgGroups","OrgRepos","sysAdminListOrgRepos","SysAdminAddInstitutionDialog","addInstitution","getInstitutionsByPage","deleteInstitution","institutionName","Institutions","sysAdminListInstitutions","institutionList","institution_list","toggleAddInstitutionDialog","isAddInstitutionDialogOpen","sysAdminAddInstitution","institutionID","sysAdminDeleteInstitution","institutionInfo","user_count","quota_used","InstitutionInfo","sysAdminUpdateInstitution","newInstitutionInfo","sysAdminGetInstitution","getInstitutionUsersByPage","setAdmin","toggleSetAdminDialog","isSetAdminDialogOpen","is_institution_admin","InstitutionUsers","sysAdminListInstitutionUsers","sysAdminUpdateInstitutionUser","sysAdminAddInstitutionUserBatch","successArray","failedArray","sysAdminDeleteInstitutionUser","InstitutionAdmins","sysAdminListInstitutionAdmins","LogsExportExcelDialog","downloadExcel","isValidDateStr","startDateStr","endDateStr","logType","isValid","handleStartChange","handleEndChange","getLogsByPage","login_ip","log_success","login_time","LoginLogs","toggleExportExcelDialog","isExportExcelDialogOpen","sysAdminListLoginLogs","logList","login_log_list","FilterMenu","toggleMenu","isMenuShown","toggleFreezeItem","onItemClick","filterItems","filterBy","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","ToggleFilter","toggleFilter","toggleFilterByUser","filterByUser","toggleFilterByRepo","filterByRepo","freezed","userFilteredBy","repoFilteredBy","isHighlighted","event_type","ip","device","time","file_or_dir_name","FileAccessLogs","sysAdminListFileAccessLogs","file_access_log_list","updateURL","delete","toggleCommitDetailsDialog","isCommitDetailsDialogOpen","showCommitDetails","file_operation","repo_encrypted","commitID","commit_id","commitTime","FileUpdateLogs","sysAdminListFileUpdateLogs","file_update_log_list","getActionTextByEType","etype","getShareTo","share_type","to_user_email","to_user_name","to_group_id","to_group_name","from_user_email","from_user_name","sharePerms","folder","date","SharePermissionLogs","sysAdminListSharePermissionLogs","share_permission_log_list","Section","headingText","SettingItemBase","helpTip","displayName","mainContent","extraContent","Row","md","WebSettingInput","toggleBtns","isBtnsShown","hideBtns","onInputChange","saveSetting","keyText","inputType","onFocus","onBlur","onMouseDown","WebSettingFile","postFile","filePath","fileWidth","fileHeight","height","WebSettingCheckbox","valueToNum","inputChecked","WebSettings","sysAdminSetSysSettingInfo","config_dict","fileType","sysAdminUpdateLogo","sysAdminUpdateFavicon","sysAdminUpdateLoginBG","logoPath","logo_path","faviconPath","favicon_path","loginBGPath","login_bg_image_path","mediaUrl","sysAdminGetSysSettingInfo","SysAdminAddSysNotificationDialog","addNotification","deleteNotification","setToCurrent","is_current","Notifications","toggleAddNotificationDialog","isAddNotificationDialogOpen","sysAdminAddSysNotification","notificationList","notification","sysAdminDeleteSysNotification","sysAdminSetSysNotificationToCurrent","sysAdminListAllSysNotifications","notifications","records","record","detail","suggestion","FileScanRecords","listFileScanRecords","record_list","Fragment","WorkWeixinDepartmentMembersList","newUsersTempObj","checkedDepartmentId","isMembersListLoading","canCheckUserIds","membersList","avatar","onUserChecked","userid","mobile","isCheckedAll","onAllUsersChecked","WorkWeixinDepartmentsTreeNode","toggleChildren","stopPropagation","isChildrenShow","dropdownToggle","dropdownOpen","importDepartmentDialogToggle","depart","renderTreeNodes","departmentsTree","onChangeDepartment","changeDept","toggleClass","nodeInnerClass","direction","opacity","WorkWeixinDepartmentsTreePanel","isTreeLoading","ImportWorkWeixinDepartmentDialog","onImportDepartmentSubmit","departmentsCount","membersCount","WorkWeixinDepartments","getDepartmentsTree","childIds","parentIds","parentid","intersection","v","rootIds","cloneData","deepCopy","father","branchArr","child","getWorkWeixinDepartmentsList","adminListWorkWeixinDepartments","importDepartmentChildrenCount","importDepartmentMembersCount","membersTempObj","handleError","getWorkWeixinDepartmentMembersList","department_id","adminListWorkWeixinDepartmentMembers","fetch_child","userlist","getCanCheckUserIds","userIds","keys","newUsersTempList","JSON","stringify","adminAddWorkWeixinUsersBatch","handleSubmitSuccess","fails","j","departmentId","k","importDepartment","isImportDepartmentDialogShow","adminImportWorkWeixinDepartment","handleImportDepartmentSubmitSuccess","handleImportDepartmentSubmitFailed","successes","len","successMsg","department_name","api_user_name","fail","failName","canImportDepartment","DingtalkDepartmentMembersList","DingtalkDepartmentsTreeNode","DingtalkDepartmentsTreePanel","ImportDingtalkDepartmentDialog","DingtalkDepartments","getDingtalkDepartmentsList","adminListDingtalkDepartments","getDingtalkDepartmentMembersList","adminListDingtalkDepartmentMembers","adminAddDingtalkUsersBatch","adminImportDingtalkDepartment","getInviteTypeText","invite_type","inviter_email","inviter_name","accept_time","accepter_email","accepter_name","invite_time","Invitations","sysAdminListInvitations","invitation_list","targetItem","sysAdminDeleteInvitation","deleteItemInBatch","sysAdminDeleteExpiredInvitations","prevItems","totalItemCount","TermsEditorDialog","event","isContentChanged","currentContent","getCurrentContent","onCommit","onCloseEditorDialog","simpleEditor","hasContentChange","getMarkdown","setSimpleEditorRef","editor","content","wrapClassName","contentClassName","onRef","AddOrUpdateTermDialog","handleNameChange","handleVersionNumberChange","versionNumber","handleTextChange","setActive","setInActive","addTerm","isNaN","isUpdate","updateTerm","onContentClick","isConditionsEditorDialogShow","onUpdateContent","oldTermObj","version_number","activate_time","hrefReg","imageReg1","imageReg2","linkReg1","linkReg2","getPreviewContent","markdownContent","previewText","newMarkdownContent","hrefs","match","hrefObj","links","images","imageSrcs","imageSrcs1","getLinks","TermsPreviewDialog","onClosePreviewDialog","toggleUpdateDialog","isUpdateDialogOpen","toggleTermsContentDialog","isTermsPerviewDialogOpen","deleteTerm","itemContent","mdFile","processor","process","result","innerHtml","String","previewContent","TermsAndConditions","toggleAddTermDialog","isAddTermDialogOpen","sysAdminAddTermAndCondition","reload","termID","sysAdminUpdateTermAndCondition","termList","sysAdminDeleteTermAndCondition","sysAdminListTermsAndConditions","term_and_condition_list","VirusFileItem","handleFile","virusFile","virus_id","fileStatus","fileOpList","has_deleted","has_ignored","repo_owner","file_path","virusFiles","AllVirusFiles","listVirusFiles","virus_file_list","virusID","op","request","deleteVirusFile","toggleIgnoreVirusFile","virus_file","toggleItemSelected","isAllItemsSelected","toggleAllSelected","UnhandledVirusFiles","prevState","handleSelectedItems","virusIDs","batchProcessVirusFiles","fileList","find","deleteSelectedItems","ignoreSelectedItems","selectedItems","LogsNav","getOperationText","operationType","getOperationDetail","ownerPageUrl","userPageUrl","detailText","repoPageUrl","groupPageUrl","from","AdminOperationLogs","sysAdminListAdminLogs","login_success","AdminLoginLogs","sysAdminListAdminLoginLogs","AbuseReports","listAbuseReports","sysAdminListAbuseReports","abuseReportList","abuse_report_list","updateAbuseReport","handled","abuseReportId","sysAdminUpdateAbuseReport","AbuseReportList","isDesktop","fileUrl","reporter","abuse_type","SysAdmin","getCurrentTabForPageList","pageList","urlPartList","urlBase","jlen","param","tmpTab","commonProps","zIndex","ReactDom","render","getElementById","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","clear","entry","prototype","has","eq","array","nativeCreate","getNative","isKeyable","__data__","isSymbol","baseIsEqualDeep","isObjectLike","baseIsEqual","other","bitmask","customizer","stack","Map","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","arrayLikeKeys","baseKeys","isArrayLike","reIsDeepProp","reIsPlainProp","baseGetTag","ShareAdminLink","copyToClipboard","copy","walk","add","factory","cssKeywords","reverseKeywords","hasOwnProperty","convert","rgb","channels","hsl","hsv","hwb","cmyk","xyz","lab","lch","hex","ansi16","ansi256","hcg","apple","gray","model","Error","defineProperty","h","l","r","g","min","Math","max","delta","rdif","gdif","bdif","s","diff","diffc","c","reversed","currentClosestKeyword","x","y","currentClosestDistance","Infinity","distance","pow","z","t1","t2","t3","smin","lmin","hi","floor","f","p","q","t","sl","vmin","n","wh","bl","ratio","m","y2","x2","z2","atan2","PI","sqrt","hr","cos","sin","args","arguments","round","ansi","mult","rem","toUpperCase","colorString","char","join","integer","hue","chroma","mg","pure","w","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","isObject","global","funcToString","call","SetCache","arraySome","cacheHas","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","baseIsArguments","objectProto","propertyIsEnumerable","isArguments","stubFalse","freeExports","nodeType","freeModule","Buffer","isBuffer","reIsUint","baseIsTypedArray","baseUnary","nodeUtil","nodeIsTypedArray","isTypedArray","isFunction","isLength","srcValue","castPath","toKey","isKey","stringToPath","CommitDetails","getCommitDetails","commitDetails","centered","renderDetails","detailsData","showDesc","cmt_desc","enumerable","_chart","defaults","Scatter","Bubble","Polar","Radar","HorizontalBar","Bar","Line","Pie","Doughnut","_react","_interopRequireDefault","_propTypes","_isEqual","_keyBy","__esModule","default","apply","_typeof","iterator","constructor","_objectWithoutProperties","excluded","sourceKeys","getOwnPropertySymbols","sourceSymbolKeys","ownKeys","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","getPrototypeOf","NODE_ENV","ChartComponent","_React$Component","_super","chartInstance","_this$props","getDatasetAtEvent","getElementAtEvent","getElementsAtEvent","onElementsClick","element","renderChart","redraw","destroyChart","updateChart","_this$props2","plugins","nextData","transformDataProp","shadowDataProp","saveCurrentDatasets","isDev","usingCustomKeyProvider","datasetKeyProvider","getLabelAsKey","multipleDatasets","shouldWarn","dataset","console","_this2","getCurrentDatasets","d","_this3","memoizeDataProps","helpers","configMerge","currentDatasets","nextDatasets","checkDatasets","currentDatasetsIndexed","next","point","pid","otherProps","rest","update","_this$props3","node","destroy","_this$props4","handleOnClick","number","arrayOf","propName","componentName","controllers","position","_default","_React$Component2","_super2","_this4","_ref","_React$Component3","_super3","_this5","_ref2","_React$Component4","_super4","_this6","_ref3","_React$Component5","_super5","_this7","_ref4","_React$Component6","_super6","_this8","_ref5","_React$Component7","_super7","_this9","_ref6","_React$Component8","_super8","_this10","_ref7","_React$Component9","_super9","_this11","_ref8","_React$Component10","_super10","_this12","_ref9","SysAdminUnlinkDevice","htmlFor","Chart","context","me","getContext","ctx","canvas","getStyle","getMaximumWidth","getMaximumHeight","aspectRatio","isFinite","originalCanvasStyleWidth","originalCanvasStyleHeight","retinaScale","controller","Controller","addResizeListener","parentNode","resize","responsiveAnimationDuration","maintainAspectRatio","events","onHover","mode","animationDuration","defaultColor","defaultFontColor","defaultFontFamily","defaultFontSize","defaultFontStyle","showLines","legendCallback","chart","each","loopable","reverse","objClone","extend","base","setFn","ilen","_base","extension","scaleMerge","scaleService","getScaleDefaults","baseArray","valueObj","axisType","getValueOrDefault","axisDefaults","getValueAtIndexOrDefault","where","collection","filterCallback","filtered","findIndex","scope","findNextWhere","arrayToSearch","startIndex","findPreviousWhere","inherits","extensions","ChartElement","Surrogate","__super__","noop","uid","isNumber","parseFloat","almostEquals","epsilon","abs","reduce","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","sign","log10","log","LN10","toRadians","degrees","toDegrees","radians","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","angle","aliasPixel","pixelWidth","splineCurve","firstPoint","middlePoint","afterPoint","previous","skip","d01","d12","s01","s12","fa","fb","EPSILON","splineCurveMonotone","points","pointBefore","pointCurrent","pointAfter","alphaK","betaK","tauK","squaredMagnitude","deltaX","pointsWithTangents","_model","deltaK","mK","pointsLen","controlPointPreviousX","controlPointPreviousY","controlPointNextX","controlPointNextY","nextItem","loop","previousItem","niceNum","range","exponent","fraction","easingEffects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","parseMaxStyle","styleValue","parentProperty","valueInPixels","isConstrainedValue","getConstraintDimension","domNode","maxStyle","percentageProperty","view","defaultView","constrainedNode","getComputedStyle","constrainedContainer","hasCNode","hasCContainer","infinity","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","cancelAnimFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","getRelativePosition","evt","mouseX","mouseY","originalEvent","currentTarget","srcElement","boundingRect","getBoundingClientRect","touches","clientX","clientY","paddingLeft","paddingTop","paddingRight","paddingBottom","left","bottom","top","currentDevicePixelRatio","addEvent","eventType","method","addEventListener","attachEvent","removeEvent","handler","removeEventListener","detachEvent","bindEvents","arrayOfEvents","eventName","unbindEvents","getConstraintWidth","getConstraintHeight","container","clientWidth","cw","clientHeight","ch","el","property","currentStyle","getPropertyValue","pixelRatio","devicePixelRatio","scale","originalDevicePixelRatio","clearRect","fontString","pixelSize","fontStyle","fontFamily","longestText","font","arrayOfThings","cache","gc","garbageCollect","longest","thing","measureText","nestedThing","gcLen","textWidth","numberOfLabelLines","numberOfLines","drawRoundedRectangle","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","CanvasGradient","hiddenIframe","hiddenIframeClass","classlist","setAttribute","border","insertBefore","firstChild","contentWindow","onresize","removeResizeListener","querySelector","removeChild","arrayEquals","a0","a1","v0","v1","callCallback","fn","_tArg","getHoverColor","colorValue","CanvasPattern","saturate","darken","rgbString","Color","valid","alpha","vals","getRgba","setValues","getHsla","getHwb","red","lightness","whiteness","cyan","setSpace","rgbArray","hslArray","hsvArray","hwbArray","cmykArray","rgbaArray","hslaArray","setChannel","green","blue","saturation","saturationv","blackness","magenta","yellow","black","hexString","rgbaString","percentString","hslString","hslaString","hwbString","rgbNumber","luminosity","lum","chan","contrast","color2","lum1","lum2","level","contrastRatio","light","negate","lighten","desaturate","whiten","blacken","greyscale","clearer","opaquer","rotate","mix","mixinColor","weight","color1","w1","w2","toJSON","prop","spaces","maxes","getValues","space","charAt","capped","chans","sname","svalues","conversions","route","fromModel","routes","toModel","wrappedFn","conversion","wrapRounded","raw","wrapRaw","deriveBFS","graph","models","parent","buildGraph","queue","pop","adjacents","adjacent","wrapConversion","cur","colorNames","hexAlpha","rgba","percentaString","hsla","hexDouble","str","getRgb","getHsl","getAlpha","reverseNames","canvasHelpers","drawPoint","pointStyle","edgeLength","xOffset","yOffset","arc","SQRT2","fillRect","strokeRect","stroke","drawImage","Element","configuration","initialize","hidden","pivot","_view","_start","transition","ease","startVal","tooltipPosition","hasValue","animation","easing","onProgress","onComplete","Animation","currentStep","numSteps","onAnimationProgress","onAnimationComplete","animationService","frameDuration","animations","dropFrames","addAnimation","animationObject","lazy","animating","cancelAnimation","animationWrapper","startDigest","now","framesToDrop","types","instances","ensureScalesHaveIDs","buildOrUpdateControllers","buildScales","updateLayout","resetElements","initToolTip","stop","silent","newWidth","newHeight","newSize","onResize","scalesOptions","scaleOptions","xAxisOptions","yAxisOptions","dtype","isDefault","scaleType","scaleClass","getScaleConstructor","addScalesToLayout","layoutService","newControllers","meta","getDatasetMeta","updateIndex","isCombo","reset","tooltip","_data","buildOrUpdateElements","updateDatasets","animationOptions","easingFunction","stepDecimal","easeDecimal","draw","easingDecimal","boxes","box","chartArea","isDatasetVisible","eventPosition","elementsArray","inRange","found","_index","getElementsAtXAxis","inLabelRange","it","getElementsAtEventForMode","_datasetIndex","_meta","xAxisID","yAxisID","getVisibleDatasetCount","generateLegend","toBase64Image","toDataURL","Tooltip","_chartInstance","_options","eventHandler","updateHoverStyle","enabled","hoverOptions","tooltipsOptions","lastActive","lastTooltipActive","tooltipActive","handleEvent","custom","_active","DatasetController","datasetElementType","dataElementType","linkScales","addElements","getMeta","getDataset","getScaleForId","scaleID","createMetaDataset","createMetaData","metaData","addElementAndReset","updateElement","numData","numMetaData","removeHoverStyle","elementOpts","valueOrDefault","setHoverStyle","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","addBox","removeBox","leftBoxes","rightBoxes","topBoxes","bottomBoxes","chartAreaBoxes","fullWidth","chartWidth","chartHeight","chartAreaHeight","verticalBoxWidth","horizontalBoxHeight","maxChartAreaWidth","maxChartAreaHeight","minBoxSizes","minSize","isHorizontal","horizontal","totalLeftBoxesWidth","totalRightBoxesWidth","totalTopBoxesHeight","totalBottomBoxesHeight","fitBox","minBoxSize","scaleMargin","newMaxChartAreaHeight","newMaxChartAreaWidth","placeBox","minBox","constructors","registerScaleType","scaleConstructor","updateScaleDefaults","additions","_plugins","register","plugin","unregister","idx","getAll","PluginBase","beforeInit","afterInit","beforeUpdate","afterUpdate","beforeDraw","afterDraw","pluginService","gridLines","lineWidth","drawBorder","drawOnChartArea","drawTicks","tickMarkLength","zeroLineWidth","zeroLineColor","offsetGridLines","borderDash","borderDashOffset","scaleLabel","labelString","minRotation","maxRotation","mirror","autoSkip","autoSkipPadding","labelOffset","Scale","maxHeight","margins","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","beforeBuildTicks","buildTicks","afterBuildTicks","beforeTickToLabelConversion","convertTicksToLabels","afterTickToLabelConversion","beforeCalculateTickRotation","calculateTickRotation","afterCalculateTickRotation","beforeFit","fit","afterFit","numericalTick","userCallback","globalDefaults","optionTicks","tickFontSize","tickFontStyle","tickFontFamily","tickLabelFont","firstRotated","firstWidth","lastWidth","labelRotation","longestTextCache","cosRotation","sinRotation","originalLabelWidth","labelWidth","tickWidth","getPixelForTick","yLabelWidth","opts","tickOpts","scaleLabelOpts","gridLineOpts","scaleLabelFontSize","isFullWidth","largestTextWidth","tallestLabelHeightInLines","lineSpace","longestLabelWidth","labelHeight","firstLabelWidth","lastLabelWidth","maxLabelWidth","getRightValue","rawValue","NaN","getLabelForIndex","getPixelForValue","getValueForPixel","includeOffset","pixel","finalVal","innerHeight","getPixelForDecimal","decimal","valueOffset","getBasePixel","skipRatio","maxTicks","isRotated","useAutoskipper","tickFontColor","fontColor","tl","scaleLabelFontColor","scaleLabelFontStyle","scaleLabelFontFamily","scaleLabelFont","labelRotationRadians","longestRotatedLabel","fillStyle","itemsToDraw","xTickStart","xTickEnd","yTickStart","yTickEnd","isLastTick","lineColor","tx1","ty1","tx2","ty2","x1","y1","labelX","labelY","zeroLineIndex","textBaseline","xLineValue","yLineValue","glWidth","glColor","glBorderDash","glBorderDashOffset","rotation","itemToDraw","save","strokeStyle","setLineDash","lineDashOffset","restore","translate","fillText","scaleLabelX","scaleLabelY","isLeft","Title","legendHitBoxes","chartOpts","beforeBuildLabels","buildLabels","afterBuildLabels","pos","titleX","titleY","titleFont","titleOpts","titleBlock","legendItem","ci","boxWidth","generateLabels","lineCap","borderCapStyle","lineDash","lineJoin","borderJoinStyle","Legend","doughnutMode","legendItems","labelOpts","globalDefault","itemOrDefault","labelFont","hitboxes","lineWidths","totalHeight","vPadding","columnWidths","totalWidth","currentColWidth","currentColHeight","itemHeight","itemWidth","lineDefault","legendWidth","cursor","isLineWidthZero","offSet","centerX","centerY","drawLegendBox","lh","hitBox","legendOpts","pushOrConcat","toPush","createTooltipItem","xScale","_xScale","yScale","_yScale","_scale","xLabel","titleFontStyle","titleSpacing","titleMarginBottom","titleFontColor","titleAlign","bodySpacing","bodyFontColor","bodyAlign","footerFontStyle","footerSpacing","footerMarginTop","footerFontColor","footerAlign","yPadding","xPadding","yAlign","xAlign","caretSize","cornerRadius","multiKeyBackground","beforeTitle","tooltipItems","labelCount","afterTitle","beforeBody","beforeLabel","labelColor","afterLabel","afterBody","beforeFooter","footer","afterFooter","tooltipOpts","_bodyFontFamily","bodyFontFamily","_bodyFontStyle","bodyFontStyle","_bodyAlign","bodyFontSize","_titleFontFamily","titleFontFamily","_titleFontStyle","titleFontSize","_titleAlign","_footerFontFamily","footerFontFamily","_footerFontStyle","footerFontSize","_footerAlign","legendColorBackground","getTitle","lines","getBeforeBody","getBody","bodyItems","bodyItem","before","after","getAfterBody","getFooter","changed","labelColors","xPositions","yPositions","getAveragePosition","itemSort","body","caretPadding","tooltipSize","getTooltipSize","determineAlignment","getBackgroundPoint","vm","combinedBodyLength","titleLineCount","footerLineCount","widthPadding","maxLineWidth","lf","rf","olf","orf","yf","midX","midY","pt","paddingAndSize","radiusAndPadding","drawCaret","tooltipPoint","x3","y3","ptX","ptY","bgColor","drawTitle","drawBody","textColor","xLinePadding","fillLineOfText","drawColorBoxes","drawFooter","globalOpts","Arc","hoverRadius","chartX","chartY","pointRelativePosition","startAngle","endAngle","betweenAngles","withinRadius","innerRadius","outerRadius","centreAngle","rangeFromCentre","sA","eA","capBezierPoints","spanGaps","scaleZero","_loop","lineToPoint","previousPoint","pointVM","steppedLine","bezierCurveTo","currentVM","_children","lastDrawnIndex","globalOptionLineElements","hitRadius","Point","rectangle","borderSkipped","Rectangle","halfWidth","leftX","rightX","halfStroke","corners","startCorner","cornerAt","LinearScaleBase","handleTickRangeOptions","minSign","maxSign","suggestedMin","getTickLimit","handleDirectionalChanges","spacing","fixedStepSize","stepSize","niceRange","niceMin","niceMax","ceil","numSpaces","start","end","ticksAsNumbers","DatasetScale","getLabels","xLabels","yLabels","minIndex","maxIndex","offsetAmt","valueWidth","widthOffset","valueHeight","heightOffset","horz","valueDimension","defaultConfig","tickValue","logDelta","tickString","numDecimal","toFixed","LinearScale","IDMatches","stacked","valuesPerType","positiveValues","negativeValues","relativePoints","valuesForType","minVal","maxVal","innerDimension","rightValue","arr","remain","toExponential","LogarithmicScale","minNotZero","tickVal","exp","significand","lastTick","tickValues","newVal","LinearRadialScale","getValueCount","xCenter","yCenter","drawingArea","backdropPaddingY","pointLabels","pointPosition","halfTextWidth","furthestRightIndex","furthestRightAngle","furthestLeftIndex","furthestLeftAngle","xProtrusionLeft","xProtrusionRight","radiusReductionRight","radiusReductionLeft","pointLabelFontSize","pointLabeFontStyle","pointLabeFontFamily","pointLabeFont","largestPossibleRadius","furthestRight","furthestLeft","getPointPosition","getIndexAngle","setCenterPoint","leftMovement","rightMovement","maxRight","maxLeft","angleMultiplier","startAngleRadians","getDistanceFromCenterForValue","scalingFactor","distanceFromCenter","thisAngle","getPointPositionForValue","getBasePosition","angleLineOpts","angleLines","pointLabelOpts","yCenterOffset","yHeight","lineArc","showLabelBackdrop","backdropColor","backdropPaddingX","outerDistance","outerPosition","pointLabelPosition","pointLabelFontColor","animate","units","steps","maxStep","TimeScale","getLabelMoment","labelMoments","getLabelDiff","labelDiffs","buildLabelDiffs","getMomentStartOf","tick","unit","isoWeekday","startOf","tickUnit","scaleLabelMoments","labelMoment","parseTime","firstTick","momentsForDataset","datasetVisible","scaleLabelDiffs","diffsForDataset","roundedStart","unitScale","scaleSizeInUnits","displayFormat","displayFormats","unitStepSize","innerWidth","tempFirstLabel","tickFormatFunction","tickLabelWidth","labelCapacity","minUnit","unitDefinitionIndex","unitDefinition","leadingUnitBuffer","trailingUnitBuffer","roundedEnd","newTick","tooltipFormat","formattedTick","tickMoments","asSeconds","parser","getMonth","warn","millisecond","second","minute","hour","day","week","quarter","year","bar","categoryPercentage","barPercentage","getBarCount","barCount","scaleBase","rectangleElementOptions","calculateBarX","calculateBarY","datasetLabel","calculateBarBase","calculateBarWidth","currentDs","currentDsMeta","currentVal","getRuler","datasetCount","categoryWidth","categorySpacing","fullBarWidth","barWidth","barSpacing","barThickness","ruler","getBarIndex","barIndex","leftTick","sumPos","sumNeg","ds","dsMeta","stackedVal","horizontalBar","calculateBarHeight","halfHeight","topY","bottomY","cornerIndex","tickHeight","categoryHeight","fullBarHeight","barHeight","topTick","bubble","dataPoint","pointElementOptions","dsIndex","getRadius","dataVal","doughnut","animateRotate","animateScale","arcOpts","cutoutPercentage","circumference","pie","getRingIndex","ringIndex","availableWidth","availableHeight","contains0","contains90","contains180","contains270","cutout","getMaxBorderWidth","radiusLength","offsetX","offsetY","total","calculateTotal","animationOpts","calculateCircumference","valueAtIndexOrDefault","hoverWidth","lineEnabled","showLine","updateBezierControlPoints","lineElementOptions","lineTension","stepped","cubicInterpolationMode","scaleTop","scaleBottom","getPointBackgroundColor","pointBackgroundColor","getPointBorderColor","pointBorderColor","getPointBorderWidth","pointBorderWidth","pointOptions","pointRadius","pointHitRadius","calculatePointY","stackedRightValue","controlPoints","area","capControlPoint","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","polarArea","countVisibleElements","visibleCount","datasetStartAngle","resetRadius","radar","PolarArea","scatter","equalArrays","equalByTag","equalObjects","getTag","argsTag","arrayTag","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","assocIndexOf","pairs","LARGE_ARRAY_SIZE","isMasked","toSource","reIsHostCtor","funcProto","reIsNative","RegExp","nativeObjectToString","isOwn","unmasked","coreJsData","maskSrcKey","exec","IE_PROTO","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","getMapData","setCacheAdd","setCacheHas","predicate","Uint8Array","mapToArray","setToArray","symbolProto","symbolValueOf","valueOf","byteLength","byteOffset","buffer","getAllKeys","objProps","objLength","objStacked","skipCtor","objValue","objCtor","othCtor","baseGetAllKeys","getSymbols","arrayPush","keysFunc","symbolsFunc","arrayFilter","stubArray","nativeGetSymbols","symbol","resIndex","baseTimes","isIndex","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","typedArrayTags","freeProcess","binding","isPrototype","nativeKeys","Ctor","overArg","transform","arg","DataView","Promise","Set","WeakMap","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","resolve","ctorString","baseAssignValue","keyBy","createAggregator","arrayAggregator","baseAggregator","baseIteratee","setter","initializer","accumulator","baseEach","baseForOwn","createBaseEach","baseFor","createBaseFor","fromRight","iterable","eachFunc","baseMatches","baseMatchesProperty","identity","baseIsMatch","getMatchData","matchesStrictComparable","matchData","noCustomizer","COMPARE_PARTIAL_FLAG","isStrictComparable","hasIn","baseGet","memoizeCapped","rePropName","reEscapeChar","charCodeAt","quote","subString","memoize","resolver","memoized","Cache","baseToString","arrayMap","symbolToString","baseHasIn","hasPath","hasFunc","baseProperty","basePropertyDeep","OpMenu","onDropdownToggleClick","toggleOperationMenu","isItemMenuShow"],"mappings":"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","file":"static/js/sysAdmin.chunk.js","sourcesContent":["var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport Logo from '../../components/logo';\nimport { gettext, siteRoot, isPro, otherPermission, canViewSystemInfo, canViewStatistic,\n  canConfigSystem, canManageLibrary, canManageUser, canManageGroup, canViewUserLog,\n  canViewAdminLog, constanceEnabled, multiTenancy, multiInstitution, sysadminExtraEnabled,\n  enableGuestInvitation, enableTermsAndConditions, enableFileScan, enableWorkWeixin, enableDingtalk,\n  enableShareLinkReportAbuse } from '../../utils/constants';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired\n};\n\nclass SidePanel extends React.Component {\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab == tab ? 'active' : '';\n  }\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <div className=\"side-nav\">\n            <div className=\"side-nav-con\">\n              <h3 className=\"sf-heading\">{gettext('System Admin')}</h3>\n              <ul className=\"nav nav-pills flex-column nav-container\">\n                {canViewSystemInfo &&\n                <li className=\"nav-item\">\n                  <Link\n                    className={`nav-link ellipsis ${this.getActiveClass('info')}`}\n                    to={siteRoot + 'sys/info/'}\n                    onClick={() => this.props.tabItemClick('info')}\n                  >\n                    <span className=\"sf2-icon-info\" aria-hidden=\"true\"></span>\n                    <span className=\"nav-text\">{gettext('Info')}</span>\n                  </Link>\n                </li>\n                }\n                {isPro && canViewStatistic &&\n                  <li className=\"nav-item\">\n                    <Link className={`nav-link ellipsis ${this.getActiveClass('statistic')}`}\n                      to={siteRoot + 'sys/statistics/file/'}\n                      onClick={() => this.props.tabItemClick('statistic')}\n                    >\n                      <span className=\"sf2-icon-histogram\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Statistic')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('devices')}`}\n                      to={siteRoot + 'sys/desktop-devices/'}\n                      onClick={() => this.props.tabItemClick('devices')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Devices')}</span>\n                    </Link>\n                  </li>\n                }\n                {constanceEnabled && canConfigSystem &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('web-settings')}`}\n                      to={siteRoot + 'sys/web-settings/'}\n                      onClick={() => this.props.tabItemClick('web-settings')}\n                    >\n                      <span className=\"sf2-icon-cog2\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Settings')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageLibrary &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('libraries')}`}\n                      to={siteRoot + 'sys/all-libraries/'}\n                      onClick={() => this.props.tabItemClick('libraries')}\n                    >\n                      <span className=\"sf2-icon-library\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Libraries')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageUser &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('users')}`}\n                      to={siteRoot + 'sys/users/'}\n                      onClick={() => this.props.tabItemClick('users')}\n                    >\n                      <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Users')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('groups')}`}\n                      to={siteRoot + 'sys/groups/'}\n                      onClick={() => this.props.tabItemClick('groups')}\n                    >\n                      <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Groups')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('departments')}`}\n                      to={siteRoot + 'sys/departments/'}\n                      onClick={() => this.props.tabItemClick('departments')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Departments')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiTenancy && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('organizations')}`}\n                      to={siteRoot + 'sys/organizations/'}\n                      onClick={() => this.props.tabItemClick('organizations')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Organizations')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiInstitution && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('institutions')}`}\n                      to={siteRoot + 'sys/institutions/'}\n                      onClick={() => this.props.tabItemClick('institutions')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Institutions')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('notifications')}`}\n                      to={siteRoot + 'sys/notifications/'}\n                      onClick={() => this.props.tabItemClick('notifications')}\n                    >\n                      <span className=\"sf2-icon-msgs\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Notifications')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('links')}`}\n                      to={siteRoot + 'sys/share-links/'}\n                      onClick={() => this.props.tabItemClick('links')}\n                    >\n                      <span className=\"sf2-icon-link\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Links')}</span>\n                    </Link>\n                  </li>\n                }\n                {sysadminExtraEnabled && canViewUserLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('logs')}`}\n                      to={siteRoot + 'sys/logs/login'}\n                      onClick={() => this.props.tabItemClick('logs')}\n                    >\n                      <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission && enableFileScan &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('file-scan-records')}`}\n                      to={siteRoot + 'sys/file-scan-records/'}\n                      onClick={() => this.props.tabItemClick('file-scan-records')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('File Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('virus-files')}`}\n                      to={siteRoot + 'sys/virus-files/all/'}\n                      onClick={() => this.props.tabItemClick('virus-files')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Virus Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && enableGuestInvitation && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('invitations')}`}\n                      to={siteRoot + 'sys/invitations/'}\n                      onClick={() => this.props.tabItemClick('invitations')}\n                    >\n                      <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Invitations')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableTermsAndConditions &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('termsandconditions')}`}\n                      to={siteRoot + 'sys/terms-and-conditions/'}\n                      onClick={() => this.props.tabItemClick('termsandconditions')}\n                    >\n                      <span className=\"sf2-icon-wiki\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Terms and Conditions')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canViewAdminLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('adminLogs')}`}\n                      to={siteRoot + 'sys/admin-logs/operation'}\n                      onClick={() => this.props.tabItemClick('adminLogs')}\n                    >\n                      <span className=\"sf2-icon-admin-log\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Admin Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableWorkWeixin &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('work-weixin')}`}\n                      to={siteRoot + 'sys/work-weixin/'}\n                      onClick={() => this.props.tabItemClick('work-weixin')}\n                    >\n                      <span className=\"sf3-font-enterprise-wechat sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{''}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableDingtalk &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('dingtalk')}`}\n                      to={siteRoot + 'sys/dingtalk/'}\n                      onClick={() => this.props.tabItemClick('dingtalk')}\n                    >\n                      <span className=\"sf3-font-dingtalk sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{''}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableShareLinkReportAbuse &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('abuse-reports')}`}\n                      to={siteRoot + 'sys/abuse-reports/'}\n                      onClick={() => this.props.tabItemClick('abuse-reports')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Abuse Reports')}</span>\n                    </Link>\n                  </li>\n                }\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  render() {\n    return (\n      <div className=\"main-panel\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.object,\n  toggleSidePanel: PropTypes.func\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span \n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title={gettext(\"Side Nav Menu\")}\n            onClick={this.props.toggleSidePanel}\n          ></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          {this.props.search && this.props.search}\n          <Account isAdminPanel={true} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, isPro, isDefaultAdmin } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/system-info.css';\n\nclass Info extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      sysInfo: {}\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysInfo().then((res) => {\n      this.setState({\n        loading: false,\n        sysInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  uploadLicenseFile = (e) => {\n\n    // no file selected\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    seafileAPI.sysAdminUploadLicense(file).then((res) => {\n      let info = this.state.sysInfo;\n      Object.assign(info, res.data, {with_license: true});\n      this.setState({\n        sysInfo: info\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  renderLicenseDescString = (license_mode, license_to, license_expiration) => {\n    if (license_mode == 'life-time') {\n      if (window.app.config.lang == 'zh-cn') {\n        return ' ' + license_to + ' ' + license_expiration + ' ';\n      } else {\n        return gettext('licensed to {placeholder_license_to}, upgrade service expired in {placeholder_license_expiration}')\n          .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n      }\n    } else {\n      return gettext('licensed to {placeholder_license_to}, expires on {placeholder_license_expiration}')\n        .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n    }\n  }\n\n  render() {\n    let { license_mode, license_to, license_expiration, org_count,\n      repos_count, total_files_count, total_storage, total_devices_count,\n      current_connected_devices_count, license_maxusers, multi_tenancy_enabled,\n      active_users_count, users_count, groups_count, with_license } = this.state.sysInfo;\n    let { loading, errorMsg } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container system-admin-info\">\n            <h2 className=\"heading\">{gettext('Info')}</h2>\n            <div className=\"content\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) &&\n              <dl className=\"flex-1 m-0\">\n                <dt className=\"info-item-heading\">{gettext('System Info')}</dt>\n                {isPro ?\n                  <dd className=\"info-item-content\">\n                    {gettext('Professional Edition')}\n                    {with_license &&\n                      ' ' + this.renderLicenseDescString(license_mode, license_to, license_expiration)\n                    }<br/>\n                    {isDefaultAdmin &&\n                      <Fragment>\n                        <Button type=\"button\" className=\"mt-2\" onClick={this.openFileInput}>{gettext('Upload license')}</Button>\n                        <input className=\"d-none\" type=\"file\" onChange={this.uploadLicenseFile} ref={this.fileInput} />\n                      </Fragment>\n                    }\n                  </dd> :\n                  <dd className=\"info-item-content\">\n                    {gettext('Community Edition')}\n                    <a className=\"ml-1\" href=\"https://download.seafile.com/published/seafile-manual/deploy_pro/migrate_from_seafile_community_server.md\" target=\"_blank\">{gettext('Upgrade to Pro Edition')}</a>\n                  </dd>\n                }\n                <dt className=\"info-item-heading\">{gettext('Libraries')} / {gettext('Files')}</dt>\n                <dd className=\"info-item-content\">{repos_count} / {total_files_count}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Storage Used')}</dt>\n                <dd className=\"info-item-content\">{Utils.bytesToSize(total_storage)}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Total Devices')} / {gettext('Current Connected Devices')}</dt>\n                <dd className=\"info-item-content\">{total_devices_count} / {current_connected_devices_count}</dd>\n\n                {isPro ?\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')} / {gettext('Limits')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count}{' / '}{users_count}{' / '}{with_license ? license_maxusers : '--'}</dd>\n                  </Fragment> :\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count} / {users_count}</dd>\n                  </Fragment>\n                }\n\n                <dt className=\"info-item-heading\">{gettext('Groups')}</dt>\n                <dd className=\"info-item-content\">{groups_count}</dd>\n\n                {multi_tenancy_enabled &&\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Organizations')}</dt>\n                    <dd className=\"info-item-content\">{org_count}</dd>\n                  </Fragment>\n                }\n              </dl>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Info;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'fileStatistic', urlPart: 'statistics/file', text: gettext('File')},\n      {name: 'storageStatistic', urlPart: 'statistics/storage', text: gettext('Storage')},\n      {name: 'usersStatistic', urlPart: 'statistics/user', text: gettext('Users')},\n      {name: 'trafficStatistic', urlPart: 'statistics/traffic', text: gettext('Traffic')},\n      {name: 'reportsStatistic', urlPart: 'statistics/reports', text: gettext('Reports')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Calendar from '@seafile/seafile-calendar';\nimport DatePicker from '@seafile/seafile-calendar/lib/Picker';\nimport { translateCalendar } from '../../../utils/date-format-utils';\n\nimport '@seafile/seafile-calendar/assets/index.css';\n\nconst propsTypes = {\n  disabledDate: PropTypes.func.isRequired,\n  value: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n};\n\nconst FORMAT = 'YYYY-MM-DD';\n\nclass Picker extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.defaultCalendarValue = null;\n  }\n\n  componentDidMount() {\n    let lang = window.app.config.lang;\n    this.defaultCalendarValue = moment().locale(lang).clone();\n  }\n\n  render() {\n    const props = this.props;\n    const calendar = (<Calendar\n      defaultValue={this.defaultCalendarValue}\n      disabledDate={props.disabledDate}\n      format={FORMAT}\n      locale={translateCalendar()}\n    />);\n    return (\n      <DatePicker\n        calendar={calendar}\n        value={props.value}\n        onChange={props.onChange}\n      >\n        {\n          ({value}) => {\n            return (\n              <span>\n                <input\n                  placeholder=\"yyyy-mm-dd\"\n                  tabIndex=\"-1\"\n                  readOnly\n                  value={value && value.format(FORMAT) || ''}\n                  className=\"form-control system-statistic-input\"\n                />\n              </span>\n            );\n          }\n        }\n      </DatePicker>\n    );\n  }\n}\n\nPicker.propsTypes = propsTypes;\n\nexport default Picker;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport Picker from './picker';\n\nconst propTypes = {\n  getActiviesFiles: PropTypes.func.isRequired,\n  children: PropTypes.object,\n};\n\nclass StatisticCommonTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      statisticType: 'oneWeek',\n      startValue: null,\n      endValue: null,\n    };\n  }\n\n  componentDidMount() {\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  changeActive = (statisticTypeName) => {\n    let { statisticType } = this.state;\n    if (statisticType === statisticTypeName) {\n      return;\n    }\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime;\n    switch(statisticTypeName) {\n      case 'oneWeek' :\n        startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneMonth' :\n        startTime = moment().subtract(29,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneYear' :\n        startTime = moment().subtract(364,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n    }\n    this.setState({\n      statisticType: statisticTypeName,\n    });\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  disabledStartDate = (startValue) => {\n    if (!startValue) {\n      return false;\n    }\n    let today = moment().format();\n\n    const endValue = this.state.endValue;\n    if (!endValue) {\n      let startTime = moment(startValue).format();\n      return today < startTime;\n    }\n    return endValue.isBefore(startValue) || moment(startValue).format() > today;\n  }\n\n  disabledEndDate = (endValue) => {\n    if (!endValue) {\n      return false;\n    }\n    let today = moment().format();\n    const startValue = this.state.startValue;\n    if (!startValue) {\n      let endTime = moment(endValue).format();\n      return today < endTime;\n    }\n    return endValue.isBefore(startValue) || moment(endValue).format() > today;\n  }\n\n  onChange = (field, value) => {\n    this.setState({\n      [field]: value,\n    });\n  }\n\n  onSubmit = () => {\n    let { startValue, endValue } = this.state;\n    if(!startValue || !endValue) {\n      return;\n    }\n    this.setState({\n      statisticType: 'itemButton',\n    });\n    let startTime = moment(startValue).format('YYYY-MM-DD 00:00:00');\n    let endTime = moment(endValue).format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  render() {\n    let { statisticType, endValue, startValue } = this.state;\n    return(\n      <Fragment>\n        {this.props.children}\n        <div className=\"system-statistic-time-range\">\n          <div className=\"sys-stat-tool\">\n            <div className={`system-statistic-item border-right-0 rounded-left ${statisticType === 'oneWeek' ? 'item-active' : ''}`} onClick={this.changeActive.bind(this, 'oneWeek')}>{gettext('7 Days')}</div>\n            <div className={`system-statistic-item border-right-0 ${statisticType === 'oneMonth' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneMonth')}>{gettext('30 Days')}</div>\n            <div className={`system-statistic-item rounded-right ${statisticType === 'oneYear' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneYear')}>{gettext('1 Year')}</div>\n          </div>\n          <div className=\"system-statistic-input-container\">\n            <Picker\n              disabledDate={this.disabledStartDate}\n              value={startValue}\n              onChange={this.onChange.bind(this, 'startValue')}\n            />\n            <span className=\"system-statistic-connect\">-</span>\n            <Picker\n              disabledDate={this.disabledEndDate}\n              value={endValue}\n              onChange={this.onChange.bind(this, 'endValue')}\n            />\n            <Button className=\"operation-item system-statistic-button\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nStatisticCommonTool.propTypes = propTypes;\n\nexport default StatisticCommonTool;\n","import React from 'react';\nimport { Line } from 'react-chartjs-2';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  labels: PropTypes.array.isRequired,\n  filesData: PropTypes.array.isRequired,\n  suggestedMaxNumbers: PropTypes.number.isRequired,\n  isLegendStatus: PropTypes.bool.isRequired,\n  chartTitle: PropTypes.string.isRequired,\n  isTitleCallback: PropTypes.bool,\n  isTicksCallback: PropTypes.bool,\n};\n\nclass StatisticChart extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      opations: {}\n    };\n  }\n\n  componentDidMount() {\n    let { labels, filesData, isTitleCallback, isTicksCallback, suggestedMaxNumbers, isLegendStatus, chartTitle } = this.props;\n    let _this = this;\n    let data = {\n      labels: labels,\n      datasets: filesData\n    };\n    let options = {\n      title: {\n        display: true,\n        fontSize: 14,\n        text: chartTitle,\n      },\n      elements: {\n        line: {\n          fill: false,\n          tension: 0, // disable bezier curves, i.e, draw straight lines\n          borderWidth: 2\n        }\n      },\n      legend: {\n        display: isLegendStatus,\n        labels: {\n          usePointStyle: true\n        }\n      },\n      tooltips: {\n        callbacks: {\n          label: function(tooltipItem, data) {\n            if (isTitleCallback) {\n              return _this.titleCallback(tooltipItem, data);\n            }\n            return data.datasets[tooltipItem.datasetIndex].label + ': ' + tooltipItem.yLabel;\n          }\n        }\n      },\n      layout: {\n        padding: {\n          right: 100,\n        }\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero: true,\n            suggestedMax: suggestedMaxNumbers,\n            callback: function(value, index, values) {\n              if (isTicksCallback) {\n                return _this.ticksCallback(value, index, values);\n              }\n              return value;\n            }\n          }\n        }],\n        xAxes: [{\n          ticks: {\n            maxTicksLimit: 20\n          }\n        }]\n      }\n    };\n    this.setState({\n      data: data,\n      options: options\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let data = {\n      labels: nextProps.labels,\n      datasets: nextProps.filesData\n    };\n    this.setState({data: data});\n  }\n\n  titleCallback = (tooltipItem, data) => {\n    return data.datasets[tooltipItem.datasetIndex].label + ': ' + Utils.bytesToSize(tooltipItem.yLabel);\n  }\n\n  ticksCallback = (value, index, values) => {\n    return Utils.bytesToSize(value);\n  }\n\n  render() {\n\n    let { data, options } = this.state;\n    return (\n      <Line\n        data={data}\n        options={options}\n      />\n    );\n  }\n}\n\nStatisticChart.propTypes = propTypes;\n\nexport default StatisticChart;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nimport '../../../css/system-stat.css';\n\nclass StatisticFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticFiles(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        added = [],\n        deleted = [],\n        visited = [],\n        modified = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          added.push(item.added);\n          deleted.push(item.deleted);\n          modified.push(item.modified);\n          visited.push(item.visited);\n        });\n        let addedData = {\n          label: gettext('Added'),\n          data: added,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let visitedData = {\n          label: gettext('Visited'),\n          data: visited,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let modifiedData = {\n          label: gettext('Modified'),\n          data: modified,\n          borderColor: '#72c3fc',\n          backgroundColor: '#72c3fc'};\n        let deletedData = {\n          label: gettext('Deleted'),\n          data: deleted,\n          borderColor: '#f75356',\n          backgroundColor: '#f75356'};\n        filesData = [visitedData, addedData, modifiedData, deletedData];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"fileStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={true}\n                chartTitle={gettext('File Operations')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticFile;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticStorage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticStorages(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        totalStorage = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          totalStorage.push(item.total_storage);\n        });\n        let total_storage = {\n          label: gettext('Total Storage'),\n          data: totalStorage,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        filesData = [total_storage];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"storageStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10*1000*1000}\n                isTitleCallback={true}\n                isTicksCallback={true}\n                isLegendStatus={false}\n                chartTitle={gettext('Total Storage')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticStorage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n};\n\nclass TrafficTable extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { type, sortBy, sortOrder } = this.props;\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            <th width=\"16%\">{type == 'user' ? gettext('User') : gettext('Organization')}</th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_upload')}>{gettext('Sync Upload')} {sortBy === 'sync_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_download')}>{gettext('Sync Download')} {sortBy === 'sync_file_download' && sortIcon}</div></th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_upload')}>{gettext('Web Upload')} {sortBy === 'web_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_download')}>{gettext('Web Download')} {sortBy === 'web_file_download' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_upload')}>{gettext('Share link upload')} {sortBy === 'link_file_upload' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_download')}>{gettext('Share link download')} {sortBy === 'link_file_download' && sortIcon}</div></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.props.children}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nTrafficTable.propTypes = propTypes;\n\nexport default TrafficTable;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  userTrafficItem: PropTypes.object.isRequired,\n};\n\nclass TrafficTableBody extends React.Component {\n\n  trafficName = () => {\n    let { userTrafficItem, type } = this.props;\n    switch(type) {\n      case 'user':\n        if (userTrafficItem.name) {\n          return (\n            <a href={siteRoot + 'useradmin/info/' + userTrafficItem.email + '/'}>{userTrafficItem.name}</a>\n          );\n        }\n        return(<span>{'--'}</span>);\n      case 'org':\n        return(<span>{userTrafficItem.org_name}</span>);\n    }\n  }\n\n  render() {\n    let { userTrafficItem } = this.props;\n\n    let syncUploadSize = Utils.bytesToSize(userTrafficItem.sync_file_upload);\n    let syncDownloadSize = Utils.bytesToSize(userTrafficItem.sync_file_download);\n    let webUploadSize = Utils.bytesToSize(userTrafficItem.web_file_upload);\n    let webDownloadSize = Utils.bytesToSize(userTrafficItem.web_file_download);\n    let linkUploadSize = Utils.bytesToSize(userTrafficItem.link_file_upload);\n    let linkDownloadSize = Utils.bytesToSize(userTrafficItem.link_file_download);\n\n    return(\n      <tr>\n        <td>{this.trafficName()}</td>\n        <td>{syncUploadSize}</td>\n        <td>{syncDownloadSize}</td>\n        <td>{webUploadSize}</td>\n        <td>{webDownloadSize}</td>\n        <td>{linkUploadSize}</td>\n        <td>{linkDownloadSize}</td>\n      </tr>\n    );\n  }\n}\n\nTrafficTableBody.propTypes = propTypes;\n\nexport default TrafficTableBody;\n","import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass OrgsTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgTrafficList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  }\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({isLoading: true, errorMessage: ''});\n    seafileAPI.sysAdminListOrgTraffic(month, page, perPage, orderBy).then(res => {\n      let orgTrafficList = res.data.org_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        orgTrafficList: orgTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initPage, this.initMonth));\n  }\n\n  render() {\n    const {\n      isLoading, errorMessage, orgTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'org'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {orgTrafficList.length > 0 && orgTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'org'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgsTraffic;\n","import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass UsersTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userTrafficList: [],\n      hasNextPage: false,\n      perPage: 25,\n      currentPage: 1,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  }\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({\n      isLoading: true,\n      errorMessage: ''\n    });\n    seafileAPI.sysAdminListUserTraffic(month, page, perPage, orderBy).then(res => {\n      let userTrafficList = res.data.user_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        userTrafficList: userTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initMonth, this.initPage));\n  }\n\n  render() {\n    const {\n      isLoading, errorMessage, userTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'user'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {userTrafficList.length > 0 && userTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'user'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default UsersTraffic;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport Loading from '../../../components/loading';\nimport OrgsTraffic from './statistic-traffic-orgs';\nimport UsersTraffic from './statistic-traffic-users';\nimport StatisticChart from './statistic-chart';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      linkData: [],\n      syncData: [],\n      webData: [],\n      labels: [],\n      isLoading: true,\n      tabActive: 'system'\n    };\n  }\n\n  changeTabActive = activeName => {\n    this.setState({tabActive: activeName});\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    seafileAPI.sysAdminStatisticTraffic(startTime, endTime, groupBy).then((res) => {\n      let labels = [];\n      let total_upload = [],\n        total_download = [],\n        link_upload = [],\n        link_download = [],\n        sync_upload = [],\n        sync_download = [],\n        web_upload = [],\n        web_download = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          link_upload.push(item['link-file-upload']);\n          link_download.push(item['link-file-download']);\n          sync_upload.push(item['sync-file-upload']);\n          sync_download.push(item['sync-file-download']);\n          web_upload.push(item['web-file-upload']);\n          web_download.push(item['web-file-download']);\n          total_upload.push(item['link-file-upload'] + item['sync-file-upload'] + item['web-file-upload']);\n          total_download.push(item['link-file-download'] + item['sync-file-download'] + item['web-file-download']);\n        });\n        let linkUpload = {\n          label: gettext('Upload'),\n          data: link_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let linkDownload = {\n          label: gettext('Download'),\n          data: link_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let syncUpload = {\n          label: gettext('Upload'),\n          data: sync_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let syncDownload = {\n          label: gettext('Download'),\n          data: sync_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let webUpload = {\n          label: gettext('Upload'),\n          data: web_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let webDownload = {\n          label: gettext('Download'),\n          data: web_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let totalUpload = {\n          label: gettext('Upload'),\n          data: total_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let totalDownload = {\n          label: gettext('Download'),\n          data: total_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let linkData = [linkUpload, linkDownload];\n        let syncData = [syncUpload, syncDownload];\n        let webData = [webUpload, webDownload];\n        let filesData = [totalUpload, totalDownload];\n        this.setState({\n          linkData: linkData,\n          syncData: syncData,\n          webData: webData,\n          filesData: filesData,\n          labels: labels,\n          isLoading: false\n        });\n      }\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  renderCommonTool = () => {\n    let { tabActive } = this.state;\n    if (tabActive === 'system') {\n      return (\n        <StatisticCommonTool getActiviesFiles={this.getActiviesFiles}>\n          <div className=\"statistic-traffic-tab\">\n            <div className={`statistic-traffic-tab-item ${tabActive === 'system' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'system')}>{gettext('System')}</div>\n            <div className={`statistic-traffic-tab-item ${tabActive === 'user' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'user')}>{gettext('Users')}</div>\n            <div className={`statistic-traffic-tab-item ${tabActive === 'organizations' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'organizations')}>{gettext('Organizations')}</div>\n          </div>\n        </StatisticCommonTool>\n      );\n    }\n    return (\n      <div className=\"statistic-traffic-tab\">\n        <div className={`statistic-traffic-tab-item ${tabActive === 'system' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'system')}>{gettext('System')}</div>\n        <div className={`statistic-traffic-tab-item ${tabActive === 'user' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'user')}>{gettext('Users')}</div>\n        <div className={`statistic-traffic-tab-item ${tabActive === 'organizations' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'organizations')}>{gettext('Organizations')}</div>\n      </div>\n    );\n  }\n\n  render() {\n    let { labels, filesData, linkData, syncData, webData, isLoading, tabActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"trafficStatistic\" />\n          <div className=\"cur-view-content\">\n            {this.renderCommonTool()}\n            {isLoading && <Loading />}\n            {!isLoading && tabActive === 'system' &&\n              <div className=\"statistic-traffic-chart-container\">\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={filesData}\n                      chartTitle={gettext('Total Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={webData}\n                      chartTitle={gettext('Web Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={linkData}\n                      chartTitle={gettext('Share Link Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={syncData}\n                      chartTitle={gettext('Sync Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n              </div>\n            }\n            {!isLoading && tabActive === 'user' &&\n              <UsersTraffic />\n            }\n            {!isLoading && tabActive === 'organizations' &&\n              <OrgsTraffic />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticTraffic;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticUsers extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true,\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticActiveUsers(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        count = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          count.push(item.count);\n        });\n        let userCount = {\n          label: gettext('Active Users'),\n          data: count,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        filesData = [userCount];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"usersStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={false}\n                chartTitle={gettext('Active Users')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticUsers;\n","import React, { Fragment } from 'react';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport moment from 'moment';\nimport StatisticNav from './statistic-nav';\nimport { Button, Input } from 'reactstrap';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nclass StatisticReports extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      month: moment().format('YYYYMM'),\n      errorMessage: ''\n    };\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  onGenerateReports = (type) => {\n    let url = siteRoot + 'api/v2.1/admin/statistics/';\n    let { month } = this.state;\n    if (!month) {\n      let errorMessage = gettext('It is required.');\n      this.setState({\n        errorMessage: errorMessage\n      });\n      return;\n    }\n    if (type === 'month') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n    }\n    switch(type) {\n      case 'month':\n        url += 'system-user-traffic/excel/?month=' + month;\n        break;\n      case 'storage':\n        url += 'system-user-storage/excel/?';\n        break;\n    }\n    this.setState({\n      errorMessage: ''\n    });\n    window.location.href = url;\n  }\n\n  render() {\n\n    let { errorMessage } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"reportsStatistic\" />\n          <div className=\"cur-view-content\">\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('Monthly User Traffic')}</div>\n              <div className=\"d-flex align-items-center mt-4\">\n                <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n                <Input className=\"statistic-reports-input\" defaultValue={moment().format('YYYYMM')} onChange={this.handleChange} />\n                <Button className=\"statistic-reports-submit operation-item\" onClick={this.onGenerateReports.bind(this, 'month')}>{gettext('Create Report')}</Button>\n              </div>\n              {errorMessage && <div className=\"error\">{errorMessage}</div>}\n            </div>\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('User Storage')}</div>\n              <Button className=\"mt-4 operation-item\" onClick={this.onGenerateReports.bind(this, 'storage')}>{gettext('Create Report')}</Button>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticReports;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'desktop', urlPart:'desktop-devices', text: gettext('Desktop')},\n      {name: 'mobile', urlPart:'mobile-devices', text: gettext('Mobile')}\n    ];\n    if (isPro) {\n      this.navItems.push({name: 'errors', urlPart:'device-errors', text: gettext('Errors')});\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUnlinkDevice from '../../../components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No connected devices')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"19%\">{gettext('User')}</th>\n                <th width=\"19%\">{gettext('Platform')}{' / '}{gettext('Version')}</th>\n                <th width=\"19%\">{gettext('Device Name')}</th>\n                <th width=\"19%\">{gettext('IP')}</th>\n                <th width=\"19%\">{gettext('Last Access')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDevicesList}\n            gotoNextPage={this.getNextPageDevicesList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      unlinked: false,\n      isOpIconShown: false,\n      isUnlinkDeviceDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  handleUnlink = (e) => {\n    e.preventDefault();\n    if (this.props.item.is_desktop_client) {\n      this.toggleUnlinkDeviceDialog();\n    } else {\n      this.unlinkDevice(true);\n    }\n  }\n\n  toggleUnlinkDeviceDialog = () => {\n    this.setState({isUnlinkDeviceDialogOpen: !this.state.isUnlinkDeviceDialogOpen});\n  }\n\n  unlinkDevice = (deleteFiles) => {\n    const { platform, device_id, user } = this.props.item;\n    seafileAPI.sysAdminUnlinkDevice(platform, device_id, user, deleteFiles).then((res) => {\n      this.setState({unlinked: true});\n      let message = gettext('Successfully unlinked the device.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { unlinked, isUnlinkDeviceDialogOpen, isOpIconShown } = this.state;\n\n    if (unlinked) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td>{item.user_name}</td>\n          <td>{item.platform}{' / '}{item.client_version}</td>\n          <td>{item.device_name}</td>\n          <td>{item.last_login_ip}</td>\n          <td>\n            <span title={moment(item.last_accessed).format('llll')}>{moment(item.last_accessed).fromNow()}</span>\n          </td>\n          <td>\n            <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unlink')} onClick={this.handleUnlink}></a>\n          </td>\n        </tr>\n        {isUnlinkDeviceDialogOpen &&\n          <SysAdminUnlinkDevice\n            unlinkDevice={this.unlinkDevice}\n            toggleDialog={this.toggleUnlinkDeviceDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass DevicesByPlatform extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesData: {},\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDevicesListByPage(this.state.currentPage);\n    });\n  }\n\n  getDevicesListByPage = (page) => {\n    let platform = this.props.devicesPlatform;\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDevices(platform, page, per_page).then((res) => {\n      this.setState({\n        devicesData: res.data.devices,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDevicesListByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        <Content\n          loading={this.state.loading}\n          errorMsg={this.state.errorMsg}\n          items={this.state.devicesData}\n          getDevicesListByPage={this.getDevicesListByPage}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n          pageInfo={this.state.pageInfo}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DevicesByPlatform;\n","import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass DesktopDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"desktop\" />\n            <DevicesByPlatform\n              devicesPlatform={'desktop'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DesktopDevices;\n","import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass MobileDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"mobile\" />\n            <DevicesByPlatform\n              devicesPlatform={'mobile'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default MobileDevices;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot } from '../../utils/constants';\n\nconst propTypes = {\n  email: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\n\nclass UserLink extends Component {\n\n  render() {\n    return <Link to={`${siteRoot}sys/users/${encodeURIComponent(this.props.email)}/`}>{this.props.name}</Link>;\n  }\n}\n\nUserLink.propTypes = propTypes;\n\nexport default UserLink;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { Link } from '@gatsbyjs/reach-router';\nimport DevicesNav from './devices-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No sync errors')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"16%\">{gettext('User')}</th>\n                <th width=\"20%\">{gettext('Device')}{' / '}{gettext('Version')}</th>\n                <th width=\"16%\">{gettext('IP')}</th>\n                <th width=\"16%\">{gettext('Library')}</th>\n                <th width=\"16%\">{gettext('Error')}</th>\n                <th width=\"16%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDeviceErrorsList}\n            gotoNextPage={this.getNextPageDeviceErrorsList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.device_name}{' / '}{item.client_version}</td>\n        <td>{item.device_ip}</td>\n        <td><Link to={`${siteRoot}sysadmin/#libs/${item.repo_id}`}>{item.repo_name}</Link></td>\n        <td>{item.error_msg}</td>\n        <td>\n          <span className=\"item-meta-info\" title={moment(item.last_accessed).format('llll')}>{moment(item.error_time).fromNow()}</span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DeviceErrors extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesErrors: [],\n      isCleanBtnShown: false,\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDeviceErrorsListByPage(this.state.currentPage);\n    });\n  }\n\n  getDeviceErrorsListByPage = (page) => {\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDeviceErrors(page, per_page).then((res) => {\n      this.setState({\n        loading: false,\n        devicesErrors: res.data.device_errors,\n        pageInfo: res.data.page_info,\n        isCleanBtnShown: res.data.length > 0\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clean = () => {\n    seafileAPI.sysAdminClearDeviceErrors().then((res) => {\n      this.setState({\n        devicesErrors: [],\n        isCleanBtnShown: false\n      });\n      let message = gettext('Successfully cleaned all errors.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDeviceErrorsListByPage(1);\n    });\n  }\n  render() {\n    return (\n      <Fragment>\n        {this.state.isCleanBtnShown ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.clean}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : (\n          <MainPanelTopbar {...this.props} />\n        )}\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"errors\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.devicesErrors}\n                getDeviceErrorsListByPage={this.getDeviceErrorsListByPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                pageInfo={this.state.pageInfo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DeviceErrors;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateQuota: PropTypes.func.isRequired\n};\n\nclass SetQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleQuotaChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      quota: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateQuota(this.state.quota.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { quota, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={quota}\n                  onKeyPress={this.handleKeyPress}\n                  onChange={this.handleQuotaChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>MB</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetQuotaDialog.propTypes = propTypes;\n\nexport default SetQuotaDialog;\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  importUserInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminImportUserDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importUserInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import users from a .xlsx file')}</ModalHeader>\n        <ModalBody>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}useradmin/batchadduser/example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminImportUserDialog.propTypes = propTypes;\n\nexport default SysAdminImportUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  roleOptions: PropTypes.array.isRequired,\n  currentRole: PropTypes.string.isRequired,\n  onRoleChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserRoleEditor extends React.Component {\n\n  translateRoles = (role) => {\n    switch (role) {\n      case 'default':\n        return gettext('Default');\n      case 'guest':\n        return gettext('Guest');\n      default:\n        return role;\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.roleOptions}\n        currentOption={this.props.currentRole}\n        onOptionChanged={this.props.onRoleChanged}\n        translateOption={this.translateRoles}\n      />\n    );\n  }\n}\n\nSysAdminUserRoleEditor.propTypes = propTypes;\n\nexport default SysAdminUserRoleEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass SysAdminAddUserDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isPasswordVisible: false,\n      password: '',\n      passwordAgain: '',\n      email: '',\n      name: '',\n      role: 'default',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (email.trim() &&\n      password.trim() &&\n      passwordAgain.trim()) {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({isPasswordVisible: !this.state.isPasswordVisible});\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  }\n\n  generatePassword = () => {\n    let val = Utils.generatePassword(8);\n    this.setState({\n      password: val,\n      passwordAgain: val\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    });\n  }\n\n  updateRole = (role) => {\n    this.setState({\n      role: role\n    });\n  }\n\n  handleSubmit = () => {\n    const { email, password, passwordAgain, name, role } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    let data = {\n      email: email.trim(),\n      name: name.trim(),\n      password: password.trim()\n    };\n    if (this.props.showRole) {\n      data.role = role;\n    }\n    this.props.addUser(data);\n    this.toggle();\n  }\n\n  render() {\n    const { dialogTitle, showRole } = this.props;\n    const {\n      errorMsg, isPasswordVisible,\n      email, name, role, password, passwordAgain,\n      isSubmitBtnActive\n    } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{dialogTitle || gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Email')}</Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Name(optional)')}</Label>\n              <Input type=\"text\" value={name} onChange={this.inputName} />\n            </FormGroup>\n            {showRole &&\n            <FormGroup>\n              <Label>\n                {gettext('Role')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('You can also add a user as a guest, who will not be allowed to create libraries and groups.')}></span>\n              </Label>\n              <SysAdminUserRoleEditor\n                isTextMode={false}\n                isEditIconShow={false}\n                currentRole={role}\n                roleOptions={this.props.availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            </FormGroup>\n            }\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <InputGroup>\n                <Input autoComplete=\"new-password\" type={isPasswordVisible ? 'text' : 'password'} value={password || ''} onChange={this.inputPassword} />\n                <InputGroupAddon addonType=\"append\">\n                  <Button className=\"mt-0\" onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n                  <Button className=\"mt-0\" onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                </InputGroupAddon>\n              </InputGroup>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type={isPasswordVisible ? 'text' : 'password'} value={passwordAgain || ''} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddUserDialog.propTypes = propTypes;\n\nexport default SysAdminAddUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport UserSelect from '../../user-select';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addAdminInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminBatchAddAdminDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: null,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n handleSelectChange = (options) => {\n   this.setState({\n     options: options,\n     isSubmitBtnActive: options.length > 0\n   });\n }\n\n handleSubmit = () => {\n   this.props.addAdminInBatch(this.state.options.map(item => item.email));\n   this.toggle();\n }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Admin')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            isMulti={true}\n            className=\"reviewer-select\"\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminBatchAddAdminDialog.propTypes = propTypes;\n\nexport default SysAdminBatchAddAdminDialog;\n","class SysAdminUser {\n  constructor(object) {\n    this.email = object.email;\n    this.name = object.name;\n    this.contact_email = object.contact_email;\n    this.login_id = object.login_id;\n    this.last_login = object.last_login;\n    this.last_access_time = object.last_access_time;\n    this.create_time = object.create_time;\n    this.is_active = object.is_active;\n    this.is_staff = object.is_staff;\n    this.reference_id = object.reference_id;\n    this.department = object.department;\n    this.quota_total = object.quota_total;\n    this.quota_usage = object.quota_usage;\n    this.role = object.role;\n    this.institution = object.institution;\n    if (object.org_id) {\n      this.org_id = object.org_id;\n    }\n    if (object.org_name) {\n      this.org_name = object.org_name;\n    }\n    this.isSelected = false;\n  }\n}\n\nexport default SysAdminUser;\n","\nclass SysAdminAdminUser {\n  constructor(object) {\n    this.email = object.email;\n    this.name = object.name;\n    this.contact_email = object.contact_email;\n    this.login_id = object.login_id;\n    this.last_login = object.last_login;\n    this.last_access_time = object.last_access_time;\n    this.create_time = object.create_time;\n    this.is_active = object.is_active;\n    this.is_staff = object.is_staff;\n    this.quota_total = object.quota_total;\n    this.quota_usage = object.quota_usage;\n    this.admin_role = object.admin_role;\n    this.isSelected = false;\n  }\n}\n\nexport default SysAdminAdminUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired\n};\n\nclass Search extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      value: e.target.value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    const value = this.state.value.trim();\n    if (!value) {\n      return false;\n    }\n    this.props.submit(value);\n  }\n\n  render() {\n    return (\n      <div className=\"input-icon\">\n        <i className=\"d-flex input-icon-addon fas fa-search\"></i>\n        <input\n          type=\"text\"\n          className=\"form-control search-input h-6 mr-1\"\n          style={{width: '17rem'}}\n          placeholder={this.props.placeholder}\n          value={this.state.value}\n          onChange={this.handleInputChange}\n          onKeyPress={this.handleKeyPress}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = propTypes;\n\nexport default Search;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext, haveLDAP, isDefaultAdmin } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'database', urlPart: 'users', text: gettext('Database')}\n    ];\n    if (haveLDAP) {\n      this.navItems.push(\n        {name: 'ldap', urlPart: 'users/ldap', text: gettext('LDAP')},\n        {name: 'ldap-imported', urlPart: 'users/ldap-imported', text: gettext('LDAP(imported)')}\n      );\n    }\n    if (isDefaultAdmin) {\n      this.navItems.push(\n        {name: 'admin', urlPart: 'users/admins', text: gettext('Admin')}\n      );\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  statusOptions: PropTypes.array.isRequired,\n  currentStatus: PropTypes.string.isRequired,\n  onStatusChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserStatusEditor extends React.Component {\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.statusOptions}\n        currentOption={this.props.currentStatus}\n        onOptionChanged={this.props.onStatusChanged}\n        translateOption={this.translateStatus}\n      />\n    );\n  }\n}\n\nSysAdminUserStatusEditor.propTypes = propTypes;\n\nexport default SysAdminUserStatusEditor;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, username, gettext, multiInstitution, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUserStatusEditor from '../../../components/select-editor/sysadmin-user-status-editor';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\nimport SelectEditor from '../../../components/select-editor/select-editor';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\n\nconst { availableRoles, availableAdminRoles, institutions } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  sortByQuotaUsage = (e) => {\n    e.preventDefault();\n    this.props.sortByQuotaUsage();\n  }\n\n  render() {\n    const {\n      isAdmin, loading, errorMsg, items, isAllUsersSelected,\n      curPerPage, hasNextPage, currentPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n\n\n      let columns = [];\n\n      let sortIcon;\n      if (sortBy == '') {\n        // initial sort icon\n        sortIcon = <span className=\"fas fa-sort\"></span>;\n      } else {\n        sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      }\n      const spaceText = gettext('Space Used');\n      const spaceEl =\n        sortBy != undefined ? // only offer 'sort' for 'DB' & 'LDAPImported' users\n        <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByQuotaUsage}>{spaceText} {sortIcon}</a> :\n          spaceText;\n      const colSpaceText = <Fragment>{spaceEl}{` / ${gettext('Quota')}`}</Fragment>;\n\n      const colNameText = `${gettext('Name')} / ${gettext('Contact Email')}`;\n      const colCreatedText = `${gettext('Created At')} / ${gettext('Last Login')} / ${gettext('Last Access')}`;\n      if (isPro) {\n        columns.push(\n          {width: '20%', text: colNameText},\n          {width: '15%', text: gettext('Status')},\n          {width: '15%', text: gettext('Role')}\n        );\n      } else {\n        columns.push(\n          {width: '30%', text: colNameText},\n          {width: '20%', text: gettext('Status')}\n        );\n      }\n      if (multiInstitution && !isAdmin) {\n        columns.push(\n          {width: '14%', text: colSpaceText},\n          {width: '14%', text: gettext('Institution')},\n          {width: '14%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      } else {\n        columns.push(\n          {width: '20%', text: colSpaceText},\n          {width: '22%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      }\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"pl-2\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.toggleSelectAllUsers} checked={isAllUsersSelected} />\n                </th>\n                {columns.map((item, index) => {\n                  return <th width={item.width} key={index}>{item.text}</th>;\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  updateUser={this.props.updateUser}\n                  deleteUser={this.props.deleteUser}\n                  updateAdminRole={this.props.updateAdminRole}\n                  revokeAdmin={this.props.revokeAdmin}\n                  onUserSelected={this.props.onUserSelected}\n                  isAdmin={this.props.isAdmin}\n                  isLDAPImported={this.props.isLDAPImported}\n                />);\n              })}\n            </tbody>\n          </table>\n          {(!this.props.isAdmin && !this.props.isSearchResult) &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteUserDialogOpen: false,\n      isResetUserPasswordDialogOpen: false,\n      isRevokeAdminDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleDeleteUserDialog = () => {\n    this.setState({isDeleteUserDialogOpen: !this.state.isDeleteUserDialogOpen});\n  }\n\n  toggleResetUserPasswordDialog = () => {\n    this.setState({isResetUserPasswordDialogOpen: !this.state.isResetUserPasswordDialogOpen});\n  }\n\n  toggleRevokeAdminDialog = () => {\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  }\n\n  onUserSelected = () => {\n    this.props.onUserSelected(this.props.item);\n  }\n\n  updateStatus= (value) => {\n    const isActive = value == 'active';\n    if (isActive) {\n      toaster.notify(gettext('It may take some time, please wait.'));\n    }\n    this.props.updateUser(this.props.item.email, 'is_active', isActive);\n  }\n\n  updateRole = (value) => {\n    this.props.updateUser(this.props.item.email, 'role', value);\n  }\n\n  updateAdminRole = (value) => {\n    this.props.updateAdminRole(this.props.item.email, value);\n  }\n\n  translateAdminRole = (role) => {\n    switch (role) {\n      case 'default_admin':\n        return gettext('Default Admin');\n      case 'system_admin':\n        return gettext('System Admin');\n      case 'daily_admin':\n        return gettext('Daily Admin');\n      case 'audit_admin':\n        return gettext('Audit Admin');\n      default:\n        return role;\n    }\n  }\n\n  updateInstitution = (value) => {\n    this.props.updateUser(this.props.item.email, 'institution', value);\n  }\n\n  translateInstitution = (inst) => {\n    return inst;\n  }\n\n  updateQuota = (value) => {\n    this.props.updateUser(this.props.item.email, 'quota_total', value);\n  }\n\n  deleteUser = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteUser(this.props.item.email);\n  }\n\n  resetPassword = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = () => {\n    const { item } = this.props;\n    this.props.revokeAdmin(item.email, item.name);\n  }\n\n  getMenuOperations = () => {\n    const {\n      isAdmin, isLDAPImported,\n      isSearchResult, item\n    } = this.props;\n    let list = ['Delete'];\n    if (!isLDAPImported ||\n      (isSearchResult && item.source == 'db')) {\n      list.push('Reset Password');\n    }\n    if (isAdmin) {\n      list = ['Revoke Admin'];\n    }\n    return list;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteUserDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetUserPasswordDialog();\n        break;\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const { item, isAdmin } = this.props;\n    const {\n      isOpIconShown,\n      isSetQuotaDialogOpen,\n      isDeleteUserDialogOpen,\n      isResetUserPasswordDialogOpen,\n      isRevokeAdminDialogOpen\n    } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    const resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td className=\"pl-2\">\n            <input type=\"checkbox\" className=\"vam\" onChange={this.onUserSelected} checked={item.isSelected} />\n          </td>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n            {item.contact_email &&\n              <Fragment>\n                <br />\n                {item.contact_email}\n              </Fragment>}\n            {item.org_id &&\n              <Fragment>\n                <br />\n                <Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>({item.org_name})</Link>\n              </Fragment>\n            }\n          </td>\n          <td>\n            <SysAdminUserStatusEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.is_active ? 'active' : 'inactive'}\n              statusOptions={['active', 'inactive']}\n              onStatusChanged={this.updateStatus}\n            />\n          </td>\n          {isPro &&\n          <td>\n            {isAdmin ?\n              <SelectEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                options={availableAdminRoles}\n                currentOption={item.admin_role}\n                onOptionChanged={this.updateAdminRole}\n                translateOption={this.translateAdminRole}\n              /> :\n              <SysAdminUserRoleEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                currentRole={item.role}\n                roleOptions={availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            }\n          </td>\n          }\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n            <span\n              title={gettext('Edit')}\n              className={`fa fa-pencil-alt attr-action-icon ${isOpIconShown ? '' : 'invisible'}`}\n              onClick={this.toggleSetQuotaDialog}>\n            </span>\n          </td>\n          {(multiInstitution && !isAdmin) &&\n            <td>\n              <SelectEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown && institutions.length > 0}\n                options={institutions}\n                currentOption={item.institution}\n                onOptionChanged={this.updateInstitution}\n                translateOption={this.translateInstitution}\n              />\n            </td>\n          }\n          <td>\n            {`${item.create_time ? moment(item.create_time).format('YYYY-MM-DD HH:mm') : '--'} /`}\n            <br />\n            {`${item.last_login ? moment(item.last_login).fromNow() : '--'}`}\n            <br />\n            {`${item.last_access_time ? moment(item.last_access_time).fromNow() : '--'}`}\n          </td>\n          <td>\n            {(item.email != username && isOpIconShown) &&\n            <OpMenu\n              operations={this.getMenuOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleSetQuotaDialog}\n            updateQuota={this.updateQuota}\n          />\n        }\n        {isDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete User')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteUserDialog}\n          />\n        }\n        {isResetUserPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetUserPasswordDialog}\n          />\n        }\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminImportUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-import-user-dialog';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport SysAdminBatchAddAdminDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminUser from '../../../models/sysadmin-user';\nimport SysAdminAdminUser from '../../../models/sysadmin-admin-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UsersNav from './users-nav';\nimport Content from './users-content';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nconst propTypes = {\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool\n};\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isImportUserDialogOpen: false,\n      isAddUserDialogOpen: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false,\n      isBatchAddAdminDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    if (this.props.isAdmin) { // 'Admin' page\n      this.getUserList(); // no pagination\n    } else {\n      let urlParams = (new URL(window.location)).searchParams;\n      const {\n        currentPage, perPage,\n        sortBy = '',\n        sortOrder = 'asc'\n      } = this.state;\n      this.setState({\n        perPage: parseInt(urlParams.get('per_page') || perPage),\n        currentPage: parseInt(urlParams.get('page') || currentPage),\n        sortBy: urlParams.get('order_by') || sortBy,\n        sortOrder: urlParams.get('direction') || sortOrder\n      }, () => {\n        this.getUsersListByPage(this.state.currentPage);\n      });\n    }\n  }\n\n  toggleImportUserDialog = () => {\n    this.setState({isImportUserDialogOpen: !this.state.isImportUserDialogOpen});\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  }\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  }\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  }\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  }\n\n  getUserList = () => {\n  // get admins\n    seafileAPI.sysAdminListAdmins().then(res => {\n      let users = res.data.admin_user_list.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const { isLDAPImported } = this.props;\n    seafileAPI.sysAdminListUsers(page, perPage, isLDAPImported, sortBy, sortOrder).then(res => {\n      let users = res.data.data.map(user => {return new SysAdminUser(user);});\n      this.setState({\n        userList: users,\n        loading: false,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortByQuotaUsage = () => {\n    this.setState({\n      sortBy: 'quota_usage',\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc',\n      currentPage: 1\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getUsersListByPage(currentPage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.map(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  importUserInBatch = (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminImportUserViaFile(file).then((res) => {\n      if (res.data.success.length) {\n        const users = res.data.success.map(item => {\n          if (item.institution == undefined) {\n            item.institution = '';\n          }\n          return new SysAdminUser(item);\n        });\n        this.setState({\n          userList: users.concat(this.state.userList)\n        });\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  addUser = (data) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    const { email, name, role, password } = data;\n    seafileAPI.sysAdminAddUser(email, name, role, password).then((res) => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({\n        userList: userList\n      });\n      toaster.success(res.data.add_user_tip);\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  }\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getOperationsForAll = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n\n    if (isAdmin) {\n      return <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchAddAdminDialog}>{gettext('Add Admin')}</Button>;\n    }\n\n    if (isLDAPImported) {\n      return <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>;\n    }\n\n    // 'database'\n    return (\n      <Fragment>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleImportUserDialog}>{gettext('Import Users')}</Button>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add User')}</Button>\n        <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>\n      </Fragment>\n    );\n  }\n\n  getCurrentNavItem = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n    let item = 'database';\n    if (isAdmin) {\n      item = 'admin';\n    } else if (isLDAPImported) {\n      item = 'ldap-imported';\n    }\n    return item;\n  }\n\n  toggleBatchAddAdminDialog = () => {\n    this.setState({isBatchAddAdminDialogOpen: !this.state.isBatchAddAdminDialogOpen});\n  }\n\n  addAdminInBatch = (emails) => {\n    seafileAPI.sysAdminAddAdminInBatch(emails).then(res => {\n      let users = res.data.success.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users.concat(this.state.userList)\n      });\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    if (this.props.isAdmin) {\n      return null;\n    }\n    // offer 'Search' for 'DB' & 'LDAPImported' users\n    return <Search\n      placeholder={gettext('Search users')}\n      submit={this.searchItems}\n    />;\n  }\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-users/?query=${encodeURIComponent(keyword)}`);\n  }\n\n  render() {\n    const { isAdmin, isLDAPImported } = this.props;\n    const {\n      hasUserSelected,\n      isImportUserDialogOpen,\n      isAddUserDialogOpen,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen,\n      isBatchAddAdminDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          {hasUserSelected ?\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n            : this.getOperationsForAll()\n          }\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem={this.getCurrentNavItem()} />\n            <div className=\"cur-view-content\">\n              <Content\n                isAdmin={isAdmin}\n                isLDAPImported={isLDAPImported}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortByQuotaUsage={this.sortByQuotaUsage}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getUsersListByPage}\n                updateUser={this.updateUser}\n                deleteUser={this.deleteUser}\n                updateAdminRole={this.updateAdminRole}\n                revokeAdmin={this.revokeAdmin}\n                onUserSelected={this.onUserSelected}\n                isAllUsersSelected={this.isAllUsersSelected}\n                toggleSelectAllUsers={this.toggleSelectAllUsers}\n              />\n            </div>\n          </div>\n        </div>\n        {isImportUserDialogOpen &&\n        <SysAdminImportUserDialog\n          toggle={this.toggleImportUserDialog}\n          importUserInBatch={this.importUserInBatch}\n        />\n        }\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            dialogTitle={gettext('Add User')}\n            showRole={isPro}\n            availableRoles={availableRoles}\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {isBatchAddAdminDialogOpen &&\n          <SysAdminBatchAddAdminDialog\n            addAdminInBatch={this.addAdminInBatch}\n            toggle={this.toggleBatchAddAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nUsers.propTypes = propTypes;\n\nexport default Users;\n","import React, { Component, Fragment } from 'react';\nimport Users from './users';\n\nclass AdminUsers extends Component {\n\n  render() {\n    return <Users isAdmin={true} {...this.props} />;\n  }\n}\n\nexport default AdminUsers;\n","import React, { Component, Fragment } from 'react';\nimport Users from './users';\n\nclass LDAPImportedUsers extends Component {\n\n  render() {\n    return <Users isLDAPImported={true} {...this.props} />;\n  }\n}\n\nexport default LDAPImportedUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport UsersNav from './users-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"40%\">{gettext('Email')}</th>\n                <th width=\"30%\">{gettext('Space Used')}{' / '}{gettext('Quota')}</th>\n                <th width=\"30%\">{gettext('Last Login')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { item } = this.props;\n    let email = '<span class=\"op-target\">' + Utils.HTMLescape(item.email) + '</span>';\n    return (\n      <Fragment>\n        <tr>\n          <td><UserLink email={item.email} name={item.email} /></td>\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n          </td>\n          <td>\n            {item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: {},\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUsersListByPage(this.state.currentPage);\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLDAPUsers(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        userList: res.data.ldap_user_list,\n        hasNextPage: res.data.has_next_page,\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem=\"ldap\" />\n            <div className=\"cur-view-content\">\n              <Content\n                resetPerPage={this.resetPerPage}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getUsersListByPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Users;\n","import React, { Component, Fragment } from 'react';\nimport { Button, Form, FormGroup, Input, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport Paginator from '../../../components/paginator';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './users-content';\n\n\nclass SearchUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      pageInfo: {\n        has_next_page: false,\n        current_page: 1,\n      },\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      query: params.get('query') || '',\n      currentPage: parseInt(params.get('page') || currentPage),\n      perPage: parseInt(params.get('per_page') || perPage)\n    }, () => {this.getItems(this.state.currentPage);});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  }\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  }\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  }\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  }\n\n  getItems = (page) => {\n    seafileAPI.sysAdminSearchUsers(this.state.query.trim(), page, this.state.perPage).then(res => {\n      this.setState({\n        userList: res.data.user_list,\n        loading: false,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItems(1);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.map(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  }\n\n  getPreviousPageList = () => {\n    this.getItems(this.state.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.getItems(this.state.pageInfo.current_page + 1);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getItems();\n      }\n    }\n  }\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    const {\n      hasUserSelected,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        {hasUserSelected ?\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n          </MainPanelTopbar> :\n          <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Users')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Users')}</h4>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" value={query} placeholder={gettext('Search users')} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  isLDAPImported={false}\n                  isAdmin={false}\n                  isSearchResult={true}\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.userList}\n                  updateUser={this.updateUser}\n                  deleteUser={this.deleteUser}\n                  updateAdminRole={this.updateAdminRole}\n                  revokeAdmin={this.revokeAdmin}\n                  onUserSelected={this.onUserSelected}\n                  isAllUsersSelected={this.isAllUsersSelected}\n                  toggleSelectAllUsers={this.toggleSelectAllUsers}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {this.state.pageInfo &&\n        <Paginator\n          gotoPreviousPage={this.getPreviousPageList}\n          gotoNextPage={this.getNextPageList}\n          currentPage={this.state.pageInfo.current_page}\n          hasNextPage={this.state.pageInfo.has_next_page}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchUsers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  uploadOrDownload: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  updateUploadDownloadRateLimit: PropTypes.func.isRequired\n};\n\nclass SysAdminSetUploadDownloadRateLimitDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      rateLimit: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleRateLimitChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      rateLimit: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateUploadDownloadRateLimit(this.props.uploadOrDownload, this.state.rateLimit.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { rateLimit, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{this.props.uploadOrDownload == \"upload\" ? gettext('Set Upload Rate Limit') : gettext('Set Download Rate Limit')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={rateLimit}\n                  onKeyPress={this.handleKeyPress}\n                  onChange={this.handleRateLimitChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>kB/s</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetUploadDownloadRateLimitDialog.propTypes = propTypes;\n\nexport default SysAdminSetUploadDownloadRateLimitDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  dialogTitle: PropTypes.string.isRequired,\n  updateValue: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass UpdateUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const  { dialogTitle, toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{this.props.dialogTitle}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={this.state.value}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUpdateUser.propTypes = propTypes;\n\nexport default UpdateUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: '', text: gettext('Info')},\n      {name: 'owned-repos', urlPart: 'owned-libraries', text: gettext('Owned Libraries')},\n      {name: 'shared-repos', urlPart: 'shared-libraries', text: gettext('Shared Libraries')},\n      {name: 'links', urlPart: 'shared-links', text: gettext('Shared Links')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')}\n    ];\n  }\n\n  render() {\n    const { currentItem, email, userName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/users/`}>{gettext('Users')}</Link> / {userName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/users/${encodeURIComponent(email)}/${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { FormGroup, Label, Input, Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminSetUploadDownloadRateLimitDialog from '../../../components/dialog/sysadmin-dialog/set-upload-download-rate-limit';\nimport SysAdminUpdateUserDialog from '../../../components/dialog/sysadmin-dialog/update-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { twoFactorAuthEnabled } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentKey: '',\n      dialogTitle: '',\n      isSetQuotaDialogOpen: false,\n      isSetUserUploadRateLimitDialogOpen: false,\n      isSetUserDownloadRateLimitDialogOpen: false,\n      isUpdateUserDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleSetUserUploadRateLimitDialog = () => {\n    this.setState({isSetUserUploadRateLimitDialogOpen: !this.state.isSetUserUploadRateLimitDialogOpen});\n  }\n\n  toggleSetUserDownloadRateLimitDialog = () => {\n    this.setState({isSetUserDownloadRateLimitDialogOpen: !this.state.isSetUserDownloadRateLimitDialogOpen});\n  }\n\n  updateQuota = (value) => {\n    this.props.updateUser('quota_total', value);\n  }\n\n  updateUploadDownloadRateLimit = (uploadOrDownload, value) => {\n    if (uploadOrDownload == 'upload'){\n        this.props.updateUser('upload_rate_limit', value);\n    }\n    if (uploadOrDownload == 'download'){\n        this.props.updateUser('download_rate_limit', value);\n    }\n  }\n\n  toggleDialog = (key, dialogTitle) => {\n    this.setState({\n      currentKey: key,\n      dialogTitle: dialogTitle,\n      isUpdateUserDialogOpen: !this.state.isUpdateUserDialogOpen\n    });\n  }\n\n  toggleSetNameDialog = () => {\n    this.toggleDialog('name', gettext('Set Name'));\n  }\n\n  toggleSetUserLoginIDDialog = () => {\n    this.toggleDialog('login_id', gettext('Set Login ID'));\n  }\n\n toggleSetUserComtactEmailDialog = () => {\n   this.toggleDialog('contact_email', gettext('Set Contact Email'));\n }\n\n  toggleSetUserReferenceIDDialog = () => {\n    this.toggleDialog('reference_id', gettext('Set Reference ID'));\n  }\n\n  updateValue = (value) => {\n    this.props.updateUser(this.state.currentKey, value);\n  }\n\n  toggleUpdateUserDialog = () => {\n    this.toggleDialog('', '');\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, userInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const user = this.props.userInfo;\n      const {\n        currentKey, dialogTitle,\n        isSetQuotaDialogOpen, isUpdateUserDialogOpen,\n        isSetUserUploadRateLimitDialogOpen, isSetUserDownloadRateLimitDialogOpen\n      } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Avatar')}</dt>\n            <dd className=\"info-item-content\">\n              <img src={user.avatar_url} alt={user.name} width=\"80\" className=\"rounded\"  />\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Email')}</dt>\n            <dd className=\"info-item-content\">{user.email}</dd>\n\n            {user.org_name &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Organization')}</dt>\n                <dd className=\"info-item-content\">{user.org_name}</dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {user.name || '--'}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Login ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.login_id || '--'}\n              {this.showEditIcon(this.toggleSetUserLoginIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Contact Email')}</dt>\n            <dd className=\"info-item-content\">\n              {user.contact_email || '--'}\n              {this.showEditIcon(this.toggleSetUserComtactEmailDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Reference ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.reference_id|| '--'}\n              {this.showEditIcon(this.toggleSetUserReferenceIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used / Quota')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(user.quota_usage)} / ${user.quota_total > 0 ? Utils.bytesToSize(user.quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n            {isPro &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Upload Rate Limit')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.upload_rate_limit > 0 ? user.upload_rate_limit + ' kB/s' : '--'}\n                  {this.showEditIcon(this.toggleSetUserUploadRateLimitDialog)}\n                </dd>\n                <dt className=\"info-item-heading\">{gettext('Download Rate Limit')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.download_rate_limit > 0 ? user.download_rate_limit + ' kB/s' : '--'}\n                  {this.showEditIcon(this.toggleSetUserDownloadRateLimitDialog)}\n                </dd>\n              </Fragment>\n            }\n            {twoFactorAuthEnabled &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Two-Factor Authentication')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.has_default_device ?\n                    <FormGroup>\n                      <p className=\"mb-1\">{gettext('Status: enabled')}</p>\n                      <Button onClick={this.props.disable2FA}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup> :\n                    <FormGroup>\n                      <Button disabled={true}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup>\n                  }\n                  <FormGroup check>\n                    <Label check>\n                      <Input type=\"checkbox\" checked={user.is_force_2fa} onChange={this.props.toggleForce2fa} />\n                      <span>{gettext('Force Two-Factor Authentication')}</span>\n                    </Label>\n                  </FormGroup>\n                </dd>\n              </Fragment>\n            }\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetQuotaDialog\n            updateQuota={this.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {(isPro && isSetUserUploadRateLimitDialogOpen) &&\n          <SysAdminSetUploadDownloadRateLimitDialog\n            uploadOrDownload=\"upload\"\n            updateUploadDownloadRateLimit={this.updateUploadDownloadRateLimit}\n            toggle={this.toggleSetUserUploadRateLimitDialog}\n          />\n          }\n          {(isPro && isSetUserDownloadRateLimitDialogOpen) &&\n          <SysAdminSetUploadDownloadRateLimitDialog\n            uploadOrDownload=\"download\"\n            updateUploadDownloadRateLimit={this.updateUploadDownloadRateLimit}\n            toggle={this.toggleSetUserDownloadRateLimitDialog}\n          />\n          }\n          {isUpdateUserDialogOpen &&\n          <SysAdminUpdateUserDialog\n            dialogTitle={dialogTitle}\n            value={user[currentKey]}\n            updateValue={this.updateValue}\n            toggleDialog={this.toggleUpdateUserDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass User extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    // avatar size: 160\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email, 160).then((res) => {\n      this.setState({\n        loading: false,\n        userInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateUser = (key, value) => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo[key]= res.data[key];\n      this.setState({\n        userInfo: userInfo\n      });\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  disable2FA = () => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminDeleteTwoFactorAuth(email).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.has_default_device = false;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleForce2fa = (e) => {\n    const email = this.state.userInfo.email;\n    const checked = e.target.checked;\n    seafileAPI.sysAdminSetForceTwoFactorAuth(email, checked).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.is_force_2fa = checked;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { userInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"info\" email={this.props.email} userName={userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                userInfo={this.state.userInfo}\n                updateUser={this.updateUser}\n                disable2FA={this.disable2FA}\n                toggleForce2fa={this.toggleForce2fa}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default User;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Last Update')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteRepo={this.props.deleteRepo}\n                  transferRepo={this.props.transferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.id);\n  }\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  transferRepo = (owner) => {\n    this.props.transferRepo(this.props.item.id, owner.email);\n    this.toggleTransferDialog();\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n    }\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n        <TransferDialog\n          itemName={item.name}\n          submit={this.transferRepo}\n          canTransferToDept={false}\n          toggleDialog={this.toggleTransferDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListReposByOwner(email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repos\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferRepo = (repoID, email) => {\n    seafileAPI.sysAdminTransferRepo(repoID, email).then((res) => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"owned-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n                transferRepo={this.transferRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Repos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Share From')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  }\n\n  getOwnerLink = () => {\n    let link;\n    const { item } = this.props;\n    const index = item.owner_email.indexOf('@seafile_group');\n    if (index == -1) {\n      link = <UserLink email={item.owner_email} name={item.owner_name} />;\n    } else {\n      const groupID = item.owner_email.substring(0, index);\n      link = <Link to={`${siteRoot}sys/departments/${groupID}/`}>{item.owner_name}</Link>;\n    }\n    return link;\n  }\n\n  render() {\n    const { item } = this.props;\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n    return (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{this.getOwnerLink()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modify).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListShareInRepos(email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"shared-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Repos;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport LinkDialog from '../../../components/dialog/share-admin-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No shared links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('Visits')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isLinkDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({isLinkDialogOpen: !this.state.isLinkDialogOpen});\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'View':\n        translateResult = gettext('View');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'View':\n        this.toggleLinkDialog();\n        break;\n      case 'Delete':\n        this.deleteItem();\n        break;\n    }\n  }\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  }\n\n  getIconUrl = () => {\n    const { item } = this.props;\n    let url;\n    if (item.type == 'upload') {\n      url = Utils.getFolderIconUrl();\n    } else { // share link\n      if (item.is_dir) {\n        url = Utils.getFolderIconUrl();\n      } else {\n        url = Utils.getFileIconUrl(item.obj_name);\n      }\n    }\n    return url;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={this.getIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>{item.obj_name == '/' ? item.repo_name : item.obj_name}</td>\n          {item.type == 'upload' ?\n            <Fragment>\n              <td></td>\n              <td>{gettext('Upload')}</td>\n            </Fragment> :\n            <Fragment>\n              <td>{item.is_dir ? null : Utils.bytesToSize(item.size)}</td>\n              <td>{gettext('Download')}</td>\n            </Fragment>\n          }\n          <td>{item.view_cnt}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['View', 'Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isLinkDialogOpen &&\n          <LinkDialog\n            link={item.link}\n            toggleDialog={this.toggleLinkDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Links extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      uploadLinkItems: [],\n      shareLinkItems: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n\n    seafileAPI.sysAdminListShareLinksByUser(email).then(res => {\n      const items = res.data.share_link_list.map(item => {\n        item.type = 'download';\n        return item;\n      });\n      items.sort((a, b) => {\n        return a.is_dir ? -1 : 1;\n      });\n      this.setState({\n        loading: false,\n        shareLinkItems: items\n      });\n    });\n    seafileAPI.sysAdminListUploadLinksByUser(email).then(res => {\n      const items = res.data.upload_link_list.map(item => {\n        item.type = 'upload';\n        return item;\n      });\n      this.setState({\n        loading: false,\n        uploadLinkItems: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    const type = item.type;\n    const token = item.token;\n    if (type == 'download') {\n      seafileAPI.sysAdminDeleteShareLink(token).then(res => {\n        let items = this.state.shareLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          shareLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.sysAdminDeleteUploadLink(token).then(res => {\n        let items = this.state.uploadLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          uploadLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { shareLinkItems, uploadLinkItems } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"links\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={[].concat(uploadLinkItems, shareLinkItems)}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Links;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"35%\">{gettext('Created At')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n\n    const url = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={url}>{item.name}</Link></td>\n          <td>{this.getRoleText()}</td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm')}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListGroupsJoinedByUser(email).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"groups\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\n\nconst propTypes = {\n  createRepo: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass SysAdminCreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      ownerEmail: '',\n      errMessage: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      repoName: value,\n      isSubmitBtnActive: value.trim()\n    });\n  }\n\n  handleSubmit = () => {\n    const { repoName, ownerEmail } = this.state;\n    this.props.createRepo(repoName.trim(), ownerEmail);\n    this.toggle();\n  }\n\n  handleSelectChange = (option) => {\n    // option can be null\n    this.setState({\n      ownerEmail: option ? option.email : ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"userSelect\">\n                {gettext('Owner')}\n                <span className=\"small text-secondary\">{gettext('(If left blank, owner will be admin)')}</span>\n              </Label>\n              <UserSelect\n                id=\"userSelect\"\n                isMulti={false}\n                className=\"reviewer-select\"\n                placeholder={gettext('Select a user')}\n                onSelectChange={this.handleSelectChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminCreateRepoDialog.propTypes = propTypes;\n\nexport default SysAdminCreateRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all-libraries', text: gettext('All')},\n      {name: 'system', urlPart: 'system-library', text: gettext('System')},\n      {name: 'trash', urlPart: 'trash-libraries', text: gettext('Trash')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.user_email);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.user_name}</td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass UserList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <UserItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass SysAdminShareToUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n    this.options = [];\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'user').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({sharedItems: res.data});\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToUser = () => {\n    let users = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        users[i] = this.state.selectedOption[i].email;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'user' , users, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let newItems = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(newItems),\n        selectedOption: null,\n        permission: 'rw',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch(error => {\n      if (error.response) {\n        let message = gettext('Library can not be shared to owner.');\n        let errMessage = [];\n        errMessage.push(message);\n        this.setState({\n          errorMsg: errMessage,\n          selectedOption: null,\n        });\n      }\n    });\n  }\n\n  deleteShareItem = (useremail) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'user', useremail).then(res => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter( item => { return item.user_email !== useremail; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let userEmail = item.user_email;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'user', userEmail, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateSharedItems = (item, permission) => {\n    let username = item.user_name;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemUsername = sharedItem.user_name;\n      if (username === sharedItemUsername) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    let { sharedItems } = this.state;\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('User')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleSelectChange}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToUser}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.email) {\n                  errMessage = item.email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('User')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <UserList\n              items={sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToUser.propTypes = propTypes;\n\nexport default SysAdminShareToUser;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport Select from 'react-select';\nimport { isPro, gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.group_id);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className='name'>{item.group_name}</td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass GroupList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <GroupItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass SysAdminShareToGroup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listSharedGroups();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = [];\n      for (let i = 0 ; i < res.data.length; i++) {\n        let obj = {};\n        obj.value = res.data[i].name;\n        obj.id = res.data[i].id;\n        obj.label = res.data[i].name;\n        this.options.push(obj);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listSharedGroups = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'group').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({\n          sharedItems: res.data\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToGroup = () => {\n    let groups = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        groups[i] = this.state.selectedOption[i].id;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'group', groups, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let items = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(items),\n        selectedOption: null,\n        permission: 'rw',\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteShareItem = (groupID) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'group', groupID).then(() => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter(item => { return item.group_id !== groupID; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let groupID = item.group_id;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'group', groupID, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateSharedItems = (item, permission) => {\n    let groupID = item.group_id;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('Group')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  isMulti\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select groups...')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToGroup}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_name + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('Group')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <GroupList\n              items={this.state.sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToGroup.propTypes = propTypes;\n\nexport default SysAdminShareToGroup;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SysAdminShareToUser from './sysadmin-share-to-user';\nimport SysAdminShareToGroup from './sysadmin-share-to-group';\nimport '../../../css/share-link-dialog.css';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  itemPath: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool\n};\n\nclass SysAdminShareDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: this.getInitialActiveTab(),\n      isRepoOwner: false\n    };\n  }\n\n  getInitialActiveTab = () => {\n    return 'shareToUser';\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderDirContent = () => {\n    let activeTab = this.state.activeTab;\n    const { enableDirPrivateShare, isGroupOwnedRepo } = this.props;\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            {enableDirPrivateShare &&\n              <Fragment>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')}>\n                    {gettext('Share to user')}\n                  </NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')}>\n                    {gettext('Share to group')}\n                  </NavLink>\n                </NavItem>\n              </Fragment>\n            }\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            {enableDirPrivateShare &&\n              <Fragment>\n                <TabPane tabId=\"shareToUser\">\n                  <SysAdminShareToUser itemType={'library'} isGroupOwnedRepo={isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner}/>\n                </TabPane>\n                <TabPane tabId=\"shareToGroup\">\n                  <SysAdminShareToGroup itemType={'library'} isGroupOwnedRepo={isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner}/>\n                </TabPane>\n              </Fragment>\n            }\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '720px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>{gettext('Share')} <span className=\"op-target\" title={this.props.itemName}>{this.props.itemName}</span></ModalHeader>\n          <ModalBody className=\"share-dialog-content\">\n            {this.renderDirContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nSysAdminShareDialog.propTypes = propTypes;\n\nexport default SysAdminShareDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass SysAdminLibHistorySettingDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.sysAdminGetRepoHistorySetting(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.sysAdminUpdateRepoHistorySetting(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminLibHistorySettingDialog.propTypes = propTypes;\n\nexport default SysAdminLibHistorySettingDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport DeleteRepoDialog from '../../../components/dialog/delete-repo-dialog';\nimport SysAdminShareDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-share-dialog';\nimport SysAdminLibHistorySettingDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog';\nimport UserLink from '../user-link';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  sortByFileCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('file_count');\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    this.props.sortItems('size');\n  }\n\n  render() {\n    // offer 'sort' only for 'all repos'\n    const { loading, errorMsg, items, pageInfo, curPerPage, sortBy } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className=\"fas fa-caret-down\"></span>;\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">\n                  {sortBy != undefined ?\n                    <Fragment>\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByFileCount}>{gettext('Files')} {sortBy == 'file_count' ? sortIcon : initialSortIcon}</a>{' / '}\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' ? sortIcon : initialSortIcon}</a>\n                    </Fragment> :\n                    gettext('Files') / gettext('Size')\n                  }\n                </th>\n                <th width=\"32%\">ID</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onTransferRepo={this.props.onTransferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isShareDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false,\n      isHistorySettingDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.sysAdminDeleteRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      this.setState({\n        isDeleteDialogOpen: false,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  onTransferRepo = (owner) => {\n    seafileAPI.sysAdminTransferRepo(this.props.repo.id, owner.email).then((res) => {\n      this.props.onTransferRepo(res.data);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.toggleTransferDialog();\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Share':\n        this.toggleShareDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      case 'History Setting':\n        this.toggleHistorySettingDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShareDialogOpen: !this.state.isShareDialogOpen});\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  toggleHistorySettingDialog = () => {\n    this.setState({isHistorySettingDialogOpen: !this.state.isHistorySettingDialogOpen});\n  }\n\n  renderRepoName = () => {\n    const { repo } = this.props;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  getOperations = () => {\n    const { repo } = this.props;\n    let operations = ['Delete', 'Transfer'];\n    if (!repo.encrypted) {\n      operations.push('Share');\n    }\n    operations.push('History Setting');\n    return operations;\n  }\n\n  render () {\n    const { repo } = this.props;\n    const {\n      isOpIconShown,\n      isShareDialogOpen,\n      isDeleteDialogOpen,\n      isTransferDialogOpen,\n      isHistorySettingDialogOpen\n    } = this.state;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    const index = repo.owner_email.indexOf('@seafile_group');\n    let isGroupOwnedRepo = index != -1;\n    let departmentID;\n    if (isGroupOwnedRepo) {\n      departmentID = repo.owner_email.substring(0, index);\n    }\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{`${repo.file_count} / ${Utils.bytesToSize(repo.size)}`}</td>\n          <td>{repo.id}</td>\n          <td>\n            {isGroupOwnedRepo ?\n              <Link to={`${siteRoot}sys/departments/${departmentID}/`}>{repo.owner_name}</Link> :\n              <UserLink email={repo.owner_email} name={repo.owner_name} />\n            }\n          </td>\n          <td>\n            {(!isGroupOwnedRepo && isOpIconShown) &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isShareDialogOpen &&\n          <ModalPortal>\n            <SysAdminShareDialog\n              itemName={repo.name}\n              itemPath={'/'}\n              repoID={repo.id}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        }\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        }\n        {isTransferDialogOpen &&\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.name}\n              submit={this.onTransferRepo}\n              canTransferToDept={false}\n              toggleDialog={this.toggleTransferDialog}\n            />\n          </ModalPortal>\n        }\n        {isHistorySettingDialogOpen &&\n          <ModalPortal>\n            <SysAdminLibHistorySettingDialog\n              repoID={repo.id}\n              itemName={repo.name}\n              toggleDialog={this.toggleHistorySettingDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport ReposNav from './repos-nav';\nimport Content from './repos';\n\nclass AllRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      sortBy: '',\n      isCreateRepoDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage, sortBy } = this.state;\n    this.setState({\n      sortBy: urlParams.get('order_by') || sortBy,\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateRepoDialog = () => {\n    this.setState({isCreateRepoDialogOpen: !this.state.isCreateRepoDialogOpen});\n  }\n\n  getReposByPage = (page) => {\n    const { perPage, sortBy } = this.state;\n    seafileAPI.sysAdminListAllRepos(page, perPage, sortBy).then((res) => {\n      this.setState({\n        loading: false,\n        repos: res.data.repos,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getReposByPage(currentPage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  }\n\n  createRepo = (repoName, Owner) => {\n    seafileAPI.sysAdminCreateRepo(repoName, Owner).then(res => {\n      this.state.repos.unshift(res.data);\n      this.setState({\n        repos: this.state.repos\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by name or ID')}\n      submit={this.searchRepos}\n    />;\n  }\n\n  searchRepos = (repoNameOrID) => {\n    navigate(`${siteRoot}sys/search-libraries/?name_or_id=${encodeURIComponent(repoNameOrID)}`);\n  }\n\n  render() {\n    let { isCreateRepoDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleCreateRepoDialog}>\n            <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n          </Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                sortBy={this.state.sortBy}\n                sortItems={this.sortItems}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                onDeleteRepo={this.onDeleteRepo}\n                onTransferRepo={this.onTransferRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateRepoDialogOpen &&\n        <SysAdminCreateRepoDialog\n          createRepo={this.createRepo}\n          toggleDialog={this.toggleCreateRepoDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default AllRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ReposNav from './repos-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"33%\">{gettext('Name')}</th>\n                <th width=\"34%\">ID</th>\n                <th width=\"33%\">{gettext('Description')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item}/>);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return table;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const item = this.props.item;\n    return (\n      <tr>\n        <td><Link to={`${siteRoot}sys/libraries/${item.id}/`}>{item.name}</Link></td>\n        <td>{item.id}</td>\n        <td>{item.description}</td>\n      </tr>\n    );\n  }\n}\n\nclass SystemRepo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSystemRepoInfo().then((res) => {\n      let items = [];\n      items.push(res.data);\n      this.setState({\n        items: items,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"system\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SystemRepo;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UserLink from '../user-link';\nimport ReposNav from './repos-nav';\n\nconst { trashReposExpireDays } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No deleted libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <p className=\"mt-4 small text-secondary\">{gettext('Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.').replace('{trashReposExpireDays}', trashReposExpireDays)}</p>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"43%\">{gettext('Name')}</th>\n                <th width=\"27%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Deleted Time')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onRestoreRepo={this.props.onRestoreRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isDeleteRepoDialogOpen: false,\n      isRestoreRepoDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onDeleteRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminDeleteTrashRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRestoreRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminRestoreTrashRepo(repo.id).then((res) => {\n      this.props.onRestoreRepo(repo);\n      let message = gettext('Successfully restored the library.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleDeleteRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen});\n  }\n\n  toggleRestoreRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRestoreRepoDialogOpen: !this.state.isRestoreRepoDialogOpen});\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Restore':\n        translateResult = gettext('Restore');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Restore':\n        this.toggleRestoreRepoDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteRepoDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  render () {\n    const { repo } = this.props;\n    const { isOpIconShown, isDeleteRepoDialogOpen, isRestoreRepoDialogOpen } = this.state;\n    const iconUrl = Utils.getLibIconUrl(repo);\n    const iconTitle = Utils.getLibIconTitle(repo);\n    const repoName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.name) + '</span>';\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{repo.name}</td>\n          <td>\n            {repo.owner.indexOf('@seafile_group') == -1 ?\n              <UserLink email={repo.owner} name={repo.owner_name} /> :\n              repo.group_name}\n          </td>\n          <td>{moment(repo.delete_time).fromNow()}</td>\n          <td>\n            {isOpIconShown && (\n              <OpMenu\n                operations={['Restore', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            )}\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete Library')}\n              message={gettext('Are you sure you want to delete {placeholder} completely?').replace('{placeholder}', repoName)}\n              executeOperation={this.onDeleteRepo}\n              confirmBtnText={gettext('Delete')}\n              toggleDialog={this.toggleDeleteRepoDialog}\n            />\n          </ModalPortal>\n        }\n        {isRestoreRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Restore Library')}\n              message={gettext('Are you sure you want to restore {placeholder}?').replace('{placeholder}', repoName)}\n              executeOperation={this.onRestoreRepo}\n              confirmBtnText={gettext('Restore')}\n              toggleDialog={this.toggleRestoreRepoDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass TrashRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      isCleanTrashDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCleanTrashDialog = () => {\n    this.setState({isCleanTrashDialogOpen: !this.state.isCleanTrashDialogOpen});\n  }\n\n  getReposByPage = (page) => {\n    let perPage = this.state.perPage;\n    seafileAPI.sysAdminListTrashRepos(page, perPage).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onRestoreRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  cleanTrash = () => {\n    seafileAPI.sysAdminCleanTrashRepos().then(res => {\n      this.setState({repos: []});\n      toaster.success(gettext('Successfully cleared trash.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by owner')}\n      submit={this.searchRepos}\n    />;\n  }\n\n  searchRepos = (owner) => {\n    seafileAPI.sysAdminSearchTrashRepos(owner).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: null,\n        errorMsg: '', // necessary!\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    const { isCleanTrashDialogOpen } = this.state;\n\n    // enable 'search': <MainPanelTopbar search={this.getSearch()}>\n    return (\n      <Fragment>\n        {this.state.repos.length ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.toggleCleanTrashDialog}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"trash\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                pageInfo={this.state.pageInfo}\n                onDeleteRepo={this.onDeleteRepo}\n                onRestoreRepo={this.onRestoreRepo}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCleanTrashDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clear Trash')}\n            message={gettext('Are you sure you want to clear trash?')}\n            executeOperation={this.cleanTrash}\n            confirmBtnText={gettext('Clear')}\n            toggleDialog={this.toggleCleanTrashDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TrashRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './repos';\n\n\nclass SearchRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      repos: []\n    };\n  }\n\n  componentDidMount() {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name_or_id') || ''\n    }, this.getRepos);\n  }\n\n  getRepos = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchRepos(name).then((res) => {\n      this.setState({\n        loading: false,\n        errorMsg: '',\n        repos: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  searchRepos = () => {\n    this.getRepos();\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.searchRepos();\n      }\n    }\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Libraries')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name or ID.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name or ID')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.searchRepos}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.repos}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchRepos;\n","class Dirent {\n  constructor(obj) {\n    this.name = obj.obj_name;\n    this.mtime = obj.last_update;\n    this.size = obj.file_size;\n    this.is_file = obj.is_file;\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nexport default Dirent;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { isSystemRepo, currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        {isSystemRepo ?\n          <a href={`${siteRoot}sys/system-library/`}>{gettext('System')}</a> :\n          <a href={`${siteRoot}sys/all-libraries/`}>{gettext('All')}</a>\n        }\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport Loading from '../../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  deleteDirent = (e) => {\n    e.preventDefault();\n    this.props.deleteDirent(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown, isDeleteDialogOpen } = this.state;\n    let { dirent, fromSystemRepo } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && fromSystemRepo &&\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.deleteDirent}></a>\n            }\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{dirent.size}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport CreateFolderDialog from '../../../components/dialog/create-folder-dialog';\nimport Dirent from '../../../models/system-admin/dirent';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport DirPathBar from './dir-path-bar';\nimport DirContent from './dir-content';\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      isSystemRepo: false,\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  toggleNewFolderDialog = () => {\n    this.setState({isNewFolderDialogOpen: !this.state.isNewFolderDialogOpen});\n  }\n\n  createNewFolder = (path) => {\n    let folderName = Utils.getFileName(path);\n    seafileAPI.sysAdminCreateSysRepoFolder(this.props.repoID, this.state.path, folderName).then(res => {\n      let new_dirent = new Dirent(res.data);\n      let direntList = this.state.direntList;\n      direntList.unshift(new_dirent);\n      this.setState({\n        direntList: direntList\n      });\n      this.toggleNewFolderDialog();\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoDirents(repoID, path).then(res => {\n      const { is_system_library: isSystemRepo, repo_name: repoName, dirent_list } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        isSystemRepo: isSystemRepo,\n        direntList: direntList,\n        path: path,\n      }, () => {\n        let url = siteRoot + 'sys/libraries/' + repoID + '/' + encodeURIComponent(this.state.repoName) + Utils.encodePath(path);\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminDeleteRepoDirent(this.props.repoID, path).then(res => {\n      toaster.success(gettext('Successfully deleted 1 item.'));\n      let direntList = this.state.direntList.filter(item => {\n        return item.name != dirent.name;\n      });\n      this.setState({\n        direntList: direntList\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminGetRepoFileDownloadURL(this.props.repoID, path).then(res => {\n      location.href = res.data.download_url;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    seafileAPI.sydAdminGetSysRepoItemUploadURL(path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data.upload_link, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'is_file': true,\n          'obj_name': fileObj.name,\n          'file_size': Utils.bytesToSize(fileObj.size),\n          'last_update': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.state.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, isSystemRepo, path,\n      isNewFolderDialogOpen } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        {isSystemRepo ?\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n              <Button className=\"operation-item\" onClick={this.toggleNewFolderDialog}>{gettext('New Folder')}</Button>\n            </Fragment>\n          </MainPanelTopbar> : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                isSystemRepo={isSystemRepo}\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                fromSystemRepo={isSystemRepo}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n        {isNewFolderDialogOpen &&\n          <CreateFolderDialog\n            parentPath={path}\n            checkDuplicatedName={this.checkDuplicatedName}\n            onAddFolder={this.createNewFolder}\n            addFolderCancel={this.toggleNewFolderDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\n\nconst propTypes = {\n  createGroup: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminCreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      ownerEmail: '',\n      errMessage: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({groupName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let groupName = this.state.groupName.trim();\n    this.props.createGroup(groupName, this.state.ownerEmail);\n  }\n\n  handleSelectChange = (option) => {\n    // option can be null\n    this.setState({\n      ownerEmail: option ? option.email : ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"groupName\">{gettext('Name')}</Label>\n              <Input\n                id=\"groupName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.groupName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n              <Label className=\"mt-2\">\n                {gettext('Owner')}\n                <span className=\"small text-secondary\">{gettext('(If left blank, owner will be admin)')}</span>\n              </Label>\n              <UserSelect\n                isMulti={false}\n                className=\"reviewer-select\"\n                placeholder={gettext('Select a user')}\n                onSelectChange={this.handleSelectChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminCreateGroupDialog.propTypes = propTypes;\n\nexport default SysAdminCreateGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\nconst propTypes = {\n  groupName: PropTypes.string.isRequired,\n  transferGroup: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminTransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      submitBtnDisabled: true\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      submitBtnDisabled: option == null\n    });\n  }\n\n  submit = () => {\n    const receiver = this.state.selectedOption.email;\n    this.props.transferGroup(receiver);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const { submitBtnDisabled } = this.state;\n    const groupName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.groupName) +'</span>';\n    const msg = gettext('Transfer Group {placeholder} to').replace('{placeholder}', groupName);\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: msg}}></span>\n        </ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Select a user')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={submitBtnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminTransferGroupDialog.propTypes = propTypes;\n\nexport default SysAdminTransferGroupDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport EmptyTip from '../../../components/empty-tip';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminTransferGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"40%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteGroup={this.props.deleteGroup}\n                  transferGroup={this.props.transferGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTransferDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  deleteGroup = () => {\n    this.props.deleteGroup(this.props.item.id);\n  }\n\n  transferGroup = (receiver) => {\n    this.props.transferGroup(this.props.item.id, receiver);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    let groupName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', groupName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={groupUrl}>{item.name}</Link></td>\n          <td>\n            {item.owner == 'system admin' ?\n              '--' :\n              <UserLink email={item.owner} name={item.owner_name} />\n            }\n          </td>\n          <td>\n            <span title={moment(item.created_at).format('llll')}>{moment(item.created_at).fromNow()}</span>\n          </td>\n          <td>\n            {(isOpIconShown && item.owner != 'system admin') &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n          <SysAdminTransferGroupDialog\n            groupName={item.name}\n            transferGroup={this.transferGroup}\n            toggleDialog={this.toggleTransferDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-group-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './groups-content';\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: {},\n      perPage: 25,\n      isCreateGroupDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getGroupListByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateGroupDialog = () => {\n    this.setState({isCreateGroupDialogOpen: !this.state.isCreateGroupDialogOpen});\n  }\n\n  getGroupListByPage = (page) => {\n    seafileAPI.sysAdminListAllGroups(page, this.state.perPage).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.groups,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getGroupListByPage(1);\n    });\n  }\n\n  createGroup = (groupName, OnwerEmail) => {\n    seafileAPI.sysAdminCreateNewGroup(groupName, OnwerEmail).then(res => {\n      let newGroupList = this.state.groupList;\n      newGroupList.unshift(res.data);\n      this.setState({\n        groupList: newGroupList\n      });\n      this.toggleCreateGroupDialog();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search groups by name')}\n      submit={this.searchGroups}\n    />;\n  }\n\n  searchGroups = (name) => {\n    navigate(`${siteRoot}sys/search-groups/?name=${encodeURIComponent(name)}`);\n  }\n\n  render() {\n    let { isCreateGroupDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Fragment>\n            <Button className=\"operation-item\" onClick={this.toggleCreateGroupDialog}>{gettext('New Group')}</Button>\n            <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/groupadmin/export-excel/`}>{gettext('Export Excel')}</a>\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                pageInfo={this.state.pageInfo}\n                deleteGroup={this.deleteGroup}\n                transferGroup={this.transferGroup}\n                getListByPage={this.getGroupListByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateGroupDialogOpen &&\n          <SysAdminCreateGroupDialog\n            createGroup={this.createGroup}\n            toggleDialog={this.toggleCreateGroupDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './groups-content';\n\nclass SearchGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: null\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name') || ''\n    }, this.getGroups);\n  }\n\n  getGroups = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchGroups(name).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getGroups();\n      }\n    }\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Groups')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getGroups}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.groupList}\n                  deleteGroup={this.deleteGroup}\n                  transferGroup={this.transferGroup}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchGroups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired,\n  groupID: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'repos', urlPart: 'groups/' + this.props.groupID + '/libraries', text: gettext('Libraries')},\n      {name: 'members', urlPart: 'groups/' + this.props.groupID + '/members', text: gettext('Members')}\n    ];\n  }\n\n  render() {\n    const { groupName, currentItem } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/groups/`}>{gettext('Groups')}</Link> / {groupName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Shared By')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  unshareRepo={this.props.unshareRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isUnshareRepoDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleUnshareRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isUnshareRepoDialogOpen: !this.state.isUnshareRepoDialogOpen});\n  }\n\n  unshareRepo = () => {\n    const { item } = this.props;\n    this.props.unshareRepo(item.repo_id, item.name);\n    this.toggleUnshareRepoDialog();\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    repo.id = item.repo_id;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <a href={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</a>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  }\n\n  render() {\n    let { isOpIconShown, isUnshareRepoDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n\n    let repoName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to unshare {placeholder} ?').replace('{placeholder}', repoName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>\n            <UserLink email={item.shared_by} name={item.shared_by_name} />\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unshare')} onClick={this.toggleUnshareRepoDialog}></a>\n          </td>\n        </tr>\n        {isUnshareRepoDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Unshare Library')}\n            message={dialogMsg}\n            executeOperation={this.unshareRepo}\n            confirmBtnText={gettext('Unshare')}\n            toggleDialog={this.toggleUnshareRepoDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass GroupRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListGroupRepos(this.props.groupID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.libraries,\n        groupName: res.data.group_name\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  unshareRepo = (repoID, repoName) => {\n    seafileAPI.sysAdminUnshareRepoFromGroup(this.props.groupID, repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({\n        repoList: newRepoList\n      });\n      const msg = gettext('Successfully unshared library {placeholder}')\n        .replace('{placeholder}', repoName);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n              currentItem=\"repos\"\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                unshareRepo={this.unshareRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default GroupRepos;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addMembers: PropTypes.func.isRequired\n};\n\nclass SysAdminGroupAddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOptions: null,\n      isSubmitBtnDisabled: true\n    };\n  }\n\n  handleSelectChange = (options) => {\n    this.setState({\n      selectedOptions: options,\n      isSubmitBtnDisabled: !options.length\n    });\n  }\n\n  addMembers = () => {\n    let emails = this.state.selectedOptions.map(item => item.email);\n    this.props.addMembers(emails);\n    this.props.toggle();\n  }\n\n  render() {\n    const { isSubmitBtnDisabled } = this.state;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"reviewer-select\"\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.addMembers} disabled={isSubmitBtnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminGroupAddMemberDialog.propTypes = propTypes;\n\nexport default SysAdminGroupAddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  roleOptions: PropTypes.array.isRequired,\n  currentRole: PropTypes.string.isRequired,\n  onRoleChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminGroupRoleEditor extends React.Component {\n\n  translateRoles = (role) => {\n    switch (role) {\n      case 'Member':\n        return gettext('Member');\n      case 'Admin':\n        return gettext('Admin');\n      default:\n        return role;\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.roleOptions}\n        currentOption={this.props.currentRole}\n        onOptionChanged={this.props.onRoleChanged}\n        translateOption={this.translateRoles}\n      />\n    );\n  }\n}\n\nSysAdminGroupRoleEditor.propTypes = propTypes;\n\nexport default SysAdminGroupRoleEditor;","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminGroupAddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog';\nimport SysAdminGroupRoleEditor from '../../../components/select-editor/sysadmin-group-role-editor';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"55%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  removeMember={this.props.removeMember}\n                  updateMemberRole={this.props.updateMemberRole}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  removeMember = () => {\n    const { item } = this.props;\n    this.props.removeMember(item.email, item.name);\n    this.toggleDeleteDialog();\n  }\n\n  updateMemberRole = (role) => {\n    this.props.updateMemberRole(this.props.item.email, role);\n  }\n\n  render() {\n    let { isOpIconShown, isDeleteDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to remove {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={item.avatar_url} alt=\"\" className=\"rounded-circle\" width=\"24\" /></td>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            {item.role == 'Owner' ?\n              gettext('Owner') :\n              <SysAdminGroupRoleEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                roleOptions={['Member', 'Admin']}\n                currentRole={item.role}\n                onRoleChanged={this.updateMemberRole}\n              />\n            }\n          </td>\n          <td>\n            {item.role != 'Owner' &&\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} onClick={this.toggleDeleteDialog}></a>\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Remove Member')}\n            message={dialogMsg}\n            executeOperation={this.removeMember}\n            confirmBtnText={gettext('Remove')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass GroupMembers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      memberList: [],\n      pageInfo: {},\n      currentPage: 1,\n      perPage: 25,\n      isAddMemberDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      perPage: parseInt(urlParams.get('per_page') || perPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListGroupMembers(this.props.groupID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        memberList: res.data.members,\n        groupName: res.data.group_name,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  toggleAddMemgerDialog = () => {\n    this.setState({isAddMemberDialogOpen: !this.state.isAddMemberDialogOpen});\n  }\n\n  addMembers = (emails) => {\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then(res => {\n      let newMemberList = res.data.success;\n      if (newMemberList.length) {\n        this.setState({\n          memberList: newMemberList.concat(this.state.memberList)\n        });\n        newMemberList.map(item => {\n          const msg = gettext('Successfully added {email_placeholder}')\n            .replace('{email_placeholder}', item.email);\n          toaster.success(msg);\n        });\n      }\n      res.data.failed.map(item => {\n        const msg = gettext('Failed to add {email_placeholder}: {error_msg_placeholder}')\n          .replace('{email_placeholder}', item.email)\n          .replace('{error_msg_placeholder}', item.error_msg);\n        toaster.danger(msg, {duration: 3});\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  removeMember = (email, name) => {\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, email).then(res => {\n      let newRepoList = this.state.memberList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n      toaster.success(gettext('Successfully removed {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMemberRole = (email, role) => {\n    let isAdmin = role == 'Admin';\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, email, isAdmin).then(res => {\n      let newRepoList = this.state.memberList.map(item => {\n        if (item.email == email) {\n          item.role = role;\n        }\n        return item;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { isAddMemberDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddMemgerDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              currentItem=\"members\"\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.memberList}\n                removeMember={this.removeMember}\n                updateMemberRole={this.updateMemberRole}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getListByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddMemberDialogOpen &&\n          <SysAdminGroupAddMemberDialog\n            addMembers={this.addMembers}\n            toggle={this.toggleAddMemgerDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default GroupMembers;\n","import React from 'react';\nimport '../../../css/org-department-item.css';\n\nclass Departments extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"h-100 org-departments\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Departments;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  parentGroupID: PropTypes.string,\n  toggle: PropTypes.func.isRequired,\n  onAddNewDepartment: PropTypes.func.isRequired\n};\n\nclass AddDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      let parentGroup = -1;\n      if (this.props.parentGroupID) {\n        parentGroup = this.props.parentGroupID;\n      }\n      seafileAPI.sysAdminAddNewDepartment(parentGroup, this.state.departName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onAddNewDepartment(res.data);\n      }).catch(error => {\n        let errorMsg = gettext(error.response.data.error_msg);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      departName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    let header = this.props.parentGroupID ? gettext('New Sub-department') : gettext('New Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.departName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddDepartDialog.propTypes = propTypes;\n\nexport default AddDepartDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  groupID: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n  name: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired\n};\n\nclass RenameDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departmentName: this.props.name,\n      errMessage: ''\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminRenameDepartment(this.props.groupID, this.state.departmentName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onDepartmentNameChanged(res.data);\n        toaster.success(gettext('Success'));\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departmentName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      departmentName: e.target.value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.select();\n  }\n\n  render() {\n    let header = gettext('Rename Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departmentName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departmentName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.departmentName}\n                onChange={this.handleChange}\n                innerRef={this.newInput}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRenameDepartmentDialog.propTypes = propTypes;\n\nexport default RenameDepartmentDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDeleteDepartment: PropTypes.func.isRequired\n};\n\nclass DeleteDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteDepart = () => {\n    this.props.toggle();\n    const { group } = this.props;\n    seafileAPI.sysAdminDeleteDepartment(group.id).then((res) => {\n      this.props.onDeleteDepartment(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { group } = this.props;\n\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(group.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Department')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: tipMessage}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteDepart}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteDepartmentDialog.propTypes = propTypes;\n\nexport default DeleteDepartmentDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.number.isRequired,\n  onSetQuota: PropTypes.func.isRequired,\n};\n\nclass SetGroupQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      errMessage: '',\n    };\n  }\n\n  setGroupQuota = () => {\n    const numberReg = /^[1-9]\\d*$/im;\n    let quota = this.state.quota;\n    if ((quota.length && numberReg.test(quota)) || quota == -2) {\n      this.setState({ errMessage: '' });\n      let newQuota = this.state.quota == -2 ? this.state.quota : this.state.quota * 1000000;\n      seafileAPI.sysAdminUpdateDepartmentQuota(this.props.groupID, newQuota).then((res) => {\n        this.props.toggle();\n        this.props.onSetQuota(res.data);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      const err = gettext('Quota is invalid.');\n      this.setState({ errMessage: err });\n    }\n  }\n\n  handleChange = (e) => {\n    const quota = e.target.value.trim();\n    this.setState({ quota: quota });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.setGroupQuota();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input\n              onKeyPress={this.handleKeyPress}\n              value={this.state.quota}\n              onChange={this.handleChange}\n              autoFocus={true}\n            />\n            <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n          </InputGroup>\n          <p className=\"tip\">\n            <br/><span>{gettext('An integer that is greater than 0 or equal to -2.')}</span><br/>\n            <span>{gettext('Tip: -2 means no limit.')}</span>\n          </p>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.setGroupQuota}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetGroupQuotaDialog.propTypes = propTypes;\n\nexport default SetGroupQuotaDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils.js';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport ModalPortal from '../../../components/modal-portal';\nimport RenameDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';\nimport DeleteDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog';\n\nconst GroupItemPropTypes = {\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  group: PropTypes.object.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired,\n  onDeleteDepartment: PropTypes.func.isRequired,\n  onSetDepartmentQuota: PropTypes.func.isRequired\n};\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isRenameDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Rename':\n        this.toggleRenameDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleRenameDialog = () => {\n    this.setState({\n      isRenameDialogOpen: !this.state.isRenameDialogOpen\n    });\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({\n      isDeleteDialogOpen: !this.state.isDeleteDialogOpen\n    });\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({\n      isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen\n    });\n  }\n\n  render() {\n    const { group } = this.props;\n    const { highlight, isOpIconShown, isRenameDialogOpen, isDeleteDialogOpen, isSetQuotaDialogOpen } = this.state;\n    const newHref = siteRoot+ 'sys/departments/' + group.id + '/';\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><Link to={newHref}>{group.name}</Link></td>\n          <td>{moment(group.created_at).fromNow()}</td>\n          <td>\n            {Utils.bytesToSize(group.quota)}{' '}\n            <span onClick={this.toggleSetQuotaDialog} title={gettext('Edit')} className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={['Rename', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen && (\n          <ModalPortal>\n            <DeleteDepartmentDialog\n              group={group}\n              onDeleteDepartment={this.props.onDeleteDepartment}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        )}\n        {isSetQuotaDialogOpen && (\n          <ModalPortal>\n            <SetGroupQuotaDialog\n              groupID={group.id}\n              onSetQuota={this.props.onSetDepartmentQuota}\n              toggle={this.toggleSetQuotaDialog}\n            />\n          </ModalPortal>\n        )}\n        {isRenameDialogOpen && (\n          <RenameDepartmentDialog\n            groupID={group.id}\n            name={group.name}\n            toggle={this.toggleRenameDialog}\n            onDepartmentNameChanged={this.props.onDepartmentNameChanged}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default GroupItem;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass DepartmentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: null,\n      groupID: '',\n      isShowAddDepartDialog: false,\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listDepartments();\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  listDepartments = () => {\n    seafileAPI.sysAdminListAllDepartments().then(res => {\n      this.setState({ groups: res.data.data });\n    });\n  }\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog });\n  }\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  }\n\n  onAddNewDepartment = (newDepartment) => {\n    const { groups } = this.state;\n    groups.unshift(newDepartment);\n    this.setState({\n      groups: groups\n    });\n  }\n\n  onDeleteDepartment = (id) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter((item) => item.id != id)\n    });\n  }\n\n  onSetDepartmentQuota = (target) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.map((item) => {\n        if (item.id == target.id) {\n          item.quota = target.quota;\n        }\n        return item;\n      })\n    });\n  }\n\n  render() {\n    const groups = this.state.groups;\n    const topbarChildren = (\n      <Fragment>\n        <button className='btn btn-secondary operation-item' title={gettext('New Department')} onClick={this.toggleAddDepartDialog}>{gettext('New Department')}\n        </button>\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onAddNewDepartment={this.onAddNewDepartment}\n              groupID={this.state.groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          {topbarChildren}\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">{gettext('Departments')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {groups && groups.length > 0 ?\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"40%\">{gettext('Name')}</th>\n                      <th width=\"25%\">{gettext('Created At')}</th>\n                      <th width=\"20%\">{gettext('Quota')}</th>\n                      <th width=\"15%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {groups.map((group, index) => {\n                      return(\n                        <Fragment key={group.id}>\n                          <GroupItem\n                            group={group}\n                            isItemFreezed={this.state.isItemFreezed}\n                            onFreezedItem={this.onFreezedItem}\n                            onUnfreezedItem={this.onUnfreezedItem}\n                            onDepartmentNameChanged={this.onDepartmentNameChanged}\n                            onDeleteDepartment={this.onDeleteDepartment}\n                            onSetDepartmentQuota={this.onSetDepartmentQuota}\n                          />\n                        </Fragment>\n                      );\n                    })}\n                  </tbody>\n                </table>\n                :\n                <p className=\"no-group\">{gettext('No departments')}</p>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DepartmentList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID:  PropTypes.string.isRequired,\n  onAddNewMembers: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const emails = this.state.selectedOption.map(item => item.email);\n    this.refs.orgSelect.clearSelect();\n    this.setState({ errMessage: [] });\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then((res) => {\n      this.setState({ selectedOption: null });\n      if (res.data.failed.length > 0) {\n        this.setState({ errMessage: res.data.failed[0].error_msg });\n      }\n      if (res.data.success.length > 0) {\n        this.props.onAddNewMembers(res.data.success);\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            ref=\"orgSelect\"\n            isMulti={true}\n            className='org-add-member-select'\n          />\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onAddNewRepo: PropTypes.func.isRequired\n};\n\nclass AddRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminAddRepoInDepartment(this.props.groupID, this.state.repoName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onAddNewRepo(res.data);\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.repoName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddRepoDialog.propTypes = propTypes;\n\nexport default AddRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport RenameDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-member-dialog';\nimport AddRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog';\nimport { siteRoot, gettext, lang } from '../../../utils/constants';\n\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentDetailPropTypes = {\n  groupID: PropTypes.string,\n  currentItem: PropTypes.string.isRequired,\n  onAddNewDepartment: PropTypes.func,\n  onAddNewMembers: PropTypes.func,\n  onAddNewRepo: PropTypes.func,\n  children: PropTypes.object\n};\n\nclass Department extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      ancestorGroups: [],\n      isShowAddDepartmentDialog: false,\n      isShowAddMemberDialog: false,\n      isShowRenameDepartmentDialog: false,\n      isShowAddRepoDialog: false\n    };\n\n    this.navItems = [\n      {name: 'subDepartments', urlPart: '/', text: gettext('Sub-departments')},\n      {name: 'members', urlPart: '/members/', text: gettext('Members')},\n      {name: 'repos', urlPart: '/libraries/', text: gettext('Libraries')}\n    ];\n  }\n\n  componentDidMount() {\n    const groupID = this.props.groupID;\n    this.getDepartmentInfo(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.getDepartmentInfo(nextProps.groupID);\n    }\n  }\n\n  getDepartmentInfo = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({\n        ancestorGroups: res.data.ancestor_groups,\n        groupName: res.data.name,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groupName: dept.name\n    });\n  }\n\n  toggleRenameDepartmentDialog = () => {\n    this.setState({ isShowRenameDepartmentDialog: !this.state.isShowRenameDepartmentDialog });\n  }\n\n  toggleAddRepoDialog = () => {\n    this.setState({ isShowAddRepoDialog: !this.state.isShowAddRepoDialog });\n  }\n\n  toggleAddMemberDialog = () => {\n    this.setState({ isShowAddMemberDialog: !this.state.isShowAddMemberDialog });\n  }\n\n  toggleAddDepartmentDialog = () => {\n    this.setState({ isShowAddDepartmentDialog: !this.state.isShowAddDepartmentDialog});\n  }\n\n  render() {\n    const { groupID, currentItem } = this.props;\n    const { groupName } = this.state;\n\n    const topBtn = 'btn btn-secondary operation-item';\n    const topbarChildren = (\n      <Fragment>\n        {groupID &&\n          <Fragment>\n            <button className={topBtn} title={gettext('Rename Department')} onClick={this.toggleRenameDepartmentDialog}>{gettext('Rename Department')}</button>\n            {currentItem == 'subDepartments' && <button className={topBtn} title={gettext('New Sub-department')} onClick={this.toggleAddDepartmentDialog}>{gettext('New Sub-department')}</button>}\n            {currentItem == 'members' && <button className={topBtn} title={gettext('Add Member')} onClick={this.toggleAddMemberDialog}>{gettext('Add Member')}</button>}\n            {currentItem == 'repos' && <button className={topBtn} onClick={this.toggleAddRepoDialog} title={gettext('New Library')}>{gettext('New Library')}</button>}\n          </Fragment>\n        }\n        {this.state.isShowRenameDepartmentDialog && (\n          <ModalPortal>\n            <RenameDepartmentDialog\n              groupID={groupID}\n              name={groupName}\n              toggle={this.toggleRenameDepartmentDialog}\n              onDepartmentNameChanged={this.onDepartmentNameChanged}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddMemberDialog && (\n          <ModalPortal>\n            <AddMemberDialog\n              toggle={this.toggleAddMemberDialog}\n              onAddNewMembers={this.props.onAddNewMembers}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddRepoDialog && (\n          <ModalPortal>\n            <AddRepoDialog\n              toggle={this.toggleAddRepoDialog}\n              onAddNewRepo={this.props.onAddNewRepo}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddDepartmentDialog && (\n          <ModalPortal>\n            <AddDepartmentDialog\n              onAddNewDepartment={this.props.onAddNewDepartment}\n              parentGroupID={groupID}\n              toggle={this.toggleAddDepartmentDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          {topbarChildren}\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">\n                  {groupID ?\n                    <Link to={siteRoot + 'sys/departments/'}>{gettext('Departments')}</Link>\n                    : <span>{gettext('Departments')}</span>\n                  }\n                  {this.state.ancestorGroups.map(ancestor => {\n                    let newHref = siteRoot + 'sys/departments/' + ancestor.id + '/';\n                    return <span key={ancestor.id}>{' / '}<Link to={newHref}>{ancestor.name}</Link></span>;\n                  })}\n                  {groupID && <span>{' / '}{groupName}</span>}\n                </h3>\n              </div>\n            </div>\n\n            <ul className=\"nav border-bottom mx-4\">\n              {this.navItems.map((item, index) => {\n                return (\n                  <li className=\"nav-item mr-2\" key={index}>\n                    <Link to={`${siteRoot}sys/departments/${groupID}${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n                  </li>\n                );\n              })}\n            </ul>\n            {this.props.children}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nDepartment.propTypes = DepartmentDetailPropTypes;\n\nexport default Department;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport Department from './department';\n\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst SubDepartmentsPropTypes = {\n  groupID: PropTypes.string\n};\n\nclass SubDepartments extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      groups: []\n    };\n  }\n\n  componentDidMount() {\n    this.listSubDepartments(this.props.groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listSubDepartments(nextProps.groupID);\n    }\n  }\n\n  listSubDepartments = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({groups: res.data.groups});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onSubDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onAddNewDepartment = (newDepartment) => {\n    const { groups } = this.state;\n    groups.unshift(newDepartment);\n    this.setState({\n      groups: groups\n    });\n  }\n\n  onDeleteDepartment = (id) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter(item => item.id != id)\n    });\n  }\n\n  onSetDepartmentQuota = (target) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.map((item) => {\n        if (item.id == target.id) {\n          item.quota = target.quota;\n        }\n        return item;\n      })\n    });\n  }\n\n  render() {\n    const { groups } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Department\n        groupID={groupID}\n        currentItem=\"subDepartments\"\n        onAddNewDepartment={this.onAddNewDepartment}\n      >\n        <div className=\"cur-view-content\">\n          {groups && groups.length > 0 ?\n            <table>\n              <thead>\n                <tr>\n                  <th width=\"40%\">{gettext('Name')}</th>\n                  <th width=\"25%\">{gettext('Created At')}</th>\n                  <th width=\"20%\">{gettext('Quota')}</th>\n                  <th width=\"15%\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {groups.map((group, index) => {\n                  return(\n                    <GroupItem\n                      key={group.id}\n                      isItemFreezed={this.state.isItemFreezed}\n                      onFreezedItem={this.onFreezedItem}\n                      onUnfreezedItem={this.onUnfreezedItem}\n                      onDepartmentNameChanged={this.onSubDepartmentNameChanged}\n                      group={group}\n                      onDeleteDepartment={this.onDeleteDepartment}\n                      onSetDepartmentQuota={this.onSetDepartmentQuota}\n                    />\n                  );\n                })}\n              </tbody>\n            </table>\n            : <p className=\"no-group\">{gettext('No sub-departments')}</p>\n          }\n        </div>\n      </Department>\n    );\n  }\n}\n\nSubDepartments.propTypes = SubDepartmentsPropTypes;\n\nexport default SubDepartments;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  member: PropTypes.object.isRequired,\n  groupID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass DeleteMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteMember = () => {\n    const userEmail = this.props.member.email;\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, userEmail).then((res) => {\n      if (res.data.success) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.member.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Member')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteMember}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteMemberDialog.propTypes = propTypes;\n\nexport default DeleteMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport RoleEditor from '../../../components/select-editor/role-editor';\nimport UserLink from '../user-link';\n\nconst MemberItemPropTypes = {\n  groupID: PropTypes.string.isRequired,\n  member: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onMemberChanged: PropTypes.func.isRequired,\n  showDeleteMemberDialog: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n};\n\nclass MemberItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showRoleMenu: false,\n    };\n    this.roles = ['Admin', 'Member'];\n  }\n\n  onMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: false });\n  }\n\n  toggleMemberRoleMenu = () => {\n    this.setState({ showRoleMenu: !this.state.showRoleMenu });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? true : false;\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, this.props.member.email, isAdmin).then((res) => {\n      this.props.onMemberChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.setState({\n      highlight: false\n    });\n  }\n\n  render() {\n    const member = this.props.member;\n    const highlight = this.state.highlight;\n    if (member.role === 'Owner') return null;\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={member.avatar_url} alt=\"member-header\" width=\"24\" className=\"avatar\"/></td>\n        <td><UserLink email={member.email} name={member.name} /></td>\n        <td>\n          <RoleEditor\n            isTextMode={true}\n            isEditIconShow={highlight}\n            currentRole={member.role}\n            roles={this.roles}\n            onRoleChanged={this.onChangeUserRole}\n            toggleItemFreezed={this.props.toggleItemFreezed}\n          />\n        </td>\n        {!this.props.isItemFreezed ?\n          <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteMemberDialog.bind(this, member)}>\n            <span className={`sf2-icon-x3 action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n          </td> : <td></td>\n        }\n      </tr>\n    );\n  }\n}\n\nMemberItem.propTypes = MemberItemPropTypes;\n\nexport default MemberItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport ModalPortal from '../../../components/modal-portal';\nimport DeleteMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport MemberItem from './member-item';\nimport Department from './department';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentMembersPropTypes = {\n  groupID: PropTypes.string,\n};\n\nclass DepartmentMembers extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      members: [],\n      membersErrorMsg: '',\n      currentPageInfo: {\n      },\n      currentPage: 1,\n      perPage: 25,\n      deletedMember: {},\n      showDeleteMemberDialog: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      const { groupID } = this.props;\n      this.listMembers(groupID, this.state.currentPage, this.state.perPage);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listMembers(nextProps.groupID, this.state.currentPage, this.state.perPage);\n    }\n  }\n\n  listMembers = (groupID, page, perPage) => {\n    seafileAPI.sysAdminListGroupMembers(groupID, page, perPage).then((res) => {\n      this.setState({\n        members: res.data.members,\n        currentPageInfo: res.data.page_info\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({membersErrorMsg: errMessage});\n    });\n  }\n\n  getPreviousPageList = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page - 1, this.state.perPage);\n  }\n\n  getNextPageList = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page + 1, this.state.perPage);\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.listMembers(this.props.groupID, 1, perPage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteMemberDialog: false,\n    });\n  }\n\n  onMemberChanged = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page, this.state.perPage);\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  }\n\n  showDeleteMemberDialog = (member) => {\n    this.setState({ showDeleteMemberDialog: true, deletedMember: member });\n  }\n\n  onAddNewMembers = (newMembers) => {\n    const { members } = this.state;\n    members.unshift(...newMembers);\n    this.setState({ members });\n  }\n\n  render() {\n    const { members, membersErrorMsg } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Fragment>\n        <Department\n          groupID={groupID}\n          currentItem=\"members\"\n          onAddNewMembers={this.onAddNewMembers}\n        >\n          <div className=\"cur-view-content\">\n            {membersErrorMsg ? <p className=\"error text-center\">{membersErrorMsg}</p> :\n              members.length == 0 ?\n                <p className=\"no-member\">{gettext('No members')}</p> :\n                <Fragment>\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"15%\">{gettext('Role')}</th>\n                        <th width=\"30%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {members.map((member, index) => {\n                        return (\n                          <Fragment key={index}>\n                            <MemberItem\n                              member={member}\n                              showDeleteMemberDialog={this.showDeleteMemberDialog}\n                              isItemFreezed={this.state.isItemFreezed}\n                              onMemberChanged={this.onMemberChanged}\n                              toggleItemFreezed={this.toggleItemFreezed}\n                              groupID={groupID}\n                            />\n                          </Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  {this.state.currentPageInfo &&\n                  <Paginator\n                    gotoPreviousPage={this.getPreviousPageList}\n                    gotoNextPage={this.getNextPageList}\n                    currentPage={this.state.currentPageInfo.current_page}\n                    hasNextPage={this.state.currentPageInfo.has_next_page}\n                    curPerPage={this.state.perPage}\n                    resetPerPage={this.resetPerPage}\n                  />\n                  }\n                </Fragment>\n            }\n          </div>\n        </Department>\n        {this.state.showDeleteMemberDialog && (\n          <ModalPortal>\n            <DeleteMemberDialog\n              toggle={this.toggleCancel}\n              onMemberChanged={this.onMemberChanged}\n              member={this.state.deletedMember}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDepartmentMembers.propTypes = DepartmentMembersPropTypes;\n\nexport default DepartmentMembers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nclass DeleteRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteRepo = () => {\n    seafileAPI.sysAdminDeleteRepoInDepartment(this.props.groupID, this.props.repo.repo_id).then((res) => {\n      if (res.data.success) {\n        this.props.onRepoChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { repo } = this.props;\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(repo.name || repo.repo_name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Library')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteRepo}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onRepoChanged: PropTypes.func.isRequired\n};\n\nDeleteRepoDialog.propTypes = propTypes;\n\nexport default DeleteRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils.js';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nconst RepoItemPropTypes = {\n  repo: PropTypes.object.isRequired,\n  showDeleteRepoDialog: PropTypes.func.isRequired\n};\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  }\n\n  render() {\n    const { repo } = this.props;\n    const repoName = repo.name || repo.repo_name;\n    const highlight = this.state.highlight;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} width=\"24\" alt={gettext('icon')}/></td>\n        { enableSysAdminViewRepo ?\n          <td><a href={`${siteRoot}sys/libraries/${repo.repo_id}/${encodeURIComponent(repoName)}/`}>{repoName}</a></td>\n          :\n          <td>{repoName}</td>\n        }\n        <td>{Utils.bytesToSize(repo.size)}</td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteRepoDialog.bind(this, repo)}>\n          <span className={`sf2-icon-delete action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoItem.propTypes = RepoItemPropTypes;\n\nexport default RepoItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport ModalPortal from '../../../components/modal-portal';\nimport DeleteRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport RepoItem from './repo-item';\nimport Department from './department';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentDetailPropTypes = {\n  groupID: PropTypes.string,\n};\n\nclass DepartmentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      deletedRepo: {},\n      showDeleteRepoDialog: false\n    };\n  }\n\n  componentDidMount() {\n    const { groupID } = this.props;\n    this.listGroupRepo(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listGroupRepo(nextProps.groupID);\n    }\n  }\n\n  listGroupRepo = (groupID) => {\n    seafileAPI.sysAdminListGroupRepos(groupID).then(res => {\n      this.setState({ repos: res.data.libraries });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteRepoDialog: false\n    });\n  }\n\n  onRepoChanged = () => {\n    this.listGroupRepo(this.props.groupID);\n  }\n\n  showDeleteRepoDialog = (repo) => {\n    this.setState({ showDeleteRepoDialog: true, deletedRepo: repo });\n  }\n\n  onAddNewRepo = (newRepo) => {\n    const { repos } = this.state;\n    repos.unshift(newRepo);\n    this.setState({ repos });\n  }\n\n  render() {\n    const { repos } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Fragment>\n        <Department groupID={groupID} currentItem=\"repos\" onAddNewRepo={this.onAddNewRepo}>\n          {repos.length > 0 ?\n            <div className=\"cur-view-content\">\n              <table>\n                <thead>\n                  <tr>\n                    <th width=\"5%\"></th>\n                    <th width=\"50%\">{gettext('Name')}</th>\n                    <th width=\"30%\">{gettext('Size')}</th>\n                    <th width=\"15%\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {repos.map((repo, index) => {\n                    return (\n                      <RepoItem key={index} repo={repo} showDeleteRepoDialog={this.showDeleteRepoDialog} />\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n            : <p className=\"no-libraty\">{gettext('No libraries')}</p>\n          }\n        </Department>\n        {this.state.showDeleteRepoDialog && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              toggle={this.toggleCancel}\n              onRepoChanged={this.onRepoChanged}\n              repo={this.state.deletedRepo}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDepartmentDetail.propTypes = DepartmentDetailPropTypes;\n\nexport default DepartmentDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'shareLinks', urlPart:'share-links', text: gettext('Share Links')},\n      {name: 'uploadLinks', urlPart:'upload-links', text: gettext('Upload Links')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage + 1);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    this.props.sortItems('ctime');\n  }\n\n  sortByCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('view_cnt');\n  }\n\n  render() {\n    const {\n      loading, errorMsg, items,\n      perPage, currentPage, hasNextPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n        </EmptyTip>\n      );\n\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Created At')} {sortBy == 'ctime' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"10%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByCount}>{gettext('Count')} {sortBy == 'view_cnt' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteShareLink={this.props.deleteShareLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteShareLink = () => {\n    this.props.deleteShareLink(this.props.item.token);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td>{item.obj_name}</td>\n        <td>{item.token}</td>\n        <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n        <td>{moment(item.ctime).fromNow()}</td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteShareLink}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass ShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      shareLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      sortBy: '',\n      sortOrder: 'asc'\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage, sortBy, sortOrder } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      sortBy: urlParams.get('order_by') || sortBy,\n      sortOrder: urlParams.get('direction') || sortOrder\n    }, () => {\n      this.getShareLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getShareLinksByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    seafileAPI.sysAdminListShareLinks(page, perPage, sortBy, sortOrder).then((res) => {\n      this.setState({\n        shareLinkList: res.data.share_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getShareLinksByPage(currentPage);\n    });\n  }\n\n  deleteShareLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteShareLink(linkToken).then(res => {\n      let newShareLinkList = this.state.shareLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({shareLinkList: newShareLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getShareLinksByPage(this.initPage));\n  }\n\n  render() {\n    let { shareLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />  \n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"shareLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={shareLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getShareLinksByPage={this.getShareLinksByPage}\n                resetPerPage={this.resetPerPage}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                deleteShareLink={this.deleteShareLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default ShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No upload links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{gettext('Count')}</th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteUploadLink={this.props.deleteUploadLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteUploadLink = () => {\n    this.props.deleteUploadLink(this.props.item.token);\n  }\n\n  renderExpiration = () => {\n    let item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>{item.path}</td>\n          <td>{item.token}</td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.view_cnt}</td>\n          <td>{this.renderExpiration()}</td>\n          <td>\n            <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteUploadLink}></a>\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass UploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      uploadLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUploadLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getUploadLinksByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAllUploadLinks(page, perPage).then((res) => {\n      this.setState({\n        uploadLinkList: res.data.upload_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteUploadLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteUploadLink(linkToken).then(res => {\n      let newUploadLinkList = this.state.uploadLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({uploadLinkList: newUploadLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getUploadLinksByPage(this.initPage));\n  }\n\n  render() {\n    let { uploadLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"uploadLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={uploadLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getUploadLinksByPage={this.getUploadLinksByPage}\n                resetPerPage={this.resetPerPage}\n                deleteUploadLink={this.deleteUploadLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UploadLinks;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addOrg: PropTypes.func.isRequired\n};\n\nclass SysAdminAddOrgDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      passwordAgain: '',\n      errorMsg: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name, email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (name.trim() !='' &&\n      email.trim() != '' &&\n      password.trim() != '' &&\n      passwordAgain.trim() != '') {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    }, this.checkSubmitBtnActive);\n  }\n\n  handleSubmit = () => {\n    let { name, email, password, passwordAgain } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    const data = {\n      orgName: name.trim(),\n      ownerEmail: email.trim(),\n      password: password.trim()\n    };\n    this.props.addOrg(data);\n    this.toggle();\n  }\n\n  render() {\n    const { errorMsg, password, passwordAgain, email, name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Organization')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Name')}</Label>\n              <Input value={name} onChange={this.inputName} />\n            </FormGroup>\n            <FormGroup>\n              <Label>\n                {gettext('Owner')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('Owner can use admin panel in an organization, must be a new account.')}></span>\n              </Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <Input type=\"password\" value={password} onChange={this.inputPassword} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type=\"password\" value={passwordAgain} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddOrgDialog.propTypes = propTypes;\n\nexport default SysAdminAddOrgDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport toaster from '../../../components/toast';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No organizations')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Creator')}</th>\n                <th width=\"20%\">{gettext('Role')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  updateRole={this.props.updateRole}\n                  deleteOrg={this.props.deleteOrg}\n                />);\n              })}\n            </tbody>\n          </table>\n          {this.props.currentPage &&\n          <Paginator\n            currentPage={this.props.currentPage}\n            hasNextPage={this.props.hasNextPage}\n            curPerPage={this.props.curPerPage}\n            resetPerPage={this.props.resetPerPage}\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false,\n      deleteDialogMsg: '',\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen}, () => {\n      if (this.state.isDeleteDialogOpen) {\n        seafileAPI.sysAdminGetOrg(this.props.item.org_id).then((res) => {\n          let orgName = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.org_name) + '</span>';\n          let userCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.users_count) + '</span>';\n          let repoCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.repos_count) + '</span>';\n          let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?')\n            .replace('{placeholder}', orgName) + '<br/>' +\n            gettext('{userCount} user(s) and {repoCount} libraries of this organization will also be deleted.')\n              .replace('{userCount}', userCount)\n              .replace('{repoCount}', repoCount);\n          this.setState({deleteDialogMsg: deleteDialogMsg});\n        }).catch(error => {\n          let errorMsg = Utils.getErrorMsg(error);\n          toaster.danger(errorMsg);\n        });\n      }\n    });\n  }\n\n  updateRole = (role) => {\n    this.props.updateRole(this.props.item.org_id, role);\n  }\n\n  deleteOrg = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteOrg(this.props.item.org_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, deleteDialogMsg } = this.state;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>{item.org_name}</Link></td>\n          <td>\n            <UserLink email={item.creator_email} name={item.creator_name} />\n          </td>\n          <td>\n            <SysAdminUserRoleEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentRole={item.role}\n              roleOptions={availableRoles}\n              onRoleChanged={this.updateRole}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota > 0 ? Utils.bytesToSize(item.quota) : '--'}`}</td>\n          <td>{moment(item.ctime).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Organization')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteOrg}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminAddOrgDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-org-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './orgs-content';\n\n\nclass Orgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgList: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false,\n      isAddOrgDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListOrgs(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organizations,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  }\n\n  toggleAddOrgDialog = () => {\n    this.setState({isAddOrgDialogOpen: !this.state.isAddOrgDialogOpen});\n  }\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addOrg = (data) => {\n    const { orgName, ownerEmail, password } = data;\n    seafileAPI.sysAdminAddOrg(orgName, ownerEmail, password).then(res => {\n      let orgList = this.state.orgList;\n      orgList.unshift(res.data);\n      this.setState({orgList: orgList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search organizations')}\n      submit={this.searchItems}\n    />;\n  }\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-organizations/?query=${encodeURIComponent(keyword)}`);\n  }\n\n  render() {\n    const { isAddOrgDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddOrgDialog}>{gettext('Add Organization')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.orgList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getItemsByPage}\n                updateRole={this.updateRole}\n                deleteOrg={this.deleteOrg}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddOrgDialogOpen &&\n          <SysAdminAddOrgDialog\n            addOrg={this.addOrg}\n            toggleDialog={this.toggleAddOrgDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Orgs;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './orgs-content';\n\n\nclass SearchOrgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      orgList: []\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      query: params.get('query') || ''\n    }, this.getItems);\n  }\n\n  getItems = () => {\n    seafileAPI.sysAdminSearchOrgs(this.state.query.trim()).then(res => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organization_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getItems();\n      }\n    }\n  }\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Organizations')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" id=\"name\" value={query} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.orgList}\n                  updateRole={this.updateRole}\n                  deleteOrg={this.deleteOrg}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchOrgs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateName: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgNameDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: this.props.name,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      name: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateName(this.state.name.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Name')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={name}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgNameDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgNameDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateValue: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgMaxUserNumberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { value, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set max number of members')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                className=\"form-control\"\n                value={value}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgMaxUserNumberDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgMaxUserNumberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'users', urlPart: 'users', text: gettext('Members')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')},\n      {name: 'repos', urlPart: 'libraries', text: gettext('Libraries')},\n      //{name: 'traffic', urlPart: 'traffic', text: gettext('traffic')},\n      //{name: 'settings', urlPart: 'settings', text: gettext('Settings')}\n    ];\n  }\n\n  render() {\n    const { currentItem, orgID, orgName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/organizations/`}>{gettext('Organizations')}</Link> / {orgName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/organizations/${orgID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetOrgQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminSetOrgNameDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog';\nimport SysAdminSetOrgMaxUserNumberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetQuotaDialogOpen: false,\n      isSetNameDialogOpen: false,\n      isSetMaxUserNumberDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleSetNameDialog = () => {\n    this.setState({isSetNameDialogOpen: !this.state.isSetNameDialogOpen});\n  }\n\n  toggleSetMaxUserNumberDialog = () => {\n    this.setState({isSetMaxUserNumberDialogOpen: !this.state.isSetMaxUserNumberDialogOpen});\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, orgInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const { org_name, users_count, max_user_number, groups_count, quota, quota_usage } = this.props.orgInfo;\n      const { isSetQuotaDialogOpen, isSetNameDialogOpen, isSetMaxUserNumberDialogOpen } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {org_name}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Number of members')}</dt>\n            <dd className=\"info-item-content\">{users_count}</dd>\n\n            {max_user_number &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Max number of members')}</dt>\n                <dd className=\"info-item-content\">\n                  {max_user_number}\n                  {this.showEditIcon(this.toggleSetMaxUserNumberDialog)}\n                </dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Number of groups')}</dt>\n            <dd className=\"info-item-content\">{groups_count}</dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(quota_usage)} / ${quota > 0 ? Utils.bytesToSize(quota) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetOrgQuotaDialog\n            updateQuota={this.props.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {isSetNameDialogOpen &&\n          <SysAdminSetOrgNameDialog\n            name={org_name}\n            updateName={this.props.updateName}\n            toggle={this.toggleSetNameDialog}\n          />\n          }\n          {isSetMaxUserNumberDialogOpen &&\n          <SysAdminSetOrgMaxUserNumberDialog\n            value={max_user_number}\n            updateValue={this.props.updateMaxUserNumber}\n            toggle={this.toggleSetMaxUserNumberDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass OrgInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        orgInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateQuota = (quota) => {\n    const data = {quota: quota};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        quota: res.data.quota\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set quota.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateName = (orgName) => {\n    const data = {orgName: orgName};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        org_name: res.data.org_name\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set name.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMaxUserNumber = (newValue) => {\n    const data = {maxUserNumber: newValue};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        max_user_number: res.data.max_user_number\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set max number of members.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { orgInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav currentItem=\"info\" orgID={this.props.orgID} orgName={orgInfo.org_name} />\n            <div className=\"cur-view-content\">\n              <Content\n                orgID={this.props.orgID}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                orgInfo={this.state.orgInfo}\n                updateQuota={this.updateQuota}\n                updateName={this.updateName}\n                updateMaxUserNumber={this.updateMaxUserNumber}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  statusOptions: PropTypes.array.isRequired,\n  currentStatus: PropTypes.string.isRequired,\n  onStatusChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserMembershipEditor extends React.Component {\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'is_org_staff':\n        return gettext('Admin');\n      case 'not_is_org_staff':\n        return gettext('Member');\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.statusOptions}\n        currentOption={this.props.currentStatus}\n        onOptionChanged={this.props.onStatusChanged}\n        translateOption={this.translateStatus}\n      />\n    );\n  }\n}\n\nSysAdminUserMembershipEditor.propTypes = propTypes;\n\nexport default SysAdminUserMembershipEditor;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, username } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport SysAdminUserStatusEditor from '../../../components/select-editor/sysadmin-user-status-editor';\nimport SysAdminUserMembershipEditor from '../../../components/select-editor/sysadmin-user-membership-editor';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"15%\">{gettext('Membership')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"25%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  updateStatus={this.props.updateStatus}\n                  updateMembership={this.props.updateMembership}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isResetPasswordDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetPasswordDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleResetPasswordDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen});\n  }\n\n  updateStatus= (statusValue) => {\n    this.props.updateStatus(this.props.item.email, statusValue);\n  }\n\n  updateMembership= (membershipValue) => {\n    this.props.updateMembership(this.props.item.email, membershipValue);\n  }\n\n  deleteUser = () => {\n    const { item } = this.props;\n    this.props.deleteUser(item.org_id, item.email);\n  }\n\n  resetPassword = () => {\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isResetPasswordDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    let resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            <SysAdminUserStatusEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.active ? 'active' : 'inactive'}\n              statusOptions={['active', 'inactive']}\n              onStatusChanged={this.updateStatus}\n            />\n          </td>\n          <td>\n            <SysAdminUserMembershipEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.is_org_staff ? 'is_org_staff' : 'not_is_org_staff'}\n              statusOptions={['is_org_staff', 'not_is_org_staff']}\n              onStatusChanged={this.updateMembership}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {(isOpIconShown && item.email != username) &&\n            <OpMenu\n              operations={['Delete', 'Reset Password']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Member')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isResetPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetPasswordDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgUsers(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.users\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  addUser = (newUserInfo) => {\n    const { email, name, password } = newUserInfo;\n    seafileAPI.sysAdminAddOrgUser(this.props.orgID, email, name, password).then(res => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (orgID, email) => {\n    seafileAPI.sysAdminDeleteOrgUser(orgID, email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateStatus = (email, statusValue) => {\n    const isActive = statusValue == 'active';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'active', isActive).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.active = res.data.active;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMembership = (email, membershipValue) => {\n    const isOrgStaff = membershipValue == 'is_org_staff';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'is_org_staff', isOrgStaff).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.is_org_staff = res.data.is_org_staff;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddUserDialogOpen, orgName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}> \n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"users\"\n              orgID={this.props.orgID}\n              orgName={orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                updateStatus={this.updateStatus}\n                updateMembership={this.updateMembership}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Creator')}</th>\n                <th width=\"30%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteGroup={this.props.deleteGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteGroup = () => {\n    this.toggleDeleteDialog();\n    this.props.deleteGroup(this.props.item.group_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.group_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.group_id}/libraries/` :\n      `${siteRoot}sys/departments/${item.group_id}/`;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><a href={groupUrl}>{item.group_name}</a></td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      groupList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgGroups(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.group_id != groupID;\n      });\n      this.setState({groupList: newGroupList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"groups\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                deleteGroup={this.deleteGroup}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgGroups;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"35%\">{gettext('ID')}</th>\n                <th width=\"20%\">{gettext('Owner')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteRepo={this.props.deleteRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.repo_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.repo_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{item.repo_name}</td>\n          <td>{item.repo_id}</td>\n          <td>\n            {!item.owner_email ?\n              '--' :\n              item.owner_email.indexOf('@seafile_group') == -1 ?\n              <UserLink email={item.owner_email} name={item.owner_name} /> :\n              item.owner_name\n            }\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgRepos(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"repos\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgRepos;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addInstitution: PropTypes.func.isRequired\n};\n\nclass SysAdminAddInstitutionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addInstitution(this.state.value.trim());\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add institution')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <p>{gettext('Name')}</p>\n            <FormGroup>\n              <Input\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddInstitutionDialog.propTypes = propTypes;\n\nexport default SysAdminAddInstitutionDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport SysAdminAddInstitutionDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No institutions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"75%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteInstitution={this.props.deleteInstitution}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteInstitution = () => {\n    this.props.deleteInstitution(this.props.item.id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const institutionName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', institutionName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/institutions/${item.id}/info/`}>{item.name}</Link></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Institution')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteInstitution}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Institutions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddInstitutionDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionsByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutions(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        institutionList: res.data.institution_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionsByPage(this.initPage));\n  }\n\n  toggleAddInstitutionDialog = () => {\n    this.setState({isAddInstitutionDialogOpen: !this.state.isAddInstitutionDialogOpen});\n  }\n\n  addInstitution = (name) => {\n    seafileAPI.sysAdminAddInstitution(name).then(res => {\n      let institutionList = this.state.institutionList;\n      institutionList.push(res.data);\n      this.setState({institutionList: institutionList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteInstitution = (institutionID) => {\n    seafileAPI.sysAdminDeleteInstitution(institutionID).then(res => {\n      let institutionList = this.state.institutionList.filter(inst => {\n        return inst.id != institutionID;\n      });\n      this.setState({institutionList: institutionList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddInstitutionDialogOpen, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddInstitutionDialog}>{gettext('Add Institution')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Institutions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.institutionList}\n                deleteInstitution={this.deleteInstitution}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionsByPage={this.getInstitutionsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddInstitutionDialogOpen &&\n          <SysAdminAddInstitutionDialog\n            addInstitution={this.addInstitution}\n            toggle={this.toggleAddInstitutionDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Institutions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'members', urlPart: 'members', text: gettext('Members')},\n      {name: 'admins', urlPart: 'admins', text: gettext('Admins')},\n    ];\n  }\n\n  render() {\n    const { currentItem, institutionID, institutionName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/institutions/`}>{gettext('Institutions')}</Link> / {institutionName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/institutions/${institutionID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetInstitutionQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetQuotaDialogOpen: false,\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, institutionInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const { name, user_count, quota_total, quota_used } = institutionInfo;\n      const { isSetQuotaDialogOpen } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {name}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Number of members')}</dt>\n            <dd className=\"info-item-content\">{user_count}</dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(quota_used)} / ${quota_total > 0 ? Utils.bytesToSize(quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetInstitutionQuotaDialog\n            updateQuota={this.props.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass InstitutionInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        institutionInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateQuota = (quota) => {\n    seafileAPI.sysAdminUpdateInstitution(this.props.institutionID, quota).then(res => {\n      const newInstitutionInfo = Object.assign(this.state.institutionInfo, {\n        quota_total: res.data.quota_total,\n      });\n      this.setState({institutionInfo: newInstitutionInfo});\n      toaster.success(gettext('Successfully set quota.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n\n  render() {\n    const { institutionInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav currentItem=\"info\" institutionID={this.props.institutionID} institutionName={institutionInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                institutionInfo={this.state.institutionInfo}\n                updateQuota={this.updateQuota}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: [],\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const emails = this.state.selectedOption.map(item => item.email);\n    this.props.addUser(emails);\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            isMulti={true}\n            className='org-add-member-select'\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  setAdmin={this.props.setAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleSetAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isSetAdminDialogOpen: !this.state.isSetAdminDialogOpen});\n  }\n\n  setAdmin = () => {\n    this.props.setAdmin(this.props.item.email);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Delete':\n        this.props.deleteUser(this.props.item.email);\n        break;\n      case 'Set Admin':\n        this.toggleSetAdminDialog();\n        break;\n    }\n  }\n\n  getOperations = () => {\n    let operations = [];\n    if (!this.props.item.is_institution_admin) {\n      operations.push('Set Admin');\n    }\n    operations.push('Delete');\n    return operations;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Set Admin':\n        translateResult = gettext('Set Admin');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isSetAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const dialogMsg = gettext('Are you sure you want to set {placeholder} as Admin?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={this.getOperations()}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isSetAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Set Admin')}\n            message={dialogMsg}\n            executeOperation={this.setAdmin}\n            toggleDialog={this.toggleSetAdminDialog}\n            confirmBtnText={gettext('Set Admin')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass InstitutionUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddUserDialogOpen: false\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionUsersByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionUsersByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutionUsers(this.props.institutionID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  setAdmin = (email) => {\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, true).then(res => {\n      let userList = this.state.userList.map(user => {\n        if (user.email == email) {\n          user.is_institution_admin = true;\n        }\n        return user;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionUsersByPage(this.initPage));\n  }\n\n  addUser = (emails) => {\n    seafileAPI.sysAdminAddInstitutionUserBatch(this.props.institutionID, emails).then(res => {\n      this.toggleAddUserDialog();\n      let successArray = res.data.success;\n      let failedArray = res.data.failed;\n      if (successArray.length) {\n        let newUserList = this.state.userList.concat(successArray);\n        this.setState({userList: newUserList});\n      }\n      failedArray.map((item) => {\n        toaster.danger(item.error_msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddUserDialogOpen, institutionName, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"members\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                setAdmin={this.setAdmin}\n                deleteUser={this.deleteUser}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionUsersByPage={this.getInstitutionUsersByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <AddMemberDialog\n            addUser={this.addUser}\n            toggle={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No admins')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  revokeAdmin={this.props.revokeAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isRevokeAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleRevokeAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  }\n\n  revokeAdmin = () => {\n    this.props.revokeAdmin(this.props.item);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isRevokeAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Revoke Admin']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass InstitutionAdmins extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n    seafileAPI.sysAdminListInstitutionAdmins(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  revokeAdmin = (item) => {\n    const email = item.email;\n    const name = item.name;\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, false).then(res => {\n      let userList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { institutionName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"admins\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                revokeAdmin={this.revokeAdmin}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionAdmins;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'loginLogs', urlPart:'logs/login', text: gettext('Login')},\n      {name: 'fileAccessLogs', urlPart:'logs/file-access', text: gettext('File Access')},\n      {name: 'fileUpdateLogs', urlPart:'logs/file-update', text: gettext('File Update')},\n      {name: 'sharePermissionLogs', urlPart:'logs/share-permission', text: gettext('Permission')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport moment from 'moment';\n\nclass LogsExportExcelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      startDateStr: '',\n      endDateStr: '',\n      errMsg: '',\n    };\n  }\n\n  downloadExcel = () => {\n    if (!this.isValidDateStr()) {\n      return;\n    }\n    let { startDateStr, endDateStr } = this.state;\n    let url = siteRoot;\n\n    switch (this.props.logType) {\n      case 'login':\n        url += 'sys/loginadmin/export-excel/';\n        break;\n      case 'fileAccess':\n        url += 'sys/log/fileaudit/export-excel/';\n        break;\n      case 'fileUpdate':\n        url += 'sys/log/fileupdate/export-excel/';\n        break;\n      case 'sharePermission':\n        url += 'sys/log/permaudit/export-excel/';\n        break;\n    }\n    location.href = url + '?start=' + startDateStr + '&end=' + endDateStr;\n    this.props.toggle();\n  }\n\n  isValidDateStr = () => {\n    let { startDateStr, endDateStr } = this.state;\n    if (moment(startDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(endDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(startDateStr).isBefore(endDateStr)\n    ) {\n      return true;\n    } else {\n      this.setState({\n        errMsg: gettext('Date Invalid.')\n      });\n      return false;\n    }\n  }\n\n  handleStartChange = (e) => {\n    const startDateStr = e.target.value.trim();\n    this.setState({\n      startDateStr: startDateStr,\n      errMsg: ''\n    });\n  }\n\n  handleEndChange = (e) => {\n    const endDateStr = e.target.value.trim();\n    this.setState({\n      endDateStr: endDateStr,\n      errMsg: '',\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Choose date')}</ModalHeader>\n        <ModalBody>\n          <FormGroup>\n            <Label>{gettext('Start date')}</Label>\n            <Input\n              value={this.state.startDateStr}\n              onChange={this.handleStartChange}\n              placeholder='yyyy-mm-dd'\n              autoFocus={true}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label>{gettext('End date')}</Label>\n            <Input\n              value={this.state.endDateStr}\n              onChange={this.handleEndChange}\n              placeholder='yyyy-mm-dd'\n            />\n          </FormGroup>\n          {this.state.errMsg &&\n            <Alert className=\"mt-2\" color=\"danger\">\n              {gettext(this.state.errMsg)}\n            </Alert>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.downloadExcel}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  logType: PropTypes.string.isRequired,\n};\n\nLogsExportExcelDialog.propTypes = propTypes;\n\nexport default LogsExportExcelDialog;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport { Button } from 'reactstrap';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.log_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass LoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.login_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"loginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'login'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default LoginLogs;\n","import React from 'react';\nimport { gettext } from '../../../utils/constants';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\n\nclass FilterMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { \n      isMenuShown: false\n    };  \n  }\n\n  toggleMenu = () => {\n    this.setState({\n      isMenuShown: !this.state.isMenuShown\n    }, () => {\n      this.props.toggleFreezeItem(this.state.isMenuShown);\n    });\n  }\n\n  onItemClick = () => {\n    this.props.filterItems();\n    this.props.toggleFreezeItem(false);\n  }\n\n  render() {\n    const { filterBy } = this.props;\n    return (\n      <Dropdown isOpen={this.state.isMenuShown} toggle={this.toggleMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isMenuShown}\n        />\n        <DropdownMenu>\n          <DropdownItem onClick={this.onItemClick}>{gettext('only show {placeholder}').replace('{placeholder}', filterBy)}</DropdownItem>\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nexport default FilterMenu;\n","import React from 'react';\nimport { Button } from 'reactstrap';\n\nclass ToggleFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { filterBy } = this.props;\n    return (\n      <Button\n        color='secondary'\n        className=\"my-2 mr-2\"\n        onClick={this.props.toggleFilter}\n      >   \n        <span className=\"text-primary\">{filterBy}</span>\n        <span className=\"ml-2 close\" style={{fontSize: '1.2rem'}}>x</span>\n      </Button>\n    );\n\n  }\n\n}\n\nexport default ToggleFilter;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport { Button } from 'reactstrap';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport LogsNav from './logs-nav';\nimport FilterMenu from './file-access-item-menu';\nimport ToggleFilter from './file-access-toggle-filter';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  toggleFilterByUser = () => {\n    this.props.filterByUser(null);\n  }\n\n  toggleFilterByRepo = () => {\n    this.props.filterByRepo(null);\n  }\n\n  toggleFreezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  }\n\n  render() {\n    const {\n      loading, errorMsg, items, \n      userFilteredBy, repoFilteredBy,\n      perPage, currentPage, hasNextPage\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file access logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <div>\n            {userFilteredBy && (\n              <ToggleFilter\n                filterBy={items[0].name}\n                toggleFilter={this.toggleFilterByUser}\n              />\n            )}\n            {repoFilteredBy && (\n              <ToggleFilter\n                filterBy={items[0].repo_name}\n                toggleFilter={this.toggleFilterByRepo}\n              />\n            )}\n          </div>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('IP')}{' / '}{gettext('Device')}</th>\n                <th width=\"20%\">{gettext('Date')}</th>\n                <th width=\"15%\">{gettext('Library')}</th>\n                <th width=\"15%\">{gettext('File')}{' / '}{gettext('Folder')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    isFreezed={this.state.isItemFreezed}\n                    toggleFreezeItem={this.toggleFreezeItem}\n                    userFilteredBy={userFilteredBy}\n                    repoFilteredBy={repoFilteredBy}\n                    filterByUser={this.props.filterByUser}\n                    filterByRepo={this.props.filterByRepo}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlighted: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isFreezed) {\n      this.setState({\n        isHighlighted: true,\n        isOpIconShown: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isFreezed) {\n      this.setState({\n        isHighlighted: false,\n        isOpIconShown: false\n      });\n    }\n  }\n\n  filterByUser = () => {\n    const { item } = this.props;\n    this.props.filterByUser(item.email);\n  }\n\n  filterByRepo = () => {\n    const { item } = this.props;\n    this.props.filterByRepo(item.repo_id);\n  }\n\n  toggleFreezeItem = (freezed) => {\n    this.props.toggleFreezeItem(freezed);\n    if (!freezed) {\n      this.setState({\n        isHighlighted: false,\n        isOpIconShown: false\n      });\n    }\n  }\n\n  render() {\n    const { isHighlighted, isOpIconShown } = this.state;\n    const { item, userFilteredBy, repoFilteredBy } = this.props;\n    return (\n      <tr className={isHighlighted ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>\n          <UserLink email={item.email} name={item.name} />\n          {isOpIconShown && !userFilteredBy && (\n            <FilterMenu\n              filterBy={item.name}\n              filterItems={this.filterByUser}\n              toggleFreezeItem={this.toggleFreezeItem}\n            />\n          )}\n        </td>\n        <td>{item.event_type}</td>\n        <td>{item.ip}{' / '}{item.device || '--'}</td>\n        <td>{moment(item.time).fromNow()}</td>\n        <td>\n          {item.repo_name ? item.repo_name : gettext('Deleted')}\n          {isOpIconShown && item.repo_name && !repoFilteredBy && (\n            <FilterMenu\n              filterBy={item.repo_name}\n              filterItems={this.filterByRepo}\n              toggleFreezeItem={this.toggleFreezeItem}\n            />\n          )}\n        </td>\n        <td>{item.file_or_dir_name}</td>\n      </tr>\n    );\n  }\n}\n\nclass FileAccessLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      userFilteredBy: urlParams.get('email'),\n      repoFilteredBy: urlParams.get('repo_id')\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    const { perPage, userFilteredBy, repoFilteredBy } = this.state;\n    seafileAPI.sysAdminListFileAccessLogs(page, perPage, userFilteredBy, repoFilteredBy).then((res) => {\n      this.setState({\n        logList: res.data.file_access_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  updateURL = (obj) => {\n    let url = new URL(location.href);\n    let searchParams = new URLSearchParams(url.search);\n    for (let key in obj) {\n      obj[key] == null ? \n        searchParams.delete(key) :\n        searchParams.set(key, obj[key]);\n    }\n    url.search = searchParams.toString();\n    navigate(url.toString());\n  }\n\n  filterByUser = (email) => {\n    this.setState({\n      userFilteredBy: email \n    }, () => {\n      this.getLogsByPage(this.initPage);\n      this.updateURL({'email': email});\n    });\n  }\n\n  filterByRepo = (repoID) => {\n    this.setState({\n      repoFilteredBy: repoID \n    }, () => {\n      this.getLogsByPage(this.initPage);\n      this.updateURL({'repo_id': repoID});\n    });\n  } \n\n  render() {\n    const {\n      logList,\n      userFilteredBy, repoFilteredBy, \n      currentPage, perPage, hasNextPage,\n      isExportExcelDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileAccessLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                userFilteredBy={userFilteredBy}\n                repoFilteredBy={repoFilteredBy}\n                filterByUser={this.filterByUser}\n                filterByRepo={this.filterByRepo}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileAccess'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileAccessLogs;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport { Button } from 'reactstrap';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport ModalPortal from '../../../components/modal-portal';\nimport CommitDetails from '../../../components/dialog/commit-details';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file update logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('Date')}</th>\n                <th width=\"25%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Action')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isCommitDetailsDialogOpen: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n\n  toggleCommitDetailsDialog = () => {\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  }\n\n  showCommitDetails = (e) => {\n    e.preventDefault();\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>{moment(item.time).fromNow()}</td>\n          <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n          <td>\n            {item.file_operation}\n            {item.repo_name && !item.repo_encrypted &&\n              <a className=\"ml-1\" href=\"#\" onClick={this.showCommitDetails}>{gettext('Details')}</a>\n            }\n          </td>\n        </tr>\n        {this.state.isCommitDetailsDialogOpen &&\n          <ModalPortal>\n            <CommitDetails\n              repoID={item.repo_id}\n              commitID={item.commit_id}\n              commitTime={item.time}\n              toggleDialog={this.toggleCommitDetailsDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass FileUpdateLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListFileUpdateLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.file_update_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileUpdateLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileUpdate'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileUpdateLogs;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsNav from './logs-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No permission logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"15%\">{gettext('Share From')}</th>\n                <th width=\"15%\">{gettext('Share To')}</th>\n                <th width=\"10%\">{gettext('Actions')}</th>\n                <th width=\"13%\">{gettext('Permission')}</th>\n                <th width=\"20%\">{gettext('Library')}</th>\n                <th width=\"12%\">{gettext('Folder')}</th>\n                <th width=\"15%\">{gettext('Date')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  getActionTextByEType = (etype) => {\n    if (etype.indexOf('add') != -1) {\n      return gettext('Add');\n    } else if (etype.indexOf('modify') != -1) {\n      return gettext('Modify');\n    } else if (etype.indexOf('delete') != -1) {\n      return gettext('Delete');\n    } else {\n      return '';\n    }\n  }\n\n  getShareTo = (item) => {\n    switch(item.share_type) {\n      case 'user':\n        return <UserLink email={item.to_user_email} name={item.to_user_name} />;\n      case 'group':\n        return <Link to={`${siteRoot}sys/groups/${item.to_group_id}/libraries/`}>{item.to_group_name}</Link>;\n      case 'department':\n        return <Link to={`${siteRoot}sys/departments/${item.to_group_id}/`}>{item.to_group_name}</Link>;\n      case 'all':\n        return <Link to={`${siteRoot}org/`}>{gettext('All')}</Link>;\n      default:\n        return gettext('Deleted');\n    }\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.from_user_email} name={item.from_user_name} /></td>\n        <td>{this.getShareTo(item)}</td>\n        <td>{this.getActionTextByEType(item.etype)}</td>\n        <td>{Utils.sharePerms(item.permission)}</td>\n        <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n        <td>{item.folder}</td>\n        <td>{moment(item.date).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass SharePermissionLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListSharePermissionLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.share_permission_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"sharePermissionLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'sharePermission'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharePermissionLogs;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  headingText: PropTypes.string.isRequired,\n  children: PropTypes.object.isRequired\n};\n\nclass Section extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { headingText, children} = this.props;\n    return (\n      <div className=\"mb-4\">\n        <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{headingText}</h4>\n        {children}\n      </div>\n    );\n  }\n}\n\nSection.propTypes = propTypes;\n\nexport default Section;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col, Label } from 'reactstrap';\n\nconst propTypes = {\n  displayName: PropTypes.string.isRequired,\n  helpTip: PropTypes.string,\n  mainContent: PropTypes.object.isRequired,\n  extraContent: PropTypes.object\n};\n\nclass SettingItemBase extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { helpTip, displayName, mainContent, extraContent } = this.props;\n    return (\n      <Fragment>\n        <Row className=\"my-4\">\n          <Col md=\"3\">\n            <Label className=\"web-setting-label\">{displayName}</Label>\n          </Col>\n          <Col md=\"5\">\n            {mainContent}\n            {helpTip && <p className=\"small text-secondary mt-1\">{helpTip}</p>}\n          </Col>\n          <Col md=\"4\">\n            {extraContent}\n          </Col>\n        </Row>\n      </Fragment>\n    );\n  }\n}\n\nSettingItemBase.propTypes = propTypes;\n\nexport default SettingItemBase;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  inputType: PropTypes.string,\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string,PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isBtnsShown: false,\n      value: this.props.value\n    };\n  }\n\n  toggleBtns = () => {\n    this.setState({isBtnsShown: !this.state.isBtnsShown});\n  }\n\n  hideBtns = (e) => {\n    if (!this.state.isBtnsShown) {\n      return;\n    }\n    if (this.props.value != this.state.value) {\n      this.setState({value: this.props.value});\n    }\n    this.toggleBtns();\n  }\n\n  onInputChange = (e) => {\n    this.setState({ value: e.target.value });\n  }\n\n  onSubmit = (e) => {\n    const value = this.state.value.trim();\n    if (value != this.props.value) {\n      this.props.saveSetting(this.props.keyText, value);\n    }\n    this.toggleBtns();\n  }\n\n  render() {\n    const { isBtnsShown, value } = this.state;\n    const { helpTip, displayName, inputType } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <Input type={inputType || 'text'} className={inputType == 'textarea' ? 'web-setting-textarea' : ''} onChange={this.onInputChange} onFocus={this.toggleBtns} onBlur={this.hideBtns} value={value} />\n        }\n        extraContent={\n          isBtnsShown ?\n            <Fragment>\n              <Button className=\"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit\" onMouseDown={this.onSubmit} title={gettext('Submit')}></Button>\n              <Button className=\"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel\" title={gettext('Cancel')}></Button>\n            </Fragment> : null\n        }\n      />\n    );\n  }\n}\n\nWebSettingInput.propTypes = propTypes;\n\nexport default WebSettingInput;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  postFile: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  helpTip: PropTypes.string.isRequired,\n  fileWidth: PropTypes.number.isRequired,\n  fileHeight: PropTypes.number.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingFile extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n  }\n\n  uploadFile = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    this.props.postFile(file, this.props.keyText);\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  render() {\n    const { helpTip, filePath, fileWidth, fileHeight, displayName } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <img src={filePath + '?t=' + new Date().getTime()} alt={displayName} width={fileWidth} height={fileHeight} className=\"mb-1\" />\n        }\n        extraContent={\n          <Fragment>\n            <Button color=\"secondary\" onClick={this.openFileInput}>{gettext('Change')}</Button>\n            <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInput} />\n          </Fragment>\n        }\n      />\n    );\n  }\n}\n\nWebSettingFile.propTypes = propTypes;\n\nexport default WebSettingFile;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingCheckbox extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputChecked: this.props.value\n    };\n  }\n\n  onInputChange = (e) => {\n    const checked = e.target.checked;\n    const valueToNum = checked ? 1 : 0;\n    this.setState({\n      inputChecked: checked\n    });\n    this.props.saveSetting(this.props.keyText, valueToNum);\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n    const { helpTip, displayName } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        mainContent={\n          <Fragment>\n            <Input className=\"ml-0\" checked={inputChecked} type='checkbox' onChange={this.onInputChange} />\n            <p className=\"ml-4\">{helpTip}</p>\n          </Fragment>\n        }\n      />\n    );\n  }\n}\n\nWebSettingCheckbox.propTypes = propTypes;\n\nexport default WebSettingCheckbox;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro, mediaUrl, logoPath, faviconPath, loginBGPath } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Section from './section';\nimport InputItem from './input-item';\nimport FileItem from './file-item';\nimport CheckboxItem from './checkbox-item';\n\nimport '../../../css/system-admin-web-settings.css';\n\nclass WebSettings extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      config_dict: null,\n      logoPath: mediaUrl + logoPath,\n      faviconPath: mediaUrl + faviconPath,\n      loginBGPath: mediaUrl + loginBGPath\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysSettingInfo().then((res) => {\n      this.setState({\n        loading: false,\n        config_dict: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  saveSetting = (key, value) => {\n    seafileAPI.sysAdminSetSysSettingInfo(key, value).then((res) => {\n      this.setState({\n        config_dict: res.data\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  postFile = (file, fileType) => {\n    let postFile;\n    if (fileType == 'Logo') {\n      postFile = seafileAPI.sysAdminUpdateLogo(file);\n    } else if (fileType == 'Favicon') {\n      postFile = seafileAPI.sysAdminUpdateFavicon(file);\n    } else if (fileType == 'loginBGImage') {\n      postFile = seafileAPI.sysAdminUpdateLoginBG(file);\n    }\n    postFile.then((res) => {\n      if (fileType == 'Logo') {\n        this.setState({\n          logoPath: res.data.logo_path\n        });\n      } else if (fileType == 'Favicon') {\n        this.setState({\n          faviconPath: res.data.favicon_path\n        });\n      } else if (fileType == 'loginBGImage') {\n        this.setState({\n          loginBGPath: res.data.login_bg_image_path\n        });\n      }\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg, config_dict, logoPath, faviconPath, loginBGPath } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Settings')}</h3>\n            </div>\n            <div className=\"cur-view-content container mw-100\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) && config_dict &&\n              <Fragment>\n                <p className=\"small text-secondary my-4\">{gettext('Note: Settings via web interface are saved in database table (seahub-db/constance_config). They have a higher priority over the settings in config files.')}</p>\n\n                <Section headingText='URL'>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SERVICE_URL'\n                      keyText='SERVICE_URL'\n                      value={config_dict['SERVICE_URL']}\n                      helpTip={gettext('The URL of the server, like https://seafile.example.com or http://192.168.1.2:8000')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='FILE_SERVER_ROOT'\n                      keyText='FILE_SERVER_ROOT'\n                      value={config_dict['FILE_SERVER_ROOT']}\n                      helpTip={gettext('The internal URL for downloading/uploading files. Users will not be able to download/upload files if this is not set correctly. If you config Seafile behind Nginx/Apache, it should be SERVICE_URL/seafhttp, like https://seafile.example.com/seafhttp .')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Branding')}>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_TITLE'\n                      keyText='SITE_TITLE'\n                      value={config_dict['SITE_TITLE']}\n                      helpTip={gettext('Site title shown in a browser tab')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_NAME'\n                      keyText='SITE_NAME'\n                      value={config_dict['SITE_NAME']}\n                      helpTip={gettext('Site name used in email sending')}\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Logo'\n                      keyText='Logo'\n                      filePath={logoPath}\n                      fileWidth={256}\n                      fileHeight={64}\n                      helpTip='logo.png, 256px * 64px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Favicon'\n                      keyText='Favicon'\n                      filePath={faviconPath}\n                      fileWidth={32}\n                      fileHeight={32}\n                      helpTip='favicon.ico, 32px * 32px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName={gettext('Login Background Image')}\n                      keyText='loginBGImage'\n                      filePath={loginBGPath}\n                      fileWidth={240}\n                      fileHeight={160}\n                      helpTip='login-bg.jpg, 2400px * 1600px'\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_BRANDING_CSS'\n                      keyText='ENABLE_BRANDING_CSS'\n                      value={config_dict['ENABLE_BRANDING_CSS']}\n                      helpTip={gettext('Use custom CSS')}\n                    />\n                    <InputItem\n                      inputType=\"textarea\"\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('Custom CSS')}\n                      keyText='CUSTOM_CSS'\n                      value={config_dict['CUSTOM_CSS']}\n                      helpTip=''\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('User')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('allow new registrations')}\n                      keyText='ENABLE_SIGNUP'\n                      value={config_dict['ENABLE_SIGNUP']}\n                      helpTip={gettext('Allow new user registrations. Uncheck this to prevent anyone from creating a new account.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('activate after registration')}\n                      keyText='ACTIVATE_AFTER_REGISTRATION'\n                      value={config_dict['ACTIVATE_AFTER_REGISTRATION']}\n                      helpTip={gettext('Activate user immediately after registration. If unchecked, a user need to be activated by administrator or via activation email')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('send activation email')}\n                      keyText='REGISTRATION_SEND_MAIL'\n                      value={config_dict['REGISTRATION_SEND_MAIL']}\n                      helpTip={gettext('Send activation Email after user registration.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('keep sign in')}\n                      keyText='LOGIN_REMEMBER_DAYS'\n                      value={config_dict['LOGIN_REMEMBER_DAYS']}\n                      helpTip={gettext('Number of days that keep user sign in.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='LOGIN_ATTEMPT_LIMIT'\n                      keyText='LOGIN_ATTEMPT_LIMIT'\n                      value={config_dict['LOGIN_ATTEMPT_LIMIT']}\n                      helpTip={gettext('The maximum number of failed login attempts before showing CAPTCHA.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='FREEZE_USER_ON_LOGIN_FAILED'\n                      keyText='FREEZE_USER_ON_LOGIN_FAILED'\n                      value={config_dict['FREEZE_USER_ON_LOGIN_FAILED']}\n                      helpTip={gettext('Freeze user account when failed login attempts exceed limit.')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Groups')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_SHARE_TO_ALL_GROUPS'\n                    keyText='ENABLE_SHARE_TO_ALL_GROUPS'\n                    value={config_dict['ENABLE_SHARE_TO_ALL_GROUPS']}\n                    helpTip={gettext('Enable users to share libraries to any groups in the system.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Password')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='strong password'\n                      keyText='USER_STRONG_PASSWORD_REQUIRED'\n                      value={config_dict['USER_STRONG_PASSWORD_REQUIRED']}\n                      helpTip={gettext('Force user to use a strong password when sign up or change password.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='force password change'\n                      keyText='FORCE_PASSWORD_CHANGE'\n                      value={config_dict['FORCE_PASSWORD_CHANGE']}\n                      helpTip={gettext('Force user to change password when account is newly added or reset by admin')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password minimum length')}\n                      keyText='USER_PASSWORD_MIN_LENGTH'\n                      value={config_dict['USER_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an account password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password strength level')}\n                      keyText='USER_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['USER_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of an account password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='enable two factor authentication'\n                      keyText='ENABLE_TWO_FACTOR_AUTH'\n                      value={config_dict['ENABLE_TWO_FACTOR_AUTH']}\n                      helpTip={gettext('Enable two factor authentication')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Library')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='library history'\n                      keyText='ENABLE_REPO_HISTORY_SETTING'\n                      value={config_dict['ENABLE_REPO_HISTORY_SETTING']}\n                      helpTip={gettext('Allow user to change library history settings')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='encrypted library'\n                      keyText='ENABLE_ENCRYPTED_LIBRARY'\n                      value={config_dict['ENABLE_ENCRYPTED_LIBRARY']}\n                      helpTip={gettext('Allow user to create encrypted libraries')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('library password minimum length')}\n                      keyText='REPO_PASSWORD_MIN_LENGTH'\n                      value={config_dict['REPO_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an encrypted library password should include.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link force password')}\n                      keyText='SHARE_LINK_FORCE_USE_PASSWORD'\n                      value={config_dict['SHARE_LINK_FORCE_USE_PASSWORD']}\n                      helpTip={gettext('Force user use password when generating share/upload link.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link password minimum length')}\n                      keyText='SHARE_LINK_PASSWORD_MIN_LENGTH'\n                      value={config_dict['SHARE_LINK_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters a share/upload link password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link password strength level')}\n                      keyText='SHARE_LINK_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['SHARE_LINK_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of a share/upload link password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_USER_CLEAN_TRASH'\n                      keyText='ENABLE_USER_CLEAN_TRASH'\n                      value={config_dict['ENABLE_USER_CLEAN_TRASH']}\n                      helpTip={gettext('Allow user to clean library trash')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Online Preview')}>\n                  <InputItem\n                    inputType=\"textarea\"\n                    saveSetting={this.saveSetting}\n                    displayName={gettext('text file extensions')}\n                    keyText='TEXT_PREVIEW_EXT'\n                    value={config_dict['TEXT_PREVIEW_EXT']}\n                    helpTip={gettext('Extensions of text files that can be online previewed, each suffix is separated by a comma.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Sync')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    keyText='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    value={config_dict['DISABLE_SYNC_WITH_ANY_FOLDER']}\n                    helpTip={gettext('If turn on, the desktop clients will not be able to sync a folder outside the default Seafile folder.')}\n                  />\n                </Section>\n\n                {isPro && <Section headingText={gettext('Terms')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_TERMS_AND_CONDITIONS'\n                    keyText='ENABLE_TERMS_AND_CONDITIONS'\n                    value={config_dict['ENABLE_TERMS_AND_CONDITIONS']}\n                    helpTip={gettext('Enable system admin to add Terms and Conditions, and all users will have to accept the terms.')}\n                  />\n                </Section>}\n              </Fragment>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default WebSettings;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addNotification: PropTypes.func.isRequired\n};\n\nclass SysAdminAddSysNotificationDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addNotification(this.state.value.trim());\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add new notification')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"textarea\"\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddSysNotificationDialog.propTypes = propTypes;\n\nexport default SysAdminAddSysNotificationDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminAddSysNotificationDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No notifications')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"95%\">{gettext('Notification Detail')}</th>\n              <th width=\"5%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                item={item}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                deleteNotification={this.props.deleteNotification}\n                setToCurrent={this.props.setToCurrent}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteNotification = () => {\n    this.props.deleteNotification(this.props.item.id);\n    this.toggleDeleteDialog();\n  }\n\n  setToCurrent = () => {\n    this.props.setToCurrent(this.props.item.id);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Set to current':\n        this.setToCurrent();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Set to current':\n        translateResult = gettext('Set to current');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  getOperations = () => {\n    const { item } = this.props;\n    let operations = [];\n    if (!item.is_current) {\n      operations.push('Set to current');\n    }\n    operations.push('Delete');\n    return operations;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            {item.msg}\n            {item.is_current &&\n              <span className=\"small text-orange\">{gettext('(current notification)')}</span>\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Notification')}\n            message={gettext('Are you sure you want to delete the notification ?')}\n            toggleDialog={this.toggleDeleteDialog}\n            executeOperation={this.deleteNotification}\n            confirmBtnText={gettext('Delete')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Notifications extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      notificationList: [],\n      isAddNotificationDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListAllSysNotifications().then((res) => {\n      this.setState({\n        loading: false,\n        notificationList: res.data.notifications\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddNotificationDialog = () => {\n    this.setState({isAddNotificationDialogOpen: !this.state.isAddNotificationDialogOpen});\n  }\n\n  addNotification = (msg) => {\n    seafileAPI.sysAdminAddSysNotification(msg).then(res => {\n      let notificationList = this.state.notificationList;\n      notificationList.unshift(res.data.notification);\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteNotification = (id) => {\n    seafileAPI.sysAdminDeleteSysNotification(id).then(res => {\n      let notificationList = this.state.notificationList.filter(item => {\n        return item.id != id;\n      });\n      this.setState({notificationList: notificationList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setToCurrent = (id) => {\n    seafileAPI.sysAdminSetSysNotificationToCurrent(id).then(res => {\n      let notificationList = this.state.notificationList.map(item => {\n        if (item.id == id) {\n          item.is_current = true;\n        } else {\n          item.is_current = false;\n        }\n        return item;\n      });\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddNotificationDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddNotificationDialog}>{gettext('Add new notification')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Notifications')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.notificationList}\n                deleteNotification={this.deleteNotification}\n                setToCurrent={this.setToCurrent}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddNotificationDialogOpen &&\n          <SysAdminAddSysNotificationDialog\n            addNotification={this.addNotification}\n            toggle={this.toggleAddNotificationDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Notifications;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\n\n\nconst tablePropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  records: PropTypes.array.isRequired,\n};\n\nclass Table extends Component {\n\n  render() {\n    let { loading, errorMsg, records } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      return (\n        <table width=\"100%\" className=\"table table-hover table-vcenter\">\n          <thead>\n            <tr>\n              <th width=\"16%\">{gettext('Library')}</th>\n              <th width=\"30%\">ID</th>\n              <th width=\"30%\">{gettext('Path')}</th>\n              <th width=\"12%\">{gettext('Label')}</th>\n              <th width=\"12%\">{gettext('Suggestion')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {records.map((record, index) => {\n              return (\n                <Item key={index} record={record} />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nTable.propTypes = tablePropTypes;\n\n\nconst itemPropTypes = {\n  record: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    let record = this.props.record;\n\n    return (\n      <tr>\n        <td>{record.repo_name}</td>\n        <td>{record.repo_id}</td>\n        <td>{record.path}</td>\n        <td>{record.detail.label}</td>\n        <td>{record.detail.suggestion}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\n\nclass FileScanRecords extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      records: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listFileScanRecords().then((res) => {\n      this.setState({\n        loading: false,\n        records: res.data.record_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"content-scan-records\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Content Scan Records')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Table\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                records={this.state.records}\n              />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FileScanRecords;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst WorkWeixinDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass WorkWeixinDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar && member.avatar.length > 0) {\n        avatar = member.avatar.substring(0, member.avatar.length - 1) + '100';// get smaller avatar\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"30%\">{''}</th>\n                <th width=\"15%\">{''}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{''}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentMembersList.propTypes = WorkWeixinDepartmentMembersListPropTypes;\n\nexport default WorkWeixinDepartmentMembersList;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { gettext, isPro } from '../../../utils/constants';\n\nconst WorkWeixinDepartmentsTreeNodePropTypes = {\n  index: PropTypes.number,\n  department: PropTypes.object.isRequired,\n  isChildrenShow: PropTypes.bool.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreeNode extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChildrenShow: false,\n      dropdownOpen: false,\n      active: false,\n    };\n  }\n\n  toggleChildren = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({\n      isChildrenShow: !this.state.isChildrenShow,\n    });\n  };\n\n  dropdownToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onMouseEnter = () => {\n    this.setState({ active: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.state.dropdownOpen) return;\n    this.setState({ active: false });\n  };\n\n  importDepartmentDialogToggle = (depart) => {\n    this.setState({ active: false });\n    this.props.importDepartmentDialogToggle(depart);\n  }\n\n  componentDidMount() {\n    if (this.props.index === 0) {\n      this.setState({ isChildrenShow: true });\n      this.props.onChangeDepartment(this.props.department.id);\n    }\n  }\n\n  renderTreeNodes = (departmentsTree) => {\n    if (departmentsTree.length > 0) {\n      return departmentsTree.map((department) => {\n        return (\n          <WorkWeixinDepartmentsTreeNode\n            key={department.id}\n            department={department}\n            isChildrenShow={this.state.isChildrenShow}\n            onChangeDepartment={this.props.onChangeDepartment}\n            checkedDepartmentId={this.props.checkedDepartmentId}\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n          />\n        );\n      });\n    }\n  };\n\n  changeDept = (departmentID) => {\n    const { department, checkedDepartmentId } = this.props;\n    this.props.onChangeDepartment(departmentID);\n    if (checkedDepartmentId === department.id && !this.state.isChildrenShow) {\n      this.setState({ isChildrenShow: true });\n    }\n  }\n\n  render() {\n    const { isChildrenShow, department, checkedDepartmentId } = this.props;\n    let toggleClass = classNames({\n      'folder-toggle-icon fa fa-caret-down': department.children && this.state.isChildrenShow,\n      'folder-toggle-icon fa fa-caret-right': department.children && !this.state.isChildrenShow,\n    });\n    let nodeInnerClass = classNames({\n      'tree-node-inner': true,\n      'tree-node-inner-hover': this.state.active,\n      'tree-node-hight-light': checkedDepartmentId === department.id\n    });\n    return (\n      <Fragment>\n        {isChildrenShow &&\n          <div\n            className={nodeInnerClass}\n            onClick={() => this.changeDept(department.id)}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <span className=\"tree-node-icon\" onClick={(e) => this.toggleChildren(e)}>\n              <i className={toggleClass}></i>\n            </span>\n            <span className=\"tree-node-text\">{department.name}</span>\n            {isPro &&\n            <Dropdown\n              isOpen={this.state.dropdownOpen}\n              toggle={(e) => this.dropdownToggle(e)}\n              direction=\"down\"\n              style={this.state.active ? {} : { opacity: 0 }}\n            >\n              <DropdownToggle\n                tag='i'\n                className='fa fa-ellipsis-v cursor-pointer attr-action-icon'\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.dropdownOpen}\n              >\n              </DropdownToggle>\n              <DropdownMenu className=\"drop-list\" right={true}>\n                <DropdownItem\n                  onClick={this.importDepartmentDialogToggle.bind(this, department)}\n                  id={department.id}\n                >{''}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </div>\n        }\n        {this.state.isChildrenShow &&\n          <div className=\"department-children\">\n            {department.children && this.renderTreeNodes(department.children)}\n          </div>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreeNode.propTypes = WorkWeixinDepartmentsTreeNodePropTypes;\n\nexport default WorkWeixinDepartmentsTreeNode;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport WorkWeixinDepartmentsTreeNode from './work-weixin-departments-tree-node';\n\nconst WorkWeixinDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <WorkWeixinDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreePanel.propTypes = WorkWeixinDepartmentsTreePanelPropTypes;\n\nexport default WorkWeixinDepartmentsTreePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loading from '../loading';\n\nconst propTypes = {\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n  onImportDepartmentSubmit: PropTypes.func.isRequired,\n  departmentsCount: PropTypes.number.isRequired,\n  membersCount: PropTypes.number.isRequired,\n  departmentName: PropTypes.string.isRequired,\n};\n\nclass ImportWorkWeixinDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : false,\n    };\n  }\n\n  toggle = () => {\n    this.props.importDepartmentDialogToggle(null);\n  };\n\n  handleSubmit = () => {\n    this.props.onImportDepartmentSubmit();\n    this.setState({ isLoading : true });\n  };\n\n  render() {\n    const { departmentsCount, membersCount, departmentName } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{' '}</span><span className=\"op-target\" title={departmentName}>{departmentName}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{' '}<strong>{departmentsCount}</strong>{'  '}<strong>{membersCount}</strong>{' '}</p>\n          {this.state.isLoading && <Loading/>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{''}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{''}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportWorkWeixinDepartmentDialog.propTypes = propTypes;\n\nexport default ImportWorkWeixinDepartmentDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport deepCopy from 'deep-copy';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport { WorkWeixinDepartmentMembersList, WorkWeixinDepartmentsTreePanel } from './work-weixin';\nimport ImportWorkWeixinDepartmentDialog from '../../components/dialog/import-work-weixin-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\n\nclass WorkWeixinDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = deepCopy(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getWorkWeixinDepartmentsList = (departmentID) => {\n    seafileAPI.adminListWorkWeixinDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getWorkWeixinDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListWorkWeixinDepartmentMembers(department_id, {fetch_child: true}).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  };\n\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getWorkWeixinDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddWorkWeixinUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' ', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  }\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getWorkWeixinDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportWorkWeixinDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getWorkWeixinDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? ' ' + success.department_name + ' ' : success.api_user_name + ' ' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  }\n\n  componentDidMount() {\n    this.getWorkWeixinDepartmentsList(null);\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"operation-item\" onClick={this.onSubmit}>{''}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{''}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <WorkWeixinDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <WorkWeixinDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportWorkWeixinDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default WorkWeixinDepartments;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst DingtalkDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass DingtalkDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar && member.avatar.length > 0) {\n        avatar = member.avatar;\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"30%\">{''}</th>\n                <th width=\"15%\">{''}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{''}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentMembersList.propTypes = DingtalkDepartmentMembersListPropTypes;\n\nexport default DingtalkDepartmentMembersList;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { gettext, isPro } from '../../../utils/constants';\n\nconst DingtalkDepartmentsTreeNodePropTypes = {\n  index: PropTypes.number,\n  department: PropTypes.object.isRequired,\n  isChildrenShow: PropTypes.bool.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreeNode extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChildrenShow: false,\n      dropdownOpen: false,\n      active: false,\n    };\n  }\n\n  toggleChildren = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({\n      isChildrenShow: !this.state.isChildrenShow,\n    });\n  };\n\n  dropdownToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onMouseEnter = () => {\n    this.setState({ active: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.state.dropdownOpen) return;\n    this.setState({ active: false });\n  };\n\n  importDepartmentDialogToggle = (depart) => {\n    this.setState({ active: false });\n    this.props.importDepartmentDialogToggle(depart);\n  }\n\n  componentDidMount() {\n    if (this.props.index === 0) {\n      this.setState({ isChildrenShow: true });\n      this.props.onChangeDepartment(this.props.department.id);\n    }\n  }\n\n  renderTreeNodes = (departmentsTree) => {\n    if (departmentsTree.length > 0) {\n      return departmentsTree.map((department) => {\n        return (\n          <DingtalkDepartmentsTreeNode\n            key={department.id}\n            department={department}\n            isChildrenShow={this.state.isChildrenShow}\n            onChangeDepartment={this.props.onChangeDepartment}\n            checkedDepartmentId={this.props.checkedDepartmentId}\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n          />\n        );\n      });\n    }\n  };\n\n  changeDept = (departmentID) => {\n    const { department, checkedDepartmentId } = this.props;\n    this.props.onChangeDepartment(departmentID);\n    if (checkedDepartmentId === department.id && !this.state.isChildrenShow) {\n      this.setState({ isChildrenShow: true });\n    }\n  }\n\n  render() {\n    const { isChildrenShow, department, checkedDepartmentId } = this.props;\n    let toggleClass = classNames({\n      'folder-toggle-icon fa fa-caret-down': department.children && this.state.isChildrenShow,\n      'folder-toggle-icon fa fa-caret-right': department.children && !this.state.isChildrenShow,\n    });\n    let nodeInnerClass = classNames({\n      'tree-node-inner': true,\n      'tree-node-inner-hover': this.state.active,\n      'tree-node-hight-light': checkedDepartmentId === department.id\n    });\n    return (\n      <Fragment>\n        {isChildrenShow &&\n          <div\n            className={nodeInnerClass}\n            onClick={() => this.changeDept(department.id)}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <span className=\"tree-node-icon\" onClick={(e) => this.toggleChildren(e)}>\n              <i className={toggleClass}></i>\n            </span>\n            <span className=\"tree-node-text\">{department.name}</span>\n            {isPro &&\n            <Dropdown\n              isOpen={this.state.dropdownOpen}\n              toggle={(e) => this.dropdownToggle(e)}\n              direction=\"down\"\n              style={this.state.active ? {} : { opacity: 0 }}\n            >\n              <DropdownToggle\n                tag='i'\n                className='fa fa-ellipsis-v cursor-pointer attr-action-icon'\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.dropdownOpen}\n              >\n              </DropdownToggle>\n              <DropdownMenu className=\"drop-list\" right={true}>\n                <DropdownItem\n                  onClick={this.importDepartmentDialogToggle.bind(this, department)}\n                  id={department.id}\n                >{''}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </div>\n        }\n        {this.state.isChildrenShow &&\n          <div className=\"department-children\">\n            {department.children && this.renderTreeNodes(department.children)}\n          </div>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDingtalkDepartmentsTreeNode.propTypes = DingtalkDepartmentsTreeNodePropTypes;\n\nexport default DingtalkDepartmentsTreeNode;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport DingtalkDepartmentsTreeNode from './dingtalk-departments-tree-node';\n\nconst DingtalkDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <DingtalkDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentsTreePanel.propTypes = DingtalkDepartmentsTreePanelPropTypes;\n\nexport default DingtalkDepartmentsTreePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loading from '../loading';\n\nconst propTypes = {\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n  onImportDepartmentSubmit: PropTypes.func.isRequired,\n  departmentsCount: PropTypes.number.isRequired,\n  membersCount: PropTypes.number.isRequired,\n  departmentName: PropTypes.string.isRequired,\n};\n\nclass ImportDingtalkDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : false,\n    };\n  }\n\n  toggle = () => {\n    this.props.importDepartmentDialogToggle(null);\n  };\n\n  handleSubmit = () => {\n    this.props.onImportDepartmentSubmit();\n    this.setState({ isLoading : true });\n  };\n\n  render() {\n    const { departmentsCount, membersCount, departmentName } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{' '}</span><span className=\"op-target\" title={departmentName}>{departmentName}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{' '}<strong>{departmentsCount}</strong>{'  '}<strong>{membersCount}</strong>{' '}</p>\n          {this.state.isLoading && <Loading/>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{''}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{''}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportDingtalkDepartmentDialog.propTypes = propTypes;\n\nexport default ImportDingtalkDepartmentDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport deepCopy from 'deep-copy';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\nimport toaster from '../../components/toast';\nimport { DingtalkDepartmentMembersList, DingtalkDepartmentsTreePanel } from './dingtalk';\nimport ImportDingtalkDepartmentDialog from '../../components/dialog/import-dingtalk-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\nimport '../../css/dingtalk-departments.css';\n\nclass DingtalkDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = deepCopy(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getDingtalkDepartmentsList = (departmentID) => {\n    seafileAPI.adminListDingtalkDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getDingtalkDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListDingtalkDepartmentMembers(department_id).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  }\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getDingtalkDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddDingtalkUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' ', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  }\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getDingtalkDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportDingtalkDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getDingtalkDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? ' ' + success.department_name + ' ' : success.api_user_name + ' ' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  }\n\n  componentDidMount() {\n    this.getDingtalkDepartmentsList(null);\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"operation-item\" onClick={this.onSubmit}>{''}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{''}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <DingtalkDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <DingtalkDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportDingtalkDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DingtalkDepartments;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getItemsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getItemsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No invitations')}</h2>\n        </EmptyTip>\n      );\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Inviter')}</th>\n                <th width=\"20%\">{gettext('Accepter')}</th>\n                <th width=\"9%\">{gettext('Type')}</th>\n                <th width=\"14%\">{gettext('Invited at')}</th>\n                <th width=\"14%\">{gettext('Accepted at')}</th>\n                <th width=\"18%\">{gettext('Expired at')}</th>\n                <th width=\"5%\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.deleteItem();\n        break;\n      default:\n        break;\n    }\n  }\n\n  getInviteTypeText = () => {\n    let translateResult = '';\n    switch (this.props.item.invite_type) {\n      case 'Guest':\n        translateResult = gettext('Guest');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const {\n      isOpIconShown\n    } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.inviter_email} name={item.inviter_name} />\n          </td>\n          <td>\n            {item.accept_time ?\n              <UserLink email={item.accepter_email} name={item.accepter_name} /> :\n              item.accepter_email\n            }\n          </td>\n          <td>{this.getInviteTypeText()}</td>\n          <td>\n            <span title={moment(item.invite_time).format('llll')}>{moment(item.invite_time).fromNow()}</span>\n          </td>\n          <td>\n            {item.accept_time ?\n              <span title={moment(item.accept_time).format('llll')}>{moment(item.accept_time).fromNow()}</span> :\n              '--'\n            }\n          </td>\n          <td>\n            {item.is_expired ?\n              <span className=\"text-red\">{moment(item.expire_time).format('YYYY-MM-DD HH:mm')}</span> :\n              moment(item.expire_time).format('YYYY-MM-DD HH:mm')\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Invitations extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      totalItemCount: 0,\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInvitations(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.invitation_list,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (targetItem) => {\n    const token = targetItem.token;\n    seafileAPI.sysAdminDeleteInvitation(token).then(res => {\n      let items = this.state.items.filter(item => {\n        return item.token != token;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteItemInBatch = () => {\n    seafileAPI.sysAdminDeleteExpiredInvitations().then(res => {\n      const prevItems = this.state.items;\n      const items = this.state.items.filter(item => !item.is_expired || item.accept_time);\n      if (items.length < prevItems.length) {\n        this.setState({\n          items: items\n        });\n        toaster.success(gettext('Operation succeeded.'));\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.deleteItemInBatch}>{gettext('Delete Expired Invitations')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invitations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getItemsByPage={this.getItemsByPage}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Invitations;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { SimpleEditor } from '@seafile/seafile-editor';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string,\n  content: PropTypes.string,\n  onCommit: PropTypes.func.isRequired,\n  onCloseEditorDialog: PropTypes.func.isRequired,\n};\n\nclass TermsEditorDialog extends React.Component {\n\n  static defaultProps = {\n    title: gettext('Terms'),\n  }\n\n  onKeyDown = (event) => {\n    event.stopPropagation();\n  }\n\n  toggle = () => {\n    if (this.isContentChanged()) {\n      let currentContent = this.getCurrentContent();\n      this.props.onCommit(currentContent);\n    }\n    this.props.onCloseEditorDialog();\n  }\n\n  isContentChanged = () => {\n    return this.simpleEditor.hasContentChange();\n  }\n\n  getCurrentContent = () => {\n    let markdownContent = this.simpleEditor.getMarkdown();\n    return markdownContent;\n  }\n\n  setSimpleEditorRef = (editor) => {\n    this.simpleEditor = editor;\n  }\n\n  render() {\n    let { content, title } = this.props;\n    return (\n      <Modal\n        isOpen={true}\n        toggle={this.toggle}\n        onKeyDown={this.onKeyDown}\n        wrapClassName={'conditions-editor-dialog-wrapper'}\n        className={'conditions-editor-dialog'}\n        contentClassName={'conditions-editor-dialog-content'}\n        size={'lg'}\n        style={{width: 770}}\n      >\n        <ModalHeader className=\"conditions-editor-dialog-title\" toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody className={'conditions-editor-dialog-main'}>\n          <SimpleEditor\n            onRef={this.setSimpleEditorRef.bind(this)}\n            value={content || ''}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nTermsEditorDialog.propTypes = propTypes;\n\nexport default TermsEditorDialog;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport TermsPreviewWidget from '../../terms-preview-widget';\nimport TermsEditorDialog from '../terms-editor-dialog';\n\nimport '../../../css/terms-conditions-editor.css';\n\nconst propTypes = {\n  isUpdate: PropTypes.bool,\n  oldTermObj: PropTypes.object,\n  addTerm: PropTypes.func,\n  updateTerm: PropTypes.func,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass AddOrUpdateTermDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      versionNumber: '',\n      text: '',\n      isActive: true,\n      errorMsg: '',\n      isConditionsEditorDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    let oldTermObj = this.props.oldTermObj;\n    if (oldTermObj) {\n      this.setState({\n        name: oldTermObj.name,\n        versionNumber: oldTermObj.version_number,\n        text: oldTermObj.text,\n        isActive: !(oldTermObj.activate_time === ''),\n      });\n    }\n  }\n\n  handleNameChange = (e) => {\n    this.setState({name: e.target.value.trim()});\n  }\n\n  handleVersionNumberChange = (e) => {\n    this.setState({versionNumber: e.target.value.trim()});\n  }\n\n  handleTextChange = (e) => {\n    this.setState({text: e.target.value.trim()});\n  }\n\n  setActive = () => {\n    this.setState({isActive: true});\n  }\n\n  setInActive = () => {\n    this.setState({isActive: false});\n  }\n\n  addTerm = () => {\n    let { name, versionNumber, text, isActive } = this.state;\n    if (name === '') {\n      this.setState({errMsg: gettext('Name is required.')});\n      return;\n    }\n    if (versionNumber === '') {\n      this.setState({errMsg: gettext('Version Number is required.')});\n      return;\n    }\n    if (isNaN(versionNumber)) {\n      this.setState({errMsg: gettext('Version Number must be a number.')});\n      return;\n    }\n    if (text === '') {\n      this.setState({errMsg: gettext('Text is required.')});\n      return;\n    }\n    if (this.props.isUpdate) {\n      this.props.updateTerm(name, versionNumber, text, isActive);\n    } else {\n      this.props.addTerm(name, versionNumber, text, isActive);\n    }\n  }\n\n  onContentClick = () => {\n    this.setState({isConditionsEditorDialogShow: !this.state.isConditionsEditorDialogShow});\n  }\n\n  onCloseEditorDialog = () => {\n    this.setState({isConditionsEditorDialogShow: false});\n  }\n\n  onUpdateContent = (content) => {\n    this.setState({ text: content });\n  }\n\n  render() {\n    let title = this.props.isUpdate ? gettext('Update Terms and Conditions') : gettext('Add Terms and Conditions');\n    return (\n      <Fragment>\n        <Modal isOpen={true} toggle={this.props.toggle}>\n          <ModalHeader toggle={this.props.toggle}>{title}</ModalHeader>\n          <ModalBody>\n            <FormGroup>\n              <Label for=\"name\">{gettext('Name')}</Label>\n              <Input id=\"name\" value={this.state.name} onChange={this.handleNameChange}/>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Version Number')}</Label>\n              <Input value={this.state.versionNumber} onChange={this.handleVersionNumberChange}/>\n            </FormGroup>\n            <FormGroup className=\"form-content\">\n              <Label>{gettext('Text')}</Label>\n              <TermsPreviewWidget content={this.state.text} onContentClick={this.onContentClick}/>\n            </FormGroup>\n            <FormGroup tag=\"fieldset\">\n              <Label>{gettext('Activated')}</Label>\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"radio\" checked={this.state.isActive} onChange={this.setActive} />\n                  {' '}{gettext('On')}\n                </Label>\n              </FormGroup>\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"radio\" checked={!this.state.isActive} onChange={this.setInActive} />\n                  {' '}{gettext('Off')}\n                </Label>\n              </FormGroup>\n            </FormGroup>\n            {this.state.errMsg && <Alert color=\"danger\">{this.state.errMsg}</Alert>}\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.addTerm}>{gettext('Submit')}</Button>\n          </ModalFooter>\n        </Modal>\n        {this.state.isConditionsEditorDialogShow && (\n          <TermsEditorDialog\n            content={this.state.text}\n            onCommit={this.onUpdateContent}\n            onCloseEditorDialog={this.onCloseEditorDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nAddOrUpdateTermDialog.propTypes = propTypes;\n\nexport default AddOrUpdateTermDialog;\n","const hrefReg = /\\[.+\\]\\(\\S+\\)|<img src=(\\S+).+\\/>|!\\[\\]\\(\\S+\\)|<\\S+>/g,\n  imageReg1 = /^<img src=\"(\\S+)\" .+\\/>/,\n  imageReg2 = /^!\\[\\]\\((\\S+)\\)/,\n  linkReg1 = /^\\[.+\\]\\(\\S+\\)/,\n  linkReg2 = /^<\\S+>$/;\n\nconst getLinks = (hrefs) => {\n  const hrefObj = {\n    links: [],\n    images: []\n  };\n  hrefs.forEach((href) => {\n    if (href.search(linkReg1) >= 0 || href.search(linkReg2) >= 0) {\n      hrefObj.links.push(href);\n    } else {\n      let imageSrcs = href.match(imageReg1);\n      let imageSrcs1 = href.match(imageReg2);\n      if (imageSrcs) {\n        hrefObj.images.push(imageSrcs[1]);\n      } else if (imageSrcs1) {\n        hrefObj.images.push(imageSrcs1[1]);\n      }\n    }\n  });\n  return hrefObj;\n};\n\n\nconst getPreviewContent = (markdownContent) => {\n  let previewText = '';\n  let newMarkdownContent = markdownContent.replace(hrefReg, '');\n  for (let index = 0; index < newMarkdownContent.length; index++) {\n    if (newMarkdownContent[index] === '#') {\n      continue;\n    } else if (newMarkdownContent[index] === '\\n') {\n      previewText += ' ';\n    } else {\n      previewText += newMarkdownContent[index];\n    }\n    if (previewText.length === 30) {\n      break;\n    }\n  }\n\n  const hrefs = markdownContent.match(hrefReg);\n  if (hrefs) {\n    const { images, links } = getLinks(hrefs);\n    return { previewText, images, links };\n  }\n  return { previewText, images: [], links: [] };\n};\n\n\nexport default getPreviewContent;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport TermsPreviewWidget from '../terms-preview-widget';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string,\n  content: PropTypes.string,\n  onClosePreviewDialog: PropTypes.func.isRequired,\n};\n\nclass TermsPreviewDialog extends React.Component {\n\n  static defaultProps = {\n    title: gettext('Terms'),\n  }\n\n\n  toggle = () => {\n    this.props.onClosePreviewDialog();\n  }\n\n  render() {\n    let { title, content } = this.props;\n    return (\n      <Modal\n        isOpen={true}\n        size={'lg'}\n        style={{width: 600}}\n        wrapClassName={'conditions-perview-wrapper'}\n        toggle={this.toggle}\n      >\n        <ModalHeader toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody>\n          <TermsPreviewWidget content={content} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nTermsPreviewDialog.propTypes = propTypes;\n\nexport default TermsPreviewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport getPreviewContent from '../../../utils/markdown-utils';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TermsPerviewDialog from '../../../components/dialog/terms-preview-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\n\nconst propsTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      itemContent: '...',\n      isOpIconShown: false,\n      isUpdateDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTermsPerviewDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let mdFile = this.props.item.text;\n    processor.process(mdFile).then((result) => {\n      let innerHtml = String(result);\n      this.setState({itemContent: innerHtml});\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.item.text !== this.props.item.text) {\n      let mdFile = nextProps.item.text;\n      processor.process(mdFile).then((result) => {\n        let innerHtml = String(result);\n        this.setState({itemContent: innerHtml});\n      });\n    }\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  toggleUpdateDialog = (e) => {\n    this.setState({isUpdateDialogOpen: !this.state.isUpdateDialogOpen});\n  }\n\n  toggleDeleteDialog = (e) => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTermsContentDialog = (e) => {\n    this.setState({isTermsPerviewDialogOpen: !this.state.isTermsPerviewDialogOpen});\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Update':\n        this.toggleUpdateDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  deleteTerm = () => {\n    this.props.deleteTerm(this.props.item.id);\n    this.toggleDeleteDialog();\n  }\n\n  updateTerm = (name, versionNumber, text, isActive) => {\n    this.props.updateTerm(this.props.item.id, name, versionNumber, text, isActive);\n    this.toggleUpdateDialog();\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Update':\n        translateResult = gettext('Update');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    let { item } = this.props;\n    let { isDeleteDialogOpen, isUpdateDialogOpen, isTermsPerviewDialogOpen } = this.state;\n    let previewContent = getPreviewContent(item.text);\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>{item.name}</td>\n          <td>{item.version_number}</td>\n          <td className=\"ellipsis\">\n            <a href='#' onClick={this.toggleTermsContentDialog}>{previewContent.previewText}</a>\n          </td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.activate_time ? moment(item.activate_time).fromNow() : '--'}</td>\n          <td>\n            {this.state.isOpIconShown &&\n              <OpMenu\n                operations={['Update', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete T&C')}\n              message={deleteDialogMsg}\n              toggleDialog={this.toggleDeleteDialog}\n              executeOperation={this.deleteTerm}\n              confirmBtnText={gettext('Delete')}\n            />\n          </ModalPortal>\n        }\n        {isUpdateDialogOpen &&\n          <ModalPortal>\n            <AddOrUpdateTermDialog\n              updateTerm={this.updateTerm}\n              toggle={this.toggleUpdateDialog}\n              isUpdate={true}\n              oldTermObj={item}\n            />\n          </ModalPortal>\n        }\n        {isTermsPerviewDialogOpen &&\n          <ModalPortal>\n            <TermsPerviewDialog\n              content={item.text}\n              onClosePreviewDialog={this.toggleTermsContentDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = propsTypes;\n\nexport default Item;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Item from './item';\n\nconst propTypes = {\n  loading: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n  errorMsg: PropTypes.string,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No terms and conditions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Version')}</th>\n                <th width=\"25%\">{gettext('Text')}</th>\n                <th width=\"20%\">{gettext('Created')}</th>\n                <th width=\"20%\">{gettext('Activated')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    deleteTerm={this.props.deleteTerm}\n                    updateTerm={this.props.updateTerm}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = propTypes;\n\nexport default Content;\n\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './content';\n\nclass TermsAndConditions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      termList: [],\n      isAddTermDialogOpen: false,\n    };\n  }\n\n  toggleAddTermDialog = () => {\n    this.setState({isAddTermDialogOpen: !this.state.isAddTermDialogOpen});\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListTermsAndConditions().then((res) => {\n      this.setState({\n        termList: res.data.term_and_condition_list,\n        loading: false,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  addTerm = (name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminAddTermAndCondition(name, versionNumber, text, isActive).then(res => {\n      // After adding the terms, you need to refresh the page.\n      location.reload();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateTerm = (termID, name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminUpdateTermAndCondition(termID, name, versionNumber, text, isActive).then(res => {\n      let termList = this.state.termList.map(item => {\n        if (item.id == termID) {\n          return res.data;\n        } else {\n          return item;\n        }\n      });\n      this.setState({termList: termList});\n      toaster.success(gettext('Update succeeded.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteTerm = (termID) => {\n    seafileAPI.sysAdminDeleteTermAndCondition(termID).then(res => {\n      let termList = this.state.termList.filter(item => item.id != termID);\n      this.setState({termList: termList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { termList, isAddTermDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddTermDialog}>{gettext('Add')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Terms and Conditions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={termList}\n                deleteTerm={this.deleteTerm}\n                updateTerm={this.updateTerm}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddTermDialogOpen &&\n        <ModalPortal>\n          <AddOrUpdateTermDialog\n            isUpdate={false}\n            addTerm={this.addTerm}\n            toggle={this.toggleAddTermDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TermsAndConditions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all', text: gettext('All')},\n      {name: 'unhandled', urlPart: 'unhandled', text: gettext('Unhandled')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/virus-files/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"27%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass AllVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listVirusFiles(page, perPage).then((res) => {\n      const data = res.data;\n      this.setState({\n        loading: false,\n        virusFiles: data.virus_file_list,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AllVirusFiles;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  }\n\n  toggleItemSelected = (e) => {\n    this.props.toggleItemSelected(this.props.virusFile, e.target.checked);\n  }\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td className=\"text-center\">\n          <input type=\"checkbox\" checked={virusFile.isSelected} onChange={this.toggleItemSelected} />\n        </td>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage,\n      isAllItemsSelected\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"text-center\">\n                  <input type=\"checkbox\" checked={isAllItemsSelected} onChange={this.props.toggleAllSelected} />\n                </th>\n                <th width=\"24%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                    toggleItemSelected={this.props.toggleItemSelected}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass UnhandledVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n\n      isAllItemsSelected: false,\n      selectedItems: [],\n\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    const hasHandled = false;\n    seafileAPI.listVirusFiles(page, perPage, hasHandled).then((res) => {\n      const data = res.data;\n      const items = data.virus_file_list.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        loading: false,\n        virusFiles: items,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  toggleAllSelected = () => {\n    this.setState((prevState) => ({\n      isAllItemsSelected: !prevState.isAllItemsSelected,\n      virusFiles: this.state.virusFiles.map((item) => {\n        item.isSelected = !prevState.isAllItemsSelected;\n        return item;\n      })\n    }));\n  }\n\n  toggleItemSelected = (targetItem, isSelected) => {\n    this.setState({\n      virusFiles: this.state.virusFiles.map((item) => {\n        if (item === targetItem) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    }, () => {\n      this.setState({\n        isAllItemsSelected: !this.state.virusFiles.some(item => !item.isSelected)\n      });\n    });\n  }\n\n  handleSelectedItems = (op) => {\n    // op: 'delete-virus', 'ignore-virus'\n    const virusIDs = this.state.virusFiles\n      .filter(item => {\n        if (op == 'delete-virus') {\n          return item.isSelected && !item.has_deleted;\n        } else {\n          return item.isSelected && !item.has_ignored;\n        }\n      })\n      .map(item => item.virus_id);\n    seafileAPI.batchProcessVirusFiles(virusIDs, op).then((res) => {\n      let fileList = this.state.virusFiles;\n      res.data.success.forEach(item => {\n        let file = fileList.find(file => file.virus_id == item.virus_id);\n        if (op == 'delete-virus') {\n          file.has_deleted = true;\n        } else {\n          file.has_ignored = true;\n        }\n      });\n      this.setState({\n        virusFiles: fileList\n      });\n\n      res.data.failed.forEach(item => {\n        const file = fileList.find(file => file.virus_id == item.virus_id);\n        let errMsg = op == 'delete-virus' ?\n          gettext('Failed to delete %(virus_file) from library %(library): %(error_msg)') :\n          gettext('Failed to ignore %(virus_file) from library %(library): %(error_msg)');\n        errMsg = errMsg.replace('%(virus_file)', file.file_path)\n          .replace('%(library)', file.repo_name)\n          .replace('%(error_msg)', item.error_msg);\n        toaster.danger(errMsg);\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  deleteSelectedItems = () => {\n    const op = 'delete-virus';\n    this.handleSelectedItems(op);\n  }\n\n  ignoreSelectedItems = () => {\n    const op = 'ignore-virus';\n    this.handleSelectedItems(op);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.virusFiles.some(item => item.isSelected) ? (\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button onClick={this.deleteSelectedItems} className=\"operation-item\">{gettext('Delete')}</Button>\n              <Button onClick={this.ignoreSelectedItems} className=\"operation-item\">{gettext('Ignore')}</Button>\n            </Fragment>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"unhandled\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n                isAllItemsSelected={this.state.isAllItemsSelected}\n                toggleAllSelected={this.toggleAllSelected}\n                toggleItemSelected={this.toggleItemSelected}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UnhandledVirusFiles;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass LogsNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'adminOperationLogs', urlPart:'admin-logs/operation', text: gettext('Admin Operation Logs')},\n      {name: 'adminLoginLogs', urlPart:'admin-logs/login', text: gettext('Admin Login Logs')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nLogsNav.propTypes = propTypes;\n\nexport default LogsNav;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, enableSysAdminViewRepo, isPro } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin operation logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Operation')}</th>\n                <th width=\"50%\">{gettext('Detail')}</th>\n                <th width=\"15%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  getOperationText = (operationType) => {\n    switch (operationType) {\n      case 'repo_create': return gettext('Create Library');\n      case 'repo_delete': return gettext('Delete Library');\n      case 'repo_transfer': return gettext('Transfer Library');\n      case 'group_create': return gettext('Create Group');\n      case 'group_transfer': return gettext('Transfer Group');\n      case 'group_delete': return gettext('Delete Group');\n      case 'user_add': return gettext('Add User');\n      case 'user_delete': return gettext('Delete User');\n      default: return '';\n    }\n  }\n\n  getOperationDetail = (item) => {\n    let detail = item.detail;\n\n    let ownerPageUrl = '';\n    if (detail.owner) {\n      ownerPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.owner) + '/';\n    }\n    let userPageUrl = '';\n    if (detail.email) {\n      userPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.email) + '/';\n    }\n    let detailText = '';\n    let repoPageUrl = '';\n    let groupPageUrl = '';\n    if (item.operation == 'repo_create' || item.operation == 'repo_delete' || item.operation == 'repo_transfer') {\n      repoPageUrl = siteRoot + 'sys/libraries/' + detail.id + '/' + encodeURIComponent(detail.name) + '/';\n    }\n    if (item.operation == 'group_create' || item.operation == 'group_delete' || item.operation == 'group_transfer') {\n      groupPageUrl = siteRoot + 'sys/groups/' + detail.id + '/libraries/';\n    }\n\n    switch (item.operation) {\n      case 'repo_create':\n        detailText = gettext('Created library {library_name} with {owner} as its owner')\n          .replace('{owner}', '<a href=\"' + ownerPageUrl + '\">' + detail.owner + '</a>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'repo_delete':\n        detailText = gettext('Deleted library {library_name}')\n          .replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'repo_transfer':\n        detailText = gettext('Transferred library {library_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'group_create':\n        detailText = gettext('Created group {group_name}')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_transfer':\n        detailText = gettext('Transferred group {group_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_delete':\n        detailText = gettext('Deleted group {group_name}')\n          .replace('{group_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'user_add':\n        detailText = gettext('Added user {user}')\n          .replace('{user}', '<a href=\"' + userPageUrl + '\">' + detail.email+ '</a>');\n        return detailText;\n\n      case 'user_delete':\n        detailText = gettext('Deleted user {user}')\n          .replace('{user}', '<span class=\"font-weight-bold\">' + detail.email+ '</span>');\n        return detailText;\n\n      default: return '';\n    }\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{this.getOperationText(item.operation)}</td>\n        <td>\n          <span dangerouslySetInnerHTML={{__html: this.getOperationDetail(item)}}></span>\n        </td>\n        <td>{moment(item.datetime).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass AdminOperationLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminOperationLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminOperationLogs;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.login_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass AdminLoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminLoginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminLoginLogs;\n","import React, { Component, Fragment } from 'react';\nimport Account from '../../components/common/account';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../../components/toast';\nimport moment from 'moment';\nimport MainPanelTopbar from './main-panel-topbar';\n\nclass AbuseReports extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      abuseReportList: [],\n    };\n  }\n\n  listAbuseReports = () => {\n    seafileAPI.sysAdminListAbuseReports().then((res) => {\n      this.setState({\n        abuseReportList: res.data.abuse_report_list,\n      });\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  updateAbuseReport = (handled, abuseReportId) => {\n    seafileAPI.sysAdminUpdateAbuseReport(handled, abuseReportId).then((res) => {\n      const abuseReportList = this.state.abuseReportList.map((item, index) => {\n        if (item.id === abuseReportId) {\n          item.handled = res.data.handled;\n        }\n        return item;\n      });\n      this.setState({\n        abuseReportList: abuseReportList,\n      });\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAbuseReports();\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    const AbuseReportList = this.state.abuseReportList.map((item, index) => {\n      const handled = (!item.handled).toString();\n      const abuseReportId = item.id;\n      const fileUrl = siteRoot + 'lib/' + item.repo_id + '/file' + item.file_path;\n      return (\n        <tr key={index}>\n          <td>{item.repo_name}</td>\n          <td><a href={fileUrl} target=\"_blank\">{item.file_path}</a></td>\n          <td>{item.reporter}</td>\n          <td>{item.abuse_type}</td>\n          <td>{item.description}</td>\n          <td>{moment(item.time).format('YYYY-MM-DD')}</td>\n          <td><p onClick={this.updateAbuseReport.bind(this, handled, abuseReportId)}\n            className=\"op-target ellipsis ellipsis-op-target cursor-pointer\"\n          >{gettext(item.handled.toString())}</p></td>\n        </tr>\n      );\n    });\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Abuse Reports')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table className={`table-hover`}>\n                <thead>\n                    <tr>\n                      <th width=\"20%\">{gettext('Library')}</th>\n                      <th width=\"20%\">{gettext('File')}</th>\n                      <th width=\"10%\">{gettext('Reporter')}</th>\n                      <th width=\"15%\">{gettext('Abuse Type')}</th>\n                      <th width=\"20%\">{gettext('Description')}</th>\n                      <th width=\"10%\">{gettext('Time')}</th>\n                      <th width=\"5%\">{gettext('Handled')}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                  {AbuseReportList}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AbuseReports;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { Router } from '@gatsbyjs/reach-router';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nimport SidePanel from './side-panel';\nimport MainPanel from './main-panel';\n\nimport Info from './info';\n\nimport StatisticFile from './statistic/statistic-file';\nimport StatisticStorage from './statistic/statistic-storage';\nimport StatisticTraffic from './statistic/statistic-traffic';\nimport StatisticUsers from './statistic/statistic-users';\nimport StatisticReport from './statistic/statistic-reports';\n\nimport DesktopDevices from './devices/desktop-devices';\nimport MobileDevices from './devices/mobile-devices';\nimport DeviceErrors from './devices/devices-errors';\n\nimport Users from './users/users';\nimport AdminUsers from './users/admin-users';\nimport LDAPImportedUsers from './users/ldap-imported-users';\nimport LDAPUsers from './users/ldap-users';\nimport SearchUsers from './users/search-users';\nimport User from './users/user-info';\nimport UserOwnedRepos from './users/user-repos';\nimport UserSharedRepos from './users/user-shared-repos';\nimport UserLinks from './users/user-links';\nimport UserGroups from './users/user-groups';\n\nimport AllRepos from './repos/all-repos';\nimport SystemRepo from './repos/system-repo';\nimport TrashRepos from './repos/trash-repos';\nimport SearchRepos from './repos/search-repos';\nimport DirView from './repos/dir-view';\n\nimport Groups from './groups/groups';\nimport SearchGroups from './groups/search-groups';\nimport GroupRepos from './groups/group-repos';\nimport GroupMembers from './groups/group-members';\n\nimport Departments from './departments/departments';\nimport DepartmentList from './departments/department-list';\nimport SubDepartments from './departments/sub-departments';\nimport DepartmentMembers from './departments/department-members';\nimport DepartmentLibraries from './departments/department-libraries';\n\nimport ShareLinks from './links/share-links';\nimport UploadLinks from './links/upload-links';\n\nimport Orgs from './orgs/orgs';\nimport SearchOrgs from './orgs/search-orgs';\nimport OrgInfo from './orgs/org-info';\nimport OrgUsers from './orgs/org-users';\nimport OrgGroups from './orgs/org-groups';\nimport OrgRepos from './orgs/org-repos';\n\nimport Institutions from './institutions/institutions';\nimport InstitutionInfo from './institutions/institution-info';\nimport InstitutionUsers from './institutions/institution-users';\nimport InstitutionAdmins from './institutions/institution-admins';\n\nimport LoginLogs from './logs-page/login-logs';\nimport FileAccessLogs from './logs-page/file-access-logs';\nimport FileUpdateLogs from './logs-page/file-update-logs';\nimport SharePermissionLogs from './logs-page/share-permission-logs';\n\nimport WebSettings from './web-settings/web-settings';\nimport Notifications from './notifications/notifications';\nimport FileScanRecords from './file-scan-records';\nimport WorkWeixinDepartments from './work-weixin-departments';\nimport DingtalkDepartments from './dingtalk-departments';\nimport Invitations from './invitations/invitations';\nimport TermsAndConditions from './terms-and-conditions/terms-and-conditions';\n\nimport AllVirusFiles from './virus-scan/all-virus-files';\nimport UnhandledVirusFiles from './virus-scan/unhandled-virus-files';\n\nimport AdminOperationLogs from './admin-logs/operation-logs';\nimport AdminLoginLogs from './admin-logs/login-logs';\n\nimport AbuseReports from './abuse-reports';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\n\nclass SysAdmin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidePanelClosed: false,\n      currentTab: 'file-scan'\n    };\n  }\n\n  componentDidMount() {\n    let href = window.location.href.split('/');\n    let currentTab = href[href.length - 2];\n\n    const pageList = [\n      {\n        tab: 'devices',\n        urlPartList: ['desktop-devices', 'mobile-devices', 'device-errors']\n      },\n      {\n        tab: 'libraries',\n        urlPartList: ['all-libraries', 'search-libraries', 'system-library', 'trash-libraries', 'libraries/']\n      },\n      {\n        tab: 'statistic',\n        urlPartList: ['statistics/file', 'statistics/storage', 'statistics/user', 'statistics/traffic', 'statistics/reports']\n      },\n      {\n        tab: 'users',\n        urlPartList: ['users/', 'search-users/']\n      },\n      {\n        tab: 'groups',\n        urlPartList: ['groups/', 'search-groups/']\n      },\n      {\n        tab: 'organizations',\n        urlPartList: ['organizations/', 'search-organizations/']\n      },\n      {\n        tab: 'links',\n        urlPartList: ['share-links/', 'upload-links/']\n      },\n      {\n        tab: 'institutions',\n        urlPartList: ['institutions/']\n      },\n      {\n        tab: 'termsandconditions',\n        urlPartList: ['terms-and-conditions/']\n      },\n      {\n        tab: 'departments',\n        urlPartList: ['departments/']\n      },\n      {\n        tab: 'logs',\n        urlPartList: ['logs/']\n      },\n      {\n        tab: 'virus-files',\n        urlPartList: ['virus-files/']\n      },\n      {\n        tab: 'adminLogs',\n        urlPartList: ['admin-logs/']\n      }\n    ];\n    const tmpTab = this.getCurrentTabForPageList(pageList);\n    currentTab = tmpTab ? tmpTab : currentTab;\n\n    this.setState({currentTab: currentTab});\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  getCurrentTabForPageList = (pageList) => {\n    let urlPartList, tab;\n    const urlBase = `${siteRoot}sys/`;\n    for (let i = 0, len = pageList.length; i < len; i++) {\n      urlPartList = pageList[i].urlPartList;\n      tab = pageList[i].tab;\n      for (let j = 0, jlen = urlPartList.length; j < jlen; j++) {\n        if (location.href.indexOf(`${urlBase}${urlPartList[j]}`) != -1) {\n          return tab;\n        }\n      }\n    }\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({isSidePanelClosed: !this.state.isSidePanelClosed});\n  }\n\n  tabItemClick = (param) => {\n    this.setState({currentTab: param});\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    const { currentTab, isSidePanelClosed } = this.state;\n    const commonProps = {\n      toggleSidePanel: this.toggleSidePanel\n    };\n\n    return (\n      <div id=\"main\">\n        <SidePanel\n          isSidePanelClosed={isSidePanelClosed}\n          onCloseSidePanel={this.onCloseSidePanel}\n          currentTab={currentTab}\n          tabItemClick={this.tabItemClick}\n        />\n        <MainPanel>\n          <Router className=\"reach-router\">\n            <Info path={siteRoot + 'sys/info'} {...commonProps} />\n            <StatisticFile path={siteRoot + 'sys/statistics/file'} {...commonProps} />\n            <StatisticStorage path={siteRoot + 'sys/statistics/storage'} {...commonProps} />\n            <StatisticUsers path={siteRoot + 'sys/statistics/user'} {...commonProps} />\n            <StatisticTraffic path={siteRoot + 'sys/statistics/traffic'} {...commonProps} />\n            <StatisticReport path={siteRoot + 'sys/statistics/reports'} {...commonProps} />\n            <DesktopDevices path={siteRoot + 'sys/desktop-devices'} {...commonProps} />\n            <MobileDevices path={siteRoot + 'sys/mobile-devices'} {...commonProps} />\n            <DeviceErrors path={siteRoot + 'sys/device-errors'} {...commonProps} />\n            <AllRepos path={siteRoot + 'sys/all-libraries'} {...commonProps} />\n            <SystemRepo path={siteRoot + 'sys/system-library'} {...commonProps} />\n            <TrashRepos path={siteRoot + 'sys/trash-libraries'} {...commonProps} />\n            <SearchRepos path={siteRoot + 'sys/search-libraries'} {...commonProps} />\n            <DirView path={siteRoot + 'sys/libraries/:repoID/*'} {...commonProps} />\n            <WebSettings path={siteRoot + 'sys/web-settings'} {...commonProps} />\n            <Notifications path={siteRoot + 'sys/notifications'} {...commonProps} />\n            <Groups path={siteRoot + 'sys/groups'} {...commonProps} />\n            <SearchGroups path={siteRoot + 'sys/search-groups'} {...commonProps} />\n            <GroupRepos path={siteRoot + 'sys/groups/:groupID/libraries'} {...commonProps} />\n            <GroupMembers path={siteRoot + 'sys/groups/:groupID/members'} {...commonProps} />\n            <Departments path={siteRoot + 'sys/departments'}>\n              <DepartmentList path='/' {...commonProps} />\n              <SubDepartments path='/:groupID' {...commonProps} />\n              <DepartmentMembers path='/:groupID/members' {...commonProps} />\n              <DepartmentLibraries path='/:groupID/libraries' {...commonProps} />\n            </Departments>\n            <ShareLinks path={siteRoot + 'sys/share-links'} {...commonProps} />\n            <UploadLinks path={siteRoot + 'sys/upload-links'} {...commonProps} />\n            <Orgs path={siteRoot + 'sys/organizations'} {...commonProps} />\n            <SearchOrgs path={siteRoot + 'sys/search-organizations'} {...commonProps} />\n            <OrgInfo path={siteRoot + 'sys/organizations/:orgID/info'} {...commonProps} />\n            <OrgUsers path={siteRoot + 'sys/organizations/:orgID/users'} {...commonProps} />\n            <OrgGroups path={siteRoot + 'sys/organizations/:orgID/groups'} {...commonProps} />\n            <OrgRepos path={siteRoot + 'sys/organizations/:orgID/libraries'} {...commonProps} />\n            <Institutions path={siteRoot + 'sys/institutions'} {...commonProps} />\n            <InstitutionInfo path={siteRoot + 'sys/institutions/:institutionID/info'} {...commonProps} />\n            <InstitutionUsers path={siteRoot + 'sys/institutions/:institutionID/members'} {...commonProps} />\n            <InstitutionAdmins path={siteRoot + 'sys/institutions/:institutionID/admins'} {...commonProps} />\n            <LoginLogs path={siteRoot + 'sys/logs/login'} {...commonProps} />\n            <FileAccessLogs path={siteRoot + 'sys/logs/file-access'} {...commonProps} />\n            <FileUpdateLogs path={siteRoot + 'sys/logs/file-update'} {...commonProps} />\n            <SharePermissionLogs path={siteRoot + 'sys/logs/share-permission'} {...commonProps} />\n            <AdminOperationLogs path={siteRoot + 'sys/admin-logs/operation'} {...commonProps} />\n            <AdminLoginLogs path={siteRoot + 'sys/admin-logs/login'} {...commonProps} />\n\n            <Users path={siteRoot + 'sys/users'} {...commonProps} />\n            <AdminUsers path={siteRoot + 'sys/users/admins'} {...commonProps} />\n            <LDAPImportedUsers path={siteRoot + 'sys/users/ldap-imported'} {...commonProps} />\n            <LDAPUsers path={siteRoot + 'sys/users/ldap'} {...commonProps} />\n            <SearchUsers path={siteRoot + 'sys/search-users'} {...commonProps} />\n            <User path={siteRoot + 'sys/users/:email'} {...commonProps} />\n            <UserOwnedRepos path={siteRoot + 'sys/users/:email/owned-libraries'} {...commonProps} />\n            <UserSharedRepos path={siteRoot + 'sys/users/:email/shared-libraries'} {...commonProps} />\n            <UserLinks path={siteRoot + 'sys/users/:email/shared-links'} {...commonProps} />\n            <UserGroups path={siteRoot + 'sys/users/:email/groups'} {...commonProps} />\n\n            <Invitations path={siteRoot + 'sys/invitations'} {...commonProps} />\n            <TermsAndConditions path={siteRoot + 'sys/terms-and-conditions/'} {...commonProps} />\n\n            <AllVirusFiles path={siteRoot + 'sys/virus-files/all'} {...commonProps} />\n            <UnhandledVirusFiles path={siteRoot + 'sys/virus-files/unhandled'} {...commonProps} />\n\n            <FileScanRecords path={siteRoot + 'sys/file-scan-records'} {...commonProps} />\n            <WorkWeixinDepartments path={siteRoot + 'sys/work-weixin'} {...commonProps} />\n            <DingtalkDepartments path={siteRoot + 'sys/dingtalk'} {...commonProps} />\n            <AbuseReports path={siteRoot + 'sys/abuse-reports'} {...commonProps} />\n          </Router>\n        </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SysAdmin />, document.getElementById('wrapper'));\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","\n;(function (name, root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory()\n  }\n  /* istanbul ignore next */\n  else if (typeof define === 'function' && define.amd) {\n    define(factory)\n  }\n  else {\n    root[name] = factory()\n  }\n}('dcopy', this, function () {\n  /**\n   * Deep copy objects and arrays\n   *\n   * @param {Object/Array} target\n   * @return {Object/Array} copy\n   * @api public\n   */\n\n  return function (target) {\n    if (/number|string|boolean/.test(typeof target)) {\n      return target\n    }\n    if (target instanceof Date) {\n      return new Date(target.getTime())\n    }\n\n    var copy = (target instanceof Array) ? [] : {}\n    walk(target, copy)\n    return copy\n\n    function walk (target, copy) {\n      for (var key in target) {\n        var obj = target[key]\n        if (obj instanceof Date) {\n          var value = new Date(obj.getTime())\n          add(copy, key, value)\n        }\n        else if (obj instanceof Function) {\n          var value = obj\n          add(copy, key, value)\n        }\n        else if (obj instanceof Array) {\n          var value = []\n          var last = add(copy, key, value)\n          walk(obj, last)\n        }\n        else if (obj instanceof Object) {\n          var value = {}\n          var last = add(copy, key, value)\n          walk(obj, last)\n        }\n        else {\n          var value = obj\n          add(copy, key, value)\n        }\n      }\n    }\n  }\n\n  /**\n   * Adds a value to the copy object based on its type\n   *\n   * @api private\n   */\n\n  function add (copy, key, value) {\n    if (copy instanceof Array) {\n      copy.push(value)\n      return copy[copy.length - 1]\n    }\n    else if (copy instanceof Object) {\n      copy[key] = value\n      return copy[key]\n    }\n  }\n}))\n","/* MIT license */\nvar cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nvar reverseKeywords = {};\nfor (var key in cssKeywords) {\n\tif (cssKeywords.hasOwnProperty(key)) {\n\t\treverseKeywords[cssKeywords[key]] = key;\n\t}\n}\n\nvar convert = module.exports = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\n// hide .channels and .labels properties\nfor (var model in convert) {\n\tif (convert.hasOwnProperty(model)) {\n\t\tif (!('channels' in convert[model])) {\n\t\t\tthrow new Error('missing channels property: ' + model);\n\t\t}\n\n\t\tif (!('labels' in convert[model])) {\n\t\t\tthrow new Error('missing channel labels property: ' + model);\n\t\t}\n\n\t\tif (convert[model].labels.length !== convert[model].channels) {\n\t\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t\t}\n\n\t\tvar channels = convert[model].channels;\n\t\tvar labels = convert[model].labels;\n\t\tdelete convert[model].channels;\n\t\tdelete convert[model].labels;\n\t\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\t\tObject.defineProperty(convert[model], 'labels', {value: labels});\n\t}\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar l;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tvar rdif;\n\tvar gdif;\n\tvar bdif;\n\tvar h;\n\tvar s;\n\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar v = Math.max(r, g, b);\n\tvar diff = v - Math.min(r, g, b);\n\tvar diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = s = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar h = convert.rgb.hsl(rgb)[0];\n\tvar w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar c;\n\tvar m;\n\tvar y;\n\tvar k;\n\n\tk = Math.min(1 - r, 1 - g, 1 - b);\n\tc = (1 - r - k) / (1 - k) || 0;\n\tm = (1 - g - k) / (1 - k) || 0;\n\ty = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\nfunction comparativeDistance(x, y) {\n\treturn (\n\t\tMath.pow(x[0] - y[0], 2) +\n\t\tMath.pow(x[1] - y[1], 2) +\n\t\tMath.pow(x[2] - y[2], 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tvar reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tvar currentClosestDistance = Infinity;\n\tvar currentClosestKeyword;\n\n\tfor (var keyword in cssKeywords) {\n\t\tif (cssKeywords.hasOwnProperty(keyword)) {\n\t\t\tvar value = cssKeywords[keyword];\n\n\t\t\t// Compute comparative distance\n\t\t\tvar distance = comparativeDistance(rgb, value);\n\n\t\t\t// Check if its less, if so set as closest\n\t\t\tif (distance < currentClosestDistance) {\n\t\t\t\tcurrentClosestDistance = distance;\n\t\t\t\tcurrentClosestKeyword = keyword;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tvar y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tvar z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tvar xyz = convert.rgb.xyz(rgb);\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tvar h = hsl[0] / 360;\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar t1;\n\tvar t2;\n\tvar t3;\n\tvar rgb;\n\tvar val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tt1 = 2 * l - t2;\n\n\trgb = [0, 0, 0];\n\tfor (var i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tvar h = hsl[0];\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar smin = s;\n\tvar lmin = Math.max(l, 0.01);\n\tvar sv;\n\tvar v;\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tv = (l + s) / 2;\n\tsv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tvar h = hsv[0] / 60;\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar hi = Math.floor(h) % 6;\n\n\tvar f = h - Math.floor(h);\n\tvar p = 255 * v * (1 - s);\n\tvar q = 255 * v * (1 - (s * f));\n\tvar t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tvar h = hsv[0];\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar vmin = Math.max(v, 0.01);\n\tvar lmin;\n\tvar sl;\n\tvar l;\n\n\tl = (2 - s) * v;\n\tlmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tvar h = hwb[0] / 360;\n\tvar wh = hwb[1] / 100;\n\tvar bl = hwb[2] / 100;\n\tvar ratio = wh + bl;\n\tvar i;\n\tvar v;\n\tvar f;\n\tvar n;\n\n\t// wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\ti = Math.floor(6 * h);\n\tv = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tn = wh + f * (v - wh); // linear interpolation\n\n\tvar r;\n\tvar g;\n\tvar b;\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v; g = n; b = wh; break;\n\t\tcase 1: r = n; g = v; b = wh; break;\n\t\tcase 2: r = wh; g = v; b = n; break;\n\t\tcase 3: r = wh; g = n; b = v; break;\n\t\tcase 4: r = n; g = wh; b = v; break;\n\t\tcase 5: r = v; g = wh; b = n; break;\n\t}\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tvar c = cmyk[0] / 100;\n\tvar m = cmyk[1] / 100;\n\tvar y = cmyk[2] / 100;\n\tvar k = cmyk[3] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = 1 - Math.min(1, c * (1 - k) + k);\n\tg = 1 - Math.min(1, m * (1 - k) + k);\n\tb = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tvar x = xyz[0] / 100;\n\tvar y = xyz[1] / 100;\n\tvar z = xyz[2] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar x;\n\tvar y;\n\tvar z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tvar y2 = Math.pow(y, 3);\n\tvar x2 = Math.pow(x, 3);\n\tvar z2 = Math.pow(z, 3);\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar hr;\n\tvar h;\n\tvar c;\n\n\thr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tc = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tvar l = lch[0];\n\tvar c = lch[1];\n\tvar h = lch[2];\n\tvar a;\n\tvar b;\n\tvar hr;\n\n\thr = h / 360 * 2 * Math.PI;\n\ta = c * Math.cos(hr);\n\tb = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\tvar value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tvar ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\n\t// we use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tvar ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tvar color = args % 10;\n\n\t// handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tvar mult = (~~(args > 50) + 1) * 0.5;\n\tvar r = ((color & 1) * mult) * 255;\n\tvar g = (((color >> 1) & 1) * mult) * 255;\n\tvar b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// handle greyscale\n\tif (args >= 232) {\n\t\tvar c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tvar rem;\n\tvar r = Math.floor(args / 36) / 5 * 255;\n\tvar g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tvar b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tvar integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tvar match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tvar colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(function (char) {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tvar integer = parseInt(colorString, 16);\n\tvar r = (integer >> 16) & 0xFF;\n\tvar g = (integer >> 8) & 0xFF;\n\tvar b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar max = Math.max(Math.max(r, g), b);\n\tvar min = Math.min(Math.min(r, g), b);\n\tvar chroma = (max - min);\n\tvar grayscale;\n\tvar hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma + 4;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar c = 1;\n\tvar f = 0;\n\n\tif (l < 0.5) {\n\t\tc = 2.0 * s * l;\n\t} else {\n\t\tc = 2.0 * s * (1.0 - l);\n\t}\n\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\n\tvar c = s * v;\n\tvar f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tvar h = hcg[0] / 360;\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tvar pure = [0, 0, 0];\n\tvar hi = (h % 1) * 6;\n\tvar v = hi % 1;\n\tvar w = 1 - v;\n\tvar mg = 0;\n\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar v = c + g * (1.0 - c);\n\tvar f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar l = g * (1.0 - c) + 0.5 * c;\n\tvar s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\tvar v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tvar w = hwb[1] / 100;\n\tvar b = hwb[2] / 100;\n\tvar v = 1 - b;\n\tvar c = v - w;\n\tvar g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tvar val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tvar integer = (val << 16) + (val << 8) + val;\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tvar val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport '../../css/commit-details.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  commitID: PropTypes.string.isRequired,\n  commitTime: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass CommitDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    const {repoID, commitID} = this.props;\n    seafileAPI.getCommitDetails(repoID, commitID).then((res) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        commitDetails: res.data\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  render() {\n    const { toggleDialog, commitTime} = this.props;\n    return (\n      <Modal isOpen={true} centered={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Modification Details')}</ModalHeader>\n        <ModalBody>\n          <p className=\"small\">{moment(this.props.commitTime).format('YYYY-MM-DD HH:mm:ss')}</p>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  renderDetails = (data) => {\n    const detailsData = [\n      {type: 'new', title: gettext('New files')},\n      {type: 'removed', title: gettext('Deleted files')},\n      {type: 'renamed', title: gettext('Renamed or Moved files')},\n      {type: 'modified', title: gettext('Modified files')},\n      {type: 'newdir', title: gettext('New directories')},\n      {type: 'deldir', title: gettext('Deleted directories')}\n    ];\n\n    let showDesc = true;\n    for (let i = 0, len = detailsData.length; i < len; i++) {\n      if (data[detailsData[i].type].length) {\n        showDesc = false;\n        break;\n      }\n    }\n    if (showDesc) {\n      return <p>{data.cmt_desc}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        {detailsData.map((item, index) => {\n          if (!data[item.type].length) {\n            return;\n          }\n          return (\n            <React.Fragment key={index}>\n              <h6>{item.title}</h6>\n              <ul>\n                {\n                  data[item.type].map((item, index) => {\n                    return <li key={index} dangerouslySetInnerHTML={{__html: item}} className=\"commit-detail-item\"></li>;\n                  })\n                }\n              </ul>\n            </React.Fragment>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const {isLoading, errorMsg, commitDetails} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return this.renderDetails(commitDetails);\n  }\n}\n\nCommitDetails.propTypes = propTypes;\n\nexport default CommitDetails;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Chart\", {\n  enumerable: true,\n  get: function get() {\n    return _chart[\"default\"];\n  }\n});\nexports.defaults = exports.Scatter = exports.Bubble = exports.Polar = exports.Radar = exports.HorizontalBar = exports.Bar = exports.Line = exports.Pie = exports.Doughnut = exports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _chart = _interopRequireDefault(require(\"chart.js\"));\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _keyBy = _interopRequireDefault(require(\"lodash/keyBy\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar NODE_ENV = typeof process !== 'undefined' && process.env && process.env.NODE_ENV;\n\nvar ChartComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(ChartComponent, _React$Component);\n\n  var _super = _createSuper(ChartComponent);\n\n  function ChartComponent() {\n    var _this;\n\n    _classCallCheck(this, ChartComponent);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnClick\", function (event) {\n      var instance = _this.chartInstance;\n      var _this$props = _this.props,\n          getDatasetAtEvent = _this$props.getDatasetAtEvent,\n          getElementAtEvent = _this$props.getElementAtEvent,\n          getElementsAtEvent = _this$props.getElementsAtEvent,\n          onElementsClick = _this$props.onElementsClick;\n      getDatasetAtEvent && getDatasetAtEvent(instance.getDatasetAtEvent(event), event);\n      getElementAtEvent && getElementAtEvent(instance.getElementAtEvent(event), event);\n      getElementsAtEvent && getElementsAtEvent(instance.getElementsAtEvent(event), event);\n      onElementsClick && onElementsClick(instance.getElementsAtEvent(event), event); // Backward compatibility\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", function (element) {\n      _this.element = element;\n    });\n\n    _this.chartInstance = undefined;\n    return _this;\n  }\n\n  _createClass(ChartComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.renderChart();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.redraw) {\n        this.destroyChart();\n        this.renderChart();\n        return;\n      }\n\n      this.updateChart();\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var _this$props2 = this.props,\n          redraw = _this$props2.redraw,\n          type = _this$props2.type,\n          options = _this$props2.options,\n          plugins = _this$props2.plugins,\n          legend = _this$props2.legend,\n          height = _this$props2.height,\n          width = _this$props2.width;\n\n      if (nextProps.redraw === true) {\n        return true;\n      }\n\n      if (height !== nextProps.height || width !== nextProps.width) {\n        return true;\n      }\n\n      if (type !== nextProps.type) {\n        return true;\n      }\n\n      if (!(0, _isEqual[\"default\"])(legend, nextProps.legend)) {\n        return true;\n      }\n\n      if (!(0, _isEqual[\"default\"])(options, nextProps.options)) {\n        return true;\n      }\n\n      var nextData = this.transformDataProp(nextProps);\n\n      if (!(0, _isEqual[\"default\"])(this.shadowDataProp, nextData)) {\n        return true;\n      }\n\n      return !(0, _isEqual[\"default\"])(plugins, nextProps.plugins);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyChart();\n    }\n  }, {\n    key: \"transformDataProp\",\n    value: function transformDataProp(props) {\n      var data = props.data;\n\n      if (typeof data == 'function') {\n        var node = this.element;\n        return data(node);\n      } else {\n        return data;\n      }\n    } // Chart.js directly mutates the data.dataset objects by adding _meta proprerty\n    // this makes impossible to compare the current and next data changes\n    // therefore we memoize the data prop while sending a fake to Chart.js for mutation.\n    // see https://github.com/chartjs/Chart.js/blob/master/src/core/core.controller.js#L615-L617\n\n  }, {\n    key: \"memoizeDataProps\",\n    value: function memoizeDataProps() {\n      if (!this.props.data) {\n        return;\n      }\n\n      var data = this.transformDataProp(this.props);\n      this.shadowDataProp = _objectSpread(_objectSpread({}, data), {}, {\n        datasets: data.datasets && data.datasets.map(function (set) {\n          return _objectSpread({}, set);\n        })\n      });\n      this.saveCurrentDatasets(); // to remove the dataset metadata from this chart when the chart is destroyed\n\n      return data;\n    }\n  }, {\n    key: \"checkDatasets\",\n    value: function checkDatasets(datasets) {\n      var isDev = NODE_ENV !== 'production' && NODE_ENV !== 'prod';\n      var usingCustomKeyProvider = this.props.datasetKeyProvider !== ChartComponent.getLabelAsKey;\n      var multipleDatasets = datasets.length > 1;\n\n      if (isDev && multipleDatasets && !usingCustomKeyProvider) {\n        var shouldWarn = false;\n        datasets.forEach(function (dataset) {\n          if (!dataset.label) {\n            shouldWarn = true;\n          }\n        });\n\n        if (shouldWarn) {\n          console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the \"label\" property on each dataset is used. Alternatively, you may provide a \"datasetKeyProvider\" as a prop that returns a unique key.');\n        }\n      }\n    }\n  }, {\n    key: \"getCurrentDatasets\",\n    value: function getCurrentDatasets() {\n      return this.chartInstance && this.chartInstance.config.data && this.chartInstance.config.data.datasets || [];\n    }\n  }, {\n    key: \"saveCurrentDatasets\",\n    value: function saveCurrentDatasets() {\n      var _this2 = this;\n\n      this.datasets = this.datasets || {};\n      var currentDatasets = this.getCurrentDatasets();\n      currentDatasets.forEach(function (d) {\n        _this2.datasets[_this2.props.datasetKeyProvider(d)] = d;\n      });\n    }\n  }, {\n    key: \"updateChart\",\n    value: function updateChart() {\n      var _this3 = this;\n\n      var options = this.props.options;\n      var data = this.memoizeDataProps(this.props);\n      if (!this.chartInstance) return;\n\n      if (options) {\n        this.chartInstance.options = _chart[\"default\"].helpers.configMerge(this.chartInstance.options, options);\n      } // Pipe datasets to chart instance datasets enabling\n      // seamless transitions\n\n\n      var currentDatasets = this.getCurrentDatasets();\n      var nextDatasets = data.datasets || [];\n      this.checkDatasets(currentDatasets);\n      var currentDatasetsIndexed = (0, _keyBy[\"default\"])(currentDatasets, this.props.datasetKeyProvider); // We can safely replace the dataset array, as long as we retain the _meta property\n      // on each dataset.\n\n      this.chartInstance.config.data.datasets = nextDatasets.map(function (next) {\n        var current = currentDatasetsIndexed[_this3.props.datasetKeyProvider(next)];\n\n        if (current && current.type === next.type && next.data) {\n          // Be robust to no data. Relevant for other update mechanisms as in chartjs-plugin-streaming.\n          // The data array must be edited in place. As chart.js adds listeners to it.\n          current.data.splice(next.data.length);\n          next.data.forEach(function (point, pid) {\n            current.data[pid] = next.data[pid];\n          });\n\n          var _data = next.data,\n              otherProps = _objectWithoutProperties(next, [\"data\"]); // Merge properties. Notice a weakness here. If a property is removed\n          // from next, it will be retained by current and never disappears.\n          // Workaround is to set value to null or undefined in next.\n\n\n          return _objectSpread(_objectSpread({}, current), otherProps);\n        } else {\n          return next;\n        }\n      });\n\n      var datasets = data.datasets,\n          rest = _objectWithoutProperties(data, [\"datasets\"]);\n\n      this.chartInstance.config.data = _objectSpread(_objectSpread({}, this.chartInstance.config.data), rest);\n      this.chartInstance.update();\n    }\n  }, {\n    key: \"renderChart\",\n    value: function renderChart() {\n      var _this$props3 = this.props,\n          options = _this$props3.options,\n          legend = _this$props3.legend,\n          type = _this$props3.type,\n          plugins = _this$props3.plugins;\n      var node = this.element;\n      var data = this.memoizeDataProps();\n\n      if (typeof legend !== 'undefined' && !(0, _isEqual[\"default\"])(ChartComponent.defaultProps.legend, legend)) {\n        options.legend = legend;\n      }\n\n      this.chartInstance = new _chart[\"default\"](node, {\n        type: type,\n        data: data,\n        options: options,\n        plugins: plugins\n      });\n    }\n  }, {\n    key: \"destroyChart\",\n    value: function destroyChart() {\n      if (!this.chartInstance) {\n        return;\n      } // Put all of the datasets that have existed in the chart back on the chart\n      // so that the metadata associated with this chart get destroyed.\n      // This allows the datasets to be used in another chart. This can happen,\n      // for example, in a tabbed UI where the chart gets created each time the\n      // tab gets switched to the chart and uses the same data).\n\n\n      this.saveCurrentDatasets();\n      var datasets = Object.values(this.datasets);\n      this.chartInstance.config.data.datasets = datasets;\n      this.chartInstance.destroy();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          height = _this$props4.height,\n          width = _this$props4.width,\n          id = _this$props4.id;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"canvas\", {\n        ref: this.ref,\n        height: height,\n        width: width,\n        id: id,\n        onClick: this.handleOnClick\n      });\n    }\n  }]);\n\n  return ChartComponent;\n}(_react[\"default\"].Component);\n\n_defineProperty(ChartComponent, \"getLabelAsKey\", function (d) {\n  return d.label;\n});\n\n_defineProperty(ChartComponent, \"propTypes\", {\n  data: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].func]).isRequired,\n  getDatasetAtEvent: _propTypes[\"default\"].func,\n  getElementAtEvent: _propTypes[\"default\"].func,\n  getElementsAtEvent: _propTypes[\"default\"].func,\n  height: _propTypes[\"default\"].number,\n  legend: _propTypes[\"default\"].object,\n  onElementsClick: _propTypes[\"default\"].func,\n  options: _propTypes[\"default\"].object,\n  plugins: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].object),\n  redraw: _propTypes[\"default\"].bool,\n  type: function type(props, propName, componentName) {\n    if (!_chart[\"default\"].controllers[props[propName]]) {\n      return new Error('Invalid chart type `' + props[propName] + '` supplied to' + ' `' + componentName + '`.');\n    }\n  },\n  width: _propTypes[\"default\"].number,\n  datasetKeyProvider: _propTypes[\"default\"].func\n});\n\n_defineProperty(ChartComponent, \"defaultProps\", {\n  legend: {\n    display: true,\n    position: 'bottom'\n  },\n  type: 'doughnut',\n  height: 150,\n  width: 300,\n  redraw: false,\n  options: {},\n  datasetKeyProvider: ChartComponent.getLabelAsKey\n});\n\nvar _default = ChartComponent;\nexports[\"default\"] = _default;\n\nvar Doughnut = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Doughnut, _React$Component2);\n\n  var _super2 = _createSuper(Doughnut);\n\n  function Doughnut() {\n    _classCallCheck(this, Doughnut);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(Doughnut, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref) {\n          return _this4.chartInstance = _ref && _ref.chartInstance;\n        },\n        type: \"doughnut\"\n      }));\n    }\n  }]);\n\n  return Doughnut;\n}(_react[\"default\"].Component);\n\nexports.Doughnut = Doughnut;\n\nvar Pie = /*#__PURE__*/function (_React$Component3) {\n  _inherits(Pie, _React$Component3);\n\n  var _super3 = _createSuper(Pie);\n\n  function Pie() {\n    _classCallCheck(this, Pie);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Pie, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref2) {\n          return _this5.chartInstance = _ref2 && _ref2.chartInstance;\n        },\n        type: \"pie\"\n      }));\n    }\n  }]);\n\n  return Pie;\n}(_react[\"default\"].Component);\n\nexports.Pie = Pie;\n\nvar Line = /*#__PURE__*/function (_React$Component4) {\n  _inherits(Line, _React$Component4);\n\n  var _super4 = _createSuper(Line);\n\n  function Line() {\n    _classCallCheck(this, Line);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(Line, [{\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref3) {\n          return _this6.chartInstance = _ref3 && _ref3.chartInstance;\n        },\n        type: \"line\"\n      }));\n    }\n  }]);\n\n  return Line;\n}(_react[\"default\"].Component);\n\nexports.Line = Line;\n\nvar Bar = /*#__PURE__*/function (_React$Component5) {\n  _inherits(Bar, _React$Component5);\n\n  var _super5 = _createSuper(Bar);\n\n  function Bar() {\n    _classCallCheck(this, Bar);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(Bar, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref4) {\n          return _this7.chartInstance = _ref4 && _ref4.chartInstance;\n        },\n        type: \"bar\"\n      }));\n    }\n  }]);\n\n  return Bar;\n}(_react[\"default\"].Component);\n\nexports.Bar = Bar;\n\nvar HorizontalBar = /*#__PURE__*/function (_React$Component6) {\n  _inherits(HorizontalBar, _React$Component6);\n\n  var _super6 = _createSuper(HorizontalBar);\n\n  function HorizontalBar() {\n    _classCallCheck(this, HorizontalBar);\n\n    return _super6.apply(this, arguments);\n  }\n\n  _createClass(HorizontalBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref5) {\n          return _this8.chartInstance = _ref5 && _ref5.chartInstance;\n        },\n        type: \"horizontalBar\"\n      }));\n    }\n  }]);\n\n  return HorizontalBar;\n}(_react[\"default\"].Component);\n\nexports.HorizontalBar = HorizontalBar;\n\nvar Radar = /*#__PURE__*/function (_React$Component7) {\n  _inherits(Radar, _React$Component7);\n\n  var _super7 = _createSuper(Radar);\n\n  function Radar() {\n    _classCallCheck(this, Radar);\n\n    return _super7.apply(this, arguments);\n  }\n\n  _createClass(Radar, [{\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref6) {\n          return _this9.chartInstance = _ref6 && _ref6.chartInstance;\n        },\n        type: \"radar\"\n      }));\n    }\n  }]);\n\n  return Radar;\n}(_react[\"default\"].Component);\n\nexports.Radar = Radar;\n\nvar Polar = /*#__PURE__*/function (_React$Component8) {\n  _inherits(Polar, _React$Component8);\n\n  var _super8 = _createSuper(Polar);\n\n  function Polar() {\n    _classCallCheck(this, Polar);\n\n    return _super8.apply(this, arguments);\n  }\n\n  _createClass(Polar, [{\n    key: \"render\",\n    value: function render() {\n      var _this10 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref7) {\n          return _this10.chartInstance = _ref7 && _ref7.chartInstance;\n        },\n        type: \"polarArea\"\n      }));\n    }\n  }]);\n\n  return Polar;\n}(_react[\"default\"].Component);\n\nexports.Polar = Polar;\n\nvar Bubble = /*#__PURE__*/function (_React$Component9) {\n  _inherits(Bubble, _React$Component9);\n\n  var _super9 = _createSuper(Bubble);\n\n  function Bubble() {\n    _classCallCheck(this, Bubble);\n\n    return _super9.apply(this, arguments);\n  }\n\n  _createClass(Bubble, [{\n    key: \"render\",\n    value: function render() {\n      var _this11 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref8) {\n          return _this11.chartInstance = _ref8 && _ref8.chartInstance;\n        },\n        type: \"bubble\"\n      }));\n    }\n  }]);\n\n  return Bubble;\n}(_react[\"default\"].Component);\n\nexports.Bubble = Bubble;\n\nvar Scatter = /*#__PURE__*/function (_React$Component10) {\n  _inherits(Scatter, _React$Component10);\n\n  var _super10 = _createSuper(Scatter);\n\n  function Scatter() {\n    _classCallCheck(this, Scatter);\n\n    return _super10.apply(this, arguments);\n  }\n\n  _createClass(Scatter, [{\n    key: \"render\",\n    value: function render() {\n      var _this12 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref9) {\n          return _this12.chartInstance = _ref9 && _ref9.chartInstance;\n        },\n        type: \"scatter\"\n      }));\n    }\n  }]);\n\n  return Scatter;\n}(_react[\"default\"].Component);\n\nexports.Scatter = Scatter;\nvar defaults = _chart[\"default\"].defaults;\nexports.defaults = defaults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro } from '../../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  unlinkDevice: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminUnlinkDevice extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputChecked: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      inputChecked: e.target.checked\n    });\n  }\n\n  unlinkDevice = () => {\n    this.props.toggleDialog();\n    this.props.unlinkDevice(this.state.inputChecked);\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n    const toggle = this.props.toggleDialog;\n    return (\n      <Modal isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          {isPro &&\n          <div className=\"d-flex align-items-center\">\n            <input id=\"delete-files\" className=\"mr-1\" type=\"checkbox\" checked={inputChecked} onChange={this.handleInputChange} />\n            <label htmlFor=\"delete-files\" className=\"m-0\">{gettext('Delete files from this device the next time it comes online.')}</label>\n          </div>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.unlinkDevice}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminUnlinkDevice.propTypes = propTypes;\n\nexport default SysAdminUnlinkDevice;\n","/**\n * @namespace Chart\n */\nvar Chart = require('./core/core.js')();\n\nrequire('./core/core.helpers')(Chart);\nrequire('./core/core.canvasHelpers')(Chart);\nrequire('./core/core.element')(Chart);\nrequire('./core/core.animation')(Chart);\nrequire('./core/core.controller')(Chart);\nrequire('./core/core.datasetController')(Chart);\nrequire('./core/core.layoutService')(Chart);\nrequire('./core/core.scaleService')(Chart);\nrequire('./core/core.plugin.js')(Chart);\nrequire('./core/core.scale')(Chart);\nrequire('./core/core.title')(Chart);\nrequire('./core/core.legend')(Chart);\nrequire('./core/core.tooltip')(Chart);\n\nrequire('./elements/element.arc')(Chart);\nrequire('./elements/element.line')(Chart);\nrequire('./elements/element.point')(Chart);\nrequire('./elements/element.rectangle')(Chart);\n\nrequire('./scales/scale.linearbase.js')(Chart);\nrequire('./scales/scale.category')(Chart);\nrequire('./scales/scale.linear')(Chart);\nrequire('./scales/scale.logarithmic')(Chart);\nrequire('./scales/scale.radialLinear')(Chart);\nrequire('./scales/scale.time')(Chart);\n\n// Controllers must be loaded after elements\n// See Chart.core.datasetController.dataElementType\nrequire('./controllers/controller.bar')(Chart);\nrequire('./controllers/controller.bubble')(Chart);\nrequire('./controllers/controller.doughnut')(Chart);\nrequire('./controllers/controller.line')(Chart);\nrequire('./controllers/controller.polarArea')(Chart);\nrequire('./controllers/controller.radar')(Chart);\n\nrequire('./charts/Chart.Bar')(Chart);\nrequire('./charts/Chart.Bubble')(Chart);\nrequire('./charts/Chart.Doughnut')(Chart);\nrequire('./charts/Chart.Line')(Chart);\nrequire('./charts/Chart.PolarArea')(Chart);\nrequire('./charts/Chart.Radar')(Chart);\nrequire('./charts/Chart.Scatter')(Chart);\n\nwindow.Chart = module.exports = Chart;\n","'use strict';\n\nmodule.exports = function() {\n\n\t// Occupy the global variable of Chart, and create a simple base class\n\tvar Chart = function(context, config) {\n\t\tvar me = this;\n\t\tvar helpers = Chart.helpers;\n\t\tme.config = config || {\n\t\t\tdata: {\n\t\t\t\tdatasets: []\n\t\t\t}\n\t\t};\n\n\t\t// Support a jQuery'd canvas element\n\t\tif (context.length && context[0].getContext) {\n\t\t\tcontext = context[0];\n\t\t}\n\n\t\t// Support a canvas domnode\n\t\tif (context.getContext) {\n\t\t\tcontext = context.getContext('2d');\n\t\t}\n\n\t\tme.ctx = context;\n\t\tme.canvas = context.canvas;\n\n\t\tcontext.canvas.style.display = context.canvas.style.display || 'block';\n\n\t\t// Figure out what the size of the chart will be.\n\t\t// If the canvas has a specified width and height, we use those else\n\t\t// we look to see if the canvas node has a CSS width and height.\n\t\t// If there is still no height, fill the parent container\n\t\tme.width = context.canvas.width || parseInt(helpers.getStyle(context.canvas, 'width'), 10) || helpers.getMaximumWidth(context.canvas);\n\t\tme.height = context.canvas.height || parseInt(helpers.getStyle(context.canvas, 'height'), 10) || helpers.getMaximumHeight(context.canvas);\n\n\t\tme.aspectRatio = me.width / me.height;\n\n\t\tif (isNaN(me.aspectRatio) || isFinite(me.aspectRatio) === false) {\n\t\t\t// If the canvas has no size, try and figure out what the aspect ratio will be.\n\t\t\t// Some charts prefer square canvases (pie, radar, etc). If that is specified, use that\n\t\t\t// else use the canvas default ratio of 2\n\t\t\tme.aspectRatio = config.aspectRatio !== undefined ? config.aspectRatio : 2;\n\t\t}\n\n\t\t// Store the original style of the element so we can set it back\n\t\tme.originalCanvasStyleWidth = context.canvas.style.width;\n\t\tme.originalCanvasStyleHeight = context.canvas.style.height;\n\n\t\t// High pixel density displays - multiply the size of the canvas height/width by the device pixel ratio, then scale.\n\t\thelpers.retinaScale(me);\n\t\tme.controller = new Chart.Controller(me);\n\n\t\t// Always bind this so that if the responsive state changes we still work\n\t\thelpers.addResizeListener(context.canvas.parentNode, function() {\n\t\t\tif (me.controller && me.controller.config.options.responsive) {\n\t\t\t\tme.controller.resize();\n\t\t\t}\n\t\t});\n\n\t\treturn me.controller ? me.controller : me;\n\n\t};\n\n\t// Globally expose the defaults to allow for user updating/changing\n\tChart.defaults = {\n\t\tglobal: {\n\t\t\tresponsive: true,\n\t\t\tresponsiveAnimationDuration: 0,\n\t\t\tmaintainAspectRatio: true,\n\t\t\tevents: ['mousemove', 'mouseout', 'click', 'touchstart', 'touchmove'],\n\t\t\thover: {\n\t\t\t\tonHover: null,\n\t\t\t\tmode: 'single',\n\t\t\t\tanimationDuration: 400\n\t\t\t},\n\t\t\tonClick: null,\n\t\t\tdefaultColor: 'rgba(0,0,0,0.1)',\n\t\t\tdefaultFontColor: '#666',\n\t\t\tdefaultFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n\t\t\tdefaultFontSize: 12,\n\t\t\tdefaultFontStyle: 'normal',\n\t\t\tshowLines: true,\n\n\t\t\t// Element defaults defined in element extensions\n\t\t\telements: {},\n\n\t\t\t// Legend callback string\n\t\t\tlegendCallback: function(chart) {\n\t\t\t\tvar text = [];\n\t\t\t\ttext.push('<ul class=\"' + chart.id + '-legend\">');\n\t\t\t\tfor (var i = 0; i < chart.data.datasets.length; i++) {\n\t\t\t\t\ttext.push('<li><span style=\"background-color:' + chart.data.datasets[i].backgroundColor + '\"></span>');\n\t\t\t\t\tif (chart.data.datasets[i].label) {\n\t\t\t\t\t\ttext.push(chart.data.datasets[i].label);\n\t\t\t\t\t}\n\t\t\t\t\ttext.push('</li>');\n\t\t\t\t}\n\t\t\t\ttext.push('</ul>');\n\n\t\t\t\treturn text.join('');\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.Chart = Chart;\n\n\treturn Chart;\n\n};\n","/* global window: false */\n/* global document: false */\n'use strict';\n\nvar color = require('chartjs-color');\n\nmodule.exports = function(Chart) {\n\t// Global Chart helpers object for utility methods and classes\n\tvar helpers = Chart.helpers = {};\n\n\t// -- Basic js utility methods\n\thelpers.each = function(loopable, callback, self, reverse) {\n\t\t// Check to see if null or undefined firstly.\n\t\tvar i, len;\n\t\tif (helpers.isArray(loopable)) {\n\t\t\tlen = loopable.length;\n\t\t\tif (reverse) {\n\t\t\t\tfor (i = len - 1; i >= 0; i--) {\n\t\t\t\t\tcallback.call(self, loopable[i], i);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\tcallback.call(self, loopable[i], i);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof loopable === 'object') {\n\t\t\tvar keys = Object.keys(loopable);\n\t\t\tlen = keys.length;\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tcallback.call(self, loopable[keys[i]], keys[i]);\n\t\t\t}\n\t\t}\n\t};\n\thelpers.clone = function(obj) {\n\t\tvar objClone = {};\n\t\thelpers.each(obj, function(value, key) {\n\t\t\tif (helpers.isArray(value)) {\n\t\t\t\tobjClone[key] = value.slice(0);\n\t\t\t} else if (typeof value === 'object' && value !== null) {\n\t\t\t\tobjClone[key] = helpers.clone(value);\n\t\t\t} else {\n\t\t\t\tobjClone[key] = value;\n\t\t\t}\n\t\t});\n\t\treturn objClone;\n\t};\n\thelpers.extend = function(base) {\n\t\tvar setFn = function(value, key) {\n\t\t\tbase[key] = value;\n\t\t};\n\t\tfor (var i = 1, ilen = arguments.length; i < ilen; i++) {\n\t\t\thelpers.each(arguments[i], setFn);\n\t\t}\n\t\treturn base;\n\t};\n\t// Need a special merge function to chart configs since they are now grouped\n\thelpers.configMerge = function(_base) {\n\t\tvar base = helpers.clone(_base);\n\t\thelpers.each(Array.prototype.slice.call(arguments, 1), function(extension) {\n\t\t\thelpers.each(extension, function(value, key) {\n\t\t\t\tif (key === 'scales') {\n\t\t\t\t\t// Scale config merging is complex. Add out own function here for that\n\t\t\t\t\tbase[key] = helpers.scaleMerge(base.hasOwnProperty(key) ? base[key] : {}, value);\n\n\t\t\t\t} else if (key === 'scale') {\n\t\t\t\t\t// Used in polar area & radar charts since there is only one scale\n\t\t\t\t\tbase[key] = helpers.configMerge(base.hasOwnProperty(key) ? base[key] : {}, Chart.scaleService.getScaleDefaults(value.type), value);\n\t\t\t\t} else if (base.hasOwnProperty(key) && helpers.isArray(base[key]) && helpers.isArray(value)) {\n\t\t\t\t\t// In this case we have an array of objects replacing another array. Rather than doing a strict replace,\n\t\t\t\t\t// merge. This allows easy scale option merging\n\t\t\t\t\tvar baseArray = base[key];\n\n\t\t\t\t\thelpers.each(value, function(valueObj, index) {\n\n\t\t\t\t\t\tif (index < baseArray.length) {\n\t\t\t\t\t\t\tif (typeof baseArray[index] === 'object' && baseArray[index] !== null && typeof valueObj === 'object' && valueObj !== null) {\n\t\t\t\t\t\t\t\t// Two objects are coming together. Do a merge of them.\n\t\t\t\t\t\t\t\tbaseArray[index] = helpers.configMerge(baseArray[index], valueObj);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Just overwrite in this case since there is nothing to merge\n\t\t\t\t\t\t\t\tbaseArray[index] = valueObj;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbaseArray.push(valueObj); // nothing to merge\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t} else if (base.hasOwnProperty(key) && typeof base[key] === 'object' && base[key] !== null && typeof value === 'object') {\n\t\t\t\t\t// If we are overwriting an object with an object, do a merge of the properties.\n\t\t\t\t\tbase[key] = helpers.configMerge(base[key], value);\n\n\t\t\t\t} else {\n\t\t\t\t\t// can just overwrite the value in this case\n\t\t\t\t\tbase[key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn base;\n\t};\n\thelpers.scaleMerge = function(_base, extension) {\n\t\tvar base = helpers.clone(_base);\n\n\t\thelpers.each(extension, function(value, key) {\n\t\t\tif (key === 'xAxes' || key === 'yAxes') {\n\t\t\t\t// These properties are arrays of items\n\t\t\t\tif (base.hasOwnProperty(key)) {\n\t\t\t\t\thelpers.each(value, function(valueObj, index) {\n\t\t\t\t\t\tvar axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n\t\t\t\t\t\tvar axisDefaults = Chart.scaleService.getScaleDefaults(axisType);\n\t\t\t\t\t\tif (index >= base[key].length || !base[key][index].type) {\n\t\t\t\t\t\t\tbase[key].push(helpers.configMerge(axisDefaults, valueObj));\n\t\t\t\t\t\t} else if (valueObj.type && valueObj.type !== base[key][index].type) {\n\t\t\t\t\t\t\t// Type changed. Bring in the new defaults before we bring in valueObj so that valueObj can override the correct scale defaults\n\t\t\t\t\t\t\tbase[key][index] = helpers.configMerge(base[key][index], axisDefaults, valueObj);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Type is the same\n\t\t\t\t\t\t\tbase[key][index] = helpers.configMerge(base[key][index], valueObj);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbase[key] = [];\n\t\t\t\t\thelpers.each(value, function(valueObj) {\n\t\t\t\t\t\tvar axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n\t\t\t\t\t\tbase[key].push(helpers.configMerge(Chart.scaleService.getScaleDefaults(axisType), valueObj));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (base.hasOwnProperty(key) && typeof base[key] === 'object' && base[key] !== null && typeof value === 'object') {\n\t\t\t\t// If we are overwriting an object with an object, do a merge of the properties.\n\t\t\t\tbase[key] = helpers.configMerge(base[key], value);\n\n\t\t\t} else {\n\t\t\t\t// can just overwrite the value in this case\n\t\t\t\tbase[key] = value;\n\t\t\t}\n\t\t});\n\n\t\treturn base;\n\t};\n\thelpers.getValueAtIndexOrDefault = function(value, index, defaultValue) {\n\t\tif (value === undefined || value === null) {\n\t\t\treturn defaultValue;\n\t\t}\n\n\t\tif (helpers.isArray(value)) {\n\t\t\treturn index < value.length ? value[index] : defaultValue;\n\t\t}\n\n\t\treturn value;\n\t};\n\thelpers.getValueOrDefault = function(value, defaultValue) {\n\t\treturn value === undefined ? defaultValue : value;\n\t};\n\thelpers.indexOf = Array.prototype.indexOf?\n\t\tfunction(array, item) {\n\t\t\treturn array.indexOf(item);\n\t\t}:\n\t\tfunction(array, item) {\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (array[i] === item) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.where = function(collection, filterCallback) {\n\t\tif (helpers.isArray(collection) && Array.prototype.filter) {\n\t\t\treturn collection.filter(filterCallback);\n\t\t}\n\t\tvar filtered = [];\n\n\t\thelpers.each(collection, function(item) {\n\t\t\tif (filterCallback(item)) {\n\t\t\t\tfiltered.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn filtered;\n\t};\n\thelpers.findIndex = Array.prototype.findIndex?\n\t\tfunction(array, callback, scope) {\n\t\t\treturn array.findIndex(callback, scope);\n\t\t} :\n\t\tfunction(array, callback, scope) {\n\t\t\tscope = scope === undefined? array : scope;\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (callback.call(scope, array[i], i, array)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to start of the array\n\t\tif (startIndex === undefined || startIndex === null) {\n\t\t\tstartIndex = -1;\n\t\t}\n\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to end of the array\n\t\tif (startIndex === undefined || startIndex === null) {\n\t\t\tstartIndex = arrayToSearch.length;\n\t\t}\n\t\tfor (var i = startIndex - 1; i >= 0; i--) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.inherits = function(extensions) {\n\t\t// Basic javascript inheritance based on the model created in Backbone.js\n\t\tvar me = this;\n\t\tvar ChartElement = (extensions && extensions.hasOwnProperty('constructor')) ? extensions.constructor : function() {\n\t\t\treturn me.apply(this, arguments);\n\t\t};\n\n\t\tvar Surrogate = function() {\n\t\t\tthis.constructor = ChartElement;\n\t\t};\n\t\tSurrogate.prototype = me.prototype;\n\t\tChartElement.prototype = new Surrogate();\n\n\t\tChartElement.extend = helpers.inherits;\n\n\t\tif (extensions) {\n\t\t\thelpers.extend(ChartElement.prototype, extensions);\n\t\t}\n\n\t\tChartElement.__super__ = me.prototype;\n\n\t\treturn ChartElement;\n\t};\n\thelpers.noop = function() {};\n\thelpers.uid = (function() {\n\t\tvar id = 0;\n\t\treturn function() {\n\t\t\treturn id++;\n\t\t};\n\t}());\n\t// -- Math methods\n\thelpers.isNumber = function(n) {\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t};\n\thelpers.almostEquals = function(x, y, epsilon) {\n\t\treturn Math.abs(x - y) < epsilon;\n\t};\n\thelpers.max = function(array) {\n\t\treturn array.reduce(function(max, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.max(max, value);\n\t\t\t}\n\t\t\treturn max;\n\t\t}, Number.NEGATIVE_INFINITY);\n\t};\n\thelpers.min = function(array) {\n\t\treturn array.reduce(function(min, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.min(min, value);\n\t\t\t}\n\t\t\treturn min;\n\t\t}, Number.POSITIVE_INFINITY);\n\t};\n\thelpers.sign = Math.sign?\n\t\tfunction(x) {\n\t\t\treturn Math.sign(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\tx = +x; // convert to a number\n\t\t\tif (x === 0 || isNaN(x)) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn x > 0 ? 1 : -1;\n\t\t};\n\thelpers.log10 = Math.log10?\n\t\tfunction(x) {\n\t\t\treturn Math.log10(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\treturn Math.log(x) / Math.LN10;\n\t\t};\n\thelpers.toRadians = function(degrees) {\n\t\treturn degrees * (Math.PI / 180);\n\t};\n\thelpers.toDegrees = function(radians) {\n\t\treturn radians * (180 / Math.PI);\n\t};\n\t// Gets the angle from vertical upright to the point about a centre.\n\thelpers.getAngleFromPoint = function(centrePoint, anglePoint) {\n\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x,\n\t\t\tdistanceFromYCenter = anglePoint.y - centrePoint.y,\n\t\t\tradialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n\t\tvar angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n\t\tif (angle < (-0.5 * Math.PI)) {\n\t\t\tangle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n\t\t}\n\n\t\treturn {\n\t\t\tangle: angle,\n\t\t\tdistance: radialDistanceFromCenter\n\t\t};\n\t};\n\thelpers.aliasPixel = function(pixelWidth) {\n\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\n\t};\n\thelpers.splineCurve = function(firstPoint, middlePoint, afterPoint, t) {\n\t\t// Props to Rob Spencer at scaled innovation for his post on splining between points\n\t\t// http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n\t\t// This function must also respect \"skipped\" points\n\n\t\tvar previous = firstPoint.skip ? middlePoint : firstPoint,\n\t\t\tcurrent = middlePoint,\n\t\t\tnext = afterPoint.skip ? middlePoint : afterPoint;\n\n\t\tvar d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\n\t\tvar d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\n\n\t\tvar s01 = d01 / (d01 + d12);\n\t\tvar s12 = d12 / (d01 + d12);\n\n\t\t// If all points are the same, s01 & s02 will be inf\n\t\ts01 = isNaN(s01) ? 0 : s01;\n\t\ts12 = isNaN(s12) ? 0 : s12;\n\n\t\tvar fa = t * s01; // scaling factor for triangle Ta\n\t\tvar fb = t * s12;\n\n\t\treturn {\n\t\t\tprevious: {\n\t\t\t\tx: current.x - fa * (next.x - previous.x),\n\t\t\t\ty: current.y - fa * (next.y - previous.y)\n\t\t\t},\n\t\t\tnext: {\n\t\t\t\tx: current.x + fb * (next.x - previous.x),\n\t\t\t\ty: current.y + fb * (next.y - previous.y)\n\t\t\t}\n\t\t};\n\t};\n\thelpers.EPSILON = Number.EPSILON || 1e-14;\n\thelpers.splineCurveMonotone = function(points) {\n\t\t// This function calculates Bzier control points in a similar way than |splineCurve|,\n\t\t// but preserves monotonicity of the provided data and ensures no local extremums are added\n\t\t// between the dataset discrete points due to the interpolation.\n\t\t// See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n\n\t\tvar pointsWithTangents = (points || []).map(function(point) {\n\t\t\treturn {\n\t\t\t\tmodel: point._model,\n\t\t\t\tdeltaK: 0,\n\t\t\t\tmK: 0\n\t\t\t};\n\t\t});\n\n\t\t// Calculate slopes (deltaK) and initialize tangents (mK)\n\t\tvar pointsLen = pointsWithTangents.length;\n\t\tvar i, pointBefore, pointCurrent, pointAfter;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tpointCurrent.deltaK = (pointAfter.model.y - pointCurrent.model.y) / (pointAfter.model.x - pointCurrent.model.x);\n\t\t\t}\n\n\t\t\tif (!pointBefore || pointBefore.model.skip) {\n\t\t\t\tpointCurrent.mK = pointCurrent.deltaK;\n\t\t\t} else if (!pointAfter || pointAfter.model.skip) {\n\t\t\t\tpointCurrent.mK = pointBefore.deltaK;\n\t\t\t} else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\n\t\t\t\tpointCurrent.mK = 0;\n\t\t\t} else {\n\t\t\t\tpointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\n\t\t\t}\n\t\t}\n\n\t\t// Adjust tangents to ensure monotonic properties\n\t\tvar alphaK, betaK, tauK, squaredMagnitude;\n\t\tfor (i = 0; i < pointsLen - 1; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tpointAfter = pointsWithTangents[i + 1];\n\t\t\tif (pointCurrent.model.skip || pointAfter.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (helpers.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\n\t\t\t\tpointCurrent.mK = pointAfter.mK = 0;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\talphaK = pointCurrent.mK / pointCurrent.deltaK;\n\t\t\tbetaK = pointAfter.mK / pointCurrent.deltaK;\n\t\t\tsquaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n\t\t\tif (squaredMagnitude <= 9) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ttauK = 3 / Math.sqrt(squaredMagnitude);\n\t\t\tpointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\n\t\t\tpointAfter.mK = betaK * tauK * pointCurrent.deltaK;\n\t\t}\n\n\t\t// Compute control points\n\t\tvar deltaX;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointBefore && !pointBefore.model.skip) {\n\t\t\t\tdeltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\n\t\t\t\tpointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tdeltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\n\t\t\t\tpointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.nextItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index >= collection.length - 1 ? collection[0] : collection[index + 1];\n\t\t}\n\t\treturn index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\n\t};\n\thelpers.previousItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index <= 0 ? collection[collection.length - 1] : collection[index - 1];\n\t\t}\n\t\treturn index <= 0 ? collection[0] : collection[index - 1];\n\t};\n\t// Implementation of the nice number algorithm used in determining where axis labels will go\n\thelpers.niceNum = function(range, round) {\n\t\tvar exponent = Math.floor(helpers.log10(range));\n\t\tvar fraction = range / Math.pow(10, exponent);\n\t\tvar niceFraction;\n\n\t\tif (round) {\n\t\t\tif (fraction < 1.5) {\n\t\t\t\tniceFraction = 1;\n\t\t\t} else if (fraction < 3) {\n\t\t\t\tniceFraction = 2;\n\t\t\t} else if (fraction < 7) {\n\t\t\t\tniceFraction = 5;\n\t\t\t} else {\n\t\t\t\tniceFraction = 10;\n\t\t\t}\n\t\t} else if (fraction <= 1.0) {\n\t\t\tniceFraction = 1;\n\t\t} else if (fraction <= 2) {\n\t\t\tniceFraction = 2;\n\t\t} else if (fraction <= 5) {\n\t\t\tniceFraction = 5;\n\t\t} else {\n\t\t\tniceFraction = 10;\n\t\t}\n\n\t\treturn niceFraction * Math.pow(10, exponent);\n\t};\n\t// Easing functions adapted from Robert Penner's easing equations\n\t// http://www.robertpenner.com/easing/\n\tvar easingEffects = helpers.easingEffects = {\n\t\tlinear: function(t) {\n\t\t\treturn t;\n\t\t},\n\t\teaseInQuad: function(t) {\n\t\t\treturn t * t;\n\t\t},\n\t\teaseOutQuad: function(t) {\n\t\t\treturn -1 * t * (t - 2);\n\t\t},\n\t\teaseInOutQuad: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t;\n\t\t\t}\n\t\t\treturn -1 / 2 * ((--t) * (t - 2) - 1);\n\t\t},\n\t\teaseInCubic: function(t) {\n\t\t\treturn t * t * t;\n\t\t},\n\t\teaseOutCubic: function(t) {\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * t + 1);\n\t\t},\n\t\teaseInOutCubic: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t;\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * t + 2);\n\t\t},\n\t\teaseInQuart: function(t) {\n\t\t\treturn t * t * t * t;\n\t\t},\n\t\teaseOutQuart: function(t) {\n\t\t\treturn -1 * ((t = t / 1 - 1) * t * t * t - 1);\n\t\t},\n\t\teaseInOutQuart: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t * t;\n\t\t\t}\n\t\t\treturn -1 / 2 * ((t -= 2) * t * t * t - 2);\n\t\t},\n\t\teaseInQuint: function(t) {\n\t\t\treturn 1 * (t /= 1) * t * t * t * t;\n\t\t},\n\t\teaseOutQuint: function(t) {\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\n\t\t},\n\t\teaseInOutQuint: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t * t * t;\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * t * t * t + 2);\n\t\t},\n\t\teaseInSine: function(t) {\n\t\t\treturn -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\n\t\t},\n\t\teaseOutSine: function(t) {\n\t\t\treturn 1 * Math.sin(t / 1 * (Math.PI / 2));\n\t\t},\n\t\teaseInOutSine: function(t) {\n\t\t\treturn -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\n\t\t},\n\t\teaseInExpo: function(t) {\n\t\t\treturn (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\n\t\t},\n\t\teaseOutExpo: function(t) {\n\t\t\treturn (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\n\t\t},\n\t\teaseInOutExpo: function(t) {\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (t === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * Math.pow(2, 10 * (t - 1));\n\t\t\t}\n\t\t\treturn 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\n\t\t},\n\t\teaseInCirc: function(t) {\n\t\t\tif (t >= 1) {\n\t\t\t\treturn t;\n\t\t\t}\n\t\t\treturn -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\n\t\t},\n\t\teaseOutCirc: function(t) {\n\t\t\treturn 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\n\t\t},\n\t\teaseInOutCirc: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn -1 / 2 * (Math.sqrt(1 - t * t) - 1);\n\t\t\t}\n\t\t\treturn 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n\t\t},\n\t\teaseInElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1) === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * 0.3;\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t},\n\t\teaseOutElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1) === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * 0.3;\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\n\t\t},\n\t\teaseInOutElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1 / 2) === 2) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * (0.3 * 1.5);\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\tif (t < 1) {\n\t\t\t\treturn -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t\t}\n\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\t\t},\n\t\teaseInBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn 1 * (t /= 1) * t * ((s + 1) * t - s);\n\t\t},\n\t\teaseOutBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\n\t\t},\n\t\teaseInOutBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n\t\t},\n\t\teaseInBounce: function(t) {\n\t\t\treturn 1 - easingEffects.easeOutBounce(1 - t);\n\t\t},\n\t\teaseOutBounce: function(t) {\n\t\t\tif ((t /= 1) < (1 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * t * t);\n\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75);\n\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375);\n\t\t\t}\n\t\t\treturn 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375);\n\t\t},\n\t\teaseInOutBounce: function(t) {\n\t\t\tif (t < 1 / 2) {\n\t\t\t\treturn easingEffects.easeInBounce(t * 2) * 0.5;\n\t\t\t}\n\t\t\treturn easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\n\t\t}\n\t};\n\t// Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\thelpers.requestAnimFrame = (function() {\n\t\treturn window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.oRequestAnimationFrame ||\n\t\t\twindow.msRequestAnimationFrame ||\n\t\t\tfunction(callback) {\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\n\t\t\t};\n\t}());\n\thelpers.cancelAnimFrame = (function() {\n\t\treturn window.cancelAnimationFrame ||\n\t\t\twindow.webkitCancelAnimationFrame ||\n\t\t\twindow.mozCancelAnimationFrame ||\n\t\t\twindow.oCancelAnimationFrame ||\n\t\t\twindow.msCancelAnimationFrame ||\n\t\t\tfunction(callback) {\n\t\t\t\treturn window.clearTimeout(callback, 1000 / 60);\n\t\t\t};\n\t}());\n\t// -- DOM methods\n\thelpers.getRelativePosition = function(evt, chart) {\n\t\tvar mouseX, mouseY;\n\t\tvar e = evt.originalEvent || evt,\n\t\t\tcanvas = evt.currentTarget || evt.srcElement,\n\t\t\tboundingRect = canvas.getBoundingClientRect();\n\n\t\tvar touches = e.touches;\n\t\tif (touches && touches.length > 0) {\n\t\t\tmouseX = touches[0].clientX;\n\t\t\tmouseY = touches[0].clientY;\n\n\t\t} else {\n\t\t\tmouseX = e.clientX;\n\t\t\tmouseY = e.clientY;\n\t\t}\n\n\t\t// Scale mouse coordinates into canvas coordinates\n\t\t// by following the pattern laid out by 'jerryj' in the comments of\n\t\t// http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\n\t\tvar paddingLeft = parseFloat(helpers.getStyle(canvas, 'padding-left'));\n\t\tvar paddingTop = parseFloat(helpers.getStyle(canvas, 'padding-top'));\n\t\tvar paddingRight = parseFloat(helpers.getStyle(canvas, 'padding-right'));\n\t\tvar paddingBottom = parseFloat(helpers.getStyle(canvas, 'padding-bottom'));\n\t\tvar width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\n\t\tvar height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom;\n\n\t\t// We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\n\t\t// the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\n\t\tmouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / (width) * canvas.width / chart.currentDevicePixelRatio);\n\t\tmouseY = Math.round((mouseY - boundingRect.top - paddingTop) / (height) * canvas.height / chart.currentDevicePixelRatio);\n\n\t\treturn {\n\t\t\tx: mouseX,\n\t\t\ty: mouseY\n\t\t};\n\n\t};\n\thelpers.addEvent = function(node, eventType, method) {\n\t\tif (node.addEventListener) {\n\t\t\tnode.addEventListener(eventType, method);\n\t\t} else if (node.attachEvent) {\n\t\t\tnode.attachEvent('on' + eventType, method);\n\t\t} else {\n\t\t\tnode['on' + eventType] = method;\n\t\t}\n\t};\n\thelpers.removeEvent = function(node, eventType, handler) {\n\t\tif (node.removeEventListener) {\n\t\t\tnode.removeEventListener(eventType, handler, false);\n\t\t} else if (node.detachEvent) {\n\t\t\tnode.detachEvent('on' + eventType, handler);\n\t\t} else {\n\t\t\tnode['on' + eventType] = helpers.noop;\n\t\t}\n\t};\n\thelpers.bindEvents = function(chartInstance, arrayOfEvents, handler) {\n\t\t// Create the events object if it's not already present\n\t\tvar events = chartInstance.events = chartInstance.events || {};\n\n\t\thelpers.each(arrayOfEvents, function(eventName) {\n\t\t\tevents[eventName] = function() {\n\t\t\t\thandler.apply(chartInstance, arguments);\n\t\t\t};\n\t\t\thelpers.addEvent(chartInstance.chart.canvas, eventName, events[eventName]);\n\t\t});\n\t};\n\thelpers.unbindEvents = function(chartInstance, arrayOfEvents) {\n\t\tvar canvas = chartInstance.chart.canvas;\n\t\thelpers.each(arrayOfEvents, function(handler, eventName) {\n\t\t\thelpers.removeEvent(canvas, eventName, handler);\n\t\t});\n\t};\n\n\t// Private helper function to convert max-width/max-height values that may be percentages into a number\n\tfunction parseMaxStyle(styleValue, node, parentProperty) {\n\t\tvar valueInPixels;\n\t\tif (typeof(styleValue) === 'string') {\n\t\t\tvalueInPixels = parseInt(styleValue, 10);\n\n\t\t\tif (styleValue.indexOf('%') !== -1) {\n\t\t\t\t// percentage * size in dimension\n\t\t\t\tvalueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n\t\t\t}\n\t\t} else {\n\t\t\tvalueInPixels = styleValue;\n\t\t}\n\n\t\treturn valueInPixels;\n\t}\n\n\t/**\n\t * Returns if the given value contains an effective constraint.\n\t * @private\n\t */\n\tfunction isConstrainedValue(value) {\n\t\treturn value !== undefined && value !== null && value !== 'none';\n\t}\n\n\t// Private helper to get a constraint dimension\n\t// @param domNode : the node to check the constraint on\n\t// @param maxStyle : the style that defines the maximum for the direction we are using (maxWidth / maxHeight)\n\t// @param percentageProperty : property of parent to use when calculating width as a percentage\n\t// @see http://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser\n\tfunction getConstraintDimension(domNode, maxStyle, percentageProperty) {\n\t\tvar view = document.defaultView;\n\t\tvar parentNode = domNode.parentNode;\n\t\tvar constrainedNode = view.getComputedStyle(domNode)[maxStyle];\n\t\tvar constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\n\t\tvar hasCNode = isConstrainedValue(constrainedNode);\n\t\tvar hasCContainer = isConstrainedValue(constrainedContainer);\n\t\tvar infinity = Number.POSITIVE_INFINITY;\n\n\t\tif (hasCNode || hasCContainer) {\n\t\t\treturn Math.min(\n\t\t\t\thasCNode? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity,\n\t\t\t\thasCContainer? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\n\t\t}\n\n\t\treturn 'none';\n\t}\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintWidth = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-width', 'clientWidth');\n\t};\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintHeight = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-height', 'clientHeight');\n\t};\n\thelpers.getMaximumWidth = function(domNode) {\n\t\tvar container = domNode.parentNode;\n\t\tvar paddingLeft = parseInt(helpers.getStyle(container, 'padding-left'), 10);\n\t\tvar paddingRight = parseInt(helpers.getStyle(container, 'padding-right'), 10);\n\t\tvar w = container.clientWidth - paddingLeft - paddingRight;\n\t\tvar cw = helpers.getConstraintWidth(domNode);\n\t\treturn isNaN(cw)? w : Math.min(w, cw);\n\t};\n\thelpers.getMaximumHeight = function(domNode) {\n\t\tvar container = domNode.parentNode;\n\t\tvar paddingTop = parseInt(helpers.getStyle(container, 'padding-top'), 10);\n\t\tvar paddingBottom = parseInt(helpers.getStyle(container, 'padding-bottom'), 10);\n\t\tvar h = container.clientHeight - paddingTop - paddingBottom;\n\t\tvar ch = helpers.getConstraintHeight(domNode);\n\t\treturn isNaN(ch)? h : Math.min(h, ch);\n\t};\n\thelpers.getStyle = function(el, property) {\n\t\treturn el.currentStyle ?\n\t\t\tel.currentStyle[property] :\n\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n\t};\n\thelpers.retinaScale = function(chart) {\n\t\tvar ctx = chart.ctx;\n\t\tvar canvas = chart.canvas;\n\t\tvar width = canvas.width;\n\t\tvar height = canvas.height;\n\t\tvar pixelRatio = chart.currentDevicePixelRatio = window.devicePixelRatio || 1;\n\n\t\tif (pixelRatio !== 1) {\n\t\t\tcanvas.height = height * pixelRatio;\n\t\t\tcanvas.width = width * pixelRatio;\n\t\t\tctx.scale(pixelRatio, pixelRatio);\n\n\t\t\t// Store the device pixel ratio so that we can go backwards in `destroy`.\n\t\t\t// The devicePixelRatio changes with zoom, so there are no guarantees that it is the same\n\t\t\t// when destroy is called\n\t\t\tchart.originalDevicePixelRatio = chart.originalDevicePixelRatio || pixelRatio;\n\t\t}\n\n\t\tcanvas.style.width = width + 'px';\n\t\tcanvas.style.height = height + 'px';\n\t};\n\t// -- Canvas methods\n\thelpers.clear = function(chart) {\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\n\t};\n\thelpers.fontString = function(pixelSize, fontStyle, fontFamily) {\n\t\treturn fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n\t};\n\thelpers.longestText = function(ctx, font, arrayOfThings, cache) {\n\t\tcache = cache || {};\n\t\tvar data = cache.data = cache.data || {};\n\t\tvar gc = cache.garbageCollect = cache.garbageCollect || [];\n\n\t\tif (cache.font !== font) {\n\t\t\tdata = cache.data = {};\n\t\t\tgc = cache.garbageCollect = [];\n\t\t\tcache.font = font;\n\t\t}\n\n\t\tctx.font = font;\n\t\tvar longest = 0;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\t// Undefined strings and arrays should not be measured\n\t\t\tif (thing !== undefined && thing !== null && helpers.isArray(thing) !== true) {\n\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, thing);\n\t\t\t} else if (helpers.isArray(thing)) {\n\t\t\t\t// if it is an array lets measure each element\n\t\t\t\t// to do maybe simplify this function a bit so we can do this more recursively?\n\t\t\t\thelpers.each(thing, function(nestedThing) {\n\t\t\t\t\t// Undefined strings and arrays should not be measured\n\t\t\t\t\tif (nestedThing !== undefined && nestedThing !== null && !helpers.isArray(nestedThing)) {\n\t\t\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, nestedThing);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tvar gcLen = gc.length / 2;\n\t\tif (gcLen > arrayOfThings.length) {\n\t\t\tfor (var i = 0; i < gcLen; i++) {\n\t\t\t\tdelete data[gc[i]];\n\t\t\t}\n\t\t\tgc.splice(0, gcLen);\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.measureText = function(ctx, data, gc, longest, string) {\n\t\tvar textWidth = data[string];\n\t\tif (!textWidth) {\n\t\t\ttextWidth = data[string] = ctx.measureText(string).width;\n\t\t\tgc.push(string);\n\t\t}\n\t\tif (textWidth > longest) {\n\t\t\tlongest = textWidth;\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.numberOfLabelLines = function(arrayOfThings) {\n\t\tvar numberOfLines = 1;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\tif (helpers.isArray(thing)) {\n\t\t\t\tif (thing.length > numberOfLines) {\n\t\t\t\t\tnumberOfLines = thing.length;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn numberOfLines;\n\t};\n\thelpers.drawRoundedRectangle = function(ctx, x, y, width, height, radius) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(x + radius, y);\n\t\tctx.lineTo(x + width - radius, y);\n\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n\t\tctx.lineTo(x + width, y + height - radius);\n\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n\t\tctx.lineTo(x + radius, y + height);\n\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n\t\tctx.lineTo(x, y + radius);\n\t\tctx.quadraticCurveTo(x, y, x + radius, y);\n\t\tctx.closePath();\n\t};\n\thelpers.color = function(c) {\n\t\tif (!color) {\n\t\t\tconsole.error('Color.js not found!');\n\t\t\treturn c;\n\t\t}\n\n\t\t/* global CanvasGradient */\n\t\tif (c instanceof CanvasGradient) {\n\t\t\treturn color(Chart.defaults.global.defaultColor);\n\t\t}\n\n\t\treturn color(c);\n\t};\n\thelpers.addResizeListener = function(node, callback) {\n\t\t// Hide an iframe before the node\n\t\tvar hiddenIframe = document.createElement('iframe');\n\t\tvar hiddenIframeClass = 'chartjs-hidden-iframe';\n\n\t\tif (hiddenIframe.classlist) {\n\t\t\t// can use classlist\n\t\t\thiddenIframe.classlist.add(hiddenIframeClass);\n\t\t} else {\n\t\t\thiddenIframe.setAttribute('class', hiddenIframeClass);\n\t\t}\n\n\t\t// Set the style\n\t\thiddenIframe.tabIndex = -1;\n\t\tvar style = hiddenIframe.style;\n\t\tstyle.width = '100%';\n\t\tstyle.display = 'block';\n\t\tstyle.border = 0;\n\t\tstyle.height = 0;\n\t\tstyle.margin = 0;\n\t\tstyle.position = 'absolute';\n\t\tstyle.left = 0;\n\t\tstyle.right = 0;\n\t\tstyle.top = 0;\n\t\tstyle.bottom = 0;\n\n\t\t// Insert the iframe so that contentWindow is available\n\t\tnode.insertBefore(hiddenIframe, node.firstChild);\n\n\t\t(hiddenIframe.contentWindow || hiddenIframe).onresize = function() {\n\t\t\tif (callback) {\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t};\n\t};\n\thelpers.removeResizeListener = function(node) {\n\t\tvar hiddenIframe = node.querySelector('.chartjs-hidden-iframe');\n\n\t\t// Remove the resize detect iframe\n\t\tif (hiddenIframe) {\n\t\t\thiddenIframe.parentNode.removeChild(hiddenIframe);\n\t\t}\n\t};\n\thelpers.isArray = Array.isArray?\n\t\tfunction(obj) {\n\t\t\treturn Array.isArray(obj);\n\t\t} :\n\t\tfunction(obj) {\n\t\t\treturn Object.prototype.toString.call(obj) === '[object Array]';\n\t\t};\n\t// ! @see http://stackoverflow.com/a/14853974\n\thelpers.arrayEquals = function(a0, a1) {\n\t\tvar i, ilen, v0, v1;\n\n\t\tif (!a0 || !a1 || a0.length !== a1.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (i = 0, ilen=a0.length; i < ilen; ++i) {\n\t\t\tv0 = a0[i];\n\t\t\tv1 = a1[i];\n\n\t\t\tif (v0 instanceof Array && v1 instanceof Array) {\n\t\t\t\tif (!helpers.arrayEquals(v0, v1)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (v0 !== v1) {\n\t\t\t\t// NOTE: two different object instances will never be equal: {x:20} != {x:20}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\thelpers.callCallback = function(fn, args, _tArg) {\n\t\tif (fn && typeof fn.call === 'function') {\n\t\t\tfn.apply(_tArg, args);\n\t\t}\n\t};\n\thelpers.getHoverColor = function(colorValue) {\n\t\t/* global CanvasPattern */\n\t\treturn (colorValue instanceof CanvasPattern) ?\n\t\t\tcolorValue :\n\t\t\thelpers.color(colorValue).saturate(0.5).darken(0.1).rgbString();\n\t};\n};\n","/* MIT license */\nvar convert = require('color-convert');\nvar string = require('chartjs-color-string');\n\nvar Color = function (obj) {\n\tif (obj instanceof Color) {\n\t\treturn obj;\n\t}\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(obj);\n\t}\n\n\tthis.valid = false;\n\tthis.values = {\n\t\trgb: [0, 0, 0],\n\t\thsl: [0, 0, 0],\n\t\thsv: [0, 0, 0],\n\t\thwb: [0, 0, 0],\n\t\tcmyk: [0, 0, 0, 0],\n\t\talpha: 1\n\t};\n\n\t// parse Color() argument\n\tvar vals;\n\tif (typeof obj === 'string') {\n\t\tvals = string.getRgba(obj);\n\t\tif (vals) {\n\t\t\tthis.setValues('rgb', vals);\n\t\t} else if (vals = string.getHsla(obj)) {\n\t\t\tthis.setValues('hsl', vals);\n\t\t} else if (vals = string.getHwb(obj)) {\n\t\t\tthis.setValues('hwb', vals);\n\t\t}\n\t} else if (typeof obj === 'object') {\n\t\tvals = obj;\n\t\tif (vals.r !== undefined || vals.red !== undefined) {\n\t\t\tthis.setValues('rgb', vals);\n\t\t} else if (vals.l !== undefined || vals.lightness !== undefined) {\n\t\t\tthis.setValues('hsl', vals);\n\t\t} else if (vals.v !== undefined || vals.value !== undefined) {\n\t\t\tthis.setValues('hsv', vals);\n\t\t} else if (vals.w !== undefined || vals.whiteness !== undefined) {\n\t\t\tthis.setValues('hwb', vals);\n\t\t} else if (vals.c !== undefined || vals.cyan !== undefined) {\n\t\t\tthis.setValues('cmyk', vals);\n\t\t}\n\t}\n};\n\nColor.prototype = {\n\tisValid: function () {\n\t\treturn this.valid;\n\t},\n\trgb: function () {\n\t\treturn this.setSpace('rgb', arguments);\n\t},\n\thsl: function () {\n\t\treturn this.setSpace('hsl', arguments);\n\t},\n\thsv: function () {\n\t\treturn this.setSpace('hsv', arguments);\n\t},\n\thwb: function () {\n\t\treturn this.setSpace('hwb', arguments);\n\t},\n\tcmyk: function () {\n\t\treturn this.setSpace('cmyk', arguments);\n\t},\n\n\trgbArray: function () {\n\t\treturn this.values.rgb;\n\t},\n\thslArray: function () {\n\t\treturn this.values.hsl;\n\t},\n\thsvArray: function () {\n\t\treturn this.values.hsv;\n\t},\n\thwbArray: function () {\n\t\tvar values = this.values;\n\t\tif (values.alpha !== 1) {\n\t\t\treturn values.hwb.concat([values.alpha]);\n\t\t}\n\t\treturn values.hwb;\n\t},\n\tcmykArray: function () {\n\t\treturn this.values.cmyk;\n\t},\n\trgbaArray: function () {\n\t\tvar values = this.values;\n\t\treturn values.rgb.concat([values.alpha]);\n\t},\n\thslaArray: function () {\n\t\tvar values = this.values;\n\t\treturn values.hsl.concat([values.alpha]);\n\t},\n\talpha: function (val) {\n\t\tif (val === undefined) {\n\t\t\treturn this.values.alpha;\n\t\t}\n\t\tthis.setValues('alpha', val);\n\t\treturn this;\n\t},\n\n\tred: function (val) {\n\t\treturn this.setChannel('rgb', 0, val);\n\t},\n\tgreen: function (val) {\n\t\treturn this.setChannel('rgb', 1, val);\n\t},\n\tblue: function (val) {\n\t\treturn this.setChannel('rgb', 2, val);\n\t},\n\thue: function (val) {\n\t\tif (val) {\n\t\t\tval %= 360;\n\t\t\tval = val < 0 ? 360 + val : val;\n\t\t}\n\t\treturn this.setChannel('hsl', 0, val);\n\t},\n\tsaturation: function (val) {\n\t\treturn this.setChannel('hsl', 1, val);\n\t},\n\tlightness: function (val) {\n\t\treturn this.setChannel('hsl', 2, val);\n\t},\n\tsaturationv: function (val) {\n\t\treturn this.setChannel('hsv', 1, val);\n\t},\n\twhiteness: function (val) {\n\t\treturn this.setChannel('hwb', 1, val);\n\t},\n\tblackness: function (val) {\n\t\treturn this.setChannel('hwb', 2, val);\n\t},\n\tvalue: function (val) {\n\t\treturn this.setChannel('hsv', 2, val);\n\t},\n\tcyan: function (val) {\n\t\treturn this.setChannel('cmyk', 0, val);\n\t},\n\tmagenta: function (val) {\n\t\treturn this.setChannel('cmyk', 1, val);\n\t},\n\tyellow: function (val) {\n\t\treturn this.setChannel('cmyk', 2, val);\n\t},\n\tblack: function (val) {\n\t\treturn this.setChannel('cmyk', 3, val);\n\t},\n\n\thexString: function () {\n\t\treturn string.hexString(this.values.rgb);\n\t},\n\trgbString: function () {\n\t\treturn string.rgbString(this.values.rgb, this.values.alpha);\n\t},\n\trgbaString: function () {\n\t\treturn string.rgbaString(this.values.rgb, this.values.alpha);\n\t},\n\tpercentString: function () {\n\t\treturn string.percentString(this.values.rgb, this.values.alpha);\n\t},\n\thslString: function () {\n\t\treturn string.hslString(this.values.hsl, this.values.alpha);\n\t},\n\thslaString: function () {\n\t\treturn string.hslaString(this.values.hsl, this.values.alpha);\n\t},\n\thwbString: function () {\n\t\treturn string.hwbString(this.values.hwb, this.values.alpha);\n\t},\n\tkeyword: function () {\n\t\treturn string.keyword(this.values.rgb, this.values.alpha);\n\t},\n\n\trgbNumber: function () {\n\t\tvar rgb = this.values.rgb;\n\t\treturn (rgb[0] << 16) | (rgb[1] << 8) | rgb[2];\n\t},\n\n\tluminosity: function () {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tvar rgb = this.values.rgb;\n\t\tvar lum = [];\n\t\tfor (var i = 0; i < rgb.length; i++) {\n\t\t\tvar chan = rgb[i] / 255;\n\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\n\t\t}\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast: function (color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tvar lum1 = this.luminosity();\n\t\tvar lum2 = color2.luminosity();\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel: function (color2) {\n\t\tvar contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7.1) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tdark: function () {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tvar rgb = this.values.rgb;\n\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n\t\treturn yiq < 128;\n\t},\n\n\tlight: function () {\n\t\treturn !this.dark();\n\t},\n\n\tnegate: function () {\n\t\tvar rgb = [];\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\trgb[i] = 255 - this.values.rgb[i];\n\t\t}\n\t\tthis.setValues('rgb', rgb);\n\t\treturn this;\n\t},\n\n\tlighten: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[2] += hsl[2] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tdarken: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[2] -= hsl[2] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tsaturate: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[1] += hsl[1] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tdesaturate: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[1] -= hsl[1] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\twhiten: function (ratio) {\n\t\tvar hwb = this.values.hwb;\n\t\thwb[1] += hwb[1] * ratio;\n\t\tthis.setValues('hwb', hwb);\n\t\treturn this;\n\t},\n\n\tblacken: function (ratio) {\n\t\tvar hwb = this.values.hwb;\n\t\thwb[2] += hwb[2] * ratio;\n\t\tthis.setValues('hwb', hwb);\n\t\treturn this;\n\t},\n\n\tgreyscale: function () {\n\t\tvar rgb = this.values.rgb;\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\tthis.setValues('rgb', [val, val, val]);\n\t\treturn this;\n\t},\n\n\tclearer: function (ratio) {\n\t\tvar alpha = this.values.alpha;\n\t\tthis.setValues('alpha', alpha - (alpha * ratio));\n\t\treturn this;\n\t},\n\n\topaquer: function (ratio) {\n\t\tvar alpha = this.values.alpha;\n\t\tthis.setValues('alpha', alpha + (alpha * ratio));\n\t\treturn this;\n\t},\n\n\trotate: function (degrees) {\n\t\tvar hsl = this.values.hsl;\n\t\tvar hue = (hsl[0] + degrees) % 360;\n\t\thsl[0] = hue < 0 ? 360 + hue : hue;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\t/**\n\t * Ported from sass implementation in C\n\t * https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t */\n\tmix: function (mixinColor, weight) {\n\t\tvar color1 = this;\n\t\tvar color2 = mixinColor;\n\t\tvar p = weight === undefined ? 0.5 : weight;\n\n\t\tvar w = 2 * p - 1;\n\t\tvar a = color1.alpha() - color2.alpha();\n\n\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n\t\tvar w2 = 1 - w1;\n\n\t\treturn this\n\t\t\t.rgb(\n\t\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\t\tw1 * color1.blue() + w2 * color2.blue()\n\t\t\t)\n\t\t\t.alpha(color1.alpha() * p + color2.alpha() * (1 - p));\n\t},\n\n\ttoJSON: function () {\n\t\treturn this.rgb();\n\t},\n\n\tclone: function () {\n\t\t// NOTE(SB): using node-clone creates a dependency to Buffer when using browserify,\n\t\t// making the final build way to big to embed in Chart.js. So let's do it manually,\n\t\t// assuming that values to clone are 1 dimension arrays containing only numbers,\n\t\t// except 'alpha' which is a number.\n\t\tvar result = new Color();\n\t\tvar source = this.values;\n\t\tvar target = result.values;\n\t\tvar value, type;\n\n\t\tfor (var prop in source) {\n\t\t\tif (source.hasOwnProperty(prop)) {\n\t\t\t\tvalue = source[prop];\n\t\t\t\ttype = ({}).toString.call(value);\n\t\t\t\tif (type === '[object Array]') {\n\t\t\t\t\ttarget[prop] = value.slice(0);\n\t\t\t\t} else if (type === '[object Number]') {\n\t\t\t\t\ttarget[prop] = value;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('unexpected color value:', value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nColor.prototype.spaces = {\n\trgb: ['red', 'green', 'blue'],\n\thsl: ['hue', 'saturation', 'lightness'],\n\thsv: ['hue', 'saturation', 'value'],\n\thwb: ['hue', 'whiteness', 'blackness'],\n\tcmyk: ['cyan', 'magenta', 'yellow', 'black']\n};\n\nColor.prototype.maxes = {\n\trgb: [255, 255, 255],\n\thsl: [360, 100, 100],\n\thsv: [360, 100, 100],\n\thwb: [360, 100, 100],\n\tcmyk: [100, 100, 100, 100]\n};\n\nColor.prototype.getValues = function (space) {\n\tvar values = this.values;\n\tvar vals = {};\n\n\tfor (var i = 0; i < space.length; i++) {\n\t\tvals[space.charAt(i)] = values[space][i];\n\t}\n\n\tif (values.alpha !== 1) {\n\t\tvals.a = values.alpha;\n\t}\n\n\t// {r: 255, g: 255, b: 255, a: 0.4}\n\treturn vals;\n};\n\nColor.prototype.setValues = function (space, vals) {\n\tvar values = this.values;\n\tvar spaces = this.spaces;\n\tvar maxes = this.maxes;\n\tvar alpha = 1;\n\tvar i;\n\n\tthis.valid = true;\n\n\tif (space === 'alpha') {\n\t\talpha = vals;\n\t} else if (vals.length) {\n\t\t// [10, 10, 10]\n\t\tvalues[space] = vals.slice(0, space.length);\n\t\talpha = vals[space.length];\n\t} else if (vals[space.charAt(0)] !== undefined) {\n\t\t// {r: 10, g: 10, b: 10}\n\t\tfor (i = 0; i < space.length; i++) {\n\t\t\tvalues[space][i] = vals[space.charAt(i)];\n\t\t}\n\n\t\talpha = vals.a;\n\t} else if (vals[spaces[space][0]] !== undefined) {\n\t\t// {red: 10, green: 10, blue: 10}\n\t\tvar chans = spaces[space];\n\n\t\tfor (i = 0; i < space.length; i++) {\n\t\t\tvalues[space][i] = vals[chans[i]];\n\t\t}\n\n\t\talpha = vals.alpha;\n\t}\n\n\tvalues.alpha = Math.max(0, Math.min(1, (alpha === undefined ? values.alpha : alpha)));\n\n\tif (space === 'alpha') {\n\t\treturn false;\n\t}\n\n\tvar capped;\n\n\t// cap values of the space prior converting all values\n\tfor (i = 0; i < space.length; i++) {\n\t\tcapped = Math.max(0, Math.min(maxes[space][i], values[space][i]));\n\t\tvalues[space][i] = Math.round(capped);\n\t}\n\n\t// convert to all the other color spaces\n\tfor (var sname in spaces) {\n\t\tif (sname !== space) {\n\t\t\tvalues[sname] = convert[space][sname](values[space]);\n\t\t}\n\t}\n\n\treturn true;\n};\n\nColor.prototype.setSpace = function (space, args) {\n\tvar vals = args[0];\n\n\tif (vals === undefined) {\n\t\t// color.rgb()\n\t\treturn this.getValues(space);\n\t}\n\n\t// color.rgb(10, 10, 10)\n\tif (typeof vals === 'number') {\n\t\tvals = Array.prototype.slice.call(args);\n\t}\n\n\tthis.setValues(space, vals);\n\treturn this;\n};\n\nColor.prototype.setChannel = function (space, index, val) {\n\tvar svalues = this.values[space];\n\tif (val === undefined) {\n\t\t// color.red()\n\t\treturn svalues[index];\n\t} else if (val === svalues[index]) {\n\t\t// color.red(color.red())\n\t\treturn this;\n\t}\n\n\t// color.red(100)\n\tsvalues[index] = val;\n\tthis.setValues(space, svalues);\n\n\treturn this;\n};\n\nif (typeof window !== 'undefined') {\n\twindow.Color = Color;\n}\n\nmodule.exports = Color;\n","var conversions = require('./conversions');\nvar route = require('./route');\n\nvar convert = {};\n\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\tvar result = fn(args);\n\n\t\t// we're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (var len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tvar routes = route(fromModel);\n\tvar routeModels = Object.keys(routes);\n\n\trouteModels.forEach(function (toModel) {\n\t\tvar fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","var conversions = require('./conversions');\n\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tvar graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tvar models = Object.keys(conversions);\n\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tvar graph = buildGraph();\n\tvar queue = [fromModel]; // unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tvar current = queue.pop();\n\t\tvar adjacents = Object.keys(conversions[current]);\n\n\t\tfor (var len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tvar adjacent = adjacents[i];\n\t\t\tvar node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tvar path = [graph[toModel].parent, toModel];\n\tvar fn = conversions[graph[toModel].parent][toModel];\n\n\tvar cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tvar graph = deriveBFS(fromModel);\n\tvar conversion = {};\n\n\tvar models = Object.keys(graph);\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tvar toModel = models[i];\n\t\tvar node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// no possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","/* MIT license */\nvar colorNames = require('color-name');\n\nmodule.exports = {\n   getRgba: getRgba,\n   getHsla: getHsla,\n   getRgb: getRgb,\n   getHsl: getHsl,\n   getHwb: getHwb,\n   getAlpha: getAlpha,\n\n   hexString: hexString,\n   rgbString: rgbString,\n   rgbaString: rgbaString,\n   percentString: percentString,\n   percentaString: percentaString,\n   hslString: hslString,\n   hslaString: hslaString,\n   hwbString: hwbString,\n   keyword: keyword\n}\n\nfunction getRgba(string) {\n   if (!string) {\n      return;\n   }\n   var abbr =  /^#([a-fA-F0-9]{3,4})$/i,\n       hex =  /^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,\n       rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/i,\n       per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/i,\n       keyword = /(\\w+)/;\n\n   var rgb = [0, 0, 0],\n       a = 1,\n       match = string.match(abbr),\n       hexAlpha = \"\";\n   if (match) {\n      match = match[1];\n      hexAlpha = match[3];\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match[i] + match[i], 16);\n      }\n      if (hexAlpha) {\n         a = Math.round((parseInt(hexAlpha + hexAlpha, 16) / 255) * 100) / 100;\n      }\n   }\n   else if (match = string.match(hex)) {\n      hexAlpha = match[2];\n      match = match[1];\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match.slice(i * 2, i * 2 + 2), 16);\n      }\n      if (hexAlpha) {\n         a = Math.round((parseInt(hexAlpha, 16) / 255) * 100) / 100;\n      }\n   }\n   else if (match = string.match(rgba)) {\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match[i + 1]);\n      }\n      a = parseFloat(match[4]);\n   }\n   else if (match = string.match(per)) {\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n      }\n      a = parseFloat(match[4]);\n   }\n   else if (match = string.match(keyword)) {\n      if (match[1] == \"transparent\") {\n         return [0, 0, 0, 0];\n      }\n      rgb = colorNames[match[1]];\n      if (!rgb) {\n         return;\n      }\n   }\n\n   for (var i = 0; i < rgb.length; i++) {\n      rgb[i] = scale(rgb[i], 0, 255);\n   }\n   if (!a && a != 0) {\n      a = 1;\n   }\n   else {\n      a = scale(a, 0, 1);\n   }\n   rgb[3] = a;\n   return rgb;\n}\n\nfunction getHsla(string) {\n   if (!string) {\n      return;\n   }\n   var hsl = /^hsla?\\(\\s*([+-]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)/;\n   var match = string.match(hsl);\n   if (match) {\n      var alpha = parseFloat(match[4]);\n      var h = scale(parseInt(match[1]), 0, 360),\n          s = scale(parseFloat(match[2]), 0, 100),\n          l = scale(parseFloat(match[3]), 0, 100),\n          a = scale(isNaN(alpha) ? 1 : alpha, 0, 1);\n      return [h, s, l, a];\n   }\n}\n\nfunction getHwb(string) {\n   if (!string) {\n      return;\n   }\n   var hwb = /^hwb\\(\\s*([+-]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)/;\n   var match = string.match(hwb);\n   if (match) {\n    var alpha = parseFloat(match[4]);\n      var h = scale(parseInt(match[1]), 0, 360),\n          w = scale(parseFloat(match[2]), 0, 100),\n          b = scale(parseFloat(match[3]), 0, 100),\n          a = scale(isNaN(alpha) ? 1 : alpha, 0, 1);\n      return [h, w, b, a];\n   }\n}\n\nfunction getRgb(string) {\n   var rgba = getRgba(string);\n   return rgba && rgba.slice(0, 3);\n}\n\nfunction getHsl(string) {\n  var hsla = getHsla(string);\n  return hsla && hsla.slice(0, 3);\n}\n\nfunction getAlpha(string) {\n   var vals = getRgba(string);\n   if (vals) {\n      return vals[3];\n   }\n   else if (vals = getHsla(string)) {\n      return vals[3];\n   }\n   else if (vals = getHwb(string)) {\n      return vals[3];\n   }\n}\n\n// generators\nfunction hexString(rgba, a) {\n   var a = (a !== undefined && rgba.length === 3) ? a : rgba[3];\n   return \"#\" + hexDouble(rgba[0]) \n              + hexDouble(rgba[1])\n              + hexDouble(rgba[2])\n              + (\n                 (a >= 0 && a < 1)\n                 ? hexDouble(Math.round(a * 255))\n                 : \"\"\n              );\n}\n\nfunction rgbString(rgba, alpha) {\n   if (alpha < 1 || (rgba[3] && rgba[3] < 1)) {\n      return rgbaString(rgba, alpha);\n   }\n   return \"rgb(\" + rgba[0] + \", \" + rgba[1] + \", \" + rgba[2] + \")\";\n}\n\nfunction rgbaString(rgba, alpha) {\n   if (alpha === undefined) {\n      alpha = (rgba[3] !== undefined ? rgba[3] : 1);\n   }\n   return \"rgba(\" + rgba[0] + \", \" + rgba[1] + \", \" + rgba[2]\n           + \", \" + alpha + \")\";\n}\n\nfunction percentString(rgba, alpha) {\n   if (alpha < 1 || (rgba[3] && rgba[3] < 1)) {\n      return percentaString(rgba, alpha);\n   }\n   var r = Math.round(rgba[0]/255 * 100),\n       g = Math.round(rgba[1]/255 * 100),\n       b = Math.round(rgba[2]/255 * 100);\n\n   return \"rgb(\" + r + \"%, \" + g + \"%, \" + b + \"%)\";\n}\n\nfunction percentaString(rgba, alpha) {\n   var r = Math.round(rgba[0]/255 * 100),\n       g = Math.round(rgba[1]/255 * 100),\n       b = Math.round(rgba[2]/255 * 100);\n   return \"rgba(\" + r + \"%, \" + g + \"%, \" + b + \"%, \" + (alpha || rgba[3] || 1) + \")\";\n}\n\nfunction hslString(hsla, alpha) {\n   if (alpha < 1 || (hsla[3] && hsla[3] < 1)) {\n      return hslaString(hsla, alpha);\n   }\n   return \"hsl(\" + hsla[0] + \", \" + hsla[1] + \"%, \" + hsla[2] + \"%)\";\n}\n\nfunction hslaString(hsla, alpha) {\n   if (alpha === undefined) {\n      alpha = (hsla[3] !== undefined ? hsla[3] : 1);\n   }\n   return \"hsla(\" + hsla[0] + \", \" + hsla[1] + \"%, \" + hsla[2] + \"%, \"\n           + alpha + \")\";\n}\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\nfunction hwbString(hwb, alpha) {\n   if (alpha === undefined) {\n      alpha = (hwb[3] !== undefined ? hwb[3] : 1);\n   }\n   return \"hwb(\" + hwb[0] + \", \" + hwb[1] + \"%, \" + hwb[2] + \"%\"\n           + (alpha !== undefined && alpha !== 1 ? \", \" + alpha : \"\") + \")\";\n}\n\nfunction keyword(rgb) {\n  return reverseNames[rgb.slice(0, 3)];\n}\n\n// helpers\nfunction scale(num, min, max) {\n   return Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n  var str = num.toString(16).toUpperCase();\n  return (str.length < 2) ? \"0\" + str : str;\n}\n\n\n//create a list of reverse color names\nvar reverseNames = {};\nfor (var name in colorNames) {\n   reverseNames[colorNames[name]] = name;\n}\n","'use strict';\n\nmodule.exports = function(Chart) {\n\t// Global Chart canvas helpers object for drawing items to canvas\n\tvar helpers = Chart.canvasHelpers = {};\n\n\thelpers.drawPoint = function(ctx, pointStyle, radius, x, y) {\n\t\tvar type, edgeLength, xOffset, yOffset, height, size;\n\n\t\tif (typeof pointStyle === 'object') {\n\t\t\ttype = pointStyle.toString();\n\t\t\tif (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n\t\t\t\tctx.drawImage(pointStyle, x - pointStyle.width / 2, y - pointStyle.height / 2);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (isNaN(radius) || radius <= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (pointStyle) {\n\t\t// Default includes circle\n\t\tdefault:\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t\tbreak;\n\t\tcase 'triangle':\n\t\t\tctx.beginPath();\n\t\t\tedgeLength = 3 * radius / Math.sqrt(3);\n\t\t\theight = edgeLength * Math.sqrt(3) / 2;\n\t\t\tctx.moveTo(x - edgeLength / 2, y + height / 3);\n\t\t\tctx.lineTo(x + edgeLength / 2, y + height / 3);\n\t\t\tctx.lineTo(x, y - 2 * height / 3);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t\tbreak;\n\t\tcase 'rect':\n\t\t\tsize = 1 / Math.SQRT2 * radius;\n\t\t\tctx.beginPath();\n\t\t\tctx.fillRect(x - size, y - size, 2 * size, 2 * size);\n\t\t\tctx.strokeRect(x - size, y - size, 2 * size, 2 * size);\n\t\t\tbreak;\n\t\tcase 'rectRot':\n\t\t\tsize = 1 / Math.SQRT2 * radius;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x - size, y);\n\t\t\tctx.lineTo(x, y + size);\n\t\t\tctx.lineTo(x + size, y);\n\t\t\tctx.lineTo(x, y - size);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t\tbreak;\n\t\tcase 'cross':\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x, y + radius);\n\t\t\tctx.lineTo(x, y - radius);\n\t\t\tctx.moveTo(x - radius, y);\n\t\t\tctx.lineTo(x + radius, y);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\tcase 'crossRot':\n\t\t\tctx.beginPath();\n\t\t\txOffset = Math.cos(Math.PI / 4) * radius;\n\t\t\tyOffset = Math.sin(Math.PI / 4) * radius;\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\n\t\t\tctx.moveTo(x - xOffset, y + yOffset);\n\t\t\tctx.lineTo(x + xOffset, y - yOffset);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\tcase 'star':\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x, y + radius);\n\t\t\tctx.lineTo(x, y - radius);\n\t\t\tctx.moveTo(x - radius, y);\n\t\t\tctx.lineTo(x + radius, y);\n\t\t\txOffset = Math.cos(Math.PI / 4) * radius;\n\t\t\tyOffset = Math.sin(Math.PI / 4) * radius;\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\n\t\t\tctx.moveTo(x - xOffset, y + yOffset);\n\t\t\tctx.lineTo(x + xOffset, y - yOffset);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\tcase 'line':\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x - radius, y);\n\t\t\tctx.lineTo(x + radius, y);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\tcase 'dash':\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x, y);\n\t\t\tctx.lineTo(x + radius, y);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\t}\n\n\t\tctx.stroke();\n\t};\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.elements = {};\n\n\tChart.Element = function(configuration) {\n\t\thelpers.extend(this, configuration);\n\t\tthis.initialize.apply(this, arguments);\n\t};\n\n\thelpers.extend(Chart.Element.prototype, {\n\n\t\tinitialize: function() {\n\t\t\tthis.hidden = false;\n\t\t},\n\n\t\tpivot: function() {\n\t\t\tvar me = this;\n\t\t\tif (!me._view) {\n\t\t\t\tme._view = helpers.clone(me._model);\n\t\t\t}\n\t\t\tme._start = helpers.clone(me._view);\n\t\t\treturn me;\n\t\t},\n\n\t\ttransition: function(ease) {\n\t\t\tvar me = this;\n\n\t\t\tif (!me._view) {\n\t\t\t\tme._view = helpers.clone(me._model);\n\t\t\t}\n\n\t\t\t// No animation -> No Transition\n\t\t\tif (ease === 1) {\n\t\t\t\tme._view = me._model;\n\t\t\t\tme._start = null;\n\t\t\t\treturn me;\n\t\t\t}\n\n\t\t\tif (!me._start) {\n\t\t\t\tme.pivot();\n\t\t\t}\n\n\t\t\thelpers.each(me._model, function(value, key) {\n\n\t\t\t\tif (key[0] === '_') {\n\t\t\t\t\t// Only non-underscored properties\n\t\t\t\t// Init if doesn't exist\n\t\t\t\t} else if (!me._view.hasOwnProperty(key)) {\n\t\t\t\t\tif (typeof value === 'number' && !isNaN(me._view[key])) {\n\t\t\t\t\t\tme._view[key] = value * ease;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tme._view[key] = value;\n\t\t\t\t\t}\n\t\t\t\t// No unnecessary computations\n\t\t\t\t} else if (value === me._view[key]) {\n\t\t\t\t\t// It's the same! Woohoo!\n\t\t\t\t// Color transitions if possible\n\t\t\t\t} else if (typeof value === 'string') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar color = helpers.color(me._model[key]).mix(helpers.color(me._start[key]), ease);\n\t\t\t\t\t\tme._view[key] = color.rgbString();\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tme._view[key] = value;\n\t\t\t\t\t}\n\t\t\t\t// Number transitions\n\t\t\t\t} else if (typeof value === 'number') {\n\t\t\t\t\tvar startVal = me._start[key] !== undefined && isNaN(me._start[key]) === false ? me._start[key] : 0;\n\t\t\t\t\tme._view[key] = ((me._model[key] - startVal) * ease) + startVal;\n\t\t\t\t// Everything else\n\t\t\t\t} else {\n\t\t\t\t\tme._view[key] = value;\n\t\t\t\t}\n\t\t\t}, me);\n\n\t\t\treturn me;\n\t\t},\n\n\t\ttooltipPosition: function() {\n\t\t\treturn {\n\t\t\t\tx: this._model.x,\n\t\t\t\ty: this._model.y\n\t\t\t};\n\t\t},\n\n\t\thasValue: function() {\n\t\t\treturn helpers.isNumber(this._model.x) && helpers.isNumber(this._model.y);\n\t\t}\n\t});\n\n\tChart.Element.extend = helpers.inherits;\n\n};\n","/* global window: false */\n'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.global.animation = {\n\t\tduration: 1000,\n\t\teasing: 'easeOutQuart',\n\t\tonProgress: helpers.noop,\n\t\tonComplete: helpers.noop\n\t};\n\n\tChart.Animation = Chart.Element.extend({\n\t\tcurrentStep: null, // the current animation step\n\t\tnumSteps: 60, // default number of steps\n\t\teasing: '', // the easing to use for this animation\n\t\trender: null, // render function used by the animation service\n\n\t\tonAnimationProgress: null, // user specified callback to fire on each step of the animation\n\t\tonAnimationComplete: null // user specified callback to fire when the animation finishes\n\t});\n\n\tChart.animationService = {\n\t\tframeDuration: 17,\n\t\tanimations: [],\n\t\tdropFrames: 0,\n\t\trequest: null,\n\t\taddAnimation: function(chartInstance, animationObject, duration, lazy) {\n\t\t\tvar me = this;\n\n\t\t\tif (!lazy) {\n\t\t\t\tchartInstance.animating = true;\n\t\t\t}\n\n\t\t\tfor (var index = 0; index < me.animations.length; ++index) {\n\t\t\t\tif (me.animations[index].chartInstance === chartInstance) {\n\t\t\t\t\t// replacing an in progress animation\n\t\t\t\t\tme.animations[index].animationObject = animationObject;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.animations.push({\n\t\t\t\tchartInstance: chartInstance,\n\t\t\t\tanimationObject: animationObject\n\t\t\t});\n\n\t\t\t// If there are no animations queued, manually kickstart a digest, for lack of a better word\n\t\t\tif (me.animations.length === 1) {\n\t\t\t\tme.requestAnimationFrame();\n\t\t\t}\n\t\t},\n\t\t// Cancel the animation for a given chart instance\n\t\tcancelAnimation: function(chartInstance) {\n\t\t\tvar index = helpers.findIndex(this.animations, function(animationWrapper) {\n\t\t\t\treturn animationWrapper.chartInstance === chartInstance;\n\t\t\t});\n\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.animations.splice(index, 1);\n\t\t\t\tchartInstance.animating = false;\n\t\t\t}\n\t\t},\n\t\trequestAnimationFrame: function() {\n\t\t\tvar me = this;\n\t\t\tif (me.request === null) {\n\t\t\t\t// Skip animation frame requests until the active one is executed.\n\t\t\t\t// This can happen when processing mouse events, e.g. 'mousemove'\n\t\t\t\t// and 'mouseout' events will trigger multiple renders.\n\t\t\t\tme.request = helpers.requestAnimFrame.call(window, function() {\n\t\t\t\t\tme.request = null;\n\t\t\t\t\tme.startDigest();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tstartDigest: function() {\n\t\t\tvar me = this;\n\n\t\t\tvar startTime = Date.now();\n\t\t\tvar framesToDrop = 0;\n\n\t\t\tif (me.dropFrames > 1) {\n\t\t\t\tframesToDrop = Math.floor(me.dropFrames);\n\t\t\t\tme.dropFrames = me.dropFrames % 1;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\t\t\twhile (i < me.animations.length) {\n\t\t\t\tif (me.animations[i].animationObject.currentStep === null) {\n\t\t\t\t\tme.animations[i].animationObject.currentStep = 0;\n\t\t\t\t}\n\n\t\t\t\tme.animations[i].animationObject.currentStep += 1 + framesToDrop;\n\n\t\t\t\tif (me.animations[i].animationObject.currentStep > me.animations[i].animationObject.numSteps) {\n\t\t\t\t\tme.animations[i].animationObject.currentStep = me.animations[i].animationObject.numSteps;\n\t\t\t\t}\n\n\t\t\t\tme.animations[i].animationObject.render(me.animations[i].chartInstance, me.animations[i].animationObject);\n\t\t\t\tif (me.animations[i].animationObject.onAnimationProgress && me.animations[i].animationObject.onAnimationProgress.call) {\n\t\t\t\t\tme.animations[i].animationObject.onAnimationProgress.call(me.animations[i].chartInstance, me.animations[i]);\n\t\t\t\t}\n\n\t\t\t\tif (me.animations[i].animationObject.currentStep === me.animations[i].animationObject.numSteps) {\n\t\t\t\t\tif (me.animations[i].animationObject.onAnimationComplete && me.animations[i].animationObject.onAnimationComplete.call) {\n\t\t\t\t\t\tme.animations[i].animationObject.onAnimationComplete.call(me.animations[i].chartInstance, me.animations[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// executed the last frame. Remove the animation.\n\t\t\t\t\tme.animations[i].chartInstance.animating = false;\n\n\t\t\t\t\tme.animations.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar endTime = Date.now();\n\t\t\tvar dropFrames = (endTime - startTime) / me.frameDuration;\n\n\t\t\tme.dropFrames += dropFrames;\n\n\t\t\t// Do we have more stuff to animate?\n\t\t\tif (me.animations.length > 0) {\n\t\t\t\tme.requestAnimationFrame();\n\t\t\t}\n\t\t}\n\t};\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\t// Create a dictionary of chart types, to allow for extension of existing types\n\tChart.types = {};\n\n\t// Store a reference to each instance - allowing us to globally resize chart instances on window resize.\n\t// Destroy method on the chart will remove the instance of the chart from this reference.\n\tChart.instances = {};\n\n\t// Controllers available for dataset visualization eg. bar, line, slice, etc.\n\tChart.controllers = {};\n\n\t/**\n\t * @class Chart.Controller\n\t * The main controller of a chart.\n\t */\n\tChart.Controller = function(instance) {\n\n\t\tthis.chart = instance;\n\t\tthis.config = instance.config;\n\t\tthis.options = this.config.options = helpers.configMerge(Chart.defaults.global, Chart.defaults[this.config.type], this.config.options || {});\n\t\tthis.id = helpers.uid();\n\n\t\tObject.defineProperty(this, 'data', {\n\t\t\tget: function() {\n\t\t\t\treturn this.config.data;\n\t\t\t}\n\t\t});\n\n\t\t// Add the chart instance to the global namespace\n\t\tChart.instances[this.id] = this;\n\n\t\tif (this.options.responsive) {\n\t\t\t// Silent resize before chart draws\n\t\t\tthis.resize(true);\n\t\t}\n\n\t\tthis.initialize();\n\n\t\treturn this;\n\t};\n\n\thelpers.extend(Chart.Controller.prototype, /** @lends Chart.Controller */ {\n\n\t\tinitialize: function() {\n\t\t\tvar me = this;\n\t\t\t// Before init plugin notification\n\t\t\tChart.plugins.notify('beforeInit', [me]);\n\n\t\t\tme.bindEvents();\n\n\t\t\t// Make sure controllers are built first so that each dataset is bound to an axis before the scales\n\t\t\t// are built\n\t\t\tme.ensureScalesHaveIDs();\n\t\t\tme.buildOrUpdateControllers();\n\t\t\tme.buildScales();\n\t\t\tme.updateLayout();\n\t\t\tme.resetElements();\n\t\t\tme.initToolTip();\n\t\t\tme.update();\n\n\t\t\t// After init plugin notification\n\t\t\tChart.plugins.notify('afterInit', [me]);\n\n\t\t\treturn me;\n\t\t},\n\n\t\tclear: function() {\n\t\t\thelpers.clear(this.chart);\n\t\t\treturn this;\n\t\t},\n\n\t\tstop: function() {\n\t\t\t// Stops any current animation loop occuring\n\t\t\tChart.animationService.cancelAnimation(this);\n\t\t\treturn this;\n\t\t},\n\n\t\tresize: function(silent) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar canvas = chart.canvas;\n\t\t\tvar newWidth = helpers.getMaximumWidth(canvas);\n\t\t\tvar aspectRatio = chart.aspectRatio;\n\t\t\tvar newHeight = (me.options.maintainAspectRatio && isNaN(aspectRatio) === false && isFinite(aspectRatio) && aspectRatio !== 0) ? newWidth / aspectRatio : helpers.getMaximumHeight(canvas);\n\n\t\t\tvar sizeChanged = chart.width !== newWidth || chart.height !== newHeight;\n\n\t\t\tif (!sizeChanged) {\n\t\t\t\treturn me;\n\t\t\t}\n\n\t\t\tcanvas.width = chart.width = newWidth;\n\t\t\tcanvas.height = chart.height = newHeight;\n\n\t\t\thelpers.retinaScale(chart);\n\n\t\t\t// Notify any plugins about the resize\n\t\t\tvar newSize = {width: newWidth, height: newHeight};\n\t\t\tChart.plugins.notify('resize', [me, newSize]);\n\n\t\t\t// Notify of resize\n\t\t\tif (me.options.onResize) {\n\t\t\t\tme.options.onResize(me, newSize);\n\t\t\t}\n\n\t\t\tif (!silent) {\n\t\t\t\tme.stop();\n\t\t\t\tme.update(me.options.responsiveAnimationDuration);\n\t\t\t}\n\n\t\t\treturn me;\n\t\t},\n\n\t\tensureScalesHaveIDs: function() {\n\t\t\tvar options = this.options;\n\t\t\tvar scalesOptions = options.scales || {};\n\t\t\tvar scaleOptions = options.scale;\n\n\t\t\thelpers.each(scalesOptions.xAxes, function(xAxisOptions, index) {\n\t\t\t\txAxisOptions.id = xAxisOptions.id || ('x-axis-' + index);\n\t\t\t});\n\n\t\t\thelpers.each(scalesOptions.yAxes, function(yAxisOptions, index) {\n\t\t\t\tyAxisOptions.id = yAxisOptions.id || ('y-axis-' + index);\n\t\t\t});\n\n\t\t\tif (scaleOptions) {\n\t\t\t\tscaleOptions.id = scaleOptions.id || 'scale';\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Builds a map of scale ID to scale object for future lookup.\n\t\t */\n\t\tbuildScales: function() {\n\t\t\tvar me = this;\n\t\t\tvar options = me.options;\n\t\t\tvar scales = me.scales = {};\n\t\t\tvar items = [];\n\n\t\t\tif (options.scales) {\n\t\t\t\titems = items.concat(\n\t\t\t\t\t(options.scales.xAxes || []).map(function(xAxisOptions) {\n\t\t\t\t\t\treturn {options: xAxisOptions, dtype: 'category'};\n\t\t\t\t\t}),\n\t\t\t\t\t(options.scales.yAxes || []).map(function(yAxisOptions) {\n\t\t\t\t\t\treturn {options: yAxisOptions, dtype: 'linear'};\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (options.scale) {\n\t\t\t\titems.push({options: options.scale, dtype: 'radialLinear', isDefault: true});\n\t\t\t}\n\n\t\t\thelpers.each(items, function(item) {\n\t\t\t\tvar scaleOptions = item.options;\n\t\t\t\tvar scaleType = helpers.getValueOrDefault(scaleOptions.type, item.dtype);\n\t\t\t\tvar scaleClass = Chart.scaleService.getScaleConstructor(scaleType);\n\t\t\t\tif (!scaleClass) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar scale = new scaleClass({\n\t\t\t\t\tid: scaleOptions.id,\n\t\t\t\t\toptions: scaleOptions,\n\t\t\t\t\tctx: me.chart.ctx,\n\t\t\t\t\tchart: me\n\t\t\t\t});\n\n\t\t\t\tscales[scale.id] = scale;\n\n\t\t\t\t// TODO(SB): I think we should be able to remove this custom case (options.scale)\n\t\t\t\t// and consider it as a regular scale part of the \"scales\"\" map only! This would\n\t\t\t\t// make the logic easier and remove some useless? custom code.\n\t\t\t\tif (item.isDefault) {\n\t\t\t\t\tme.scale = scale;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tChart.scaleService.addScalesToLayout(this);\n\t\t},\n\n\t\tupdateLayout: function() {\n\t\t\tChart.layoutService.update(this, this.chart.width, this.chart.height);\n\t\t},\n\n\t\tbuildOrUpdateControllers: function() {\n\t\t\tvar me = this;\n\t\t\tvar types = [];\n\t\t\tvar newControllers = [];\n\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tvar meta = me.getDatasetMeta(datasetIndex);\n\t\t\t\tif (!meta.type) {\n\t\t\t\t\tmeta.type = dataset.type || me.config.type;\n\t\t\t\t}\n\n\t\t\t\ttypes.push(meta.type);\n\n\t\t\t\tif (meta.controller) {\n\t\t\t\t\tmeta.controller.updateIndex(datasetIndex);\n\t\t\t\t} else {\n\t\t\t\t\tmeta.controller = new Chart.controllers[meta.type](me, datasetIndex);\n\t\t\t\t\tnewControllers.push(meta.controller);\n\t\t\t\t}\n\t\t\t}, me);\n\n\t\t\tif (types.length > 1) {\n\t\t\t\tfor (var i = 1; i < types.length; i++) {\n\t\t\t\t\tif (types[i] !== types[i - 1]) {\n\t\t\t\t\t\tme.isCombo = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newControllers;\n\t\t},\n\n\t\tresetElements: function() {\n\t\t\tvar me = this;\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tme.getDatasetMeta(datasetIndex).controller.reset();\n\t\t\t}, me);\n\t\t},\n\n\t\tupdate: function(animationDuration, lazy) {\n\t\t\tvar me = this;\n\t\t\tChart.plugins.notify('beforeUpdate', [me]);\n\n\t\t\t// In case the entire data object changed\n\t\t\tme.tooltip._data = me.data;\n\n\t\t\t// Make sure dataset controllers are updated and new controllers are reset\n\t\t\tvar newControllers = me.buildOrUpdateControllers();\n\n\t\t\t// Make sure all dataset controllers have correct meta data counts\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tme.getDatasetMeta(datasetIndex).controller.buildOrUpdateElements();\n\t\t\t}, me);\n\n\t\t\tChart.layoutService.update(me, me.chart.width, me.chart.height);\n\n\t\t\t// Apply changes to the dataets that require the scales to have been calculated i.e BorderColor chages\n\t\t\tChart.plugins.notify('afterScaleUpdate', [me]);\n\n\t\t\t// Can only reset the new controllers after the scales have been updated\n\t\t\thelpers.each(newControllers, function(controller) {\n\t\t\t\tcontroller.reset();\n\t\t\t});\n\n\t\t\tme.updateDatasets();\n\n\t\t\t// Do this before render so that any plugins that need final scale updates can use it\n\t\t\tChart.plugins.notify('afterUpdate', [me]);\n\n\t\t\tme.render(animationDuration, lazy);\n\t\t},\n\n\t\t/**\n\t\t * @method beforeDatasetsUpdate\n\t\t * @description Called before all datasets are updated. If a plugin returns false,\n\t\t * the datasets update will be cancelled until another chart update is triggered.\n\t\t * @param {Object} instance the chart instance being updated.\n\t\t * @returns {Boolean} false to cancel the datasets update.\n\t\t * @memberof Chart.PluginBase\n\t\t * @since version 2.1.5\n\t\t * @instance\n\t\t */\n\n\t\t/**\n\t\t * @method afterDatasetsUpdate\n\t\t * @description Called after all datasets have been updated. Note that this\n\t\t * extension will not be called if the datasets update has been cancelled.\n\t\t * @param {Object} instance the chart instance being updated.\n\t\t * @memberof Chart.PluginBase\n\t\t * @since version 2.1.5\n\t\t * @instance\n\t\t */\n\n\t\t/**\n\t\t * Updates all datasets unless a plugin returns false to the beforeDatasetsUpdate\n\t\t * extension, in which case no datasets will be updated and the afterDatasetsUpdate\n\t\t * notification will be skipped.\n\t\t * @protected\n\t\t * @instance\n\t\t */\n\t\tupdateDatasets: function() {\n\t\t\tvar me = this;\n\t\t\tvar i, ilen;\n\n\t\t\tif (Chart.plugins.notify('beforeDatasetsUpdate', [me])) {\n\t\t\t\tfor (i = 0, ilen = me.data.datasets.length; i < ilen; ++i) {\n\t\t\t\t\tme.getDatasetMeta(i).controller.update();\n\t\t\t\t}\n\n\t\t\t\tChart.plugins.notify('afterDatasetsUpdate', [me]);\n\t\t\t}\n\t\t},\n\n\t\trender: function(duration, lazy) {\n\t\t\tvar me = this;\n\t\t\tChart.plugins.notify('beforeRender', [me]);\n\n\t\t\tvar animationOptions = me.options.animation;\n\t\t\tif (animationOptions && ((typeof duration !== 'undefined' && duration !== 0) || (typeof duration === 'undefined' && animationOptions.duration !== 0))) {\n\t\t\t\tvar animation = new Chart.Animation();\n\t\t\t\tanimation.numSteps = (duration || animationOptions.duration) / 16.66; // 60 fps\n\t\t\t\tanimation.easing = animationOptions.easing;\n\n\t\t\t\t// render function\n\t\t\t\tanimation.render = function(chartInstance, animationObject) {\n\t\t\t\t\tvar easingFunction = helpers.easingEffects[animationObject.easing];\n\t\t\t\t\tvar stepDecimal = animationObject.currentStep / animationObject.numSteps;\n\t\t\t\t\tvar easeDecimal = easingFunction(stepDecimal);\n\n\t\t\t\t\tchartInstance.draw(easeDecimal, stepDecimal, animationObject.currentStep);\n\t\t\t\t};\n\n\t\t\t\t// user events\n\t\t\t\tanimation.onAnimationProgress = animationOptions.onProgress;\n\t\t\t\tanimation.onAnimationComplete = animationOptions.onComplete;\n\n\t\t\t\tChart.animationService.addAnimation(me, animation, duration, lazy);\n\t\t\t} else {\n\t\t\t\tme.draw();\n\t\t\t\tif (animationOptions && animationOptions.onComplete && animationOptions.onComplete.call) {\n\t\t\t\t\tanimationOptions.onComplete.call(me);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn me;\n\t\t},\n\n\t\tdraw: function(ease) {\n\t\t\tvar me = this;\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\tme.clear();\n\n\t\t\tChart.plugins.notify('beforeDraw', [me, easingDecimal]);\n\n\t\t\t// Draw all the scales\n\t\t\thelpers.each(me.boxes, function(box) {\n\t\t\t\tbox.draw(me.chartArea);\n\t\t\t}, me);\n\t\t\tif (me.scale) {\n\t\t\t\tme.scale.draw();\n\t\t\t}\n\n\t\t\tChart.plugins.notify('beforeDatasetsDraw', [me, easingDecimal]);\n\n\t\t\t// Draw each dataset via its respective controller (reversed to support proper line stacking)\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (me.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tme.getDatasetMeta(datasetIndex).controller.draw(ease);\n\t\t\t\t}\n\t\t\t}, me, true);\n\n\t\t\tChart.plugins.notify('afterDatasetsDraw', [me, easingDecimal]);\n\n\t\t\t// Finally draw the tooltip\n\t\t\tme.tooltip.transition(easingDecimal).draw();\n\n\t\t\tChart.plugins.notify('afterDraw', [me, easingDecimal]);\n\t\t},\n\n\t\t// Get the single element that was clicked on\n\t\t// @return : An object containing the dataset index and element index of the matching element. Also contains the rectangle that was draw\n\t\tgetElementAtEvent: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar eventPosition = helpers.getRelativePosition(e, me.chart);\n\t\t\tvar elementsArray = [];\n\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (me.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tvar meta = me.getDatasetMeta(datasetIndex);\n\t\t\t\t\thelpers.each(meta.data, function(element) {\n\t\t\t\t\t\tif (element.inRange(eventPosition.x, eventPosition.y)) {\n\t\t\t\t\t\t\telementsArray.push(element);\n\t\t\t\t\t\t\treturn elementsArray;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn elementsArray.slice(0, 1);\n\t\t},\n\n\t\tgetElementsAtEvent: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar eventPosition = helpers.getRelativePosition(e, me.chart);\n\t\t\tvar elementsArray = [];\n\n\t\t\tvar found = function() {\n\t\t\t\tif (me.data.datasets) {\n\t\t\t\t\tfor (var i = 0; i < me.data.datasets.length; i++) {\n\t\t\t\t\t\tvar meta = me.getDatasetMeta(i);\n\t\t\t\t\t\tif (me.isDatasetVisible(i)) {\n\t\t\t\t\t\t\tfor (var j = 0; j < meta.data.length; j++) {\n\t\t\t\t\t\t\t\tif (meta.data[j].inRange(eventPosition.x, eventPosition.y)) {\n\t\t\t\t\t\t\t\t\treturn meta.data[j];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.call(me);\n\n\t\t\tif (!found) {\n\t\t\t\treturn elementsArray;\n\t\t\t}\n\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (me.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tvar meta = me.getDatasetMeta(datasetIndex),\n\t\t\t\t\t\telement = meta.data[found._index];\n\t\t\t\t\tif (element && !element._view.skip) {\n\t\t\t\t\t\telementsArray.push(element);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, me);\n\n\t\t\treturn elementsArray;\n\t\t},\n\n\t\tgetElementsAtXAxis: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar eventPosition = helpers.getRelativePosition(e, me.chart);\n\t\t\tvar elementsArray = [];\n\n\t\t\tvar found = function() {\n\t\t\t\tif (me.data.datasets) {\n\t\t\t\t\tfor (var i = 0; i < me.data.datasets.length; i++) {\n\t\t\t\t\t\tvar meta = me.getDatasetMeta(i);\n\t\t\t\t\t\tif (me.isDatasetVisible(i)) {\n\t\t\t\t\t\t\tfor (var j = 0; j < meta.data.length; j++) {\n\t\t\t\t\t\t\t\tif (meta.data[j].inLabelRange(eventPosition.x, eventPosition.y)) {\n\t\t\t\t\t\t\t\t\treturn meta.data[j];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.call(me);\n\n\t\t\tif (!found) {\n\t\t\t\treturn elementsArray;\n\t\t\t}\n\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (me.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tvar meta = me.getDatasetMeta(datasetIndex);\n\t\t\t\t\tvar index = helpers.findIndex(meta.data, function(it) {\n\t\t\t\t\t\treturn found._model.x === it._model.x;\n\t\t\t\t\t});\n\t\t\t\t\tif (index !== -1 && !meta.data[index]._view.skip) {\n\t\t\t\t\t\telementsArray.push(meta.data[index]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, me);\n\n\t\t\treturn elementsArray;\n\t\t},\n\n\t\tgetElementsAtEventForMode: function(e, mode) {\n\t\t\tvar me = this;\n\t\t\tswitch (mode) {\n\t\t\tcase 'single':\n\t\t\t\treturn me.getElementAtEvent(e);\n\t\t\tcase 'label':\n\t\t\t\treturn me.getElementsAtEvent(e);\n\t\t\tcase 'dataset':\n\t\t\t\treturn me.getDatasetAtEvent(e);\n\t\t\tcase 'x-axis':\n\t\t\t\treturn me.getElementsAtXAxis(e);\n\t\t\tdefault:\n\t\t\t\treturn e;\n\t\t\t}\n\t\t},\n\n\t\tgetDatasetAtEvent: function(e) {\n\t\t\tvar elementsArray = this.getElementAtEvent(e);\n\n\t\t\tif (elementsArray.length > 0) {\n\t\t\t\telementsArray = this.getDatasetMeta(elementsArray[0]._datasetIndex).data;\n\t\t\t}\n\n\t\t\treturn elementsArray;\n\t\t},\n\n\t\tgetDatasetMeta: function(datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar dataset = me.data.datasets[datasetIndex];\n\t\t\tif (!dataset._meta) {\n\t\t\t\tdataset._meta = {};\n\t\t\t}\n\n\t\t\tvar meta = dataset._meta[me.id];\n\t\t\tif (!meta) {\n\t\t\t\tmeta = dataset._meta[me.id] = {\n\t\t\t\t\ttype: null,\n\t\t\t\t\tdata: [],\n\t\t\t\t\tdataset: null,\n\t\t\t\t\tcontroller: null,\n\t\t\t\t\thidden: null,\t\t\t// See isDatasetVisible() comment\n\t\t\t\t\txAxisID: null,\n\t\t\t\t\tyAxisID: null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn meta;\n\t\t},\n\n\t\tgetVisibleDatasetCount: function() {\n\t\t\tvar count = 0;\n\t\t\tfor (var i = 0, ilen = this.data.datasets.length; i<ilen; ++i) {\n\t\t\t\tif (this.isDatasetVisible(i)) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\n\t\tisDatasetVisible: function(datasetIndex) {\n\t\t\tvar meta = this.getDatasetMeta(datasetIndex);\n\n\t\t\t// meta.hidden is a per chart dataset hidden flag override with 3 states: if true or false,\n\t\t\t// the dataset.hidden value is ignored, else if null, the dataset hidden state is returned.\n\t\t\treturn typeof meta.hidden === 'boolean'? !meta.hidden : !this.data.datasets[datasetIndex].hidden;\n\t\t},\n\n\t\tgenerateLegend: function() {\n\t\t\treturn this.options.legendCallback(this);\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\tvar me = this;\n\t\t\tme.stop();\n\t\t\tme.clear();\n\t\t\thelpers.unbindEvents(me, me.events);\n\t\t\thelpers.removeResizeListener(me.chart.canvas.parentNode);\n\n\t\t\t// Reset canvas height/width attributes\n\t\t\tvar canvas = me.chart.canvas;\n\t\t\tcanvas.width = me.chart.width;\n\t\t\tcanvas.height = me.chart.height;\n\n\t\t\t// if we scaled the canvas in response to a devicePixelRatio !== 1, we need to undo that transform here\n\t\t\tif (me.chart.originalDevicePixelRatio !== undefined) {\n\t\t\t\tme.chart.ctx.scale(1 / me.chart.originalDevicePixelRatio, 1 / me.chart.originalDevicePixelRatio);\n\t\t\t}\n\n\t\t\t// Reset to the old style since it may have been changed by the device pixel ratio changes\n\t\t\tcanvas.style.width = me.chart.originalCanvasStyleWidth;\n\t\t\tcanvas.style.height = me.chart.originalCanvasStyleHeight;\n\n\t\t\tChart.plugins.notify('destroy', [me]);\n\n\t\t\tdelete Chart.instances[me.id];\n\t\t},\n\n\t\ttoBase64Image: function() {\n\t\t\treturn this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments);\n\t\t},\n\n\t\tinitToolTip: function() {\n\t\t\tvar me = this;\n\t\t\tme.tooltip = new Chart.Tooltip({\n\t\t\t\t_chart: me.chart,\n\t\t\t\t_chartInstance: me,\n\t\t\t\t_data: me.data,\n\t\t\t\t_options: me.options.tooltips\n\t\t\t}, me);\n\t\t},\n\n\t\tbindEvents: function() {\n\t\t\tvar me = this;\n\t\t\thelpers.bindEvents(me, me.options.events, function(evt) {\n\t\t\t\tme.eventHandler(evt);\n\t\t\t});\n\t\t},\n\n\t\tupdateHoverStyle: function(elements, mode, enabled) {\n\t\t\tvar method = enabled? 'setHoverStyle' : 'removeHoverStyle';\n\t\t\tvar element, i, ilen;\n\n\t\t\tswitch (mode) {\n\t\t\tcase 'single':\n\t\t\t\telements = [elements[0]];\n\t\t\t\tbreak;\n\t\t\tcase 'label':\n\t\t\tcase 'dataset':\n\t\t\tcase 'x-axis':\n\t\t\t\t// elements = elements;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// unsupported mode\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (i=0, ilen=elements.length; i<ilen; ++i) {\n\t\t\t\telement = elements[i];\n\t\t\t\tif (element) {\n\t\t\t\t\tthis.getDatasetMeta(element._datasetIndex).controller[method](element);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\teventHandler: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar tooltip = me.tooltip;\n\t\t\tvar options = me.options || {};\n\t\t\tvar hoverOptions = options.hover;\n\t\t\tvar tooltipsOptions = options.tooltips;\n\n\t\t\tme.lastActive = me.lastActive || [];\n\t\t\tme.lastTooltipActive = me.lastTooltipActive || [];\n\n\t\t\t// Find Active Elements for hover and tooltips\n\t\t\tif (e.type === 'mouseout') {\n\t\t\t\tme.active = [];\n\t\t\t\tme.tooltipActive = [];\n\t\t\t} else {\n\t\t\t\tme.active = me.getElementsAtEventForMode(e, hoverOptions.mode);\n\t\t\t\tme.tooltipActive = me.getElementsAtEventForMode(e, tooltipsOptions.mode);\n\t\t\t}\n\n\t\t\t// On Hover hook\n\t\t\tif (hoverOptions.onHover) {\n\t\t\t\thoverOptions.onHover.call(me, me.active);\n\t\t\t}\n\n\t\t\tif (me.legend && me.legend.handleEvent) {\n\t\t\t\tme.legend.handleEvent(e);\n\t\t\t}\n\n\t\t\tif (e.type === 'mouseup' || e.type === 'click') {\n\t\t\t\tif (options.onClick) {\n\t\t\t\t\toptions.onClick.call(me, e, me.active);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove styling for last active (even if it may still be active)\n\t\t\tif (me.lastActive.length) {\n\t\t\t\tme.updateHoverStyle(me.lastActive, hoverOptions.mode, false);\n\t\t\t}\n\n\t\t\t// Built in hover styling\n\t\t\tif (me.active.length && hoverOptions.mode) {\n\t\t\t\tme.updateHoverStyle(me.active, hoverOptions.mode, true);\n\t\t\t}\n\n\t\t\t// Built in Tooltips\n\t\t\tif (tooltipsOptions.enabled || tooltipsOptions.custom) {\n\t\t\t\ttooltip.initialize();\n\t\t\t\ttooltip._active = me.tooltipActive;\n\t\t\t\ttooltip.update(true);\n\t\t\t}\n\n\t\t\t// Hover animations\n\t\t\ttooltip.pivot();\n\n\t\t\tif (!me.animating) {\n\t\t\t\t// If entering, leaving, or changing elements, animate the change via pivot\n\t\t\t\tif (!helpers.arrayEquals(me.active, me.lastActive) ||\n\t\t\t\t\t!helpers.arrayEquals(me.tooltipActive, me.lastTooltipActive)) {\n\n\t\t\t\t\tme.stop();\n\n\t\t\t\t\tif (tooltipsOptions.enabled || tooltipsOptions.custom) {\n\t\t\t\t\t\ttooltip.update(true);\n\t\t\t\t\t}\n\n\t\t\t\t\t// We only need to render at this point. Updating will cause scales to be\n\t\t\t\t\t// recomputed generating flicker & using more memory than necessary.\n\t\t\t\t\tme.render(hoverOptions.animationDuration, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remember Last Actives\n\t\t\tme.lastActive = me.active;\n\t\t\tme.lastTooltipActive = me.tooltipActive;\n\t\t\treturn me;\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar noop = helpers.noop;\n\n\t// Base class for all dataset controllers (line, bar, etc)\n\tChart.DatasetController = function(chart, datasetIndex) {\n\t\tthis.initialize(chart, datasetIndex);\n\t};\n\n\thelpers.extend(Chart.DatasetController.prototype, {\n\n\t\t/**\n\t\t * Element type used to generate a meta dataset (e.g. Chart.element.Line).\n\t\t * @type {Chart.core.element}\n\t\t */\n\t\tdatasetElementType: null,\n\n\t\t/**\n\t\t * Element type used to generate a meta data (e.g. Chart.element.Point).\n\t\t * @type {Chart.core.element}\n\t\t */\n\t\tdataElementType: null,\n\n\t\tinitialize: function(chart, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tme.chart = chart;\n\t\t\tme.index = datasetIndex;\n\t\t\tme.linkScales();\n\t\t\tme.addElements();\n\t\t},\n\n\t\tupdateIndex: function(datasetIndex) {\n\t\t\tthis.index = datasetIndex;\n\t\t},\n\n\t\tlinkScales: function() {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar dataset = me.getDataset();\n\n\t\t\tif (meta.xAxisID === null) {\n\t\t\t\tmeta.xAxisID = dataset.xAxisID || me.chart.options.scales.xAxes[0].id;\n\t\t\t}\n\t\t\tif (meta.yAxisID === null) {\n\t\t\t\tmeta.yAxisID = dataset.yAxisID || me.chart.options.scales.yAxes[0].id;\n\t\t\t}\n\t\t},\n\n\t\tgetDataset: function() {\n\t\t\treturn this.chart.data.datasets[this.index];\n\t\t},\n\n\t\tgetMeta: function() {\n\t\t\treturn this.chart.getDatasetMeta(this.index);\n\t\t},\n\n\t\tgetScaleForId: function(scaleID) {\n\t\t\treturn this.chart.scales[scaleID];\n\t\t},\n\n\t\treset: function() {\n\t\t\tthis.update(true);\n\t\t},\n\n\t\tcreateMetaDataset: function() {\n\t\t\tvar me = this;\n\t\t\tvar type = me.datasetElementType;\n\t\t\treturn type && new type({\n\t\t\t\t_chart: me.chart.chart,\n\t\t\t\t_datasetIndex: me.index\n\t\t\t});\n\t\t},\n\n\t\tcreateMetaData: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar type = me.dataElementType;\n\t\t\treturn type && new type({\n\t\t\t\t_chart: me.chart.chart,\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index\n\t\t\t});\n\t\t},\n\n\t\taddElements: function() {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar data = me.getDataset().data || [];\n\t\t\tvar metaData = meta.data;\n\t\t\tvar i, ilen;\n\n\t\t\tfor (i=0, ilen=data.length; i<ilen; ++i) {\n\t\t\t\tmetaData[i] = metaData[i] || me.createMetaData(meta, i);\n\t\t\t}\n\n\t\t\tmeta.dataset = meta.dataset || me.createMetaDataset();\n\t\t},\n\n\t\taddElementAndReset: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar element = me.createMetaData(index);\n\t\t\tme.getMeta().data.splice(index, 0, element);\n\t\t\tme.updateElement(element, index, true);\n\t\t},\n\n\t\tbuildOrUpdateElements: function() {\n\t\t\t// Handle the number of data points changing\n\t\t\tvar meta = this.getMeta(),\n\t\t\t\tmd = meta.data,\n\t\t\t\tnumData = this.getDataset().data.length,\n\t\t\t\tnumMetaData = md.length;\n\n\t\t\t// Make sure that we handle number of datapoints changing\n\t\t\tif (numData < numMetaData) {\n\t\t\t\t// Remove excess bars for data points that have been removed\n\t\t\t\tmd.splice(numData, numMetaData - numData);\n\t\t\t} else if (numData > numMetaData) {\n\t\t\t\t// Add new elements\n\t\t\t\tfor (var index = numMetaData; index < numData; ++index) {\n\t\t\t\t\tthis.addElementAndReset(index);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tupdate: noop,\n\n\t\tdraw: function(ease) {\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\thelpers.each(this.getMeta().data, function(element) {\n\t\t\t\telement.transition(easingDecimal).draw();\n\t\t\t});\n\t\t},\n\n\t\tremoveHoverStyle: function(element, elementOpts) {\n\t\t\tvar dataset = this.chart.data.datasets[element._datasetIndex],\n\t\t\t\tindex = element._index,\n\t\t\t\tcustom = element.custom || {},\n\t\t\t\tvalueOrDefault = helpers.getValueAtIndexOrDefault,\n\t\t\t\tmodel = element._model;\n\n\t\t\tmodel.backgroundColor = custom.backgroundColor ? custom.backgroundColor : valueOrDefault(dataset.backgroundColor, index, elementOpts.backgroundColor);\n\t\t\tmodel.borderColor = custom.borderColor ? custom.borderColor : valueOrDefault(dataset.borderColor, index, elementOpts.borderColor);\n\t\t\tmodel.borderWidth = custom.borderWidth ? custom.borderWidth : valueOrDefault(dataset.borderWidth, index, elementOpts.borderWidth);\n\t\t},\n\n\t\tsetHoverStyle: function(element) {\n\t\t\tvar dataset = this.chart.data.datasets[element._datasetIndex],\n\t\t\t\tindex = element._index,\n\t\t\t\tcustom = element.custom || {},\n\t\t\t\tvalueOrDefault = helpers.getValueAtIndexOrDefault,\n\t\t\t\tgetHoverColor = helpers.getHoverColor,\n\t\t\t\tmodel = element._model;\n\n\t\t\tmodel.backgroundColor = custom.hoverBackgroundColor ? custom.hoverBackgroundColor : valueOrDefault(dataset.hoverBackgroundColor, index, getHoverColor(model.backgroundColor));\n\t\t\tmodel.borderColor = custom.hoverBorderColor ? custom.hoverBorderColor : valueOrDefault(dataset.hoverBorderColor, index, getHoverColor(model.borderColor));\n\t\t\tmodel.borderWidth = custom.hoverBorderWidth ? custom.hoverBorderWidth : valueOrDefault(dataset.hoverBorderWidth, index, model.borderWidth);\n\t\t}\n\n\t});\n\n\tChart.DatasetController.extend = helpers.inherits;\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\t// The layout service is very self explanatory.  It's responsible for the layout within a chart.\n\t// Scales, Legends and Plugins all rely on the layout service and can easily register to be placed anywhere they need\n\t// It is this service's responsibility of carrying out that layout.\n\tChart.layoutService = {\n\t\tdefaults: {},\n\n\t\t// Register a box to a chartInstance. A box is simply a reference to an object that requires layout. eg. Scales, Legend, Plugins.\n\t\taddBox: function(chartInstance, box) {\n\t\t\tif (!chartInstance.boxes) {\n\t\t\t\tchartInstance.boxes = [];\n\t\t\t}\n\t\t\tchartInstance.boxes.push(box);\n\t\t},\n\n\t\tremoveBox: function(chartInstance, box) {\n\t\t\tif (!chartInstance.boxes) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tchartInstance.boxes.splice(chartInstance.boxes.indexOf(box), 1);\n\t\t},\n\n\t\t// The most important function\n\t\tupdate: function(chartInstance, width, height) {\n\n\t\t\tif (!chartInstance) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar xPadding = 0;\n\t\t\tvar yPadding = 0;\n\n\t\t\tvar leftBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'left';\n\t\t\t});\n\t\t\tvar rightBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'right';\n\t\t\t});\n\t\t\tvar topBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'top';\n\t\t\t});\n\t\t\tvar bottomBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'bottom';\n\t\t\t});\n\n\t\t\t// Boxes that overlay the chartarea such as the radialLinear scale\n\t\t\tvar chartAreaBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'chartArea';\n\t\t\t});\n\n\t\t\t// Ensure that full width boxes are at the very top / bottom\n\t\t\ttopBoxes.sort(function(a, b) {\n\t\t\t\treturn (b.options.fullWidth ? 1 : 0) - (a.options.fullWidth ? 1 : 0);\n\t\t\t});\n\t\t\tbottomBoxes.sort(function(a, b) {\n\t\t\t\treturn (a.options.fullWidth ? 1 : 0) - (b.options.fullWidth ? 1 : 0);\n\t\t\t});\n\n\t\t\t// Essentially we now have any number of boxes on each of the 4 sides.\n\t\t\t// Our canvas looks like the following.\n\t\t\t// The areas L1 and L2 are the left axes. R1 is the right axis, T1 is the top axis and\n\t\t\t// B1 is the bottom axis\n\t\t\t// There are also 4 quadrant-like locations (left to right instead of clockwise) reserved for chart overlays\n\t\t\t// These locations are single-box locations only, when trying to register a chartArea location that is already taken,\n\t\t\t// an error will be thrown.\n\t\t\t//\n\t\t\t// |----------------------------------------------------|\n\t\t\t// |                  T1 (Full Width)                   |\n\t\t\t// |----------------------------------------------------|\n\t\t\t// |    |    |                 T2                  |    |\n\t\t\t// |    |----|-------------------------------------|----|\n\t\t\t// |    |    | C1 |                           | C2 |    |\n\t\t\t// |    |    |----|                           |----|    |\n\t\t\t// |    |    |                                     |    |\n\t\t\t// | L1 | L2 |           ChartArea (C0)            | R1 |\n\t\t\t// |    |    |                                     |    |\n\t\t\t// |    |    |----|                           |----|    |\n\t\t\t// |    |    | C3 |                           | C4 |    |\n\t\t\t// |    |----|-------------------------------------|----|\n\t\t\t// |    |    |                 B1                  |    |\n\t\t\t// |----------------------------------------------------|\n\t\t\t// |                  B2 (Full Width)                   |\n\t\t\t// |----------------------------------------------------|\n\t\t\t//\n\t\t\t// What we do to find the best sizing, we do the following\n\t\t\t// 1. Determine the minimum size of the chart area.\n\t\t\t// 2. Split the remaining width equally between each vertical axis\n\t\t\t// 3. Split the remaining height equally between each horizontal axis\n\t\t\t// 4. Give each layout the maximum size it can be. The layout will return it's minimum size\n\t\t\t// 5. Adjust the sizes of each axis based on it's minimum reported size.\n\t\t\t// 6. Refit each axis\n\t\t\t// 7. Position each axis in the final location\n\t\t\t// 8. Tell the chart the final location of the chart area\n\t\t\t// 9. Tell any axes that overlay the chart area the positions of the chart area\n\n\t\t\t// Step 1\n\t\t\tvar chartWidth = width - (2 * xPadding);\n\t\t\tvar chartHeight = height - (2 * yPadding);\n\t\t\tvar chartAreaWidth = chartWidth / 2; // min 50%\n\t\t\tvar chartAreaHeight = chartHeight / 2; // min 50%\n\n\t\t\t// Step 2\n\t\t\tvar verticalBoxWidth = (width - chartAreaWidth) / (leftBoxes.length + rightBoxes.length);\n\n\t\t\t// Step 3\n\t\t\tvar horizontalBoxHeight = (height - chartAreaHeight) / (topBoxes.length + bottomBoxes.length);\n\n\t\t\t// Step 4\n\t\t\tvar maxChartAreaWidth = chartWidth;\n\t\t\tvar maxChartAreaHeight = chartHeight;\n\t\t\tvar minBoxSizes = [];\n\n\t\t\tfunction getMinimumBoxSize(box) {\n\t\t\t\tvar minSize;\n\t\t\t\tvar isHorizontal = box.isHorizontal();\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tminSize = box.update(box.options.fullWidth ? chartWidth : maxChartAreaWidth, horizontalBoxHeight);\n\t\t\t\t\tmaxChartAreaHeight -= minSize.height;\n\t\t\t\t} else {\n\t\t\t\t\tminSize = box.update(verticalBoxWidth, chartAreaHeight);\n\t\t\t\t\tmaxChartAreaWidth -= minSize.width;\n\t\t\t\t}\n\n\t\t\t\tminBoxSizes.push({\n\t\t\t\t\thorizontal: isHorizontal,\n\t\t\t\t\tminSize: minSize,\n\t\t\t\t\tbox: box\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thelpers.each(leftBoxes.concat(rightBoxes, topBoxes, bottomBoxes), getMinimumBoxSize);\n\n\t\t\t// At this point, maxChartAreaHeight and maxChartAreaWidth are the size the chart area could\n\t\t\t// be if the axes are drawn at their minimum sizes.\n\n\t\t\t// Steps 5 & 6\n\t\t\tvar totalLeftBoxesWidth = xPadding;\n\t\t\tvar totalRightBoxesWidth = xPadding;\n\t\t\tvar totalTopBoxesHeight = yPadding;\n\t\t\tvar totalBottomBoxesHeight = yPadding;\n\n\t\t\t// Function to fit a box\n\t\t\tfunction fitBox(box) {\n\t\t\t\tvar minBoxSize = helpers.findNextWhere(minBoxSizes, function(minBox) {\n\t\t\t\t\treturn minBox.box === box;\n\t\t\t\t});\n\n\t\t\t\tif (minBoxSize) {\n\t\t\t\t\tif (box.isHorizontal()) {\n\t\t\t\t\t\tvar scaleMargin = {\n\t\t\t\t\t\t\tleft: totalLeftBoxesWidth,\n\t\t\t\t\t\t\tright: totalRightBoxesWidth,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\tbottom: 0\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Don't use min size here because of label rotation. When the labels are rotated, their rotation highly depends\n\t\t\t\t\t\t// on the margin. Sometimes they need to increase in size slightly\n\t\t\t\t\t\tbox.update(box.options.fullWidth ? chartWidth : maxChartAreaWidth, chartHeight / 2, scaleMargin);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbox.update(minBoxSize.minSize.width, maxChartAreaHeight);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update, and calculate the left and right margins for the horizontal boxes\n\t\t\thelpers.each(leftBoxes.concat(rightBoxes), fitBox);\n\n\t\t\thelpers.each(leftBoxes, function(box) {\n\t\t\t\ttotalLeftBoxesWidth += box.width;\n\t\t\t});\n\n\t\t\thelpers.each(rightBoxes, function(box) {\n\t\t\t\ttotalRightBoxesWidth += box.width;\n\t\t\t});\n\n\t\t\t// Set the Left and Right margins for the horizontal boxes\n\t\t\thelpers.each(topBoxes.concat(bottomBoxes), fitBox);\n\n\t\t\t// Figure out how much margin is on the top and bottom of the vertical boxes\n\t\t\thelpers.each(topBoxes, function(box) {\n\t\t\t\ttotalTopBoxesHeight += box.height;\n\t\t\t});\n\n\t\t\thelpers.each(bottomBoxes, function(box) {\n\t\t\t\ttotalBottomBoxesHeight += box.height;\n\t\t\t});\n\n\t\t\tfunction finalFitVerticalBox(box) {\n\t\t\t\tvar minBoxSize = helpers.findNextWhere(minBoxSizes, function(minSize) {\n\t\t\t\t\treturn minSize.box === box;\n\t\t\t\t});\n\n\t\t\t\tvar scaleMargin = {\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\ttop: totalTopBoxesHeight,\n\t\t\t\t\tbottom: totalBottomBoxesHeight\n\t\t\t\t};\n\n\t\t\t\tif (minBoxSize) {\n\t\t\t\t\tbox.update(minBoxSize.minSize.width, maxChartAreaHeight, scaleMargin);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Let the left layout know the final margin\n\t\t\thelpers.each(leftBoxes.concat(rightBoxes), finalFitVerticalBox);\n\n\t\t\t// Recalculate because the size of each layout might have changed slightly due to the margins (label rotation for instance)\n\t\t\ttotalLeftBoxesWidth = xPadding;\n\t\t\ttotalRightBoxesWidth = xPadding;\n\t\t\ttotalTopBoxesHeight = yPadding;\n\t\t\ttotalBottomBoxesHeight = yPadding;\n\n\t\t\thelpers.each(leftBoxes, function(box) {\n\t\t\t\ttotalLeftBoxesWidth += box.width;\n\t\t\t});\n\n\t\t\thelpers.each(rightBoxes, function(box) {\n\t\t\t\ttotalRightBoxesWidth += box.width;\n\t\t\t});\n\n\t\t\thelpers.each(topBoxes, function(box) {\n\t\t\t\ttotalTopBoxesHeight += box.height;\n\t\t\t});\n\t\t\thelpers.each(bottomBoxes, function(box) {\n\t\t\t\ttotalBottomBoxesHeight += box.height;\n\t\t\t});\n\n\t\t\t// Figure out if our chart area changed. This would occur if the dataset layout label rotation\n\t\t\t// changed due to the application of the margins in step 6. Since we can only get bigger, this is safe to do\n\t\t\t// without calling `fit` again\n\t\t\tvar newMaxChartAreaHeight = height - totalTopBoxesHeight - totalBottomBoxesHeight;\n\t\t\tvar newMaxChartAreaWidth = width - totalLeftBoxesWidth - totalRightBoxesWidth;\n\n\t\t\tif (newMaxChartAreaWidth !== maxChartAreaWidth || newMaxChartAreaHeight !== maxChartAreaHeight) {\n\t\t\t\thelpers.each(leftBoxes, function(box) {\n\t\t\t\t\tbox.height = newMaxChartAreaHeight;\n\t\t\t\t});\n\n\t\t\t\thelpers.each(rightBoxes, function(box) {\n\t\t\t\t\tbox.height = newMaxChartAreaHeight;\n\t\t\t\t});\n\n\t\t\t\thelpers.each(topBoxes, function(box) {\n\t\t\t\t\tif (!box.options.fullWidth) {\n\t\t\t\t\t\tbox.width = newMaxChartAreaWidth;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\thelpers.each(bottomBoxes, function(box) {\n\t\t\t\t\tif (!box.options.fullWidth) {\n\t\t\t\t\t\tbox.width = newMaxChartAreaWidth;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmaxChartAreaHeight = newMaxChartAreaHeight;\n\t\t\t\tmaxChartAreaWidth = newMaxChartAreaWidth;\n\t\t\t}\n\n\t\t\t// Step 7 - Position the boxes\n\t\t\tvar left = xPadding;\n\t\t\tvar top = yPadding;\n\n\t\t\tfunction placeBox(box) {\n\t\t\t\tif (box.isHorizontal()) {\n\t\t\t\t\tbox.left = box.options.fullWidth ? xPadding : totalLeftBoxesWidth;\n\t\t\t\t\tbox.right = box.options.fullWidth ? width - xPadding : totalLeftBoxesWidth + maxChartAreaWidth;\n\t\t\t\t\tbox.top = top;\n\t\t\t\t\tbox.bottom = top + box.height;\n\n\t\t\t\t\t// Move to next point\n\t\t\t\t\ttop = box.bottom;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbox.left = left;\n\t\t\t\t\tbox.right = left + box.width;\n\t\t\t\t\tbox.top = totalTopBoxesHeight;\n\t\t\t\t\tbox.bottom = totalTopBoxesHeight + maxChartAreaHeight;\n\n\t\t\t\t\t// Move to next point\n\t\t\t\t\tleft = box.right;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thelpers.each(leftBoxes.concat(topBoxes), placeBox);\n\n\t\t\t// Account for chart width and height\n\t\t\tleft += maxChartAreaWidth;\n\t\t\ttop += maxChartAreaHeight;\n\n\t\t\thelpers.each(rightBoxes, placeBox);\n\t\t\thelpers.each(bottomBoxes, placeBox);\n\n\t\t\t// Step 8\n\t\t\tchartInstance.chartArea = {\n\t\t\t\tleft: totalLeftBoxesWidth,\n\t\t\t\ttop: totalTopBoxesHeight,\n\t\t\t\tright: totalLeftBoxesWidth + maxChartAreaWidth,\n\t\t\t\tbottom: totalTopBoxesHeight + maxChartAreaHeight\n\t\t\t};\n\n\t\t\t// Step 9\n\t\t\thelpers.each(chartAreaBoxes, function(box) {\n\t\t\t\tbox.left = chartInstance.chartArea.left;\n\t\t\t\tbox.top = chartInstance.chartArea.top;\n\t\t\t\tbox.right = chartInstance.chartArea.right;\n\t\t\t\tbox.bottom = chartInstance.chartArea.bottom;\n\n\t\t\t\tbox.update(maxChartAreaWidth, maxChartAreaHeight);\n\t\t\t});\n\t\t}\n\t};\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.scaleService = {\n\t\t// Scale registration object. Extensions can register new scale types (such as log or DB scales) and then\n\t\t// use the new chart options to grab the correct scale\n\t\tconstructors: {},\n\t\t// Use a registration function so that we can move to an ES6 map when we no longer need to support\n\t\t// old browsers\n\n\t\t// Scale config defaults\n\t\tdefaults: {},\n\t\tregisterScaleType: function(type, scaleConstructor, defaults) {\n\t\t\tthis.constructors[type] = scaleConstructor;\n\t\t\tthis.defaults[type] = helpers.clone(defaults);\n\t\t},\n\t\tgetScaleConstructor: function(type) {\n\t\t\treturn this.constructors.hasOwnProperty(type) ? this.constructors[type] : undefined;\n\t\t},\n\t\tgetScaleDefaults: function(type) {\n\t\t\t// Return the scale defaults merged with the global settings so that we always use the latest ones\n\t\t\treturn this.defaults.hasOwnProperty(type) ? helpers.scaleMerge(Chart.defaults.scale, this.defaults[type]) : {};\n\t\t},\n\t\tupdateScaleDefaults: function(type, additions) {\n\t\t\tvar defaults = this.defaults;\n\t\t\tif (defaults.hasOwnProperty(type)) {\n\t\t\t\tdefaults[type] = helpers.extend(defaults[type], additions);\n\t\t\t}\n\t\t},\n\t\taddScalesToLayout: function(chartInstance) {\n\t\t\t// Adds each scale to the chart.boxes array to be sized accordingly\n\t\t\thelpers.each(chartInstance.scales, function(scale) {\n\t\t\t\tChart.layoutService.addBox(chartInstance, scale);\n\t\t\t});\n\t\t}\n\t};\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar noop = Chart.helpers.noop;\n\n\t/**\n\t * The plugin service singleton\n\t * @namespace Chart.plugins\n\t * @since 2.1.0\n\t */\n\tChart.plugins = {\n\t\t_plugins: [],\n\n\t\t/**\n\t\t * Registers the given plugin(s) if not already registered.\n\t\t * @param {Array|Object} plugins plugin instance(s).\n\t\t */\n\t\tregister: function(plugins) {\n\t\t\tvar p = this._plugins;\n\t\t\t([]).concat(plugins).forEach(function(plugin) {\n\t\t\t\tif (p.indexOf(plugin) === -1) {\n\t\t\t\t\tp.push(plugin);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Unregisters the given plugin(s) only if registered.\n\t\t * @param {Array|Object} plugins plugin instance(s).\n\t\t */\n\t\tunregister: function(plugins) {\n\t\t\tvar p = this._plugins;\n\t\t\t([]).concat(plugins).forEach(function(plugin) {\n\t\t\t\tvar idx = p.indexOf(plugin);\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tp.splice(idx, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Remove all registered p^lugins.\n\t\t * @since 2.1.5\n\t\t */\n\t\tclear: function() {\n\t\t\tthis._plugins = [];\n\t\t},\n\n\t\t/**\n\t\t * Returns the number of registered plugins?\n\t\t * @returns {Number}\n\t\t * @since 2.1.5\n\t\t */\n\t\tcount: function() {\n\t\t\treturn this._plugins.length;\n\t\t},\n\n\t\t/**\n\t\t * Returns all registered plugin intances.\n\t\t * @returns {Array} array of plugin objects.\n\t\t * @since 2.1.5\n\t\t */\n\t\tgetAll: function() {\n\t\t\treturn this._plugins;\n\t\t},\n\n\t\t/**\n\t\t * Calls registered plugins on the specified extension, with the given args. This\n\t\t * method immediately returns as soon as a plugin explicitly returns false. The\n\t\t * returned value can be used, for instance, to interrupt the current action.\n\t\t * @param {String} extension the name of the plugin method to call (e.g. 'beforeUpdate').\n\t\t * @param {Array} [args] extra arguments to apply to the extension call.\n\t\t * @returns {Boolean} false if any of the plugins return false, else returns true.\n\t\t */\n\t\tnotify: function(extension, args) {\n\t\t\tvar plugins = this._plugins;\n\t\t\tvar ilen = plugins.length;\n\t\t\tvar i, plugin;\n\n\t\t\tfor (i=0; i<ilen; ++i) {\n\t\t\t\tplugin = plugins[i];\n\t\t\t\tif (typeof plugin[extension] === 'function') {\n\t\t\t\t\tif (plugin[extension].apply(plugin, args || []) === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t};\n\n\t/**\n\t * Plugin extension methods.\n\t * @interface Chart.PluginBase\n\t * @since 2.1.0\n\t */\n\tChart.PluginBase = Chart.Element.extend({\n\t\t// Called at start of chart init\n\t\tbeforeInit: noop,\n\n\t\t// Called at end of chart init\n\t\tafterInit: noop,\n\n\t\t// Called at start of update\n\t\tbeforeUpdate: noop,\n\n\t\t// Called at end of update\n\t\tafterUpdate: noop,\n\n\t\t// Called at start of draw\n\t\tbeforeDraw: noop,\n\n\t\t// Called at end of draw\n\t\tafterDraw: noop,\n\n\t\t// Called during destroy\n\t\tdestroy: noop\n\t});\n\n\t/**\n\t * Provided for backward compatibility, use Chart.plugins instead\n\t * @namespace Chart.pluginService\n\t * @deprecated since version 2.1.5\n\t * @todo remove me at version 3\n\t */\n\tChart.pluginService = Chart.plugins;\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.scale = {\n\t\tdisplay: true,\n\t\tposition: 'left',\n\n\t\t// grid line settings\n\t\tgridLines: {\n\t\t\tdisplay: true,\n\t\t\tcolor: 'rgba(0, 0, 0, 0.1)',\n\t\t\tlineWidth: 1,\n\t\t\tdrawBorder: true,\n\t\t\tdrawOnChartArea: true,\n\t\t\tdrawTicks: true,\n\t\t\ttickMarkLength: 10,\n\t\t\tzeroLineWidth: 1,\n\t\t\tzeroLineColor: 'rgba(0,0,0,0.25)',\n\t\t\toffsetGridLines: false,\n\t\t\tborderDash: [],\n\t\t\tborderDashOffset: 0.0\n\t\t},\n\n\t\t// scale label\n\t\tscaleLabel: {\n\t\t\t// actual label\n\t\t\tlabelString: '',\n\n\t\t\t// display property\n\t\t\tdisplay: false\n\t\t},\n\n\t\t// label settings\n\t\tticks: {\n\t\t\tbeginAtZero: false,\n\t\t\tminRotation: 0,\n\t\t\tmaxRotation: 50,\n\t\t\tmirror: false,\n\t\t\tpadding: 10,\n\t\t\treverse: false,\n\t\t\tdisplay: true,\n\t\t\tautoSkip: true,\n\t\t\tautoSkipPadding: 0,\n\t\t\tlabelOffset: 0,\n\t\t\t// We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\n\t\t\tcallback: function(value) {\n\t\t\t\treturn helpers.isArray(value) ? value : '' + value;\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.Scale = Chart.Element.extend({\n\n\t\t// These methods are ordered by lifecyle. Utilities then follow.\n\t\t// Any function defined here is inherited by all scale types.\n\t\t// Any function can be extended by the scale type\n\n\t\tbeforeUpdate: function() {\n\t\t\thelpers.callCallback(this.options.beforeUpdate, [this]);\n\t\t},\n\t\tupdate: function(maxWidth, maxHeight, margins) {\n\t\t\tvar me = this;\n\n\t\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\t\tme.beforeUpdate();\n\n\t\t\t// Absorb the master measurements\n\t\t\tme.maxWidth = maxWidth;\n\t\t\tme.maxHeight = maxHeight;\n\t\t\tme.margins = helpers.extend({\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tbottom: 0\n\t\t\t}, margins);\n\n\t\t\t// Dimensions\n\t\t\tme.beforeSetDimensions();\n\t\t\tme.setDimensions();\n\t\t\tme.afterSetDimensions();\n\n\t\t\t// Data min/max\n\t\t\tme.beforeDataLimits();\n\t\t\tme.determineDataLimits();\n\t\t\tme.afterDataLimits();\n\n\t\t\t// Ticks\n\t\t\tme.beforeBuildTicks();\n\t\t\tme.buildTicks();\n\t\t\tme.afterBuildTicks();\n\n\t\t\tme.beforeTickToLabelConversion();\n\t\t\tme.convertTicksToLabels();\n\t\t\tme.afterTickToLabelConversion();\n\n\t\t\t// Tick Rotation\n\t\t\tme.beforeCalculateTickRotation();\n\t\t\tme.calculateTickRotation();\n\t\t\tme.afterCalculateTickRotation();\n\t\t\t// Fit\n\t\t\tme.beforeFit();\n\t\t\tme.fit();\n\t\t\tme.afterFit();\n\t\t\t//\n\t\t\tme.afterUpdate();\n\n\t\t\treturn me.minSize;\n\n\t\t},\n\t\tafterUpdate: function() {\n\t\t\thelpers.callCallback(this.options.afterUpdate, [this]);\n\t\t},\n\n\t\t//\n\n\t\tbeforeSetDimensions: function() {\n\t\t\thelpers.callCallback(this.options.beforeSetDimensions, [this]);\n\t\t},\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.width = me.maxWidth;\n\t\t\t\tme.left = 0;\n\t\t\t\tme.right = me.width;\n\t\t\t} else {\n\t\t\t\tme.height = me.maxHeight;\n\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.top = 0;\n\t\t\t\tme.bottom = me.height;\n\t\t\t}\n\n\t\t\t// Reset padding\n\t\t\tme.paddingLeft = 0;\n\t\t\tme.paddingTop = 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingBottom = 0;\n\t\t},\n\t\tafterSetDimensions: function() {\n\t\t\thelpers.callCallback(this.options.afterSetDimensions, [this]);\n\t\t},\n\n\t\t// Data limits\n\t\tbeforeDataLimits: function() {\n\t\t\thelpers.callCallback(this.options.beforeDataLimits, [this]);\n\t\t},\n\t\tdetermineDataLimits: helpers.noop,\n\t\tafterDataLimits: function() {\n\t\t\thelpers.callCallback(this.options.afterDataLimits, [this]);\n\t\t},\n\n\t\t//\n\t\tbeforeBuildTicks: function() {\n\t\t\thelpers.callCallback(this.options.beforeBuildTicks, [this]);\n\t\t},\n\t\tbuildTicks: helpers.noop,\n\t\tafterBuildTicks: function() {\n\t\t\thelpers.callCallback(this.options.afterBuildTicks, [this]);\n\t\t},\n\n\t\tbeforeTickToLabelConversion: function() {\n\t\t\thelpers.callCallback(this.options.beforeTickToLabelConversion, [this]);\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\t// Convert ticks to strings\n\t\t\tme.ticks = me.ticks.map(function(numericalTick, index, ticks) {\n\t\t\t\tif (me.options.ticks.userCallback) {\n\t\t\t\t\treturn me.options.ticks.userCallback(numericalTick, index, ticks);\n\t\t\t\t}\n\t\t\t\treturn me.options.ticks.callback(numericalTick, index, ticks);\n\t\t\t},\n\t\t\tme);\n\t\t},\n\t\tafterTickToLabelConversion: function() {\n\t\t\thelpers.callCallback(this.options.afterTickToLabelConversion, [this]);\n\t\t},\n\n\t\t//\n\n\t\tbeforeCalculateTickRotation: function() {\n\t\t\thelpers.callCallback(this.options.beforeCalculateTickRotation, [this]);\n\t\t},\n\t\tcalculateTickRotation: function() {\n\t\t\tvar me = this;\n\t\t\tvar context = me.ctx;\n\t\t\tvar globalDefaults = Chart.defaults.global;\n\t\t\tvar optionTicks = me.options.ticks;\n\n\t\t\t// Get the width of each grid by calculating the difference\n\t\t\t// between x offsets between 0 and 1.\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(optionTicks.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(optionTicks.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(optionTicks.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\t\t\tcontext.font = tickLabelFont;\n\n\t\t\tvar firstWidth = context.measureText(me.ticks[0]).width;\n\t\t\tvar lastWidth = context.measureText(me.ticks[me.ticks.length - 1]).width;\n\t\t\tvar firstRotated;\n\n\t\t\tme.labelRotation = optionTicks.minRotation || 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingLeft = 0;\n\n\t\t\tif (me.options.display) {\n\t\t\t\tif (me.isHorizontal()) {\n\t\t\t\t\tme.paddingRight = lastWidth / 2 + 3;\n\t\t\t\t\tme.paddingLeft = firstWidth / 2 + 3;\n\n\t\t\t\t\tif (!me.longestTextCache) {\n\t\t\t\t\t\tme.longestTextCache = {};\n\t\t\t\t\t}\n\t\t\t\t\tvar originalLabelWidth = helpers.longestText(context, tickLabelFont, me.ticks, me.longestTextCache);\n\t\t\t\t\tvar labelWidth = originalLabelWidth;\n\t\t\t\t\tvar cosRotation;\n\t\t\t\t\tvar sinRotation;\n\n\t\t\t\t\t// Allow 3 pixels x2 padding either side for label readability\n\t\t\t\t\t// only the index matters for a dataset scale, but we want a consistent interface between scales\n\t\t\t\t\tvar tickWidth = me.getPixelForTick(1) - me.getPixelForTick(0) - 6;\n\n\t\t\t\t\t// Max label rotation can be set or default to 90 - also act as a loop counter\n\t\t\t\t\twhile (labelWidth > tickWidth && me.labelRotation < optionTicks.maxRotation) {\n\t\t\t\t\t\tcosRotation = Math.cos(helpers.toRadians(me.labelRotation));\n\t\t\t\t\t\tsinRotation = Math.sin(helpers.toRadians(me.labelRotation));\n\n\t\t\t\t\t\tfirstRotated = cosRotation * firstWidth;\n\n\t\t\t\t\t\t// We're right aligning the text now.\n\t\t\t\t\t\tif (firstRotated + tickFontSize / 2 > me.yLabelWidth) {\n\t\t\t\t\t\t\tme.paddingLeft = firstRotated + tickFontSize / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tme.paddingRight = tickFontSize / 2;\n\n\t\t\t\t\t\tif (sinRotation * originalLabelWidth > me.maxHeight) {\n\t\t\t\t\t\t\t// go back one step\n\t\t\t\t\t\t\tme.labelRotation--;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tme.labelRotation++;\n\t\t\t\t\t\tlabelWidth = cosRotation * originalLabelWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (me.margins) {\n\t\t\t\tme.paddingLeft = Math.max(me.paddingLeft - me.margins.left, 0);\n\t\t\t\tme.paddingRight = Math.max(me.paddingRight - me.margins.right, 0);\n\t\t\t}\n\t\t},\n\t\tafterCalculateTickRotation: function() {\n\t\t\thelpers.callCallback(this.options.afterCalculateTickRotation, [this]);\n\t\t},\n\n\t\t//\n\n\t\tbeforeFit: function() {\n\t\t\thelpers.callCallback(this.options.beforeFit, [this]);\n\t\t},\n\t\tfit: function() {\n\t\t\tvar me = this;\n\t\t\t// Reset\n\t\t\tvar minSize = me.minSize = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t};\n\n\t\t\tvar opts = me.options;\n\t\t\tvar globalDefaults = Chart.defaults.global;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar scaleLabelOpts = opts.scaleLabel;\n\t\t\tvar gridLineOpts = opts.gridLines;\n\t\t\tvar display = opts.display;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(tickOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(tickOpts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(tickOpts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\n\t\t\tvar scaleLabelFontSize = helpers.getValueOrDefault(scaleLabelOpts.fontSize, globalDefaults.defaultFontSize);\n\n\t\t\tvar tickMarkLength = opts.gridLines.tickMarkLength;\n\n\t\t\t// Width\n\t\t\tif (isHorizontal) {\n\t\t\t\t// subtract the margins to line up with the chartArea if we are a full width scale\n\t\t\t\tminSize.width = me.isFullWidth() ? me.maxWidth - me.margins.left - me.margins.right : me.maxWidth;\n\t\t\t} else {\n\t\t\t\tminSize.width = display && gridLineOpts.drawTicks ? tickMarkLength : 0;\n\t\t\t}\n\n\t\t\t// height\n\t\t\tif (isHorizontal) {\n\t\t\t\tminSize.height = display && gridLineOpts.drawTicks ? tickMarkLength : 0;\n\t\t\t} else {\n\t\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t\t}\n\n\t\t\t// Are we showing a title for the scale?\n\t\t\tif (scaleLabelOpts.display && display) {\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tminSize.height += (scaleLabelFontSize * 1.5);\n\t\t\t\t} else {\n\t\t\t\t\tminSize.width += (scaleLabelFontSize * 1.5);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tickOpts.display && display) {\n\t\t\t\t// Don't bother fitting the ticks if we are not showing them\n\t\t\t\tif (!me.longestTextCache) {\n\t\t\t\t\tme.longestTextCache = {};\n\t\t\t\t}\n\n\t\t\t\tvar largestTextWidth = helpers.longestText(me.ctx, tickLabelFont, me.ticks, me.longestTextCache);\n\t\t\t\tvar tallestLabelHeightInLines = helpers.numberOfLabelLines(me.ticks);\n\t\t\t\tvar lineSpace = tickFontSize * 0.5;\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\t// A horizontal axis is more constrained by the height.\n\t\t\t\t\tme.longestLabelWidth = largestTextWidth;\n\n\t\t\t\t\t// TODO - improve this calculation\n\t\t\t\t\tvar labelHeight = (Math.sin(helpers.toRadians(me.labelRotation)) * me.longestLabelWidth) + (tickFontSize * tallestLabelHeightInLines) + (lineSpace * tallestLabelHeightInLines);\n\n\t\t\t\t\tminSize.height = Math.min(me.maxHeight, minSize.height + labelHeight);\n\t\t\t\t\tme.ctx.font = tickLabelFont;\n\n\t\t\t\t\tvar firstLabelWidth = me.ctx.measureText(me.ticks[0]).width;\n\t\t\t\t\tvar lastLabelWidth = me.ctx.measureText(me.ticks[me.ticks.length - 1]).width;\n\n\t\t\t\t\t// Ensure that our ticks are always inside the canvas. When rotated, ticks are right aligned which means that the right padding is dominated\n\t\t\t\t\t// by the font height\n\t\t\t\t\tvar cosRotation = Math.cos(helpers.toRadians(me.labelRotation));\n\t\t\t\t\tvar sinRotation = Math.sin(helpers.toRadians(me.labelRotation));\n\t\t\t\t\tme.paddingLeft = me.labelRotation !== 0 ? (cosRotation * firstLabelWidth) + 3 : firstLabelWidth / 2 + 3; // add 3 px to move away from canvas edges\n\t\t\t\t\tme.paddingRight = me.labelRotation !== 0 ? (sinRotation * (tickFontSize / 2)) + 3 : lastLabelWidth / 2 + 3; // when rotated\n\t\t\t\t} else {\n\t\t\t\t\t// A vertical axis is more constrained by the width. Labels are the dominant factor here, so get that length first\n\t\t\t\t\tvar maxLabelWidth = me.maxWidth - minSize.width;\n\n\t\t\t\t\t// Account for padding\n\t\t\t\t\tvar mirror = tickOpts.mirror;\n\t\t\t\t\tif (!mirror) {\n\t\t\t\t\t\tlargestTextWidth += me.options.ticks.padding;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If mirrored text is on the inside so don't expand\n\t\t\t\t\t\tlargestTextWidth = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (largestTextWidth < maxLabelWidth) {\n\t\t\t\t\t\t// We don't need all the room\n\t\t\t\t\t\tminSize.width += largestTextWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Expand to max size\n\t\t\t\t\t\tminSize.width = me.maxWidth;\n\t\t\t\t\t}\n\n\t\t\t\t\tme.paddingTop = tickFontSize / 2;\n\t\t\t\t\tme.paddingBottom = tickFontSize / 2;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (me.margins) {\n\t\t\t\tme.paddingLeft = Math.max(me.paddingLeft - me.margins.left, 0);\n\t\t\t\tme.paddingTop = Math.max(me.paddingTop - me.margins.top, 0);\n\t\t\t\tme.paddingRight = Math.max(me.paddingRight - me.margins.right, 0);\n\t\t\t\tme.paddingBottom = Math.max(me.paddingBottom - me.margins.bottom, 0);\n\t\t\t}\n\n\t\t\tme.width = minSize.width;\n\t\t\tme.height = minSize.height;\n\n\t\t},\n\t\tafterFit: function() {\n\t\t\thelpers.callCallback(this.options.afterFit, [this]);\n\t\t},\n\n\t\t// Shared Methods\n\t\tisHorizontal: function() {\n\t\t\treturn this.options.position === 'top' || this.options.position === 'bottom';\n\t\t},\n\t\tisFullWidth: function() {\n\t\t\treturn (this.options.fullWidth);\n\t\t},\n\n\t\t// Get the correct value. NaN bad inputs, If the value type is object get the x or y based on whether we are horizontal or not\n\t\tgetRightValue: function(rawValue) {\n\t\t\t// Null and undefined values first\n\t\t\tif (rawValue === null || typeof(rawValue) === 'undefined') {\n\t\t\t\treturn NaN;\n\t\t\t}\n\t\t\t// isNaN(object) returns true, so make sure NaN is checking for a number\n\t\t\tif (typeof(rawValue) === 'number' && isNaN(rawValue)) {\n\t\t\t\treturn NaN;\n\t\t\t}\n\t\t\t// If it is in fact an object, dive in one more level\n\t\t\tif (typeof(rawValue) === 'object') {\n\t\t\t\tif ((rawValue instanceof Date) || (rawValue.isValid)) {\n\t\t\t\t\treturn rawValue;\n\t\t\t\t}\n\t\t\t\treturn this.getRightValue(this.isHorizontal() ? rawValue.x : rawValue.y);\n\t\t\t}\n\n\t\t\t// Value is good, return it\n\t\t\treturn rawValue;\n\t\t},\n\n\t\t// Used to get the value to display in the tooltip for the data at the given index\n\t\t// function getLabelForIndex(index, datasetIndex)\n\t\tgetLabelForIndex: helpers.noop,\n\n\t\t// Used to get data value locations.  Value can either be an index or a numerical value\n\t\tgetPixelForValue: helpers.noop,\n\n\t\t// Used to get the data value from a given pixel. This is the inverse of getPixelForValue\n\t\tgetValueForPixel: helpers.noop,\n\n\t\t// Used for tick location, should\n\t\tgetPixelForTick: function(index, includeOffset) {\n\t\t\tvar me = this;\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\tvar tickWidth = innerWidth / Math.max((me.ticks.length - ((me.options.gridLines.offsetGridLines) ? 0 : 1)), 1);\n\t\t\t\tvar pixel = (tickWidth * index) + me.paddingLeft;\n\n\t\t\t\tif (includeOffset) {\n\t\t\t\t\tpixel += tickWidth / 2;\n\t\t\t\t}\n\n\t\t\t\tvar finalVal = me.left + Math.round(pixel);\n\t\t\t\tfinalVal += me.isFullWidth() ? me.margins.left : 0;\n\t\t\t\treturn finalVal;\n\t\t\t}\n\t\t\tvar innerHeight = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\treturn me.top + (index * (innerHeight / (me.ticks.length - 1)));\n\t\t},\n\n\t\t// Utility for getting the pixel location of a percentage of scale\n\t\tgetPixelForDecimal: function(decimal /* , includeOffset*/) {\n\t\t\tvar me = this;\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\tvar valueOffset = (innerWidth * decimal) + me.paddingLeft;\n\n\t\t\t\tvar finalVal = me.left + Math.round(valueOffset);\n\t\t\t\tfinalVal += me.isFullWidth() ? me.margins.left : 0;\n\t\t\t\treturn finalVal;\n\t\t\t}\n\t\t\treturn me.top + (decimal * me.height);\n\t\t},\n\n\t\tgetBasePixel: function() {\n\t\t\tvar me = this;\n\t\t\tvar min = me.min;\n\t\t\tvar max = me.max;\n\n\t\t\treturn me.getPixelForValue(\n\t\t\t\tme.beginAtZero? 0:\n\t\t\t\tmin < 0 && max < 0? max :\n\t\t\t\tmin > 0 && max > 0? min :\n\t\t\t\t0);\n\t\t},\n\n\t\t// Actualy draw the scale on the canvas\n\t\t// @param {rectangle} chartArea : the area of the chart to draw full grid lines on\n\t\tdraw: function(chartArea) {\n\t\t\tvar me = this;\n\t\t\tvar options = me.options;\n\t\t\tif (!options.display) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar context = me.ctx;\n\t\t\tvar globalDefaults = Chart.defaults.global;\n\t\t\tvar optionTicks = options.ticks;\n\t\t\tvar gridLines = options.gridLines;\n\t\t\tvar scaleLabel = options.scaleLabel;\n\n\t\t\tvar isRotated = me.labelRotation !== 0;\n\t\t\tvar skipRatio;\n\t\t\tvar useAutoskipper = optionTicks.autoSkip;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\t// figure out the maximum number of gridlines to show\n\t\t\tvar maxTicks;\n\t\t\tif (optionTicks.maxTicksLimit) {\n\t\t\t\tmaxTicks = optionTicks.maxTicksLimit;\n\t\t\t}\n\n\t\t\tvar tickFontColor = helpers.getValueOrDefault(optionTicks.fontColor, globalDefaults.defaultFontColor);\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(optionTicks.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(optionTicks.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(optionTicks.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\t\t\tvar tl = gridLines.tickMarkLength;\n\t\t\tvar borderDash = helpers.getValueOrDefault(gridLines.borderDash, globalDefaults.borderDash);\n\t\t\tvar borderDashOffset = helpers.getValueOrDefault(gridLines.borderDashOffset, globalDefaults.borderDashOffset);\n\n\t\t\tvar scaleLabelFontColor = helpers.getValueOrDefault(scaleLabel.fontColor, globalDefaults.defaultFontColor);\n\t\t\tvar scaleLabelFontSize = helpers.getValueOrDefault(scaleLabel.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar scaleLabelFontStyle = helpers.getValueOrDefault(scaleLabel.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar scaleLabelFontFamily = helpers.getValueOrDefault(scaleLabel.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar scaleLabelFont = helpers.fontString(scaleLabelFontSize, scaleLabelFontStyle, scaleLabelFontFamily);\n\n\t\t\tvar labelRotationRadians = helpers.toRadians(me.labelRotation);\n\t\t\tvar cosRotation = Math.cos(labelRotationRadians);\n\t\t\tvar longestRotatedLabel = me.longestLabelWidth * cosRotation;\n\n\t\t\t// Make sure we draw text in the correct color and font\n\t\t\tcontext.fillStyle = tickFontColor;\n\n\t\t\tvar itemsToDraw = [];\n\n\t\t\tif (isHorizontal) {\n\t\t\t\tskipRatio = false;\n\n\t\t\t\t// Only calculate the skip ratio with the half width of longestRotateLabel if we got an actual rotation\n\t\t\t\t// See #2584\n\t\t\t\tif (isRotated) {\n\t\t\t\t\tlongestRotatedLabel /= 2;\n\t\t\t\t}\n\n\t\t\t\tif ((longestRotatedLabel + optionTicks.autoSkipPadding) * me.ticks.length > (me.width - (me.paddingLeft + me.paddingRight))) {\n\t\t\t\t\tskipRatio = 1 + Math.floor(((longestRotatedLabel + optionTicks.autoSkipPadding) * me.ticks.length) / (me.width - (me.paddingLeft + me.paddingRight)));\n\t\t\t\t}\n\n\t\t\t\t// if they defined a max number of optionTicks,\n\t\t\t\t// increase skipRatio until that number is met\n\t\t\t\tif (maxTicks && me.ticks.length > maxTicks) {\n\t\t\t\t\twhile (!skipRatio || me.ticks.length / (skipRatio || 1) > maxTicks) {\n\t\t\t\t\t\tif (!skipRatio) {\n\t\t\t\t\t\t\tskipRatio = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tskipRatio += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!useAutoskipper) {\n\t\t\t\t\tskipRatio = false;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tvar xTickStart = options.position === 'right' ? me.left : me.right - tl;\n\t\t\tvar xTickEnd = options.position === 'right' ? me.left + tl : me.right;\n\t\t\tvar yTickStart = options.position === 'bottom' ? me.top : me.bottom - tl;\n\t\t\tvar yTickEnd = options.position === 'bottom' ? me.top + tl : me.bottom;\n\n\t\t\thelpers.each(me.ticks, function(label, index) {\n\t\t\t\t// If the callback returned a null or undefined value, do not draw this line\n\t\t\t\tif (label === undefined || label === null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar isLastTick = me.ticks.length === index + 1;\n\n\t\t\t\t// Since we always show the last tick,we need may need to hide the last shown one before\n\t\t\t\tvar shouldSkip = (skipRatio > 1 && index % skipRatio > 0) || (index % skipRatio === 0 && index + skipRatio >= me.ticks.length);\n\t\t\t\tif (shouldSkip && !isLastTick || (label === undefined || label === null)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar lineWidth, lineColor;\n\t\t\t\tif (index === (typeof me.zeroLineIndex !== 'undefined' ? me.zeroLineIndex : 0)) {\n\t\t\t\t\t// Draw the first index specially\n\t\t\t\t\tlineWidth = gridLines.zeroLineWidth;\n\t\t\t\t\tlineColor = gridLines.zeroLineColor;\n\t\t\t\t} else {\n\t\t\t\t\tlineWidth = helpers.getValueAtIndexOrDefault(gridLines.lineWidth, index);\n\t\t\t\t\tlineColor = helpers.getValueAtIndexOrDefault(gridLines.color, index);\n\t\t\t\t}\n\n\t\t\t\t// Common properties\n\t\t\t\tvar tx1, ty1, tx2, ty2, x1, y1, x2, y2, labelX, labelY;\n\t\t\t\tvar textAlign = 'middle';\n\t\t\t\tvar textBaseline = 'middle';\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tif (!isRotated) {\n\t\t\t\t\t\ttextBaseline = options.position === 'top' ? 'bottom' : 'top';\n\t\t\t\t\t}\n\n\t\t\t\t\ttextAlign = isRotated ? 'right' : 'center';\n\n\t\t\t\t\tvar xLineValue = me.getPixelForTick(index) + helpers.aliasPixel(lineWidth); // xvalues for grid lines\n\t\t\t\t\tlabelX = me.getPixelForTick(index, gridLines.offsetGridLines) + optionTicks.labelOffset; // x values for optionTicks (need to consider offsetLabel option)\n\t\t\t\t\tlabelY = (isRotated) ? me.top + 12 : options.position === 'top' ? me.bottom - tl : me.top + tl;\n\n\t\t\t\t\ttx1 = tx2 = x1 = x2 = xLineValue;\n\t\t\t\t\tty1 = yTickStart;\n\t\t\t\t\tty2 = yTickEnd;\n\t\t\t\t\ty1 = chartArea.top;\n\t\t\t\t\ty2 = chartArea.bottom;\n\t\t\t\t} else {\n\t\t\t\t\tif (options.position === 'left') {\n\t\t\t\t\t\tif (optionTicks.mirror) {\n\t\t\t\t\t\t\tlabelX = me.right + optionTicks.padding;\n\t\t\t\t\t\t\ttextAlign = 'left';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlabelX = me.right - optionTicks.padding;\n\t\t\t\t\t\t\ttextAlign = 'right';\n\t\t\t\t\t\t}\n\t\t\t\t\t// right side\n\t\t\t\t\t} else if (optionTicks.mirror) {\n\t\t\t\t\t\tlabelX = me.left - optionTicks.padding;\n\t\t\t\t\t\ttextAlign = 'right';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlabelX = me.left + optionTicks.padding;\n\t\t\t\t\t\ttextAlign = 'left';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar yLineValue = me.getPixelForTick(index); // xvalues for grid lines\n\t\t\t\t\tyLineValue += helpers.aliasPixel(lineWidth);\n\t\t\t\t\tlabelY = me.getPixelForTick(index, gridLines.offsetGridLines);\n\n\t\t\t\t\ttx1 = xTickStart;\n\t\t\t\t\ttx2 = xTickEnd;\n\t\t\t\t\tx1 = chartArea.left;\n\t\t\t\t\tx2 = chartArea.right;\n\t\t\t\t\tty1 = ty2 = y1 = y2 = yLineValue;\n\t\t\t\t}\n\n\t\t\t\titemsToDraw.push({\n\t\t\t\t\ttx1: tx1,\n\t\t\t\t\tty1: ty1,\n\t\t\t\t\ttx2: tx2,\n\t\t\t\t\tty2: ty2,\n\t\t\t\t\tx1: x1,\n\t\t\t\t\ty1: y1,\n\t\t\t\t\tx2: x2,\n\t\t\t\t\ty2: y2,\n\t\t\t\t\tlabelX: labelX,\n\t\t\t\t\tlabelY: labelY,\n\t\t\t\t\tglWidth: lineWidth,\n\t\t\t\t\tglColor: lineColor,\n\t\t\t\t\tglBorderDash: borderDash,\n\t\t\t\t\tglBorderDashOffset: borderDashOffset,\n\t\t\t\t\trotation: -1 * labelRotationRadians,\n\t\t\t\t\tlabel: label,\n\t\t\t\t\ttextBaseline: textBaseline,\n\t\t\t\t\ttextAlign: textAlign\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Draw all of the tick labels, tick marks, and grid lines at the correct places\n\t\t\thelpers.each(itemsToDraw, function(itemToDraw) {\n\t\t\t\tif (gridLines.display) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.lineWidth = itemToDraw.glWidth;\n\t\t\t\t\tcontext.strokeStyle = itemToDraw.glColor;\n\t\t\t\t\tif (context.setLineDash) {\n\t\t\t\t\t\tcontext.setLineDash(itemToDraw.glBorderDash);\n\t\t\t\t\t\tcontext.lineDashOffset = itemToDraw.glBorderDashOffset;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext.beginPath();\n\n\t\t\t\t\tif (gridLines.drawTicks) {\n\t\t\t\t\t\tcontext.moveTo(itemToDraw.tx1, itemToDraw.ty1);\n\t\t\t\t\t\tcontext.lineTo(itemToDraw.tx2, itemToDraw.ty2);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (gridLines.drawOnChartArea) {\n\t\t\t\t\t\tcontext.moveTo(itemToDraw.x1, itemToDraw.y1);\n\t\t\t\t\t\tcontext.lineTo(itemToDraw.x2, itemToDraw.y2);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext.stroke();\n\t\t\t\t\tcontext.restore();\n\t\t\t\t}\n\n\t\t\t\tif (optionTicks.display) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.translate(itemToDraw.labelX, itemToDraw.labelY);\n\t\t\t\t\tcontext.rotate(itemToDraw.rotation);\n\t\t\t\t\tcontext.font = tickLabelFont;\n\t\t\t\t\tcontext.textBaseline = itemToDraw.textBaseline;\n\t\t\t\t\tcontext.textAlign = itemToDraw.textAlign;\n\n\t\t\t\t\tvar label = itemToDraw.label;\n\t\t\t\t\tif (helpers.isArray(label)) {\n\t\t\t\t\t\tfor (var i = 0, y = -(label.length - 1)*tickFontSize*0.75; i < label.length; ++i) {\n\t\t\t\t\t\t\t// We just make sure the multiline element is a string here..\n\t\t\t\t\t\t\tcontext.fillText('' + label[i], 0, y);\n\t\t\t\t\t\t\t// apply same lineSpacing as calculated @ L#320\n\t\t\t\t\t\t\ty += (tickFontSize * 1.5);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.fillText(label, 0, 0);\n\t\t\t\t\t}\n\t\t\t\t\tcontext.restore();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (scaleLabel.display) {\n\t\t\t\t// Draw the scale label\n\t\t\t\tvar scaleLabelX;\n\t\t\t\tvar scaleLabelY;\n\t\t\t\tvar rotation = 0;\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tscaleLabelX = me.left + ((me.right - me.left) / 2); // midpoint of the width\n\t\t\t\t\tscaleLabelY = options.position === 'bottom' ? me.bottom - (scaleLabelFontSize / 2) : me.top + (scaleLabelFontSize / 2);\n\t\t\t\t} else {\n\t\t\t\t\tvar isLeft = options.position === 'left';\n\t\t\t\t\tscaleLabelX = isLeft ? me.left + (scaleLabelFontSize / 2) : me.right - (scaleLabelFontSize / 2);\n\t\t\t\t\tscaleLabelY = me.top + ((me.bottom - me.top) / 2);\n\t\t\t\t\trotation = isLeft ? -0.5 * Math.PI : 0.5 * Math.PI;\n\t\t\t\t}\n\n\t\t\t\tcontext.save();\n\t\t\t\tcontext.translate(scaleLabelX, scaleLabelY);\n\t\t\t\tcontext.rotate(rotation);\n\t\t\t\tcontext.textAlign = 'center';\n\t\t\t\tcontext.textBaseline = 'middle';\n\t\t\t\tcontext.fillStyle = scaleLabelFontColor; // render in correct colour\n\t\t\t\tcontext.font = scaleLabelFont;\n\t\t\t\tcontext.fillText(scaleLabel.labelString, 0, 0);\n\t\t\t\tcontext.restore();\n\t\t\t}\n\n\t\t\tif (gridLines.drawBorder) {\n\t\t\t\t// Draw the line at the edge of the axis\n\t\t\t\tcontext.lineWidth = helpers.getValueAtIndexOrDefault(gridLines.lineWidth, 0);\n\t\t\t\tcontext.strokeStyle = helpers.getValueAtIndexOrDefault(gridLines.color, 0);\n\t\t\t\tvar x1 = me.left,\n\t\t\t\t\tx2 = me.right,\n\t\t\t\t\ty1 = me.top,\n\t\t\t\t\ty2 = me.bottom;\n\n\t\t\t\tvar aliasPixel = helpers.aliasPixel(context.lineWidth);\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\ty1 = y2 = options.position === 'top' ? me.bottom : me.top;\n\t\t\t\t\ty1 += aliasPixel;\n\t\t\t\t\ty2 += aliasPixel;\n\t\t\t\t} else {\n\t\t\t\t\tx1 = x2 = options.position === 'left' ? me.right : me.left;\n\t\t\t\t\tx1 += aliasPixel;\n\t\t\t\t\tx2 += aliasPixel;\n\t\t\t\t}\n\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(x1, y1);\n\t\t\t\tcontext.lineTo(x2, y2);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.global.title = {\n\t\tdisplay: false,\n\t\tposition: 'top',\n\t\tfullWidth: true, // marks that this box should take the full width of the canvas (pushing down other boxes)\n\n\t\tfontStyle: 'bold',\n\t\tpadding: 10,\n\n\t\t// actual title\n\t\ttext: ''\n\t};\n\n\tvar noop = helpers.noop;\n\tChart.Title = Chart.Element.extend({\n\n\t\tinitialize: function(config) {\n\t\t\tvar me = this;\n\t\t\thelpers.extend(me, config);\n\t\t\tme.options = helpers.configMerge(Chart.defaults.global.title, config.options);\n\n\t\t\t// Contains hit boxes for each dataset (in dataset order)\n\t\t\tme.legendHitBoxes = [];\n\t\t},\n\n\t\t// These methods are ordered by lifecyle. Utilities then follow.\n\n\t\tbeforeUpdate: function() {\n\t\t\tvar chartOpts = this.chart.options;\n\t\t\tif (chartOpts && chartOpts.title) {\n\t\t\t\tthis.options = helpers.configMerge(Chart.defaults.global.title, chartOpts.title);\n\t\t\t}\n\t\t},\n\t\tupdate: function(maxWidth, maxHeight, margins) {\n\t\t\tvar me = this;\n\n\t\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\t\tme.beforeUpdate();\n\n\t\t\t// Absorb the master measurements\n\t\t\tme.maxWidth = maxWidth;\n\t\t\tme.maxHeight = maxHeight;\n\t\t\tme.margins = margins;\n\n\t\t\t// Dimensions\n\t\t\tme.beforeSetDimensions();\n\t\t\tme.setDimensions();\n\t\t\tme.afterSetDimensions();\n\t\t\t// Labels\n\t\t\tme.beforeBuildLabels();\n\t\t\tme.buildLabels();\n\t\t\tme.afterBuildLabels();\n\n\t\t\t// Fit\n\t\t\tme.beforeFit();\n\t\t\tme.fit();\n\t\t\tme.afterFit();\n\t\t\t//\n\t\t\tme.afterUpdate();\n\n\t\t\treturn me.minSize;\n\n\t\t},\n\t\tafterUpdate: noop,\n\n\t\t//\n\n\t\tbeforeSetDimensions: noop,\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.width = me.maxWidth;\n\t\t\t\tme.left = 0;\n\t\t\t\tme.right = me.width;\n\t\t\t} else {\n\t\t\t\tme.height = me.maxHeight;\n\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.top = 0;\n\t\t\t\tme.bottom = me.height;\n\t\t\t}\n\n\t\t\t// Reset padding\n\t\t\tme.paddingLeft = 0;\n\t\t\tme.paddingTop = 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingBottom = 0;\n\n\t\t\t// Reset minSize\n\t\t\tme.minSize = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t};\n\t\t},\n\t\tafterSetDimensions: noop,\n\n\t\t//\n\n\t\tbeforeBuildLabels: noop,\n\t\tbuildLabels: noop,\n\t\tafterBuildLabels: noop,\n\n\t\t//\n\n\t\tbeforeFit: noop,\n\t\tfit: function() {\n\t\t\tvar me = this,\n\t\t\t\tvalueOrDefault = helpers.getValueOrDefault,\n\t\t\t\topts = me.options,\n\t\t\t\tglobalDefaults = Chart.defaults.global,\n\t\t\t\tdisplay = opts.display,\n\t\t\t\tfontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize),\n\t\t\t\tminSize = me.minSize;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tminSize.width = me.maxWidth; // fill all the width\n\t\t\t\tminSize.height = display ? fontSize + (opts.padding * 2) : 0;\n\t\t\t} else {\n\t\t\t\tminSize.width = display ? fontSize + (opts.padding * 2) : 0;\n\t\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t\t}\n\n\t\t\tme.width = minSize.width;\n\t\t\tme.height = minSize.height;\n\n\t\t},\n\t\tafterFit: noop,\n\n\t\t// Shared Methods\n\t\tisHorizontal: function() {\n\t\t\tvar pos = this.options.position;\n\t\t\treturn pos === 'top' || pos === 'bottom';\n\t\t},\n\n\t\t// Actualy draw the title block on the canvas\n\t\tdraw: function() {\n\t\t\tvar me = this,\n\t\t\t\tctx = me.ctx,\n\t\t\t\tvalueOrDefault = helpers.getValueOrDefault,\n\t\t\t\topts = me.options,\n\t\t\t\tglobalDefaults = Chart.defaults.global;\n\n\t\t\tif (opts.display) {\n\t\t\t\tvar fontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize),\n\t\t\t\t\tfontStyle = valueOrDefault(opts.fontStyle, globalDefaults.defaultFontStyle),\n\t\t\t\t\tfontFamily = valueOrDefault(opts.fontFamily, globalDefaults.defaultFontFamily),\n\t\t\t\t\ttitleFont = helpers.fontString(fontSize, fontStyle, fontFamily),\n\t\t\t\t\trotation = 0,\n\t\t\t\t\ttitleX,\n\t\t\t\t\ttitleY,\n\t\t\t\t\ttop = me.top,\n\t\t\t\t\tleft = me.left,\n\t\t\t\t\tbottom = me.bottom,\n\t\t\t\t\tright = me.right;\n\n\t\t\t\tctx.fillStyle = valueOrDefault(opts.fontColor, globalDefaults.defaultFontColor); // render in correct colour\n\t\t\t\tctx.font = titleFont;\n\n\t\t\t\t// Horizontal\n\t\t\t\tif (me.isHorizontal()) {\n\t\t\t\t\ttitleX = left + ((right - left) / 2); // midpoint of the width\n\t\t\t\t\ttitleY = top + ((bottom - top) / 2); // midpoint of the height\n\t\t\t\t} else {\n\t\t\t\t\ttitleX = opts.position === 'left' ? left + (fontSize / 2) : right - (fontSize / 2);\n\t\t\t\t\ttitleY = top + ((bottom - top) / 2);\n\t\t\t\t\trotation = Math.PI * (opts.position === 'left' ? -0.5 : 0.5);\n\t\t\t\t}\n\n\t\t\t\tctx.save();\n\t\t\t\tctx.translate(titleX, titleY);\n\t\t\t\tctx.rotate(rotation);\n\t\t\t\tctx.textAlign = 'center';\n\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\tctx.fillText(opts.text, 0, 0);\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t});\n\n\t// Register the title plugin\n\tChart.plugins.register({\n\t\tbeforeInit: function(chartInstance) {\n\t\t\tvar opts = chartInstance.options;\n\t\t\tvar titleOpts = opts.title;\n\n\t\t\tif (titleOpts) {\n\t\t\t\tchartInstance.titleBlock = new Chart.Title({\n\t\t\t\t\tctx: chartInstance.chart.ctx,\n\t\t\t\t\toptions: titleOpts,\n\t\t\t\t\tchart: chartInstance\n\t\t\t\t});\n\n\t\t\t\tChart.layoutService.addBox(chartInstance, chartInstance.titleBlock);\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar noop = helpers.noop;\n\n\tChart.defaults.global.legend = {\n\n\t\tdisplay: true,\n\t\tposition: 'top',\n\t\tfullWidth: true, // marks that this box should take the full width of the canvas (pushing down other boxes)\n\t\treverse: false,\n\n\t\t// a callback that will handle\n\t\tonClick: function(e, legendItem) {\n\t\t\tvar index = legendItem.datasetIndex;\n\t\t\tvar ci = this.chart;\n\t\t\tvar meta = ci.getDatasetMeta(index);\n\n\t\t\t// See controller.isDatasetVisible comment\n\t\t\tmeta.hidden = meta.hidden === null? !ci.data.datasets[index].hidden : null;\n\n\t\t\t// We hid a dataset ... rerender the chart\n\t\t\tci.update();\n\t\t},\n\n\t\tonHover: null,\n\n\t\tlabels: {\n\t\t\tboxWidth: 40,\n\t\t\tpadding: 10,\n\t\t\t// Generates labels shown in the legend\n\t\t\t// Valid properties to return:\n\t\t\t// text : text to display\n\t\t\t// fillStyle : fill of coloured box\n\t\t\t// strokeStyle: stroke of coloured box\n\t\t\t// hidden : if this legend item refers to a hidden item\n\t\t\t// lineCap : cap style for line\n\t\t\t// lineDash\n\t\t\t// lineDashOffset :\n\t\t\t// lineJoin :\n\t\t\t// lineWidth :\n\t\t\tgenerateLabels: function(chart) {\n\t\t\t\tvar data = chart.data;\n\t\t\t\treturn helpers.isArray(data.datasets) ? data.datasets.map(function(dataset, i) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: dataset.label,\n\t\t\t\t\t\tfillStyle: (!helpers.isArray(dataset.backgroundColor) ? dataset.backgroundColor : dataset.backgroundColor[0]),\n\t\t\t\t\t\thidden: !chart.isDatasetVisible(i),\n\t\t\t\t\t\tlineCap: dataset.borderCapStyle,\n\t\t\t\t\t\tlineDash: dataset.borderDash,\n\t\t\t\t\t\tlineDashOffset: dataset.borderDashOffset,\n\t\t\t\t\t\tlineJoin: dataset.borderJoinStyle,\n\t\t\t\t\t\tlineWidth: dataset.borderWidth,\n\t\t\t\t\t\tstrokeStyle: dataset.borderColor,\n\t\t\t\t\t\tpointStyle: dataset.pointStyle,\n\n\t\t\t\t\t\t// Below is extra data used for toggling the datasets\n\t\t\t\t\t\tdatasetIndex: i\n\t\t\t\t\t};\n\t\t\t\t}, this) : [];\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.Legend = Chart.Element.extend({\n\n\t\tinitialize: function(config) {\n\t\t\thelpers.extend(this, config);\n\n\t\t\t// Contains hit boxes for each dataset (in dataset order)\n\t\t\tthis.legendHitBoxes = [];\n\n\t\t\t// Are we in doughnut mode which has a different data type\n\t\t\tthis.doughnutMode = false;\n\t\t},\n\n\t\t// These methods are ordered by lifecyle. Utilities then follow.\n\t\t// Any function defined here is inherited by all legend types.\n\t\t// Any function can be extended by the legend type\n\n\t\tbeforeUpdate: noop,\n\t\tupdate: function(maxWidth, maxHeight, margins) {\n\t\t\tvar me = this;\n\n\t\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\t\tme.beforeUpdate();\n\n\t\t\t// Absorb the master measurements\n\t\t\tme.maxWidth = maxWidth;\n\t\t\tme.maxHeight = maxHeight;\n\t\t\tme.margins = margins;\n\n\t\t\t// Dimensions\n\t\t\tme.beforeSetDimensions();\n\t\t\tme.setDimensions();\n\t\t\tme.afterSetDimensions();\n\t\t\t// Labels\n\t\t\tme.beforeBuildLabels();\n\t\t\tme.buildLabels();\n\t\t\tme.afterBuildLabels();\n\n\t\t\t// Fit\n\t\t\tme.beforeFit();\n\t\t\tme.fit();\n\t\t\tme.afterFit();\n\t\t\t//\n\t\t\tme.afterUpdate();\n\n\t\t\treturn me.minSize;\n\t\t},\n\t\tafterUpdate: noop,\n\n\t\t//\n\n\t\tbeforeSetDimensions: noop,\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.width = me.maxWidth;\n\t\t\t\tme.left = 0;\n\t\t\t\tme.right = me.width;\n\t\t\t} else {\n\t\t\t\tme.height = me.maxHeight;\n\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.top = 0;\n\t\t\t\tme.bottom = me.height;\n\t\t\t}\n\n\t\t\t// Reset padding\n\t\t\tme.paddingLeft = 0;\n\t\t\tme.paddingTop = 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingBottom = 0;\n\n\t\t\t// Reset minSize\n\t\t\tme.minSize = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t};\n\t\t},\n\t\tafterSetDimensions: noop,\n\n\t\t//\n\n\t\tbeforeBuildLabels: noop,\n\t\tbuildLabels: function() {\n\t\t\tvar me = this;\n\t\t\tme.legendItems = me.options.labels.generateLabels.call(me, me.chart);\n\t\t\tif (me.options.reverse) {\n\t\t\t\tme.legendItems.reverse();\n\t\t\t}\n\t\t},\n\t\tafterBuildLabels: noop,\n\n\t\t//\n\n\t\tbeforeFit: noop,\n\t\tfit: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar labelOpts = opts.labels;\n\t\t\tvar display = opts.display;\n\n\t\t\tvar ctx = me.ctx;\n\n\t\t\tvar globalDefault = Chart.defaults.global,\n\t\t\t\titemOrDefault = helpers.getValueOrDefault,\n\t\t\t\tfontSize = itemOrDefault(labelOpts.fontSize, globalDefault.defaultFontSize),\n\t\t\t\tfontStyle = itemOrDefault(labelOpts.fontStyle, globalDefault.defaultFontStyle),\n\t\t\t\tfontFamily = itemOrDefault(labelOpts.fontFamily, globalDefault.defaultFontFamily),\n\t\t\t\tlabelFont = helpers.fontString(fontSize, fontStyle, fontFamily);\n\n\t\t\t// Reset hit boxes\n\t\t\tvar hitboxes = me.legendHitBoxes = [];\n\n\t\t\tvar minSize = me.minSize;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\tif (isHorizontal) {\n\t\t\t\tminSize.width = me.maxWidth; // fill all the width\n\t\t\t\tminSize.height = display ? 10 : 0;\n\t\t\t} else {\n\t\t\t\tminSize.width = display ? 10 : 0;\n\t\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t\t}\n\n\t\t\t// Increase sizes here\n\t\t\tif (display) {\n\t\t\t\tctx.font = labelFont;\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\t// Labels\n\n\t\t\t\t\t// Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\n\t\t\t\t\tvar lineWidths = me.lineWidths = [0];\n\t\t\t\t\tvar totalHeight = me.legendItems.length ? fontSize + (labelOpts.padding) : 0;\n\n\t\t\t\t\tctx.textAlign = 'left';\n\t\t\t\t\tctx.textBaseline = 'top';\n\n\t\t\t\t\thelpers.each(me.legendItems, function(legendItem, i) {\n\t\t\t\t\t\tvar boxWidth = labelOpts.usePointStyle ?\n\t\t\t\t\t\t\tfontSize * Math.sqrt(2) :\n\t\t\t\t\t\t\tlabelOpts.boxWidth;\n\n\t\t\t\t\t\tvar width = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n\t\t\t\t\t\tif (lineWidths[lineWidths.length - 1] + width + labelOpts.padding >= me.width) {\n\t\t\t\t\t\t\ttotalHeight += fontSize + (labelOpts.padding);\n\t\t\t\t\t\t\tlineWidths[lineWidths.length] = me.left;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Store the hitbox width and height here. Final position will be updated in `draw`\n\t\t\t\t\t\thitboxes[i] = {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\theight: fontSize\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tlineWidths[lineWidths.length - 1] += width + labelOpts.padding;\n\t\t\t\t\t});\n\n\t\t\t\t\tminSize.height += totalHeight;\n\n\t\t\t\t} else {\n\t\t\t\t\tvar vPadding = labelOpts.padding;\n\t\t\t\t\tvar columnWidths = me.columnWidths = [];\n\t\t\t\t\tvar totalWidth = labelOpts.padding;\n\t\t\t\t\tvar currentColWidth = 0;\n\t\t\t\t\tvar currentColHeight = 0;\n\t\t\t\t\tvar itemHeight = fontSize + vPadding;\n\n\t\t\t\t\thelpers.each(me.legendItems, function(legendItem, i) {\n\t\t\t\t\t\t// If usePointStyle is set, multiple boxWidth by 2 since it represents\n\t\t\t\t\t\t// the radius and not truly the width\n\t\t\t\t\t\tvar boxWidth = labelOpts.usePointStyle ? 2 * labelOpts.boxWidth : labelOpts.boxWidth;\n\n\t\t\t\t\t\tvar itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n\n\t\t\t\t\t\t// If too tall, go to new column\n\t\t\t\t\t\tif (currentColHeight + itemHeight > minSize.height) {\n\t\t\t\t\t\t\ttotalWidth += currentColWidth + labelOpts.padding;\n\t\t\t\t\t\t\tcolumnWidths.push(currentColWidth); // previous column width\n\n\t\t\t\t\t\t\tcurrentColWidth = 0;\n\t\t\t\t\t\t\tcurrentColHeight = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Get max width\n\t\t\t\t\t\tcurrentColWidth = Math.max(currentColWidth, itemWidth);\n\t\t\t\t\t\tcurrentColHeight += itemHeight;\n\n\t\t\t\t\t\t// Store the hitbox width and height here. Final position will be updated in `draw`\n\t\t\t\t\t\thitboxes[i] = {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\twidth: itemWidth,\n\t\t\t\t\t\t\theight: fontSize\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\t\ttotalWidth += currentColWidth;\n\t\t\t\t\tcolumnWidths.push(currentColWidth);\n\t\t\t\t\tminSize.width += totalWidth;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.width = minSize.width;\n\t\t\tme.height = minSize.height;\n\t\t},\n\t\tafterFit: noop,\n\n\t\t// Shared Methods\n\t\tisHorizontal: function() {\n\t\t\treturn this.options.position === 'top' || this.options.position === 'bottom';\n\t\t},\n\n\t\t// Actualy draw the legend on the canvas\n\t\tdraw: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar labelOpts = opts.labels;\n\t\t\tvar globalDefault = Chart.defaults.global,\n\t\t\t\tlineDefault = globalDefault.elements.line,\n\t\t\t\tlegendWidth = me.width,\n\t\t\t\tlineWidths = me.lineWidths;\n\n\t\t\tif (opts.display) {\n\t\t\t\tvar ctx = me.ctx,\n\t\t\t\t\tcursor,\n\t\t\t\t\titemOrDefault = helpers.getValueOrDefault,\n\t\t\t\t\tfontColor = itemOrDefault(labelOpts.fontColor, globalDefault.defaultFontColor),\n\t\t\t\t\tfontSize = itemOrDefault(labelOpts.fontSize, globalDefault.defaultFontSize),\n\t\t\t\t\tfontStyle = itemOrDefault(labelOpts.fontStyle, globalDefault.defaultFontStyle),\n\t\t\t\t\tfontFamily = itemOrDefault(labelOpts.fontFamily, globalDefault.defaultFontFamily),\n\t\t\t\t\tlabelFont = helpers.fontString(fontSize, fontStyle, fontFamily);\n\n\t\t\t\t// Canvas setup\n\t\t\t\tctx.textAlign = 'left';\n\t\t\t\tctx.textBaseline = 'top';\n\t\t\t\tctx.lineWidth = 0.5;\n\t\t\t\tctx.strokeStyle = fontColor; // for strikethrough effect\n\t\t\t\tctx.fillStyle = fontColor; // render in correct colour\n\t\t\t\tctx.font = labelFont;\n\n\t\t\t\tvar boxWidth = labelOpts.boxWidth,\n\t\t\t\t\thitboxes = me.legendHitBoxes;\n\n\t\t\t\t// current position\n\t\t\t\tvar drawLegendBox = function(x, y, legendItem) {\n\t\t\t\t\tif (isNaN(boxWidth) || boxWidth <= 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set the ctx for the box\n\t\t\t\t\tctx.save();\n\n\t\t\t\t\tctx.fillStyle = itemOrDefault(legendItem.fillStyle, globalDefault.defaultColor);\n\t\t\t\t\tctx.lineCap = itemOrDefault(legendItem.lineCap, lineDefault.borderCapStyle);\n\t\t\t\t\tctx.lineDashOffset = itemOrDefault(legendItem.lineDashOffset, lineDefault.borderDashOffset);\n\t\t\t\t\tctx.lineJoin = itemOrDefault(legendItem.lineJoin, lineDefault.borderJoinStyle);\n\t\t\t\t\tctx.lineWidth = itemOrDefault(legendItem.lineWidth, lineDefault.borderWidth);\n\t\t\t\t\tctx.strokeStyle = itemOrDefault(legendItem.strokeStyle, globalDefault.defaultColor);\n\t\t\t\t\tvar isLineWidthZero = (itemOrDefault(legendItem.lineWidth, lineDefault.borderWidth) === 0);\n\n\t\t\t\t\tif (ctx.setLineDash) {\n\t\t\t\t\t\t// IE 9 and 10 do not support line dash\n\t\t\t\t\t\tctx.setLineDash(itemOrDefault(legendItem.lineDash, lineDefault.borderDash));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.labels && opts.labels.usePointStyle) {\n\t\t\t\t\t\t// Recalulate x and y for drawPoint() because its expecting\n\t\t\t\t\t\t// x and y to be center of figure (instead of top left)\n\t\t\t\t\t\tvar radius = fontSize * Math.SQRT2 / 2;\n\t\t\t\t\t\tvar offSet = radius / Math.SQRT2;\n\t\t\t\t\t\tvar centerX = x + offSet;\n\t\t\t\t\t\tvar centerY = y + offSet;\n\n\t\t\t\t\t\t// Draw pointStyle as legend symbol\n\t\t\t\t\t\tChart.canvasHelpers.drawPoint(ctx, legendItem.pointStyle, radius, centerX, centerY);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Draw box as legend symbol\n\t\t\t\t\t\tif (!isLineWidthZero) {\n\t\t\t\t\t\t\tctx.strokeRect(x, y, boxWidth, fontSize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tctx.fillRect(x, y, boxWidth, fontSize);\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.restore();\n\t\t\t\t};\n\t\t\t\tvar fillText = function(x, y, legendItem, textWidth) {\n\t\t\t\t\tctx.fillText(legendItem.text, boxWidth + (fontSize / 2) + x, y);\n\n\t\t\t\t\tif (legendItem.hidden) {\n\t\t\t\t\t\t// Strikethrough the text if hidden\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.lineWidth = 2;\n\t\t\t\t\t\tctx.moveTo(boxWidth + (fontSize / 2) + x, y + (fontSize / 2));\n\t\t\t\t\t\tctx.lineTo(boxWidth + (fontSize / 2) + x + textWidth, y + (fontSize / 2));\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Horizontal\n\t\t\t\tvar isHorizontal = me.isHorizontal();\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tcursor = {\n\t\t\t\t\t\tx: me.left + ((legendWidth - lineWidths[0]) / 2),\n\t\t\t\t\t\ty: me.top + labelOpts.padding,\n\t\t\t\t\t\tline: 0\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tcursor = {\n\t\t\t\t\t\tx: me.left + labelOpts.padding,\n\t\t\t\t\t\ty: me.top + labelOpts.padding,\n\t\t\t\t\t\tline: 0\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tvar itemHeight = fontSize + labelOpts.padding;\n\t\t\t\thelpers.each(me.legendItems, function(legendItem, i) {\n\t\t\t\t\tvar textWidth = ctx.measureText(legendItem.text).width,\n\t\t\t\t\t\twidth = labelOpts.usePointStyle ?\n\t\t\t\t\t\t\tfontSize + (fontSize / 2) + textWidth :\n\t\t\t\t\t\t\tboxWidth + (fontSize / 2) + textWidth,\n\t\t\t\t\t\tx = cursor.x,\n\t\t\t\t\t\ty = cursor.y;\n\n\t\t\t\t\tif (isHorizontal) {\n\t\t\t\t\t\tif (x + width >= legendWidth) {\n\t\t\t\t\t\t\ty = cursor.y += itemHeight;\n\t\t\t\t\t\t\tcursor.line++;\n\t\t\t\t\t\t\tx = cursor.x = me.left + ((legendWidth - lineWidths[cursor.line]) / 2);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (y + itemHeight > me.bottom) {\n\t\t\t\t\t\tx = cursor.x = x + me.columnWidths[cursor.line] + labelOpts.padding;\n\t\t\t\t\t\ty = cursor.y = me.top;\n\t\t\t\t\t\tcursor.line++;\n\t\t\t\t\t}\n\n\t\t\t\t\tdrawLegendBox(x, y, legendItem);\n\n\t\t\t\t\thitboxes[i].left = x;\n\t\t\t\t\thitboxes[i].top = y;\n\n\t\t\t\t\t// Fill the actual label\n\t\t\t\t\tfillText(x, y, legendItem, textWidth);\n\n\t\t\t\t\tif (isHorizontal) {\n\t\t\t\t\t\tcursor.x += width + (labelOpts.padding);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcursor.y += itemHeight;\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t// Handle an event\n\t\thandleEvent: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar type = e.type === 'mouseup' ? 'click' : e.type;\n\n\t\t\tif (type === 'mousemove') {\n\t\t\t\tif (!opts.onHover) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'click') {\n\t\t\t\tif (!opts.onClick) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar position = helpers.getRelativePosition(e, me.chart.chart),\n\t\t\t\tx = position.x,\n\t\t\t\ty = position.y;\n\n\t\t\tif (x >= me.left && x <= me.right && y >= me.top && y <= me.bottom) {\n\t\t\t\t// See if we are touching one of the dataset boxes\n\t\t\t\tvar lh = me.legendHitBoxes;\n\t\t\t\tfor (var i = 0; i < lh.length; ++i) {\n\t\t\t\t\tvar hitBox = lh[i];\n\n\t\t\t\t\tif (x >= hitBox.left && x <= hitBox.left + hitBox.width && y >= hitBox.top && y <= hitBox.top + hitBox.height) {\n\t\t\t\t\t\t// Touching an element\n\t\t\t\t\t\tif (type === 'click') {\n\t\t\t\t\t\t\topts.onClick.call(me, e, me.legendItems[i]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (type === 'mousemove') {\n\t\t\t\t\t\t\topts.onHover.call(me, e, me.legendItems[i]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// Register the legend plugin\n\tChart.plugins.register({\n\t\tbeforeInit: function(chartInstance) {\n\t\t\tvar opts = chartInstance.options;\n\t\t\tvar legendOpts = opts.legend;\n\n\t\t\tif (legendOpts) {\n\t\t\t\tchartInstance.legend = new Chart.Legend({\n\t\t\t\t\tctx: chartInstance.chart.ctx,\n\t\t\t\t\toptions: legendOpts,\n\t\t\t\t\tchart: chartInstance\n\t\t\t\t});\n\n\t\t\t\tChart.layoutService.addBox(chartInstance, chartInstance.legend);\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.global.tooltips = {\n\t\tenabled: true,\n\t\tcustom: null,\n\t\tmode: 'single',\n\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\n\t\ttitleFontStyle: 'bold',\n\t\ttitleSpacing: 2,\n\t\ttitleMarginBottom: 6,\n\t\ttitleFontColor: '#fff',\n\t\ttitleAlign: 'left',\n\t\tbodySpacing: 2,\n\t\tbodyFontColor: '#fff',\n\t\tbodyAlign: 'left',\n\t\tfooterFontStyle: 'bold',\n\t\tfooterSpacing: 2,\n\t\tfooterMarginTop: 6,\n\t\tfooterFontColor: '#fff',\n\t\tfooterAlign: 'left',\n\t\tyPadding: 6,\n\t\txPadding: 6,\n\t\tyAlign: 'center',\n\t\txAlign: 'center',\n\t\tcaretSize: 5,\n\t\tcornerRadius: 6,\n\t\tmultiKeyBackground: '#fff',\n\t\tcallbacks: {\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeTitle: helpers.noop,\n\t\t\ttitle: function(tooltipItems, data) {\n\t\t\t\t// Pick first xLabel for now\n\t\t\t\tvar title = '';\n\t\t\t\tvar labels = data.labels;\n\t\t\t\tvar labelCount = labels ? labels.length : 0;\n\n\t\t\t\tif (tooltipItems.length > 0) {\n\t\t\t\t\tvar item = tooltipItems[0];\n\n\t\t\t\t\tif (item.xLabel) {\n\t\t\t\t\t\ttitle = item.xLabel;\n\t\t\t\t\t} else if (labelCount > 0 && item.index < labelCount) {\n\t\t\t\t\t\ttitle = labels[item.index];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tafterTitle: helpers.noop,\n\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeBody: helpers.noop,\n\n\t\t\t// Args are: (tooltipItem, data)\n\t\t\tbeforeLabel: helpers.noop,\n\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\tvar datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';\n\t\t\t\treturn datasetLabel + ': ' + tooltipItem.yLabel;\n\t\t\t},\n\t\t\tlabelColor: function(tooltipItem, chartInstance) {\n\t\t\t\tvar meta = chartInstance.getDatasetMeta(tooltipItem.datasetIndex);\n\t\t\t\tvar activeElement = meta.data[tooltipItem.index];\n\t\t\t\tvar view = activeElement._view;\n\t\t\t\treturn {\n\t\t\t\t\tborderColor: view.borderColor,\n\t\t\t\t\tbackgroundColor: view.backgroundColor\n\t\t\t\t};\n\t\t\t},\n\t\t\tafterLabel: helpers.noop,\n\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tafterBody: helpers.noop,\n\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeFooter: helpers.noop,\n\t\t\tfooter: helpers.noop,\n\t\t\tafterFooter: helpers.noop\n\t\t}\n\t};\n\n\t// Helper to push or concat based on if the 2nd parameter is an array or not\n\tfunction pushOrConcat(base, toPush) {\n\t\tif (toPush) {\n\t\t\tif (helpers.isArray(toPush)) {\n\t\t\t\t// base = base.concat(toPush);\n\t\t\t\tArray.prototype.push.apply(base, toPush);\n\t\t\t} else {\n\t\t\t\tbase.push(toPush);\n\t\t\t}\n\t\t}\n\n\t\treturn base;\n\t}\n\n\tfunction getAveragePosition(elements) {\n\t\tif (!elements.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar i, len;\n\t\tvar xPositions = [];\n\t\tvar yPositions = [];\n\n\t\tfor (i = 0, len = elements.length; i < len; ++i) {\n\t\t\tvar el = elements[i];\n\t\t\tif (el && el.hasValue()) {\n\t\t\t\tvar pos = el.tooltipPosition();\n\t\t\t\txPositions.push(pos.x);\n\t\t\t\tyPositions.push(pos.y);\n\t\t\t}\n\t\t}\n\n\t\tvar x = 0,\n\t\t\ty = 0;\n\t\tfor (i = 0; i < xPositions.length; ++i) {\n\t\t\tif (xPositions[i]) {\n\t\t\t\tx += xPositions[i];\n\t\t\t\ty += yPositions[i];\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tx: Math.round(x / xPositions.length),\n\t\t\ty: Math.round(y / xPositions.length)\n\t\t};\n\t}\n\n\t// Private helper to create a tooltip iteam model\n\t// @param element : the chart element (point, arc, bar) to create the tooltip item for\n\t// @return : new tooltip item\n\tfunction createTooltipItem(element) {\n\t\tvar xScale = element._xScale;\n\t\tvar yScale = element._yScale || element._scale; // handle radar || polarArea charts\n\t\tvar index = element._index,\n\t\t\tdatasetIndex = element._datasetIndex;\n\n\t\treturn {\n\t\t\txLabel: xScale ? xScale.getLabelForIndex(index, datasetIndex) : '',\n\t\t\tyLabel: yScale ? yScale.getLabelForIndex(index, datasetIndex) : '',\n\t\t\tindex: index,\n\t\t\tdatasetIndex: datasetIndex\n\t\t};\n\t}\n\n\tChart.Tooltip = Chart.Element.extend({\n\t\tinitialize: function() {\n\t\t\tvar me = this;\n\t\t\tvar globalDefaults = Chart.defaults.global;\n\t\t\tvar tooltipOpts = me._options;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\n\t\t\thelpers.extend(me, {\n\t\t\t\t_model: {\n\t\t\t\t\t// Positioning\n\t\t\t\t\txPadding: tooltipOpts.xPadding,\n\t\t\t\t\tyPadding: tooltipOpts.yPadding,\n\t\t\t\t\txAlign: tooltipOpts.xAlign,\n\t\t\t\t\tyAlign: tooltipOpts.yAlign,\n\n\t\t\t\t\t// Body\n\t\t\t\t\tbodyFontColor: tooltipOpts.bodyFontColor,\n\t\t\t\t\t_bodyFontFamily: getValueOrDefault(tooltipOpts.bodyFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t\t\t_bodyFontStyle: getValueOrDefault(tooltipOpts.bodyFontStyle, globalDefaults.defaultFontStyle),\n\t\t\t\t\t_bodyAlign: tooltipOpts.bodyAlign,\n\t\t\t\t\tbodyFontSize: getValueOrDefault(tooltipOpts.bodyFontSize, globalDefaults.defaultFontSize),\n\t\t\t\t\tbodySpacing: tooltipOpts.bodySpacing,\n\n\t\t\t\t\t// Title\n\t\t\t\t\ttitleFontColor: tooltipOpts.titleFontColor,\n\t\t\t\t\t_titleFontFamily: getValueOrDefault(tooltipOpts.titleFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t\t\t_titleFontStyle: getValueOrDefault(tooltipOpts.titleFontStyle, globalDefaults.defaultFontStyle),\n\t\t\t\t\ttitleFontSize: getValueOrDefault(tooltipOpts.titleFontSize, globalDefaults.defaultFontSize),\n\t\t\t\t\t_titleAlign: tooltipOpts.titleAlign,\n\t\t\t\t\ttitleSpacing: tooltipOpts.titleSpacing,\n\t\t\t\t\ttitleMarginBottom: tooltipOpts.titleMarginBottom,\n\n\t\t\t\t\t// Footer\n\t\t\t\t\tfooterFontColor: tooltipOpts.footerFontColor,\n\t\t\t\t\t_footerFontFamily: getValueOrDefault(tooltipOpts.footerFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t\t\t_footerFontStyle: getValueOrDefault(tooltipOpts.footerFontStyle, globalDefaults.defaultFontStyle),\n\t\t\t\t\tfooterFontSize: getValueOrDefault(tooltipOpts.footerFontSize, globalDefaults.defaultFontSize),\n\t\t\t\t\t_footerAlign: tooltipOpts.footerAlign,\n\t\t\t\t\tfooterSpacing: tooltipOpts.footerSpacing,\n\t\t\t\t\tfooterMarginTop: tooltipOpts.footerMarginTop,\n\n\t\t\t\t\t// Appearance\n\t\t\t\t\tcaretSize: tooltipOpts.caretSize,\n\t\t\t\t\tcornerRadius: tooltipOpts.cornerRadius,\n\t\t\t\t\tbackgroundColor: tooltipOpts.backgroundColor,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tlegendColorBackground: tooltipOpts.multiKeyBackground\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// Get the title\n\t\t// Args are: (tooltipItem, data)\n\t\tgetTitle: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me._options;\n\t\t\tvar callbacks = opts.callbacks;\n\n\t\t\tvar beforeTitle = callbacks.beforeTitle.apply(me, arguments),\n\t\t\t\ttitle = callbacks.title.apply(me, arguments),\n\t\t\t\tafterTitle = callbacks.afterTitle.apply(me, arguments);\n\n\t\t\tvar lines = [];\n\t\t\tlines = pushOrConcat(lines, beforeTitle);\n\t\t\tlines = pushOrConcat(lines, title);\n\t\t\tlines = pushOrConcat(lines, afterTitle);\n\n\t\t\treturn lines;\n\t\t},\n\n\t\t// Args are: (tooltipItem, data)\n\t\tgetBeforeBody: function() {\n\t\t\tvar lines = this._options.callbacks.beforeBody.apply(this, arguments);\n\t\t\treturn helpers.isArray(lines) ? lines : lines !== undefined ? [lines] : [];\n\t\t},\n\n\t\t// Args are: (tooltipItem, data)\n\t\tgetBody: function(tooltipItems, data) {\n\t\t\tvar me = this;\n\t\t\tvar callbacks = me._options.callbacks;\n\t\t\tvar bodyItems = [];\n\n\t\t\thelpers.each(tooltipItems, function(tooltipItem) {\n\t\t\t\tvar bodyItem = {\n\t\t\t\t\tbefore: [],\n\t\t\t\t\tlines: [],\n\t\t\t\t\tafter: []\n\t\t\t\t};\n\t\t\t\tpushOrConcat(bodyItem.before, callbacks.beforeLabel.call(me, tooltipItem, data));\n\t\t\t\tpushOrConcat(bodyItem.lines, callbacks.label.call(me, tooltipItem, data));\n\t\t\t\tpushOrConcat(bodyItem.after, callbacks.afterLabel.call(me, tooltipItem, data));\n\n\t\t\t\tbodyItems.push(bodyItem);\n\t\t\t});\n\n\t\t\treturn bodyItems;\n\t\t},\n\n\t\t// Args are: (tooltipItem, data)\n\t\tgetAfterBody: function() {\n\t\t\tvar lines = this._options.callbacks.afterBody.apply(this, arguments);\n\t\t\treturn helpers.isArray(lines) ? lines : lines !== undefined ? [lines] : [];\n\t\t},\n\n\t\t// Get the footer and beforeFooter and afterFooter lines\n\t\t// Args are: (tooltipItem, data)\n\t\tgetFooter: function() {\n\t\t\tvar me = this;\n\t\t\tvar callbacks = me._options.callbacks;\n\n\t\t\tvar beforeFooter = callbacks.beforeFooter.apply(me, arguments);\n\t\t\tvar footer = callbacks.footer.apply(me, arguments);\n\t\t\tvar afterFooter = callbacks.afterFooter.apply(me, arguments);\n\n\t\t\tvar lines = [];\n\t\t\tlines = pushOrConcat(lines, beforeFooter);\n\t\t\tlines = pushOrConcat(lines, footer);\n\t\t\tlines = pushOrConcat(lines, afterFooter);\n\n\t\t\treturn lines;\n\t\t},\n\n\t\tupdate: function(changed) {\n\t\t\tvar me = this;\n\t\t\tvar opts = me._options;\n\t\t\tvar model = me._model;\n\t\t\tvar active = me._active;\n\n\t\t\tvar data = me._data;\n\t\t\tvar chartInstance = me._chartInstance;\n\n\t\t\tvar i, len;\n\n\t\t\tif (active.length) {\n\t\t\t\tmodel.opacity = 1;\n\n\t\t\t\tvar labelColors = [],\n\t\t\t\t\ttooltipPosition = getAveragePosition(active);\n\n\t\t\t\tvar tooltipItems = [];\n\t\t\t\tfor (i = 0, len = active.length; i < len; ++i) {\n\t\t\t\t\ttooltipItems.push(createTooltipItem(active[i]));\n\t\t\t\t}\n\n\t\t\t\t// If the user provided a sorting function, use it to modify the tooltip items\n\t\t\t\tif (opts.itemSort) {\n\t\t\t\t\ttooltipItems = tooltipItems.sort(function(a, b) {\n\t\t\t\t\t\treturn opts.itemSort(a, b, data);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// If there is more than one item, show color items\n\t\t\t\tif (active.length > 1) {\n\t\t\t\t\thelpers.each(tooltipItems, function(tooltipItem) {\n\t\t\t\t\t\tlabelColors.push(opts.callbacks.labelColor.call(me, tooltipItem, chartInstance));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Build the Text Lines\n\t\t\t\thelpers.extend(model, {\n\t\t\t\t\ttitle: me.getTitle(tooltipItems, data),\n\t\t\t\t\tbeforeBody: me.getBeforeBody(tooltipItems, data),\n\t\t\t\t\tbody: me.getBody(tooltipItems, data),\n\t\t\t\t\tafterBody: me.getAfterBody(tooltipItems, data),\n\t\t\t\t\tfooter: me.getFooter(tooltipItems, data),\n\t\t\t\t\tx: Math.round(tooltipPosition.x),\n\t\t\t\t\ty: Math.round(tooltipPosition.y),\n\t\t\t\t\tcaretPadding: helpers.getValueOrDefault(tooltipPosition.padding, 2),\n\t\t\t\t\tlabelColors: labelColors\n\t\t\t\t});\n\n\t\t\t\t// We need to determine alignment of\n\t\t\t\tvar tooltipSize = me.getTooltipSize(model);\n\t\t\t\tme.determineAlignment(tooltipSize); // Smart Tooltip placement to stay on the canvas\n\n\t\t\t\thelpers.extend(model, me.getBackgroundPoint(model, tooltipSize));\n\t\t\t} else {\n\t\t\t\tme._model.opacity = 0;\n\t\t\t}\n\n\t\t\tif (changed && opts.custom) {\n\t\t\t\topts.custom.call(me, model);\n\t\t\t}\n\n\t\t\treturn me;\n\t\t},\n\t\tgetTooltipSize: function(vm) {\n\t\t\tvar ctx = this._chart.ctx;\n\n\t\t\tvar size = {\n\t\t\t\theight: vm.yPadding * 2, // Tooltip Padding\n\t\t\t\twidth: 0\n\t\t\t};\n\n\t\t\t// Count of all lines in the body\n\t\t\tvar body = vm.body;\n\t\t\tvar combinedBodyLength = body.reduce(function(count, bodyItem) {\n\t\t\t\treturn count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length;\n\t\t\t}, 0);\n\t\t\tcombinedBodyLength += vm.beforeBody.length + vm.afterBody.length;\n\n\t\t\tvar titleLineCount = vm.title.length;\n\t\t\tvar footerLineCount = vm.footer.length;\n\t\t\tvar titleFontSize = vm.titleFontSize,\n\t\t\t\tbodyFontSize = vm.bodyFontSize,\n\t\t\t\tfooterFontSize = vm.footerFontSize;\n\n\t\t\tsize.height += titleLineCount * titleFontSize; // Title Lines\n\t\t\tsize.height += (titleLineCount - 1) * vm.titleSpacing; // Title Line Spacing\n\t\t\tsize.height += titleLineCount ? vm.titleMarginBottom : 0; // Title's bottom Margin\n\t\t\tsize.height += combinedBodyLength * bodyFontSize; // Body Lines\n\t\t\tsize.height += combinedBodyLength ? (combinedBodyLength - 1) * vm.bodySpacing : 0; // Body Line Spacing\n\t\t\tsize.height += footerLineCount ? vm.footerMarginTop : 0; // Footer Margin\n\t\t\tsize.height += footerLineCount * (footerFontSize); // Footer Lines\n\t\t\tsize.height += footerLineCount ? (footerLineCount - 1) * vm.footerSpacing : 0; // Footer Line Spacing\n\n\t\t\t// Title width\n\t\t\tvar widthPadding = 0;\n\t\t\tvar maxLineWidth = function(line) {\n\t\t\t\tsize.width = Math.max(size.width, ctx.measureText(line).width + widthPadding);\n\t\t\t};\n\n\t\t\tctx.font = helpers.fontString(titleFontSize, vm._titleFontStyle, vm._titleFontFamily);\n\t\t\thelpers.each(vm.title, maxLineWidth);\n\n\t\t\t// Body width\n\t\t\tctx.font = helpers.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\n\t\t\thelpers.each(vm.beforeBody.concat(vm.afterBody), maxLineWidth);\n\n\t\t\t// Body lines may include some extra width due to the color box\n\t\t\twidthPadding = body.length > 1 ? (bodyFontSize + 2) : 0;\n\t\t\thelpers.each(body, function(bodyItem) {\n\t\t\t\thelpers.each(bodyItem.before, maxLineWidth);\n\t\t\t\thelpers.each(bodyItem.lines, maxLineWidth);\n\t\t\t\thelpers.each(bodyItem.after, maxLineWidth);\n\t\t\t});\n\n\t\t\t// Reset back to 0\n\t\t\twidthPadding = 0;\n\n\t\t\t// Footer width\n\t\t\tctx.font = helpers.fontString(footerFontSize, vm._footerFontStyle, vm._footerFontFamily);\n\t\t\thelpers.each(vm.footer, maxLineWidth);\n\n\t\t\t// Add padding\n\t\t\tsize.width += 2 * vm.xPadding;\n\n\t\t\treturn size;\n\t\t},\n\t\tdetermineAlignment: function(size) {\n\t\t\tvar me = this;\n\t\t\tvar model = me._model;\n\t\t\tvar chart = me._chart;\n\t\t\tvar chartArea = me._chartInstance.chartArea;\n\n\t\t\tif (model.y < size.height) {\n\t\t\t\tmodel.yAlign = 'top';\n\t\t\t} else if (model.y > (chart.height - size.height)) {\n\t\t\t\tmodel.yAlign = 'bottom';\n\t\t\t}\n\n\t\t\tvar lf, rf; // functions to determine left, right alignment\n\t\t\tvar olf, orf; // functions to determine if left/right alignment causes tooltip to go outside chart\n\t\t\tvar yf; // function to get the y alignment if the tooltip goes outside of the left or right edges\n\t\t\tvar midX = (chartArea.left + chartArea.right) / 2;\n\t\t\tvar midY = (chartArea.top + chartArea.bottom) / 2;\n\n\t\t\tif (model.yAlign === 'center') {\n\t\t\t\tlf = function(x) {\n\t\t\t\t\treturn x <= midX;\n\t\t\t\t};\n\t\t\t\trf = function(x) {\n\t\t\t\t\treturn x > midX;\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tlf = function(x) {\n\t\t\t\t\treturn x <= (size.width / 2);\n\t\t\t\t};\n\t\t\t\trf = function(x) {\n\t\t\t\t\treturn x >= (chart.width - (size.width / 2));\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tolf = function(x) {\n\t\t\t\treturn x + size.width > chart.width;\n\t\t\t};\n\t\t\torf = function(x) {\n\t\t\t\treturn x - size.width < 0;\n\t\t\t};\n\t\t\tyf = function(y) {\n\t\t\t\treturn y <= midY ? 'top' : 'bottom';\n\t\t\t};\n\n\t\t\tif (lf(model.x)) {\n\t\t\t\tmodel.xAlign = 'left';\n\n\t\t\t\t// Is tooltip too wide and goes over the right side of the chart.?\n\t\t\t\tif (olf(model.x)) {\n\t\t\t\t\tmodel.xAlign = 'center';\n\t\t\t\t\tmodel.yAlign = yf(model.y);\n\t\t\t\t}\n\t\t\t} else if (rf(model.x)) {\n\t\t\t\tmodel.xAlign = 'right';\n\n\t\t\t\t// Is tooltip too wide and goes outside left edge of canvas?\n\t\t\t\tif (orf(model.x)) {\n\t\t\t\t\tmodel.xAlign = 'center';\n\t\t\t\t\tmodel.yAlign = yf(model.y);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetBackgroundPoint: function(vm, size) {\n\t\t\t// Background Position\n\t\t\tvar pt = {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y\n\t\t\t};\n\n\t\t\tvar caretSize = vm.caretSize,\n\t\t\t\tcaretPadding = vm.caretPadding,\n\t\t\t\tcornerRadius = vm.cornerRadius,\n\t\t\t\txAlign = vm.xAlign,\n\t\t\t\tyAlign = vm.yAlign,\n\t\t\t\tpaddingAndSize = caretSize + caretPadding,\n\t\t\t\tradiusAndPadding = cornerRadius + caretPadding;\n\n\t\t\tif (xAlign === 'right') {\n\t\t\t\tpt.x -= size.width;\n\t\t\t} else if (xAlign === 'center') {\n\t\t\t\tpt.x -= (size.width / 2);\n\t\t\t}\n\n\t\t\tif (yAlign === 'top') {\n\t\t\t\tpt.y += paddingAndSize;\n\t\t\t} else if (yAlign === 'bottom') {\n\t\t\t\tpt.y -= size.height + paddingAndSize;\n\t\t\t} else {\n\t\t\t\tpt.y -= (size.height / 2);\n\t\t\t}\n\n\t\t\tif (yAlign === 'center') {\n\t\t\t\tif (xAlign === 'left') {\n\t\t\t\t\tpt.x += paddingAndSize;\n\t\t\t\t} else if (xAlign === 'right') {\n\t\t\t\t\tpt.x -= paddingAndSize;\n\t\t\t\t}\n\t\t\t} else if (xAlign === 'left') {\n\t\t\t\tpt.x -= radiusAndPadding;\n\t\t\t} else if (xAlign === 'right') {\n\t\t\t\tpt.x += radiusAndPadding;\n\t\t\t}\n\n\t\t\treturn pt;\n\t\t},\n\t\tdrawCaret: function(tooltipPoint, size, opacity) {\n\t\t\tvar vm = this._view;\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar x1, x2, x3;\n\t\t\tvar y1, y2, y3;\n\t\t\tvar caretSize = vm.caretSize;\n\t\t\tvar cornerRadius = vm.cornerRadius;\n\t\t\tvar xAlign = vm.xAlign,\n\t\t\t\tyAlign = vm.yAlign;\n\t\t\tvar ptX = tooltipPoint.x,\n\t\t\t\tptY = tooltipPoint.y;\n\t\t\tvar width = size.width,\n\t\t\t\theight = size.height;\n\n\t\t\tif (yAlign === 'center') {\n\t\t\t\t// Left or right side\n\t\t\t\tif (xAlign === 'left') {\n\t\t\t\t\tx1 = ptX;\n\t\t\t\t\tx2 = x1 - caretSize;\n\t\t\t\t\tx3 = x1;\n\t\t\t\t} else {\n\t\t\t\t\tx1 = ptX + width;\n\t\t\t\t\tx2 = x1 + caretSize;\n\t\t\t\t\tx3 = x1;\n\t\t\t\t}\n\n\t\t\t\ty2 = ptY + (height / 2);\n\t\t\t\ty1 = y2 - caretSize;\n\t\t\t\ty3 = y2 + caretSize;\n\t\t\t} else {\n\t\t\t\tif (xAlign === 'left') {\n\t\t\t\t\tx1 = ptX + cornerRadius;\n\t\t\t\t\tx2 = x1 + caretSize;\n\t\t\t\t\tx3 = x2 + caretSize;\n\t\t\t\t} else if (xAlign === 'right') {\n\t\t\t\t\tx1 = ptX + width - cornerRadius;\n\t\t\t\t\tx2 = x1 - caretSize;\n\t\t\t\t\tx3 = x2 - caretSize;\n\t\t\t\t} else {\n\t\t\t\t\tx2 = ptX + (width / 2);\n\t\t\t\t\tx1 = x2 - caretSize;\n\t\t\t\t\tx3 = x2 + caretSize;\n\t\t\t\t}\n\n\t\t\t\tif (yAlign === 'top') {\n\t\t\t\t\ty1 = ptY;\n\t\t\t\t\ty2 = y1 - caretSize;\n\t\t\t\t\ty3 = y1;\n\t\t\t\t} else {\n\t\t\t\t\ty1 = ptY + height;\n\t\t\t\t\ty2 = y1 + caretSize;\n\t\t\t\t\ty3 = y1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar bgColor = helpers.color(vm.backgroundColor);\n\t\t\tctx.fillStyle = bgColor.alpha(opacity * bgColor.alpha()).rgbString();\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x1, y1);\n\t\t\tctx.lineTo(x2, y2);\n\t\t\tctx.lineTo(x3, y3);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t},\n\t\tdrawTitle: function(pt, vm, ctx, opacity) {\n\t\t\tvar title = vm.title;\n\n\t\t\tif (title.length) {\n\t\t\t\tctx.textAlign = vm._titleAlign;\n\t\t\t\tctx.textBaseline = 'top';\n\n\t\t\t\tvar titleFontSize = vm.titleFontSize,\n\t\t\t\t\ttitleSpacing = vm.titleSpacing;\n\n\t\t\t\tvar titleFontColor = helpers.color(vm.titleFontColor);\n\t\t\t\tctx.fillStyle = titleFontColor.alpha(opacity * titleFontColor.alpha()).rgbString();\n\t\t\t\tctx.font = helpers.fontString(titleFontSize, vm._titleFontStyle, vm._titleFontFamily);\n\n\t\t\t\tvar i, len;\n\t\t\t\tfor (i = 0, len = title.length; i < len; ++i) {\n\t\t\t\t\tctx.fillText(title[i], pt.x, pt.y);\n\t\t\t\t\tpt.y += titleFontSize + titleSpacing; // Line Height and spacing\n\n\t\t\t\t\tif (i + 1 === title.length) {\n\t\t\t\t\t\tpt.y += vm.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdrawBody: function(pt, vm, ctx, opacity) {\n\t\t\tvar bodyFontSize = vm.bodyFontSize;\n\t\t\tvar bodySpacing = vm.bodySpacing;\n\t\t\tvar body = vm.body;\n\n\t\t\tctx.textAlign = vm._bodyAlign;\n\t\t\tctx.textBaseline = 'top';\n\n\t\t\tvar bodyFontColor = helpers.color(vm.bodyFontColor);\n\t\t\tvar textColor = bodyFontColor.alpha(opacity * bodyFontColor.alpha()).rgbString();\n\t\t\tctx.fillStyle = textColor;\n\t\t\tctx.font = helpers.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\n\n\t\t\t// Before Body\n\t\t\tvar xLinePadding = 0;\n\t\t\tvar fillLineOfText = function(line) {\n\t\t\t\tctx.fillText(line, pt.x + xLinePadding, pt.y);\n\t\t\t\tpt.y += bodyFontSize + bodySpacing;\n\t\t\t};\n\n\t\t\t// Before body lines\n\t\t\thelpers.each(vm.beforeBody, fillLineOfText);\n\n\t\t\tvar drawColorBoxes = body.length > 1;\n\t\t\txLinePadding = drawColorBoxes ? (bodyFontSize + 2) : 0;\n\n\t\t\t// Draw body lines now\n\t\t\thelpers.each(body, function(bodyItem, i) {\n\t\t\t\thelpers.each(bodyItem.before, fillLineOfText);\n\n\t\t\t\thelpers.each(bodyItem.lines, function(line) {\n\t\t\t\t\t// Draw Legend-like boxes if needed\n\t\t\t\t\tif (drawColorBoxes) {\n\t\t\t\t\t\t// Fill a white rect so that colours merge nicely if the opacity is < 1\n\t\t\t\t\t\tctx.fillStyle = helpers.color(vm.legendColorBackground).alpha(opacity).rgbaString();\n\t\t\t\t\t\tctx.fillRect(pt.x, pt.y, bodyFontSize, bodyFontSize);\n\n\t\t\t\t\t\t// Border\n\t\t\t\t\t\tctx.strokeStyle = helpers.color(vm.labelColors[i].borderColor).alpha(opacity).rgbaString();\n\t\t\t\t\t\tctx.strokeRect(pt.x, pt.y, bodyFontSize, bodyFontSize);\n\n\t\t\t\t\t\t// Inner square\n\t\t\t\t\t\tctx.fillStyle = helpers.color(vm.labelColors[i].backgroundColor).alpha(opacity).rgbaString();\n\t\t\t\t\t\tctx.fillRect(pt.x + 1, pt.y + 1, bodyFontSize - 2, bodyFontSize - 2);\n\n\t\t\t\t\t\tctx.fillStyle = textColor;\n\t\t\t\t\t}\n\n\t\t\t\t\tfillLineOfText(line);\n\t\t\t\t});\n\n\t\t\t\thelpers.each(bodyItem.after, fillLineOfText);\n\t\t\t});\n\n\t\t\t// Reset back to 0 for after body\n\t\t\txLinePadding = 0;\n\n\t\t\t// After body lines\n\t\t\thelpers.each(vm.afterBody, fillLineOfText);\n\t\t\tpt.y -= bodySpacing; // Remove last body spacing\n\t\t},\n\t\tdrawFooter: function(pt, vm, ctx, opacity) {\n\t\t\tvar footer = vm.footer;\n\n\t\t\tif (footer.length) {\n\t\t\t\tpt.y += vm.footerMarginTop;\n\n\t\t\t\tctx.textAlign = vm._footerAlign;\n\t\t\t\tctx.textBaseline = 'top';\n\n\t\t\t\tvar footerFontColor = helpers.color(vm.footerFontColor);\n\t\t\t\tctx.fillStyle = footerFontColor.alpha(opacity * footerFontColor.alpha()).rgbString();\n\t\t\t\tctx.font = helpers.fontString(vm.footerFontSize, vm._footerFontStyle, vm._footerFontFamily);\n\n\t\t\t\thelpers.each(footer, function(line) {\n\t\t\t\t\tctx.fillText(line, pt.x, pt.y);\n\t\t\t\t\tpt.y += vm.footerFontSize + vm.footerSpacing;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tdraw: function() {\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar vm = this._view;\n\n\t\t\tif (vm.opacity === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar tooltipSize = this.getTooltipSize(vm);\n\t\t\tvar pt = {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y\n\t\t\t};\n\n\t\t\t// IE11/Edge does not like very small opacities, so snap to 0\n\t\t\tvar opacity = Math.abs(vm.opacity < 1e-3) ? 0 : vm.opacity;\n\n\t\t\tif (this._options.enabled) {\n\t\t\t\t// Draw Background\n\t\t\t\tvar bgColor = helpers.color(vm.backgroundColor);\n\t\t\t\tctx.fillStyle = bgColor.alpha(opacity * bgColor.alpha()).rgbString();\n\t\t\t\thelpers.drawRoundedRectangle(ctx, pt.x, pt.y, tooltipSize.width, tooltipSize.height, vm.cornerRadius);\n\t\t\t\tctx.fill();\n\n\t\t\t\t// Draw Caret\n\t\t\t\tthis.drawCaret(pt, tooltipSize, opacity);\n\n\t\t\t\t// Draw Title, Body, and Footer\n\t\t\t\tpt.x += vm.xPadding;\n\t\t\t\tpt.y += vm.yPadding;\n\n\t\t\t\t// Titles\n\t\t\t\tthis.drawTitle(pt, vm, ctx, opacity);\n\n\t\t\t\t// Body\n\t\t\t\tthis.drawBody(pt, vm, ctx, opacity);\n\n\t\t\t\t// Footer\n\t\t\t\tthis.drawFooter(pt, vm, ctx, opacity);\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers,\n\t\tglobalOpts = Chart.defaults.global;\n\n\tglobalOpts.elements.arc = {\n\t\tbackgroundColor: globalOpts.defaultColor,\n\t\tborderColor: '#fff',\n\t\tborderWidth: 2\n\t};\n\n\tChart.elements.Arc = Chart.Element.extend({\n\t\tinLabelRange: function(mouseX) {\n\t\t\tvar vm = this._view;\n\n\t\t\tif (vm) {\n\t\t\t\treturn (Math.pow(mouseX - vm.x, 2) < Math.pow(vm.radius + vm.hoverRadius, 2));\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tinRange: function(chartX, chartY) {\n\t\t\tvar vm = this._view;\n\n\t\t\tif (vm) {\n\t\t\t\tvar pointRelativePosition = helpers.getAngleFromPoint(vm, {\n\t\t\t\t\t\tx: chartX,\n\t\t\t\t\t\ty: chartY\n\t\t\t\t\t}),\n\t\t\t\t\tangle = pointRelativePosition.angle,\n\t\t\t\t\tdistance = pointRelativePosition.distance;\n\n\t\t\t\t// Sanitise angle range\n\t\t\t\tvar startAngle = vm.startAngle;\n\t\t\t\tvar endAngle = vm.endAngle;\n\t\t\t\twhile (endAngle < startAngle) {\n\t\t\t\t\tendAngle += 2.0 * Math.PI;\n\t\t\t\t}\n\t\t\t\twhile (angle > endAngle) {\n\t\t\t\t\tangle -= 2.0 * Math.PI;\n\t\t\t\t}\n\t\t\t\twhile (angle < startAngle) {\n\t\t\t\t\tangle += 2.0 * Math.PI;\n\t\t\t\t}\n\n\t\t\t\t// Check if within the range of the open/close angle\n\t\t\t\tvar betweenAngles = (angle >= startAngle && angle <= endAngle),\n\t\t\t\t\twithinRadius = (distance >= vm.innerRadius && distance <= vm.outerRadius);\n\n\t\t\t\treturn (betweenAngles && withinRadius);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\ttooltipPosition: function() {\n\t\t\tvar vm = this._view;\n\n\t\t\tvar centreAngle = vm.startAngle + ((vm.endAngle - vm.startAngle) / 2),\n\t\t\t\trangeFromCentre = (vm.outerRadius - vm.innerRadius) / 2 + vm.innerRadius;\n\t\t\treturn {\n\t\t\t\tx: vm.x + (Math.cos(centreAngle) * rangeFromCentre),\n\t\t\t\ty: vm.y + (Math.sin(centreAngle) * rangeFromCentre)\n\t\t\t};\n\t\t},\n\t\tdraw: function() {\n\n\t\t\tvar ctx = this._chart.ctx,\n\t\t\t\tvm = this._view,\n\t\t\t\tsA = vm.startAngle,\n\t\t\t\teA = vm.endAngle;\n\n\t\t\tctx.beginPath();\n\n\t\t\tctx.arc(vm.x, vm.y, vm.outerRadius, sA, eA);\n\t\t\tctx.arc(vm.x, vm.y, vm.innerRadius, eA, sA, true);\n\n\t\t\tctx.closePath();\n\t\t\tctx.strokeStyle = vm.borderColor;\n\t\t\tctx.lineWidth = vm.borderWidth;\n\n\t\t\tctx.fillStyle = vm.backgroundColor;\n\n\t\t\tctx.fill();\n\t\t\tctx.lineJoin = 'bevel';\n\n\t\t\tif (vm.borderWidth) {\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar globalDefaults = Chart.defaults.global;\n\n\tChart.defaults.global.elements.line = {\n\t\ttension: 0.4,\n\t\tbackgroundColor: globalDefaults.defaultColor,\n\t\tborderWidth: 3,\n\t\tborderColor: globalDefaults.defaultColor,\n\t\tborderCapStyle: 'butt',\n\t\tborderDash: [],\n\t\tborderDashOffset: 0.0,\n\t\tborderJoinStyle: 'miter',\n\t\tcapBezierPoints: true,\n\t\tfill: true // do we fill in the area between the line and its base axis\n\t};\n\n\tChart.elements.Line = Chart.Element.extend({\n\t\tdraw: function() {\n\t\t\tvar me = this;\n\t\t\tvar vm = me._view;\n\t\t\tvar spanGaps = vm.spanGaps;\n\t\t\tvar scaleZero = vm.scaleZero;\n\t\t\tvar loop = me._loop;\n\n\t\t\tvar ctx = me._chart.ctx;\n\t\t\tctx.save();\n\n\t\t\t// Helper function to draw a line to a point\n\t\t\tfunction lineToPoint(previousPoint, point) {\n\t\t\t\tvar pointVM = point._view;\n\t\t\t\tif (point._view.steppedLine === true) {\n\t\t\t\t\tctx.lineTo(pointVM.x, previousPoint._view.y);\n\t\t\t\t\tctx.lineTo(pointVM.x, pointVM.y);\n\t\t\t\t} else if (point._view.tension === 0) {\n\t\t\t\t\tctx.lineTo(pointVM.x, pointVM.y);\n\t\t\t\t} else {\n\t\t\t\t\tctx.bezierCurveTo(\n\t\t\t\t\t\tpreviousPoint._view.controlPointNextX,\n\t\t\t\t\t\tpreviousPoint._view.controlPointNextY,\n\t\t\t\t\t\tpointVM.controlPointPreviousX,\n\t\t\t\t\t\tpointVM.controlPointPreviousY,\n\t\t\t\t\t\tpointVM.x,\n\t\t\t\t\t\tpointVM.y\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar points = me._children.slice(); // clone array\n\t\t\tvar lastDrawnIndex = -1;\n\n\t\t\t// If we are looping, adding the first point again\n\t\t\tif (loop && points.length) {\n\t\t\t\tpoints.push(points[0]);\n\t\t\t}\n\n\t\t\tvar index, current, previous, currentVM;\n\n\t\t\t// Fill Line\n\t\t\tif (points.length && vm.fill) {\n\t\t\t\tctx.beginPath();\n\n\t\t\t\tfor (index = 0; index < points.length; ++index) {\n\t\t\t\t\tcurrent = points[index];\n\t\t\t\t\tprevious = helpers.previousItem(points, index);\n\t\t\t\t\tcurrentVM = current._view;\n\n\t\t\t\t\t// First point moves to it's starting position no matter what\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\tif (loop) {\n\t\t\t\t\t\t\tctx.moveTo(scaleZero.x, scaleZero.y);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.moveTo(currentVM.x, scaleZero);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!currentVM.skip) {\n\t\t\t\t\t\t\tlastDrawnIndex = index;\n\t\t\t\t\t\t\tctx.lineTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprevious = lastDrawnIndex === -1 ? previous : points[lastDrawnIndex];\n\n\t\t\t\t\t\tif (currentVM.skip) {\n\t\t\t\t\t\t\t// Only do this if this is the first point that is skipped\n\t\t\t\t\t\t\tif (!spanGaps && lastDrawnIndex === (index - 1)) {\n\t\t\t\t\t\t\t\tif (loop) {\n\t\t\t\t\t\t\t\t\tctx.lineTo(scaleZero.x, scaleZero.y);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tctx.lineTo(previous._view.x, scaleZero);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (lastDrawnIndex !== (index - 1)) {\n\t\t\t\t\t\t\t\t// There was a gap and this is the first point after the gap. If we've never drawn a point, this is a special case.\n\t\t\t\t\t\t\t\t// If the first data point is NaN, then there is no real gap to skip\n\t\t\t\t\t\t\t\tif (spanGaps && lastDrawnIndex !== -1) {\n\t\t\t\t\t\t\t\t\t// We are spanning the gap, so simple draw a line to this point\n\t\t\t\t\t\t\t\t\tlineToPoint(previous, current);\n\t\t\t\t\t\t\t\t} else if (loop) {\n\t\t\t\t\t\t\t\t\tctx.lineTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tctx.lineTo(currentVM.x, scaleZero);\n\t\t\t\t\t\t\t\t\tctx.lineTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Line to next point\n\t\t\t\t\t\t\t\tlineToPoint(previous, current);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlastDrawnIndex = index;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!loop && lastDrawnIndex !== -1) {\n\t\t\t\t\tctx.lineTo(points[lastDrawnIndex]._view.x, scaleZero);\n\t\t\t\t}\n\n\t\t\t\tctx.fillStyle = vm.backgroundColor || globalDefaults.defaultColor;\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\t// Stroke Line Options\n\t\t\tvar globalOptionLineElements = globalDefaults.elements.line;\n\t\t\tctx.lineCap = vm.borderCapStyle || globalOptionLineElements.borderCapStyle;\n\n\t\t\t// IE 9 and 10 do not support line dash\n\t\t\tif (ctx.setLineDash) {\n\t\t\t\tctx.setLineDash(vm.borderDash || globalOptionLineElements.borderDash);\n\t\t\t}\n\n\t\t\tctx.lineDashOffset = vm.borderDashOffset || globalOptionLineElements.borderDashOffset;\n\t\t\tctx.lineJoin = vm.borderJoinStyle || globalOptionLineElements.borderJoinStyle;\n\t\t\tctx.lineWidth = vm.borderWidth || globalOptionLineElements.borderWidth;\n\t\t\tctx.strokeStyle = vm.borderColor || globalDefaults.defaultColor;\n\n\t\t\t// Stroke Line\n\t\t\tctx.beginPath();\n\t\t\tlastDrawnIndex = -1;\n\n\t\t\tfor (index = 0; index < points.length; ++index) {\n\t\t\t\tcurrent = points[index];\n\t\t\t\tprevious = helpers.previousItem(points, index);\n\t\t\t\tcurrentVM = current._view;\n\n\t\t\t\t// First point moves to it's starting position no matter what\n\t\t\t\tif (index === 0) {\n\t\t\t\t\tif (!currentVM.skip) {\n\t\t\t\t\t\tctx.moveTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\tlastDrawnIndex = index;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tprevious = lastDrawnIndex === -1 ? previous : points[lastDrawnIndex];\n\n\t\t\t\t\tif (!currentVM.skip) {\n\t\t\t\t\t\tif ((lastDrawnIndex !== (index - 1) && !spanGaps) || lastDrawnIndex === -1) {\n\t\t\t\t\t\t\t// There was a gap and this is the first point after the gap\n\t\t\t\t\t\t\tctx.moveTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Line to next point\n\t\t\t\t\t\t\tlineToPoint(previous, current);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastDrawnIndex = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tctx.stroke();\n\t\t\tctx.restore();\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers,\n\t\tglobalOpts = Chart.defaults.global,\n\t\tdefaultColor = globalOpts.defaultColor;\n\n\tglobalOpts.elements.point = {\n\t\tradius: 3,\n\t\tpointStyle: 'circle',\n\t\tbackgroundColor: defaultColor,\n\t\tborderWidth: 1,\n\t\tborderColor: defaultColor,\n\t\t// Hover\n\t\thitRadius: 1,\n\t\thoverRadius: 4,\n\t\thoverBorderWidth: 1\n\t};\n\n\tChart.elements.Point = Chart.Element.extend({\n\t\tinRange: function(mouseX, mouseY) {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm ? ((Math.pow(mouseX - vm.x, 2) + Math.pow(mouseY - vm.y, 2)) < Math.pow(vm.hitRadius + vm.radius, 2)) : false;\n\t\t},\n\t\tinLabelRange: function(mouseX) {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm ? (Math.pow(mouseX - vm.x, 2) < Math.pow(vm.radius + vm.hitRadius, 2)) : false;\n\t\t},\n\t\ttooltipPosition: function() {\n\t\t\tvar vm = this._view;\n\t\t\treturn {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y,\n\t\t\t\tpadding: vm.radius + vm.borderWidth\n\t\t\t};\n\t\t},\n\t\tdraw: function() {\n\t\t\tvar vm = this._view;\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar pointStyle = vm.pointStyle;\n\t\t\tvar radius = vm.radius;\n\t\t\tvar x = vm.x;\n\t\t\tvar y = vm.y;\n\n\t\t\tif (vm.skip) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tctx.strokeStyle = vm.borderColor || defaultColor;\n\t\t\tctx.lineWidth = helpers.getValueOrDefault(vm.borderWidth, globalOpts.elements.point.borderWidth);\n\t\t\tctx.fillStyle = vm.backgroundColor || defaultColor;\n\n\t\t\tChart.canvasHelpers.drawPoint(ctx, pointStyle, radius, x, y);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar globalOpts = Chart.defaults.global;\n\n\tglobalOpts.elements.rectangle = {\n\t\tbackgroundColor: globalOpts.defaultColor,\n\t\tborderWidth: 0,\n\t\tborderColor: globalOpts.defaultColor,\n\t\tborderSkipped: 'bottom'\n\t};\n\n\tChart.elements.Rectangle = Chart.Element.extend({\n\t\tdraw: function() {\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar vm = this._view;\n\n\t\t\tvar halfWidth = vm.width / 2,\n\t\t\t\tleftX = vm.x - halfWidth,\n\t\t\t\trightX = vm.x + halfWidth,\n\t\t\t\ttop = vm.base - (vm.base - vm.y),\n\t\t\t\thalfStroke = vm.borderWidth / 2;\n\n\t\t\t// Canvas doesn't allow us to stroke inside the width so we can\n\t\t\t// adjust the sizes to fit if we're setting a stroke on the line\n\t\t\tif (vm.borderWidth) {\n\t\t\t\tleftX += halfStroke;\n\t\t\t\trightX -= halfStroke;\n\t\t\t\ttop += halfStroke;\n\t\t\t}\n\n\t\t\tctx.beginPath();\n\t\t\tctx.fillStyle = vm.backgroundColor;\n\t\t\tctx.strokeStyle = vm.borderColor;\n\t\t\tctx.lineWidth = vm.borderWidth;\n\n\t\t\t// Corner points, from bottom-left to bottom-right clockwise\n\t\t\t// | 1 2 |\n\t\t\t// | 0 3 |\n\t\t\tvar corners = [\n\t\t\t\t[leftX, vm.base],\n\t\t\t\t[leftX, top],\n\t\t\t\t[rightX, top],\n\t\t\t\t[rightX, vm.base]\n\t\t\t];\n\n\t\t\t// Find first (starting) corner with fallback to 'bottom'\n\t\t\tvar borders = ['bottom', 'left', 'top', 'right'];\n\t\t\tvar startCorner = borders.indexOf(vm.borderSkipped, 0);\n\t\t\tif (startCorner === -1) {\n\t\t\t\tstartCorner = 0;\n\t\t\t}\n\n\t\t\tfunction cornerAt(index) {\n\t\t\t\treturn corners[(startCorner + index) % 4];\n\t\t\t}\n\n\t\t\t// Draw rectangle from 'startCorner'\n\t\t\tctx.moveTo.apply(ctx, cornerAt(0));\n\t\t\tfor (var i = 1; i < 4; i++) {\n\t\t\t\tctx.lineTo.apply(ctx, cornerAt(i));\n\t\t\t}\n\n\t\t\tctx.fill();\n\t\t\tif (vm.borderWidth) {\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t},\n\t\theight: function() {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm.base - vm.y;\n\t\t},\n\t\tinRange: function(mouseX, mouseY) {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm ?\n\t\t\t\t\t(vm.y < vm.base ?\n\t\t\t\t\t\t(mouseX >= vm.x - vm.width / 2 && mouseX <= vm.x + vm.width / 2) && (mouseY >= vm.y && mouseY <= vm.base) :\n\t\t\t\t\t\t(mouseX >= vm.x - vm.width / 2 && mouseX <= vm.x + vm.width / 2) && (mouseY >= vm.base && mouseY <= vm.y)) :\n\t\t\t\t\tfalse;\n\t\t},\n\t\tinLabelRange: function(mouseX) {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm ? (mouseX >= vm.x - vm.width / 2 && mouseX <= vm.x + vm.width / 2) : false;\n\t\t},\n\t\ttooltipPosition: function() {\n\t\t\tvar vm = this._view;\n\t\t\treturn {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y\n\t\t\t};\n\t\t}\n\t});\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers,\n\t\tnoop = helpers.noop;\n\n\tChart.LinearScaleBase = Chart.Scale.extend({\n\t\thandleTickRangeOptions: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\n\t\t\t// If we are forcing it to begin at 0, but 0 will already be rendered on the chart,\n\t\t\t// do nothing since that would make the chart weird. If the user really wants a weird chart\n\t\t\t// axis, they can manually override it\n\t\t\tif (tickOpts.beginAtZero) {\n\t\t\t\tvar minSign = helpers.sign(me.min);\n\t\t\t\tvar maxSign = helpers.sign(me.max);\n\n\t\t\t\tif (minSign < 0 && maxSign < 0) {\n\t\t\t\t\t// move the top up to 0\n\t\t\t\t\tme.max = 0;\n\t\t\t\t} else if (minSign > 0 && maxSign > 0) {\n\t\t\t\t\t// move the botttom down to 0\n\t\t\t\t\tme.min = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tickOpts.min !== undefined) {\n\t\t\t\tme.min = tickOpts.min;\n\t\t\t} else if (tickOpts.suggestedMin !== undefined) {\n\t\t\t\tme.min = Math.min(me.min, tickOpts.suggestedMin);\n\t\t\t}\n\n\t\t\tif (tickOpts.max !== undefined) {\n\t\t\t\tme.max = tickOpts.max;\n\t\t\t} else if (tickOpts.suggestedMax !== undefined) {\n\t\t\t\tme.max = Math.max(me.max, tickOpts.suggestedMax);\n\t\t\t}\n\n\t\t\tif (me.min === me.max) {\n\t\t\t\tme.max++;\n\n\t\t\t\tif (!tickOpts.beginAtZero) {\n\t\t\t\t\tme.min--;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetTickLimit: noop,\n\t\thandleDirectionalChanges: noop,\n\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar ticks = me.ticks = [];\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\n\t\t\t// Figure out what the max number of ticks we can support it is based on the size of\n\t\t\t// the axis area. For now, we say that the minimum tick spacing in pixels must be 50\n\t\t\t// We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\n\t\t\t// the graph\n\n\t\t\tvar maxTicks = me.getTickLimit();\n\n\t\t\t// Make sure we always have at least 2 ticks\n\t\t\tmaxTicks = Math.max(2, maxTicks);\n\n\t\t\t// To get a \"nice\" value for the tick spacing, we will use the appropriately named\n\t\t\t// \"nice number\" algorithm. See http://stackoverflow.com/questions/8506881/nice-label-algorithm-for-charts-with-minimum-ticks\n\t\t\t// for details.\n\n\t\t\tvar spacing;\n\t\t\tvar fixedStepSizeSet = (tickOpts.fixedStepSize && tickOpts.fixedStepSize > 0) || (tickOpts.stepSize && tickOpts.stepSize > 0);\n\t\t\tif (fixedStepSizeSet) {\n\t\t\t\tspacing = getValueOrDefault(tickOpts.fixedStepSize, tickOpts.stepSize);\n\t\t\t} else {\n\t\t\t\tvar niceRange = helpers.niceNum(me.max - me.min, false);\n\t\t\t\tspacing = helpers.niceNum(niceRange / (maxTicks - 1), true);\n\t\t\t}\n\t\t\tvar niceMin = Math.floor(me.min / spacing) * spacing;\n\t\t\tvar niceMax = Math.ceil(me.max / spacing) * spacing;\n\t\t\tvar numSpaces = (niceMax - niceMin) / spacing;\n\n\t\t\t// If very close to our rounded value, use it.\n\t\t\tif (helpers.almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n\t\t\t\tnumSpaces = Math.round(numSpaces);\n\t\t\t} else {\n\t\t\t\tnumSpaces = Math.ceil(numSpaces);\n\t\t\t}\n\n\t\t\t// Put the values into the ticks array\n\t\t\tticks.push(tickOpts.min !== undefined ? tickOpts.min : niceMin);\n\t\t\tfor (var j = 1; j < numSpaces; ++j) {\n\t\t\t\tticks.push(niceMin + (j * spacing));\n\t\t\t}\n\t\t\tticks.push(tickOpts.max !== undefined ? tickOpts.max : niceMax);\n\n\t\t\tme.handleDirectionalChanges();\n\n\t\t\t// At this point, we need to update our max and min given the tick values since we have expanded the\n\t\t\t// range of the scale\n\t\t\tme.max = helpers.max(ticks);\n\t\t\tme.min = helpers.min(ticks);\n\n\t\t\tif (tickOpts.reverse) {\n\t\t\t\tticks.reverse();\n\n\t\t\t\tme.start = me.max;\n\t\t\t\tme.end = me.min;\n\t\t\t} else {\n\t\t\t\tme.start = me.min;\n\t\t\t\tme.end = me.max;\n\t\t\t}\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\tme.ticksAsNumbers = me.ticks.slice();\n\t\t\tme.zeroLineIndex = me.ticks.indexOf(0);\n\n\t\t\tChart.Scale.prototype.convertTicksToLabels.call(me);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\t// Default config for a category scale\n\tvar defaultConfig = {\n\t\tposition: 'bottom'\n\t};\n\n\tvar DatasetScale = Chart.Scale.extend({\n\t\t/**\n\t\t* Internal function to get the correct labels. If data.xLabels or data.yLabels are defined, use tose\n\t\t* else fall back to data.labels\n\t\t* @private\n\t\t*/\n\t\tgetLabels: function() {\n\t\t\tvar data = this.chart.data;\n\t\t\treturn (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels;\n\t\t},\n\t\t// Implement this so that\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tvar labels = me.getLabels();\n\t\t\tme.minIndex = 0;\n\t\t\tme.maxIndex = labels.length - 1;\n\t\t\tvar findIndex;\n\n\t\t\tif (me.options.ticks.min !== undefined) {\n\t\t\t\t// user specified min value\n\t\t\t\tfindIndex = helpers.indexOf(labels, me.options.ticks.min);\n\t\t\t\tme.minIndex = findIndex !== -1 ? findIndex : me.minIndex;\n\t\t\t}\n\n\t\t\tif (me.options.ticks.max !== undefined) {\n\t\t\t\t// user specified max value\n\t\t\t\tfindIndex = helpers.indexOf(labels, me.options.ticks.max);\n\t\t\t\tme.maxIndex = findIndex !== -1 ? findIndex : me.maxIndex;\n\t\t\t}\n\n\t\t\tme.min = labels[me.minIndex];\n\t\t\tme.max = labels[me.maxIndex];\n\t\t},\n\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\t\t\tvar labels = me.getLabels();\n\t\t\t// If we are viewing some subset of labels, slice the original array\n\t\t\tme.ticks = (me.minIndex === 0 && me.maxIndex === labels.length - 1) ? labels : labels.slice(me.minIndex, me.maxIndex + 1);\n\t\t},\n\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar data = me.chart.data;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\tif ((data.xLabels && isHorizontal) || (data.yLabels && !isHorizontal)) {\n\t\t\t\treturn me.getRightValue(data.datasets[datasetIndex].data[index]);\n\t\t\t}\n\t\t\treturn me.ticks[index];\n\t\t},\n\n\t\t// Used to get data value locations.  Value can either be an index or a numerical value\n\t\tgetPixelForValue: function(value, index, datasetIndex, includeOffset) {\n\t\t\tvar me = this;\n\t\t\t// 1 is added because we need the length but we have the indexes\n\t\t\tvar offsetAmt = Math.max((me.maxIndex + 1 - me.minIndex - ((me.options.gridLines.offsetGridLines) ? 0 : 1)), 1);\n\n\t\t\tif (value !== undefined && isNaN(index)) {\n\t\t\t\tvar labels = me.getLabels();\n\t\t\t\tvar idx = labels.indexOf(value);\n\t\t\t\tindex = idx !== -1 ? idx : index;\n\t\t\t}\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\tvar valueWidth = innerWidth / offsetAmt;\n\t\t\t\tvar widthOffset = (valueWidth * (index - me.minIndex)) + me.paddingLeft;\n\n\t\t\t\tif (me.options.gridLines.offsetGridLines && includeOffset || me.maxIndex === me.minIndex && includeOffset) {\n\t\t\t\t\twidthOffset += (valueWidth / 2);\n\t\t\t\t}\n\n\t\t\t\treturn me.left + Math.round(widthOffset);\n\t\t\t}\n\t\t\tvar innerHeight = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\tvar valueHeight = innerHeight / offsetAmt;\n\t\t\tvar heightOffset = (valueHeight * (index - me.minIndex)) + me.paddingTop;\n\n\t\t\tif (me.options.gridLines.offsetGridLines && includeOffset) {\n\t\t\t\theightOffset += (valueHeight / 2);\n\t\t\t}\n\n\t\t\treturn me.top + Math.round(heightOffset);\n\t\t},\n\t\tgetPixelForTick: function(index, includeOffset) {\n\t\t\treturn this.getPixelForValue(this.ticks[index], index + this.minIndex, null, includeOffset);\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar value;\n\t\t\tvar offsetAmt = Math.max((me.ticks.length - ((me.options.gridLines.offsetGridLines) ? 0 : 1)), 1);\n\t\t\tvar horz = me.isHorizontal();\n\t\t\tvar innerDimension = horz ? me.width - (me.paddingLeft + me.paddingRight) : me.height - (me.paddingTop + me.paddingBottom);\n\t\t\tvar valueDimension = innerDimension / offsetAmt;\n\n\t\t\tpixel -= horz ? me.left : me.top;\n\n\t\t\tif (me.options.gridLines.offsetGridLines) {\n\t\t\t\tpixel -= (valueDimension / 2);\n\t\t\t}\n\t\t\tpixel -= horz ? me.paddingLeft : me.paddingTop;\n\n\t\t\tif (pixel <= 0) {\n\t\t\t\tvalue = 0;\n\t\t\t} else {\n\t\t\t\tvalue = Math.round(pixel / valueDimension);\n\t\t\t}\n\n\t\t\treturn value;\n\t\t},\n\t\tgetBasePixel: function() {\n\t\t\treturn this.bottom;\n\t\t}\n\t});\n\n\tChart.scaleService.registerScaleType('category', DatasetScale, defaultConfig);\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\t\tposition: 'left',\n\t\tticks: {\n\t\t\tcallback: function(tickValue, index, ticks) {\n\t\t\t\t// If we have lots of ticks, don't use the ones\n\t\t\t\tvar delta = ticks.length > 3 ? ticks[2] - ticks[1] : ticks[1] - ticks[0];\n\n\t\t\t\t// If we have a number like 2.5 as the delta, figure out how many decimal places we need\n\t\t\t\tif (Math.abs(delta) > 1) {\n\t\t\t\t\tif (tickValue !== Math.floor(tickValue)) {\n\t\t\t\t\t\t// not an integer\n\t\t\t\t\t\tdelta = tickValue - Math.floor(tickValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar logDelta = helpers.log10(Math.abs(delta));\n\t\t\t\tvar tickString = '';\n\n\t\t\t\tif (tickValue !== 0) {\n\t\t\t\t\tvar numDecimal = -1 * Math.floor(logDelta);\n\t\t\t\t\tnumDecimal = Math.max(Math.min(numDecimal, 20), 0); // toFixed has a max of 20 decimal places\n\t\t\t\t\ttickString = tickValue.toFixed(numDecimal);\n\t\t\t\t} else {\n\t\t\t\t\ttickString = '0'; // never show decimal places for 0\n\t\t\t\t}\n\n\t\t\t\treturn tickString;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar LinearScale = Chart.LinearScaleBase.extend({\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar chart = me.chart;\n\t\t\tvar data = chart.data;\n\t\t\tvar datasets = data.datasets;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\tfunction IDMatches(meta) {\n\t\t\t\treturn isHorizontal ? meta.xAxisID === me.id : meta.yAxisID === me.id;\n\t\t\t}\n\n\t\t\t// First Calculate the range\n\t\t\tme.min = null;\n\t\t\tme.max = null;\n\n\t\t\tif (opts.stacked) {\n\t\t\t\tvar valuesPerType = {};\n\n\t\t\t\thelpers.each(datasets, function(dataset, datasetIndex) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\t\t\t\t\tif (valuesPerType[meta.type] === undefined) {\n\t\t\t\t\t\tvaluesPerType[meta.type] = {\n\t\t\t\t\t\t\tpositiveValues: [],\n\t\t\t\t\t\t\tnegativeValues: []\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Store these per type\n\t\t\t\t\tvar positiveValues = valuesPerType[meta.type].positiveValues;\n\t\t\t\t\tvar negativeValues = valuesPerType[meta.type].negativeValues;\n\n\t\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\n\t\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpositiveValues[index] = positiveValues[index] || 0;\n\t\t\t\t\t\t\tnegativeValues[index] = negativeValues[index] || 0;\n\n\t\t\t\t\t\t\tif (opts.relativePoints) {\n\t\t\t\t\t\t\t\tpositiveValues[index] = 100;\n\t\t\t\t\t\t\t} else if (value < 0) {\n\t\t\t\t\t\t\t\tnegativeValues[index] += value;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpositiveValues[index] += value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\thelpers.each(valuesPerType, function(valuesForType) {\n\t\t\t\t\tvar values = valuesForType.positiveValues.concat(valuesForType.negativeValues);\n\t\t\t\t\tvar minVal = helpers.min(values);\n\t\t\t\t\tvar maxVal = helpers.max(values);\n\t\t\t\t\tme.min = me.min === null ? minVal : Math.min(me.min, minVal);\n\t\t\t\t\tme.max = me.max === null ? maxVal : Math.max(me.max, maxVal);\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\thelpers.each(datasets, function(dataset, datasetIndex) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\t\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\n\t\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (me.min === null) {\n\t\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t\t} else if (value < me.min) {\n\t\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (me.max === null) {\n\t\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t\t} else if (value > me.max) {\n\t\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\n\t\t\tthis.handleTickRangeOptions();\n\t\t},\n\t\tgetTickLimit: function() {\n\t\t\tvar maxTicks;\n\t\t\tvar me = this;\n\t\t\tvar tickOpts = me.options.ticks;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tmaxTicks = Math.min(tickOpts.maxTicksLimit ? tickOpts.maxTicksLimit : 11, Math.ceil(me.width / 50));\n\t\t\t} else {\n\t\t\t\t// The factor of 2 used to scale the font size has been experimentally determined.\n\t\t\t\tvar tickFontSize = helpers.getValueOrDefault(tickOpts.fontSize, Chart.defaults.global.defaultFontSize);\n\t\t\t\tmaxTicks = Math.min(tickOpts.maxTicksLimit ? tickOpts.maxTicksLimit : 11, Math.ceil(me.height / (2 * tickFontSize)));\n\t\t\t}\n\n\t\t\treturn maxTicks;\n\t\t},\n\t\t// Called after the ticks are built. We need\n\t\thandleDirectionalChanges: function() {\n\t\t\tif (!this.isHorizontal()) {\n\t\t\t\t// We are in a vertical orientation. The top value is the highest. So reverse the array\n\t\t\t\tthis.ticks.reverse();\n\t\t\t}\n\t\t},\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\treturn +this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);\n\t\t},\n\t\t// Utils\n\t\tgetPixelForValue: function(value) {\n\t\t\t// This must be called after fit has been run so that\n\t\t\t// this.left, this.top, this.right, and this.bottom have been defined\n\t\t\tvar me = this;\n\t\t\tvar paddingLeft = me.paddingLeft;\n\t\t\tvar paddingBottom = me.paddingBottom;\n\t\t\tvar start = me.start;\n\n\t\t\tvar rightValue = +me.getRightValue(value);\n\t\t\tvar pixel;\n\t\t\tvar innerDimension;\n\t\t\tvar range = me.end - start;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tinnerDimension = me.width - (paddingLeft + me.paddingRight);\n\t\t\t\tpixel = me.left + (innerDimension / range * (rightValue - start));\n\t\t\t\treturn Math.round(pixel + paddingLeft);\n\t\t\t}\n\t\t\tinnerDimension = me.height - (me.paddingTop + paddingBottom);\n\t\t\tpixel = (me.bottom - paddingBottom) - (innerDimension / range * (rightValue - start));\n\t\t\treturn Math.round(pixel);\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\t\t\tvar paddingLeft = me.paddingLeft;\n\t\t\tvar paddingBottom = me.paddingBottom;\n\t\t\tvar innerDimension = isHorizontal ? me.width - (paddingLeft + me.paddingRight) : me.height - (me.paddingTop + paddingBottom);\n\t\t\tvar offset = (isHorizontal ? pixel - me.left - paddingLeft : me.bottom - paddingBottom - pixel) / innerDimension;\n\t\t\treturn me.start + ((me.end - me.start) * offset);\n\t\t},\n\t\tgetPixelForTick: function(index) {\n\t\t\treturn this.getPixelForValue(this.ticksAsNumbers[index]);\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('linear', LinearScale, defaultConfig);\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\t\tposition: 'left',\n\n\t\t// label settings\n\t\tticks: {\n\t\t\tcallback: function(value, index, arr) {\n\t\t\t\tvar remain = value / (Math.pow(10, Math.floor(helpers.log10(value))));\n\n\t\t\t\tif (value === 0) {\n\t\t\t\t\treturn '0';\n\t\t\t\t} else if (remain === 1 || remain === 2 || remain === 5 || index === 0 || index === arr.length - 1) {\n\t\t\t\t\treturn value.toExponential();\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t};\n\n\tvar LogarithmicScale = Chart.Scale.extend({\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar chart = me.chart;\n\t\t\tvar data = chart.data;\n\t\t\tvar datasets = data.datasets;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\t\t\tfunction IDMatches(meta) {\n\t\t\t\treturn isHorizontal ? meta.xAxisID === me.id : meta.yAxisID === me.id;\n\t\t\t}\n\n\t\t\t// Calculate Range\n\t\t\tme.min = null;\n\t\t\tme.max = null;\n\t\t\tme.minNotZero = null;\n\n\t\t\tif (opts.stacked) {\n\t\t\t\tvar valuesPerType = {};\n\n\t\t\t\thelpers.each(datasets, function(dataset, datasetIndex) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\t\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\n\t\t\t\t\t\tif (valuesPerType[meta.type] === undefined) {\n\t\t\t\t\t\t\tvaluesPerType[meta.type] = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\t\tvar values = valuesPerType[meta.type];\n\t\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvalues[index] = values[index] || 0;\n\n\t\t\t\t\t\t\tif (opts.relativePoints) {\n\t\t\t\t\t\t\t\tvalues[index] = 100;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Don't need to split positive and negative since the log scale can't handle a 0 crossing\n\t\t\t\t\t\t\t\tvalues[index] += value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\thelpers.each(valuesPerType, function(valuesForType) {\n\t\t\t\t\tvar minVal = helpers.min(valuesForType);\n\t\t\t\t\tvar maxVal = helpers.max(valuesForType);\n\t\t\t\t\tme.min = me.min === null ? minVal : Math.min(me.min, minVal);\n\t\t\t\t\tme.max = me.max === null ? maxVal : Math.max(me.max, maxVal);\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\thelpers.each(datasets, function(dataset, datasetIndex) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\t\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\n\t\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (me.min === null) {\n\t\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t\t} else if (value < me.min) {\n\t\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (me.max === null) {\n\t\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t\t} else if (value > me.max) {\n\t\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (value !== 0 && (me.minNotZero === null || value < me.minNotZero)) {\n\t\t\t\t\t\t\t\tme.minNotZero = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tme.min = getValueOrDefault(tickOpts.min, me.min);\n\t\t\tme.max = getValueOrDefault(tickOpts.max, me.max);\n\n\t\t\tif (me.min === me.max) {\n\t\t\t\tif (me.min !== 0 && me.min !== null) {\n\t\t\t\t\tme.min = Math.pow(10, Math.floor(helpers.log10(me.min)) - 1);\n\t\t\t\t\tme.max = Math.pow(10, Math.floor(helpers.log10(me.max)) + 1);\n\t\t\t\t} else {\n\t\t\t\t\tme.min = 1;\n\t\t\t\t\tme.max = 10;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\n\t\t\t// Reset the ticks array. Later on, we will draw a grid line at these positions\n\t\t\t// The array simply contains the numerical value of the spots where ticks will be\n\t\t\tvar ticks = me.ticks = [];\n\n\t\t\t// Figure out what the max number of ticks we can support it is based on the size of\n\t\t\t// the axis area. For now, we say that the minimum tick spacing in pixels must be 50\n\t\t\t// We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\n\t\t\t// the graph\n\n\t\t\tvar tickVal = getValueOrDefault(tickOpts.min, Math.pow(10, Math.floor(helpers.log10(me.min))));\n\n\t\t\twhile (tickVal < me.max) {\n\t\t\t\tticks.push(tickVal);\n\n\t\t\t\tvar exp;\n\t\t\t\tvar significand;\n\n\t\t\t\tif (tickVal === 0) {\n\t\t\t\t\texp = Math.floor(helpers.log10(me.minNotZero));\n\t\t\t\t\tsignificand = Math.round(me.minNotZero / Math.pow(10, exp));\n\t\t\t\t} else {\n\t\t\t\t\texp = Math.floor(helpers.log10(tickVal));\n\t\t\t\t\tsignificand = Math.floor(tickVal / Math.pow(10, exp)) + 1;\n\t\t\t\t}\n\n\t\t\t\tif (significand === 10) {\n\t\t\t\t\tsignificand = 1;\n\t\t\t\t\t++exp;\n\t\t\t\t}\n\n\t\t\t\ttickVal = significand * Math.pow(10, exp);\n\t\t\t}\n\n\t\t\tvar lastTick = getValueOrDefault(tickOpts.max, tickVal);\n\t\t\tticks.push(lastTick);\n\n\t\t\tif (!me.isHorizontal()) {\n\t\t\t\t// We are in a vertical orientation. The top value is the highest. So reverse the array\n\t\t\t\tticks.reverse();\n\t\t\t}\n\n\t\t\t// At this point, we need to update our max and min given the tick values since we have expanded the\n\t\t\t// range of the scale\n\t\t\tme.max = helpers.max(ticks);\n\t\t\tme.min = helpers.min(ticks);\n\n\t\t\tif (tickOpts.reverse) {\n\t\t\t\tticks.reverse();\n\n\t\t\t\tme.start = me.max;\n\t\t\t\tme.end = me.min;\n\t\t\t} else {\n\t\t\t\tme.start = me.min;\n\t\t\t\tme.end = me.max;\n\t\t\t}\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tthis.tickValues = this.ticks.slice();\n\n\t\t\tChart.Scale.prototype.convertTicksToLabels.call(this);\n\t\t},\n\t\t// Get the correct tooltip label\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\treturn +this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);\n\t\t},\n\t\tgetPixelForTick: function(index) {\n\t\t\treturn this.getPixelForValue(this.tickValues[index]);\n\t\t},\n\t\tgetPixelForValue: function(value) {\n\t\t\tvar me = this;\n\t\t\tvar innerDimension;\n\t\t\tvar pixel;\n\n\t\t\tvar start = me.start;\n\t\t\tvar newVal = +me.getRightValue(value);\n\t\t\tvar range;\n\t\t\tvar paddingTop = me.paddingTop;\n\t\t\tvar paddingBottom = me.paddingBottom;\n\t\t\tvar paddingLeft = me.paddingLeft;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\trange = helpers.log10(me.end) - helpers.log10(start); // todo: if start === 0\n\t\t\t\tif (newVal === 0) {\n\t\t\t\t\tpixel = me.left + paddingLeft;\n\t\t\t\t} else {\n\t\t\t\t\tinnerDimension = me.width - (paddingLeft + me.paddingRight);\n\t\t\t\t\tpixel = me.left + (innerDimension / range * (helpers.log10(newVal) - helpers.log10(start)));\n\t\t\t\t\tpixel += paddingLeft;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Bottom - top since pixels increase downard on a screen\n\t\t\t\tinnerDimension = me.height - (paddingTop + paddingBottom);\n\t\t\t\tif (start === 0 && !tickOpts.reverse) {\n\t\t\t\t\trange = helpers.log10(me.end) - helpers.log10(me.minNotZero);\n\t\t\t\t\tif (newVal === start) {\n\t\t\t\t\t\tpixel = me.bottom - paddingBottom;\n\t\t\t\t\t} else if (newVal === me.minNotZero) {\n\t\t\t\t\t\tpixel = me.bottom - paddingBottom - innerDimension * 0.02;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixel = me.bottom - paddingBottom - innerDimension * 0.02 - (innerDimension * 0.98/ range * (helpers.log10(newVal)-helpers.log10(me.minNotZero)));\n\t\t\t\t\t}\n\t\t\t\t} else if (me.end === 0 && tickOpts.reverse) {\n\t\t\t\t\trange = helpers.log10(me.start) - helpers.log10(me.minNotZero);\n\t\t\t\t\tif (newVal === me.end) {\n\t\t\t\t\t\tpixel = me.top + paddingTop;\n\t\t\t\t\t} else if (newVal === me.minNotZero) {\n\t\t\t\t\t\tpixel = me.top + paddingTop + innerDimension * 0.02;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixel = me.top + paddingTop + innerDimension * 0.02 + (innerDimension * 0.98/ range * (helpers.log10(newVal)-helpers.log10(me.minNotZero)));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trange = helpers.log10(me.end) - helpers.log10(start);\n\t\t\t\t\tinnerDimension = me.height - (paddingTop + paddingBottom);\n\t\t\t\t\tpixel = (me.bottom - paddingBottom) - (innerDimension / range * (helpers.log10(newVal) - helpers.log10(start)));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn pixel;\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar range = helpers.log10(me.end) - helpers.log10(me.start);\n\t\t\tvar value, innerDimension;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tinnerDimension = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\tvalue = me.start * Math.pow(10, (pixel - me.left - me.paddingLeft) * range / innerDimension);\n\t\t\t} else {  // todo: if start === 0\n\t\t\t\tinnerDimension = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\t\tvalue = Math.pow(10, (me.bottom - me.paddingBottom - pixel) * range / innerDimension) / me.start;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('logarithmic', LogarithmicScale, defaultConfig);\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar globalDefaults = Chart.defaults.global;\n\n\tvar defaultConfig = {\n\t\tdisplay: true,\n\n\t\t// Boolean - Whether to animate scaling the chart from the centre\n\t\tanimate: true,\n\t\tlineArc: false,\n\t\tposition: 'chartArea',\n\n\t\tangleLines: {\n\t\t\tdisplay: true,\n\t\t\tcolor: 'rgba(0, 0, 0, 0.1)',\n\t\t\tlineWidth: 1\n\t\t},\n\n\t\t// label settings\n\t\tticks: {\n\t\t\t// Boolean - Show a backdrop to the scale label\n\t\t\tshowLabelBackdrop: true,\n\n\t\t\t// String - The colour of the label backdrop\n\t\t\tbackdropColor: 'rgba(255,255,255,0.75)',\n\n\t\t\t// Number - The backdrop padding above & below the label in pixels\n\t\t\tbackdropPaddingY: 2,\n\n\t\t\t// Number - The backdrop padding to the side of the label in pixels\n\t\t\tbackdropPaddingX: 2\n\t\t},\n\n\t\tpointLabels: {\n\t\t\t// Number - Point label font size in pixels\n\t\t\tfontSize: 10,\n\n\t\t\t// Function - Used to convert point labels\n\t\t\tcallback: function(label) {\n\t\t\t\treturn label;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar LinearRadialScale = Chart.LinearScaleBase.extend({\n\t\tgetValueCount: function() {\n\t\t\treturn this.chart.data.labels.length;\n\t\t},\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tme.width = me.maxWidth;\n\t\t\tme.height = me.maxHeight;\n\t\t\tme.xCenter = Math.round(me.width / 2);\n\t\t\tme.yCenter = Math.round(me.height / 2);\n\n\t\t\tvar minSize = helpers.min([me.height, me.width]);\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(tickOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\tme.drawingArea = opts.display ? (minSize / 2) - (tickFontSize / 2 + tickOpts.backdropPaddingY) : (minSize / 2);\n\t\t},\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tme.min = null;\n\t\t\tme.max = null;\n\n\n\t\t\thelpers.each(chart.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (chart.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\n\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (me.min === null) {\n\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t} else if (value < me.min) {\n\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (me.max === null) {\n\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t} else if (value > me.max) {\n\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\n\t\t\tme.handleTickRangeOptions();\n\t\t},\n\t\tgetTickLimit: function() {\n\t\t\tvar tickOpts = this.options.ticks;\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(tickOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\treturn Math.min(tickOpts.maxTicksLimit ? tickOpts.maxTicksLimit : 11, Math.ceil(this.drawingArea / (1.5 * tickFontSize)));\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\tChart.LinearScaleBase.prototype.convertTicksToLabels.call(me);\n\n\t\t\t// Point labels\n\t\t\tme.pointLabels = me.chart.data.labels.map(me.options.pointLabels.callback, me);\n\t\t},\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\treturn +this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);\n\t\t},\n\t\tfit: function() {\n\t\t\t/*\n\t\t\t * Right, this is really confusing and there is a lot of maths going on here\n\t\t\t * The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\n\t\t\t *\n\t\t\t * Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\n\t\t\t *\n\t\t\t * Solution:\n\t\t\t *\n\t\t\t * We assume the radius of the polygon is half the size of the canvas at first\n\t\t\t * at each index we check if the text overlaps.\n\t\t\t *\n\t\t\t * Where it does, we store that angle and that index.\n\t\t\t *\n\t\t\t * After finding the largest index and angle we calculate how much we need to remove\n\t\t\t * from the shape radius to move the point inwards by that x.\n\t\t\t *\n\t\t\t * We average the left and right distances to get the maximum shape radius that can fit in the box\n\t\t\t * along with labels.\n\t\t\t *\n\t\t\t * Once we have that, we can find the centre point for the chart, by taking the x text protrusion\n\t\t\t * on each side, removing that from the size, halving it and adding the left x protrusion width.\n\t\t\t *\n\t\t\t * This will mean we have a shape fitted to the canvas, as large as it can be with the labels\n\t\t\t * and position it in the most space efficient manner\n\t\t\t *\n\t\t\t * https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\n\t\t\t */\n\n\t\t\tvar pointLabels = this.options.pointLabels;\n\t\t\tvar pointLabelFontSize = helpers.getValueOrDefault(pointLabels.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar pointLabeFontStyle = helpers.getValueOrDefault(pointLabels.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar pointLabeFontFamily = helpers.getValueOrDefault(pointLabels.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar pointLabeFont = helpers.fontString(pointLabelFontSize, pointLabeFontStyle, pointLabeFontFamily);\n\n\t\t\t// Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\n\t\t\t// Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\n\t\t\tvar largestPossibleRadius = helpers.min([(this.height / 2 - pointLabelFontSize - 5), this.width / 2]),\n\t\t\t\tpointPosition,\n\t\t\t\ti,\n\t\t\t\ttextWidth,\n\t\t\t\thalfTextWidth,\n\t\t\t\tfurthestRight = this.width,\n\t\t\t\tfurthestRightIndex,\n\t\t\t\tfurthestRightAngle,\n\t\t\t\tfurthestLeft = 0,\n\t\t\t\tfurthestLeftIndex,\n\t\t\t\tfurthestLeftAngle,\n\t\t\t\txProtrusionLeft,\n\t\t\t\txProtrusionRight,\n\t\t\t\tradiusReductionRight,\n\t\t\t\tradiusReductionLeft;\n\t\t\tthis.ctx.font = pointLabeFont;\n\n\t\t\tfor (i = 0; i < this.getValueCount(); i++) {\n\t\t\t\t// 5px to space the text slightly out - similar to what we do in the draw function.\n\t\t\t\tpointPosition = this.getPointPosition(i, largestPossibleRadius);\n\t\t\t\ttextWidth = this.ctx.measureText(this.pointLabels[i] ? this.pointLabels[i] : '').width + 5;\n\n\t\t\t\t// Add quarter circle to make degree 0 mean top of circle\n\t\t\t\tvar angleRadians = this.getIndexAngle(i) + (Math.PI / 2);\n\t\t\t\tvar angle = (angleRadians * 360 / (2 * Math.PI)) % 360;\n\n\t\t\t\tif (angle === 0 || angle === 180) {\n\t\t\t\t\t// At angle 0 and 180, we're at exactly the top/bottom\n\t\t\t\t\t// of the radar chart, so text will be aligned centrally, so we'll half it and compare\n\t\t\t\t\t// w/left and right text sizes\n\t\t\t\t\thalfTextWidth = textWidth / 2;\n\t\t\t\t\tif (pointPosition.x + halfTextWidth > furthestRight) {\n\t\t\t\t\t\tfurthestRight = pointPosition.x + halfTextWidth;\n\t\t\t\t\t\tfurthestRightIndex = i;\n\t\t\t\t\t}\n\t\t\t\t\tif (pointPosition.x - halfTextWidth < furthestLeft) {\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - halfTextWidth;\n\t\t\t\t\t\tfurthestLeftIndex = i;\n\t\t\t\t\t}\n\t\t\t\t} else if (angle < 180) {\n\t\t\t\t\t// Less than half the values means we'll left align the text\n\t\t\t\t\tif (pointPosition.x + textWidth > furthestRight) {\n\t\t\t\t\t\tfurthestRight = pointPosition.x + textWidth;\n\t\t\t\t\t\tfurthestRightIndex = i;\n\t\t\t\t\t}\n\t\t\t\t// More than half the values means we'll right align the text\n\t\t\t\t} else if (pointPosition.x - textWidth < furthestLeft) {\n\t\t\t\t\tfurthestLeft = pointPosition.x - textWidth;\n\t\t\t\t\tfurthestLeftIndex = i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txProtrusionLeft = furthestLeft;\n\t\t\txProtrusionRight = Math.ceil(furthestRight - this.width);\n\n\t\t\tfurthestRightAngle = this.getIndexAngle(furthestRightIndex);\n\t\t\tfurthestLeftAngle = this.getIndexAngle(furthestLeftIndex);\n\n\t\t\tradiusReductionRight = xProtrusionRight / Math.sin(furthestRightAngle + Math.PI / 2);\n\t\t\tradiusReductionLeft = xProtrusionLeft / Math.sin(furthestLeftAngle + Math.PI / 2);\n\n\t\t\t// Ensure we actually need to reduce the size of the chart\n\t\t\tradiusReductionRight = (helpers.isNumber(radiusReductionRight)) ? radiusReductionRight : 0;\n\t\t\tradiusReductionLeft = (helpers.isNumber(radiusReductionLeft)) ? radiusReductionLeft : 0;\n\n\t\t\tthis.drawingArea = Math.round(largestPossibleRadius - (radiusReductionLeft + radiusReductionRight) / 2);\n\t\t\tthis.setCenterPoint(radiusReductionLeft, radiusReductionRight);\n\t\t},\n\t\tsetCenterPoint: function(leftMovement, rightMovement) {\n\t\t\tvar me = this;\n\t\t\tvar maxRight = me.width - rightMovement - me.drawingArea,\n\t\t\t\tmaxLeft = leftMovement + me.drawingArea;\n\n\t\t\tme.xCenter = Math.round(((maxLeft + maxRight) / 2) + me.left);\n\t\t\t// Always vertically in the centre as the text height doesn't change\n\t\t\tme.yCenter = Math.round((me.height / 2) + me.top);\n\t\t},\n\n\t\tgetIndexAngle: function(index) {\n\t\t\tvar angleMultiplier = (Math.PI * 2) / this.getValueCount();\n\t\t\tvar startAngle = this.chart.options && this.chart.options.startAngle ?\n\t\t\t\tthis.chart.options.startAngle :\n\t\t\t\t0;\n\n\t\t\tvar startAngleRadians = startAngle * Math.PI * 2 / 360;\n\n\t\t\t// Start from the top instead of right, so remove a quarter of the circle\n\t\t\treturn index * angleMultiplier - (Math.PI / 2) + startAngleRadians;\n\t\t},\n\t\tgetDistanceFromCenterForValue: function(value) {\n\t\t\tvar me = this;\n\n\t\t\tif (value === null) {\n\t\t\t\treturn 0; // null always in center\n\t\t\t}\n\n\t\t\t// Take into account half font size + the yPadding of the top value\n\t\t\tvar scalingFactor = me.drawingArea / (me.max - me.min);\n\t\t\tif (me.options.reverse) {\n\t\t\t\treturn (me.max - value) * scalingFactor;\n\t\t\t}\n\t\t\treturn (value - me.min) * scalingFactor;\n\t\t},\n\t\tgetPointPosition: function(index, distanceFromCenter) {\n\t\t\tvar me = this;\n\t\t\tvar thisAngle = me.getIndexAngle(index);\n\t\t\treturn {\n\t\t\t\tx: Math.round(Math.cos(thisAngle) * distanceFromCenter) + me.xCenter,\n\t\t\t\ty: Math.round(Math.sin(thisAngle) * distanceFromCenter) + me.yCenter\n\t\t\t};\n\t\t},\n\t\tgetPointPositionForValue: function(index, value) {\n\t\t\treturn this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n\t\t},\n\n\t\tgetBasePosition: function() {\n\t\t\tvar me = this;\n\t\t\tvar min = me.min;\n\t\t\tvar max = me.max;\n\n\t\t\treturn me.getPointPositionForValue(0,\n\t\t\t\tme.beginAtZero? 0:\n\t\t\t\tmin < 0 && max < 0? max :\n\t\t\t\tmin > 0 && max > 0? min :\n\t\t\t\t0);\n\t\t},\n\n\t\tdraw: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar gridLineOpts = opts.gridLines;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar angleLineOpts = opts.angleLines;\n\t\t\tvar pointLabelOpts = opts.pointLabels;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\n\t\t\tif (opts.display) {\n\t\t\t\tvar ctx = me.ctx;\n\n\t\t\t\t// Tick Font\n\t\t\t\tvar tickFontSize = getValueOrDefault(tickOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\t\tvar tickFontStyle = getValueOrDefault(tickOpts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\t\tvar tickFontFamily = getValueOrDefault(tickOpts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\n\t\t\t\thelpers.each(me.ticks, function(label, index) {\n\t\t\t\t\t// Don't draw a centre value (if it is minimum)\n\t\t\t\t\tif (index > 0 || opts.reverse) {\n\t\t\t\t\t\tvar yCenterOffset = me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]);\n\t\t\t\t\t\tvar yHeight = me.yCenter - yCenterOffset;\n\n\t\t\t\t\t\t// Draw circular lines around the scale\n\t\t\t\t\t\tif (gridLineOpts.display && index !== 0) {\n\t\t\t\t\t\t\tctx.strokeStyle = helpers.getValueAtIndexOrDefault(gridLineOpts.color, index - 1);\n\t\t\t\t\t\t\tctx.lineWidth = helpers.getValueAtIndexOrDefault(gridLineOpts.lineWidth, index - 1);\n\n\t\t\t\t\t\t\tif (opts.lineArc) {\n\t\t\t\t\t\t\t\t// Draw circular arcs between the points\n\t\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\tctx.arc(me.xCenter, me.yCenter, yCenterOffset, 0, Math.PI * 2);\n\t\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Draw straight lines connecting each index\n\t\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\tfor (var i = 0; i < me.getValueCount(); i++) {\n\t\t\t\t\t\t\t\t\tvar pointPosition = me.getPointPosition(i, yCenterOffset);\n\t\t\t\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\t\t\t\tctx.moveTo(pointPosition.x, pointPosition.y);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tctx.lineTo(pointPosition.x, pointPosition.y);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (tickOpts.display) {\n\t\t\t\t\t\t\tvar tickFontColor = getValueOrDefault(tickOpts.fontColor, globalDefaults.defaultFontColor);\n\t\t\t\t\t\t\tctx.font = tickLabelFont;\n\n\t\t\t\t\t\t\tif (tickOpts.showLabelBackdrop) {\n\t\t\t\t\t\t\t\tvar labelWidth = ctx.measureText(label).width;\n\t\t\t\t\t\t\t\tctx.fillStyle = tickOpts.backdropColor;\n\t\t\t\t\t\t\t\tctx.fillRect(\n\t\t\t\t\t\t\t\t\tme.xCenter - labelWidth / 2 - tickOpts.backdropPaddingX,\n\t\t\t\t\t\t\t\t\tyHeight - tickFontSize / 2 - tickOpts.backdropPaddingY,\n\t\t\t\t\t\t\t\t\tlabelWidth + tickOpts.backdropPaddingX * 2,\n\t\t\t\t\t\t\t\t\ttickFontSize + tickOpts.backdropPaddingY * 2\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\t\t\t\tctx.fillStyle = tickFontColor;\n\t\t\t\t\t\t\tctx.fillText(label, me.xCenter, yHeight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!opts.lineArc) {\n\t\t\t\t\tctx.lineWidth = angleLineOpts.lineWidth;\n\t\t\t\t\tctx.strokeStyle = angleLineOpts.color;\n\n\t\t\t\t\tvar outerDistance = me.getDistanceFromCenterForValue(opts.reverse ? me.min : me.max);\n\n\t\t\t\t\t// Point Label Font\n\t\t\t\t\tvar pointLabelFontSize = getValueOrDefault(pointLabelOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\t\t\tvar pointLabeFontStyle = getValueOrDefault(pointLabelOpts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\t\t\tvar pointLabeFontFamily = getValueOrDefault(pointLabelOpts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\t\t\tvar pointLabeFont = helpers.fontString(pointLabelFontSize, pointLabeFontStyle, pointLabeFontFamily);\n\n\t\t\t\t\tfor (var i = me.getValueCount() - 1; i >= 0; i--) {\n\t\t\t\t\t\tif (angleLineOpts.display) {\n\t\t\t\t\t\t\tvar outerPosition = me.getPointPosition(i, outerDistance);\n\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\tctx.moveTo(me.xCenter, me.yCenter);\n\t\t\t\t\t\t\tctx.lineTo(outerPosition.x, outerPosition.y);\n\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Extra 3px out for some label spacing\n\t\t\t\t\t\tvar pointLabelPosition = me.getPointPosition(i, outerDistance + 5);\n\n\t\t\t\t\t\t// Keep this in loop since we may support array properties here\n\t\t\t\t\t\tvar pointLabelFontColor = getValueOrDefault(pointLabelOpts.fontColor, globalDefaults.defaultFontColor);\n\t\t\t\t\t\tctx.font = pointLabeFont;\n\t\t\t\t\t\tctx.fillStyle = pointLabelFontColor;\n\n\t\t\t\t\t\tvar pointLabels = me.pointLabels;\n\n\t\t\t\t\t\t// Add quarter circle to make degree 0 mean top of circle\n\t\t\t\t\t\tvar angleRadians = this.getIndexAngle(i) + (Math.PI / 2);\n\t\t\t\t\t\tvar angle = (angleRadians * 360 / (2 * Math.PI)) % 360;\n\n\t\t\t\t\t\tif (angle === 0 || angle === 180) {\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t} else if (angle < 180) {\n\t\t\t\t\t\t\tctx.textAlign = 'left';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.textAlign = 'right';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set the correct text baseline based on outer positioning\n\t\t\t\t\t\tif (angle === 90 || angle === 270) {\n\t\t\t\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\t\t\t} else if (angle > 270 || angle < 90) {\n\t\t\t\t\t\t\tctx.textBaseline = 'bottom';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.textBaseline = 'top';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tctx.fillText(pointLabels[i] ? pointLabels[i] : '', pointLabelPosition.x, pointLabelPosition.y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('radialLinear', LinearRadialScale, defaultConfig);\n\n};\n","/* global window: false */\n'use strict';\n\nvar moment = require('moment');\nmoment = typeof(moment) === 'function' ? moment : window.moment;\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar time = {\n\t\tunits: [{\n\t\t\tname: 'millisecond',\n\t\t\tsteps: [1, 2, 5, 10, 20, 50, 100, 250, 500]\n\t\t}, {\n\t\t\tname: 'second',\n\t\t\tsteps: [1, 2, 5, 10, 30]\n\t\t}, {\n\t\t\tname: 'minute',\n\t\t\tsteps: [1, 2, 5, 10, 30]\n\t\t}, {\n\t\t\tname: 'hour',\n\t\t\tsteps: [1, 2, 3, 6, 12]\n\t\t}, {\n\t\t\tname: 'day',\n\t\t\tsteps: [1, 2, 5]\n\t\t}, {\n\t\t\tname: 'week',\n\t\t\tmaxStep: 4\n\t\t}, {\n\t\t\tname: 'month',\n\t\t\tmaxStep: 3\n\t\t}, {\n\t\t\tname: 'quarter',\n\t\t\tmaxStep: 4\n\t\t}, {\n\t\t\tname: 'year',\n\t\t\tmaxStep: false\n\t\t}]\n\t};\n\n\tvar defaultConfig = {\n\t\tposition: 'bottom',\n\n\t\ttime: {\n\t\t\tparser: false, // false == a pattern string from http://momentjs.com/docs/#/parsing/string-format/ or a custom callback that converts its argument to a moment\n\t\t\tformat: false, // DEPRECATED false == date objects, moment object, callback or a pattern string from http://momentjs.com/docs/#/parsing/string-format/\n\t\t\tunit: false, // false == automatic or override with week, month, year, etc.\n\t\t\tround: false, // none, or override with week, month, year, etc.\n\t\t\tdisplayFormat: false, // DEPRECATED\n\t\t\tisoWeekday: false, // override week start day - see http://momentjs.com/docs/#/get-set/iso-weekday/\n\t\t\tminUnit: 'millisecond',\n\n\t\t\t// defaults to unit's corresponding unitFormat below or override using pattern string from http://momentjs.com/docs/#/displaying/format/\n\t\t\tdisplayFormats: {\n\t\t\t\tmillisecond: 'h:mm:ss.SSS a', // 11:20:01.123 AM,\n\t\t\t\tsecond: 'h:mm:ss a', // 11:20:01 AM\n\t\t\t\tminute: 'h:mm:ss a', // 11:20:01 AM\n\t\t\t\thour: 'MMM D, hA', // Sept 4, 5PM\n\t\t\t\tday: 'll', // Sep 4 2015\n\t\t\t\tweek: 'll', // Week 46, or maybe \"[W]WW - YYYY\" ?\n\t\t\t\tmonth: 'MMM YYYY', // Sept 2015\n\t\t\t\tquarter: '[Q]Q - YYYY', // Q3\n\t\t\t\tyear: 'YYYY' // 2015\n\t\t\t}\n\t\t},\n\t\tticks: {\n\t\t\tautoSkip: false\n\t\t}\n\t};\n\n\tvar TimeScale = Chart.Scale.extend({\n\t\tinitialize: function() {\n\t\t\tif (!moment) {\n\t\t\t\tthrow new Error('Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com');\n\t\t\t}\n\n\t\t\tChart.Scale.prototype.initialize.call(this);\n\t\t},\n\t\tgetLabelMoment: function(datasetIndex, index) {\n\t\t\tif (datasetIndex === null || index === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (typeof this.labelMoments[datasetIndex] !== 'undefined') {\n\t\t\t\treturn this.labelMoments[datasetIndex][index];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetLabelDiff: function(datasetIndex, index) {\n\t\t\tvar me = this;\n\t\t\tif (datasetIndex === null || index === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (me.labelDiffs === undefined) {\n\t\t\t\tme.buildLabelDiffs();\n\t\t\t}\n\n\t\t\tif (typeof me.labelDiffs[datasetIndex] !== 'undefined') {\n\t\t\t\treturn me.labelDiffs[datasetIndex][index];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetMomentStartOf: function(tick) {\n\t\t\tvar me = this;\n\t\t\tif (me.options.time.unit === 'week' && me.options.time.isoWeekday !== false) {\n\t\t\t\treturn tick.clone().startOf('isoWeek').isoWeekday(me.options.time.isoWeekday);\n\t\t\t}\n\t\t\treturn tick.clone().startOf(me.tickUnit);\n\t\t},\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tme.labelMoments = [];\n\n\t\t\t// Only parse these once. If the dataset does not have data as x,y pairs, we will use\n\t\t\t// these\n\t\t\tvar scaleLabelMoments = [];\n\t\t\tif (me.chart.data.labels && me.chart.data.labels.length > 0) {\n\t\t\t\thelpers.each(me.chart.data.labels, function(label) {\n\t\t\t\t\tvar labelMoment = me.parseTime(label);\n\n\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscaleLabelMoments.push(labelMoment);\n\t\t\t\t\t}\n\t\t\t\t}, me);\n\n\t\t\t\tme.firstTick = moment.min.call(me, scaleLabelMoments);\n\t\t\t\tme.lastTick = moment.max.call(me, scaleLabelMoments);\n\t\t\t} else {\n\t\t\t\tme.firstTick = null;\n\t\t\t\tme.lastTick = null;\n\t\t\t}\n\n\t\t\thelpers.each(me.chart.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tvar momentsForDataset = [];\n\t\t\t\tvar datasetVisible = me.chart.isDatasetVisible(datasetIndex);\n\n\t\t\t\tif (typeof dataset.data[0] === 'object' && dataset.data[0] !== null) {\n\t\t\t\t\thelpers.each(dataset.data, function(value) {\n\t\t\t\t\t\tvar labelMoment = me.parseTime(me.getRightValue(value));\n\n\t\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmomentsForDataset.push(labelMoment);\n\n\t\t\t\t\t\t\tif (datasetVisible) {\n\t\t\t\t\t\t\t\t// May have gone outside the scale ranges, make sure we keep the first and last ticks updated\n\t\t\t\t\t\t\t\tme.firstTick = me.firstTick !== null ? moment.min(me.firstTick, labelMoment) : labelMoment;\n\t\t\t\t\t\t\t\tme.lastTick = me.lastTick !== null ? moment.max(me.lastTick, labelMoment) : labelMoment;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, me);\n\t\t\t\t} else {\n\t\t\t\t\t// We have no labels. Use the ones from the scale\n\t\t\t\t\tmomentsForDataset = scaleLabelMoments;\n\t\t\t\t}\n\n\t\t\t\tme.labelMoments.push(momentsForDataset);\n\t\t\t}, me);\n\n\t\t\t// Set these after we've done all the data\n\t\t\tif (me.options.time.min) {\n\t\t\t\tme.firstTick = me.parseTime(me.options.time.min);\n\t\t\t}\n\n\t\t\tif (me.options.time.max) {\n\t\t\t\tme.lastTick = me.parseTime(me.options.time.max);\n\t\t\t}\n\n\t\t\t// We will modify these, so clone for later\n\t\t\tme.firstTick = (me.firstTick || moment()).clone();\n\t\t\tme.lastTick = (me.lastTick || moment()).clone();\n\t\t},\n\t\tbuildLabelDiffs: function() {\n\t\t\tvar me = this;\n\t\t\tme.labelDiffs = [];\n\t\t\tvar scaleLabelDiffs = [];\n\t\t\t// Parse common labels once\n\t\t\tif (me.chart.data.labels && me.chart.data.labels.length > 0) {\n\t\t\t\thelpers.each(me.chart.data.labels, function(label) {\n\t\t\t\t\tvar labelMoment = me.parseTime(label);\n\n\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscaleLabelDiffs.push(labelMoment.diff(me.firstTick, me.tickUnit, true));\n\t\t\t\t\t}\n\t\t\t\t}, me);\n\t\t\t}\n\n\t\t\thelpers.each(me.chart.data.datasets, function(dataset) {\n\t\t\t\tvar diffsForDataset = [];\n\n\t\t\t\tif (typeof dataset.data[0] === 'object' && dataset.data[0] !== null) {\n\t\t\t\t\thelpers.each(dataset.data, function(value) {\n\t\t\t\t\t\tvar labelMoment = me.parseTime(me.getRightValue(value));\n\n\t\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdiffsForDataset.push(labelMoment.diff(me.firstTick, me.tickUnit, true));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, me);\n\t\t\t\t} else {\n\t\t\t\t\t// We have no labels. Use common ones\n\t\t\t\t\tdiffsForDataset = scaleLabelDiffs;\n\t\t\t\t}\n\n\t\t\t\tme.labelDiffs.push(diffsForDataset);\n\t\t\t}, me);\n\t\t},\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\n\t\t\tme.ctx.save();\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(me.options.ticks.fontSize, Chart.defaults.global.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(me.options.ticks.fontStyle, Chart.defaults.global.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(me.options.ticks.fontFamily, Chart.defaults.global.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\t\t\tme.ctx.font = tickLabelFont;\n\n\t\t\tme.ticks = [];\n\t\t\tme.unitScale = 1; // How much we scale the unit by, ie 2 means 2x unit per step\n\t\t\tme.scaleSizeInUnits = 0; // How large the scale is in the base unit (seconds, minutes, etc)\n\n\t\t\t// Set unit override if applicable\n\t\t\tif (me.options.time.unit) {\n\t\t\t\tme.tickUnit = me.options.time.unit || 'day';\n\t\t\t\tme.displayFormat = me.options.time.displayFormats[me.tickUnit];\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, 1);\n\t\t\t} else {\n\t\t\t\t// Determine the smallest needed unit of the time\n\t\t\t\tvar innerWidth = me.isHorizontal() ? me.width - (me.paddingLeft + me.paddingRight) : me.height - (me.paddingTop + me.paddingBottom);\n\n\t\t\t\t// Crude approximation of what the label length might be\n\t\t\t\tvar tempFirstLabel = me.tickFormatFunction(me.firstTick, 0, []);\n\t\t\t\tvar tickLabelWidth = me.ctx.measureText(tempFirstLabel).width;\n\t\t\t\tvar cosRotation = Math.cos(helpers.toRadians(me.options.ticks.maxRotation));\n\t\t\t\tvar sinRotation = Math.sin(helpers.toRadians(me.options.ticks.maxRotation));\n\t\t\t\ttickLabelWidth = (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation);\n\t\t\t\tvar labelCapacity = innerWidth / (tickLabelWidth);\n\n\t\t\t\t// Start as small as possible\n\t\t\t\tme.tickUnit = me.options.time.minUnit;\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\tme.displayFormat = me.options.time.displayFormats[me.tickUnit];\n\n\t\t\t\tvar unitDefinitionIndex = 0;\n\t\t\t\tvar unitDefinition = time.units[unitDefinitionIndex];\n\n\t\t\t\t// While we aren't ideal and we don't have units left\n\t\t\t\twhile (unitDefinitionIndex < time.units.length) {\n\t\t\t\t\t// Can we scale this unit. If `false` we can scale infinitely\n\t\t\t\t\tme.unitScale = 1;\n\n\t\t\t\t\tif (helpers.isArray(unitDefinition.steps) && Math.ceil(me.scaleSizeInUnits / labelCapacity) < helpers.max(unitDefinition.steps)) {\n\t\t\t\t\t\t// Use one of the prefedined steps\n\t\t\t\t\t\tfor (var idx = 0; idx < unitDefinition.steps.length; ++idx) {\n\t\t\t\t\t\t\tif (unitDefinition.steps[idx] >= Math.ceil(me.scaleSizeInUnits / labelCapacity)) {\n\t\t\t\t\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, unitDefinition.steps[idx]);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if ((unitDefinition.maxStep === false) || (Math.ceil(me.scaleSizeInUnits / labelCapacity) < unitDefinition.maxStep)) {\n\t\t\t\t\t\t// We have a max step. Scale this unit\n\t\t\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, Math.ceil(me.scaleSizeInUnits / labelCapacity));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Move to the next unit up\n\t\t\t\t\t\t++unitDefinitionIndex;\n\t\t\t\t\t\tunitDefinition = time.units[unitDefinitionIndex];\n\n\t\t\t\t\t\tme.tickUnit = unitDefinition.name;\n\t\t\t\t\t\tvar leadingUnitBuffer = me.firstTick.diff(me.getMomentStartOf(me.firstTick), me.tickUnit, true);\n\t\t\t\t\t\tvar trailingUnitBuffer = me.getMomentStartOf(me.lastTick.clone().add(1, me.tickUnit)).diff(me.lastTick, me.tickUnit, true);\n\t\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true) + leadingUnitBuffer + trailingUnitBuffer;\n\t\t\t\t\t\tme.displayFormat = me.options.time.displayFormats[unitDefinition.name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar roundedStart;\n\n\t\t\t// Only round the first tick if we have no hard minimum\n\t\t\tif (!me.options.time.min) {\n\t\t\t\tme.firstTick = me.getMomentStartOf(me.firstTick);\n\t\t\t\troundedStart = me.firstTick;\n\t\t\t} else {\n\t\t\t\troundedStart = me.getMomentStartOf(me.firstTick);\n\t\t\t}\n\n\t\t\t// Only round the last tick if we have no hard maximum\n\t\t\tif (!me.options.time.max) {\n\t\t\t\tvar roundedEnd = me.getMomentStartOf(me.lastTick);\n\t\t\t\tvar delta = roundedEnd.diff(me.lastTick, me.tickUnit, true);\n\t\t\t\tif (delta < 0) {\n\t\t\t\t\t// Do not use end of because we need me to be in the next time unit\n\t\t\t\t\tme.lastTick = me.getMomentStartOf(me.lastTick.add(1, me.tickUnit));\n\t\t\t\t} else if (delta >= 0) {\n\t\t\t\t\tme.lastTick = roundedEnd;\n\t\t\t\t}\n\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t}\n\n\t\t\t// Tick displayFormat override\n\t\t\tif (me.options.time.displayFormat) {\n\t\t\t\tme.displayFormat = me.options.time.displayFormat;\n\t\t\t}\n\n\t\t\t// first tick. will have been rounded correctly if options.time.min is not specified\n\t\t\tme.ticks.push(me.firstTick.clone());\n\n\t\t\t// For every unit in between the first and last moment, create a moment and add it to the ticks tick\n\t\t\tfor (var i = 1; i <= me.scaleSizeInUnits; ++i) {\n\t\t\t\tvar newTick = roundedStart.clone().add(i, me.tickUnit);\n\n\t\t\t\t// Are we greater than the max time\n\t\t\t\tif (me.options.time.max && newTick.diff(me.lastTick, me.tickUnit, true) >= 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (i % me.unitScale === 0) {\n\t\t\t\t\tme.ticks.push(newTick);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Always show the right tick\n\t\t\tvar diff = me.ticks[me.ticks.length - 1].diff(me.lastTick, me.tickUnit);\n\t\t\tif (diff !== 0 || me.scaleSizeInUnits === 0) {\n\t\t\t\t// this is a weird case. If the <max> option is the same as the end option, we can't just diff the times because the tick was created from the roundedStart\n\t\t\t\t// but the last tick was not rounded.\n\t\t\t\tif (me.options.time.max) {\n\t\t\t\t\tme.ticks.push(me.lastTick.clone());\n\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.ticks[0], me.tickUnit, true);\n\t\t\t\t} else {\n\t\t\t\t\tme.ticks.push(me.lastTick.clone());\n\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.ctx.restore();\n\n\t\t\t// Invalidate label diffs cache\n\t\t\tme.labelDiffs = undefined;\n\t\t},\n\t\t// Get tooltip label\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar label = me.chart.data.labels && index < me.chart.data.labels.length ? me.chart.data.labels[index] : '';\n\n\t\t\tif (typeof me.chart.data.datasets[datasetIndex].data[0] === 'object') {\n\t\t\t\tlabel = me.getRightValue(me.chart.data.datasets[datasetIndex].data[index]);\n\t\t\t}\n\n\t\t\t// Format nicely\n\t\t\tif (me.options.time.tooltipFormat) {\n\t\t\t\tlabel = me.parseTime(label).format(me.options.time.tooltipFormat);\n\t\t\t}\n\n\t\t\treturn label;\n\t\t},\n\t\t// Function to format an individual tick mark\n\t\ttickFormatFunction: function(tick, index, ticks) {\n\t\t\tvar formattedTick = tick.format(this.displayFormat);\n\t\t\tvar tickOpts = this.options.ticks;\n\t\t\tvar callback = helpers.getValueOrDefault(tickOpts.callback, tickOpts.userCallback);\n\n\t\t\tif (callback) {\n\t\t\t\treturn callback(formattedTick, index, ticks);\n\t\t\t}\n\t\t\treturn formattedTick;\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\tme.tickMoments = me.ticks;\n\t\t\tme.ticks = me.ticks.map(me.tickFormatFunction, me);\n\t\t},\n\t\tgetPixelForValue: function(value, index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar offset = null;\n\t\t\tif (index !== undefined && datasetIndex !== undefined) {\n\t\t\t\toffset = me.getLabelDiff(datasetIndex, index);\n\t\t\t}\n\n\t\t\tif (offset === null) {\n\t\t\t\tif (!value || !value.isValid) {\n\t\t\t\t\t// not already a moment object\n\t\t\t\t\tvalue = me.parseTime(me.getRightValue(value));\n\t\t\t\t}\n\t\t\t\tif (value && value.isValid && value.isValid()) {\n\t\t\t\t\toffset = value.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (offset !== null) {\n\t\t\t\tvar decimal = offset !== 0 ? offset / me.scaleSizeInUnits : offset;\n\n\t\t\t\tif (me.isHorizontal()) {\n\t\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\t\tvar valueOffset = (innerWidth * decimal) + me.paddingLeft;\n\n\t\t\t\t\treturn me.left + Math.round(valueOffset);\n\t\t\t\t}\n\t\t\t\tvar innerHeight = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\t\tvar heightOffset = (innerHeight * decimal) + me.paddingTop;\n\n\t\t\t\treturn me.top + Math.round(heightOffset);\n\t\t\t}\n\t\t},\n\t\tgetPixelForTick: function(index) {\n\t\t\treturn this.getPixelForValue(this.tickMoments[index], null, null);\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar innerDimension = me.isHorizontal() ? me.width - (me.paddingLeft + me.paddingRight) : me.height - (me.paddingTop + me.paddingBottom);\n\t\t\tvar offset = (pixel - (me.isHorizontal() ? me.left + me.paddingLeft : me.top + me.paddingTop)) / innerDimension;\n\t\t\toffset *= me.scaleSizeInUnits;\n\t\t\treturn me.firstTick.clone().add(moment.duration(offset, me.tickUnit).asSeconds(), 'seconds');\n\t\t},\n\t\tparseTime: function(label) {\n\t\t\tvar me = this;\n\t\t\tif (typeof me.options.time.parser === 'string') {\n\t\t\t\treturn moment(label, me.options.time.parser);\n\t\t\t}\n\t\t\tif (typeof me.options.time.parser === 'function') {\n\t\t\t\treturn me.options.time.parser(label);\n\t\t\t}\n\t\t\t// Date objects\n\t\t\tif (typeof label.getMonth === 'function' || typeof label === 'number') {\n\t\t\t\treturn moment(label);\n\t\t\t}\n\t\t\t// Moment support\n\t\t\tif (label.isValid && label.isValid()) {\n\t\t\t\treturn label;\n\t\t\t}\n\t\t\t// Custom parsing (return an instance of moment)\n\t\t\tif (typeof me.options.time.format !== 'string' && me.options.time.format.call) {\n\t\t\t\tconsole.warn('options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale');\n\t\t\t\treturn me.options.time.format(label);\n\t\t\t}\n\t\t\t// Moment format parsing\n\t\t\treturn moment(label, me.options.time.format);\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('time', TimeScale, defaultConfig);\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.bar = {\n\t\thover: {\n\t\t\tmode: 'label'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'category',\n\n\t\t\t\t// Specific to Bar Controller\n\t\t\t\tcategoryPercentage: 0.8,\n\t\t\t\tbarPercentage: 0.9,\n\n\t\t\t\t// grid line settings\n\t\t\t\tgridLines: {\n\t\t\t\t\toffsetGridLines: true\n\t\t\t\t}\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear'\n\t\t\t}]\n\t\t}\n\t};\n\n\tChart.controllers.bar = Chart.DatasetController.extend({\n\n\t\tdataElementType: Chart.elements.Rectangle,\n\n\t\tinitialize: function(chart, datasetIndex) {\n\t\t\tChart.DatasetController.prototype.initialize.call(this, chart, datasetIndex);\n\n\t\t\t// Use this to indicate that this is a bar dataset.\n\t\t\tthis.getMeta().bar = true;\n\t\t},\n\n\t\t// Get the number of datasets that display bars. We use this to correctly calculate the bar width\n\t\tgetBarCount: function() {\n\t\t\tvar me = this;\n\t\t\tvar barCount = 0;\n\t\t\thelpers.each(me.chart.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tvar meta = me.chart.getDatasetMeta(datasetIndex);\n\t\t\t\tif (meta.bar && me.chart.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\t++barCount;\n\t\t\t\t}\n\t\t\t}, me);\n\t\t\treturn barCount;\n\t\t},\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\thelpers.each(me.getMeta().data, function(rectangle, index) {\n\t\t\t\tme.updateElement(rectangle, index, reset);\n\t\t\t}, me);\n\t\t},\n\n\t\tupdateElement: function(rectangle, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar scaleBase = yScale.getBasePixel();\n\t\t\tvar rectangleElementOptions = me.chart.options.elements.rectangle;\n\t\t\tvar custom = rectangle.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\n\t\t\thelpers.extend(rectangle, {\n\t\t\t\t// Utility\n\t\t\t\t_xScale: xScale,\n\t\t\t\t_yScale: yScale,\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: me.calculateBarX(index, me.index),\n\t\t\t\t\ty: reset ? scaleBase : me.calculateBarY(index, me.index),\n\n\t\t\t\t\t// Tooltip\n\t\t\t\t\tlabel: me.chart.data.labels[index],\n\t\t\t\t\tdatasetLabel: dataset.label,\n\n\t\t\t\t\t// Appearance\n\t\t\t\t\tbase: reset ? scaleBase : me.calculateBarBase(me.index, index),\n\t\t\t\t\twidth: me.calculateBarWidth(index),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.backgroundColor, index, rectangleElementOptions.backgroundColor),\n\t\t\t\t\tborderSkipped: custom.borderSkipped ? custom.borderSkipped : rectangleElementOptions.borderSkipped,\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.borderColor, index, rectangleElementOptions.borderColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.borderWidth, index, rectangleElementOptions.borderWidth)\n\t\t\t\t}\n\t\t\t});\n\t\t\trectangle.pivot();\n\t\t},\n\n\t\tcalculateBarBase: function(datasetIndex, index) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar base = 0;\n\n\t\t\tif (yScale.options.stacked) {\n\t\t\t\tvar chart = me.chart;\n\t\t\t\tvar datasets = chart.data.datasets;\n\t\t\t\tvar value = Number(datasets[datasetIndex].data[index]);\n\n\t\t\t\tfor (var i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tvar currentDs = datasets[i];\n\t\t\t\t\tvar currentDsMeta = chart.getDatasetMeta(i);\n\t\t\t\t\tif (currentDsMeta.bar && currentDsMeta.yAxisID === yScale.id && chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar currentVal = Number(currentDs.data[index]);\n\t\t\t\t\t\tbase += value < 0 ? Math.min(currentVal, 0) : Math.max(currentVal, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn yScale.getPixelForValue(base);\n\t\t\t}\n\n\t\t\treturn yScale.getBasePixel();\n\t\t},\n\n\t\tgetRuler: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar datasetCount = me.getBarCount();\n\n\t\t\tvar tickWidth;\n\n\t\t\tif (xScale.options.type === 'category') {\n\t\t\t\ttickWidth = xScale.getPixelForTick(index + 1) - xScale.getPixelForTick(index);\n\t\t\t} else {\n\t\t\t\t// Average width\n\t\t\t\ttickWidth = xScale.width / xScale.ticks.length;\n\t\t\t}\n\t\t\tvar categoryWidth = tickWidth * xScale.options.categoryPercentage;\n\t\t\tvar categorySpacing = (tickWidth - (tickWidth * xScale.options.categoryPercentage)) / 2;\n\t\t\tvar fullBarWidth = categoryWidth / datasetCount;\n\n\t\t\tif (xScale.ticks.length !== me.chart.data.labels.length) {\n\t\t\t\tvar perc = xScale.ticks.length / me.chart.data.labels.length;\n\t\t\t\tfullBarWidth = fullBarWidth * perc;\n\t\t\t}\n\n\t\t\tvar barWidth = fullBarWidth * xScale.options.barPercentage;\n\t\t\tvar barSpacing = fullBarWidth - (fullBarWidth * xScale.options.barPercentage);\n\n\t\t\treturn {\n\t\t\t\tdatasetCount: datasetCount,\n\t\t\t\ttickWidth: tickWidth,\n\t\t\t\tcategoryWidth: categoryWidth,\n\t\t\t\tcategorySpacing: categorySpacing,\n\t\t\t\tfullBarWidth: fullBarWidth,\n\t\t\t\tbarWidth: barWidth,\n\t\t\t\tbarSpacing: barSpacing\n\t\t\t};\n\t\t},\n\n\t\tcalculateBarWidth: function(index) {\n\t\t\tvar xScale = this.getScaleForId(this.getMeta().xAxisID);\n\t\t\tif (xScale.options.barThickness) {\n\t\t\t\treturn xScale.options.barThickness;\n\t\t\t}\n\t\t\tvar ruler = this.getRuler(index);\n\t\t\treturn xScale.options.stacked ? ruler.categoryWidth : ruler.barWidth;\n\t\t},\n\n\t\t// Get bar index from the given dataset index accounting for the fact that not all bars are visible\n\t\tgetBarIndex: function(datasetIndex) {\n\t\t\tvar barIndex = 0;\n\t\t\tvar meta, j;\n\n\t\t\tfor (j = 0; j < datasetIndex; ++j) {\n\t\t\t\tmeta = this.chart.getDatasetMeta(j);\n\t\t\t\tif (meta.bar && this.chart.isDatasetVisible(j)) {\n\t\t\t\t\t++barIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn barIndex;\n\t\t},\n\n\t\tcalculateBarX: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar barIndex = me.getBarIndex(datasetIndex);\n\n\t\t\tvar ruler = me.getRuler(index);\n\t\t\tvar leftTick = xScale.getPixelForValue(null, index, datasetIndex, me.chart.isCombo);\n\t\t\tleftTick -= me.chart.isCombo ? (ruler.tickWidth / 2) : 0;\n\n\t\t\tif (xScale.options.stacked) {\n\t\t\t\treturn leftTick + (ruler.categoryWidth / 2) + ruler.categorySpacing;\n\t\t\t}\n\n\t\t\treturn leftTick +\n\t\t\t\t(ruler.barWidth / 2) +\n\t\t\t\truler.categorySpacing +\n\t\t\t\t(ruler.barWidth * barIndex) +\n\t\t\t\t(ruler.barSpacing / 2) +\n\t\t\t\t(ruler.barSpacing * barIndex);\n\t\t},\n\n\t\tcalculateBarY: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar value = Number(me.getDataset().data[index]);\n\n\t\t\tif (yScale.options.stacked) {\n\n\t\t\t\tvar sumPos = 0,\n\t\t\t\t\tsumNeg = 0;\n\n\t\t\t\tfor (var i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tvar ds = me.chart.data.datasets[i];\n\t\t\t\t\tvar dsMeta = me.chart.getDatasetMeta(i);\n\t\t\t\t\tif (dsMeta.bar && dsMeta.yAxisID === yScale.id && me.chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar stackedVal = Number(ds.data[index]);\n\t\t\t\t\t\tif (stackedVal < 0) {\n\t\t\t\t\t\t\tsumNeg += stackedVal || 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsumPos += stackedVal || 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value < 0) {\n\t\t\t\t\treturn yScale.getPixelForValue(sumNeg + value);\n\t\t\t\t}\n\t\t\t\treturn yScale.getPixelForValue(sumPos + value);\n\t\t\t}\n\n\t\t\treturn yScale.getPixelForValue(value);\n\t\t},\n\n\t\tdraw: function(ease) {\n\t\t\tvar me = this;\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\thelpers.each(me.getMeta().data, function(rectangle, index) {\n\t\t\t\tvar d = me.getDataset().data[index];\n\t\t\t\tif (d !== null && d !== undefined && !isNaN(d)) {\n\t\t\t\t\trectangle.transition(easingDecimal).draw();\n\t\t\t\t}\n\t\t\t}, me);\n\t\t},\n\n\t\tsetHoverStyle: function(rectangle) {\n\t\t\tvar dataset = this.chart.data.datasets[rectangle._datasetIndex];\n\t\t\tvar index = rectangle._index;\n\n\t\t\tvar custom = rectangle.custom || {};\n\t\t\tvar model = rectangle._model;\n\t\t\tmodel.backgroundColor = custom.hoverBackgroundColor ? custom.hoverBackgroundColor : helpers.getValueAtIndexOrDefault(dataset.hoverBackgroundColor, index, helpers.getHoverColor(model.backgroundColor));\n\t\t\tmodel.borderColor = custom.hoverBorderColor ? custom.hoverBorderColor : helpers.getValueAtIndexOrDefault(dataset.hoverBorderColor, index, helpers.getHoverColor(model.borderColor));\n\t\t\tmodel.borderWidth = custom.hoverBorderWidth ? custom.hoverBorderWidth : helpers.getValueAtIndexOrDefault(dataset.hoverBorderWidth, index, model.borderWidth);\n\t\t},\n\n\t\tremoveHoverStyle: function(rectangle) {\n\t\t\tvar dataset = this.chart.data.datasets[rectangle._datasetIndex];\n\t\t\tvar index = rectangle._index;\n\t\t\tvar custom = rectangle.custom || {};\n\t\t\tvar model = rectangle._model;\n\t\t\tvar rectangleElementOptions = this.chart.options.elements.rectangle;\n\n\t\t\tmodel.backgroundColor = custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.backgroundColor, index, rectangleElementOptions.backgroundColor);\n\t\t\tmodel.borderColor = custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.borderColor, index, rectangleElementOptions.borderColor);\n\t\t\tmodel.borderWidth = custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.borderWidth, index, rectangleElementOptions.borderWidth);\n\t\t}\n\n\t});\n\n\n\t// including horizontalBar in the bar file, instead of a file of its own\n\t// it extends bar (like pie extends doughnut)\n\tChart.defaults.horizontalBar = {\n\t\thover: {\n\t\t\tmode: 'label'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tposition: 'bottom'\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\tposition: 'left',\n\t\t\t\ttype: 'category',\n\n\t\t\t\t// Specific to Horizontal Bar Controller\n\t\t\t\tcategoryPercentage: 0.8,\n\t\t\t\tbarPercentage: 0.9,\n\n\t\t\t\t// grid line settings\n\t\t\t\tgridLines: {\n\t\t\t\t\toffsetGridLines: true\n\t\t\t\t}\n\t\t\t}]\n\t\t},\n\t\telements: {\n\t\t\trectangle: {\n\t\t\t\tborderSkipped: 'left'\n\t\t\t}\n\t\t},\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function(tooltipItems, data) {\n\t\t\t\t\t// Pick first xLabel for now\n\t\t\t\t\tvar title = '';\n\n\t\t\t\t\tif (tooltipItems.length > 0) {\n\t\t\t\t\t\tif (tooltipItems[0].yLabel) {\n\t\t\t\t\t\t\ttitle = tooltipItems[0].yLabel;\n\t\t\t\t\t\t} else if (data.labels.length > 0 && tooltipItems[0].index < data.labels.length) {\n\t\t\t\t\t\t\ttitle = data.labels[tooltipItems[0].index];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\tvar datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';\n\t\t\t\t\treturn datasetLabel + ': ' + tooltipItem.xLabel;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.controllers.horizontalBar = Chart.controllers.bar.extend({\n\t\tupdateElement: function(rectangle, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar scaleBase = xScale.getBasePixel();\n\t\t\tvar custom = rectangle.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar rectangleElementOptions = me.chart.options.elements.rectangle;\n\n\t\t\thelpers.extend(rectangle, {\n\t\t\t\t// Utility\n\t\t\t\t_xScale: xScale,\n\t\t\t\t_yScale: yScale,\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: reset ? scaleBase : me.calculateBarX(index, me.index),\n\t\t\t\t\ty: me.calculateBarY(index, me.index),\n\n\t\t\t\t\t// Tooltip\n\t\t\t\t\tlabel: me.chart.data.labels[index],\n\t\t\t\t\tdatasetLabel: dataset.label,\n\n\t\t\t\t\t// Appearance\n\t\t\t\t\tbase: reset ? scaleBase : me.calculateBarBase(me.index, index),\n\t\t\t\t\theight: me.calculateBarHeight(index),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.backgroundColor, index, rectangleElementOptions.backgroundColor),\n\t\t\t\t\tborderSkipped: custom.borderSkipped ? custom.borderSkipped : rectangleElementOptions.borderSkipped,\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.borderColor, index, rectangleElementOptions.borderColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.borderWidth, index, rectangleElementOptions.borderWidth)\n\t\t\t\t},\n\n\t\t\t\tdraw: function() {\n\t\t\t\t\tvar ctx = this._chart.ctx;\n\t\t\t\t\tvar vm = this._view;\n\n\t\t\t\t\tvar halfHeight = vm.height / 2,\n\t\t\t\t\t\ttopY = vm.y - halfHeight,\n\t\t\t\t\t\tbottomY = vm.y + halfHeight,\n\t\t\t\t\t\tright = vm.base - (vm.base - vm.x),\n\t\t\t\t\t\thalfStroke = vm.borderWidth / 2;\n\n\t\t\t\t\t// Canvas doesn't allow us to stroke inside the width so we can\n\t\t\t\t\t// adjust the sizes to fit if we're setting a stroke on the line\n\t\t\t\t\tif (vm.borderWidth) {\n\t\t\t\t\t\ttopY += halfStroke;\n\t\t\t\t\t\tbottomY -= halfStroke;\n\t\t\t\t\t\tright += halfStroke;\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.beginPath();\n\n\t\t\t\t\tctx.fillStyle = vm.backgroundColor;\n\t\t\t\t\tctx.strokeStyle = vm.borderColor;\n\t\t\t\t\tctx.lineWidth = vm.borderWidth;\n\n\t\t\t\t\t// Corner points, from bottom-left to bottom-right clockwise\n\t\t\t\t\t// | 1 2 |\n\t\t\t\t\t// | 0 3 |\n\t\t\t\t\tvar corners = [\n\t\t\t\t\t\t[vm.base, bottomY],\n\t\t\t\t\t\t[vm.base, topY],\n\t\t\t\t\t\t[right, topY],\n\t\t\t\t\t\t[right, bottomY]\n\t\t\t\t\t];\n\n\t\t\t\t\t// Find first (starting) corner with fallback to 'bottom'\n\t\t\t\t\tvar borders = ['bottom', 'left', 'top', 'right'];\n\t\t\t\t\tvar startCorner = borders.indexOf(vm.borderSkipped, 0);\n\t\t\t\t\tif (startCorner === -1) {\n\t\t\t\t\t\tstartCorner = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction cornerAt(cornerIndex) {\n\t\t\t\t\t\treturn corners[(startCorner + cornerIndex) % 4];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Draw rectangle from 'startCorner'\n\t\t\t\t\tctx.moveTo.apply(ctx, cornerAt(0));\n\t\t\t\t\tfor (var i = 1; i < 4; i++) {\n\t\t\t\t\t\tctx.lineTo.apply(ctx, cornerAt(i));\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tif (vm.borderWidth) {\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tinRange: function(mouseX, mouseY) {\n\t\t\t\t\tvar vm = this._view;\n\t\t\t\t\tvar inRange = false;\n\n\t\t\t\t\tif (vm) {\n\t\t\t\t\t\tif (vm.x < vm.base) {\n\t\t\t\t\t\t\tinRange = (mouseY >= vm.y - vm.height / 2 && mouseY <= vm.y + vm.height / 2) && (mouseX >= vm.x && mouseX <= vm.base);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinRange = (mouseY >= vm.y - vm.height / 2 && mouseY <= vm.y + vm.height / 2) && (mouseX >= vm.base && mouseX <= vm.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn inRange;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trectangle.pivot();\n\t\t},\n\n\t\tcalculateBarBase: function(datasetIndex, index) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar base = 0;\n\n\t\t\tif (xScale.options.stacked) {\n\t\t\t\tvar chart = me.chart;\n\t\t\t\tvar datasets = chart.data.datasets;\n\t\t\t\tvar value = Number(datasets[datasetIndex].data[index]);\n\n\t\t\t\tfor (var i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tvar currentDs = datasets[i];\n\t\t\t\t\tvar currentDsMeta = chart.getDatasetMeta(i);\n\t\t\t\t\tif (currentDsMeta.bar && currentDsMeta.xAxisID === xScale.id && chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar currentVal = Number(currentDs.data[index]);\n\t\t\t\t\t\tbase += value < 0 ? Math.min(currentVal, 0) : Math.max(currentVal, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn xScale.getPixelForValue(base);\n\t\t\t}\n\n\t\t\treturn xScale.getBasePixel();\n\t\t},\n\n\t\tgetRuler: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar datasetCount = me.getBarCount();\n\n\t\t\tvar tickHeight;\n\t\t\tif (yScale.options.type === 'category') {\n\t\t\t\ttickHeight = yScale.getPixelForTick(index + 1) - yScale.getPixelForTick(index);\n\t\t\t} else {\n\t\t\t\t// Average width\n\t\t\t\ttickHeight = yScale.width / yScale.ticks.length;\n\t\t\t}\n\t\t\tvar categoryHeight = tickHeight * yScale.options.categoryPercentage;\n\t\t\tvar categorySpacing = (tickHeight - (tickHeight * yScale.options.categoryPercentage)) / 2;\n\t\t\tvar fullBarHeight = categoryHeight / datasetCount;\n\n\t\t\tif (yScale.ticks.length !== me.chart.data.labels.length) {\n\t\t\t\tvar perc = yScale.ticks.length / me.chart.data.labels.length;\n\t\t\t\tfullBarHeight = fullBarHeight * perc;\n\t\t\t}\n\n\t\t\tvar barHeight = fullBarHeight * yScale.options.barPercentage;\n\t\t\tvar barSpacing = fullBarHeight - (fullBarHeight * yScale.options.barPercentage);\n\n\t\t\treturn {\n\t\t\t\tdatasetCount: datasetCount,\n\t\t\t\ttickHeight: tickHeight,\n\t\t\t\tcategoryHeight: categoryHeight,\n\t\t\t\tcategorySpacing: categorySpacing,\n\t\t\t\tfullBarHeight: fullBarHeight,\n\t\t\t\tbarHeight: barHeight,\n\t\t\t\tbarSpacing: barSpacing\n\t\t\t};\n\t\t},\n\n\t\tcalculateBarHeight: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar yScale = me.getScaleForId(me.getMeta().yAxisID);\n\t\t\tif (yScale.options.barThickness) {\n\t\t\t\treturn yScale.options.barThickness;\n\t\t\t}\n\t\t\tvar ruler = me.getRuler(index);\n\t\t\treturn yScale.options.stacked ? ruler.categoryHeight : ruler.barHeight;\n\t\t},\n\n\t\tcalculateBarX: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar value = Number(me.getDataset().data[index]);\n\n\t\t\tif (xScale.options.stacked) {\n\n\t\t\t\tvar sumPos = 0,\n\t\t\t\t\tsumNeg = 0;\n\n\t\t\t\tfor (var i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tvar ds = me.chart.data.datasets[i];\n\t\t\t\t\tvar dsMeta = me.chart.getDatasetMeta(i);\n\t\t\t\t\tif (dsMeta.bar && dsMeta.xAxisID === xScale.id && me.chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar stackedVal = Number(ds.data[index]);\n\t\t\t\t\t\tif (stackedVal < 0) {\n\t\t\t\t\t\t\tsumNeg += stackedVal || 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsumPos += stackedVal || 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value < 0) {\n\t\t\t\t\treturn xScale.getPixelForValue(sumNeg + value);\n\t\t\t\t}\n\t\t\t\treturn xScale.getPixelForValue(sumPos + value);\n\t\t\t}\n\n\t\t\treturn xScale.getPixelForValue(value);\n\t\t},\n\n\t\tcalculateBarY: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar barIndex = me.getBarIndex(datasetIndex);\n\n\t\t\tvar ruler = me.getRuler(index);\n\t\t\tvar topTick = yScale.getPixelForValue(null, index, datasetIndex, me.chart.isCombo);\n\t\t\ttopTick -= me.chart.isCombo ? (ruler.tickHeight / 2) : 0;\n\n\t\t\tif (yScale.options.stacked) {\n\t\t\t\treturn topTick + (ruler.categoryHeight / 2) + ruler.categorySpacing;\n\t\t\t}\n\n\t\t\treturn topTick +\n\t\t\t\t(ruler.barHeight / 2) +\n\t\t\t\truler.categorySpacing +\n\t\t\t\t(ruler.barHeight * barIndex) +\n\t\t\t\t(ruler.barSpacing / 2) +\n\t\t\t\t(ruler.barSpacing * barIndex);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.bubble = {\n\t\thover: {\n\t\t\tmode: 'single'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'linear', // bubble should probably use a linear scale by default\n\t\t\t\tposition: 'bottom',\n\t\t\t\tid: 'x-axis-0' // need an ID so datasets can reference the scale\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tposition: 'left',\n\t\t\t\tid: 'y-axis-0'\n\t\t\t}]\n\t\t},\n\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\t// Title doesn't make sense for scatter since we format the data as a point\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\tvar datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';\n\t\t\t\t\tvar dataPoint = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\n\t\t\t\t\treturn datasetLabel + ': (' + dataPoint.x + ', ' + dataPoint.y + ', ' + dataPoint.r + ')';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.controllers.bubble = Chart.DatasetController.extend({\n\n\t\tdataElementType: Chart.elements.Point,\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar points = meta.data;\n\n\t\t\t// Update Points\n\t\t\thelpers.each(points, function(point, index) {\n\t\t\t\tme.updateElement(point, index, reset);\n\t\t\t});\n\t\t},\n\n\t\tupdateElement: function(point, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar data = dataset.data[index];\n\t\t\tvar pointElementOptions = me.chart.options.elements.point;\n\t\t\tvar dsIndex = me.index;\n\n\t\t\thelpers.extend(point, {\n\t\t\t\t// Utility\n\t\t\t\t_xScale: xScale,\n\t\t\t\t_yScale: yScale,\n\t\t\t\t_datasetIndex: dsIndex,\n\t\t\t\t_index: index,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: reset ? xScale.getPixelForDecimal(0.5) : xScale.getPixelForValue(typeof data === 'object' ? data : NaN, index, dsIndex, me.chart.isCombo),\n\t\t\t\t\ty: reset ? yScale.getBasePixel() : yScale.getPixelForValue(data, index, dsIndex),\n\t\t\t\t\t// Appearance\n\t\t\t\t\tradius: reset ? 0 : custom.radius ? custom.radius : me.getRadius(data),\n\n\t\t\t\t\t// Tooltip\n\t\t\t\t\thitRadius: custom.hitRadius ? custom.hitRadius : helpers.getValueAtIndexOrDefault(dataset.hitRadius, index, pointElementOptions.hitRadius)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Trick to reset the styles of the point\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(me, point, pointElementOptions);\n\n\t\t\tvar model = point._model;\n\t\t\tmodel.skip = custom.skip ? custom.skip : (isNaN(model.x) || isNaN(model.y));\n\n\t\t\tpoint.pivot();\n\t\t},\n\n\t\tgetRadius: function(value) {\n\t\t\treturn value.r || this.chart.options.elements.point.radius;\n\t\t},\n\n\t\tsetHoverStyle: function(point) {\n\t\t\tvar me = this;\n\t\t\tChart.DatasetController.prototype.setHoverStyle.call(me, point);\n\n\t\t\t// Radius\n\t\t\tvar dataset = me.chart.data.datasets[point._datasetIndex];\n\t\t\tvar index = point._index;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\t\t\tmodel.radius = custom.hoverRadius ? custom.hoverRadius : (helpers.getValueAtIndexOrDefault(dataset.hoverRadius, index, me.chart.options.elements.point.hoverRadius)) + me.getRadius(dataset.data[index]);\n\t\t},\n\n\t\tremoveHoverStyle: function(point) {\n\t\t\tvar me = this;\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(me, point, me.chart.options.elements.point);\n\n\t\t\tvar dataVal = me.chart.data.datasets[point._datasetIndex].data[point._index];\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\n\t\t\tmodel.radius = custom.radius ? custom.radius : me.getRadius(dataVal);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers,\n\t\tdefaults = Chart.defaults;\n\n\tdefaults.doughnut = {\n\t\tanimation: {\n\t\t\t// Boolean - Whether we animate the rotation of the Doughnut\n\t\t\tanimateRotate: true,\n\t\t\t// Boolean - Whether we animate scaling the Doughnut from the centre\n\t\t\tanimateScale: false\n\t\t},\n\t\taspectRatio: 1,\n\t\thover: {\n\t\t\tmode: 'single'\n\t\t},\n\t\tlegendCallback: function(chart) {\n\t\t\tvar text = [];\n\t\t\ttext.push('<ul class=\"' + chart.id + '-legend\">');\n\n\t\t\tvar data = chart.data;\n\t\t\tvar datasets = data.datasets;\n\t\t\tvar labels = data.labels;\n\n\t\t\tif (datasets.length) {\n\t\t\t\tfor (var i = 0; i < datasets[0].data.length; ++i) {\n\t\t\t\t\ttext.push('<li><span style=\"background-color:' + datasets[0].backgroundColor[i] + '\"></span>');\n\t\t\t\t\tif (labels[i]) {\n\t\t\t\t\t\ttext.push(labels[i]);\n\t\t\t\t\t}\n\t\t\t\t\ttext.push('</li>');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttext.push('</ul>');\n\t\t\treturn text.join('');\n\t\t},\n\t\tlegend: {\n\t\t\tlabels: {\n\t\t\t\tgenerateLabels: function(chart) {\n\t\t\t\t\tvar data = chart.data;\n\t\t\t\t\tif (data.labels.length && data.datasets.length) {\n\t\t\t\t\t\treturn data.labels.map(function(label, i) {\n\t\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\n\t\t\t\t\t\t\tvar ds = data.datasets[0];\n\t\t\t\t\t\t\tvar arc = meta.data[i];\n\t\t\t\t\t\t\tvar custom = arc && arc.custom || {};\n\t\t\t\t\t\t\tvar getValueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\n\t\t\t\t\t\t\tvar arcOpts = chart.options.elements.arc;\n\t\t\t\t\t\t\tvar fill = custom.backgroundColor ? custom.backgroundColor : getValueAtIndexOrDefault(ds.backgroundColor, i, arcOpts.backgroundColor);\n\t\t\t\t\t\t\tvar stroke = custom.borderColor ? custom.borderColor : getValueAtIndexOrDefault(ds.borderColor, i, arcOpts.borderColor);\n\t\t\t\t\t\t\tvar bw = custom.borderWidth ? custom.borderWidth : getValueAtIndexOrDefault(ds.borderWidth, i, arcOpts.borderWidth);\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttext: label,\n\t\t\t\t\t\t\t\tfillStyle: fill,\n\t\t\t\t\t\t\t\tstrokeStyle: stroke,\n\t\t\t\t\t\t\t\tlineWidth: bw,\n\t\t\t\t\t\t\t\thidden: isNaN(ds.data[i]) || meta.data[i].hidden,\n\n\t\t\t\t\t\t\t\t// Extra data used for toggling the correct item\n\t\t\t\t\t\t\t\tindex: i\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonClick: function(e, legendItem) {\n\t\t\t\tvar index = legendItem.index;\n\t\t\t\tvar chart = this.chart;\n\t\t\t\tvar i, ilen, meta;\n\n\t\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\n\t\t\t\t\tmeta = chart.getDatasetMeta(i);\n\t\t\t\t\t// toggle visibility of index if exists\n\t\t\t\t\tif (meta.data[index]) {\n\t\t\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tchart.update();\n\t\t\t}\n\t\t},\n\n\t\t// The percentage of the chart that we cut out of the middle.\n\t\tcutoutPercentage: 50,\n\n\t\t// The rotation of the chart, where the first data arc begins.\n\t\trotation: Math.PI * -0.5,\n\n\t\t// The total circumference of the chart.\n\t\tcircumference: Math.PI * 2.0,\n\n\t\t// Need to override these to give a nice default\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\treturn data.labels[tooltipItem.index] + ': ' + data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tdefaults.pie = helpers.clone(defaults.doughnut);\n\thelpers.extend(defaults.pie, {\n\t\tcutoutPercentage: 0\n\t});\n\n\n\tChart.controllers.doughnut = Chart.controllers.pie = Chart.DatasetController.extend({\n\n\t\tdataElementType: Chart.elements.Arc,\n\n\t\tlinkScales: helpers.noop,\n\n\t\t// Get index of the dataset in relation to the visible datasets. This allows determining the inner and outer radius correctly\n\t\tgetRingIndex: function(datasetIndex) {\n\t\t\tvar ringIndex = 0;\n\n\t\t\tfor (var j = 0; j < datasetIndex; ++j) {\n\t\t\t\tif (this.chart.isDatasetVisible(j)) {\n\t\t\t\t\t++ringIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ringIndex;\n\t\t},\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart,\n\t\t\t\tchartArea = chart.chartArea,\n\t\t\t\topts = chart.options,\n\t\t\t\tarcOpts = opts.elements.arc,\n\t\t\t\tavailableWidth = chartArea.right - chartArea.left - arcOpts.borderWidth,\n\t\t\t\tavailableHeight = chartArea.bottom - chartArea.top - arcOpts.borderWidth,\n\t\t\t\tminSize = Math.min(availableWidth, availableHeight),\n\t\t\t\toffset = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\tmeta = me.getMeta(),\n\t\t\t\tcutoutPercentage = opts.cutoutPercentage,\n\t\t\t\tcircumference = opts.circumference;\n\n\t\t\t// If the chart's circumference isn't a full circle, calculate minSize as a ratio of the width/height of the arc\n\t\t\tif (circumference < Math.PI * 2.0) {\n\t\t\t\tvar startAngle = opts.rotation % (Math.PI * 2.0);\n\t\t\t\tstartAngle += Math.PI * 2.0 * (startAngle >= Math.PI ? -1 : startAngle < -Math.PI ? 1 : 0);\n\t\t\t\tvar endAngle = startAngle + circumference;\n\t\t\t\tvar start = {x: Math.cos(startAngle), y: Math.sin(startAngle)};\n\t\t\t\tvar end = {x: Math.cos(endAngle), y: Math.sin(endAngle)};\n\t\t\t\tvar contains0 = (startAngle <= 0 && 0 <= endAngle) || (startAngle <= Math.PI * 2.0 && Math.PI * 2.0 <= endAngle);\n\t\t\t\tvar contains90 = (startAngle <= Math.PI * 0.5 && Math.PI * 0.5 <= endAngle) || (startAngle <= Math.PI * 2.5 && Math.PI * 2.5 <= endAngle);\n\t\t\t\tvar contains180 = (startAngle <= -Math.PI && -Math.PI <= endAngle) || (startAngle <= Math.PI && Math.PI <= endAngle);\n\t\t\t\tvar contains270 = (startAngle <= -Math.PI * 0.5 && -Math.PI * 0.5 <= endAngle) || (startAngle <= Math.PI * 1.5 && Math.PI * 1.5 <= endAngle);\n\t\t\t\tvar cutout = cutoutPercentage / 100.0;\n\t\t\t\tvar min = {x: contains180 ? -1 : Math.min(start.x * (start.x < 0 ? 1 : cutout), end.x * (end.x < 0 ? 1 : cutout)), y: contains270 ? -1 : Math.min(start.y * (start.y < 0 ? 1 : cutout), end.y * (end.y < 0 ? 1 : cutout))};\n\t\t\t\tvar max = {x: contains0 ? 1 : Math.max(start.x * (start.x > 0 ? 1 : cutout), end.x * (end.x > 0 ? 1 : cutout)), y: contains90 ? 1 : Math.max(start.y * (start.y > 0 ? 1 : cutout), end.y * (end.y > 0 ? 1 : cutout))};\n\t\t\t\tvar size = {width: (max.x - min.x) * 0.5, height: (max.y - min.y) * 0.5};\n\t\t\t\tminSize = Math.min(availableWidth / size.width, availableHeight / size.height);\n\t\t\t\toffset = {x: (max.x + min.x) * -0.5, y: (max.y + min.y) * -0.5};\n\t\t\t}\n\n\t\t\tchart.borderWidth = me.getMaxBorderWidth(meta.data);\n\t\t\tchart.outerRadius = Math.max((minSize - chart.borderWidth) / 2, 0);\n\t\t\tchart.innerRadius = Math.max(cutoutPercentage ? (chart.outerRadius / 100) * (cutoutPercentage) : 1, 0);\n\t\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / chart.getVisibleDatasetCount();\n\t\t\tchart.offsetX = offset.x * chart.outerRadius;\n\t\t\tchart.offsetY = offset.y * chart.outerRadius;\n\n\t\t\tmeta.total = me.calculateTotal();\n\n\t\t\tme.outerRadius = chart.outerRadius - (chart.radiusLength * me.getRingIndex(me.index));\n\t\t\tme.innerRadius = me.outerRadius - chart.radiusLength;\n\n\t\t\thelpers.each(meta.data, function(arc, index) {\n\t\t\t\tme.updateElement(arc, index, reset);\n\t\t\t});\n\t\t},\n\n\t\tupdateElement: function(arc, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart,\n\t\t\t\tchartArea = chart.chartArea,\n\t\t\t\topts = chart.options,\n\t\t\t\tanimationOpts = opts.animation,\n\t\t\t\tcenterX = (chartArea.left + chartArea.right) / 2,\n\t\t\t\tcenterY = (chartArea.top + chartArea.bottom) / 2,\n\t\t\t\tstartAngle = opts.rotation, // non reset case handled later\n\t\t\t\tendAngle = opts.rotation, // non reset case handled later\n\t\t\t\tdataset = me.getDataset(),\n\t\t\t\tcircumference = reset && animationOpts.animateRotate ? 0 : arc.hidden ? 0 : me.calculateCircumference(dataset.data[index]) * (opts.circumference / (2.0 * Math.PI)),\n\t\t\t\tinnerRadius = reset && animationOpts.animateScale ? 0 : me.innerRadius,\n\t\t\t\touterRadius = reset && animationOpts.animateScale ? 0 : me.outerRadius,\n\t\t\t\tvalueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\n\n\t\t\thelpers.extend(arc, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: centerX + chart.offsetX,\n\t\t\t\t\ty: centerY + chart.offsetY,\n\t\t\t\t\tstartAngle: startAngle,\n\t\t\t\t\tendAngle: endAngle,\n\t\t\t\t\tcircumference: circumference,\n\t\t\t\t\touterRadius: outerRadius,\n\t\t\t\t\tinnerRadius: innerRadius,\n\t\t\t\t\tlabel: valueAtIndexOrDefault(dataset.label, index, chart.data.labels[index])\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar model = arc._model;\n\t\t\t// Resets the visual styles\n\t\t\tthis.removeHoverStyle(arc);\n\n\t\t\t// Set correct angles if not resetting\n\t\t\tif (!reset || !animationOpts.animateRotate) {\n\t\t\t\tif (index === 0) {\n\t\t\t\t\tmodel.startAngle = opts.rotation;\n\t\t\t\t} else {\n\t\t\t\t\tmodel.startAngle = me.getMeta().data[index - 1]._model.endAngle;\n\t\t\t\t}\n\n\t\t\t\tmodel.endAngle = model.startAngle + model.circumference;\n\t\t\t}\n\n\t\t\tarc.pivot();\n\t\t},\n\n\t\tremoveHoverStyle: function(arc) {\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(this, arc, this.chart.options.elements.arc);\n\t\t},\n\n\t\tcalculateTotal: function() {\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar meta = this.getMeta();\n\t\t\tvar total = 0;\n\t\t\tvar value;\n\n\t\t\thelpers.each(meta.data, function(element, index) {\n\t\t\t\tvalue = dataset.data[index];\n\t\t\t\tif (!isNaN(value) && !element.hidden) {\n\t\t\t\t\ttotal += Math.abs(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/* if (total === 0) {\n\t\t\t\ttotal = NaN;\n\t\t\t}*/\n\n\t\t\treturn total;\n\t\t},\n\n\t\tcalculateCircumference: function(value) {\n\t\t\tvar total = this.getMeta().total;\n\t\t\tif (total > 0 && !isNaN(value)) {\n\t\t\t\treturn (Math.PI * 2.0) * (value / total);\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\n\t\t// gets the max border or hover width to properly scale pie charts\n\t\tgetMaxBorderWidth: function(elements) {\n\t\t\tvar max = 0,\n\t\t\t\tindex = this.index,\n\t\t\t\tlength = elements.length,\n\t\t\t\tborderWidth,\n\t\t\t\thoverWidth;\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tborderWidth = elements[i]._model ? elements[i]._model.borderWidth : 0;\n\t\t\t\thoverWidth = elements[i]._chart ? elements[i]._chart.config.data.datasets[index].hoverBorderWidth : 0;\n\n\t\t\t\tmax = borderWidth > max ? borderWidth : max;\n\t\t\t\tmax = hoverWidth > max ? hoverWidth : max;\n\t\t\t}\n\t\t\treturn max;\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.line = {\n\t\tshowLines: true,\n\t\tspanGaps: false,\n\n\t\thover: {\n\t\t\tmode: 'label'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'category',\n\t\t\t\tid: 'x-axis-0'\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tid: 'y-axis-0'\n\t\t\t}]\n\t\t}\n\t};\n\n\tfunction lineEnabled(dataset, options) {\n\t\treturn helpers.getValueOrDefault(dataset.showLine, options.showLines);\n\t}\n\n\tChart.controllers.line = Chart.DatasetController.extend({\n\n\t\tdatasetElementType: Chart.elements.Line,\n\n\t\tdataElementType: Chart.elements.Point,\n\n\t\taddElementAndReset: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar options = me.chart.options;\n\t\t\tvar meta = me.getMeta();\n\n\t\t\tChart.DatasetController.prototype.addElementAndReset.call(me, index);\n\n\t\t\t// Make sure bezier control points are updated\n\t\t\tif (lineEnabled(me.getDataset(), options) && meta.dataset._model.tension !== 0) {\n\t\t\t\tme.updateBezierControlPoints();\n\t\t\t}\n\t\t},\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar line = meta.dataset;\n\t\t\tvar points = meta.data || [];\n\t\t\tvar options = me.chart.options;\n\t\t\tvar lineElementOptions = options.elements.line;\n\t\t\tvar scale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar i, ilen, custom;\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar showLine = lineEnabled(dataset, options);\n\n\t\t\t// Update Line\n\t\t\tif (showLine) {\n\t\t\t\tcustom = line.custom || {};\n\n\t\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\n\t\t\t\tif ((dataset.tension !== undefined) && (dataset.lineTension === undefined)) {\n\t\t\t\t\tdataset.lineTension = dataset.tension;\n\t\t\t\t}\n\n\t\t\t\t// Utility\n\t\t\t\tline._scale = scale;\n\t\t\t\tline._datasetIndex = me.index;\n\t\t\t\t// Data\n\t\t\t\tline._children = points;\n\t\t\t\t// Model\n\t\t\t\tline._model = {\n\t\t\t\t\t// Appearance\n\t\t\t\t\t// The default behavior of lines is to break at null values, according\n\t\t\t\t\t// to https://github.com/chartjs/Chart.js/issues/2435#issuecomment-216718158\n\t\t\t\t\t// This option gives linse the ability to span gaps\n\t\t\t\t\tspanGaps: dataset.spanGaps ? dataset.spanGaps : options.spanGaps,\n\t\t\t\t\ttension: custom.tension ? custom.tension : helpers.getValueOrDefault(dataset.lineTension, lineElementOptions.tension),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : (dataset.backgroundColor || lineElementOptions.backgroundColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : (dataset.borderWidth || lineElementOptions.borderWidth),\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : (dataset.borderColor || lineElementOptions.borderColor),\n\t\t\t\t\tborderCapStyle: custom.borderCapStyle ? custom.borderCapStyle : (dataset.borderCapStyle || lineElementOptions.borderCapStyle),\n\t\t\t\t\tborderDash: custom.borderDash ? custom.borderDash : (dataset.borderDash || lineElementOptions.borderDash),\n\t\t\t\t\tborderDashOffset: custom.borderDashOffset ? custom.borderDashOffset : (dataset.borderDashOffset || lineElementOptions.borderDashOffset),\n\t\t\t\t\tborderJoinStyle: custom.borderJoinStyle ? custom.borderJoinStyle : (dataset.borderJoinStyle || lineElementOptions.borderJoinStyle),\n\t\t\t\t\tfill: custom.fill ? custom.fill : (dataset.fill !== undefined ? dataset.fill : lineElementOptions.fill),\n\t\t\t\t\tsteppedLine: custom.steppedLine ? custom.steppedLine : helpers.getValueOrDefault(dataset.steppedLine, lineElementOptions.stepped),\n\t\t\t\t\tcubicInterpolationMode: custom.cubicInterpolationMode ? custom.cubicInterpolationMode : helpers.getValueOrDefault(dataset.cubicInterpolationMode, lineElementOptions.cubicInterpolationMode),\n\t\t\t\t\t// Scale\n\t\t\t\t\tscaleTop: scale.top,\n\t\t\t\t\tscaleBottom: scale.bottom,\n\t\t\t\t\tscaleZero: scale.getBasePixel()\n\t\t\t\t};\n\n\t\t\t\tline.pivot();\n\t\t\t}\n\n\t\t\t// Update Points\n\t\t\tfor (i=0, ilen=points.length; i<ilen; ++i) {\n\t\t\t\tme.updateElement(points[i], i, reset);\n\t\t\t}\n\n\t\t\tif (showLine && line._model.tension !== 0) {\n\t\t\t\tme.updateBezierControlPoints();\n\t\t\t}\n\n\t\t\t// Now pivot the point for animation\n\t\t\tfor (i=0, ilen=points.length; i<ilen; ++i) {\n\t\t\t\tpoints[i].pivot();\n\t\t\t}\n\t\t},\n\n\t\tgetPointBackgroundColor: function(point, index) {\n\t\t\tvar backgroundColor = this.chart.options.elements.point.backgroundColor;\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar custom = point.custom || {};\n\n\t\t\tif (custom.backgroundColor) {\n\t\t\t\tbackgroundColor = custom.backgroundColor;\n\t\t\t} else if (dataset.pointBackgroundColor) {\n\t\t\t\tbackgroundColor = helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor, index, backgroundColor);\n\t\t\t} else if (dataset.backgroundColor) {\n\t\t\t\tbackgroundColor = dataset.backgroundColor;\n\t\t\t}\n\n\t\t\treturn backgroundColor;\n\t\t},\n\n\t\tgetPointBorderColor: function(point, index) {\n\t\t\tvar borderColor = this.chart.options.elements.point.borderColor;\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar custom = point.custom || {};\n\n\t\t\tif (custom.borderColor) {\n\t\t\t\tborderColor = custom.borderColor;\n\t\t\t} else if (dataset.pointBorderColor) {\n\t\t\t\tborderColor = helpers.getValueAtIndexOrDefault(dataset.pointBorderColor, index, borderColor);\n\t\t\t} else if (dataset.borderColor) {\n\t\t\t\tborderColor = dataset.borderColor;\n\t\t\t}\n\n\t\t\treturn borderColor;\n\t\t},\n\n\t\tgetPointBorderWidth: function(point, index) {\n\t\t\tvar borderWidth = this.chart.options.elements.point.borderWidth;\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar custom = point.custom || {};\n\n\t\t\tif (custom.borderWidth) {\n\t\t\t\tborderWidth = custom.borderWidth;\n\t\t\t} else if (dataset.pointBorderWidth) {\n\t\t\t\tborderWidth = helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth, index, borderWidth);\n\t\t\t} else if (dataset.borderWidth) {\n\t\t\t\tborderWidth = dataset.borderWidth;\n\t\t\t}\n\n\t\t\treturn borderWidth;\n\t\t},\n\n\t\tupdateElement: function(point, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar datasetIndex = me.index;\n\t\t\tvar value = dataset.data[index];\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar pointOptions = me.chart.options.elements.point;\n\t\t\tvar x, y;\n\t\t\tvar labels = me.chart.data.labels || [];\n\t\t\tvar includeOffset = (labels.length === 1 || dataset.data.length === 1) || me.chart.isCombo;\n\n\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\n\t\t\tif ((dataset.radius !== undefined) && (dataset.pointRadius === undefined)) {\n\t\t\t\tdataset.pointRadius = dataset.radius;\n\t\t\t}\n\t\t\tif ((dataset.hitRadius !== undefined) && (dataset.pointHitRadius === undefined)) {\n\t\t\t\tdataset.pointHitRadius = dataset.hitRadius;\n\t\t\t}\n\n\t\t\tx = xScale.getPixelForValue(typeof value === 'object' ? value : NaN, index, datasetIndex, includeOffset);\n\t\t\ty = reset ? yScale.getBasePixel() : me.calculatePointY(value, index, datasetIndex);\n\n\t\t\t// Utility\n\t\t\tpoint._xScale = xScale;\n\t\t\tpoint._yScale = yScale;\n\t\t\tpoint._datasetIndex = datasetIndex;\n\t\t\tpoint._index = index;\n\n\t\t\t// Desired view properties\n\t\t\tpoint._model = {\n\t\t\t\tx: x,\n\t\t\t\ty: y,\n\t\t\t\tskip: custom.skip || isNaN(x) || isNaN(y),\n\t\t\t\t// Appearance\n\t\t\t\tradius: custom.radius || helpers.getValueAtIndexOrDefault(dataset.pointRadius, index, pointOptions.radius),\n\t\t\t\tpointStyle: custom.pointStyle || helpers.getValueAtIndexOrDefault(dataset.pointStyle, index, pointOptions.pointStyle),\n\t\t\t\tbackgroundColor: me.getPointBackgroundColor(point, index),\n\t\t\t\tborderColor: me.getPointBorderColor(point, index),\n\t\t\t\tborderWidth: me.getPointBorderWidth(point, index),\n\t\t\t\ttension: meta.dataset._model ? meta.dataset._model.tension : 0,\n\t\t\t\tsteppedLine: meta.dataset._model ? meta.dataset._model.steppedLine : false,\n\t\t\t\t// Tooltip\n\t\t\t\thitRadius: custom.hitRadius || helpers.getValueAtIndexOrDefault(dataset.pointHitRadius, index, pointOptions.hitRadius)\n\t\t\t};\n\t\t},\n\n\t\tcalculatePointY: function(value, index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar sumPos = 0;\n\t\t\tvar sumNeg = 0;\n\t\t\tvar i, ds, dsMeta;\n\n\t\t\tif (yScale.options.stacked) {\n\t\t\t\tfor (i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tds = chart.data.datasets[i];\n\t\t\t\t\tdsMeta = chart.getDatasetMeta(i);\n\t\t\t\t\tif (dsMeta.type === 'line' && dsMeta.yAxisID === yScale.id && chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar stackedRightValue = Number(yScale.getRightValue(ds.data[index]));\n\t\t\t\t\t\tif (stackedRightValue < 0) {\n\t\t\t\t\t\t\tsumNeg += stackedRightValue || 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsumPos += stackedRightValue || 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar rightValue = Number(yScale.getRightValue(value));\n\t\t\t\tif (rightValue < 0) {\n\t\t\t\t\treturn yScale.getPixelForValue(sumNeg + rightValue);\n\t\t\t\t}\n\t\t\t\treturn yScale.getPixelForValue(sumPos + rightValue);\n\t\t\t}\n\n\t\t\treturn yScale.getPixelForValue(value);\n\t\t},\n\n\t\tupdateBezierControlPoints: function() {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar area = me.chart.chartArea;\n\t\t\tvar points = (meta.data || []);\n\t\t\tvar i, ilen, point, model, controlPoints;\n\n\t\t\t// Only consider points that are drawn in case the spanGaps option is used\n\t\t\tif (meta.dataset._model.spanGaps) {\n\t\t\t\tpoints = points.filter(function(pt) {\n\t\t\t\t\treturn !pt._model.skip;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction capControlPoint(pt, min, max) {\n\t\t\t\treturn Math.max(Math.min(pt, max), min);\n\t\t\t}\n\n\t\t\tif (meta.dataset._model.cubicInterpolationMode === 'monotone') {\n\t\t\t\thelpers.splineCurveMonotone(points);\n\t\t\t} else {\n\t\t\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\n\t\t\t\t\tpoint = points[i];\n\t\t\t\t\tmodel = point._model;\n\t\t\t\t\tcontrolPoints = helpers.splineCurve(\n\t\t\t\t\t\thelpers.previousItem(points, i)._model,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\thelpers.nextItem(points, i)._model,\n\t\t\t\t\t\tmeta.dataset._model.tension\n\t\t\t\t\t);\n\t\t\t\t\tmodel.controlPointPreviousX = controlPoints.previous.x;\n\t\t\t\t\tmodel.controlPointPreviousY = controlPoints.previous.y;\n\t\t\t\t\tmodel.controlPointNextX = controlPoints.next.x;\n\t\t\t\t\tmodel.controlPointNextY = controlPoints.next.y;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (me.chart.options.elements.line.capBezierPoints) {\n\t\t\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\n\t\t\t\t\tmodel = points[i]._model;\n\t\t\t\t\tmodel.controlPointPreviousX = capControlPoint(model.controlPointPreviousX, area.left, area.right);\n\t\t\t\t\tmodel.controlPointPreviousY = capControlPoint(model.controlPointPreviousY, area.top, area.bottom);\n\t\t\t\t\tmodel.controlPointNextX = capControlPoint(model.controlPointNextX, area.left, area.right);\n\t\t\t\t\tmodel.controlPointNextY = capControlPoint(model.controlPointNextY, area.top, area.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdraw: function(ease) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar points = meta.data || [];\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\tvar i, ilen;\n\n\t\t\t// Transition Point Locations\n\t\t\tfor (i=0, ilen=points.length; i<ilen; ++i) {\n\t\t\t\tpoints[i].transition(easingDecimal);\n\t\t\t}\n\n\t\t\t// Transition and Draw the line\n\t\t\tif (lineEnabled(me.getDataset(), me.chart.options)) {\n\t\t\t\tmeta.dataset.transition(easingDecimal).draw();\n\t\t\t}\n\n\t\t\t// Draw the points\n\t\t\tfor (i=0, ilen=points.length; i<ilen; ++i) {\n\t\t\t\tpoints[i].draw();\n\t\t\t}\n\t\t},\n\n\t\tsetHoverStyle: function(point) {\n\t\t\t// Point\n\t\t\tvar dataset = this.chart.data.datasets[point._datasetIndex];\n\t\t\tvar index = point._index;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\n\t\t\tmodel.radius = custom.hoverRadius || helpers.getValueAtIndexOrDefault(dataset.pointHoverRadius, index, this.chart.options.elements.point.hoverRadius);\n\t\t\tmodel.backgroundColor = custom.hoverBackgroundColor || helpers.getValueAtIndexOrDefault(dataset.pointHoverBackgroundColor, index, helpers.getHoverColor(model.backgroundColor));\n\t\t\tmodel.borderColor = custom.hoverBorderColor || helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderColor, index, helpers.getHoverColor(model.borderColor));\n\t\t\tmodel.borderWidth = custom.hoverBorderWidth || helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderWidth, index, model.borderWidth);\n\t\t},\n\n\t\tremoveHoverStyle: function(point) {\n\t\t\tvar me = this;\n\t\t\tvar dataset = me.chart.data.datasets[point._datasetIndex];\n\t\t\tvar index = point._index;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\n\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\n\t\t\tif ((dataset.radius !== undefined) && (dataset.pointRadius === undefined)) {\n\t\t\t\tdataset.pointRadius = dataset.radius;\n\t\t\t}\n\n\t\t\tmodel.radius = custom.radius || helpers.getValueAtIndexOrDefault(dataset.pointRadius, index, me.chart.options.elements.point.radius);\n\t\t\tmodel.backgroundColor = me.getPointBackgroundColor(point, index);\n\t\t\tmodel.borderColor = me.getPointBorderColor(point, index);\n\t\t\tmodel.borderWidth = me.getPointBorderWidth(point, index);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.polarArea = {\n\n\t\tscale: {\n\t\t\ttype: 'radialLinear',\n\t\t\tlineArc: true, // so that lines are circular\n\t\t\tticks: {\n\t\t\t\tbeginAtZero: true\n\t\t\t}\n\t\t},\n\n\t\t// Boolean - Whether to animate the rotation of the chart\n\t\tanimation: {\n\t\t\tanimateRotate: true,\n\t\t\tanimateScale: true\n\t\t},\n\n\t\tstartAngle: -0.5 * Math.PI,\n\t\taspectRatio: 1,\n\t\tlegendCallback: function(chart) {\n\t\t\tvar text = [];\n\t\t\ttext.push('<ul class=\"' + chart.id + '-legend\">');\n\n\t\t\tvar data = chart.data;\n\t\t\tvar datasets = data.datasets;\n\t\t\tvar labels = data.labels;\n\n\t\t\tif (datasets.length) {\n\t\t\t\tfor (var i = 0; i < datasets[0].data.length; ++i) {\n\t\t\t\t\ttext.push('<li><span style=\"background-color:' + datasets[0].backgroundColor[i] + '\">');\n\t\t\t\t\tif (labels[i]) {\n\t\t\t\t\t\ttext.push(labels[i]);\n\t\t\t\t\t}\n\t\t\t\t\ttext.push('</span></li>');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttext.push('</ul>');\n\t\t\treturn text.join('');\n\t\t},\n\t\tlegend: {\n\t\t\tlabels: {\n\t\t\t\tgenerateLabels: function(chart) {\n\t\t\t\t\tvar data = chart.data;\n\t\t\t\t\tif (data.labels.length && data.datasets.length) {\n\t\t\t\t\t\treturn data.labels.map(function(label, i) {\n\t\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\n\t\t\t\t\t\t\tvar ds = data.datasets[0];\n\t\t\t\t\t\t\tvar arc = meta.data[i];\n\t\t\t\t\t\t\tvar custom = arc.custom || {};\n\t\t\t\t\t\t\tvar getValueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\n\t\t\t\t\t\t\tvar arcOpts = chart.options.elements.arc;\n\t\t\t\t\t\t\tvar fill = custom.backgroundColor ? custom.backgroundColor : getValueAtIndexOrDefault(ds.backgroundColor, i, arcOpts.backgroundColor);\n\t\t\t\t\t\t\tvar stroke = custom.borderColor ? custom.borderColor : getValueAtIndexOrDefault(ds.borderColor, i, arcOpts.borderColor);\n\t\t\t\t\t\t\tvar bw = custom.borderWidth ? custom.borderWidth : getValueAtIndexOrDefault(ds.borderWidth, i, arcOpts.borderWidth);\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttext: label,\n\t\t\t\t\t\t\t\tfillStyle: fill,\n\t\t\t\t\t\t\t\tstrokeStyle: stroke,\n\t\t\t\t\t\t\t\tlineWidth: bw,\n\t\t\t\t\t\t\t\thidden: isNaN(ds.data[i]) || meta.data[i].hidden,\n\n\t\t\t\t\t\t\t\t// Extra data used for toggling the correct item\n\t\t\t\t\t\t\t\tindex: i\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonClick: function(e, legendItem) {\n\t\t\t\tvar index = legendItem.index;\n\t\t\t\tvar chart = this.chart;\n\t\t\t\tvar i, ilen, meta;\n\n\t\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\n\t\t\t\t\tmeta = chart.getDatasetMeta(i);\n\t\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\n\t\t\t\t}\n\n\t\t\t\tchart.update();\n\t\t\t}\n\t\t},\n\n\t\t// Need to override these to give a nice default\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\treturn data.labels[tooltipItem.index] + ': ' + tooltipItem.yLabel;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.controllers.polarArea = Chart.DatasetController.extend({\n\n\t\tdataElementType: Chart.elements.Arc,\n\n\t\tlinkScales: helpers.noop,\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar chartArea = chart.chartArea;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar opts = chart.options;\n\t\t\tvar arcOpts = opts.elements.arc;\n\t\t\tvar minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n\t\t\tchart.outerRadius = Math.max((minSize - arcOpts.borderWidth / 2) / 2, 0);\n\t\t\tchart.innerRadius = Math.max(opts.cutoutPercentage ? (chart.outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\n\t\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / chart.getVisibleDatasetCount();\n\n\t\t\tme.outerRadius = chart.outerRadius - (chart.radiusLength * me.index);\n\t\t\tme.innerRadius = me.outerRadius - chart.radiusLength;\n\n\t\t\tmeta.count = me.countVisibleElements();\n\n\t\t\thelpers.each(meta.data, function(arc, index) {\n\t\t\t\tme.updateElement(arc, index, reset);\n\t\t\t});\n\t\t},\n\n\t\tupdateElement: function(arc, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar opts = chart.options;\n\t\t\tvar animationOpts = opts.animation;\n\t\t\tvar scale = chart.scale;\n\t\t\tvar getValueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\n\t\t\tvar labels = chart.data.labels;\n\n\t\t\tvar circumference = me.calculateCircumference(dataset.data[index]);\n\t\t\tvar centerX = scale.xCenter;\n\t\t\tvar centerY = scale.yCenter;\n\n\t\t\t// If there is NaN data before us, we need to calculate the starting angle correctly.\n\t\t\t// We could be way more efficient here, but its unlikely that the polar area chart will have a lot of data\n\t\t\tvar visibleCount = 0;\n\t\t\tvar meta = me.getMeta();\n\t\t\tfor (var i = 0; i < index; ++i) {\n\t\t\t\tif (!isNaN(dataset.data[i]) && !meta.data[i].hidden) {\n\t\t\t\t\t++visibleCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// var negHalfPI = -0.5 * Math.PI;\n\t\t\tvar datasetStartAngle = opts.startAngle;\n\t\t\tvar distance = arc.hidden ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\n\t\t\tvar startAngle = datasetStartAngle + (circumference * visibleCount);\n\t\t\tvar endAngle = startAngle + (arc.hidden ? 0 : circumference);\n\n\t\t\tvar resetRadius = animationOpts.animateScale ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\n\n\t\t\thelpers.extend(arc, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\t\t\t\t_scale: scale,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: centerX,\n\t\t\t\t\ty: centerY,\n\t\t\t\t\tinnerRadius: 0,\n\t\t\t\t\touterRadius: reset ? resetRadius : distance,\n\t\t\t\t\tstartAngle: reset && animationOpts.animateRotate ? datasetStartAngle : startAngle,\n\t\t\t\t\tendAngle: reset && animationOpts.animateRotate ? datasetStartAngle : endAngle,\n\t\t\t\t\tlabel: getValueAtIndexOrDefault(labels, index, labels[index])\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Apply border and fill style\n\t\t\tme.removeHoverStyle(arc);\n\n\t\t\tarc.pivot();\n\t\t},\n\n\t\tremoveHoverStyle: function(arc) {\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(this, arc, this.chart.options.elements.arc);\n\t\t},\n\n\t\tcountVisibleElements: function() {\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar meta = this.getMeta();\n\t\t\tvar count = 0;\n\n\t\t\thelpers.each(meta.data, function(element, index) {\n\t\t\t\tif (!isNaN(dataset.data[index]) && !element.hidden) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn count;\n\t\t},\n\n\t\tcalculateCircumference: function(value) {\n\t\t\tvar count = this.getMeta().count;\n\t\t\tif (count > 0 && !isNaN(value)) {\n\t\t\t\treturn (2 * Math.PI) / count;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.radar = {\n\t\tscale: {\n\t\t\ttype: 'radialLinear'\n\t\t},\n\t\telements: {\n\t\t\tline: {\n\t\t\t\ttension: 0 // no bezier in radar\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.controllers.radar = Chart.DatasetController.extend({\n\n\t\tdatasetElementType: Chart.elements.Line,\n\n\t\tdataElementType: Chart.elements.Point,\n\n\t\tlinkScales: helpers.noop,\n\n\t\taddElementAndReset: function(index) {\n\t\t\tChart.DatasetController.prototype.addElementAndReset.call(this, index);\n\n\t\t\t// Make sure bezier control points are updated\n\t\t\tthis.updateBezierControlPoints();\n\t\t},\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar line = meta.dataset;\n\t\t\tvar points = meta.data;\n\t\t\tvar custom = line.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar lineElementOptions = me.chart.options.elements.line;\n\t\t\tvar scale = me.chart.scale;\n\n\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\n\t\t\tif ((dataset.tension !== undefined) && (dataset.lineTension === undefined)) {\n\t\t\t\tdataset.lineTension = dataset.tension;\n\t\t\t}\n\n\t\t\thelpers.extend(meta.dataset, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t// Data\n\t\t\t\t_children: points,\n\t\t\t\t_loop: true,\n\t\t\t\t// Model\n\t\t\t\t_model: {\n\t\t\t\t\t// Appearance\n\t\t\t\t\ttension: custom.tension ? custom.tension : helpers.getValueOrDefault(dataset.lineTension, lineElementOptions.tension),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : (dataset.backgroundColor || lineElementOptions.backgroundColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : (dataset.borderWidth || lineElementOptions.borderWidth),\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : (dataset.borderColor || lineElementOptions.borderColor),\n\t\t\t\t\tfill: custom.fill ? custom.fill : (dataset.fill !== undefined ? dataset.fill : lineElementOptions.fill),\n\t\t\t\t\tborderCapStyle: custom.borderCapStyle ? custom.borderCapStyle : (dataset.borderCapStyle || lineElementOptions.borderCapStyle),\n\t\t\t\t\tborderDash: custom.borderDash ? custom.borderDash : (dataset.borderDash || lineElementOptions.borderDash),\n\t\t\t\t\tborderDashOffset: custom.borderDashOffset ? custom.borderDashOffset : (dataset.borderDashOffset || lineElementOptions.borderDashOffset),\n\t\t\t\t\tborderJoinStyle: custom.borderJoinStyle ? custom.borderJoinStyle : (dataset.borderJoinStyle || lineElementOptions.borderJoinStyle),\n\n\t\t\t\t\t// Scale\n\t\t\t\t\tscaleTop: scale.top,\n\t\t\t\t\tscaleBottom: scale.bottom,\n\t\t\t\t\tscaleZero: scale.getBasePosition()\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmeta.dataset.pivot();\n\n\t\t\t// Update Points\n\t\t\thelpers.each(points, function(point, index) {\n\t\t\t\tme.updateElement(point, index, reset);\n\t\t\t}, me);\n\n\n\t\t\t// Update bezier control points\n\t\t\tme.updateBezierControlPoints();\n\t\t},\n\t\tupdateElement: function(point, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar scale = me.chart.scale;\n\t\t\tvar pointElementOptions = me.chart.options.elements.point;\n\t\t\tvar pointPosition = scale.getPointPositionForValue(index, dataset.data[index]);\n\n\t\t\thelpers.extend(point, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\t\t\t\t_scale: scale,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: reset ? scale.xCenter : pointPosition.x, // value not used in dataset scale, but we want a consistent API between scales\n\t\t\t\t\ty: reset ? scale.yCenter : pointPosition.y,\n\n\t\t\t\t\t// Appearance\n\t\t\t\t\ttension: custom.tension ? custom.tension : helpers.getValueOrDefault(dataset.tension, me.chart.options.elements.line.tension),\n\t\t\t\t\tradius: custom.radius ? custom.radius : helpers.getValueAtIndexOrDefault(dataset.pointRadius, index, pointElementOptions.radius),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor, index, pointElementOptions.backgroundColor),\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.pointBorderColor, index, pointElementOptions.borderColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth, index, pointElementOptions.borderWidth),\n\t\t\t\t\tpointStyle: custom.pointStyle ? custom.pointStyle : helpers.getValueAtIndexOrDefault(dataset.pointStyle, index, pointElementOptions.pointStyle),\n\n\t\t\t\t\t// Tooltip\n\t\t\t\t\thitRadius: custom.hitRadius ? custom.hitRadius : helpers.getValueAtIndexOrDefault(dataset.hitRadius, index, pointElementOptions.hitRadius)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tpoint._model.skip = custom.skip ? custom.skip : (isNaN(point._model.x) || isNaN(point._model.y));\n\t\t},\n\t\tupdateBezierControlPoints: function() {\n\t\t\tvar chartArea = this.chart.chartArea;\n\t\t\tvar meta = this.getMeta();\n\n\t\t\thelpers.each(meta.data, function(point, index) {\n\t\t\t\tvar model = point._model;\n\t\t\t\tvar controlPoints = helpers.splineCurve(\n\t\t\t\t\thelpers.previousItem(meta.data, index, true)._model,\n\t\t\t\t\tmodel,\n\t\t\t\t\thelpers.nextItem(meta.data, index, true)._model,\n\t\t\t\t\tmodel.tension\n\t\t\t\t);\n\n\t\t\t\t// Prevent the bezier going outside of the bounds of the graph\n\t\t\t\tmodel.controlPointPreviousX = Math.max(Math.min(controlPoints.previous.x, chartArea.right), chartArea.left);\n\t\t\t\tmodel.controlPointPreviousY = Math.max(Math.min(controlPoints.previous.y, chartArea.bottom), chartArea.top);\n\n\t\t\t\tmodel.controlPointNextX = Math.max(Math.min(controlPoints.next.x, chartArea.right), chartArea.left);\n\t\t\t\tmodel.controlPointNextY = Math.max(Math.min(controlPoints.next.y, chartArea.bottom), chartArea.top);\n\n\t\t\t\t// Now pivot the point for animation\n\t\t\t\tpoint.pivot();\n\t\t\t});\n\t\t},\n\n\t\tdraw: function(ease) {\n\t\t\tvar meta = this.getMeta();\n\t\t\tvar easingDecimal = ease || 1;\n\n\t\t\t// Transition Point Locations\n\t\t\thelpers.each(meta.data, function(point) {\n\t\t\t\tpoint.transition(easingDecimal);\n\t\t\t});\n\n\t\t\t// Transition and Draw the line\n\t\t\tmeta.dataset.transition(easingDecimal).draw();\n\n\t\t\t// Draw the points\n\t\t\thelpers.each(meta.data, function(point) {\n\t\t\t\tpoint.draw();\n\t\t\t});\n\t\t},\n\n\t\tsetHoverStyle: function(point) {\n\t\t\t// Point\n\t\t\tvar dataset = this.chart.data.datasets[point._datasetIndex];\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar index = point._index;\n\t\t\tvar model = point._model;\n\n\t\t\tmodel.radius = custom.hoverRadius ? custom.hoverRadius : helpers.getValueAtIndexOrDefault(dataset.pointHoverRadius, index, this.chart.options.elements.point.hoverRadius);\n\t\t\tmodel.backgroundColor = custom.hoverBackgroundColor ? custom.hoverBackgroundColor : helpers.getValueAtIndexOrDefault(dataset.pointHoverBackgroundColor, index, helpers.getHoverColor(model.backgroundColor));\n\t\t\tmodel.borderColor = custom.hoverBorderColor ? custom.hoverBorderColor : helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderColor, index, helpers.getHoverColor(model.borderColor));\n\t\t\tmodel.borderWidth = custom.hoverBorderWidth ? custom.hoverBorderWidth : helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderWidth, index, model.borderWidth);\n\t\t},\n\n\t\tremoveHoverStyle: function(point) {\n\t\t\tvar dataset = this.chart.data.datasets[point._datasetIndex];\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar index = point._index;\n\t\t\tvar model = point._model;\n\t\t\tvar pointElementOptions = this.chart.options.elements.point;\n\n\t\t\tmodel.radius = custom.radius ? custom.radius : helpers.getValueAtIndexOrDefault(dataset.radius, index, pointElementOptions.radius);\n\t\t\tmodel.backgroundColor = custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor, index, pointElementOptions.backgroundColor);\n\t\t\tmodel.borderColor = custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.pointBorderColor, index, pointElementOptions.borderColor);\n\t\t\tmodel.borderWidth = custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth, index, pointElementOptions.borderWidth);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Bar = function(context, config) {\n\t\tconfig.type = 'bar';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Bubble = function(context, config) {\n\t\tconfig.type = 'bubble';\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Doughnut = function(context, config) {\n\t\tconfig.type = 'doughnut';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Line = function(context, config) {\n\t\tconfig.type = 'line';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.PolarArea = function(context, config) {\n\t\tconfig.type = 'polarArea';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Radar = function(context, config) {\n\t\tconfig.options = Chart.helpers.configMerge({aspectRatio: 1}, config.options);\n\t\tconfig.type = 'radar';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar defaultConfig = {\n\t\thover: {\n\t\t\tmode: 'single'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'linear', // scatter should not use a category axis\n\t\t\t\tposition: 'bottom',\n\t\t\t\tid: 'x-axis-1' // need an ID so datasets can reference the scale\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tposition: 'left',\n\t\t\t\tid: 'y-axis-1'\n\t\t\t}]\n\t\t},\n\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\t// Title doesn't make sense for scatter since we format the data as a point\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem) {\n\t\t\t\t\treturn '(' + tooltipItem.xLabel + ', ' + tooltipItem.yLabel + ')';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t// Register the default config for this type\n\tChart.defaults.scatter = defaultConfig;\n\n\t// Scatter charts use line controllers\n\tChart.controllers.scatter = Chart.controllers.line;\n\n\tChart.Scatter = function(context, config) {\n\t\tconfig.type = 'scatter';\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nmodule.exports = keyBy;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  operations: PropTypes.array.isRequired,\n  translateOperations: PropTypes.func.isRequired\n};\n\nclass OpMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'op');\n    this.props.onMenuItemClick(operation);\n  }\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  render() {\n    const { operations, translateOperations } = this.props;\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle fa fa-ellipsis-v\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <DropdownMenu className=\"my-1 mr-2\">\n          {operations.map((item, index )=> {\n            return (<DropdownItem key={index} data-op={item} onClick={this.onMenuItemClick}>{translateOperations(item)}</DropdownItem>);\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nOpMenu.propTypes = propTypes;\n\nexport default OpMenu;\n"],"sourceRoot":""}