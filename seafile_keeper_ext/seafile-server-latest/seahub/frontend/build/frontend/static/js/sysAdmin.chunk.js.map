{"version":3,"sources":["../node_modules/lodash/_root.js","../node_modules/lodash/isArray.js","../node_modules/lodash/_getNative.js","../node_modules/reactstrap/es/Table.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","components/dialog/create-folder-dialog.js","pages/sys-admin/side-panel.js","pages/sys-admin/main-panel.js","pages/sys-admin/main-panel-topbar.js","pages/sys-admin/info.js","pages/sys-admin/statistic/statistic-nav.js","pages/sys-admin/statistic/picker.js","pages/sys-admin/statistic/statistic-common-tool.js","pages/sys-admin/statistic/statistic-chart.js","pages/sys-admin/statistic/statistic-file.js","pages/sys-admin/statistic/statistic-storage.js","pages/sys-admin/statistic/traffic-table.js","pages/sys-admin/statistic/traffic-table-body.js","pages/sys-admin/statistic/statistic-traffic-orgs.js","pages/sys-admin/statistic/statistic-traffic-users.js","pages/sys-admin/statistic/statistic-traffic.js","pages/sys-admin/statistic/statistic-users.js","pages/sys-admin/statistic/statistic-reports.js","pages/sys-admin/devices/devices-nav.js","pages/sys-admin/devices/devices-by-platform.js","pages/sys-admin/devices/desktop-devices.js","pages/sys-admin/devices/mobile-devices.js","pages/sys-admin/user-link.js","pages/sys-admin/devices/devices-errors.js","components/dialog/sysadmin-dialog/set-quota.js","components/dialog/sysadmin-dialog/sysadmin-import-user-dialog.js","components/select-editor/sysadmin-user-role-editor.js","components/dialog/sysadmin-dialog/sysadmin-add-user-dialog.js","components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog.js","models/sysadmin-user.js","models/sysadmin-admin-user.js","pages/sys-admin/search.js","pages/sys-admin/users/users-nav.js","components/select-editor/sysadmin-user-status-editor.js","pages/sys-admin/users/users-content.js","pages/sys-admin/users/users.js","pages/sys-admin/users/admin-users.js","pages/sys-admin/users/ldap-imported-users.js","pages/sys-admin/users/ldap-users.js","pages/sys-admin/users/search-users.js","components/dialog/sysadmin-dialog/set-upload-download-rate-limit.js","components/dialog/sysadmin-dialog/update-user.js","pages/sys-admin/users/user-nav.js","pages/sys-admin/users/user-info.js","pages/sys-admin/users/user-repos.js","pages/sys-admin/users/user-shared-repos.js","pages/sys-admin/users/user-links.js","pages/sys-admin/users/user-groups.js","components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog.js","pages/sys-admin/repos/repos-nav.js","components/dialog/sysadmin-dialog/sysadmin-share-to-user.js","components/dialog/sysadmin-dialog/sysadmin-share-to-group.js","components/dialog/sysadmin-dialog/sysadmin-share-dialog.js","components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog.js","pages/sys-admin/repos/repos.js","pages/sys-admin/repos/all-repos.js","pages/sys-admin/repos/system-repo.js","pages/sys-admin/repos/trash-repos.js","pages/sys-admin/repos/search-repos.js","models/system-admin/dirent.js","pages/sys-admin/repos/dir-path-bar.js","pages/sys-admin/repos/dir-content.js","pages/sys-admin/repos/dir-view.js","components/dialog/sysadmin-dialog/sysadmin-create-group-dialog.js","components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog.js","pages/sys-admin/groups/groups-content.js","pages/sys-admin/groups/groups.js","pages/sys-admin/groups/search-groups.js","pages/sys-admin/groups/group-nav.js","pages/sys-admin/groups/group-repos.js","components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog.js","components/select-editor/sysadmin-group-role-editor.js","pages/sys-admin/groups/group-members.js","pages/sys-admin/departments/departments.js","components/dialog/sysadmin-dialog/sysadmin-add-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog.js","pages/sys-admin/departments/group-item.js","pages/sys-admin/departments/department-list.js","components/dialog/sysadmin-dialog/sysadmin-add-member-dialog.js","components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog.js","pages/sys-admin/departments/department.js","pages/sys-admin/departments/sub-departments.js","components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog.js","pages/sys-admin/departments/member-item.js","pages/sys-admin/departments/department-members.js","components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog.js","pages/sys-admin/departments/repo-item.js","pages/sys-admin/departments/department-libraries.js","pages/sys-admin/links/links-nav.js","pages/sys-admin/links/share-links.js","pages/sys-admin/links/upload-links.js","components/dialog/sysadmin-dialog/sysadmin-add-org-dialog.js","pages/sys-admin/orgs/orgs-content.js","pages/sys-admin/orgs/orgs.js","pages/sys-admin/orgs/search-orgs.js","components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog.js","components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog.js","pages/sys-admin/orgs/org-nav.js","pages/sys-admin/orgs/org-info.js","components/select-editor/sysadmin-user-membership-editor.js","pages/sys-admin/orgs/org-users.js","pages/sys-admin/orgs/org-groups.js","pages/sys-admin/orgs/org-repos.js","components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog.js","pages/sys-admin/institutions/institutions.js","pages/sys-admin/institutions/institution-nav.js","pages/sys-admin/institutions/institution-info.js","components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog.js","pages/sys-admin/institutions/institution-users.js","pages/sys-admin/institutions/institution-admins.js","pages/sys-admin/logs-page/logs-nav.js","components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog.js","pages/sys-admin/logs-page/login-logs.js","pages/sys-admin/logs-page/file-access-item-menu.js","pages/sys-admin/logs-page/file-access-toggle-filter.js","pages/sys-admin/logs-page/file-access-logs.js","pages/sys-admin/logs-page/file-update-logs.js","pages/sys-admin/logs-page/share-permission-logs.js","pages/sys-admin/web-settings/section.js","pages/sys-admin/web-settings/setting-item-base.js","pages/sys-admin/web-settings/input-item.js","pages/sys-admin/web-settings/file-item.js","pages/sys-admin/web-settings/checkbox-item.js","pages/sys-admin/web-settings/web-settings.js","components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog.js","pages/sys-admin/notifications/notifications.js","pages/sys-admin/file-scan-records.js","pages/sys-admin/work-weixin/work-weixin-department-members-list.js","pages/sys-admin/work-weixin/work-weixin-departments-tree-node.js","pages/sys-admin/work-weixin/work-weixin-departments-tree-panel.js","components/dialog/import-work-weixin-department-dialog.js","pages/sys-admin/work-weixin-departments.js","pages/sys-admin/dingtalk/dingtalk-department-members-list.js","pages/sys-admin/dingtalk/dingtalk-departments-tree-node.js","pages/sys-admin/dingtalk/dingtalk-departments-tree-panel.js","components/dialog/import-dingtalk-department-dialog.js","pages/sys-admin/dingtalk-departments.js","pages/sys-admin/invitations/invitations.js","components/dialog/terms-editor-dialog.js","components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog.js","utils/markdown-utils.js","components/dialog/terms-preview-dialog.js","pages/sys-admin/terms-and-conditions/item.js","pages/sys-admin/terms-and-conditions/content.js","pages/sys-admin/terms-and-conditions/terms-and-conditions.js","pages/sys-admin/virus-scan/nav.js","pages/sys-admin/virus-scan/all-virus-files.js","pages/sys-admin/virus-scan/unhandled-virus-files.js","pages/sys-admin/admin-logs/logs-nav.js","pages/sys-admin/admin-logs/operation-logs.js","pages/sys-admin/admin-logs/login-logs.js","pages/sys-admin/abuse-reports.js","pages/sys-admin/index.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_toKey.js","../node_modules/lodash/_baseIsEqual.js","../node_modules/lodash/_Map.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/keys.js","../node_modules/lodash/isLength.js","../node_modules/lodash/_isKey.js","../node_modules/lodash/isSymbol.js","components/dialog/share-admin-link.js","../node_modules/deep-copy/index.js","../node_modules/color-convert/conversions.js","../node_modules/color-name/index.js","../node_modules/lodash/_Stack.js","../node_modules/lodash/eq.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_equalArrays.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/_isStrictComparable.js","../node_modules/lodash/_matchesStrictComparable.js","../node_modules/lodash/_baseGet.js","../node_modules/lodash/_castPath.js","components/dialog/commit-details.js","../node_modules/react-chartjs-2/es/index.js","components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog.js","../node_modules/chart.js/src/chart.js","../node_modules/chart.js/src/core/core.js","../node_modules/chart.js/src/core/core.helpers.js","../node_modules/chartjs-color/index.js","../node_modules/color-convert/index.js","../node_modules/color-convert/route.js","../node_modules/chartjs-color-string/color-string.js","../node_modules/chart.js/src/core/core.canvasHelpers.js","../node_modules/chart.js/src/core/core.element.js","../node_modules/chart.js/src/core/core.animation.js","../node_modules/chart.js/src/core/core.controller.js","../node_modules/chart.js/src/core/core.datasetController.js","../node_modules/chart.js/src/core/core.layoutService.js","../node_modules/chart.js/src/core/core.scaleService.js","../node_modules/chart.js/src/core/core.plugin.js","../node_modules/chart.js/src/core/core.scale.js","../node_modules/chart.js/src/core/core.title.js","../node_modules/chart.js/src/core/core.legend.js","../node_modules/chart.js/src/core/core.tooltip.js","../node_modules/chart.js/src/elements/element.arc.js","../node_modules/chart.js/src/elements/element.line.js","../node_modules/chart.js/src/elements/element.point.js","../node_modules/chart.js/src/elements/element.rectangle.js","../node_modules/chart.js/src/scales/scale.linearbase.js","../node_modules/chart.js/src/scales/scale.category.js","../node_modules/chart.js/src/scales/scale.linear.js","../node_modules/chart.js/src/scales/scale.logarithmic.js","../node_modules/chart.js/src/scales/scale.radialLinear.js","../node_modules/chart.js/src/scales/scale.time.js","../node_modules/chart.js/src/controllers/controller.bar.js","../node_modules/chart.js/src/controllers/controller.bubble.js","../node_modules/chart.js/src/controllers/controller.doughnut.js","../node_modules/chart.js/src/controllers/controller.line.js","../node_modules/chart.js/src/controllers/controller.polarArea.js","../node_modules/chart.js/src/controllers/controller.radar.js","../node_modules/chart.js/src/charts/Chart.Bar.js","../node_modules/chart.js/src/charts/Chart.Bubble.js","../node_modules/chart.js/src/charts/Chart.Doughnut.js","../node_modules/chart.js/src/charts/Chart.Line.js","../node_modules/chart.js/src/charts/Chart.PolarArea.js","../node_modules/chart.js/src/charts/Chart.Radar.js","../node_modules/chart.js/src/charts/Chart.Scatter.js","../node_modules/lodash/isEqual.js","../node_modules/lodash/_baseIsEqualDeep.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_stackClear.js","../node_modules/lodash/_stackDelete.js","../node_modules/lodash/_stackGet.js","../node_modules/lodash/_stackHas.js","../node_modules/lodash/_stackSet.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_arraySome.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_equalByTag.js","../node_modules/lodash/_Uint8Array.js","../node_modules/lodash/_mapToArray.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_equalObjects.js","../node_modules/lodash/_getAllKeys.js","../node_modules/lodash/_baseGetAllKeys.js","../node_modules/lodash/_arrayPush.js","../node_modules/lodash/_getSymbols.js","../node_modules/lodash/_arrayFilter.js","../node_modules/lodash/stubArray.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/_baseKeys.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_nativeKeys.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_getTag.js","../node_modules/lodash/_DataView.js","../node_modules/lodash/_Promise.js","../node_modules/lodash/_Set.js","../node_modules/lodash/_WeakMap.js","../node_modules/lodash/keyBy.js","../node_modules/lodash/_baseAssignValue.js","../node_modules/lodash/_defineProperty.js","../node_modules/lodash/_createAggregator.js","../node_modules/lodash/_arrayAggregator.js","../node_modules/lodash/_baseAggregator.js","../node_modules/lodash/_baseEach.js","../node_modules/lodash/_baseForOwn.js","../node_modules/lodash/_baseFor.js","../node_modules/lodash/_createBaseFor.js","../node_modules/lodash/_createBaseEach.js","../node_modules/lodash/_baseIteratee.js","../node_modules/lodash/_baseMatches.js","../node_modules/lodash/_baseIsMatch.js","../node_modules/lodash/_getMatchData.js","../node_modules/lodash/_baseMatchesProperty.js","../node_modules/lodash/get.js","../node_modules/lodash/_stringToPath.js","../node_modules/lodash/_memoizeCapped.js","../node_modules/lodash/memoize.js","../node_modules/lodash/toString.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/hasIn.js","../node_modules/lodash/_baseHasIn.js","../node_modules/lodash/_hasPath.js","../node_modules/lodash/identity.js","../node_modules/lodash/property.js","../node_modules/lodash/_baseProperty.js","../node_modules/lodash/_basePropertyDeep.js","components/dialog/op-menu.js"],"names":["freeGlobal","require","freeSelf","self","Object","root","Function","module","exports","isArray","Array","baseIsNative","getValue","object","key","value","undefined","propTypes","className","PropTypes","string","cssModule","size","bordered","bool","borderless","striped","dark","hover","responsive","oneOfType","tag","tagPropType","responsiveTag","innerRef","func","Table","props","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","table","React","createElement","_extends","ref","responsiveClassName","defaultProps","Symbol","getRawTag","objectToString","symToStringTag","toStringTag","CreateForder","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","call","handleChange","e","target","trim","setState","isSubmitBtnActive","childName","handleSubmit","state","newName","checkDuplicatedName","errMessage","gettext","replace","Utils","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","preventDefault","toggle","addFolderCancel","_createClass","this","length","_jsxs","Modal","isOpen","autoFocus","children","_jsx","ModalHeader","ModalBody","Form","FormGroup","Label","for","Input","id","onKeyPress","onChange","Alert","color","ModalFooter","Button","onClick","disabled","Component","SidePanel","_len","arguments","args","_key","apply","concat","getActiveClass","tab","currentTab","_this2","isSidePanelClosed","Logo","onCloseSidePanel","canViewSystemInfo","Link","to","siteRoot","tabItemClick","isPro","canViewStatistic","otherPermission","constanceEnabled","canConfigSystem","canManageLibrary","canManageUser","canManageGroup","multiTenancy","multiInstitution","sysadminExtraEnabled","canViewUserLog","enableFileScan","enableGuestInvitation","enableTermsAndConditions","canViewAdminLog","enableWorkWeixin","enableDingtalk","enableShareLinkReportAbuse","MainPanel","_Component","MainPanelTopbar","title","toggleSidePanel","search","Account","isAdminPanel","Info","uploadLicenseFile","fileInput","current","files","file","seafileAPI","sysAdminUploadLicense","then","res","info","sysInfo","assign","data","with_license","catch","error","errMsg","getErrorMsg","toaster","danger","openFileInput","click","renderLicenseDescString","license_mode","license_to","license_expiration","window","app","config","lang","loading","errorMsg","createRef","sysAdminGetSysInfo","_this$state$sysInfo","org_count","repos_count","total_files_count","total_storage","total_devices_count","current_connected_devices_count","license_maxusers","multi_tenancy_enabled","active_users_count","users_count","groups_count","_this$state","Fragment","_objectSpread","Loading","isDefaultAdmin","type","href","bytesToSize","Nav","navItems","name","urlPart","text","currentItem","map","item","index","propsTypes","disabledDate","isRequired","FORMAT","Picker","defaultCalendarValue","moment","locale","clone","calendar","Calendar","defaultValue","format","translateCalendar","DatePicker","_ref","placeholder","tabIndex","readOnly","StatisticCommonTool","changeActive","statisticTypeName","statisticType","startTime","endTime","subtract","getActiviesFiles","disabledStartDate","startValue","today","endValue","isBefore","disabledEndDate","field","_defineProperty","onSubmit","_this$state2","bind","StatisticChart","titleCallback","tooltipItem","datasets","datasetIndex","label","yLabel","ticksCallback","values","opations","_this$props","labels","filesData","isTitleCallback","isTicksCallback","suggestedMaxNumbers","isLegendStatus","chartTitle","options","display","fontSize","elements","line","fill","tension","borderWidth","legend","usePointStyle","tooltips","callbacks","layout","padding","right","scales","yAxes","ticks","beginAtZero","suggestedMax","callback","xAxes","maxTicksLimit","nextProps","Line","StatisticFile","groupBy","sysAdminStatisticFiles","added","deleted","visited","modified","forEach","push","datetime","addedData","borderColor","backgroundColor","visitedData","modifiedData","deletedData","isLoading","err","StatisticNav","StatisticStorage","sysAdminStatisticStorages","totalStorage","TrafficTable","sortBy","sortIcon","sortOrder","width","sortItems","TrafficTableBody","trafficName","userTrafficItem","email","org_name","syncUploadSize","sync_file_upload","syncDownloadSize","sync_file_download","webUploadSize","web_file_upload","webDownloadSize","web_file_download","linkUploadSize","link_file_upload","linkDownloadSize","link_file_download","OrgsTraffic","getPreviousPage","getTrafficList","month","currentPage","getNextPage","test","errorMessage","initPage","blur","page","perPage","orderBy","sysAdminListOrgTraffic","orgTrafficList","org_monthly_traffic_list","slice","hasNextPage","has_next_page","resetPerPage","newPerPage","initMonth","urlParams","URL","location","searchParams","_this$state3","parseInt","get","_this$state4","Paginator","gotoPreviousPage","gotoNextPage","curPerPage","UsersTraffic","sysAdminListUserTraffic","userTrafficList","user_monthly_traffic_list","StatisticTraffic","changeTabActive","activeName","tabActive","sysAdminStatisticTraffic","total_upload","total_download","link_upload","link_download","sync_upload","sync_download","web_upload","web_download","linkData","syncData","webData","renderCommonTool","_assertThisInitialized","StatisticUsers","sysAdminStatisticActiveUsers","count","userCount","StatisticReports","onGenerateReports","url","Content","getPreviousPageDevicesList","getDevicesListByPage","pageInfo","current_page","getNextPageDevicesList","items","emptyTip","EmptyTip","Item","_Component2","_super2","handleMouseOver","isOpIconShown","handleMouseOut","handleUnlink","is_desktop_client","toggleUnlinkDeviceDialog","unlinkDevice","isUnlinkDeviceDialogOpen","deleteFiles","_this2$props$item","platform","device_id","user","sysAdminUnlinkDevice","unlinked","message","success","onMouseEnter","onMouseLeave","user_name","client_version","device_name","last_login_ip","last_accessed","fromNow","SysAdminUnlinkDevice","toggleDialog","DevicesByPlatform","_Component3","_super3","_this3","devicesPlatform","per_page","sysAdminListDevices","devicesData","devices","page_info","_this4","_this$state2$currentP","DesktopDevices","DevicesNav","MobileDevices","UserLink","encodeURIComponent","getPreviousPageDeviceErrorsList","getDeviceErrorsListByPage","getNextPageDeviceErrorsList","device_ip","repo_id","repo_name","error_msg","error_time","DeviceErrors","sysAdminListDeviceErrors","devicesErrors","device_errors","isCleanBtnShown","clean","sysAdminClearDeviceErrors","_this$state$currentPa","SetQuotaDialog","handleQuotaChange","quota","updateQuota","InputGroup","InputGroupAddon","addonType","InputGroupText","SysAdminImportUserDialog","fileInputRef","uploadFile","fileName","substr","lastIndexOf","importUserInBatch","SysAdminUserRoleEditor","translateRoles","role","SelectEditor","isTextMode","isEditIconShow","roleOptions","currentOption","currentRole","onOptionChanged","onRoleChanged","translateOption","SysAdminAddUserDialog","checkSubmitBtnActive","password","passwordAgain","btnActive","togglePasswordVisible","isPasswordVisible","inputPassword","passwd","inputPasswordAgain","generatePassword","val","inputEmail","inputName","updateRole","showRole","addUser","dialogTitle","autoComplete","availableRoles","SysAdminBatchAddAdminDialog","handleSelectChange","addAdminInBatch","UserSelect","isMulti","onSelectChange","SysAdminUser","contact_email","login_id","last_login","last_access_time","create_time","is_active","is_staff","reference_id","department","quota_total","quota_usage","institution","org_id","isSelected","SysAdminAdminUser","admin_role","Search","handleInputChange","submit","style","haveLDAP","SysAdminUserStatusEditor","translateStatus","status","statusOptions","currentStatus","onStatusChanged","_window$sysadmin$page","sysadmin","pageOptions","availableAdminRoles","institutions","onFreezedItem","isItemFreezed","onUnfreezedItem","getListByPage","sortByQuotaUsage","isAdmin","isAllUsersSelected","columns","spaceText","spaceEl","colSpaceText","colNameText","colCreatedText","toggleSelectAllUsers","checked","updateUser","deleteUser","updateAdminRole","revokeAdmin","onUserSelected","isLDAPImported","isSearchResult","handleMouseEnter","highlight","handleMouseLeave","isOpIconShow","toggleSetQuotaDialog","isSetQuotaDialogOpen","toggleDeleteUserDialog","isDeleteUserDialogOpen","toggleResetUserPasswordDialog","isResetUserPasswordDialogOpen","toggleRevokeAdminDialog","isRevokeAdminDialogOpen","updateStatus","isActive","notify","translateAdminRole","updateInstitution","translateInstitution","inst","resetPassword","sysAdminResetUserPassword","reset_tip","getMenuOperations","_this3$props","list","source","translateOperations","translateResult","onMenuItemClick","operation","_this$props2","itemName","deleteDialogMsg","resetPasswordDialogMsg","revokeAdminDialogMsg","username","OpMenu","operations","SysAdminUserSetQuotaDialog","CommonOperationConfirmationDialog","executeOperation","confirmBtnText","Users","toggleImportUserDialog","isImportUserDialogOpen","toggleAddUserDialog","isAddUserDialogOpen","toggleBatchSetQuotaDialog","isBatchSetQuotaDialogOpen","toggleBatchDeleteUserDialog","isBatchDeleteUserDialogOpen","hasUserSelected","selectedUserList","users","userList","filter","thisuser","getUserList","sysAdminListAdmins","admin_user_list","getUsersListByPage","sysAdminListUsers","total_count","URLSearchParams","set","toString","navigate","sysAdminDeleteUser","newUserList","setUserQuotaInBatch","quotaTotal","emails","sysAdminSetUserQuotaInBatch","resultUser","deleteUserInBatch","sysAdminDeleteUserInBatch","oldUser","some","deletedUser","msg","failed","sysAdminImportUserViaFile","sysAdminAddUser","unshift","add_user_tip","sysAdminUpdateUser","update_status_tip","sysAdminUpdateAdminRole","getOperationsForAll","toggleBatchAddAdminDialog","getCurrentNavItem","isBatchAddAdminDialogOpen","sysAdminAddAdminInBatch","getSearch","searchItems","keyword","_this$state3$sortBy","_this$state3$sortOrde","_this$props3","UsersNav","AdminUsers","LDAPImportedUsers","sysAdminListLDAPUsers","ldap_user_list","SearchUsers","getItems","sysAdminSearchUsers","query","user_list","getPreviousPageList","getNextPageList","handleKeyDown","keyCode","params","document","row","Col","sm","onKeyDown","SysAdminSetUploadDownloadRateLimitDialog","handleRateLimitChange","rateLimit","updateUploadDownloadRateLimit","uploadOrDownload","UpdateUser","updateValue","userName","twoFactorAuthEnabled","toggleSetUserUploadRateLimitDialog","isSetUserUploadRateLimitDialogOpen","toggleSetUserDownloadRateLimitDialog","isSetUserDownloadRateLimitDialogOpen","currentKey","isUpdateUserDialogOpen","toggleSetNameDialog","toggleSetUserLoginIDDialog","toggleSetUserComtactEmailDialog","toggleSetUserReferenceIDDialog","toggleUpdateUserDialog","showEditIcon","action","userInfo","src","avatar_url","alt","upload_rate_limit","download_rate_limit","has_default_device","disable2FA","check","is_force_2fa","toggleForce2fa","SysAdminSetQuotaDialog","SysAdminUpdateUserDialog","User","sysAdminDeleteTwoFactorAuth","sysAdminSetForceTwoFactorAuth","decodeURIComponent","sysAdminGetUser","enableSysAdminViewRepo","deleteRepo","transferRepo","toggleDeleteDialog","isDeleteDialogOpen","toggleTransferDialog","isTransferDialogOpen","owner","renderRepoName","repo","encrypted","iconUrl","getLibIconUrl","iconTitle","getLibIconTitle","last_modified","TransferDialog","canTransferToDept","Repos","repoID","sysAdminDeleteRepo","newRepoList","repoList","sysAdminTransferRepo","_this5","sysAdminListReposByOwner","repos","getOwnerLink","link","owner_email","indexOf","owner_name","groupID","substring","last_modify","sysAdminListShareInRepos","repo_list","deleteItem","toggleLinkDialog","isLinkDialogOpen","getRoleText","roleText","getIconUrl","is_dir","getFolderIconUrl","getFileIconUrl","obj_name","view_cnt","LinkDialog","Links","token","sysAdminDeleteShareLink","shareLinkItems","sysAdminDeleteUploadLink","uploadLinkItems","sysAdminListShareLinksByUser","share_link_list","sort","a","b","sysAdminListUploadLinksByUser","upload_link_list","parent_group_id","created_at","Groups","sysAdminListGroupsJoinedByUser","group_list","SysAdminCreateRepoDialog","handleRepoNameChange","repoName","ownerEmail","createRepo","option","UserItem","isOperationShow","deleteShareItem","user_email","onChangeUserPermission","permission","currentPermission","getSharedPermission","SharePermissionEditor","permissions","onPermissionChanged","UserList","_React$Component2","SysAdminShareToUser","_React$Component3","selectedOption","setPermission","shareToUser","i","sysAdminAddRepoSharedItem","newItems","sharedItems","refs","userSelect","clearSelect","response","useremail","sysAdminDeleteRepoSharedItem","userEmail","sysAdminUpdateRepoSharedItemPermission","updateSharedItems","sharedItem","sharedItemUsername","is_admin","sysAdminListRepoSharedItems","colSpan","GroupItem","group_id","group_name","GroupList","NoOptionsMessage","innerProps","margin","textAlign","SysAdminShareToGroup","loadOptions","shareableGroups","obj","listSharedGroups","shareToGroup","groups","sharedItemGroupID","Select","maxMenuHeight","inputId","components","SysAdminShareDialog","getInitialActiveTab","activeTab","renderDirContent","enableDirPrivateShare","isGroupOwnedRepo","pills","NavItem","NavLink","TabContent","TabPane","tabId","itemType","itemPath","isRepoOwner","maxWidth","SysAdminLibHistorySettingDialog","days","keepDays","autoHistory","expireDays","sysAdminUpdateRepoHistorySetting","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","sysAdminGetRepoHistorySetting","sortByFileCount","sortBySize","initialSortIcon","onDeleteRepo","onTransferRepo","isRepoDeleted","toggleShareDialog","toggleHistorySettingDialog","isShareDialogOpen","isHistorySettingDialogOpen","getOperations","departmentID","file_count","ModalPortal","repoEncrypted","userPerm","DeleteRepoDialog","AllRepos","toggleCreateRepoDialog","isCreateRepoDialogOpen","getReposByPage","sysAdminListAllRepos","Owner","sysAdminCreateRepo","targetRepo","searchRepos","repoNameOrID","_this$state3$currentP","ReposNav","description","SystemRepo","sysAdminGetSystemRepoInfo","trashReposExpireDays","onRestoreRepo","sysAdminDeleteTrashRepo","sysAdminRestoreTrashRepo","toggleDeleteRepoDialog","isDeleteRepoDialogOpen","toggleRestoreRepoDialog","isRestoreRepoDialogOpen","delete_time","TrashRepos","toggleCleanTrashDialog","isCleanTrashDialogOpen","sysAdminListTrashRepos","cleanTrash","sysAdminCleanTrashRepos","sysAdminSearchTrashRepos","SearchRepos","getRepos","sysAdminSearchRepos","handleNameInputChange","offset","Dirent","mtime","last_update","file_size","is_file","DirPath","onPathClick","getEventData","turnPathToLink","pathList","split","nodePath","isSystemRepo","currentPath","pathElem","DirentItem","openFolder","dirent","deleteDirent","downloadDirent","fromSystemRepo","getDirentIcon","DirContent","direntList","DirView","loadDirentList","toggleNewFolderDialog","isNewFolderDialogOpen","createNewFolder","folderName","getFileName","sysAdminCreateSysRepoFolder","new_dirent","direntPath","joinPath","sysAdminListRepoDirents","_res$data","is_system_library","dirent_list","encodePath","history","replaceState","sysAdminDeleteRepoDirent","sysAdminGetRepoFileDownloadURL","download_url","onFileInputChange","sydAdminGetSysRepoItemUploadURL","formData","FormData","append","axios","post","upload_link","fileObj","newDirent","Date","getTime","dirs","splice","DirPathBar","CreateFolderDialog","SysAdminCreateGroupDialog","groupName","createGroup","SysAdminTransferGroupDialog","submitBtnDisabled","receiver","transferGroup","dangerouslySetInnerHTML","__html","deleteGroup","groupUrl","toggleCreateGroupDialog","isCreateGroupDialogOpen","getGroupListByPage","sysAdminListAllGroups","groupList","OnwerEmail","sysAdminCreateNewGroup","newGroupList","sysAdminDismissGroupByID","receiverEmail","sysAdminTransferGroup","searchGroups","SearchGroups","getGroups","sysAdminSearchGroups","unshareRepo","toggleUnshareRepoDialog","isUnshareRepoDialogOpen","dialogMsg","shared_by","shared_by_name","GroupRepos","sysAdminUnshareRepoFromGroup","sysAdminListGroupRepos","libraries","GroupNav","SysAdminGroupAddMemberDialog","selectedOptions","isSubmitBtnDisabled","addMembers","SysAdminGroupRoleEditor","removeMember","updateMemberRole","GroupMembers","sysAdminListGroupMembers","memberList","members","toggleAddMemgerDialog","isAddMemberDialogOpen","sysAdminAddGroupMember","newMemberList","duration","sysAdminDeleteGroupMember","sysAdminUpdateGroupMemberRole","Departments","AddDepartDialog","validateName","parentGroup","parentGroupID","sysAdminAddNewDepartment","departName","onAddNewDepartment","header","RenameDepartmentDialog","sysAdminRenameDepartment","departmentName","onDepartmentNameChanged","onAfterModelOpened","newInput","focus","select","onOpened","DeleteDepartmentDialog","deleteDepart","group","sysAdminDeleteDepartment","onDeleteDepartment","tipMessage","SetGroupQuotaDialog","setGroupQuota","newQuota","sysAdminUpdateDepartmentQuota","onSetQuota","toggleRenameDialog","isRenameDialogOpen","newHref","onSetDepartmentQuota","DepartmentList","listDepartments","sysAdminListAllDepartments","toggleAddDepartDialog","isShowAddDepartDialog","dept","newDepartment","topbarChildren","AddMemberDialog","orgSelect","onAddNewMembers","AddRepoDialog","sysAdminAddRepoInDepartment","onAddNewRepo","Department","getDepartmentInfo","sysAdminGetDepartmentInfo","ancestorGroups","ancestor_groups","toggleRenameDepartmentDialog","isShowRenameDepartmentDialog","toggleAddRepoDialog","isShowAddRepoDialog","toggleAddMemberDialog","isShowAddMemberDialog","toggleAddDepartmentDialog","isShowAddDepartmentDialog","topBtn","AddDepartmentDialog","ancestor","SubDepartments","listSubDepartments","onSubDepartmentNameChanged","DeleteMemberDialog","deleteMember","member","onMemberChanged","MemberItem","toggleMemberRoleMenu","showRoleMenu","onChangeUserRole","roles","RoleEditor","toggleItemFreezed","showDeleteMemberDialog","DepartmentMembers","listMembers","currentPageInfo","membersErrorMsg","toggleCancel","isFreezed","deletedMember","newMembers","_toConsumableArray","sysAdminDeleteRepoInDepartment","onRepoChanged","RepoItem","showDeleteRepoDialog","DepartmentDetail","listGroupRepo","deletedRepo","newRepo","getShareLinksByPage","sortByTime","sortByCount","deleteShareLink","renderExpiration","expire_date","expire_time","is_expired","deleteIcon","onMouseOver","onMouseOut","creator_email","creator_name","ctime","ShareLinks","_this4$state","sysAdminListShareLinks","shareLinkList","_this4$state2","linkToken","newShareLinkList","LinksNav","getUploadLinksByPage","deleteUploadLink","UploadLinks","sysAdminListAllUploadLinks","uploadLinkList","newUploadLinkList","SysAdminAddOrgDialog","orgName","addOrg","deleteOrg","sysAdminGetOrg","repoCount","Orgs","getItemsByPage","sysAdminListOrgs","orgList","organizations","toggleAddOrgDialog","isAddOrgDialogOpen","orgID","orgInfo","sysAdminUpdateOrg","newOrgList","org","sysAdminAddOrg","sysAdminDeleteOrg","SearchOrgs","sysAdminSearchOrgs","organization_list","SysAdminSetOrgNameDialog","updateName","SysAdminSetOrgMaxUserNumberDialog","isSetNameDialogOpen","toggleSetMaxUserNumberDialog","isSetMaxUserNumberDialogOpen","_this$props$orgInfo","max_user_number","SysAdminSetOrgQuotaDialog","updateMaxUserNumber","OrgInfo","newOrgInfo","newValue","maxUserNumber","OrgNav","SysAdminUserMembershipEditor","updateMembership","toggleResetPasswordDialog","isResetPasswordDialogOpen","statusValue","membershipValue","active","is_org_staff","OrgUsers","newUserInfo","sysAdminAddOrgUser","sysAdminDeleteOrgUser","sysAdminUpdateOrgUser","isOrgStaff","sysAdminListOrgUsers","OrgGroups","sysAdminListOrgGroups","OrgRepos","sysAdminListOrgRepos","SysAdminAddInstitutionDialog","addInstitution","getInstitutionsByPage","deleteInstitution","institutionName","Institutions","sysAdminListInstitutions","institutionList","institution_list","toggleAddInstitutionDialog","isAddInstitutionDialogOpen","sysAdminAddInstitution","institutionID","sysAdminDeleteInstitution","institutionInfo","user_count","quota_used","SysAdminSetInstitutionQuotaDialog","InstitutionInfo","sysAdminUpdateInstitution","newInstitutionInfo","sysAdminGetInstitution","InstitutionNav","getInstitutionUsersByPage","setAdmin","toggleSetAdminDialog","isSetAdminDialogOpen","is_institution_admin","InstitutionUsers","sysAdminListInstitutionUsers","sysAdminUpdateInstitutionUser","sysAdminAddInstitutionUserBatch","successArray","failedArray","sysAdminDeleteInstitutionUser","InstitutionAdmins","sysAdminListInstitutionAdmins","LogsExportExcelDialog","downloadExcel","isValidDateStr","startDateStr","endDateStr","logType","isValid","handleStartChange","handleEndChange","getLogsByPage","login_ip","log_success","login_time","LoginLogs","toggleExportExcelDialog","isExportExcelDialogOpen","sysAdminListLoginLogs","logList","login_log_list","LogsNav","FilterMenu","toggleMenu","isMenuShown","toggleFreezeItem","onItemClick","filterItems","filterBy","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","ToggleFilter","toggleFilter","toggleFilterByUser","filterByUser","toggleFilterByRepo","filterByRepo","freezed","userFilteredBy","repoFilteredBy","isHighlighted","event_type","ip","device","time","file_or_dir_name","FileAccessLogs","sysAdminListFileAccessLogs","file_access_log_list","updateURL","delete","toggleCommitDetailsDialog","isCommitDetailsDialogOpen","showCommitDetails","file_operation","repo_encrypted","CommitDetails","commitID","commit_id","commitTime","FileUpdateLogs","sysAdminListFileUpdateLogs","file_update_log_list","getActionTextByEType","etype","getShareTo","share_type","to_user_email","to_user_name","to_group_id","to_group_name","from_user_email","from_user_name","sharePerms","folder","date","SharePermissionLogs","sysAdminListSharePermissionLogs","share_permission_log_list","Section","headingText","SettingItemBase","helpTip","displayName","mainContent","extraContent","Row","md","WebSettingInput","toggleBtns","isBtnsShown","hideBtns","onInputChange","saveSetting","keyText","inputType","onFocus","onBlur","onMouseDown","WebSettingFile","postFile","filePath","fileWidth","fileHeight","height","WebSettingCheckbox","valueToNum","inputChecked","WebSettings","sysAdminSetSysSettingInfo","config_dict","fileType","sysAdminUpdateLogo","sysAdminUpdateFavicon","sysAdminUpdateLoginBG","logoPath","logo_path","faviconPath","favicon_path","loginBGPath","login_bg_image_path","mediaUrl","sysAdminGetSysSettingInfo","InputItem","FileItem","CheckboxItem","SysAdminAddSysNotificationDialog","addNotification","deleteNotification","setToCurrent","is_current","Notifications","toggleAddNotificationDialog","isAddNotificationDialogOpen","sysAdminAddSysNotification","notificationList","notification","sysAdminDeleteSysNotification","sysAdminSetSysNotificationToCurrent","sysAdminListAllSysNotifications","notifications","records","record","detail","suggestion","FileScanRecords","listFileScanRecords","record_list","WorkWeixinDepartmentMembersList","newUsersTempObj","checkedDepartmentId","isMembersListLoading","canCheckUserIds","membersList","avatar","onUserChecked","userid","mobile","isCheckedAll","onAllUsersChecked","WorkWeixinDepartmentsTreeNode","toggleChildren","stopPropagation","isChildrenShow","dropdownToggle","dropdownOpen","importDepartmentDialogToggle","depart","renderTreeNodes","departmentsTree","onChangeDepartment","changeDept","toggleClass","nodeInnerClass","direction","opacity","WorkWeixinDepartmentsTreePanel","isTreeLoading","ImportWorkWeixinDepartmentDialog","onImportDepartmentSubmit","departmentsCount","membersCount","WorkWeixinDepartments","getDepartmentsTree","childIds","parentIds","parentid","intersection","v","rootIds","cloneData","deepCopy","father","branchArr","child","getWorkWeixinDepartmentsList","adminListWorkWeixinDepartments","importDepartmentChildrenCount","importDepartmentMembersCount","membersTempObj","handleError","getWorkWeixinDepartmentMembersList","department_id","adminListWorkWeixinDepartmentMembers","fetch_child","userlist","getCanCheckUserIds","userIds","keys","newUsersTempList","JSON","stringify","adminAddWorkWeixinUsersBatch","handleSubmitSuccess","fails","_success$i","j","departmentId","k","importDepartment","isImportDepartmentDialogShow","adminImportWorkWeixinDepartment","handleImportDepartmentSubmitSuccess","handleImportDepartmentSubmitFailed","successes","len","successMsg","department_name","api_user_name","fail","failName","canImportDepartment","DingtalkDepartmentMembersList","DingtalkDepartmentsTreeNode","DingtalkDepartmentsTreePanel","ImportDingtalkDepartmentDialog","DingtalkDepartments","getDingtalkDepartmentsList","adminListDingtalkDepartments","getDingtalkDepartmentMembersList","adminListDingtalkDepartmentMembers","adminAddDingtalkUsersBatch","adminImportDingtalkDepartment","getInviteTypeText","invite_type","inviter_email","inviter_name","accept_time","accepter_email","accepter_name","invite_time","Invitations","sysAdminListInvitations","invitation_list","targetItem","sysAdminDeleteInvitation","deleteItemInBatch","sysAdminDeleteExpiredInvitations","prevItems","totalItemCount","TermsEditorDialog","event","isContentChanged","currentContent","getCurrentContent","onCommit","onCloseEditorDialog","simpleEditor","hasContentChange","getMarkdown","setSimpleEditorRef","editor","content","wrapClassName","contentClassName","SimpleEditor","onRef","AddOrUpdateTermDialog","handleNameChange","handleVersionNumberChange","versionNumber","handleTextChange","setActive","setInActive","addTerm","isNaN","isUpdate","updateTerm","onContentClick","isConditionsEditorDialogShow","onUpdateContent","oldTermObj","version_number","activate_time","TermsPreviewWidget","hrefReg","imageReg1","imageReg2","linkReg1","linkReg2","getPreviewContent","markdownContent","previewText","newMarkdownContent","hrefs","match","_getLinks","hrefObj","links","images","imageSrcs","imageSrcs1","getLinks","TermsPreviewDialog","onClosePreviewDialog","toggleUpdateDialog","isUpdateDialogOpen","toggleTermsContentDialog","isTermsPerviewDialogOpen","deleteTerm","itemContent","mdFile","processor","process","result","innerHtml","String","previewContent","TermsPerviewDialog","TermsAndConditions","toggleAddTermDialog","isAddTermDialogOpen","sysAdminAddTermAndCondition","reload","termID","sysAdminUpdateTermAndCondition","termList","sysAdminDeleteTermAndCondition","sysAdminListTermsAndConditions","term_and_condition_list","VirusFileItem","handleFile","virusFile","virus_id","fileStatus","fileOpList","has_deleted","has_ignored","repo_owner","file_path","virusFiles","AllVirusFiles","listVirusFiles","virus_file_list","virusID","op","request","deleteVirusFile","toggleIgnoreVirusFile","virus_file","toggleItemSelected","isAllItemsSelected","toggleAllSelected","UnhandledVirusFiles","prevState","handleSelectedItems","virusIDs","batchProcessVirusFiles","fileList","find","deleteSelectedItems","ignoreSelectedItems","selectedItems","getOperationText","operationType","getOperationDetail","ownerPageUrl","userPageUrl","detailText","repoPageUrl","groupPageUrl","from","AdminOperationLogs","sysAdminListAdminLogs","login_success","AdminLoginLogs","sysAdminListAdminLoginLogs","AbuseReports","listAbuseReports","sysAdminListAbuseReports","abuseReportList","abuse_report_list","updateAbuseReport","handled","abuseReportId","sysAdminUpdateAbuseReport","AbuseReportList","isDesktop","fileUrl","reporter","abuse_type","SysAdmin","getCurrentTabForPageList","pageList","urlPartList","urlBase","jlen","param","tmpTab","commonProps","Router","StatisticReport","DepartmentLibraries","LDAPUsers","UserOwnedRepos","UserSharedRepos","UserLinks","UserGroups","MediaQuery","zIndex","ReactDom","render","getElementById","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","clear","entry","prototype","has","eq","array","nativeCreate","getNative","isKeyable","__data__","isSymbol","baseIsEqualDeep","isObjectLike","baseIsEqual","other","bitmask","customizer","stack","Map","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","arrayLikeKeys","baseKeys","isArrayLike","reIsDeepProp","reIsPlainProp","baseGetTag","ShareAdminLink","copyToClipboard","copy","walk","add","factory","cssKeywords","reverseKeywords","hasOwnProperty","convert","rgb","channels","hsl","hsv","hwb","cmyk","xyz","lab","lch","hex","ansi16","ansi256","hcg","apple","gray","model","Error","defineProperty","h","l","r","g","min","Math","max","delta","rdif","gdif","bdif","s","diff","diffc","c","reversed","currentClosestKeyword","x","y","currentClosestDistance","Infinity","distance","pow","z","t1","t2","t3","smin","lmin","hi","floor","f","p","q","t","sl","vmin","n","wh","bl","ratio","m","y2","x2","z2","atan2","PI","sqrt","hr","cos","sin","round","ansi","mult","rem","toUpperCase","colorString","char","join","integer","hue","chroma","mg","pure","w","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","isObject","global","funcToString","SetCache","arraySome","cacheHas","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","baseIsArguments","objectProto","propertyIsEnumerable","isArguments","stubFalse","freeExports","nodeType","freeModule","Buffer","isBuffer","reIsUint","baseIsTypedArray","baseUnary","nodeUtil","nodeIsTypedArray","isTypedArray","isFunction","isLength","srcValue","castPath","toKey","isKey","stringToPath","getCommitDetails","commitDetails","centered","renderDetails","detailsData","showDesc","cmt_desc","_this$props$data","enumerable","_chart","defaults","Scatter","Bubble","Polar","Radar","HorizontalBar","Bar","Pie","Doughnut","_react","_interopRequireDefault","_propTypes","_isEqual","_keyBy","__esModule","default","_typeof","iterator","constructor","_objectWithoutProperties","excluded","sourceKeys","getOwnPropertySymbols","sourceSymbolKeys","ownKeys","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","getOwnPropertyDescriptors","defineProperties","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","protoProps","staticProps","subClass","superClass","create","_setPrototypeOf","o","setPrototypeOf","__proto__","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","ReferenceError","getPrototypeOf","NODE_ENV","ChartComponent","chartInstance","getDatasetAtEvent","getElementAtEvent","getElementsAtEvent","onElementsClick","element","renderChart","redraw","destroyChart","updateChart","plugins","nextData","transformDataProp","shadowDataProp","saveCurrentDatasets","isDev","usingCustomKeyProvider","datasetKeyProvider","getLabelAsKey","multipleDatasets","shouldWarn","dataset","console","getCurrentDatasets","d","memoizeDataProps","helpers","configMerge","currentDatasets","nextDatasets","checkDatasets","currentDatasetsIndexed","next","point","pid","otherProps","rest","update","node","destroy","_this$props4","handleOnClick","number","arrayOf","propName","componentName","controllers","position","_default","_ref2","_React$Component4","_super4","_this6","_ref3","_React$Component5","_super5","_this7","_ref4","_React$Component6","_super6","_this8","_ref5","_React$Component7","_super7","_this9","_ref6","_React$Component8","_super8","_this10","_ref7","_React$Component9","_super9","_this11","_ref8","_React$Component10","_super10","_this12","_ref9","htmlFor","Chart","context","me","getContext","ctx","canvas","getStyle","getMaximumWidth","getMaximumHeight","aspectRatio","isFinite","originalCanvasStyleWidth","originalCanvasStyleHeight","retinaScale","controller","Controller","addResizeListener","parentNode","resize","responsiveAnimationDuration","maintainAspectRatio","events","onHover","mode","animationDuration","defaultColor","defaultFontColor","defaultFontFamily","defaultFontSize","defaultFontStyle","showLines","legendCallback","chart","each","loopable","reverse","objClone","extend","base","setFn","ilen","_base","extension","scaleMerge","scaleService","getScaleDefaults","baseArray","valueObj","axisType","getValueOrDefault","axisDefaults","getValueAtIndexOrDefault","where","collection","filterCallback","filtered","findIndex","scope","findNextWhere","arrayToSearch","startIndex","findPreviousWhere","inherits","extensions","ChartElement","Surrogate","__super__","noop","uid","isNumber","parseFloat","almostEquals","epsilon","abs","reduce","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","sign","log10","log","LN10","toRadians","degrees","toDegrees","radians","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","angle","aliasPixel","pixelWidth","splineCurve","firstPoint","middlePoint","afterPoint","previous","skip","d01","d12","s01","s12","fa","fb","EPSILON","splineCurveMonotone","points","pointBefore","pointCurrent","pointAfter","alphaK","betaK","tauK","squaredMagnitude","deltaX","pointsWithTangents","_model","deltaK","mK","pointsLen","controlPointPreviousX","controlPointPreviousY","controlPointNextX","controlPointNextY","nextItem","loop","previousItem","niceNum","range","exponent","fraction","easingEffects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","parseMaxStyle","styleValue","parentProperty","valueInPixels","isConstrainedValue","getConstraintDimension","domNode","maxStyle","percentageProperty","view","defaultView","constrainedNode","getComputedStyle","constrainedContainer","hasCNode","hasCContainer","infinity","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","cancelAnimFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","getRelativePosition","evt","mouseX","mouseY","originalEvent","currentTarget","srcElement","boundingRect","getBoundingClientRect","touches","clientX","clientY","paddingLeft","paddingTop","paddingRight","paddingBottom","left","bottom","top","currentDevicePixelRatio","addEvent","eventType","method","addEventListener","attachEvent","removeEvent","handler","removeEventListener","detachEvent","bindEvents","arrayOfEvents","eventName","unbindEvents","getConstraintWidth","getConstraintHeight","container","clientWidth","cw","clientHeight","ch","el","property","currentStyle","getPropertyValue","pixelRatio","devicePixelRatio","scale","originalDevicePixelRatio","clearRect","fontString","pixelSize","fontStyle","fontFamily","longestText","font","arrayOfThings","cache","gc","garbageCollect","longest","thing","measureText","nestedThing","gcLen","textWidth","numberOfLabelLines","numberOfLines","drawRoundedRectangle","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","CanvasGradient","hiddenIframe","hiddenIframeClass","classlist","setAttribute","border","insertBefore","firstChild","contentWindow","onresize","removeResizeListener","querySelector","removeChild","arrayEquals","a0","a1","v0","v1","callCallback","fn","_tArg","getHoverColor","colorValue","CanvasPattern","saturate","darken","rgbString","Color","valid","alpha","vals","getRgba","setValues","getHsla","getHwb","red","lightness","whiteness","cyan","setSpace","rgbArray","hslArray","hsvArray","hwbArray","cmykArray","rgbaArray","hslaArray","setChannel","green","blue","saturation","saturationv","blackness","magenta","yellow","black","hexString","rgbaString","percentString","hslString","hslaString","hwbString","rgbNumber","luminosity","lum","chan","contrast","color2","lum1","lum2","level","contrastRatio","light","negate","lighten","desaturate","whiten","blacken","greyscale","clearer","opaquer","rotate","mix","mixinColor","weight","color1","w1","w2","toJSON","prop","spaces","maxes","getValues","space","charAt","capped","chans","sname","svalues","conversions","route","fromModel","routes","toModel","wrappedFn","conversion","wrapRounded","raw","wrapRaw","deriveBFS","graph","models","parent","buildGraph","queue","pop","adjacents","adjacent","wrapConversion","cur","colorNames","hexAlpha","rgba","percentaString","hsla","hexDouble","str","getRgb","getHsl","getAlpha","reverseNames","canvasHelpers","drawPoint","pointStyle","edgeLength","xOffset","yOffset","arc","SQRT2","fillRect","strokeRect","stroke","drawImage","Element","configuration","initialize","hidden","pivot","_view","_start","transition","ease","startVal","tooltipPosition","hasValue","animation","easing","onProgress","onComplete","Animation","currentStep","numSteps","onAnimationProgress","onAnimationComplete","animationService","frameDuration","animations","dropFrames","addAnimation","animationObject","lazy","animating","cancelAnimation","animationWrapper","startDigest","now","framesToDrop","types","instances","ensureScalesHaveIDs","buildOrUpdateControllers","buildScales","updateLayout","resetElements","initToolTip","stop","silent","newWidth","newHeight","newSize","onResize","scalesOptions","scaleOptions","xAxisOptions","yAxisOptions","dtype","isDefault","scaleType","scaleClass","getScaleConstructor","addScalesToLayout","layoutService","newControllers","meta","getDatasetMeta","updateIndex","isCombo","reset","tooltip","_data","buildOrUpdateElements","updateDatasets","animationOptions","easingFunction","stepDecimal","easeDecimal","draw","easingDecimal","boxes","box","chartArea","isDatasetVisible","eventPosition","elementsArray","inRange","found","_index","getElementsAtXAxis","inLabelRange","it","getElementsAtEventForMode","_datasetIndex","_meta","xAxisID","yAxisID","getVisibleDatasetCount","generateLegend","toBase64Image","toDataURL","Tooltip","_chartInstance","_options","eventHandler","updateHoverStyle","enabled","hoverOptions","tooltipsOptions","lastActive","lastTooltipActive","tooltipActive","handleEvent","custom","_active","DatasetController","datasetElementType","dataElementType","linkScales","addElements","getMeta","getDataset","getScaleForId","scaleID","createMetaDataset","createMetaData","metaData","addElementAndReset","updateElement","numData","numMetaData","removeHoverStyle","elementOpts","valueOrDefault","setHoverStyle","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","addBox","removeBox","leftBoxes","rightBoxes","topBoxes","bottomBoxes","chartAreaBoxes","fullWidth","chartWidth","chartHeight","chartAreaHeight","verticalBoxWidth","horizontalBoxHeight","maxChartAreaWidth","maxChartAreaHeight","minBoxSizes","minSize","isHorizontal","horizontal","totalLeftBoxesWidth","totalRightBoxesWidth","totalTopBoxesHeight","totalBottomBoxesHeight","fitBox","minBoxSize","scaleMargin","newMaxChartAreaHeight","newMaxChartAreaWidth","placeBox","minBox","constructors","registerScaleType","scaleConstructor","updateScaleDefaults","additions","_plugins","register","plugin","unregister","idx","getAll","PluginBase","beforeInit","afterInit","beforeUpdate","afterUpdate","beforeDraw","afterDraw","pluginService","gridLines","lineWidth","drawBorder","drawOnChartArea","drawTicks","tickMarkLength","zeroLineWidth","zeroLineColor","offsetGridLines","borderDash","borderDashOffset","scaleLabel","labelString","minRotation","maxRotation","mirror","autoSkip","autoSkipPadding","labelOffset","Scale","maxHeight","margins","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","beforeBuildTicks","buildTicks","afterBuildTicks","beforeTickToLabelConversion","convertTicksToLabels","afterTickToLabelConversion","beforeCalculateTickRotation","calculateTickRotation","afterCalculateTickRotation","beforeFit","fit","afterFit","numericalTick","userCallback","globalDefaults","optionTicks","tickFontSize","tickFontStyle","tickFontFamily","tickLabelFont","firstRotated","firstWidth","lastWidth","labelRotation","longestTextCache","cosRotation","sinRotation","originalLabelWidth","labelWidth","tickWidth","getPixelForTick","yLabelWidth","opts","tickOpts","scaleLabelOpts","gridLineOpts","scaleLabelFontSize","isFullWidth","largestTextWidth","tallestLabelHeightInLines","lineSpace","longestLabelWidth","labelHeight","firstLabelWidth","lastLabelWidth","maxLabelWidth","getRightValue","rawValue","NaN","getLabelForIndex","getPixelForValue","getValueForPixel","includeOffset","pixel","finalVal","innerHeight","getPixelForDecimal","decimal","valueOffset","getBasePixel","skipRatio","maxTicks","isRotated","useAutoskipper","tickFontColor","fontColor","tl","scaleLabelFontColor","scaleLabelFontStyle","scaleLabelFontFamily","scaleLabelFont","labelRotationRadians","longestRotatedLabel","fillStyle","itemsToDraw","xTickStart","xTickEnd","yTickStart","yTickEnd","isLastTick","lineColor","tx1","ty1","tx2","ty2","x1","y1","labelX","labelY","zeroLineIndex","textBaseline","xLineValue","yLineValue","glWidth","glColor","glBorderDash","glBorderDashOffset","rotation","itemToDraw","save","strokeStyle","setLineDash","lineDashOffset","restore","translate","fillText","scaleLabelX","scaleLabelY","isLeft","Title","legendHitBoxes","chartOpts","beforeBuildLabels","buildLabels","afterBuildLabels","pos","titleX","titleY","titleFont","titleOpts","titleBlock","legendItem","ci","boxWidth","generateLabels","lineCap","borderCapStyle","lineDash","lineJoin","borderJoinStyle","Legend","doughnutMode","legendItems","labelOpts","globalDefault","itemOrDefault","labelFont","hitboxes","lineWidths","totalHeight","vPadding","columnWidths","totalWidth","currentColWidth","currentColHeight","itemHeight","itemWidth","lineDefault","legendWidth","cursor","isLineWidthZero","offSet","centerX","centerY","drawLegendBox","lh","hitBox","legendOpts","pushOrConcat","toPush","createTooltipItem","xScale","_xScale","yScale","_yScale","_scale","xLabel","titleFontStyle","titleSpacing","titleMarginBottom","titleFontColor","titleAlign","bodySpacing","bodyFontColor","bodyAlign","footerFontStyle","footerSpacing","footerMarginTop","footerFontColor","footerAlign","yPadding","xPadding","yAlign","xAlign","caretSize","cornerRadius","multiKeyBackground","beforeTitle","tooltipItems","labelCount","afterTitle","beforeBody","beforeLabel","labelColor","afterLabel","afterBody","beforeFooter","footer","afterFooter","tooltipOpts","_bodyFontFamily","bodyFontFamily","_bodyFontStyle","bodyFontStyle","_bodyAlign","bodyFontSize","_titleFontFamily","titleFontFamily","_titleFontStyle","titleFontSize","_titleAlign","_footerFontFamily","footerFontFamily","_footerFontStyle","footerFontSize","_footerAlign","legendColorBackground","getTitle","lines","getBeforeBody","getBody","bodyItems","bodyItem","before","after","getAfterBody","getFooter","changed","labelColors","xPositions","yPositions","getAveragePosition","itemSort","body","caretPadding","tooltipSize","getTooltipSize","determineAlignment","getBackgroundPoint","vm","combinedBodyLength","titleLineCount","footerLineCount","widthPadding","maxLineWidth","lf","rf","olf","orf","yf","midX","midY","pt","paddingAndSize","radiusAndPadding","drawCaret","tooltipPoint","x3","y3","ptX","ptY","bgColor","drawTitle","drawBody","textColor","xLinePadding","fillLineOfText","drawColorBoxes","drawFooter","globalOpts","Arc","hoverRadius","chartX","chartY","pointRelativePosition","startAngle","endAngle","betweenAngles","withinRadius","innerRadius","outerRadius","centreAngle","rangeFromCentre","sA","eA","capBezierPoints","spanGaps","scaleZero","_loop","lineToPoint","previousPoint","pointVM","steppedLine","bezierCurveTo","currentVM","_children","lastDrawnIndex","globalOptionLineElements","hitRadius","Point","rectangle","borderSkipped","Rectangle","halfWidth","leftX","rightX","halfStroke","corners","startCorner","cornerAt","LinearScaleBase","handleTickRangeOptions","minSign","maxSign","suggestedMin","getTickLimit","handleDirectionalChanges","spacing","fixedStepSize","stepSize","niceRange","niceMin","niceMax","ceil","numSpaces","start","end","ticksAsNumbers","DatasetScale","getLabels","xLabels","yLabels","minIndex","maxIndex","offsetAmt","valueWidth","widthOffset","valueHeight","heightOffset","horz","valueDimension","defaultConfig","tickValue","logDelta","tickString","numDecimal","toFixed","LinearScale","IDMatches","stacked","valuesPerType","positiveValues","negativeValues","relativePoints","valuesForType","minVal","maxVal","innerDimension","rightValue","arr","remain","toExponential","LogarithmicScale","minNotZero","tickVal","exp","significand","lastTick","tickValues","newVal","LinearRadialScale","getValueCount","xCenter","yCenter","drawingArea","backdropPaddingY","pointLabels","pointPosition","halfTextWidth","furthestRightIndex","furthestRightAngle","furthestLeftIndex","furthestLeftAngle","xProtrusionLeft","xProtrusionRight","radiusReductionRight","radiusReductionLeft","pointLabelFontSize","pointLabeFontStyle","pointLabeFontFamily","pointLabeFont","largestPossibleRadius","furthestRight","furthestLeft","getPointPosition","getIndexAngle","setCenterPoint","leftMovement","rightMovement","maxRight","maxLeft","angleMultiplier","startAngleRadians","getDistanceFromCenterForValue","scalingFactor","distanceFromCenter","thisAngle","getPointPositionForValue","getBasePosition","angleLineOpts","angleLines","pointLabelOpts","yCenterOffset","yHeight","lineArc","showLabelBackdrop","backdropColor","backdropPaddingX","outerDistance","outerPosition","pointLabelPosition","pointLabelFontColor","animate","units","steps","maxStep","TimeScale","getLabelMoment","labelMoments","getLabelDiff","labelDiffs","buildLabelDiffs","getMomentStartOf","tick","unit","isoWeekday","startOf","tickUnit","scaleLabelMoments","labelMoment","parseTime","firstTick","momentsForDataset","datasetVisible","scaleLabelDiffs","diffsForDataset","roundedStart","unitScale","scaleSizeInUnits","displayFormat","displayFormats","unitStepSize","innerWidth","tempFirstLabel","tickFormatFunction","tickLabelWidth","labelCapacity","minUnit","unitDefinitionIndex","unitDefinition","leadingUnitBuffer","trailingUnitBuffer","roundedEnd","newTick","tooltipFormat","formattedTick","tickMoments","asSeconds","parser","getMonth","warn","millisecond","second","minute","hour","day","week","quarter","year","bar","categoryPercentage","barPercentage","getBarCount","barCount","scaleBase","rectangleElementOptions","calculateBarX","calculateBarY","datasetLabel","calculateBarBase","calculateBarWidth","currentDs","currentDsMeta","currentVal","getRuler","datasetCount","categoryWidth","categorySpacing","fullBarWidth","barWidth","barSpacing","barThickness","ruler","getBarIndex","barIndex","leftTick","sumPos","sumNeg","ds","dsMeta","stackedVal","horizontalBar","calculateBarHeight","halfHeight","topY","bottomY","cornerIndex","tickHeight","categoryHeight","fullBarHeight","barHeight","topTick","bubble","dataPoint","pointElementOptions","dsIndex","getRadius","dataVal","doughnut","animateRotate","animateScale","arcOpts","cutoutPercentage","circumference","pie","getRingIndex","ringIndex","availableWidth","availableHeight","contains0","contains90","contains180","contains270","cutout","getMaxBorderWidth","radiusLength","offsetX","offsetY","total","calculateTotal","animationOpts","calculateCircumference","valueAtIndexOrDefault","hoverWidth","lineEnabled","showLine","updateBezierControlPoints","lineElementOptions","lineTension","stepped","cubicInterpolationMode","scaleTop","scaleBottom","getPointBackgroundColor","pointBackgroundColor","getPointBorderColor","pointBorderColor","getPointBorderWidth","pointBorderWidth","pointOptions","pointRadius","pointHitRadius","calculatePointY","stackedRightValue","controlPoints","area","capControlPoint","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","polarArea","countVisibleElements","visibleCount","datasetStartAngle","resetRadius","radar","PolarArea","scatter","equalArrays","equalByTag","equalObjects","getTag","argsTag","arrayTag","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","assocIndexOf","pairs","LARGE_ARRAY_SIZE","isMasked","toSource","reIsHostCtor","funcProto","reIsNative","RegExp","nativeObjectToString","isOwn","unmasked","coreJsData","maskSrcKey","exec","IE_PROTO","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","getMapData","setCacheAdd","setCacheHas","predicate","Uint8Array","mapToArray","setToArray","symbolProto","symbolValueOf","valueOf","byteLength","byteOffset","buffer","getAllKeys","objProps","objLength","objStacked","skipCtor","objValue","objCtor","othCtor","baseGetAllKeys","getSymbols","arrayPush","keysFunc","symbolsFunc","arrayFilter","stubArray","nativeGetSymbols","symbol","resIndex","baseTimes","isIndex","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","typedArrayTags","freeProcess","binding","isPrototype","nativeKeys","Ctor","overArg","transform","arg","DataView","Promise","Set","WeakMap","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","resolve","ctorString","baseAssignValue","keyBy","createAggregator","arrayAggregator","baseAggregator","baseIteratee","setter","initializer","accumulator","baseEach","baseForOwn","createBaseEach","baseFor","createBaseFor","fromRight","iterable","eachFunc","baseMatches","baseMatchesProperty","identity","baseIsMatch","getMatchData","matchesStrictComparable","matchData","noCustomizer","COMPARE_PARTIAL_FLAG","isStrictComparable","hasIn","baseGet","memoizeCapped","rePropName","reEscapeChar","charCodeAt","quote","subString","memoize","resolver","memoized","Cache","baseToString","arrayMap","symbolToString","baseHasIn","hasPath","hasFunc","baseProperty","basePropertyDeep","onDropdownToggleClick","toggleOperationMenu","isItemMenuShow"],"mappings":"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","file":"static/js/sysAdmin.chunk.js","sourcesContent":["var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport Logo from '../../components/logo';\nimport { gettext, siteRoot, isPro, otherPermission, canViewSystemInfo, canViewStatistic,\n  canConfigSystem, canManageLibrary, canManageUser, canManageGroup, canViewUserLog,\n  canViewAdminLog, constanceEnabled, multiTenancy, multiInstitution, sysadminExtraEnabled,\n  enableGuestInvitation, enableTermsAndConditions, enableFileScan, enableWorkWeixin, enableDingtalk,\n  enableShareLinkReportAbuse } from '../../utils/constants';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired\n};\n\nclass SidePanel extends React.Component {\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab == tab ? 'active' : '';\n  }\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <div className=\"side-nav\">\n            <div className=\"side-nav-con\">\n              <h3 className=\"sf-heading\">{gettext('System Admin')}</h3>\n              <ul className=\"nav nav-pills flex-column nav-container\">\n                {canViewSystemInfo &&\n                <li className=\"nav-item\">\n                  <Link\n                    className={`nav-link ellipsis ${this.getActiveClass('info')}`}\n                    to={siteRoot + 'sys/info/'}\n                    onClick={() => this.props.tabItemClick('info')}\n                  >\n                    <span className=\"sf2-icon-info\" aria-hidden=\"true\"></span>\n                    <span className=\"nav-text\">{gettext('Info')}</span>\n                  </Link>\n                </li>\n                }\n                {isPro && canViewStatistic &&\n                  <li className=\"nav-item\">\n                    <Link className={`nav-link ellipsis ${this.getActiveClass('statistic')}`}\n                      to={siteRoot + 'sys/statistics/file/'}\n                      onClick={() => this.props.tabItemClick('statistic')}\n                    >\n                      <span className=\"sf2-icon-histogram\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Statistic')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('devices')}`}\n                      to={siteRoot + 'sys/desktop-devices/'}\n                      onClick={() => this.props.tabItemClick('devices')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Devices')}</span>\n                    </Link>\n                  </li>\n                }\n                {constanceEnabled && canConfigSystem &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('web-settings')}`}\n                      to={siteRoot + 'sys/web-settings/'}\n                      onClick={() => this.props.tabItemClick('web-settings')}\n                    >\n                      <span className=\"sf2-icon-cog2\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Settings')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageLibrary &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('libraries')}`}\n                      to={siteRoot + 'sys/all-libraries/'}\n                      onClick={() => this.props.tabItemClick('libraries')}\n                    >\n                      <span className=\"sf2-icon-library\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Libraries')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageUser &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('users')}`}\n                      to={siteRoot + 'sys/users/'}\n                      onClick={() => this.props.tabItemClick('users')}\n                    >\n                      <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Users')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('groups')}`}\n                      to={siteRoot + 'sys/groups/'}\n                      onClick={() => this.props.tabItemClick('groups')}\n                    >\n                      <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Groups')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('departments')}`}\n                      to={siteRoot + 'sys/departments/'}\n                      onClick={() => this.props.tabItemClick('departments')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Departments')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiTenancy && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('organizations')}`}\n                      to={siteRoot + 'sys/organizations/'}\n                      onClick={() => this.props.tabItemClick('organizations')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Organizations')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiInstitution && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('institutions')}`}\n                      to={siteRoot + 'sys/institutions/'}\n                      onClick={() => this.props.tabItemClick('institutions')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Institutions')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('notifications')}`}\n                      to={siteRoot + 'sys/notifications/'}\n                      onClick={() => this.props.tabItemClick('notifications')}\n                    >\n                      <span className=\"sf2-icon-msgs\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Notifications')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('links')}`}\n                      to={siteRoot + 'sys/share-links/'}\n                      onClick={() => this.props.tabItemClick('links')}\n                    >\n                      <span className=\"sf2-icon-link\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Links')}</span>\n                    </Link>\n                  </li>\n                }\n                {sysadminExtraEnabled && canViewUserLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('logs')}`}\n                      to={siteRoot + 'sys/logs/login'}\n                      onClick={() => this.props.tabItemClick('logs')}\n                    >\n                      <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission && enableFileScan &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('file-scan-records')}`}\n                      to={siteRoot + 'sys/file-scan-records/'}\n                      onClick={() => this.props.tabItemClick('file-scan-records')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('File Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('virus-files')}`}\n                      to={siteRoot + 'sys/virus-files/all/'}\n                      onClick={() => this.props.tabItemClick('virus-files')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Virus Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && enableGuestInvitation && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('invitations')}`}\n                      to={siteRoot + 'sys/invitations/'}\n                      onClick={() => this.props.tabItemClick('invitations')}\n                    >\n                      <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Invitations')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableTermsAndConditions &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('termsandconditions')}`}\n                      to={siteRoot + 'sys/terms-and-conditions/'}\n                      onClick={() => this.props.tabItemClick('termsandconditions')}\n                    >\n                      <span className=\"sf2-icon-wiki\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Terms and Conditions')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canViewAdminLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('adminLogs')}`}\n                      to={siteRoot + 'sys/admin-logs/operation'}\n                      onClick={() => this.props.tabItemClick('adminLogs')}\n                    >\n                      <span className=\"sf2-icon-admin-log\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Admin Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableWorkWeixin &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('work-weixin')}`}\n                      to={siteRoot + 'sys/work-weixin/'}\n                      onClick={() => this.props.tabItemClick('work-weixin')}\n                    >\n                      <span className=\"sf3-font-enterprise-wechat sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{'企业微信集成'}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableDingtalk &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('dingtalk')}`}\n                      to={siteRoot + 'sys/dingtalk/'}\n                      onClick={() => this.props.tabItemClick('dingtalk')}\n                    >\n                      <span className=\"sf3-font-dingtalk sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{'钉钉集成'}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableShareLinkReportAbuse &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('abuse-reports')}`}\n                      to={siteRoot + 'sys/abuse-reports/'}\n                      onClick={() => this.props.tabItemClick('abuse-reports')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Abuse Reports')}</span>\n                    </Link>\n                  </li>\n                }\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  render() {\n    return (\n      <div className=\"main-panel\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.object,\n  toggleSidePanel: PropTypes.func\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span \n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title={gettext(\"Side Nav Menu\")}\n            onClick={this.props.toggleSidePanel}\n          ></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          {this.props.search && this.props.search}\n          <Account isAdminPanel={true} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, isPro, isDefaultAdmin } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/system-info.css';\n\nclass Info extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      sysInfo: {}\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysInfo().then((res) => {\n      this.setState({\n        loading: false,\n        sysInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  uploadLicenseFile = (e) => {\n\n    // no file selected\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    seafileAPI.sysAdminUploadLicense(file).then((res) => {\n      let info = this.state.sysInfo;\n      Object.assign(info, res.data, {with_license: true});\n      this.setState({\n        sysInfo: info\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  renderLicenseDescString = (license_mode, license_to, license_expiration) => {\n    if (license_mode == 'life-time') {\n      if (window.app.config.lang == 'zh-cn') {\n        return '永久授权给 ' + license_to + '，技术支持服务至 ' + license_expiration + ' 到期';\n      } else {\n        return gettext('licensed to {placeholder_license_to}, upgrade service expired in {placeholder_license_expiration}')\n          .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n      }\n    } else {\n      return gettext('licensed to {placeholder_license_to}, expires on {placeholder_license_expiration}')\n        .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n    }\n  }\n\n  render() {\n    let { license_mode, license_to, license_expiration, org_count,\n      repos_count, total_files_count, total_storage, total_devices_count,\n      current_connected_devices_count, license_maxusers, multi_tenancy_enabled,\n      active_users_count, users_count, groups_count, with_license } = this.state.sysInfo;\n    let { loading, errorMsg } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container system-admin-info\">\n            <h2 className=\"heading\">{gettext('Info')}</h2>\n            <div className=\"content\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) &&\n              <dl className=\"flex-1 m-0\">\n                <dt className=\"info-item-heading\">{gettext('System Info')}</dt>\n                {isPro ?\n                  <dd className=\"info-item-content\">\n                    {gettext('Professional Edition')}\n                    {with_license &&\n                      ' ' + this.renderLicenseDescString(license_mode, license_to, license_expiration)\n                    }<br/>\n                    {isDefaultAdmin &&\n                      <Fragment>\n                        <Button type=\"button\" className=\"mt-2\" onClick={this.openFileInput}>{gettext('Upload license')}</Button>\n                        <input className=\"d-none\" type=\"file\" onChange={this.uploadLicenseFile} ref={this.fileInput} />\n                      </Fragment>\n                    }\n                  </dd> :\n                  <dd className=\"info-item-content\">\n                    {gettext('Community Edition')}\n                    <a className=\"ml-1\" href=\"https://download.seafile.com/published/seafile-manual/deploy_pro/migrate_from_seafile_community_server.md\" target=\"_blank\">{gettext('Upgrade to Pro Edition')}</a>\n                  </dd>\n                }\n                <dt className=\"info-item-heading\">{gettext('Libraries')} / {gettext('Files')}</dt>\n                <dd className=\"info-item-content\">{repos_count} / {total_files_count}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Storage Used')}</dt>\n                <dd className=\"info-item-content\">{Utils.bytesToSize(total_storage)}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Total Devices')} / {gettext('Current Connected Devices')}</dt>\n                <dd className=\"info-item-content\">{total_devices_count} / {current_connected_devices_count}</dd>\n\n                {isPro ?\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')} / {gettext('Limits')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count}{' / '}{users_count}{' / '}{with_license ? license_maxusers : '--'}</dd>\n                  </Fragment> :\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count} / {users_count}</dd>\n                  </Fragment>\n                }\n\n                <dt className=\"info-item-heading\">{gettext('Groups')}</dt>\n                <dd className=\"info-item-content\">{groups_count}</dd>\n\n                {multi_tenancy_enabled &&\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Organizations')}</dt>\n                    <dd className=\"info-item-content\">{org_count}</dd>\n                  </Fragment>\n                }\n              </dl>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Info;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'fileStatistic', urlPart: 'statistics/file', text: gettext('File')},\n      {name: 'storageStatistic', urlPart: 'statistics/storage', text: gettext('Storage')},\n      {name: 'usersStatistic', urlPart: 'statistics/user', text: gettext('Users')},\n      {name: 'trafficStatistic', urlPart: 'statistics/traffic', text: gettext('Traffic')},\n      {name: 'reportsStatistic', urlPart: 'statistics/reports', text: gettext('Reports')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Calendar from '@seafile/seafile-calendar';\nimport DatePicker from '@seafile/seafile-calendar/lib/Picker';\nimport { translateCalendar } from '../../../utils/date-format-utils';\n\nimport '@seafile/seafile-calendar/assets/index.css';\n\nconst propsTypes = {\n  disabledDate: PropTypes.func.isRequired,\n  value: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n};\n\nconst FORMAT = 'YYYY-MM-DD';\n\nclass Picker extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.defaultCalendarValue = null;\n  }\n\n  componentDidMount() {\n    let lang = window.app.config.lang;\n    this.defaultCalendarValue = moment().locale(lang).clone();\n  }\n\n  render() {\n    const props = this.props;\n    const calendar = (<Calendar\n      defaultValue={this.defaultCalendarValue}\n      disabledDate={props.disabledDate}\n      format={FORMAT}\n      locale={translateCalendar()}\n    />);\n    return (\n      <DatePicker\n        calendar={calendar}\n        value={props.value}\n        onChange={props.onChange}\n      >\n        {\n          ({value}) => {\n            return (\n              <span>\n                <input\n                  placeholder=\"yyyy-mm-dd\"\n                  tabIndex=\"-1\"\n                  readOnly\n                  value={value && value.format(FORMAT) || ''}\n                  className=\"form-control system-statistic-input\"\n                />\n              </span>\n            );\n          }\n        }\n      </DatePicker>\n    );\n  }\n}\n\nPicker.propsTypes = propsTypes;\n\nexport default Picker;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport Picker from './picker';\n\nconst propTypes = {\n  getActiviesFiles: PropTypes.func.isRequired,\n  children: PropTypes.object,\n};\n\nclass StatisticCommonTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      statisticType: 'oneWeek',\n      startValue: null,\n      endValue: null,\n    };\n  }\n\n  componentDidMount() {\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  changeActive = (statisticTypeName) => {\n    let { statisticType } = this.state;\n    if (statisticType === statisticTypeName) {\n      return;\n    }\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime;\n    switch(statisticTypeName) {\n      case 'oneWeek' :\n        startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneMonth' :\n        startTime = moment().subtract(29,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneYear' :\n        startTime = moment().subtract(364,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n    }\n    this.setState({\n      statisticType: statisticTypeName,\n    });\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  disabledStartDate = (startValue) => {\n    if (!startValue) {\n      return false;\n    }\n    let today = moment().format();\n\n    const endValue = this.state.endValue;\n    if (!endValue) {\n      let startTime = moment(startValue).format();\n      return today < startTime;\n    }\n    return endValue.isBefore(startValue) || moment(startValue).format() > today;\n  }\n\n  disabledEndDate = (endValue) => {\n    if (!endValue) {\n      return false;\n    }\n    let today = moment().format();\n    const startValue = this.state.startValue;\n    if (!startValue) {\n      let endTime = moment(endValue).format();\n      return today < endTime;\n    }\n    return endValue.isBefore(startValue) || moment(endValue).format() > today;\n  }\n\n  onChange = (field, value) => {\n    this.setState({\n      [field]: value,\n    });\n  }\n\n  onSubmit = () => {\n    let { startValue, endValue } = this.state;\n    if(!startValue || !endValue) {\n      return;\n    }\n    this.setState({\n      statisticType: 'itemButton',\n    });\n    let startTime = moment(startValue).format('YYYY-MM-DD 00:00:00');\n    let endTime = moment(endValue).format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  render() {\n    let { statisticType, endValue, startValue } = this.state;\n    return(\n      <Fragment>\n        {this.props.children}\n        <div className=\"system-statistic-time-range\">\n          <div className=\"sys-stat-tool\">\n            <div className={`system-statistic-item border-right-0 rounded-left ${statisticType === 'oneWeek' ? 'item-active' : ''}`} onClick={this.changeActive.bind(this, 'oneWeek')}>{gettext('7 Days')}</div>\n            <div className={`system-statistic-item border-right-0 ${statisticType === 'oneMonth' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneMonth')}>{gettext('30 Days')}</div>\n            <div className={`system-statistic-item rounded-right ${statisticType === 'oneYear' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneYear')}>{gettext('1 Year')}</div>\n          </div>\n          <div className=\"system-statistic-input-container\">\n            <Picker\n              disabledDate={this.disabledStartDate}\n              value={startValue}\n              onChange={this.onChange.bind(this, 'startValue')}\n            />\n            <span className=\"system-statistic-connect\">-</span>\n            <Picker\n              disabledDate={this.disabledEndDate}\n              value={endValue}\n              onChange={this.onChange.bind(this, 'endValue')}\n            />\n            <Button className=\"operation-item system-statistic-button\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nStatisticCommonTool.propTypes = propTypes;\n\nexport default StatisticCommonTool;\n","import React from 'react';\nimport { Line } from 'react-chartjs-2';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  labels: PropTypes.array.isRequired,\n  filesData: PropTypes.array.isRequired,\n  suggestedMaxNumbers: PropTypes.number.isRequired,\n  isLegendStatus: PropTypes.bool.isRequired,\n  chartTitle: PropTypes.string.isRequired,\n  isTitleCallback: PropTypes.bool,\n  isTicksCallback: PropTypes.bool,\n};\n\nclass StatisticChart extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      opations: {}\n    };\n  }\n\n  componentDidMount() {\n    let { labels, filesData, isTitleCallback, isTicksCallback, suggestedMaxNumbers, isLegendStatus, chartTitle } = this.props;\n    let _this = this;\n    let data = {\n      labels: labels,\n      datasets: filesData\n    };\n    let options = {\n      title: {\n        display: true,\n        fontSize: 14,\n        text: chartTitle,\n      },\n      elements: {\n        line: {\n          fill: false,\n          tension: 0, // disable bezier curves, i.e, draw straight lines\n          borderWidth: 2\n        }\n      },\n      legend: {\n        display: isLegendStatus,\n        labels: {\n          usePointStyle: true\n        }\n      },\n      tooltips: {\n        callbacks: {\n          label: function(tooltipItem, data) {\n            if (isTitleCallback) {\n              return _this.titleCallback(tooltipItem, data);\n            }\n            return data.datasets[tooltipItem.datasetIndex].label + ': ' + tooltipItem.yLabel;\n          }\n        }\n      },\n      layout: {\n        padding: {\n          right: 100,\n        }\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero: true,\n            suggestedMax: suggestedMaxNumbers,\n            callback: function(value, index, values) {\n              if (isTicksCallback) {\n                return _this.ticksCallback(value, index, values);\n              }\n              return value;\n            }\n          }\n        }],\n        xAxes: [{\n          ticks: {\n            maxTicksLimit: 20\n          }\n        }]\n      }\n    };\n    this.setState({\n      data: data,\n      options: options\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let data = {\n      labels: nextProps.labels,\n      datasets: nextProps.filesData\n    };\n    this.setState({data: data});\n  }\n\n  titleCallback = (tooltipItem, data) => {\n    return data.datasets[tooltipItem.datasetIndex].label + ': ' + Utils.bytesToSize(tooltipItem.yLabel);\n  }\n\n  ticksCallback = (value, index, values) => {\n    return Utils.bytesToSize(value);\n  }\n\n  render() {\n\n    let { data, options } = this.state;\n    return (\n      <Line\n        data={data}\n        options={options}\n      />\n    );\n  }\n}\n\nStatisticChart.propTypes = propTypes;\n\nexport default StatisticChart;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nimport '../../../css/system-stat.css';\n\nclass StatisticFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticFiles(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        added = [],\n        deleted = [],\n        visited = [],\n        modified = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          added.push(item.added);\n          deleted.push(item.deleted);\n          modified.push(item.modified);\n          visited.push(item.visited);\n        });\n        let addedData = {\n          label: gettext('Added'),\n          data: added,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let visitedData = {\n          label: gettext('Visited'),\n          data: visited,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let modifiedData = {\n          label: gettext('Modified'),\n          data: modified,\n          borderColor: '#72c3fc',\n          backgroundColor: '#72c3fc'};\n        let deletedData = {\n          label: gettext('Deleted'),\n          data: deleted,\n          borderColor: '#f75356',\n          backgroundColor: '#f75356'};\n        filesData = [visitedData, addedData, modifiedData, deletedData];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"fileStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={true}\n                chartTitle={gettext('File Operations')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticFile;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticStorage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticStorages(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        totalStorage = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          totalStorage.push(item.total_storage);\n        });\n        let total_storage = {\n          label: gettext('Total Storage'),\n          data: totalStorage,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        filesData = [total_storage];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"storageStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10*1000*1000}\n                isTitleCallback={true}\n                isTicksCallback={true}\n                isLegendStatus={false}\n                chartTitle={gettext('Total Storage')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticStorage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n};\n\nclass TrafficTable extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { type, sortBy, sortOrder } = this.props;\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            <th width=\"16%\">{type == 'user' ? gettext('User') : gettext('Organization')}</th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_upload')}>{gettext('Sync Upload')} {sortBy === 'sync_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_download')}>{gettext('Sync Download')} {sortBy === 'sync_file_download' && sortIcon}</div></th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_upload')}>{gettext('Web Upload')} {sortBy === 'web_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_download')}>{gettext('Web Download')} {sortBy === 'web_file_download' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_upload')}>{gettext('Share link upload')} {sortBy === 'link_file_upload' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_download')}>{gettext('Share link download')} {sortBy === 'link_file_download' && sortIcon}</div></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.props.children}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nTrafficTable.propTypes = propTypes;\n\nexport default TrafficTable;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  userTrafficItem: PropTypes.object.isRequired,\n};\n\nclass TrafficTableBody extends React.Component {\n\n  trafficName = () => {\n    let { userTrafficItem, type } = this.props;\n    switch(type) {\n      case 'user':\n        if (userTrafficItem.name) {\n          return (\n            <a href={siteRoot + 'useradmin/info/' + userTrafficItem.email + '/'}>{userTrafficItem.name}</a>\n          );\n        }\n        return(<span>{'--'}</span>);\n      case 'org':\n        return(<span>{userTrafficItem.org_name}</span>);\n    }\n  }\n\n  render() {\n    let { userTrafficItem } = this.props;\n\n    let syncUploadSize = Utils.bytesToSize(userTrafficItem.sync_file_upload);\n    let syncDownloadSize = Utils.bytesToSize(userTrafficItem.sync_file_download);\n    let webUploadSize = Utils.bytesToSize(userTrafficItem.web_file_upload);\n    let webDownloadSize = Utils.bytesToSize(userTrafficItem.web_file_download);\n    let linkUploadSize = Utils.bytesToSize(userTrafficItem.link_file_upload);\n    let linkDownloadSize = Utils.bytesToSize(userTrafficItem.link_file_download);\n\n    return(\n      <tr>\n        <td>{this.trafficName()}</td>\n        <td>{syncUploadSize}</td>\n        <td>{syncDownloadSize}</td>\n        <td>{webUploadSize}</td>\n        <td>{webDownloadSize}</td>\n        <td>{linkUploadSize}</td>\n        <td>{linkDownloadSize}</td>\n      </tr>\n    );\n  }\n}\n\nTrafficTableBody.propTypes = propTypes;\n\nexport default TrafficTableBody;\n","import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass OrgsTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgTrafficList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  }\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({isLoading: true, errorMessage: ''});\n    seafileAPI.sysAdminListOrgTraffic(month, page, perPage, orderBy).then(res => {\n      let orgTrafficList = res.data.org_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        orgTrafficList: orgTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initPage, this.initMonth));\n  }\n\n  render() {\n    const {\n      isLoading, errorMessage, orgTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'org'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {orgTrafficList.length > 0 && orgTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'org'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgsTraffic;\n","import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass UsersTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userTrafficList: [],\n      hasNextPage: false,\n      perPage: 25,\n      currentPage: 1,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  }\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({\n      isLoading: true,\n      errorMessage: ''\n    });\n    seafileAPI.sysAdminListUserTraffic(month, page, perPage, orderBy).then(res => {\n      let userTrafficList = res.data.user_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        userTrafficList: userTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initMonth, this.initPage));\n  }\n\n  render() {\n    const {\n      isLoading, errorMessage, userTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'user'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {userTrafficList.length > 0 && userTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'user'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default UsersTraffic;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport Loading from '../../../components/loading';\nimport OrgsTraffic from './statistic-traffic-orgs';\nimport UsersTraffic from './statistic-traffic-users';\nimport StatisticChart from './statistic-chart';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      linkData: [],\n      syncData: [],\n      webData: [],\n      labels: [],\n      isLoading: true,\n      tabActive: 'system'\n    };\n  }\n\n  changeTabActive = activeName => {\n    this.setState({tabActive: activeName});\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    seafileAPI.sysAdminStatisticTraffic(startTime, endTime, groupBy).then((res) => {\n      let labels = [];\n      let total_upload = [],\n        total_download = [],\n        link_upload = [],\n        link_download = [],\n        sync_upload = [],\n        sync_download = [],\n        web_upload = [],\n        web_download = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          link_upload.push(item['link-file-upload']);\n          link_download.push(item['link-file-download']);\n          sync_upload.push(item['sync-file-upload']);\n          sync_download.push(item['sync-file-download']);\n          web_upload.push(item['web-file-upload']);\n          web_download.push(item['web-file-download']);\n          total_upload.push(item['link-file-upload'] + item['sync-file-upload'] + item['web-file-upload']);\n          total_download.push(item['link-file-download'] + item['sync-file-download'] + item['web-file-download']);\n        });\n        let linkUpload = {\n          label: gettext('Upload'),\n          data: link_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let linkDownload = {\n          label: gettext('Download'),\n          data: link_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let syncUpload = {\n          label: gettext('Upload'),\n          data: sync_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let syncDownload = {\n          label: gettext('Download'),\n          data: sync_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let webUpload = {\n          label: gettext('Upload'),\n          data: web_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let webDownload = {\n          label: gettext('Download'),\n          data: web_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let totalUpload = {\n          label: gettext('Upload'),\n          data: total_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let totalDownload = {\n          label: gettext('Download'),\n          data: total_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let linkData = [linkUpload, linkDownload];\n        let syncData = [syncUpload, syncDownload];\n        let webData = [webUpload, webDownload];\n        let filesData = [totalUpload, totalDownload];\n        this.setState({\n          linkData: linkData,\n          syncData: syncData,\n          webData: webData,\n          filesData: filesData,\n          labels: labels,\n          isLoading: false\n        });\n      }\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  renderCommonTool = () => {\n    let { tabActive } = this.state;\n    if (tabActive === 'system') {\n      return (\n        <StatisticCommonTool getActiviesFiles={this.getActiviesFiles}>\n          <div className=\"statistic-traffic-tab\">\n            <div className={`statistic-traffic-tab-item ${tabActive === 'system' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'system')}>{gettext('System')}</div>\n            <div className={`statistic-traffic-tab-item ${tabActive === 'user' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'user')}>{gettext('Users')}</div>\n            <div className={`statistic-traffic-tab-item ${tabActive === 'organizations' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'organizations')}>{gettext('Organizations')}</div>\n          </div>\n        </StatisticCommonTool>\n      );\n    }\n    return (\n      <div className=\"statistic-traffic-tab\">\n        <div className={`statistic-traffic-tab-item ${tabActive === 'system' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'system')}>{gettext('System')}</div>\n        <div className={`statistic-traffic-tab-item ${tabActive === 'user' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'user')}>{gettext('Users')}</div>\n        <div className={`statistic-traffic-tab-item ${tabActive === 'organizations' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'organizations')}>{gettext('Organizations')}</div>\n      </div>\n    );\n  }\n\n  render() {\n    let { labels, filesData, linkData, syncData, webData, isLoading, tabActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"trafficStatistic\" />\n          <div className=\"cur-view-content\">\n            {this.renderCommonTool()}\n            {isLoading && <Loading />}\n            {!isLoading && tabActive === 'system' &&\n              <div className=\"statistic-traffic-chart-container\">\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={filesData}\n                      chartTitle={gettext('Total Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={webData}\n                      chartTitle={gettext('Web Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={linkData}\n                      chartTitle={gettext('Share Link Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={syncData}\n                      chartTitle={gettext('Sync Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n              </div>\n            }\n            {!isLoading && tabActive === 'user' &&\n              <UsersTraffic />\n            }\n            {!isLoading && tabActive === 'organizations' &&\n              <OrgsTraffic />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticTraffic;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticUsers extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true,\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticActiveUsers(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        count = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          count.push(item.count);\n        });\n        let userCount = {\n          label: gettext('Active Users'),\n          data: count,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        filesData = [userCount];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"usersStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={false}\n                chartTitle={gettext('Active Users')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticUsers;\n","import React, { Fragment } from 'react';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport moment from 'moment';\nimport StatisticNav from './statistic-nav';\nimport { Button, Input } from 'reactstrap';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nclass StatisticReports extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      month: moment().format('YYYYMM'),\n      errorMessage: ''\n    };\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  onGenerateReports = (type) => {\n    let url = siteRoot + 'api/v2.1/admin/statistics/';\n    let { month } = this.state;\n    if (!month) {\n      let errorMessage = gettext('It is required.');\n      this.setState({\n        errorMessage: errorMessage\n      });\n      return;\n    }\n    if (type === 'month') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n    }\n    switch(type) {\n      case 'month':\n        url += 'system-user-traffic/excel/?month=' + month;\n        break;\n      case 'storage':\n        url += 'system-user-storage/excel/?';\n        break;\n    }\n    this.setState({\n      errorMessage: ''\n    });\n    window.location.href = url;\n  }\n\n  render() {\n\n    let { errorMessage } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"reportsStatistic\" />\n          <div className=\"cur-view-content\">\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('Monthly User Traffic')}</div>\n              <div className=\"d-flex align-items-center mt-4\">\n                <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n                <Input className=\"statistic-reports-input\" defaultValue={moment().format('YYYYMM')} onChange={this.handleChange} />\n                <Button className=\"statistic-reports-submit operation-item\" onClick={this.onGenerateReports.bind(this, 'month')}>{gettext('Create Report')}</Button>\n              </div>\n              {errorMessage && <div className=\"error\">{errorMessage}</div>}\n            </div>\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('User Storage')}</div>\n              <Button className=\"mt-4 operation-item\" onClick={this.onGenerateReports.bind(this, 'storage')}>{gettext('Create Report')}</Button>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticReports;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'desktop', urlPart:'desktop-devices', text: gettext('Desktop')},\n      {name: 'mobile', urlPart:'mobile-devices', text: gettext('Mobile')}\n    ];\n    if (isPro) {\n      this.navItems.push({name: 'errors', urlPart:'device-errors', text: gettext('Errors')});\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUnlinkDevice from '../../../components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No connected devices')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"19%\">{gettext('User')}</th>\n                <th width=\"19%\">{gettext('Platform')}{' / '}{gettext('Version')}</th>\n                <th width=\"19%\">{gettext('Device Name')}</th>\n                <th width=\"19%\">{gettext('IP')}</th>\n                <th width=\"19%\">{gettext('Last Access')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDevicesList}\n            gotoNextPage={this.getNextPageDevicesList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      unlinked: false,\n      isOpIconShown: false,\n      isUnlinkDeviceDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  handleUnlink = (e) => {\n    e.preventDefault();\n    if (this.props.item.is_desktop_client) {\n      this.toggleUnlinkDeviceDialog();\n    } else {\n      this.unlinkDevice(true);\n    }\n  }\n\n  toggleUnlinkDeviceDialog = () => {\n    this.setState({isUnlinkDeviceDialogOpen: !this.state.isUnlinkDeviceDialogOpen});\n  }\n\n  unlinkDevice = (deleteFiles) => {\n    const { platform, device_id, user } = this.props.item;\n    seafileAPI.sysAdminUnlinkDevice(platform, device_id, user, deleteFiles).then((res) => {\n      this.setState({unlinked: true});\n      let message = gettext('Successfully unlinked the device.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { unlinked, isUnlinkDeviceDialogOpen, isOpIconShown } = this.state;\n\n    if (unlinked) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td>{item.user_name}</td>\n          <td>{item.platform}{' / '}{item.client_version}</td>\n          <td>{item.device_name}</td>\n          <td>{item.last_login_ip}</td>\n          <td>\n            <span title={moment(item.last_accessed).format('llll')}>{moment(item.last_accessed).fromNow()}</span>\n          </td>\n          <td>\n            <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unlink')} onClick={this.handleUnlink}></a>\n          </td>\n        </tr>\n        {isUnlinkDeviceDialogOpen &&\n          <SysAdminUnlinkDevice\n            unlinkDevice={this.unlinkDevice}\n            toggleDialog={this.toggleUnlinkDeviceDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass DevicesByPlatform extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesData: {},\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDevicesListByPage(this.state.currentPage);\n    });\n  }\n\n  getDevicesListByPage = (page) => {\n    let platform = this.props.devicesPlatform;\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDevices(platform, page, per_page).then((res) => {\n      this.setState({\n        devicesData: res.data.devices,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDevicesListByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        <Content\n          loading={this.state.loading}\n          errorMsg={this.state.errorMsg}\n          items={this.state.devicesData}\n          getDevicesListByPage={this.getDevicesListByPage}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n          pageInfo={this.state.pageInfo}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DevicesByPlatform;\n","import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass DesktopDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"desktop\" />\n            <DevicesByPlatform\n              devicesPlatform={'desktop'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DesktopDevices;\n","import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass MobileDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"mobile\" />\n            <DevicesByPlatform\n              devicesPlatform={'mobile'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default MobileDevices;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot } from '../../utils/constants';\n\nconst propTypes = {\n  email: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\n\nclass UserLink extends Component {\n\n  render() {\n    return <Link to={`${siteRoot}sys/users/${encodeURIComponent(this.props.email)}/`}>{this.props.name}</Link>;\n  }\n}\n\nUserLink.propTypes = propTypes;\n\nexport default UserLink;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { Link } from '@gatsbyjs/reach-router';\nimport DevicesNav from './devices-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageDeviceErrorsList = () => {\n    this.props.getDeviceErrorsListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No sync errors')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"16%\">{gettext('User')}</th>\n                <th width=\"20%\">{gettext('Device')}{' / '}{gettext('Version')}</th>\n                <th width=\"16%\">{gettext('IP')}</th>\n                <th width=\"16%\">{gettext('Library')}</th>\n                <th width=\"16%\">{gettext('Error')}</th>\n                <th width=\"16%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDeviceErrorsList}\n            gotoNextPage={this.getNextPageDeviceErrorsList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.device_name}{' / '}{item.client_version}</td>\n        <td>{item.device_ip}</td>\n        <td><Link to={`${siteRoot}sysadmin/#libs/${item.repo_id}`}>{item.repo_name}</Link></td>\n        <td>{item.error_msg}</td>\n        <td>\n          <span className=\"item-meta-info\" title={moment(item.last_accessed).format('llll')}>{moment(item.error_time).fromNow()}</span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DeviceErrors extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesErrors: [],\n      isCleanBtnShown: false,\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDeviceErrorsListByPage(this.state.currentPage);\n    });\n  }\n\n  getDeviceErrorsListByPage = (page) => {\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDeviceErrors(page, per_page).then((res) => {\n      this.setState({\n        loading: false,\n        devicesErrors: res.data.device_errors,\n        pageInfo: res.data.page_info,\n        isCleanBtnShown: res.data.length > 0\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clean = () => {\n    seafileAPI.sysAdminClearDeviceErrors().then((res) => {\n      this.setState({\n        devicesErrors: [],\n        isCleanBtnShown: false\n      });\n      let message = gettext('Successfully cleaned all errors.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDeviceErrorsListByPage(1);\n    });\n  }\n  render() {\n    return (\n      <Fragment>\n        {this.state.isCleanBtnShown ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.clean}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : (\n          <MainPanelTopbar {...this.props} />\n        )}\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"errors\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.devicesErrors}\n                getDeviceErrorsListByPage={this.getDeviceErrorsListByPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                pageInfo={this.state.pageInfo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DeviceErrors;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateQuota: PropTypes.func.isRequired\n};\n\nclass SetQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleQuotaChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      quota: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateQuota(this.state.quota.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { quota, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={quota}\n                  onKeyPress={this.handleKeyPress}\n                  onChange={this.handleQuotaChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>MB</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetQuotaDialog.propTypes = propTypes;\n\nexport default SetQuotaDialog;\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  importUserInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminImportUserDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importUserInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import users from a .xlsx file')}</ModalHeader>\n        <ModalBody>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}useradmin/batchadduser/example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminImportUserDialog.propTypes = propTypes;\n\nexport default SysAdminImportUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  roleOptions: PropTypes.array.isRequired,\n  currentRole: PropTypes.string.isRequired,\n  onRoleChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserRoleEditor extends React.Component {\n\n  translateRoles = (role) => {\n    switch (role) {\n      case 'default':\n        return gettext('Default');\n      case 'guest':\n        return gettext('Guest');\n      default:\n        return role;\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.roleOptions}\n        currentOption={this.props.currentRole}\n        onOptionChanged={this.props.onRoleChanged}\n        translateOption={this.translateRoles}\n      />\n    );\n  }\n}\n\nSysAdminUserRoleEditor.propTypes = propTypes;\n\nexport default SysAdminUserRoleEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass SysAdminAddUserDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isPasswordVisible: false,\n      password: '',\n      passwordAgain: '',\n      email: '',\n      name: '',\n      role: 'default',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (email.trim() &&\n      password.trim() &&\n      passwordAgain.trim()) {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({isPasswordVisible: !this.state.isPasswordVisible});\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  }\n\n  generatePassword = () => {\n    let val = Utils.generatePassword(8);\n    this.setState({\n      password: val,\n      passwordAgain: val\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    });\n  }\n\n  updateRole = (role) => {\n    this.setState({\n      role: role\n    });\n  }\n\n  handleSubmit = () => {\n    const { email, password, passwordAgain, name, role } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    let data = {\n      email: email.trim(),\n      name: name.trim(),\n      password: password.trim()\n    };\n    if (this.props.showRole) {\n      data.role = role;\n    }\n    this.props.addUser(data);\n    this.toggle();\n  }\n\n  render() {\n    const { dialogTitle, showRole } = this.props;\n    const {\n      errorMsg, isPasswordVisible,\n      email, name, role, password, passwordAgain,\n      isSubmitBtnActive\n    } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{dialogTitle || gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Email')}</Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Name(optional)')}</Label>\n              <Input type=\"text\" value={name} onChange={this.inputName} />\n            </FormGroup>\n            {showRole &&\n            <FormGroup>\n              <Label>\n                {gettext('Role')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('You can also add a user as a guest, who will not be allowed to create libraries and groups.')}></span>\n              </Label>\n              <SysAdminUserRoleEditor\n                isTextMode={false}\n                isEditIconShow={false}\n                currentRole={role}\n                roleOptions={this.props.availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            </FormGroup>\n            }\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <InputGroup>\n                <Input autoComplete=\"new-password\" type={isPasswordVisible ? 'text' : 'password'} value={password || ''} onChange={this.inputPassword} />\n                <InputGroupAddon addonType=\"append\">\n                  <Button className=\"mt-0\" onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n                  <Button className=\"mt-0\" onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                </InputGroupAddon>\n              </InputGroup>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type={isPasswordVisible ? 'text' : 'password'} value={passwordAgain || ''} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddUserDialog.propTypes = propTypes;\n\nexport default SysAdminAddUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport UserSelect from '../../user-select';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addAdminInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminBatchAddAdminDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: null,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n handleSelectChange = (options) => {\n   this.setState({\n     options: options,\n     isSubmitBtnActive: options.length > 0\n   });\n }\n\n handleSubmit = () => {\n   this.props.addAdminInBatch(this.state.options.map(item => item.email));\n   this.toggle();\n }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Admin')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            isMulti={true}\n            className=\"reviewer-select\"\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminBatchAddAdminDialog.propTypes = propTypes;\n\nexport default SysAdminBatchAddAdminDialog;\n","class SysAdminUser {\n  constructor(object) {\n    this.email = object.email;\n    this.name = object.name;\n    this.contact_email = object.contact_email;\n    this.login_id = object.login_id;\n    this.last_login = object.last_login;\n    this.last_access_time = object.last_access_time;\n    this.create_time = object.create_time;\n    this.is_active = object.is_active;\n    this.is_staff = object.is_staff;\n    this.reference_id = object.reference_id;\n    this.department = object.department;\n    this.quota_total = object.quota_total;\n    this.quota_usage = object.quota_usage;\n    this.role = object.role;\n    this.institution = object.institution;\n    if (object.org_id) {\n      this.org_id = object.org_id;\n    }\n    if (object.org_name) {\n      this.org_name = object.org_name;\n    }\n    this.isSelected = false;\n  }\n}\n\nexport default SysAdminUser;\n","\nclass SysAdminAdminUser {\n  constructor(object) {\n    this.email = object.email;\n    this.name = object.name;\n    this.contact_email = object.contact_email;\n    this.login_id = object.login_id;\n    this.last_login = object.last_login;\n    this.last_access_time = object.last_access_time;\n    this.create_time = object.create_time;\n    this.is_active = object.is_active;\n    this.is_staff = object.is_staff;\n    this.quota_total = object.quota_total;\n    this.quota_usage = object.quota_usage;\n    this.admin_role = object.admin_role;\n    this.isSelected = false;\n  }\n}\n\nexport default SysAdminAdminUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired\n};\n\nclass Search extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      value: e.target.value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    const value = this.state.value.trim();\n    if (!value) {\n      return false;\n    }\n    this.props.submit(value);\n  }\n\n  render() {\n    return (\n      <div className=\"input-icon\">\n        <i className=\"d-flex input-icon-addon fas fa-search\"></i>\n        <input\n          type=\"text\"\n          className=\"form-control search-input h-6 mr-1\"\n          style={{width: '17rem'}}\n          placeholder={this.props.placeholder}\n          value={this.state.value}\n          onChange={this.handleInputChange}\n          onKeyPress={this.handleKeyPress}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = propTypes;\n\nexport default Search;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext, haveLDAP, isDefaultAdmin } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'database', urlPart: 'users', text: gettext('Database')}\n    ];\n    if (haveLDAP) {\n      this.navItems.push(\n        {name: 'ldap', urlPart: 'users/ldap', text: gettext('LDAP')},\n        {name: 'ldap-imported', urlPart: 'users/ldap-imported', text: gettext('LDAP(imported)')}\n      );\n    }\n    if (isDefaultAdmin) {\n      this.navItems.push(\n        {name: 'admin', urlPart: 'users/admins', text: gettext('Admin')}\n      );\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  statusOptions: PropTypes.array.isRequired,\n  currentStatus: PropTypes.string.isRequired,\n  onStatusChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserStatusEditor extends React.Component {\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.statusOptions}\n        currentOption={this.props.currentStatus}\n        onOptionChanged={this.props.onStatusChanged}\n        translateOption={this.translateStatus}\n      />\n    );\n  }\n}\n\nSysAdminUserStatusEditor.propTypes = propTypes;\n\nexport default SysAdminUserStatusEditor;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, username, gettext, multiInstitution, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUserStatusEditor from '../../../components/select-editor/sysadmin-user-status-editor';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\nimport SelectEditor from '../../../components/select-editor/select-editor';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\n\nconst { availableRoles, availableAdminRoles, institutions } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  sortByQuotaUsage = (e) => {\n    e.preventDefault();\n    this.props.sortByQuotaUsage();\n  }\n\n  render() {\n    const {\n      isAdmin, loading, errorMsg, items, isAllUsersSelected,\n      curPerPage, hasNextPage, currentPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n\n\n      let columns = [];\n\n      let sortIcon;\n      if (sortBy == '') {\n        // initial sort icon\n        sortIcon = <span className=\"fas fa-sort\"></span>;\n      } else {\n        sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      }\n      const spaceText = gettext('Space Used');\n      const spaceEl =\n        sortBy != undefined ? // only offer 'sort' for 'DB' & 'LDAPImported' users\n        <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByQuotaUsage}>{spaceText} {sortIcon}</a> :\n          spaceText;\n      const colSpaceText = <Fragment>{spaceEl}{` / ${gettext('Quota')}`}</Fragment>;\n\n      const colNameText = `${gettext('Name')} / ${gettext('Contact Email')}`;\n      const colCreatedText = `${gettext('Created At')} / ${gettext('Last Login')} / ${gettext('Last Access')}`;\n      if (isPro) {\n        columns.push(\n          {width: '20%', text: colNameText},\n          {width: '15%', text: gettext('Status')},\n          {width: '15%', text: gettext('Role')}\n        );\n      } else {\n        columns.push(\n          {width: '30%', text: colNameText},\n          {width: '20%', text: gettext('Status')}\n        );\n      }\n      if (multiInstitution && !isAdmin) {\n        columns.push(\n          {width: '14%', text: colSpaceText},\n          {width: '14%', text: gettext('Institution')},\n          {width: '14%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      } else {\n        columns.push(\n          {width: '20%', text: colSpaceText},\n          {width: '22%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      }\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"pl-2\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.toggleSelectAllUsers} checked={isAllUsersSelected} />\n                </th>\n                {columns.map((item, index) => {\n                  return <th width={item.width} key={index}>{item.text}</th>;\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  updateUser={this.props.updateUser}\n                  deleteUser={this.props.deleteUser}\n                  updateAdminRole={this.props.updateAdminRole}\n                  revokeAdmin={this.props.revokeAdmin}\n                  onUserSelected={this.props.onUserSelected}\n                  isAdmin={this.props.isAdmin}\n                  isLDAPImported={this.props.isLDAPImported}\n                />);\n              })}\n            </tbody>\n          </table>\n          {(!this.props.isAdmin && !this.props.isSearchResult) &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteUserDialogOpen: false,\n      isResetUserPasswordDialogOpen: false,\n      isRevokeAdminDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleDeleteUserDialog = () => {\n    this.setState({isDeleteUserDialogOpen: !this.state.isDeleteUserDialogOpen});\n  }\n\n  toggleResetUserPasswordDialog = () => {\n    this.setState({isResetUserPasswordDialogOpen: !this.state.isResetUserPasswordDialogOpen});\n  }\n\n  toggleRevokeAdminDialog = () => {\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  }\n\n  onUserSelected = () => {\n    this.props.onUserSelected(this.props.item);\n  }\n\n  updateStatus= (value) => {\n    const isActive = value == 'active';\n    if (isActive) {\n      toaster.notify(gettext('It may take some time, please wait.'));\n    }\n    this.props.updateUser(this.props.item.email, 'is_active', isActive);\n  }\n\n  updateRole = (value) => {\n    this.props.updateUser(this.props.item.email, 'role', value);\n  }\n\n  updateAdminRole = (value) => {\n    this.props.updateAdminRole(this.props.item.email, value);\n  }\n\n  translateAdminRole = (role) => {\n    switch (role) {\n      case 'default_admin':\n        return gettext('Default Admin');\n      case 'system_admin':\n        return gettext('System Admin');\n      case 'daily_admin':\n        return gettext('Daily Admin');\n      case 'audit_admin':\n        return gettext('Audit Admin');\n      default:\n        return role;\n    }\n  }\n\n  updateInstitution = (value) => {\n    this.props.updateUser(this.props.item.email, 'institution', value);\n  }\n\n  translateInstitution = (inst) => {\n    return inst;\n  }\n\n  updateQuota = (value) => {\n    this.props.updateUser(this.props.item.email, 'quota_total', value);\n  }\n\n  deleteUser = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteUser(this.props.item.email);\n  }\n\n  resetPassword = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = () => {\n    const { item } = this.props;\n    this.props.revokeAdmin(item.email, item.name);\n  }\n\n  getMenuOperations = () => {\n    const {\n      isAdmin, isLDAPImported,\n      isSearchResult, item\n    } = this.props;\n    let list = ['Delete'];\n    if (!isLDAPImported ||\n      (isSearchResult && item.source == 'db')) {\n      list.push('Reset Password');\n    }\n    if (isAdmin) {\n      list = ['Revoke Admin'];\n    }\n    return list;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteUserDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetUserPasswordDialog();\n        break;\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const { item, isAdmin } = this.props;\n    const {\n      isOpIconShown,\n      isSetQuotaDialogOpen,\n      isDeleteUserDialogOpen,\n      isResetUserPasswordDialogOpen,\n      isRevokeAdminDialogOpen\n    } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    const resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td className=\"pl-2\">\n            <input type=\"checkbox\" className=\"vam\" onChange={this.onUserSelected} checked={item.isSelected} />\n          </td>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n            {item.contact_email &&\n              <Fragment>\n                <br />\n                {item.contact_email}\n              </Fragment>}\n            {item.org_id &&\n              <Fragment>\n                <br />\n                <Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>({item.org_name})</Link>\n              </Fragment>\n            }\n          </td>\n          <td>\n            <SysAdminUserStatusEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.is_active ? 'active' : 'inactive'}\n              statusOptions={['active', 'inactive']}\n              onStatusChanged={this.updateStatus}\n            />\n          </td>\n          {isPro &&\n          <td>\n            {isAdmin ?\n              <SelectEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                options={availableAdminRoles}\n                currentOption={item.admin_role}\n                onOptionChanged={this.updateAdminRole}\n                translateOption={this.translateAdminRole}\n              /> :\n              <SysAdminUserRoleEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                currentRole={item.role}\n                roleOptions={availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            }\n          </td>\n          }\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n            <span\n              title={gettext('Edit')}\n              className={`fa fa-pencil-alt attr-action-icon ${isOpIconShown ? '' : 'invisible'}`}\n              onClick={this.toggleSetQuotaDialog}>\n            </span>\n          </td>\n          {(multiInstitution && !isAdmin) &&\n            <td>\n              <SelectEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown && institutions.length > 0}\n                options={institutions}\n                currentOption={item.institution}\n                onOptionChanged={this.updateInstitution}\n                translateOption={this.translateInstitution}\n              />\n            </td>\n          }\n          <td>\n            {`${item.create_time ? moment(item.create_time).format('YYYY-MM-DD HH:mm') : '--'} /`}\n            <br />\n            {`${item.last_login ? moment(item.last_login).fromNow() : '--'}`}\n            <br />\n            {`${item.last_access_time ? moment(item.last_access_time).fromNow() : '--'}`}\n          </td>\n          <td>\n            {(item.email != username && isOpIconShown) &&\n            <OpMenu\n              operations={this.getMenuOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleSetQuotaDialog}\n            updateQuota={this.updateQuota}\n          />\n        }\n        {isDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete User')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteUserDialog}\n          />\n        }\n        {isResetUserPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetUserPasswordDialog}\n          />\n        }\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminImportUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-import-user-dialog';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport SysAdminBatchAddAdminDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminUser from '../../../models/sysadmin-user';\nimport SysAdminAdminUser from '../../../models/sysadmin-admin-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UsersNav from './users-nav';\nimport Content from './users-content';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nconst propTypes = {\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool\n};\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isImportUserDialogOpen: false,\n      isAddUserDialogOpen: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false,\n      isBatchAddAdminDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    if (this.props.isAdmin) { // 'Admin' page\n      this.getUserList(); // no pagination\n    } else {\n      let urlParams = (new URL(window.location)).searchParams;\n      const {\n        currentPage, perPage,\n        sortBy = '',\n        sortOrder = 'asc'\n      } = this.state;\n      this.setState({\n        perPage: parseInt(urlParams.get('per_page') || perPage),\n        currentPage: parseInt(urlParams.get('page') || currentPage),\n        sortBy: urlParams.get('order_by') || sortBy,\n        sortOrder: urlParams.get('direction') || sortOrder\n      }, () => {\n        this.getUsersListByPage(this.state.currentPage);\n      });\n    }\n  }\n\n  toggleImportUserDialog = () => {\n    this.setState({isImportUserDialogOpen: !this.state.isImportUserDialogOpen});\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  }\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  }\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  }\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  }\n\n  getUserList = () => {\n  // get admins\n    seafileAPI.sysAdminListAdmins().then(res => {\n      let users = res.data.admin_user_list.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const { isLDAPImported } = this.props;\n    seafileAPI.sysAdminListUsers(page, perPage, isLDAPImported, sortBy, sortOrder).then(res => {\n      let users = res.data.data.map(user => {return new SysAdminUser(user);});\n      this.setState({\n        userList: users,\n        loading: false,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortByQuotaUsage = () => {\n    this.setState({\n      sortBy: 'quota_usage',\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc',\n      currentPage: 1\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getUsersListByPage(currentPage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.map(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  importUserInBatch = (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminImportUserViaFile(file).then((res) => {\n      if (res.data.success.length) {\n        const users = res.data.success.map(item => {\n          if (item.institution == undefined) {\n            item.institution = '';\n          }\n          return new SysAdminUser(item);\n        });\n        this.setState({\n          userList: users.concat(this.state.userList)\n        });\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  addUser = (data) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    const { email, name, role, password } = data;\n    seafileAPI.sysAdminAddUser(email, name, role, password).then((res) => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({\n        userList: userList\n      });\n      toaster.success(res.data.add_user_tip);\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  }\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getOperationsForAll = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n\n    if (isAdmin) {\n      return <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchAddAdminDialog}>{gettext('Add Admin')}</Button>;\n    }\n\n    if (isLDAPImported) {\n      return <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>;\n    }\n\n    // 'database'\n    return (\n      <Fragment>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleImportUserDialog}>{gettext('Import Users')}</Button>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add User')}</Button>\n        <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>\n      </Fragment>\n    );\n  }\n\n  getCurrentNavItem = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n    let item = 'database';\n    if (isAdmin) {\n      item = 'admin';\n    } else if (isLDAPImported) {\n      item = 'ldap-imported';\n    }\n    return item;\n  }\n\n  toggleBatchAddAdminDialog = () => {\n    this.setState({isBatchAddAdminDialogOpen: !this.state.isBatchAddAdminDialogOpen});\n  }\n\n  addAdminInBatch = (emails) => {\n    seafileAPI.sysAdminAddAdminInBatch(emails).then(res => {\n      let users = res.data.success.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users.concat(this.state.userList)\n      });\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    if (this.props.isAdmin) {\n      return null;\n    }\n    // offer 'Search' for 'DB' & 'LDAPImported' users\n    return <Search\n      placeholder={gettext('Search users')}\n      submit={this.searchItems}\n    />;\n  }\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-users/?query=${encodeURIComponent(keyword)}`);\n  }\n\n  render() {\n    const { isAdmin, isLDAPImported } = this.props;\n    const {\n      hasUserSelected,\n      isImportUserDialogOpen,\n      isAddUserDialogOpen,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen,\n      isBatchAddAdminDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          {hasUserSelected ?\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n            : this.getOperationsForAll()\n          }\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem={this.getCurrentNavItem()} />\n            <div className=\"cur-view-content\">\n              <Content\n                isAdmin={isAdmin}\n                isLDAPImported={isLDAPImported}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortByQuotaUsage={this.sortByQuotaUsage}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getUsersListByPage}\n                updateUser={this.updateUser}\n                deleteUser={this.deleteUser}\n                updateAdminRole={this.updateAdminRole}\n                revokeAdmin={this.revokeAdmin}\n                onUserSelected={this.onUserSelected}\n                isAllUsersSelected={this.isAllUsersSelected}\n                toggleSelectAllUsers={this.toggleSelectAllUsers}\n              />\n            </div>\n          </div>\n        </div>\n        {isImportUserDialogOpen &&\n        <SysAdminImportUserDialog\n          toggle={this.toggleImportUserDialog}\n          importUserInBatch={this.importUserInBatch}\n        />\n        }\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            dialogTitle={gettext('Add User')}\n            showRole={isPro}\n            availableRoles={availableRoles}\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {isBatchAddAdminDialogOpen &&\n          <SysAdminBatchAddAdminDialog\n            addAdminInBatch={this.addAdminInBatch}\n            toggle={this.toggleBatchAddAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nUsers.propTypes = propTypes;\n\nexport default Users;\n","import React, { Component, Fragment } from 'react';\nimport Users from './users';\n\nclass AdminUsers extends Component {\n\n  render() {\n    return <Users isAdmin={true} {...this.props} />;\n  }\n}\n\nexport default AdminUsers;\n","import React, { Component, Fragment } from 'react';\nimport Users from './users';\n\nclass LDAPImportedUsers extends Component {\n\n  render() {\n    return <Users isLDAPImported={true} {...this.props} />;\n  }\n}\n\nexport default LDAPImportedUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport UsersNav from './users-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"40%\">{gettext('Email')}</th>\n                <th width=\"30%\">{gettext('Space Used')}{' / '}{gettext('Quota')}</th>\n                <th width=\"30%\">{gettext('Last Login')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { item } = this.props;\n    let email = '<span class=\"op-target\">' + Utils.HTMLescape(item.email) + '</span>';\n    return (\n      <Fragment>\n        <tr>\n          <td><UserLink email={item.email} name={item.email} /></td>\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n          </td>\n          <td>\n            {item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: {},\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUsersListByPage(this.state.currentPage);\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLDAPUsers(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        userList: res.data.ldap_user_list,\n        hasNextPage: res.data.has_next_page,\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem=\"ldap\" />\n            <div className=\"cur-view-content\">\n              <Content\n                resetPerPage={this.resetPerPage}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getUsersListByPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Users;\n","import React, { Component, Fragment } from 'react';\nimport { Button, Form, FormGroup, Input, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport Paginator from '../../../components/paginator';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './users-content';\n\n\nclass SearchUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      pageInfo: {\n        has_next_page: false,\n        current_page: 1,\n      },\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      query: params.get('query') || '',\n      currentPage: parseInt(params.get('page') || currentPage),\n      perPage: parseInt(params.get('per_page') || perPage)\n    }, () => {this.getItems(this.state.currentPage);});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  }\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  }\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  }\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  }\n\n  getItems = (page) => {\n    seafileAPI.sysAdminSearchUsers(this.state.query.trim(), page, this.state.perPage).then(res => {\n      this.setState({\n        userList: res.data.user_list,\n        loading: false,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItems(1);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.map(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  }\n\n  getPreviousPageList = () => {\n    this.getItems(this.state.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.getItems(this.state.pageInfo.current_page + 1);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getItems();\n      }\n    }\n  }\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    const {\n      hasUserSelected,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        {hasUserSelected ?\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n          </MainPanelTopbar> :\n          <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Users')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Users')}</h4>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" value={query} placeholder={gettext('Search users')} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  isLDAPImported={false}\n                  isAdmin={false}\n                  isSearchResult={true}\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.userList}\n                  updateUser={this.updateUser}\n                  deleteUser={this.deleteUser}\n                  updateAdminRole={this.updateAdminRole}\n                  revokeAdmin={this.revokeAdmin}\n                  onUserSelected={this.onUserSelected}\n                  isAllUsersSelected={this.isAllUsersSelected}\n                  toggleSelectAllUsers={this.toggleSelectAllUsers}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {this.state.pageInfo &&\n        <Paginator\n          gotoPreviousPage={this.getPreviousPageList}\n          gotoNextPage={this.getNextPageList}\n          currentPage={this.state.pageInfo.current_page}\n          hasNextPage={this.state.pageInfo.has_next_page}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchUsers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  uploadOrDownload: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  updateUploadDownloadRateLimit: PropTypes.func.isRequired\n};\n\nclass SysAdminSetUploadDownloadRateLimitDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      rateLimit: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleRateLimitChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      rateLimit: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateUploadDownloadRateLimit(this.props.uploadOrDownload, this.state.rateLimit.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { rateLimit, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{this.props.uploadOrDownload == \"upload\" ? gettext('Set Upload Rate Limit') : gettext('Set Download Rate Limit')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={rateLimit}\n                  onKeyPress={this.handleKeyPress}\n                  onChange={this.handleRateLimitChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>kB/s</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetUploadDownloadRateLimitDialog.propTypes = propTypes;\n\nexport default SysAdminSetUploadDownloadRateLimitDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  dialogTitle: PropTypes.string.isRequired,\n  updateValue: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass UpdateUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const  { dialogTitle, toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{this.props.dialogTitle}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={this.state.value}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUpdateUser.propTypes = propTypes;\n\nexport default UpdateUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: '', text: gettext('Info')},\n      {name: 'owned-repos', urlPart: 'owned-libraries', text: gettext('Owned Libraries')},\n      {name: 'shared-repos', urlPart: 'shared-libraries', text: gettext('Shared Libraries')},\n      {name: 'links', urlPart: 'shared-links', text: gettext('Shared Links')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')}\n    ];\n  }\n\n  render() {\n    const { currentItem, email, userName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/users/`}>{gettext('Users')}</Link> / {userName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/users/${encodeURIComponent(email)}/${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { FormGroup, Label, Input, Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminSetUploadDownloadRateLimitDialog from '../../../components/dialog/sysadmin-dialog/set-upload-download-rate-limit';\nimport SysAdminUpdateUserDialog from '../../../components/dialog/sysadmin-dialog/update-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { twoFactorAuthEnabled } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentKey: '',\n      dialogTitle: '',\n      isSetQuotaDialogOpen: false,\n      isSetUserUploadRateLimitDialogOpen: false,\n      isSetUserDownloadRateLimitDialogOpen: false,\n      isUpdateUserDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleSetUserUploadRateLimitDialog = () => {\n    this.setState({isSetUserUploadRateLimitDialogOpen: !this.state.isSetUserUploadRateLimitDialogOpen});\n  }\n\n  toggleSetUserDownloadRateLimitDialog = () => {\n    this.setState({isSetUserDownloadRateLimitDialogOpen: !this.state.isSetUserDownloadRateLimitDialogOpen});\n  }\n\n  updateQuota = (value) => {\n    this.props.updateUser('quota_total', value);\n  }\n\n  updateUploadDownloadRateLimit = (uploadOrDownload, value) => {\n    if (uploadOrDownload == 'upload'){\n        this.props.updateUser('upload_rate_limit', value);\n    }\n    if (uploadOrDownload == 'download'){\n        this.props.updateUser('download_rate_limit', value);\n    }\n  }\n\n  toggleDialog = (key, dialogTitle) => {\n    this.setState({\n      currentKey: key,\n      dialogTitle: dialogTitle,\n      isUpdateUserDialogOpen: !this.state.isUpdateUserDialogOpen\n    });\n  }\n\n  toggleSetNameDialog = () => {\n    this.toggleDialog('name', gettext('Set Name'));\n  }\n\n  toggleSetUserLoginIDDialog = () => {\n    this.toggleDialog('login_id', gettext('Set Login ID'));\n  }\n\n toggleSetUserComtactEmailDialog = () => {\n   this.toggleDialog('contact_email', gettext('Set Contact Email'));\n }\n\n  toggleSetUserReferenceIDDialog = () => {\n    this.toggleDialog('reference_id', gettext('Set Reference ID'));\n  }\n\n  updateValue = (value) => {\n    this.props.updateUser(this.state.currentKey, value);\n  }\n\n  toggleUpdateUserDialog = () => {\n    this.toggleDialog('', '');\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, userInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const user = this.props.userInfo;\n      const {\n        currentKey, dialogTitle,\n        isSetQuotaDialogOpen, isUpdateUserDialogOpen,\n        isSetUserUploadRateLimitDialogOpen, isSetUserDownloadRateLimitDialogOpen\n      } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Avatar')}</dt>\n            <dd className=\"info-item-content\">\n              <img src={user.avatar_url} alt={user.name} width=\"80\" className=\"rounded\"  />\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Email')}</dt>\n            <dd className=\"info-item-content\">{user.email}</dd>\n\n            {user.org_name &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Organization')}</dt>\n                <dd className=\"info-item-content\">{user.org_name}</dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {user.name || '--'}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Login ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.login_id || '--'}\n              {this.showEditIcon(this.toggleSetUserLoginIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Contact Email')}</dt>\n            <dd className=\"info-item-content\">\n              {user.contact_email || '--'}\n              {this.showEditIcon(this.toggleSetUserComtactEmailDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Reference ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.reference_id|| '--'}\n              {this.showEditIcon(this.toggleSetUserReferenceIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used / Quota')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(user.quota_usage)} / ${user.quota_total > 0 ? Utils.bytesToSize(user.quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n            {isPro &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Upload Rate Limit')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.upload_rate_limit > 0 ? user.upload_rate_limit + ' kB/s' : '--'}\n                  {this.showEditIcon(this.toggleSetUserUploadRateLimitDialog)}\n                </dd>\n                <dt className=\"info-item-heading\">{gettext('Download Rate Limit')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.download_rate_limit > 0 ? user.download_rate_limit + ' kB/s' : '--'}\n                  {this.showEditIcon(this.toggleSetUserDownloadRateLimitDialog)}\n                </dd>\n              </Fragment>\n            }\n            {twoFactorAuthEnabled &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Two-Factor Authentication')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.has_default_device ?\n                    <FormGroup>\n                      <p className=\"mb-1\">{gettext('Status: enabled')}</p>\n                      <Button onClick={this.props.disable2FA}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup> :\n                    <FormGroup>\n                      <Button disabled={true}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup>\n                  }\n                  <FormGroup check>\n                    <Label check>\n                      <Input type=\"checkbox\" checked={user.is_force_2fa} onChange={this.props.toggleForce2fa} />\n                      <span>{gettext('Force Two-Factor Authentication')}</span>\n                    </Label>\n                  </FormGroup>\n                </dd>\n              </Fragment>\n            }\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetQuotaDialog\n            updateQuota={this.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {(isPro && isSetUserUploadRateLimitDialogOpen) &&\n          <SysAdminSetUploadDownloadRateLimitDialog\n            uploadOrDownload=\"upload\"\n            updateUploadDownloadRateLimit={this.updateUploadDownloadRateLimit}\n            toggle={this.toggleSetUserUploadRateLimitDialog}\n          />\n          }\n          {(isPro && isSetUserDownloadRateLimitDialogOpen) &&\n          <SysAdminSetUploadDownloadRateLimitDialog\n            uploadOrDownload=\"download\"\n            updateUploadDownloadRateLimit={this.updateUploadDownloadRateLimit}\n            toggle={this.toggleSetUserDownloadRateLimitDialog}\n          />\n          }\n          {isUpdateUserDialogOpen &&\n          <SysAdminUpdateUserDialog\n            dialogTitle={dialogTitle}\n            value={user[currentKey]}\n            updateValue={this.updateValue}\n            toggleDialog={this.toggleUpdateUserDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass User extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    // avatar size: 160\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email, 160).then((res) => {\n      this.setState({\n        loading: false,\n        userInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateUser = (key, value) => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo[key]= res.data[key];\n      this.setState({\n        userInfo: userInfo\n      });\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  disable2FA = () => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminDeleteTwoFactorAuth(email).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.has_default_device = false;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleForce2fa = (e) => {\n    const email = this.state.userInfo.email;\n    const checked = e.target.checked;\n    seafileAPI.sysAdminSetForceTwoFactorAuth(email, checked).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.is_force_2fa = checked;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { userInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"info\" email={this.props.email} userName={userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                userInfo={this.state.userInfo}\n                updateUser={this.updateUser}\n                disable2FA={this.disable2FA}\n                toggleForce2fa={this.toggleForce2fa}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default User;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Last Update')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteRepo={this.props.deleteRepo}\n                  transferRepo={this.props.transferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.id);\n  }\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  transferRepo = (owner) => {\n    this.props.transferRepo(this.props.item.id, owner.email);\n    this.toggleTransferDialog();\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n    }\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n        <TransferDialog\n          itemName={item.name}\n          submit={this.transferRepo}\n          canTransferToDept={false}\n          toggleDialog={this.toggleTransferDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListReposByOwner(email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repos\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferRepo = (repoID, email) => {\n    seafileAPI.sysAdminTransferRepo(repoID, email).then((res) => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"owned-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n                transferRepo={this.transferRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Repos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Share From')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  }\n\n  getOwnerLink = () => {\n    let link;\n    const { item } = this.props;\n    const index = item.owner_email.indexOf('@seafile_group');\n    if (index == -1) {\n      link = <UserLink email={item.owner_email} name={item.owner_name} />;\n    } else {\n      const groupID = item.owner_email.substring(0, index);\n      link = <Link to={`${siteRoot}sys/departments/${groupID}/`}>{item.owner_name}</Link>;\n    }\n    return link;\n  }\n\n  render() {\n    const { item } = this.props;\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n    return (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{this.getOwnerLink()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modify).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListShareInRepos(email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"shared-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Repos;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport LinkDialog from '../../../components/dialog/share-admin-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No shared links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('Visits')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isLinkDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({isLinkDialogOpen: !this.state.isLinkDialogOpen});\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'View':\n        translateResult = gettext('View');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'View':\n        this.toggleLinkDialog();\n        break;\n      case 'Delete':\n        this.deleteItem();\n        break;\n    }\n  }\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  }\n\n  getIconUrl = () => {\n    const { item } = this.props;\n    let url;\n    if (item.type == 'upload') {\n      url = Utils.getFolderIconUrl();\n    } else { // share link\n      if (item.is_dir) {\n        url = Utils.getFolderIconUrl();\n      } else {\n        url = Utils.getFileIconUrl(item.obj_name);\n      }\n    }\n    return url;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={this.getIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>{item.obj_name == '/' ? item.repo_name : item.obj_name}</td>\n          {item.type == 'upload' ?\n            <Fragment>\n              <td></td>\n              <td>{gettext('Upload')}</td>\n            </Fragment> :\n            <Fragment>\n              <td>{item.is_dir ? null : Utils.bytesToSize(item.size)}</td>\n              <td>{gettext('Download')}</td>\n            </Fragment>\n          }\n          <td>{item.view_cnt}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['View', 'Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isLinkDialogOpen &&\n          <LinkDialog\n            link={item.link}\n            toggleDialog={this.toggleLinkDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Links extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      uploadLinkItems: [],\n      shareLinkItems: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n\n    seafileAPI.sysAdminListShareLinksByUser(email).then(res => {\n      const items = res.data.share_link_list.map(item => {\n        item.type = 'download';\n        return item;\n      });\n      items.sort((a, b) => {\n        return a.is_dir ? -1 : 1;\n      });\n      this.setState({\n        loading: false,\n        shareLinkItems: items\n      });\n    });\n    seafileAPI.sysAdminListUploadLinksByUser(email).then(res => {\n      const items = res.data.upload_link_list.map(item => {\n        item.type = 'upload';\n        return item;\n      });\n      this.setState({\n        loading: false,\n        uploadLinkItems: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    const type = item.type;\n    const token = item.token;\n    if (type == 'download') {\n      seafileAPI.sysAdminDeleteShareLink(token).then(res => {\n        let items = this.state.shareLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          shareLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.sysAdminDeleteUploadLink(token).then(res => {\n        let items = this.state.uploadLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          uploadLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { shareLinkItems, uploadLinkItems } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"links\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={[].concat(uploadLinkItems, shareLinkItems)}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Links;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"35%\">{gettext('Created At')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n\n    const url = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={url}>{item.name}</Link></td>\n          <td>{this.getRoleText()}</td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm')}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    const email = decodeURIComponent(this.props.email);\n    seafileAPI.sysAdminGetUser(email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListGroupsJoinedByUser(email).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"groups\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\n\nconst propTypes = {\n  createRepo: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass SysAdminCreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      ownerEmail: '',\n      errMessage: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      repoName: value,\n      isSubmitBtnActive: value.trim()\n    });\n  }\n\n  handleSubmit = () => {\n    const { repoName, ownerEmail } = this.state;\n    this.props.createRepo(repoName.trim(), ownerEmail);\n    this.toggle();\n  }\n\n  handleSelectChange = (option) => {\n    // option can be null\n    this.setState({\n      ownerEmail: option ? option.email : ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"userSelect\">\n                {gettext('Owner')}\n                <span className=\"small text-secondary\">{gettext('(If left blank, owner will be admin)')}</span>\n              </Label>\n              <UserSelect\n                id=\"userSelect\"\n                isMulti={false}\n                className=\"reviewer-select\"\n                placeholder={gettext('Select a user')}\n                onSelectChange={this.handleSelectChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminCreateRepoDialog.propTypes = propTypes;\n\nexport default SysAdminCreateRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all-libraries', text: gettext('All')},\n      {name: 'system', urlPart: 'system-library', text: gettext('System')},\n      {name: 'trash', urlPart: 'trash-libraries', text: gettext('Trash')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.user_email);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.user_name}</td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass UserList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <UserItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass SysAdminShareToUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n    this.options = [];\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'user').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({sharedItems: res.data});\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToUser = () => {\n    let users = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        users[i] = this.state.selectedOption[i].email;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'user' , users, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let newItems = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(newItems),\n        selectedOption: null,\n        permission: 'rw',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch(error => {\n      if (error.response) {\n        let message = gettext('Library can not be shared to owner.');\n        let errMessage = [];\n        errMessage.push(message);\n        this.setState({\n          errorMsg: errMessage,\n          selectedOption: null,\n        });\n      }\n    });\n  }\n\n  deleteShareItem = (useremail) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'user', useremail).then(res => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter( item => { return item.user_email !== useremail; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let userEmail = item.user_email;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'user', userEmail, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateSharedItems = (item, permission) => {\n    let username = item.user_name;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemUsername = sharedItem.user_name;\n      if (username === sharedItemUsername) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    let { sharedItems } = this.state;\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('User')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleSelectChange}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToUser}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.email) {\n                  errMessage = item.email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('User')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <UserList\n              items={sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToUser.propTypes = propTypes;\n\nexport default SysAdminShareToUser;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport Select from 'react-select';\nimport { isPro, gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.group_id);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = Utils.getSharedPermission(item);\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className='name'>{item.group_name}</td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass GroupList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <GroupItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass SysAdminShareToGroup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listSharedGroups();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = [];\n      for (let i = 0 ; i < res.data.length; i++) {\n        let obj = {};\n        obj.value = res.data[i].name;\n        obj.id = res.data[i].id;\n        obj.label = res.data[i].name;\n        this.options.push(obj);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listSharedGroups = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'group').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({\n          sharedItems: res.data\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToGroup = () => {\n    let groups = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        groups[i] = this.state.selectedOption[i].id;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'group', groups, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let items = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(items),\n        selectedOption: null,\n        permission: 'rw',\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteShareItem = (groupID) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'group', groupID).then(() => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter(item => { return item.group_id !== groupID; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let groupID = item.group_id;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'group', groupID, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateSharedItems = (item, permission) => {\n    let groupID = item.group_id;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('Group')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  isMulti\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select groups...')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  repoID={this.props.repoID}\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToGroup}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_name + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('Group')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <GroupList\n              items={this.state.sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToGroup.propTypes = propTypes;\n\nexport default SysAdminShareToGroup;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SysAdminShareToUser from './sysadmin-share-to-user';\nimport SysAdminShareToGroup from './sysadmin-share-to-group';\nimport '../../../css/share-link-dialog.css';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  itemPath: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool\n};\n\nclass SysAdminShareDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: this.getInitialActiveTab(),\n      isRepoOwner: false\n    };\n  }\n\n  getInitialActiveTab = () => {\n    return 'shareToUser';\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderDirContent = () => {\n    let activeTab = this.state.activeTab;\n    const { enableDirPrivateShare, isGroupOwnedRepo } = this.props;\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            {enableDirPrivateShare &&\n              <Fragment>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')}>\n                    {gettext('Share to user')}\n                  </NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')}>\n                    {gettext('Share to group')}\n                  </NavLink>\n                </NavItem>\n              </Fragment>\n            }\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            {enableDirPrivateShare &&\n              <Fragment>\n                <TabPane tabId=\"shareToUser\">\n                  <SysAdminShareToUser itemType={'library'} isGroupOwnedRepo={isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner}/>\n                </TabPane>\n                <TabPane tabId=\"shareToGroup\">\n                  <SysAdminShareToGroup itemType={'library'} isGroupOwnedRepo={isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner}/>\n                </TabPane>\n              </Fragment>\n            }\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '720px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>{gettext('Share')} <span className=\"op-target\" title={this.props.itemName}>{this.props.itemName}</span></ModalHeader>\n          <ModalBody className=\"share-dialog-content\">\n            {this.renderDirContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nSysAdminShareDialog.propTypes = propTypes;\n\nexport default SysAdminShareDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass SysAdminLibHistorySettingDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.sysAdminGetRepoHistorySetting(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.sysAdminUpdateRepoHistorySetting(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminLibHistorySettingDialog.propTypes = propTypes;\n\nexport default SysAdminLibHistorySettingDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport DeleteRepoDialog from '../../../components/dialog/delete-repo-dialog';\nimport SysAdminShareDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-share-dialog';\nimport SysAdminLibHistorySettingDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog';\nimport UserLink from '../user-link';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  sortByFileCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('file_count');\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    this.props.sortItems('size');\n  }\n\n  render() {\n    // offer 'sort' only for 'all repos'\n    const { loading, errorMsg, items, pageInfo, curPerPage, sortBy } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className=\"fas fa-caret-down\"></span>;\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">\n                  {sortBy != undefined ?\n                    <Fragment>\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByFileCount}>{gettext('Files')} {sortBy == 'file_count' ? sortIcon : initialSortIcon}</a>{' / '}\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' ? sortIcon : initialSortIcon}</a>\n                    </Fragment> :\n                    gettext('Files') / gettext('Size')\n                  }\n                </th>\n                <th width=\"32%\">ID</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onTransferRepo={this.props.onTransferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isShareDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false,\n      isHistorySettingDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.sysAdminDeleteRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      this.setState({\n        isDeleteDialogOpen: false,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  onTransferRepo = (owner) => {\n    seafileAPI.sysAdminTransferRepo(this.props.repo.id, owner.email).then((res) => {\n      this.props.onTransferRepo(res.data);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.toggleTransferDialog();\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Share':\n        this.toggleShareDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      case 'History Setting':\n        this.toggleHistorySettingDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShareDialogOpen: !this.state.isShareDialogOpen});\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  toggleHistorySettingDialog = () => {\n    this.setState({isHistorySettingDialogOpen: !this.state.isHistorySettingDialogOpen});\n  }\n\n  renderRepoName = () => {\n    const { repo } = this.props;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  getOperations = () => {\n    const { repo } = this.props;\n    let operations = ['Delete', 'Transfer'];\n    if (!repo.encrypted) {\n      operations.push('Share');\n    }\n    operations.push('History Setting');\n    return operations;\n  }\n\n  render () {\n    const { repo } = this.props;\n    const {\n      isOpIconShown,\n      isShareDialogOpen,\n      isDeleteDialogOpen,\n      isTransferDialogOpen,\n      isHistorySettingDialogOpen\n    } = this.state;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    const index = repo.owner_email.indexOf('@seafile_group');\n    let isGroupOwnedRepo = index != -1;\n    let departmentID;\n    if (isGroupOwnedRepo) {\n      departmentID = repo.owner_email.substring(0, index);\n    }\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{`${repo.file_count} / ${Utils.bytesToSize(repo.size)}`}</td>\n          <td>{repo.id}</td>\n          <td>\n            {isGroupOwnedRepo ?\n              <Link to={`${siteRoot}sys/departments/${departmentID}/`}>{repo.owner_name}</Link> :\n              <UserLink email={repo.owner_email} name={repo.owner_name} />\n            }\n          </td>\n          <td>\n            {(!isGroupOwnedRepo && isOpIconShown) &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isShareDialogOpen &&\n          <ModalPortal>\n            <SysAdminShareDialog\n              itemName={repo.name}\n              itemPath={'/'}\n              repoID={repo.id}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        }\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        }\n        {isTransferDialogOpen &&\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.name}\n              submit={this.onTransferRepo}\n              canTransferToDept={false}\n              toggleDialog={this.toggleTransferDialog}\n            />\n          </ModalPortal>\n        }\n        {isHistorySettingDialogOpen &&\n          <ModalPortal>\n            <SysAdminLibHistorySettingDialog\n              repoID={repo.id}\n              itemName={repo.name}\n              toggleDialog={this.toggleHistorySettingDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport ReposNav from './repos-nav';\nimport Content from './repos';\n\nclass AllRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      sortBy: '',\n      isCreateRepoDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage, sortBy } = this.state;\n    this.setState({\n      sortBy: urlParams.get('order_by') || sortBy,\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateRepoDialog = () => {\n    this.setState({isCreateRepoDialogOpen: !this.state.isCreateRepoDialogOpen});\n  }\n\n  getReposByPage = (page) => {\n    const { perPage, sortBy } = this.state;\n    seafileAPI.sysAdminListAllRepos(page, perPage, sortBy).then((res) => {\n      this.setState({\n        loading: false,\n        repos: res.data.repos,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getReposByPage(currentPage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  }\n\n  createRepo = (repoName, Owner) => {\n    seafileAPI.sysAdminCreateRepo(repoName, Owner).then(res => {\n      this.state.repos.unshift(res.data);\n      this.setState({\n        repos: this.state.repos\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by name or ID')}\n      submit={this.searchRepos}\n    />;\n  }\n\n  searchRepos = (repoNameOrID) => {\n    navigate(`${siteRoot}sys/search-libraries/?name_or_id=${encodeURIComponent(repoNameOrID)}`);\n  }\n\n  render() {\n    let { isCreateRepoDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleCreateRepoDialog}>\n            <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n          </Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                sortBy={this.state.sortBy}\n                sortItems={this.sortItems}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                onDeleteRepo={this.onDeleteRepo}\n                onTransferRepo={this.onTransferRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateRepoDialogOpen &&\n        <SysAdminCreateRepoDialog\n          createRepo={this.createRepo}\n          toggleDialog={this.toggleCreateRepoDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default AllRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ReposNav from './repos-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"33%\">{gettext('Name')}</th>\n                <th width=\"34%\">ID</th>\n                <th width=\"33%\">{gettext('Description')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item}/>);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return table;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const item = this.props.item;\n    return (\n      <tr>\n        <td><Link to={`${siteRoot}sys/libraries/${item.id}/`}>{item.name}</Link></td>\n        <td>{item.id}</td>\n        <td>{item.description}</td>\n      </tr>\n    );\n  }\n}\n\nclass SystemRepo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSystemRepoInfo().then((res) => {\n      let items = [];\n      items.push(res.data);\n      this.setState({\n        items: items,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"system\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SystemRepo;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UserLink from '../user-link';\nimport ReposNav from './repos-nav';\n\nconst { trashReposExpireDays } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No deleted libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <p className=\"mt-4 small text-secondary\">{gettext('Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.').replace('{trashReposExpireDays}', trashReposExpireDays)}</p>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"43%\">{gettext('Name')}</th>\n                <th width=\"27%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Deleted Time')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onRestoreRepo={this.props.onRestoreRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isDeleteRepoDialogOpen: false,\n      isRestoreRepoDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onDeleteRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminDeleteTrashRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRestoreRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminRestoreTrashRepo(repo.id).then((res) => {\n      this.props.onRestoreRepo(repo);\n      let message = gettext('Successfully restored the library.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleDeleteRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen});\n  }\n\n  toggleRestoreRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRestoreRepoDialogOpen: !this.state.isRestoreRepoDialogOpen});\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Restore':\n        translateResult = gettext('Restore');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Restore':\n        this.toggleRestoreRepoDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteRepoDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  render () {\n    const { repo } = this.props;\n    const { isOpIconShown, isDeleteRepoDialogOpen, isRestoreRepoDialogOpen } = this.state;\n    const iconUrl = Utils.getLibIconUrl(repo);\n    const iconTitle = Utils.getLibIconTitle(repo);\n    const repoName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.name) + '</span>';\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{repo.name}</td>\n          <td>\n            {repo.owner.indexOf('@seafile_group') == -1 ?\n              <UserLink email={repo.owner} name={repo.owner_name} /> :\n              repo.group_name}\n          </td>\n          <td>{moment(repo.delete_time).fromNow()}</td>\n          <td>\n            {isOpIconShown && (\n              <OpMenu\n                operations={['Restore', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            )}\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete Library')}\n              message={gettext('Are you sure you want to delete {placeholder} completely?').replace('{placeholder}', repoName)}\n              executeOperation={this.onDeleteRepo}\n              confirmBtnText={gettext('Delete')}\n              toggleDialog={this.toggleDeleteRepoDialog}\n            />\n          </ModalPortal>\n        }\n        {isRestoreRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Restore Library')}\n              message={gettext('Are you sure you want to restore {placeholder}?').replace('{placeholder}', repoName)}\n              executeOperation={this.onRestoreRepo}\n              confirmBtnText={gettext('Restore')}\n              toggleDialog={this.toggleRestoreRepoDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass TrashRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      isCleanTrashDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCleanTrashDialog = () => {\n    this.setState({isCleanTrashDialogOpen: !this.state.isCleanTrashDialogOpen});\n  }\n\n  getReposByPage = (page) => {\n    let perPage = this.state.perPage;\n    seafileAPI.sysAdminListTrashRepos(page, perPage).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onRestoreRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  cleanTrash = () => {\n    seafileAPI.sysAdminCleanTrashRepos().then(res => {\n      this.setState({repos: []});\n      toaster.success(gettext('Successfully cleared trash.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by owner')}\n      submit={this.searchRepos}\n    />;\n  }\n\n  searchRepos = (owner) => {\n    seafileAPI.sysAdminSearchTrashRepos(owner).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: null,\n        errorMsg: '', // necessary!\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    const { isCleanTrashDialogOpen } = this.state;\n\n    // enable 'search': <MainPanelTopbar search={this.getSearch()}>\n    return (\n      <Fragment>\n        {this.state.repos.length ? (\n          <MainPanelTopbar {...this.props}>\n            <Button className=\"operation-item\" onClick={this.toggleCleanTrashDialog}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"trash\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                pageInfo={this.state.pageInfo}\n                onDeleteRepo={this.onDeleteRepo}\n                onRestoreRepo={this.onRestoreRepo}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCleanTrashDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clear Trash')}\n            message={gettext('Are you sure you want to clear trash?')}\n            executeOperation={this.cleanTrash}\n            confirmBtnText={gettext('Clear')}\n            toggleDialog={this.toggleCleanTrashDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TrashRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './repos';\n\n\nclass SearchRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      repos: []\n    };\n  }\n\n  componentDidMount() {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name_or_id') || ''\n    }, this.getRepos);\n  }\n\n  getRepos = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchRepos(name).then((res) => {\n      this.setState({\n        loading: false,\n        errorMsg: '',\n        repos: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  searchRepos = () => {\n    this.getRepos();\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.searchRepos();\n      }\n    }\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Libraries')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name or ID.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name or ID')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.searchRepos}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.repos}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchRepos;\n","class Dirent {\n  constructor(obj) {\n    this.name = obj.obj_name;\n    this.mtime = obj.last_update;\n    this.size = obj.file_size;\n    this.is_file = obj.is_file;\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nexport default Dirent;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { isSystemRepo, currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        {isSystemRepo ?\n          <a href={`${siteRoot}sys/system-library/`}>{gettext('System')}</a> :\n          <a href={`${siteRoot}sys/all-libraries/`}>{gettext('All')}</a>\n        }\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport Loading from '../../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  deleteDirent = (e) => {\n    e.preventDefault();\n    this.props.deleteDirent(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown, isDeleteDialogOpen } = this.state;\n    let { dirent, fromSystemRepo } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && fromSystemRepo &&\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.deleteDirent}></a>\n            }\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{dirent.size}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport CreateFolderDialog from '../../../components/dialog/create-folder-dialog';\nimport Dirent from '../../../models/system-admin/dirent';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport DirPathBar from './dir-path-bar';\nimport DirContent from './dir-content';\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      isSystemRepo: false,\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  toggleNewFolderDialog = () => {\n    this.setState({isNewFolderDialogOpen: !this.state.isNewFolderDialogOpen});\n  }\n\n  createNewFolder = (path) => {\n    let folderName = Utils.getFileName(path);\n    seafileAPI.sysAdminCreateSysRepoFolder(this.props.repoID, this.state.path, folderName).then(res => {\n      let new_dirent = new Dirent(res.data);\n      let direntList = this.state.direntList;\n      direntList.unshift(new_dirent);\n      this.setState({\n        direntList: direntList\n      });\n      this.toggleNewFolderDialog();\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoDirents(repoID, path).then(res => {\n      const { is_system_library: isSystemRepo, repo_name: repoName, dirent_list } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        isSystemRepo: isSystemRepo,\n        direntList: direntList,\n        path: path,\n      }, () => {\n        let url = siteRoot + 'sys/libraries/' + repoID + '/' + encodeURIComponent(this.state.repoName) + Utils.encodePath(path);\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminDeleteRepoDirent(this.props.repoID, path).then(res => {\n      toaster.success(gettext('Successfully deleted 1 item.'));\n      let direntList = this.state.direntList.filter(item => {\n        return item.name != dirent.name;\n      });\n      this.setState({\n        direntList: direntList\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminGetRepoFileDownloadURL(this.props.repoID, path).then(res => {\n      location.href = res.data.download_url;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    seafileAPI.sydAdminGetSysRepoItemUploadURL(path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data.upload_link, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'is_file': true,\n          'obj_name': fileObj.name,\n          'file_size': Utils.bytesToSize(fileObj.size),\n          'last_update': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.state.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, isSystemRepo, path,\n      isNewFolderDialogOpen } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        {isSystemRepo ?\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n              <Button className=\"operation-item\" onClick={this.toggleNewFolderDialog}>{gettext('New Folder')}</Button>\n            </Fragment>\n          </MainPanelTopbar> : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                isSystemRepo={isSystemRepo}\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                fromSystemRepo={isSystemRepo}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n        {isNewFolderDialogOpen &&\n          <CreateFolderDialog\n            parentPath={path}\n            checkDuplicatedName={this.checkDuplicatedName}\n            onAddFolder={this.createNewFolder}\n            addFolderCancel={this.toggleNewFolderDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\n\nconst propTypes = {\n  createGroup: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminCreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      ownerEmail: '',\n      errMessage: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({groupName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let groupName = this.state.groupName.trim();\n    this.props.createGroup(groupName, this.state.ownerEmail);\n  }\n\n  handleSelectChange = (option) => {\n    // option can be null\n    this.setState({\n      ownerEmail: option ? option.email : ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"groupName\">{gettext('Name')}</Label>\n              <Input\n                id=\"groupName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.groupName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n              <Label className=\"mt-2\">\n                {gettext('Owner')}\n                <span className=\"small text-secondary\">{gettext('(If left blank, owner will be admin)')}</span>\n              </Label>\n              <UserSelect\n                isMulti={false}\n                className=\"reviewer-select\"\n                placeholder={gettext('Select a user')}\n                onSelectChange={this.handleSelectChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminCreateGroupDialog.propTypes = propTypes;\n\nexport default SysAdminCreateGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\nconst propTypes = {\n  groupName: PropTypes.string.isRequired,\n  transferGroup: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminTransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      submitBtnDisabled: true\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      submitBtnDisabled: option == null\n    });\n  }\n\n  submit = () => {\n    const receiver = this.state.selectedOption.email;\n    this.props.transferGroup(receiver);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const { submitBtnDisabled } = this.state;\n    const groupName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.groupName) +'</span>';\n    const msg = gettext('Transfer Group {placeholder} to').replace('{placeholder}', groupName);\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: msg}}></span>\n        </ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Select a user')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={submitBtnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminTransferGroupDialog.propTypes = propTypes;\n\nexport default SysAdminTransferGroupDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport EmptyTip from '../../../components/empty-tip';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminTransferGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"40%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteGroup={this.props.deleteGroup}\n                  transferGroup={this.props.transferGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTransferDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  deleteGroup = () => {\n    this.props.deleteGroup(this.props.item.id);\n  }\n\n  transferGroup = (receiver) => {\n    this.props.transferGroup(this.props.item.id, receiver);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    let groupName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', groupName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={groupUrl}>{item.name}</Link></td>\n          <td>\n            {item.owner == 'system admin' ?\n              '--' :\n              <UserLink email={item.owner} name={item.owner_name} />\n            }\n          </td>\n          <td>\n            <span title={moment(item.created_at).format('llll')}>{moment(item.created_at).fromNow()}</span>\n          </td>\n          <td>\n            {(isOpIconShown && item.owner != 'system admin') &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n          <SysAdminTransferGroupDialog\n            groupName={item.name}\n            transferGroup={this.transferGroup}\n            toggleDialog={this.toggleTransferDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-group-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './groups-content';\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: {},\n      perPage: 25,\n      isCreateGroupDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getGroupListByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateGroupDialog = () => {\n    this.setState({isCreateGroupDialogOpen: !this.state.isCreateGroupDialogOpen});\n  }\n\n  getGroupListByPage = (page) => {\n    seafileAPI.sysAdminListAllGroups(page, this.state.perPage).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.groups,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getGroupListByPage(1);\n    });\n  }\n\n  createGroup = (groupName, OnwerEmail) => {\n    seafileAPI.sysAdminCreateNewGroup(groupName, OnwerEmail).then(res => {\n      let newGroupList = this.state.groupList;\n      newGroupList.unshift(res.data);\n      this.setState({\n        groupList: newGroupList\n      });\n      this.toggleCreateGroupDialog();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search groups by name')}\n      submit={this.searchGroups}\n    />;\n  }\n\n  searchGroups = (name) => {\n    navigate(`${siteRoot}sys/search-groups/?name=${encodeURIComponent(name)}`);\n  }\n\n  render() {\n    let { isCreateGroupDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Fragment>\n            <Button className=\"operation-item\" onClick={this.toggleCreateGroupDialog}>{gettext('New Group')}</Button>\n            <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/groupadmin/export-excel/`}>{gettext('Export Excel')}</a>\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                pageInfo={this.state.pageInfo}\n                deleteGroup={this.deleteGroup}\n                transferGroup={this.transferGroup}\n                getListByPage={this.getGroupListByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateGroupDialogOpen &&\n          <SysAdminCreateGroupDialog\n            createGroup={this.createGroup}\n            toggleDialog={this.toggleCreateGroupDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './groups-content';\n\nclass SearchGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: null\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name') || ''\n    }, this.getGroups);\n  }\n\n  getGroups = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchGroups(name).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getGroups();\n      }\n    }\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Groups')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getGroups}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.groupList}\n                  deleteGroup={this.deleteGroup}\n                  transferGroup={this.transferGroup}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchGroups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired,\n  groupID: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'repos', urlPart: 'groups/' + this.props.groupID + '/libraries', text: gettext('Libraries')},\n      {name: 'members', urlPart: 'groups/' + this.props.groupID + '/members', text: gettext('Members')}\n    ];\n  }\n\n  render() {\n    const { groupName, currentItem } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/groups/`}>{gettext('Groups')}</Link> / {groupName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Shared By')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  unshareRepo={this.props.unshareRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isUnshareRepoDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleUnshareRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isUnshareRepoDialogOpen: !this.state.isUnshareRepoDialogOpen});\n  }\n\n  unshareRepo = () => {\n    const { item } = this.props;\n    this.props.unshareRepo(item.repo_id, item.name);\n    this.toggleUnshareRepoDialog();\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    repo.id = item.repo_id;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <a href={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</a>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  }\n\n  render() {\n    let { isOpIconShown, isUnshareRepoDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n\n    let repoName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to unshare {placeholder} ?').replace('{placeholder}', repoName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>\n            <UserLink email={item.shared_by} name={item.shared_by_name} />\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unshare')} onClick={this.toggleUnshareRepoDialog}></a>\n          </td>\n        </tr>\n        {isUnshareRepoDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Unshare Library')}\n            message={dialogMsg}\n            executeOperation={this.unshareRepo}\n            confirmBtnText={gettext('Unshare')}\n            toggleDialog={this.toggleUnshareRepoDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass GroupRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListGroupRepos(this.props.groupID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.libraries,\n        groupName: res.data.group_name\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  unshareRepo = (repoID, repoName) => {\n    seafileAPI.sysAdminUnshareRepoFromGroup(this.props.groupID, repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({\n        repoList: newRepoList\n      });\n      const msg = gettext('Successfully unshared library {placeholder}')\n        .replace('{placeholder}', repoName);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n              currentItem=\"repos\"\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                unshareRepo={this.unshareRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default GroupRepos;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addMembers: PropTypes.func.isRequired\n};\n\nclass SysAdminGroupAddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOptions: null,\n      isSubmitBtnDisabled: true\n    };\n  }\n\n  handleSelectChange = (options) => {\n    this.setState({\n      selectedOptions: options,\n      isSubmitBtnDisabled: !options.length\n    });\n  }\n\n  addMembers = () => {\n    let emails = this.state.selectedOptions.map(item => item.email);\n    this.props.addMembers(emails);\n    this.props.toggle();\n  }\n\n  render() {\n    const { isSubmitBtnDisabled } = this.state;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"reviewer-select\"\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.addMembers} disabled={isSubmitBtnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminGroupAddMemberDialog.propTypes = propTypes;\n\nexport default SysAdminGroupAddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  roleOptions: PropTypes.array.isRequired,\n  currentRole: PropTypes.string.isRequired,\n  onRoleChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminGroupRoleEditor extends React.Component {\n\n  translateRoles = (role) => {\n    switch (role) {\n      case 'Member':\n        return gettext('Member');\n      case 'Admin':\n        return gettext('Admin');\n      default:\n        return role;\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.roleOptions}\n        currentOption={this.props.currentRole}\n        onOptionChanged={this.props.onRoleChanged}\n        translateOption={this.translateRoles}\n      />\n    );\n  }\n}\n\nSysAdminGroupRoleEditor.propTypes = propTypes;\n\nexport default SysAdminGroupRoleEditor;","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminGroupAddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog';\nimport SysAdminGroupRoleEditor from '../../../components/select-editor/sysadmin-group-role-editor';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"55%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  removeMember={this.props.removeMember}\n                  updateMemberRole={this.props.updateMemberRole}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  removeMember = () => {\n    const { item } = this.props;\n    this.props.removeMember(item.email, item.name);\n    this.toggleDeleteDialog();\n  }\n\n  updateMemberRole = (role) => {\n    this.props.updateMemberRole(this.props.item.email, role);\n  }\n\n  render() {\n    let { isOpIconShown, isDeleteDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to remove {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={item.avatar_url} alt=\"\" className=\"rounded-circle\" width=\"24\" /></td>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            {item.role == 'Owner' ?\n              gettext('Owner') :\n              <SysAdminGroupRoleEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                roleOptions={['Member', 'Admin']}\n                currentRole={item.role}\n                onRoleChanged={this.updateMemberRole}\n              />\n            }\n          </td>\n          <td>\n            {item.role != 'Owner' &&\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} onClick={this.toggleDeleteDialog}></a>\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Remove Member')}\n            message={dialogMsg}\n            executeOperation={this.removeMember}\n            confirmBtnText={gettext('Remove')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass GroupMembers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      memberList: [],\n      pageInfo: {},\n      currentPage: 1,\n      perPage: 25,\n      isAddMemberDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      perPage: parseInt(urlParams.get('per_page') || perPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListGroupMembers(this.props.groupID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        memberList: res.data.members,\n        groupName: res.data.group_name,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  toggleAddMemgerDialog = () => {\n    this.setState({isAddMemberDialogOpen: !this.state.isAddMemberDialogOpen});\n  }\n\n  addMembers = (emails) => {\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then(res => {\n      let newMemberList = res.data.success;\n      if (newMemberList.length) {\n        this.setState({\n          memberList: newMemberList.concat(this.state.memberList)\n        });\n        newMemberList.map(item => {\n          const msg = gettext('Successfully added {email_placeholder}')\n            .replace('{email_placeholder}', item.email);\n          toaster.success(msg);\n        });\n      }\n      res.data.failed.map(item => {\n        const msg = gettext('Failed to add {email_placeholder}: {error_msg_placeholder}')\n          .replace('{email_placeholder}', item.email)\n          .replace('{error_msg_placeholder}', item.error_msg);\n        toaster.danger(msg, {duration: 3});\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  removeMember = (email, name) => {\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, email).then(res => {\n      let newRepoList = this.state.memberList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n      toaster.success(gettext('Successfully removed {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMemberRole = (email, role) => {\n    let isAdmin = role == 'Admin';\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, email, isAdmin).then(res => {\n      let newRepoList = this.state.memberList.map(item => {\n        if (item.email == email) {\n          item.role = role;\n        }\n        return item;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { isAddMemberDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddMemgerDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              currentItem=\"members\"\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.memberList}\n                removeMember={this.removeMember}\n                updateMemberRole={this.updateMemberRole}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getListByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddMemberDialogOpen &&\n          <SysAdminGroupAddMemberDialog\n            addMembers={this.addMembers}\n            toggle={this.toggleAddMemgerDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default GroupMembers;\n","import React from 'react';\nimport '../../../css/org-department-item.css';\n\nclass Departments extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"h-100 org-departments\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Departments;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  parentGroupID: PropTypes.string,\n  toggle: PropTypes.func.isRequired,\n  onAddNewDepartment: PropTypes.func.isRequired\n};\n\nclass AddDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      let parentGroup = -1;\n      if (this.props.parentGroupID) {\n        parentGroup = this.props.parentGroupID;\n      }\n      seafileAPI.sysAdminAddNewDepartment(parentGroup, this.state.departName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onAddNewDepartment(res.data);\n      }).catch(error => {\n        let errorMsg = gettext(error.response.data.error_msg);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      departName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    let header = this.props.parentGroupID ? gettext('New Sub-department') : gettext('New Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.departName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddDepartDialog.propTypes = propTypes;\n\nexport default AddDepartDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  groupID: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n  name: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired\n};\n\nclass RenameDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departmentName: this.props.name,\n      errMessage: ''\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminRenameDepartment(this.props.groupID, this.state.departmentName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onDepartmentNameChanged(res.data);\n        toaster.success(gettext('Success'));\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departmentName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      departmentName: e.target.value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.select();\n  }\n\n  render() {\n    let header = gettext('Rename Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departmentName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departmentName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.departmentName}\n                onChange={this.handleChange}\n                innerRef={this.newInput}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRenameDepartmentDialog.propTypes = propTypes;\n\nexport default RenameDepartmentDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDeleteDepartment: PropTypes.func.isRequired\n};\n\nclass DeleteDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteDepart = () => {\n    this.props.toggle();\n    const { group } = this.props;\n    seafileAPI.sysAdminDeleteDepartment(group.id).then((res) => {\n      this.props.onDeleteDepartment(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { group } = this.props;\n\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(group.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Department')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: tipMessage}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteDepart}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteDepartmentDialog.propTypes = propTypes;\n\nexport default DeleteDepartmentDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.number.isRequired,\n  onSetQuota: PropTypes.func.isRequired,\n};\n\nclass SetGroupQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      errMessage: '',\n    };\n  }\n\n  setGroupQuota = () => {\n    const numberReg = /^[1-9]\\d*$/im;\n    let quota = this.state.quota;\n    if ((quota.length && numberReg.test(quota)) || quota == -2) {\n      this.setState({ errMessage: '' });\n      let newQuota = this.state.quota == -2 ? this.state.quota : this.state.quota * 1000000;\n      seafileAPI.sysAdminUpdateDepartmentQuota(this.props.groupID, newQuota).then((res) => {\n        this.props.toggle();\n        this.props.onSetQuota(res.data);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      const err = gettext('Quota is invalid.');\n      this.setState({ errMessage: err });\n    }\n  }\n\n  handleChange = (e) => {\n    const quota = e.target.value.trim();\n    this.setState({ quota: quota });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.setGroupQuota();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input\n              onKeyPress={this.handleKeyPress}\n              value={this.state.quota}\n              onChange={this.handleChange}\n              autoFocus={true}\n            />\n            <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n          </InputGroup>\n          <p className=\"tip\">\n            <br/><span>{gettext('An integer that is greater than 0 or equal to -2.')}</span><br/>\n            <span>{gettext('Tip: -2 means no limit.')}</span>\n          </p>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.setGroupQuota}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetGroupQuotaDialog.propTypes = propTypes;\n\nexport default SetGroupQuotaDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils.js';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport ModalPortal from '../../../components/modal-portal';\nimport RenameDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';\nimport DeleteDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog';\n\nconst GroupItemPropTypes = {\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  group: PropTypes.object.isRequired,\n  onDepartmentNameChanged: PropTypes.func.isRequired,\n  onDeleteDepartment: PropTypes.func.isRequired,\n  onSetDepartmentQuota: PropTypes.func.isRequired\n};\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isRenameDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Rename':\n        this.toggleRenameDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleRenameDialog = () => {\n    this.setState({\n      isRenameDialogOpen: !this.state.isRenameDialogOpen\n    });\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({\n      isDeleteDialogOpen: !this.state.isDeleteDialogOpen\n    });\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({\n      isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen\n    });\n  }\n\n  render() {\n    const { group } = this.props;\n    const { highlight, isOpIconShown, isRenameDialogOpen, isDeleteDialogOpen, isSetQuotaDialogOpen } = this.state;\n    const newHref = siteRoot+ 'sys/departments/' + group.id + '/';\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><Link to={newHref}>{group.name}</Link></td>\n          <td>{moment(group.created_at).fromNow()}</td>\n          <td>\n            {Utils.bytesToSize(group.quota)}{' '}\n            <span onClick={this.toggleSetQuotaDialog} title={gettext('Edit')} className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={['Rename', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen && (\n          <ModalPortal>\n            <DeleteDepartmentDialog\n              group={group}\n              onDeleteDepartment={this.props.onDeleteDepartment}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        )}\n        {isSetQuotaDialogOpen && (\n          <ModalPortal>\n            <SetGroupQuotaDialog\n              groupID={group.id}\n              onSetQuota={this.props.onSetDepartmentQuota}\n              toggle={this.toggleSetQuotaDialog}\n            />\n          </ModalPortal>\n        )}\n        {isRenameDialogOpen && (\n          <RenameDepartmentDialog\n            groupID={group.id}\n            name={group.name}\n            toggle={this.toggleRenameDialog}\n            onDepartmentNameChanged={this.props.onDepartmentNameChanged}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default GroupItem;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass DepartmentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: null,\n      groupID: '',\n      isShowAddDepartDialog: false,\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listDepartments();\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  listDepartments = () => {\n    seafileAPI.sysAdminListAllDepartments().then(res => {\n      this.setState({ groups: res.data.data });\n    });\n  }\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog });\n  }\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  }\n\n  onAddNewDepartment = (newDepartment) => {\n    const { groups } = this.state;\n    groups.unshift(newDepartment);\n    this.setState({\n      groups: groups\n    });\n  }\n\n  onDeleteDepartment = (id) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter((item) => item.id != id)\n    });\n  }\n\n  onSetDepartmentQuota = (target) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.map((item) => {\n        if (item.id == target.id) {\n          item.quota = target.quota;\n        }\n        return item;\n      })\n    });\n  }\n\n  render() {\n    const groups = this.state.groups;\n    const topbarChildren = (\n      <Fragment>\n        <button className='btn btn-secondary operation-item' title={gettext('New Department')} onClick={this.toggleAddDepartDialog}>{gettext('New Department')}\n        </button>\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onAddNewDepartment={this.onAddNewDepartment}\n              groupID={this.state.groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          {topbarChildren}\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">{gettext('Departments')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {groups && groups.length > 0 ?\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"40%\">{gettext('Name')}</th>\n                      <th width=\"25%\">{gettext('Created At')}</th>\n                      <th width=\"20%\">{gettext('Quota')}</th>\n                      <th width=\"15%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {groups.map((group, index) => {\n                      return(\n                        <Fragment key={group.id}>\n                          <GroupItem\n                            group={group}\n                            isItemFreezed={this.state.isItemFreezed}\n                            onFreezedItem={this.onFreezedItem}\n                            onUnfreezedItem={this.onUnfreezedItem}\n                            onDepartmentNameChanged={this.onDepartmentNameChanged}\n                            onDeleteDepartment={this.onDeleteDepartment}\n                            onSetDepartmentQuota={this.onSetDepartmentQuota}\n                          />\n                        </Fragment>\n                      );\n                    })}\n                  </tbody>\n                </table>\n                :\n                <p className=\"no-group\">{gettext('No departments')}</p>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DepartmentList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID:  PropTypes.string.isRequired,\n  onAddNewMembers: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const emails = this.state.selectedOption.map(item => item.email);\n    this.refs.orgSelect.clearSelect();\n    this.setState({ errMessage: [] });\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then((res) => {\n      this.setState({ selectedOption: null });\n      if (res.data.failed.length > 0) {\n        this.setState({ errMessage: res.data.failed[0].error_msg });\n      }\n      if (res.data.success.length > 0) {\n        this.props.onAddNewMembers(res.data.success);\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            ref=\"orgSelect\"\n            isMulti={true}\n            className='org-add-member-select'\n          />\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onAddNewRepo: PropTypes.func.isRequired\n};\n\nclass AddRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminAddRepoInDepartment(this.props.groupID, this.state.repoName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onAddNewRepo(res.data);\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.repoName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddRepoDialog.propTypes = propTypes;\n\nexport default AddRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport RenameDepartmentDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-rename-department-dialog';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-member-dialog';\nimport AddRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog';\nimport { siteRoot, gettext, lang } from '../../../utils/constants';\n\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentDetailPropTypes = {\n  groupID: PropTypes.string,\n  currentItem: PropTypes.string.isRequired,\n  onAddNewDepartment: PropTypes.func,\n  onAddNewMembers: PropTypes.func,\n  onAddNewRepo: PropTypes.func,\n  children: PropTypes.object\n};\n\nclass Department extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      ancestorGroups: [],\n      isShowAddDepartmentDialog: false,\n      isShowAddMemberDialog: false,\n      isShowRenameDepartmentDialog: false,\n      isShowAddRepoDialog: false\n    };\n\n    this.navItems = [\n      {name: 'subDepartments', urlPart: '/', text: gettext('Sub-departments')},\n      {name: 'members', urlPart: '/members/', text: gettext('Members')},\n      {name: 'repos', urlPart: '/libraries/', text: gettext('Libraries')}\n    ];\n  }\n\n  componentDidMount() {\n    const groupID = this.props.groupID;\n    this.getDepartmentInfo(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.getDepartmentInfo(nextProps.groupID);\n    }\n  }\n\n  getDepartmentInfo = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({\n        ancestorGroups: res.data.ancestor_groups,\n        groupName: res.data.name,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDepartmentNameChanged = (dept) => {\n    this.setState({\n      groupName: dept.name\n    });\n  }\n\n  toggleRenameDepartmentDialog = () => {\n    this.setState({ isShowRenameDepartmentDialog: !this.state.isShowRenameDepartmentDialog });\n  }\n\n  toggleAddRepoDialog = () => {\n    this.setState({ isShowAddRepoDialog: !this.state.isShowAddRepoDialog });\n  }\n\n  toggleAddMemberDialog = () => {\n    this.setState({ isShowAddMemberDialog: !this.state.isShowAddMemberDialog });\n  }\n\n  toggleAddDepartmentDialog = () => {\n    this.setState({ isShowAddDepartmentDialog: !this.state.isShowAddDepartmentDialog});\n  }\n\n  render() {\n    const { groupID, currentItem } = this.props;\n    const { groupName } = this.state;\n\n    const topBtn = 'btn btn-secondary operation-item';\n    const topbarChildren = (\n      <Fragment>\n        {groupID &&\n          <Fragment>\n            <button className={topBtn} title={gettext('Rename Department')} onClick={this.toggleRenameDepartmentDialog}>{gettext('Rename Department')}</button>\n            {currentItem == 'subDepartments' && <button className={topBtn} title={gettext('New Sub-department')} onClick={this.toggleAddDepartmentDialog}>{gettext('New Sub-department')}</button>}\n            {currentItem == 'members' && <button className={topBtn} title={gettext('Add Member')} onClick={this.toggleAddMemberDialog}>{gettext('Add Member')}</button>}\n            {currentItem == 'repos' && <button className={topBtn} onClick={this.toggleAddRepoDialog} title={gettext('New Library')}>{gettext('New Library')}</button>}\n          </Fragment>\n        }\n        {this.state.isShowRenameDepartmentDialog && (\n          <ModalPortal>\n            <RenameDepartmentDialog\n              groupID={groupID}\n              name={groupName}\n              toggle={this.toggleRenameDepartmentDialog}\n              onDepartmentNameChanged={this.onDepartmentNameChanged}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddMemberDialog && (\n          <ModalPortal>\n            <AddMemberDialog\n              toggle={this.toggleAddMemberDialog}\n              onAddNewMembers={this.props.onAddNewMembers}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddRepoDialog && (\n          <ModalPortal>\n            <AddRepoDialog\n              toggle={this.toggleAddRepoDialog}\n              onAddNewRepo={this.props.onAddNewRepo}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddDepartmentDialog && (\n          <ModalPortal>\n            <AddDepartmentDialog\n              onAddNewDepartment={this.props.onAddNewDepartment}\n              parentGroupID={groupID}\n              toggle={this.toggleAddDepartmentDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          {topbarChildren}\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">\n                  {groupID ?\n                    <Link to={siteRoot + 'sys/departments/'}>{gettext('Departments')}</Link>\n                    : <span>{gettext('Departments')}</span>\n                  }\n                  {this.state.ancestorGroups.map(ancestor => {\n                    let newHref = siteRoot + 'sys/departments/' + ancestor.id + '/';\n                    return <span key={ancestor.id}>{' / '}<Link to={newHref}>{ancestor.name}</Link></span>;\n                  })}\n                  {groupID && <span>{' / '}{groupName}</span>}\n                </h3>\n              </div>\n            </div>\n\n            <ul className=\"nav border-bottom mx-4\">\n              {this.navItems.map((item, index) => {\n                return (\n                  <li className=\"nav-item mr-2\" key={index}>\n                    <Link to={`${siteRoot}sys/departments/${groupID}${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n                  </li>\n                );\n              })}\n            </ul>\n            {this.props.children}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nDepartment.propTypes = DepartmentDetailPropTypes;\n\nexport default Department;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport Department from './department';\n\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst SubDepartmentsPropTypes = {\n  groupID: PropTypes.string\n};\n\nclass SubDepartments extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      groups: []\n    };\n  }\n\n  componentDidMount() {\n    this.listSubDepartments(this.props.groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listSubDepartments(nextProps.groupID);\n    }\n  }\n\n  listSubDepartments = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({groups: res.data.groups});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onSubDepartmentNameChanged = (dept) => {\n    this.setState({\n      groups: this.state.groups.map(item => {\n        if (item.id == dept.id) {\n          item.name = dept.name;\n        }\n        return item;\n      })\n    });\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onAddNewDepartment = (newDepartment) => {\n    const { groups } = this.state;\n    groups.unshift(newDepartment);\n    this.setState({\n      groups: groups\n    });\n  }\n\n  onDeleteDepartment = (id) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter(item => item.id != id)\n    });\n  }\n\n  onSetDepartmentQuota = (target) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.map((item) => {\n        if (item.id == target.id) {\n          item.quota = target.quota;\n        }\n        return item;\n      })\n    });\n  }\n\n  render() {\n    const { groups } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Department\n        groupID={groupID}\n        currentItem=\"subDepartments\"\n        onAddNewDepartment={this.onAddNewDepartment}\n      >\n        <div className=\"cur-view-content\">\n          {groups && groups.length > 0 ?\n            <table>\n              <thead>\n                <tr>\n                  <th width=\"40%\">{gettext('Name')}</th>\n                  <th width=\"25%\">{gettext('Created At')}</th>\n                  <th width=\"20%\">{gettext('Quota')}</th>\n                  <th width=\"15%\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {groups.map((group, index) => {\n                  return(\n                    <GroupItem\n                      key={group.id}\n                      isItemFreezed={this.state.isItemFreezed}\n                      onFreezedItem={this.onFreezedItem}\n                      onUnfreezedItem={this.onUnfreezedItem}\n                      onDepartmentNameChanged={this.onSubDepartmentNameChanged}\n                      group={group}\n                      onDeleteDepartment={this.onDeleteDepartment}\n                      onSetDepartmentQuota={this.onSetDepartmentQuota}\n                    />\n                  );\n                })}\n              </tbody>\n            </table>\n            : <p className=\"no-group\">{gettext('No sub-departments')}</p>\n          }\n        </div>\n      </Department>\n    );\n  }\n}\n\nSubDepartments.propTypes = SubDepartmentsPropTypes;\n\nexport default SubDepartments;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  member: PropTypes.object.isRequired,\n  groupID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass DeleteMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteMember = () => {\n    const userEmail = this.props.member.email;\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, userEmail).then((res) => {\n      if (res.data.success) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.member.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Member')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteMember}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteMemberDialog.propTypes = propTypes;\n\nexport default DeleteMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport RoleEditor from '../../../components/select-editor/role-editor';\nimport UserLink from '../user-link';\n\nconst MemberItemPropTypes = {\n  groupID: PropTypes.string.isRequired,\n  member: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onMemberChanged: PropTypes.func.isRequired,\n  showDeleteMemberDialog: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n};\n\nclass MemberItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showRoleMenu: false,\n    };\n    this.roles = ['Admin', 'Member'];\n  }\n\n  onMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: false });\n  }\n\n  toggleMemberRoleMenu = () => {\n    this.setState({ showRoleMenu: !this.state.showRoleMenu });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? true : false;\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, this.props.member.email, isAdmin).then((res) => {\n      this.props.onMemberChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.setState({\n      highlight: false\n    });\n  }\n\n  render() {\n    const member = this.props.member;\n    const highlight = this.state.highlight;\n    if (member.role === 'Owner') return null;\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={member.avatar_url} alt=\"member-header\" width=\"24\" className=\"avatar\"/></td>\n        <td><UserLink email={member.email} name={member.name} /></td>\n        <td>\n          <RoleEditor\n            isTextMode={true}\n            isEditIconShow={highlight}\n            currentRole={member.role}\n            roles={this.roles}\n            onRoleChanged={this.onChangeUserRole}\n            toggleItemFreezed={this.props.toggleItemFreezed}\n          />\n        </td>\n        {!this.props.isItemFreezed ?\n          <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteMemberDialog.bind(this, member)}>\n            <span className={`sf2-icon-x3 action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n          </td> : <td></td>\n        }\n      </tr>\n    );\n  }\n}\n\nMemberItem.propTypes = MemberItemPropTypes;\n\nexport default MemberItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport ModalPortal from '../../../components/modal-portal';\nimport DeleteMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport MemberItem from './member-item';\nimport Department from './department';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentMembersPropTypes = {\n  groupID: PropTypes.string,\n};\n\nclass DepartmentMembers extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      members: [],\n      membersErrorMsg: '',\n      currentPageInfo: {\n      },\n      currentPage: 1,\n      perPage: 25,\n      deletedMember: {},\n      showDeleteMemberDialog: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      const { groupID } = this.props;\n      this.listMembers(groupID, this.state.currentPage, this.state.perPage);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listMembers(nextProps.groupID, this.state.currentPage, this.state.perPage);\n    }\n  }\n\n  listMembers = (groupID, page, perPage) => {\n    seafileAPI.sysAdminListGroupMembers(groupID, page, perPage).then((res) => {\n      this.setState({\n        members: res.data.members,\n        currentPageInfo: res.data.page_info\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({membersErrorMsg: errMessage});\n    });\n  }\n\n  getPreviousPageList = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page - 1, this.state.perPage);\n  }\n\n  getNextPageList = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page + 1, this.state.perPage);\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.listMembers(this.props.groupID, 1, perPage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteMemberDialog: false,\n    });\n  }\n\n  onMemberChanged = () => {\n    this.listMembers(this.props.groupID, this.state.currentPageInfo.current_page, this.state.perPage);\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  }\n\n  showDeleteMemberDialog = (member) => {\n    this.setState({ showDeleteMemberDialog: true, deletedMember: member });\n  }\n\n  onAddNewMembers = (newMembers) => {\n    const { members } = this.state;\n    members.unshift(...newMembers);\n    this.setState({ members });\n  }\n\n  render() {\n    const { members, membersErrorMsg } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Fragment>\n        <Department\n          groupID={groupID}\n          currentItem=\"members\"\n          onAddNewMembers={this.onAddNewMembers}\n        >\n          <div className=\"cur-view-content\">\n            {membersErrorMsg ? <p className=\"error text-center\">{membersErrorMsg}</p> :\n              members.length == 0 ?\n                <p className=\"no-member\">{gettext('No members')}</p> :\n                <Fragment>\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"15%\">{gettext('Role')}</th>\n                        <th width=\"30%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {members.map((member, index) => {\n                        return (\n                          <Fragment key={index}>\n                            <MemberItem\n                              member={member}\n                              showDeleteMemberDialog={this.showDeleteMemberDialog}\n                              isItemFreezed={this.state.isItemFreezed}\n                              onMemberChanged={this.onMemberChanged}\n                              toggleItemFreezed={this.toggleItemFreezed}\n                              groupID={groupID}\n                            />\n                          </Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  {this.state.currentPageInfo &&\n                  <Paginator\n                    gotoPreviousPage={this.getPreviousPageList}\n                    gotoNextPage={this.getNextPageList}\n                    currentPage={this.state.currentPageInfo.current_page}\n                    hasNextPage={this.state.currentPageInfo.has_next_page}\n                    curPerPage={this.state.perPage}\n                    resetPerPage={this.resetPerPage}\n                  />\n                  }\n                </Fragment>\n            }\n          </div>\n        </Department>\n        {this.state.showDeleteMemberDialog && (\n          <ModalPortal>\n            <DeleteMemberDialog\n              toggle={this.toggleCancel}\n              onMemberChanged={this.onMemberChanged}\n              member={this.state.deletedMember}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDepartmentMembers.propTypes = DepartmentMembersPropTypes;\n\nexport default DepartmentMembers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nclass DeleteRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteRepo = () => {\n    seafileAPI.sysAdminDeleteRepoInDepartment(this.props.groupID, this.props.repo.repo_id).then((res) => {\n      if (res.data.success) {\n        this.props.onRepoChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { repo } = this.props;\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(repo.name || repo.repo_name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Library')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteRepo}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onRepoChanged: PropTypes.func.isRequired\n};\n\nDeleteRepoDialog.propTypes = propTypes;\n\nexport default DeleteRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils.js';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nconst RepoItemPropTypes = {\n  repo: PropTypes.object.isRequired,\n  showDeleteRepoDialog: PropTypes.func.isRequired\n};\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  }\n\n  render() {\n    const { repo } = this.props;\n    const repoName = repo.name || repo.repo_name;\n    const highlight = this.state.highlight;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} width=\"24\" alt={gettext('icon')}/></td>\n        { enableSysAdminViewRepo ?\n          <td><a href={`${siteRoot}sys/libraries/${repo.repo_id}/${encodeURIComponent(repoName)}/`}>{repoName}</a></td>\n          :\n          <td>{repoName}</td>\n        }\n        <td>{Utils.bytesToSize(repo.size)}</td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteRepoDialog.bind(this, repo)}>\n          <span className={`sf2-icon-delete action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoItem.propTypes = RepoItemPropTypes;\n\nexport default RepoItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport ModalPortal from '../../../components/modal-portal';\nimport DeleteRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport RepoItem from './repo-item';\nimport Department from './department';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentDetailPropTypes = {\n  groupID: PropTypes.string,\n};\n\nclass DepartmentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      deletedRepo: {},\n      showDeleteRepoDialog: false\n    };\n  }\n\n  componentDidMount() {\n    const { groupID } = this.props;\n    this.listGroupRepo(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listGroupRepo(nextProps.groupID);\n    }\n  }\n\n  listGroupRepo = (groupID) => {\n    seafileAPI.sysAdminListGroupRepos(groupID).then(res => {\n      this.setState({ repos: res.data.libraries });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteRepoDialog: false\n    });\n  }\n\n  onRepoChanged = () => {\n    this.listGroupRepo(this.props.groupID);\n  }\n\n  showDeleteRepoDialog = (repo) => {\n    this.setState({ showDeleteRepoDialog: true, deletedRepo: repo });\n  }\n\n  onAddNewRepo = (newRepo) => {\n    const { repos } = this.state;\n    repos.unshift(newRepo);\n    this.setState({ repos });\n  }\n\n  render() {\n    const { repos } = this.state;\n    const { groupID } = this.props;\n\n    return (\n      <Fragment>\n        <Department groupID={groupID} currentItem=\"repos\" onAddNewRepo={this.onAddNewRepo}>\n          {repos.length > 0 ?\n            <div className=\"cur-view-content\">\n              <table>\n                <thead>\n                  <tr>\n                    <th width=\"5%\"></th>\n                    <th width=\"50%\">{gettext('Name')}</th>\n                    <th width=\"30%\">{gettext('Size')}</th>\n                    <th width=\"15%\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {repos.map((repo, index) => {\n                    return (\n                      <RepoItem key={index} repo={repo} showDeleteRepoDialog={this.showDeleteRepoDialog} />\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n            : <p className=\"no-libraty\">{gettext('No libraries')}</p>\n          }\n        </Department>\n        {this.state.showDeleteRepoDialog && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              toggle={this.toggleCancel}\n              onRepoChanged={this.onRepoChanged}\n              repo={this.state.deletedRepo}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDepartmentDetail.propTypes = DepartmentDetailPropTypes;\n\nexport default DepartmentDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'shareLinks', urlPart:'share-links', text: gettext('Share Links')},\n      {name: 'uploadLinks', urlPart:'upload-links', text: gettext('Upload Links')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage + 1);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    this.props.sortItems('ctime');\n  }\n\n  sortByCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('view_cnt');\n  }\n\n  render() {\n    const {\n      loading, errorMsg, items,\n      perPage, currentPage, hasNextPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n        </EmptyTip>\n      );\n\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Created At')} {sortBy == 'ctime' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"10%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByCount}>{gettext('Count')} {sortBy == 'view_cnt' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteShareLink={this.props.deleteShareLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteShareLink = () => {\n    this.props.deleteShareLink(this.props.item.token);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td>{item.obj_name}</td>\n        <td>{item.token}</td>\n        <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n        <td>{moment(item.ctime).fromNow()}</td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteShareLink}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass ShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      shareLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      sortBy: '',\n      sortOrder: 'asc'\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage, sortBy, sortOrder } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      sortBy: urlParams.get('order_by') || sortBy,\n      sortOrder: urlParams.get('direction') || sortOrder\n    }, () => {\n      this.getShareLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getShareLinksByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    seafileAPI.sysAdminListShareLinks(page, perPage, sortBy, sortOrder).then((res) => {\n      this.setState({\n        shareLinkList: res.data.share_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getShareLinksByPage(currentPage);\n    });\n  }\n\n  deleteShareLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteShareLink(linkToken).then(res => {\n      let newShareLinkList = this.state.shareLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({shareLinkList: newShareLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getShareLinksByPage(this.initPage));\n  }\n\n  render() {\n    let { shareLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />  \n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"shareLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={shareLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getShareLinksByPage={this.getShareLinksByPage}\n                resetPerPage={this.resetPerPage}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                deleteShareLink={this.deleteShareLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default ShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No upload links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{gettext('Count')}</th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteUploadLink={this.props.deleteUploadLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteUploadLink = () => {\n    this.props.deleteUploadLink(this.props.item.token);\n  }\n\n  renderExpiration = () => {\n    let item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>{item.path}</td>\n          <td>{item.token}</td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.view_cnt}</td>\n          <td>{this.renderExpiration()}</td>\n          <td>\n            <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteUploadLink}></a>\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass UploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      uploadLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUploadLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getUploadLinksByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAllUploadLinks(page, perPage).then((res) => {\n      this.setState({\n        uploadLinkList: res.data.upload_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteUploadLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteUploadLink(linkToken).then(res => {\n      let newUploadLinkList = this.state.uploadLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({uploadLinkList: newUploadLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getUploadLinksByPage(this.initPage));\n  }\n\n  render() {\n    let { uploadLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"uploadLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={uploadLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getUploadLinksByPage={this.getUploadLinksByPage}\n                resetPerPage={this.resetPerPage}\n                deleteUploadLink={this.deleteUploadLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UploadLinks;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addOrg: PropTypes.func.isRequired\n};\n\nclass SysAdminAddOrgDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      passwordAgain: '',\n      errorMsg: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name, email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (name.trim() !='' &&\n      email.trim() != '' &&\n      password.trim() != '' &&\n      passwordAgain.trim() != '') {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    }, this.checkSubmitBtnActive);\n  }\n\n  handleSubmit = () => {\n    let { name, email, password, passwordAgain } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    const data = {\n      orgName: name.trim(),\n      ownerEmail: email.trim(),\n      password: password.trim()\n    };\n    this.props.addOrg(data);\n    this.toggle();\n  }\n\n  render() {\n    const { errorMsg, password, passwordAgain, email, name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Organization')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Name')}</Label>\n              <Input value={name} onChange={this.inputName} />\n            </FormGroup>\n            <FormGroup>\n              <Label>\n                {gettext('Owner')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('Owner can use admin panel in an organization, must be a new account.')}></span>\n              </Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <Input type=\"password\" value={password} onChange={this.inputPassword} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type=\"password\" value={passwordAgain} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddOrgDialog.propTypes = propTypes;\n\nexport default SysAdminAddOrgDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport toaster from '../../../components/toast';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No organizations')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Creator')}</th>\n                <th width=\"20%\">{gettext('Role')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  updateRole={this.props.updateRole}\n                  deleteOrg={this.props.deleteOrg}\n                />);\n              })}\n            </tbody>\n          </table>\n          {this.props.currentPage &&\n          <Paginator\n            currentPage={this.props.currentPage}\n            hasNextPage={this.props.hasNextPage}\n            curPerPage={this.props.curPerPage}\n            resetPerPage={this.props.resetPerPage}\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false,\n      deleteDialogMsg: '',\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen}, () => {\n      if (this.state.isDeleteDialogOpen) {\n        seafileAPI.sysAdminGetOrg(this.props.item.org_id).then((res) => {\n          let orgName = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.org_name) + '</span>';\n          let userCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.users_count) + '</span>';\n          let repoCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.repos_count) + '</span>';\n          let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?')\n            .replace('{placeholder}', orgName) + '<br/>' +\n            gettext('{userCount} user(s) and {repoCount} libraries of this organization will also be deleted.')\n              .replace('{userCount}', userCount)\n              .replace('{repoCount}', repoCount);\n          this.setState({deleteDialogMsg: deleteDialogMsg});\n        }).catch(error => {\n          let errorMsg = Utils.getErrorMsg(error);\n          toaster.danger(errorMsg);\n        });\n      }\n    });\n  }\n\n  updateRole = (role) => {\n    this.props.updateRole(this.props.item.org_id, role);\n  }\n\n  deleteOrg = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteOrg(this.props.item.org_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, deleteDialogMsg } = this.state;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>{item.org_name}</Link></td>\n          <td>\n            <UserLink email={item.creator_email} name={item.creator_name} />\n          </td>\n          <td>\n            <SysAdminUserRoleEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentRole={item.role}\n              roleOptions={availableRoles}\n              onRoleChanged={this.updateRole}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota > 0 ? Utils.bytesToSize(item.quota) : '--'}`}</td>\n          <td>{moment(item.ctime).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Organization')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteOrg}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminAddOrgDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-org-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './orgs-content';\n\n\nclass Orgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgList: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false,\n      isAddOrgDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListOrgs(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organizations,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  }\n\n  toggleAddOrgDialog = () => {\n    this.setState({isAddOrgDialogOpen: !this.state.isAddOrgDialogOpen});\n  }\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addOrg = (data) => {\n    const { orgName, ownerEmail, password } = data;\n    seafileAPI.sysAdminAddOrg(orgName, ownerEmail, password).then(res => {\n      let orgList = this.state.orgList;\n      orgList.unshift(res.data);\n      this.setState({orgList: orgList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search organizations')}\n      submit={this.searchItems}\n    />;\n  }\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-organizations/?query=${encodeURIComponent(keyword)}`);\n  }\n\n  render() {\n    const { isAddOrgDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()} {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddOrgDialog}>{gettext('Add Organization')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.orgList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getItemsByPage}\n                updateRole={this.updateRole}\n                deleteOrg={this.deleteOrg}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddOrgDialogOpen &&\n          <SysAdminAddOrgDialog\n            addOrg={this.addOrg}\n            toggleDialog={this.toggleAddOrgDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Orgs;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './orgs-content';\n\n\nclass SearchOrgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      orgList: []\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      query: params.get('query') || ''\n    }, this.getItems);\n  }\n\n  getItems = () => {\n    seafileAPI.sysAdminSearchOrgs(this.state.query.trim()).then(res => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organization_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      const { isSubmitBtnActive } = this.state;\n      if (isSubmitBtnActive) {\n        this.getItems();\n      }\n    }\n  }\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Organizations')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form tag={'div'}>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" id=\"name\" value={query} onChange={this.handleInputChange} onKeyDown={this.handleKeyDown} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.orgList}\n                  updateRole={this.updateRole}\n                  deleteOrg={this.deleteOrg}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchOrgs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateName: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgNameDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: this.props.name,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      name: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateName(this.state.name.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Name')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={name}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgNameDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgNameDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateValue: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgMaxUserNumberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { value, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set max number of members')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                className=\"form-control\"\n                value={value}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgMaxUserNumberDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgMaxUserNumberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'users', urlPart: 'users', text: gettext('Members')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')},\n      {name: 'repos', urlPart: 'libraries', text: gettext('Libraries')},\n      //{name: 'traffic', urlPart: 'traffic', text: gettext('traffic')},\n      //{name: 'settings', urlPart: 'settings', text: gettext('Settings')}\n    ];\n  }\n\n  render() {\n    const { currentItem, orgID, orgName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/organizations/`}>{gettext('Organizations')}</Link> / {orgName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/organizations/${orgID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetOrgQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminSetOrgNameDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog';\nimport SysAdminSetOrgMaxUserNumberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetQuotaDialogOpen: false,\n      isSetNameDialogOpen: false,\n      isSetMaxUserNumberDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleSetNameDialog = () => {\n    this.setState({isSetNameDialogOpen: !this.state.isSetNameDialogOpen});\n  }\n\n  toggleSetMaxUserNumberDialog = () => {\n    this.setState({isSetMaxUserNumberDialogOpen: !this.state.isSetMaxUserNumberDialogOpen});\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, orgInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const { org_name, users_count, max_user_number, groups_count, quota, quota_usage } = this.props.orgInfo;\n      const { isSetQuotaDialogOpen, isSetNameDialogOpen, isSetMaxUserNumberDialogOpen } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {org_name}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Number of members')}</dt>\n            <dd className=\"info-item-content\">{users_count}</dd>\n\n            {max_user_number &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Max number of members')}</dt>\n                <dd className=\"info-item-content\">\n                  {max_user_number}\n                  {this.showEditIcon(this.toggleSetMaxUserNumberDialog)}\n                </dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Number of groups')}</dt>\n            <dd className=\"info-item-content\">{groups_count}</dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(quota_usage)} / ${quota > 0 ? Utils.bytesToSize(quota) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetOrgQuotaDialog\n            updateQuota={this.props.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {isSetNameDialogOpen &&\n          <SysAdminSetOrgNameDialog\n            name={org_name}\n            updateName={this.props.updateName}\n            toggle={this.toggleSetNameDialog}\n          />\n          }\n          {isSetMaxUserNumberDialogOpen &&\n          <SysAdminSetOrgMaxUserNumberDialog\n            value={max_user_number}\n            updateValue={this.props.updateMaxUserNumber}\n            toggle={this.toggleSetMaxUserNumberDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass OrgInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        orgInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateQuota = (quota) => {\n    const data = {quota: quota};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        quota: res.data.quota\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set quota.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateName = (orgName) => {\n    const data = {orgName: orgName};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        org_name: res.data.org_name\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set name.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMaxUserNumber = (newValue) => {\n    const data = {maxUserNumber: newValue};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        max_user_number: res.data.max_user_number\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set max number of members.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { orgInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav currentItem=\"info\" orgID={this.props.orgID} orgName={orgInfo.org_name} />\n            <div className=\"cur-view-content\">\n              <Content\n                orgID={this.props.orgID}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                orgInfo={this.state.orgInfo}\n                updateQuota={this.updateQuota}\n                updateName={this.updateName}\n                updateMaxUserNumber={this.updateMaxUserNumber}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  statusOptions: PropTypes.array.isRequired,\n  currentStatus: PropTypes.string.isRequired,\n  onStatusChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserMembershipEditor extends React.Component {\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'is_org_staff':\n        return gettext('Admin');\n      case 'not_is_org_staff':\n        return gettext('Member');\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.statusOptions}\n        currentOption={this.props.currentStatus}\n        onOptionChanged={this.props.onStatusChanged}\n        translateOption={this.translateStatus}\n      />\n    );\n  }\n}\n\nSysAdminUserMembershipEditor.propTypes = propTypes;\n\nexport default SysAdminUserMembershipEditor;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, username } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport SysAdminUserStatusEditor from '../../../components/select-editor/sysadmin-user-status-editor';\nimport SysAdminUserMembershipEditor from '../../../components/select-editor/sysadmin-user-membership-editor';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"15%\">{gettext('Membership')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"25%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  updateStatus={this.props.updateStatus}\n                  updateMembership={this.props.updateMembership}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isResetPasswordDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetPasswordDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleResetPasswordDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen});\n  }\n\n  updateStatus= (statusValue) => {\n    this.props.updateStatus(this.props.item.email, statusValue);\n  }\n\n  updateMembership= (membershipValue) => {\n    this.props.updateMembership(this.props.item.email, membershipValue);\n  }\n\n  deleteUser = () => {\n    const { item } = this.props;\n    this.props.deleteUser(item.org_id, item.email);\n  }\n\n  resetPassword = () => {\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isResetPasswordDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    let resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            <SysAdminUserStatusEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.active ? 'active' : 'inactive'}\n              statusOptions={['active', 'inactive']}\n              onStatusChanged={this.updateStatus}\n            />\n          </td>\n          <td>\n            <SysAdminUserMembershipEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.is_org_staff ? 'is_org_staff' : 'not_is_org_staff'}\n              statusOptions={['is_org_staff', 'not_is_org_staff']}\n              onStatusChanged={this.updateMembership}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {(isOpIconShown && item.email != username) &&\n            <OpMenu\n              operations={['Delete', 'Reset Password']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Member')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isResetPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetPasswordDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgUsers(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.users\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  addUser = (newUserInfo) => {\n    const { email, name, password } = newUserInfo;\n    seafileAPI.sysAdminAddOrgUser(this.props.orgID, email, name, password).then(res => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (orgID, email) => {\n    seafileAPI.sysAdminDeleteOrgUser(orgID, email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateStatus = (email, statusValue) => {\n    const isActive = statusValue == 'active';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'active', isActive).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.active = res.data.active;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMembership = (email, membershipValue) => {\n    const isOrgStaff = membershipValue == 'is_org_staff';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'is_org_staff', isOrgStaff).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.is_org_staff = res.data.is_org_staff;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddUserDialogOpen, orgName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}> \n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"users\"\n              orgID={this.props.orgID}\n              orgName={orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                updateStatus={this.updateStatus}\n                updateMembership={this.updateMembership}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Creator')}</th>\n                <th width=\"30%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteGroup={this.props.deleteGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteGroup = () => {\n    this.toggleDeleteDialog();\n    this.props.deleteGroup(this.props.item.group_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.group_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.group_id}/libraries/` :\n      `${siteRoot}sys/departments/${item.group_id}/`;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><a href={groupUrl}>{item.group_name}</a></td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      groupList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgGroups(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.group_id != groupID;\n      });\n      this.setState({groupList: newGroupList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"groups\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                deleteGroup={this.deleteGroup}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgGroups;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"35%\">{gettext('ID')}</th>\n                <th width=\"20%\">{gettext('Owner')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteRepo={this.props.deleteRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.repo_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.repo_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{item.repo_name}</td>\n          <td>{item.repo_id}</td>\n          <td>\n            {!item.owner_email ?\n              '--' :\n              item.owner_email.indexOf('@seafile_group') == -1 ?\n              <UserLink email={item.owner_email} name={item.owner_name} /> :\n              item.owner_name\n            }\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgRepos(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"repos\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgRepos;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addInstitution: PropTypes.func.isRequired\n};\n\nclass SysAdminAddInstitutionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addInstitution(this.state.value.trim());\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add institution')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <p>{gettext('Name')}</p>\n            <FormGroup>\n              <Input\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddInstitutionDialog.propTypes = propTypes;\n\nexport default SysAdminAddInstitutionDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport SysAdminAddInstitutionDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No institutions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"75%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteInstitution={this.props.deleteInstitution}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteInstitution = () => {\n    this.props.deleteInstitution(this.props.item.id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const institutionName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', institutionName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/institutions/${item.id}/info/`}>{item.name}</Link></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Institution')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteInstitution}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Institutions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddInstitutionDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionsByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutions(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        institutionList: res.data.institution_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionsByPage(this.initPage));\n  }\n\n  toggleAddInstitutionDialog = () => {\n    this.setState({isAddInstitutionDialogOpen: !this.state.isAddInstitutionDialogOpen});\n  }\n\n  addInstitution = (name) => {\n    seafileAPI.sysAdminAddInstitution(name).then(res => {\n      let institutionList = this.state.institutionList;\n      institutionList.push(res.data);\n      this.setState({institutionList: institutionList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteInstitution = (institutionID) => {\n    seafileAPI.sysAdminDeleteInstitution(institutionID).then(res => {\n      let institutionList = this.state.institutionList.filter(inst => {\n        return inst.id != institutionID;\n      });\n      this.setState({institutionList: institutionList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddInstitutionDialogOpen, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddInstitutionDialog}>{gettext('Add Institution')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Institutions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.institutionList}\n                deleteInstitution={this.deleteInstitution}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionsByPage={this.getInstitutionsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddInstitutionDialogOpen &&\n          <SysAdminAddInstitutionDialog\n            addInstitution={this.addInstitution}\n            toggle={this.toggleAddInstitutionDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Institutions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'members', urlPart: 'members', text: gettext('Members')},\n      {name: 'admins', urlPart: 'admins', text: gettext('Admins')},\n    ];\n  }\n\n  render() {\n    const { currentItem, institutionID, institutionName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/institutions/`}>{gettext('Institutions')}</Link> / {institutionName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/institutions/${institutionID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetInstitutionQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetQuotaDialogOpen: false,\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, institutionInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const { name, user_count, quota_total, quota_used } = institutionInfo;\n      const { isSetQuotaDialogOpen } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {name}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Number of members')}</dt>\n            <dd className=\"info-item-content\">{user_count}</dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(quota_used)} / ${quota_total > 0 ? Utils.bytesToSize(quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetInstitutionQuotaDialog\n            updateQuota={this.props.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass InstitutionInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        institutionInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateQuota = (quota) => {\n    seafileAPI.sysAdminUpdateInstitution(this.props.institutionID, quota).then(res => {\n      const newInstitutionInfo = Object.assign(this.state.institutionInfo, {\n        quota_total: res.data.quota_total,\n      });\n      this.setState({institutionInfo: newInstitutionInfo});\n      toaster.success(gettext('Successfully set quota.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n\n  render() {\n    const { institutionInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav currentItem=\"info\" institutionID={this.props.institutionID} institutionName={institutionInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                institutionInfo={this.state.institutionInfo}\n                updateQuota={this.updateQuota}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: [],\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const emails = this.state.selectedOption.map(item => item.email);\n    this.props.addUser(emails);\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            isMulti={true}\n            className='org-add-member-select'\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  setAdmin={this.props.setAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleSetAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isSetAdminDialogOpen: !this.state.isSetAdminDialogOpen});\n  }\n\n  setAdmin = () => {\n    this.props.setAdmin(this.props.item.email);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Delete':\n        this.props.deleteUser(this.props.item.email);\n        break;\n      case 'Set Admin':\n        this.toggleSetAdminDialog();\n        break;\n    }\n  }\n\n  getOperations = () => {\n    let operations = [];\n    if (!this.props.item.is_institution_admin) {\n      operations.push('Set Admin');\n    }\n    operations.push('Delete');\n    return operations;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Set Admin':\n        translateResult = gettext('Set Admin');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isSetAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const dialogMsg = gettext('Are you sure you want to set {placeholder} as Admin?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={this.getOperations()}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isSetAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Set Admin')}\n            message={dialogMsg}\n            executeOperation={this.setAdmin}\n            toggleDialog={this.toggleSetAdminDialog}\n            confirmBtnText={gettext('Set Admin')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass InstitutionUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddUserDialogOpen: false\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionUsersByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionUsersByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutionUsers(this.props.institutionID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  setAdmin = (email) => {\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, true).then(res => {\n      let userList = this.state.userList.map(user => {\n        if (user.email == email) {\n          user.is_institution_admin = true;\n        }\n        return user;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionUsersByPage(this.initPage));\n  }\n\n  addUser = (emails) => {\n    seafileAPI.sysAdminAddInstitutionUserBatch(this.props.institutionID, emails).then(res => {\n      this.toggleAddUserDialog();\n      let successArray = res.data.success;\n      let failedArray = res.data.failed;\n      if (successArray.length) {\n        let newUserList = this.state.userList.concat(successArray);\n        this.setState({userList: newUserList});\n      }\n      failedArray.map((item) => {\n        toaster.danger(item.error_msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddUserDialogOpen, institutionName, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"members\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                setAdmin={this.setAdmin}\n                deleteUser={this.deleteUser}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionUsersByPage={this.getInstitutionUsersByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <AddMemberDialog\n            addUser={this.addUser}\n            toggle={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No admins')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  revokeAdmin={this.props.revokeAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isRevokeAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleRevokeAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  }\n\n  revokeAdmin = () => {\n    this.props.revokeAdmin(this.props.item);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isRevokeAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Revoke Admin']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass InstitutionAdmins extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n    seafileAPI.sysAdminListInstitutionAdmins(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  revokeAdmin = (item) => {\n    const email = item.email;\n    const name = item.name;\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, false).then(res => {\n      let userList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { institutionName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"admins\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                revokeAdmin={this.revokeAdmin}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionAdmins;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'loginLogs', urlPart:'logs/login', text: gettext('Login')},\n      {name: 'fileAccessLogs', urlPart:'logs/file-access', text: gettext('File Access')},\n      {name: 'fileUpdateLogs', urlPart:'logs/file-update', text: gettext('File Update')},\n      {name: 'sharePermissionLogs', urlPart:'logs/share-permission', text: gettext('Permission')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport moment from 'moment';\n\nclass LogsExportExcelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      startDateStr: '',\n      endDateStr: '',\n      errMsg: '',\n    };\n  }\n\n  downloadExcel = () => {\n    if (!this.isValidDateStr()) {\n      return;\n    }\n    let { startDateStr, endDateStr } = this.state;\n    let url = siteRoot;\n\n    switch (this.props.logType) {\n      case 'login':\n        url += 'sys/loginadmin/export-excel/';\n        break;\n      case 'fileAccess':\n        url += 'sys/log/fileaudit/export-excel/';\n        break;\n      case 'fileUpdate':\n        url += 'sys/log/fileupdate/export-excel/';\n        break;\n      case 'sharePermission':\n        url += 'sys/log/permaudit/export-excel/';\n        break;\n    }\n    location.href = url + '?start=' + startDateStr + '&end=' + endDateStr;\n    this.props.toggle();\n  }\n\n  isValidDateStr = () => {\n    let { startDateStr, endDateStr } = this.state;\n    if (moment(startDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(endDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(startDateStr).isBefore(endDateStr)\n    ) {\n      return true;\n    } else {\n      this.setState({\n        errMsg: gettext('Date Invalid.')\n      });\n      return false;\n    }\n  }\n\n  handleStartChange = (e) => {\n    const startDateStr = e.target.value.trim();\n    this.setState({\n      startDateStr: startDateStr,\n      errMsg: ''\n    });\n  }\n\n  handleEndChange = (e) => {\n    const endDateStr = e.target.value.trim();\n    this.setState({\n      endDateStr: endDateStr,\n      errMsg: '',\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Choose date')}</ModalHeader>\n        <ModalBody>\n          <FormGroup>\n            <Label>{gettext('Start date')}</Label>\n            <Input\n              value={this.state.startDateStr}\n              onChange={this.handleStartChange}\n              placeholder='yyyy-mm-dd'\n              autoFocus={true}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label>{gettext('End date')}</Label>\n            <Input\n              value={this.state.endDateStr}\n              onChange={this.handleEndChange}\n              placeholder='yyyy-mm-dd'\n            />\n          </FormGroup>\n          {this.state.errMsg &&\n            <Alert className=\"mt-2\" color=\"danger\">\n              {gettext(this.state.errMsg)}\n            </Alert>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.downloadExcel}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  logType: PropTypes.string.isRequired,\n};\n\nLogsExportExcelDialog.propTypes = propTypes;\n\nexport default LogsExportExcelDialog;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport { Button } from 'reactstrap';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.log_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass LoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.login_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"loginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'login'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default LoginLogs;\n","import React from 'react';\nimport { gettext } from '../../../utils/constants';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\n\nclass FilterMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { \n      isMenuShown: false\n    };  \n  }\n\n  toggleMenu = () => {\n    this.setState({\n      isMenuShown: !this.state.isMenuShown\n    }, () => {\n      this.props.toggleFreezeItem(this.state.isMenuShown);\n    });\n  }\n\n  onItemClick = () => {\n    this.props.filterItems();\n    this.props.toggleFreezeItem(false);\n  }\n\n  render() {\n    const { filterBy } = this.props;\n    return (\n      <Dropdown isOpen={this.state.isMenuShown} toggle={this.toggleMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isMenuShown}\n        />\n        <DropdownMenu>\n          <DropdownItem onClick={this.onItemClick}>{gettext('only show {placeholder}').replace('{placeholder}', filterBy)}</DropdownItem>\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nexport default FilterMenu;\n","import React from 'react';\nimport { Button } from 'reactstrap';\n\nclass ToggleFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { filterBy } = this.props;\n    return (\n      <Button\n        color='secondary'\n        className=\"my-2 mr-2\"\n        onClick={this.props.toggleFilter}\n      >   \n        <span className=\"text-primary\">{filterBy}</span>\n        <span className=\"ml-2 close\" style={{fontSize: '1.2rem'}}>x</span>\n      </Button>\n    );\n\n  }\n\n}\n\nexport default ToggleFilter;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport { Button } from 'reactstrap';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport LogsNav from './logs-nav';\nimport FilterMenu from './file-access-item-menu';\nimport ToggleFilter from './file-access-toggle-filter';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  toggleFilterByUser = () => {\n    this.props.filterByUser(null);\n  }\n\n  toggleFilterByRepo = () => {\n    this.props.filterByRepo(null);\n  }\n\n  toggleFreezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  }\n\n  render() {\n    const {\n      loading, errorMsg, items, \n      userFilteredBy, repoFilteredBy,\n      perPage, currentPage, hasNextPage\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file access logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <div>\n            {userFilteredBy && (\n              <ToggleFilter\n                filterBy={items[0].name}\n                toggleFilter={this.toggleFilterByUser}\n              />\n            )}\n            {repoFilteredBy && (\n              <ToggleFilter\n                filterBy={items[0].repo_name}\n                toggleFilter={this.toggleFilterByRepo}\n              />\n            )}\n          </div>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('IP')}{' / '}{gettext('Device')}</th>\n                <th width=\"20%\">{gettext('Date')}</th>\n                <th width=\"15%\">{gettext('Library')}</th>\n                <th width=\"15%\">{gettext('File')}{' / '}{gettext('Folder')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    isFreezed={this.state.isItemFreezed}\n                    toggleFreezeItem={this.toggleFreezeItem}\n                    userFilteredBy={userFilteredBy}\n                    repoFilteredBy={repoFilteredBy}\n                    filterByUser={this.props.filterByUser}\n                    filterByRepo={this.props.filterByRepo}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlighted: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isFreezed) {\n      this.setState({\n        isHighlighted: true,\n        isOpIconShown: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isFreezed) {\n      this.setState({\n        isHighlighted: false,\n        isOpIconShown: false\n      });\n    }\n  }\n\n  filterByUser = () => {\n    const { item } = this.props;\n    this.props.filterByUser(item.email);\n  }\n\n  filterByRepo = () => {\n    const { item } = this.props;\n    this.props.filterByRepo(item.repo_id);\n  }\n\n  toggleFreezeItem = (freezed) => {\n    this.props.toggleFreezeItem(freezed);\n    if (!freezed) {\n      this.setState({\n        isHighlighted: false,\n        isOpIconShown: false\n      });\n    }\n  }\n\n  render() {\n    const { isHighlighted, isOpIconShown } = this.state;\n    const { item, userFilteredBy, repoFilteredBy } = this.props;\n    return (\n      <tr className={isHighlighted ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>\n          <UserLink email={item.email} name={item.name} />\n          {isOpIconShown && !userFilteredBy && (\n            <FilterMenu\n              filterBy={item.name}\n              filterItems={this.filterByUser}\n              toggleFreezeItem={this.toggleFreezeItem}\n            />\n          )}\n        </td>\n        <td>{item.event_type}</td>\n        <td>{item.ip}{' / '}{item.device || '--'}</td>\n        <td>{moment(item.time).fromNow()}</td>\n        <td>\n          {item.repo_name ? item.repo_name : gettext('Deleted')}\n          {isOpIconShown && item.repo_name && !repoFilteredBy && (\n            <FilterMenu\n              filterBy={item.repo_name}\n              filterItems={this.filterByRepo}\n              toggleFreezeItem={this.toggleFreezeItem}\n            />\n          )}\n        </td>\n        <td>{item.file_or_dir_name}</td>\n      </tr>\n    );\n  }\n}\n\nclass FileAccessLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      userFilteredBy: urlParams.get('email'),\n      repoFilteredBy: urlParams.get('repo_id')\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    const { perPage, userFilteredBy, repoFilteredBy } = this.state;\n    seafileAPI.sysAdminListFileAccessLogs(page, perPage, userFilteredBy, repoFilteredBy).then((res) => {\n      this.setState({\n        logList: res.data.file_access_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  updateURL = (obj) => {\n    let url = new URL(location.href);\n    let searchParams = new URLSearchParams(url.search);\n    for (let key in obj) {\n      obj[key] == null ? \n        searchParams.delete(key) :\n        searchParams.set(key, obj[key]);\n    }\n    url.search = searchParams.toString();\n    navigate(url.toString());\n  }\n\n  filterByUser = (email) => {\n    this.setState({\n      userFilteredBy: email \n    }, () => {\n      this.getLogsByPage(this.initPage);\n      this.updateURL({'email': email});\n    });\n  }\n\n  filterByRepo = (repoID) => {\n    this.setState({\n      repoFilteredBy: repoID \n    }, () => {\n      this.getLogsByPage(this.initPage);\n      this.updateURL({'repo_id': repoID});\n    });\n  } \n\n  render() {\n    const {\n      logList,\n      userFilteredBy, repoFilteredBy, \n      currentPage, perPage, hasNextPage,\n      isExportExcelDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileAccessLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                userFilteredBy={userFilteredBy}\n                repoFilteredBy={repoFilteredBy}\n                filterByUser={this.filterByUser}\n                filterByRepo={this.filterByRepo}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileAccess'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileAccessLogs;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport { Button } from 'reactstrap';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport ModalPortal from '../../../components/modal-portal';\nimport CommitDetails from '../../../components/dialog/commit-details';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file update logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('Date')}</th>\n                <th width=\"25%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Action')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isCommitDetailsDialogOpen: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n\n  toggleCommitDetailsDialog = () => {\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  }\n\n  showCommitDetails = (e) => {\n    e.preventDefault();\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>{moment(item.time).fromNow()}</td>\n          <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n          <td>\n            {item.file_operation}\n            {item.repo_name && !item.repo_encrypted &&\n              <a className=\"ml-1\" href=\"#\" onClick={this.showCommitDetails}>{gettext('Details')}</a>\n            }\n          </td>\n        </tr>\n        {this.state.isCommitDetailsDialogOpen &&\n          <ModalPortal>\n            <CommitDetails\n              repoID={item.repo_id}\n              commitID={item.commit_id}\n              commitTime={item.time}\n              toggleDialog={this.toggleCommitDetailsDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass FileUpdateLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListFileUpdateLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.file_update_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileUpdateLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileUpdate'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileUpdateLogs;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsNav from './logs-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No permission logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"15%\">{gettext('Share From')}</th>\n                <th width=\"15%\">{gettext('Share To')}</th>\n                <th width=\"10%\">{gettext('Actions')}</th>\n                <th width=\"13%\">{gettext('Permission')}</th>\n                <th width=\"20%\">{gettext('Library')}</th>\n                <th width=\"12%\">{gettext('Folder')}</th>\n                <th width=\"15%\">{gettext('Date')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  getActionTextByEType = (etype) => {\n    if (etype.indexOf('add') != -1) {\n      return gettext('Add');\n    } else if (etype.indexOf('modify') != -1) {\n      return gettext('Modify');\n    } else if (etype.indexOf('delete') != -1) {\n      return gettext('Delete');\n    } else {\n      return '';\n    }\n  }\n\n  getShareTo = (item) => {\n    switch(item.share_type) {\n      case 'user':\n        return <UserLink email={item.to_user_email} name={item.to_user_name} />;\n      case 'group':\n        return <Link to={`${siteRoot}sys/groups/${item.to_group_id}/libraries/`}>{item.to_group_name}</Link>;\n      case 'department':\n        return <Link to={`${siteRoot}sys/departments/${item.to_group_id}/`}>{item.to_group_name}</Link>;\n      case 'all':\n        return <Link to={`${siteRoot}org/`}>{gettext('All')}</Link>;\n      default:\n        return gettext('Deleted');\n    }\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.from_user_email} name={item.from_user_name} /></td>\n        <td>{this.getShareTo(item)}</td>\n        <td>{this.getActionTextByEType(item.etype)}</td>\n        <td>{Utils.sharePerms(item.permission)}</td>\n        <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n        <td>{item.folder}</td>\n        <td>{moment(item.date).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass SharePermissionLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListSharePermissionLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.share_permission_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"sharePermissionLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'sharePermission'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharePermissionLogs;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  headingText: PropTypes.string.isRequired,\n  children: PropTypes.object.isRequired\n};\n\nclass Section extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { headingText, children} = this.props;\n    return (\n      <div className=\"mb-4\">\n        <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{headingText}</h4>\n        {children}\n      </div>\n    );\n  }\n}\n\nSection.propTypes = propTypes;\n\nexport default Section;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col, Label } from 'reactstrap';\n\nconst propTypes = {\n  displayName: PropTypes.string.isRequired,\n  helpTip: PropTypes.string,\n  mainContent: PropTypes.object.isRequired,\n  extraContent: PropTypes.object\n};\n\nclass SettingItemBase extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { helpTip, displayName, mainContent, extraContent } = this.props;\n    return (\n      <Fragment>\n        <Row className=\"my-4\">\n          <Col md=\"3\">\n            <Label className=\"web-setting-label\">{displayName}</Label>\n          </Col>\n          <Col md=\"5\">\n            {mainContent}\n            {helpTip && <p className=\"small text-secondary mt-1\">{helpTip}</p>}\n          </Col>\n          <Col md=\"4\">\n            {extraContent}\n          </Col>\n        </Row>\n      </Fragment>\n    );\n  }\n}\n\nSettingItemBase.propTypes = propTypes;\n\nexport default SettingItemBase;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  inputType: PropTypes.string,\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string,PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isBtnsShown: false,\n      value: this.props.value\n    };\n  }\n\n  toggleBtns = () => {\n    this.setState({isBtnsShown: !this.state.isBtnsShown});\n  }\n\n  hideBtns = (e) => {\n    if (!this.state.isBtnsShown) {\n      return;\n    }\n    if (this.props.value != this.state.value) {\n      this.setState({value: this.props.value});\n    }\n    this.toggleBtns();\n  }\n\n  onInputChange = (e) => {\n    this.setState({ value: e.target.value });\n  }\n\n  onSubmit = (e) => {\n    const value = this.state.value.trim();\n    if (value != this.props.value) {\n      this.props.saveSetting(this.props.keyText, value);\n    }\n    this.toggleBtns();\n  }\n\n  render() {\n    const { isBtnsShown, value } = this.state;\n    const { helpTip, displayName, inputType } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <Input type={inputType || 'text'} className={inputType == 'textarea' ? 'web-setting-textarea' : ''} onChange={this.onInputChange} onFocus={this.toggleBtns} onBlur={this.hideBtns} value={value} />\n        }\n        extraContent={\n          isBtnsShown ?\n            <Fragment>\n              <Button className=\"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit\" onMouseDown={this.onSubmit} title={gettext('Submit')}></Button>\n              <Button className=\"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel\" title={gettext('Cancel')}></Button>\n            </Fragment> : null\n        }\n      />\n    );\n  }\n}\n\nWebSettingInput.propTypes = propTypes;\n\nexport default WebSettingInput;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  postFile: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  helpTip: PropTypes.string.isRequired,\n  fileWidth: PropTypes.number.isRequired,\n  fileHeight: PropTypes.number.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingFile extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n  }\n\n  uploadFile = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    this.props.postFile(file, this.props.keyText);\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  render() {\n    const { helpTip, filePath, fileWidth, fileHeight, displayName } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <img src={filePath + '?t=' + new Date().getTime()} alt={displayName} width={fileWidth} height={fileHeight} className=\"mb-1\" />\n        }\n        extraContent={\n          <Fragment>\n            <Button color=\"secondary\" onClick={this.openFileInput}>{gettext('Change')}</Button>\n            <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInput} />\n          </Fragment>\n        }\n      />\n    );\n  }\n}\n\nWebSettingFile.propTypes = propTypes;\n\nexport default WebSettingFile;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingCheckbox extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputChecked: this.props.value\n    };\n  }\n\n  onInputChange = (e) => {\n    const checked = e.target.checked;\n    const valueToNum = checked ? 1 : 0;\n    this.setState({\n      inputChecked: checked\n    });\n    this.props.saveSetting(this.props.keyText, valueToNum);\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n    const { helpTip, displayName } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        mainContent={\n          <Fragment>\n            <Input className=\"ml-0\" checked={inputChecked} type='checkbox' onChange={this.onInputChange} />\n            <p className=\"ml-4\">{helpTip}</p>\n          </Fragment>\n        }\n      />\n    );\n  }\n}\n\nWebSettingCheckbox.propTypes = propTypes;\n\nexport default WebSettingCheckbox;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro, mediaUrl, logoPath, faviconPath, loginBGPath } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Section from './section';\nimport InputItem from './input-item';\nimport FileItem from './file-item';\nimport CheckboxItem from './checkbox-item';\n\nimport '../../../css/system-admin-web-settings.css';\n\nclass WebSettings extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      config_dict: null,\n      logoPath: mediaUrl + logoPath,\n      faviconPath: mediaUrl + faviconPath,\n      loginBGPath: mediaUrl + loginBGPath\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysSettingInfo().then((res) => {\n      this.setState({\n        loading: false,\n        config_dict: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  saveSetting = (key, value) => {\n    seafileAPI.sysAdminSetSysSettingInfo(key, value).then((res) => {\n      this.setState({\n        config_dict: res.data\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  postFile = (file, fileType) => {\n    let postFile;\n    if (fileType == 'Logo') {\n      postFile = seafileAPI.sysAdminUpdateLogo(file);\n    } else if (fileType == 'Favicon') {\n      postFile = seafileAPI.sysAdminUpdateFavicon(file);\n    } else if (fileType == 'loginBGImage') {\n      postFile = seafileAPI.sysAdminUpdateLoginBG(file);\n    }\n    postFile.then((res) => {\n      if (fileType == 'Logo') {\n        this.setState({\n          logoPath: res.data.logo_path\n        });\n      } else if (fileType == 'Favicon') {\n        this.setState({\n          faviconPath: res.data.favicon_path\n        });\n      } else if (fileType == 'loginBGImage') {\n        this.setState({\n          loginBGPath: res.data.login_bg_image_path\n        });\n      }\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg, config_dict, logoPath, faviconPath, loginBGPath } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Settings')}</h3>\n            </div>\n            <div className=\"cur-view-content container mw-100\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) && config_dict &&\n              <Fragment>\n                <p className=\"small text-secondary my-4\">{gettext('Note: Settings via web interface are saved in database table (seahub-db/constance_config). They have a higher priority over the settings in config files.')}</p>\n\n                <Section headingText='URL'>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SERVICE_URL'\n                      keyText='SERVICE_URL'\n                      value={config_dict['SERVICE_URL']}\n                      helpTip={gettext('The URL of the server, like https://seafile.example.com or http://192.168.1.2:8000')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='FILE_SERVER_ROOT'\n                      keyText='FILE_SERVER_ROOT'\n                      value={config_dict['FILE_SERVER_ROOT']}\n                      helpTip={gettext('The internal URL for downloading/uploading files. Users will not be able to download/upload files if this is not set correctly. If you config Seafile behind Nginx/Apache, it should be SERVICE_URL/seafhttp, like https://seafile.example.com/seafhttp .')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Branding')}>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_TITLE'\n                      keyText='SITE_TITLE'\n                      value={config_dict['SITE_TITLE']}\n                      helpTip={gettext('Site title shown in a browser tab')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_NAME'\n                      keyText='SITE_NAME'\n                      value={config_dict['SITE_NAME']}\n                      helpTip={gettext('Site name used in email sending')}\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Logo'\n                      keyText='Logo'\n                      filePath={logoPath}\n                      fileWidth={256}\n                      fileHeight={64}\n                      helpTip='logo.png, 256px * 64px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Favicon'\n                      keyText='Favicon'\n                      filePath={faviconPath}\n                      fileWidth={32}\n                      fileHeight={32}\n                      helpTip='favicon.ico, 32px * 32px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName={gettext('Login Background Image')}\n                      keyText='loginBGImage'\n                      filePath={loginBGPath}\n                      fileWidth={240}\n                      fileHeight={160}\n                      helpTip='login-bg.jpg, 2400px * 1600px'\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_BRANDING_CSS'\n                      keyText='ENABLE_BRANDING_CSS'\n                      value={config_dict['ENABLE_BRANDING_CSS']}\n                      helpTip={gettext('Use custom CSS')}\n                    />\n                    <InputItem\n                      inputType=\"textarea\"\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('Custom CSS')}\n                      keyText='CUSTOM_CSS'\n                      value={config_dict['CUSTOM_CSS']}\n                      helpTip=''\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('User')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('allow new registrations')}\n                      keyText='ENABLE_SIGNUP'\n                      value={config_dict['ENABLE_SIGNUP']}\n                      helpTip={gettext('Allow new user registrations. Uncheck this to prevent anyone from creating a new account.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('activate after registration')}\n                      keyText='ACTIVATE_AFTER_REGISTRATION'\n                      value={config_dict['ACTIVATE_AFTER_REGISTRATION']}\n                      helpTip={gettext('Activate user immediately after registration. If unchecked, a user need to be activated by administrator or via activation email')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('send activation email')}\n                      keyText='REGISTRATION_SEND_MAIL'\n                      value={config_dict['REGISTRATION_SEND_MAIL']}\n                      helpTip={gettext('Send activation Email after user registration.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('keep sign in')}\n                      keyText='LOGIN_REMEMBER_DAYS'\n                      value={config_dict['LOGIN_REMEMBER_DAYS']}\n                      helpTip={gettext('Number of days that keep user sign in.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='LOGIN_ATTEMPT_LIMIT'\n                      keyText='LOGIN_ATTEMPT_LIMIT'\n                      value={config_dict['LOGIN_ATTEMPT_LIMIT']}\n                      helpTip={gettext('The maximum number of failed login attempts before showing CAPTCHA.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='FREEZE_USER_ON_LOGIN_FAILED'\n                      keyText='FREEZE_USER_ON_LOGIN_FAILED'\n                      value={config_dict['FREEZE_USER_ON_LOGIN_FAILED']}\n                      helpTip={gettext('Freeze user account when failed login attempts exceed limit.')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Groups')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_SHARE_TO_ALL_GROUPS'\n                    keyText='ENABLE_SHARE_TO_ALL_GROUPS'\n                    value={config_dict['ENABLE_SHARE_TO_ALL_GROUPS']}\n                    helpTip={gettext('Enable users to share libraries to any groups in the system.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Password')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='strong password'\n                      keyText='USER_STRONG_PASSWORD_REQUIRED'\n                      value={config_dict['USER_STRONG_PASSWORD_REQUIRED']}\n                      helpTip={gettext('Force user to use a strong password when sign up or change password.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='force password change'\n                      keyText='FORCE_PASSWORD_CHANGE'\n                      value={config_dict['FORCE_PASSWORD_CHANGE']}\n                      helpTip={gettext('Force user to change password when account is newly added or reset by admin')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password minimum length')}\n                      keyText='USER_PASSWORD_MIN_LENGTH'\n                      value={config_dict['USER_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an account password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password strength level')}\n                      keyText='USER_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['USER_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of an account password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='enable two factor authentication'\n                      keyText='ENABLE_TWO_FACTOR_AUTH'\n                      value={config_dict['ENABLE_TWO_FACTOR_AUTH']}\n                      helpTip={gettext('Enable two factor authentication')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Library')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='library history'\n                      keyText='ENABLE_REPO_HISTORY_SETTING'\n                      value={config_dict['ENABLE_REPO_HISTORY_SETTING']}\n                      helpTip={gettext('Allow user to change library history settings')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='encrypted library'\n                      keyText='ENABLE_ENCRYPTED_LIBRARY'\n                      value={config_dict['ENABLE_ENCRYPTED_LIBRARY']}\n                      helpTip={gettext('Allow user to create encrypted libraries')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('library password minimum length')}\n                      keyText='REPO_PASSWORD_MIN_LENGTH'\n                      value={config_dict['REPO_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an encrypted library password should include.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link force password')}\n                      keyText='SHARE_LINK_FORCE_USE_PASSWORD'\n                      value={config_dict['SHARE_LINK_FORCE_USE_PASSWORD']}\n                      helpTip={gettext('Force user use password when generating share/upload link.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link password minimum length')}\n                      keyText='SHARE_LINK_PASSWORD_MIN_LENGTH'\n                      value={config_dict['SHARE_LINK_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters a share/upload link password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('share/upload link password strength level')}\n                      keyText='SHARE_LINK_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['SHARE_LINK_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of a share/upload link password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_USER_CLEAN_TRASH'\n                      keyText='ENABLE_USER_CLEAN_TRASH'\n                      value={config_dict['ENABLE_USER_CLEAN_TRASH']}\n                      helpTip={gettext('Allow user to clean library trash')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Online Preview')}>\n                  <InputItem\n                    inputType=\"textarea\"\n                    saveSetting={this.saveSetting}\n                    displayName={gettext('text file extensions')}\n                    keyText='TEXT_PREVIEW_EXT'\n                    value={config_dict['TEXT_PREVIEW_EXT']}\n                    helpTip={gettext('Extensions of text files that can be online previewed, each suffix is separated by a comma.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Sync')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    keyText='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    value={config_dict['DISABLE_SYNC_WITH_ANY_FOLDER']}\n                    helpTip={gettext('If turn on, the desktop clients will not be able to sync a folder outside the default Seafile folder.')}\n                  />\n                </Section>\n\n                {isPro && <Section headingText={gettext('Terms')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_TERMS_AND_CONDITIONS'\n                    keyText='ENABLE_TERMS_AND_CONDITIONS'\n                    value={config_dict['ENABLE_TERMS_AND_CONDITIONS']}\n                    helpTip={gettext('Enable system admin to add Terms and Conditions, and all users will have to accept the terms.')}\n                  />\n                </Section>}\n              </Fragment>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default WebSettings;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addNotification: PropTypes.func.isRequired\n};\n\nclass SysAdminAddSysNotificationDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addNotification(this.state.value.trim());\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add new notification')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"textarea\"\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddSysNotificationDialog.propTypes = propTypes;\n\nexport default SysAdminAddSysNotificationDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminAddSysNotificationDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No notifications')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"95%\">{gettext('Notification Detail')}</th>\n              <th width=\"5%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                item={item}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                deleteNotification={this.props.deleteNotification}\n                setToCurrent={this.props.setToCurrent}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteNotification = () => {\n    this.props.deleteNotification(this.props.item.id);\n    this.toggleDeleteDialog();\n  }\n\n  setToCurrent = () => {\n    this.props.setToCurrent(this.props.item.id);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Set to current':\n        this.setToCurrent();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Set to current':\n        translateResult = gettext('Set to current');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  getOperations = () => {\n    const { item } = this.props;\n    let operations = [];\n    if (!item.is_current) {\n      operations.push('Set to current');\n    }\n    operations.push('Delete');\n    return operations;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            {item.msg}\n            {item.is_current &&\n              <span className=\"small text-orange\">{gettext('(current notification)')}</span>\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Notification')}\n            message={gettext('Are you sure you want to delete the notification ?')}\n            toggleDialog={this.toggleDeleteDialog}\n            executeOperation={this.deleteNotification}\n            confirmBtnText={gettext('Delete')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Notifications extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      notificationList: [],\n      isAddNotificationDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListAllSysNotifications().then((res) => {\n      this.setState({\n        loading: false,\n        notificationList: res.data.notifications\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddNotificationDialog = () => {\n    this.setState({isAddNotificationDialogOpen: !this.state.isAddNotificationDialogOpen});\n  }\n\n  addNotification = (msg) => {\n    seafileAPI.sysAdminAddSysNotification(msg).then(res => {\n      let notificationList = this.state.notificationList;\n      notificationList.unshift(res.data.notification);\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteNotification = (id) => {\n    seafileAPI.sysAdminDeleteSysNotification(id).then(res => {\n      let notificationList = this.state.notificationList.filter(item => {\n        return item.id != id;\n      });\n      this.setState({notificationList: notificationList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setToCurrent = (id) => {\n    seafileAPI.sysAdminSetSysNotificationToCurrent(id).then(res => {\n      let notificationList = this.state.notificationList.map(item => {\n        if (item.id == id) {\n          item.is_current = true;\n        } else {\n          item.is_current = false;\n        }\n        return item;\n      });\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddNotificationDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddNotificationDialog}>{gettext('Add new notification')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Notifications')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.notificationList}\n                deleteNotification={this.deleteNotification}\n                setToCurrent={this.setToCurrent}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddNotificationDialogOpen &&\n          <SysAdminAddSysNotificationDialog\n            addNotification={this.addNotification}\n            toggle={this.toggleAddNotificationDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Notifications;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\n\n\nconst tablePropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  records: PropTypes.array.isRequired,\n};\n\nclass Table extends Component {\n\n  render() {\n    let { loading, errorMsg, records } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      return (\n        <table width=\"100%\" className=\"table table-hover table-vcenter\">\n          <thead>\n            <tr>\n              <th width=\"16%\">{gettext('Library')}</th>\n              <th width=\"30%\">ID</th>\n              <th width=\"30%\">{gettext('Path')}</th>\n              <th width=\"12%\">{gettext('Label')}</th>\n              <th width=\"12%\">{gettext('Suggestion')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {records.map((record, index) => {\n              return (\n                <Item key={index} record={record} />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nTable.propTypes = tablePropTypes;\n\n\nconst itemPropTypes = {\n  record: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    let record = this.props.record;\n\n    return (\n      <tr>\n        <td>{record.repo_name}</td>\n        <td>{record.repo_id}</td>\n        <td>{record.path}</td>\n        <td>{record.detail.label}</td>\n        <td>{record.detail.suggestion}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\n\nclass FileScanRecords extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      records: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listFileScanRecords().then((res) => {\n      this.setState({\n        loading: false,\n        records: res.data.record_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"content-scan-records\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Content Scan Records')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Table\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                records={this.state.records}\n              />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FileScanRecords;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst WorkWeixinDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass WorkWeixinDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar && member.avatar.length > 0) {\n        avatar = member.avatar.substring(0, member.avatar.length - 1) + '100';// get smaller avatar\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{'名称'}</th>\n                <th width=\"20%\">{'手机号'}</th>\n                <th width=\"30%\">{'邮箱'}</th>\n                <th width=\"15%\">{'已添加'}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{'成员列表为空'}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentMembersList.propTypes = WorkWeixinDepartmentMembersListPropTypes;\n\nexport default WorkWeixinDepartmentMembersList;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { gettext, isPro } from '../../../utils/constants';\n\nconst WorkWeixinDepartmentsTreeNodePropTypes = {\n  index: PropTypes.number,\n  department: PropTypes.object.isRequired,\n  isChildrenShow: PropTypes.bool.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreeNode extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChildrenShow: false,\n      dropdownOpen: false,\n      active: false,\n    };\n  }\n\n  toggleChildren = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({\n      isChildrenShow: !this.state.isChildrenShow,\n    });\n  };\n\n  dropdownToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onMouseEnter = () => {\n    this.setState({ active: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.state.dropdownOpen) return;\n    this.setState({ active: false });\n  };\n\n  importDepartmentDialogToggle = (depart) => {\n    this.setState({ active: false });\n    this.props.importDepartmentDialogToggle(depart);\n  }\n\n  componentDidMount() {\n    if (this.props.index === 0) {\n      this.setState({ isChildrenShow: true });\n      this.props.onChangeDepartment(this.props.department.id);\n    }\n  }\n\n  renderTreeNodes = (departmentsTree) => {\n    if (departmentsTree.length > 0) {\n      return departmentsTree.map((department) => {\n        return (\n          <WorkWeixinDepartmentsTreeNode\n            key={department.id}\n            department={department}\n            isChildrenShow={this.state.isChildrenShow}\n            onChangeDepartment={this.props.onChangeDepartment}\n            checkedDepartmentId={this.props.checkedDepartmentId}\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n          />\n        );\n      });\n    }\n  };\n\n  changeDept = (departmentID) => {\n    const { department, checkedDepartmentId } = this.props;\n    this.props.onChangeDepartment(departmentID);\n    if (checkedDepartmentId === department.id && !this.state.isChildrenShow) {\n      this.setState({ isChildrenShow: true });\n    }\n  }\n\n  render() {\n    const { isChildrenShow, department, checkedDepartmentId } = this.props;\n    let toggleClass = classNames({\n      'folder-toggle-icon fa fa-caret-down': department.children && this.state.isChildrenShow,\n      'folder-toggle-icon fa fa-caret-right': department.children && !this.state.isChildrenShow,\n    });\n    let nodeInnerClass = classNames({\n      'tree-node-inner': true,\n      'tree-node-inner-hover': this.state.active,\n      'tree-node-hight-light': checkedDepartmentId === department.id\n    });\n    return (\n      <Fragment>\n        {isChildrenShow &&\n          <div\n            className={nodeInnerClass}\n            onClick={() => this.changeDept(department.id)}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <span className=\"tree-node-icon\" onClick={(e) => this.toggleChildren(e)}>\n              <i className={toggleClass}></i>\n            </span>\n            <span className=\"tree-node-text\">{department.name}</span>\n            {isPro &&\n            <Dropdown\n              isOpen={this.state.dropdownOpen}\n              toggle={(e) => this.dropdownToggle(e)}\n              direction=\"down\"\n              style={this.state.active ? {} : { opacity: 0 }}\n            >\n              <DropdownToggle\n                tag='i'\n                className='fa fa-ellipsis-v cursor-pointer attr-action-icon'\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.dropdownOpen}\n              >\n              </DropdownToggle>\n              <DropdownMenu className=\"drop-list\" right={true}>\n                <DropdownItem\n                  onClick={this.importDepartmentDialogToggle.bind(this, department)}\n                  id={department.id}\n                >{'导入部门'}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </div>\n        }\n        {this.state.isChildrenShow &&\n          <div className=\"department-children\">\n            {department.children && this.renderTreeNodes(department.children)}\n          </div>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreeNode.propTypes = WorkWeixinDepartmentsTreeNodePropTypes;\n\nexport default WorkWeixinDepartmentsTreeNode;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport WorkWeixinDepartmentsTreeNode from './work-weixin-departments-tree-node';\n\nconst WorkWeixinDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <WorkWeixinDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreePanel.propTypes = WorkWeixinDepartmentsTreePanelPropTypes;\n\nexport default WorkWeixinDepartmentsTreePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loading from '../loading';\n\nconst propTypes = {\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n  onImportDepartmentSubmit: PropTypes.func.isRequired,\n  departmentsCount: PropTypes.number.isRequired,\n  membersCount: PropTypes.number.isRequired,\n  departmentName: PropTypes.string.isRequired,\n};\n\nclass ImportWorkWeixinDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : false,\n    };\n  }\n\n  toggle = () => {\n    this.props.importDepartmentDialogToggle(null);\n  };\n\n  handleSubmit = () => {\n    this.props.onImportDepartmentSubmit();\n    this.setState({ isLoading : true });\n  };\n\n  render() {\n    const { departmentsCount, membersCount, departmentName } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{'导入部门 '}</span><span className=\"op-target\" title={departmentName}>{departmentName}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{'将要导入 '}<strong>{departmentsCount}</strong>{' 个部门，其中包括 '}<strong>{membersCount}</strong>{' 个成员'}</p>\n          {this.state.isLoading && <Loading/>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{'取消'}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{'导入'}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportWorkWeixinDepartmentDialog.propTypes = propTypes;\n\nexport default ImportWorkWeixinDepartmentDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport deepCopy from 'deep-copy';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport { WorkWeixinDepartmentMembersList, WorkWeixinDepartmentsTreePanel } from './work-weixin';\nimport ImportWorkWeixinDepartmentDialog from '../../components/dialog/import-work-weixin-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\n\nclass WorkWeixinDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = deepCopy(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getWorkWeixinDepartmentsList = (departmentID) => {\n    seafileAPI.adminListWorkWeixinDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getWorkWeixinDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListWorkWeixinDepartmentMembers(department_id, {fetch_child: true}).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  };\n\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getWorkWeixinDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('未选择成员', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddWorkWeixinUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' 成功导入', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  }\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getWorkWeixinDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportWorkWeixinDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getWorkWeixinDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? '部门 ' + success.department_name + ' 导入成功' : success.api_user_name + ' 导入成功' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  }\n\n  componentDidMount() {\n    this.getWorkWeixinDepartmentsList(null);\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"operation-item\" onClick={this.onSubmit}>{'导入用户'}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{'企业微信集成'}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <WorkWeixinDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <WorkWeixinDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportWorkWeixinDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default WorkWeixinDepartments;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst DingtalkDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass DingtalkDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar && member.avatar.length > 0) {\n        avatar = member.avatar;\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{'名称'}</th>\n                <th width=\"20%\">{'手机号'}</th>\n                <th width=\"30%\">{'邮箱'}</th>\n                <th width=\"15%\">{'已添加'}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{'成员列表为空'}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentMembersList.propTypes = DingtalkDepartmentMembersListPropTypes;\n\nexport default DingtalkDepartmentMembersList;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { gettext, isPro } from '../../../utils/constants';\n\nconst DingtalkDepartmentsTreeNodePropTypes = {\n  index: PropTypes.number,\n  department: PropTypes.object.isRequired,\n  isChildrenShow: PropTypes.bool.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreeNode extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChildrenShow: false,\n      dropdownOpen: false,\n      active: false,\n    };\n  }\n\n  toggleChildren = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({\n      isChildrenShow: !this.state.isChildrenShow,\n    });\n  };\n\n  dropdownToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onMouseEnter = () => {\n    this.setState({ active: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.state.dropdownOpen) return;\n    this.setState({ active: false });\n  };\n\n  importDepartmentDialogToggle = (depart) => {\n    this.setState({ active: false });\n    this.props.importDepartmentDialogToggle(depart);\n  }\n\n  componentDidMount() {\n    if (this.props.index === 0) {\n      this.setState({ isChildrenShow: true });\n      this.props.onChangeDepartment(this.props.department.id);\n    }\n  }\n\n  renderTreeNodes = (departmentsTree) => {\n    if (departmentsTree.length > 0) {\n      return departmentsTree.map((department) => {\n        return (\n          <DingtalkDepartmentsTreeNode\n            key={department.id}\n            department={department}\n            isChildrenShow={this.state.isChildrenShow}\n            onChangeDepartment={this.props.onChangeDepartment}\n            checkedDepartmentId={this.props.checkedDepartmentId}\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n          />\n        );\n      });\n    }\n  };\n\n  changeDept = (departmentID) => {\n    const { department, checkedDepartmentId } = this.props;\n    this.props.onChangeDepartment(departmentID);\n    if (checkedDepartmentId === department.id && !this.state.isChildrenShow) {\n      this.setState({ isChildrenShow: true });\n    }\n  }\n\n  render() {\n    const { isChildrenShow, department, checkedDepartmentId } = this.props;\n    let toggleClass = classNames({\n      'folder-toggle-icon fa fa-caret-down': department.children && this.state.isChildrenShow,\n      'folder-toggle-icon fa fa-caret-right': department.children && !this.state.isChildrenShow,\n    });\n    let nodeInnerClass = classNames({\n      'tree-node-inner': true,\n      'tree-node-inner-hover': this.state.active,\n      'tree-node-hight-light': checkedDepartmentId === department.id\n    });\n    return (\n      <Fragment>\n        {isChildrenShow &&\n          <div\n            className={nodeInnerClass}\n            onClick={() => this.changeDept(department.id)}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <span className=\"tree-node-icon\" onClick={(e) => this.toggleChildren(e)}>\n              <i className={toggleClass}></i>\n            </span>\n            <span className=\"tree-node-text\">{department.name}</span>\n            {isPro &&\n            <Dropdown\n              isOpen={this.state.dropdownOpen}\n              toggle={(e) => this.dropdownToggle(e)}\n              direction=\"down\"\n              style={this.state.active ? {} : { opacity: 0 }}\n            >\n              <DropdownToggle\n                tag='i'\n                className='fa fa-ellipsis-v cursor-pointer attr-action-icon'\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.dropdownOpen}\n              >\n              </DropdownToggle>\n              <DropdownMenu className=\"drop-list\" right={true}>\n                <DropdownItem\n                  onClick={this.importDepartmentDialogToggle.bind(this, department)}\n                  id={department.id}\n                >{'导入部门'}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </div>\n        }\n        {this.state.isChildrenShow &&\n          <div className=\"department-children\">\n            {department.children && this.renderTreeNodes(department.children)}\n          </div>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDingtalkDepartmentsTreeNode.propTypes = DingtalkDepartmentsTreeNodePropTypes;\n\nexport default DingtalkDepartmentsTreeNode;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport DingtalkDepartmentsTreeNode from './dingtalk-departments-tree-node';\n\nconst DingtalkDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <DingtalkDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentsTreePanel.propTypes = DingtalkDepartmentsTreePanelPropTypes;\n\nexport default DingtalkDepartmentsTreePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loading from '../loading';\n\nconst propTypes = {\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n  onImportDepartmentSubmit: PropTypes.func.isRequired,\n  departmentsCount: PropTypes.number.isRequired,\n  membersCount: PropTypes.number.isRequired,\n  departmentName: PropTypes.string.isRequired,\n};\n\nclass ImportDingtalkDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : false,\n    };\n  }\n\n  toggle = () => {\n    this.props.importDepartmentDialogToggle(null);\n  };\n\n  handleSubmit = () => {\n    this.props.onImportDepartmentSubmit();\n    this.setState({ isLoading : true });\n  };\n\n  render() {\n    const { departmentsCount, membersCount, departmentName } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{'导入部门 '}</span><span className=\"op-target\" title={departmentName}>{departmentName}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{'将要导入 '}<strong>{departmentsCount}</strong>{' 个部门，其中包括 '}<strong>{membersCount}</strong>{' 个成员'}</p>\n          {this.state.isLoading && <Loading/>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{'取消'}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{'导入'}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportDingtalkDepartmentDialog.propTypes = propTypes;\n\nexport default ImportDingtalkDepartmentDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport deepCopy from 'deep-copy';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\nimport toaster from '../../components/toast';\nimport { DingtalkDepartmentMembersList, DingtalkDepartmentsTreePanel } from './dingtalk';\nimport ImportDingtalkDepartmentDialog from '../../components/dialog/import-dingtalk-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\nimport '../../css/dingtalk-departments.css';\n\nclass DingtalkDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = deepCopy(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getDingtalkDepartmentsList = (departmentID) => {\n    seafileAPI.adminListDingtalkDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getDingtalkDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListDingtalkDepartmentMembers(department_id).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  }\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getDingtalkDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('未选择成员', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddDingtalkUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' 成功导入', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  }\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getDingtalkDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportDingtalkDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getDingtalkDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? '部门 ' + success.department_name + ' 导入成功' : success.api_user_name + ' 导入成功' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  }\n\n  componentDidMount() {\n    this.getDingtalkDepartmentsList(null);\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"operation-item\" onClick={this.onSubmit}>{'导入用户'}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{'钉钉集成'}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <DingtalkDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <DingtalkDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportDingtalkDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DingtalkDepartments;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getItemsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getItemsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No invitations')}</h2>\n        </EmptyTip>\n      );\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Inviter')}</th>\n                <th width=\"20%\">{gettext('Accepter')}</th>\n                <th width=\"9%\">{gettext('Type')}</th>\n                <th width=\"14%\">{gettext('Invited at')}</th>\n                <th width=\"14%\">{gettext('Accepted at')}</th>\n                <th width=\"18%\">{gettext('Expired at')}</th>\n                <th width=\"5%\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.deleteItem();\n        break;\n      default:\n        break;\n    }\n  }\n\n  getInviteTypeText = () => {\n    let translateResult = '';\n    switch (this.props.item.invite_type) {\n      case 'Guest':\n        translateResult = gettext('Guest');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const {\n      isOpIconShown\n    } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.inviter_email} name={item.inviter_name} />\n          </td>\n          <td>\n            {item.accept_time ?\n              <UserLink email={item.accepter_email} name={item.accepter_name} /> :\n              item.accepter_email\n            }\n          </td>\n          <td>{this.getInviteTypeText()}</td>\n          <td>\n            <span title={moment(item.invite_time).format('llll')}>{moment(item.invite_time).fromNow()}</span>\n          </td>\n          <td>\n            {item.accept_time ?\n              <span title={moment(item.accept_time).format('llll')}>{moment(item.accept_time).fromNow()}</span> :\n              '--'\n            }\n          </td>\n          <td>\n            {item.is_expired ?\n              <span className=\"text-red\">{moment(item.expire_time).format('YYYY-MM-DD HH:mm')}</span> :\n              moment(item.expire_time).format('YYYY-MM-DD HH:mm')\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Invitations extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      totalItemCount: 0,\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInvitations(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.invitation_list,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (targetItem) => {\n    const token = targetItem.token;\n    seafileAPI.sysAdminDeleteInvitation(token).then(res => {\n      let items = this.state.items.filter(item => {\n        return item.token != token;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteItemInBatch = () => {\n    seafileAPI.sysAdminDeleteExpiredInvitations().then(res => {\n      const prevItems = this.state.items;\n      const items = this.state.items.filter(item => !item.is_expired || item.accept_time);\n      if (items.length < prevItems.length) {\n        this.setState({\n          items: items\n        });\n        toaster.success(gettext('Operation succeeded.'));\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.deleteItemInBatch}>{gettext('Delete Expired Invitations')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invitations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getItemsByPage={this.getItemsByPage}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Invitations;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { SimpleEditor } from '@seafile/seafile-editor';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string,\n  content: PropTypes.string,\n  onCommit: PropTypes.func.isRequired,\n  onCloseEditorDialog: PropTypes.func.isRequired,\n};\n\nclass TermsEditorDialog extends React.Component {\n\n  static defaultProps = {\n    title: gettext('Terms'),\n  }\n\n  onKeyDown = (event) => {\n    event.stopPropagation();\n  }\n\n  toggle = () => {\n    if (this.isContentChanged()) {\n      let currentContent = this.getCurrentContent();\n      this.props.onCommit(currentContent);\n    }\n    this.props.onCloseEditorDialog();\n  }\n\n  isContentChanged = () => {\n    return this.simpleEditor.hasContentChange();\n  }\n\n  getCurrentContent = () => {\n    let markdownContent = this.simpleEditor.getMarkdown();\n    return markdownContent;\n  }\n\n  setSimpleEditorRef = (editor) => {\n    this.simpleEditor = editor;\n  }\n\n  render() {\n    let { content, title } = this.props;\n    return (\n      <Modal\n        isOpen={true}\n        toggle={this.toggle}\n        onKeyDown={this.onKeyDown}\n        wrapClassName={'conditions-editor-dialog-wrapper'}\n        className={'conditions-editor-dialog'}\n        contentClassName={'conditions-editor-dialog-content'}\n        size={'lg'}\n        style={{width: 770}}\n      >\n        <ModalHeader className=\"conditions-editor-dialog-title\" toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody className={'conditions-editor-dialog-main'}>\n          <SimpleEditor\n            onRef={this.setSimpleEditorRef.bind(this)}\n            value={content || ''}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nTermsEditorDialog.propTypes = propTypes;\n\nexport default TermsEditorDialog;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport TermsPreviewWidget from '../../terms-preview-widget';\nimport TermsEditorDialog from '../terms-editor-dialog';\n\nimport '../../../css/terms-conditions-editor.css';\n\nconst propTypes = {\n  isUpdate: PropTypes.bool,\n  oldTermObj: PropTypes.object,\n  addTerm: PropTypes.func,\n  updateTerm: PropTypes.func,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass AddOrUpdateTermDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      versionNumber: '',\n      text: '',\n      isActive: true,\n      errorMsg: '',\n      isConditionsEditorDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    let oldTermObj = this.props.oldTermObj;\n    if (oldTermObj) {\n      this.setState({\n        name: oldTermObj.name,\n        versionNumber: oldTermObj.version_number,\n        text: oldTermObj.text,\n        isActive: !(oldTermObj.activate_time === ''),\n      });\n    }\n  }\n\n  handleNameChange = (e) => {\n    this.setState({name: e.target.value.trim()});\n  }\n\n  handleVersionNumberChange = (e) => {\n    this.setState({versionNumber: e.target.value.trim()});\n  }\n\n  handleTextChange = (e) => {\n    this.setState({text: e.target.value.trim()});\n  }\n\n  setActive = () => {\n    this.setState({isActive: true});\n  }\n\n  setInActive = () => {\n    this.setState({isActive: false});\n  }\n\n  addTerm = () => {\n    let { name, versionNumber, text, isActive } = this.state;\n    if (name === '') {\n      this.setState({errMsg: gettext('Name is required.')});\n      return;\n    }\n    if (versionNumber === '') {\n      this.setState({errMsg: gettext('Version Number is required.')});\n      return;\n    }\n    if (isNaN(versionNumber)) {\n      this.setState({errMsg: gettext('Version Number must be a number.')});\n      return;\n    }\n    if (text === '') {\n      this.setState({errMsg: gettext('Text is required.')});\n      return;\n    }\n    if (this.props.isUpdate) {\n      this.props.updateTerm(name, versionNumber, text, isActive);\n    } else {\n      this.props.addTerm(name, versionNumber, text, isActive);\n    }\n  }\n\n  onContentClick = () => {\n    this.setState({isConditionsEditorDialogShow: !this.state.isConditionsEditorDialogShow});\n  }\n\n  onCloseEditorDialog = () => {\n    this.setState({isConditionsEditorDialogShow: false});\n  }\n\n  onUpdateContent = (content) => {\n    this.setState({ text: content });\n  }\n\n  render() {\n    let title = this.props.isUpdate ? gettext('Update Terms and Conditions') : gettext('Add Terms and Conditions');\n    return (\n      <Fragment>\n        <Modal isOpen={true} toggle={this.props.toggle}>\n          <ModalHeader toggle={this.props.toggle}>{title}</ModalHeader>\n          <ModalBody>\n            <FormGroup>\n              <Label for=\"name\">{gettext('Name')}</Label>\n              <Input id=\"name\" value={this.state.name} onChange={this.handleNameChange}/>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Version Number')}</Label>\n              <Input value={this.state.versionNumber} onChange={this.handleVersionNumberChange}/>\n            </FormGroup>\n            <FormGroup className=\"form-content\">\n              <Label>{gettext('Text')}</Label>\n              <TermsPreviewWidget content={this.state.text} onContentClick={this.onContentClick}/>\n            </FormGroup>\n            <FormGroup tag=\"fieldset\">\n              <Label>{gettext('Activated')}</Label>\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"radio\" checked={this.state.isActive} onChange={this.setActive} />\n                  {' '}{gettext('On')}\n                </Label>\n              </FormGroup>\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"radio\" checked={!this.state.isActive} onChange={this.setInActive} />\n                  {' '}{gettext('Off')}\n                </Label>\n              </FormGroup>\n            </FormGroup>\n            {this.state.errMsg && <Alert color=\"danger\">{this.state.errMsg}</Alert>}\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.addTerm}>{gettext('Submit')}</Button>\n          </ModalFooter>\n        </Modal>\n        {this.state.isConditionsEditorDialogShow && (\n          <TermsEditorDialog\n            content={this.state.text}\n            onCommit={this.onUpdateContent}\n            onCloseEditorDialog={this.onCloseEditorDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nAddOrUpdateTermDialog.propTypes = propTypes;\n\nexport default AddOrUpdateTermDialog;\n","const hrefReg = /\\[.+\\]\\(\\S+\\)|<img src=(\\S+).+\\/>|!\\[\\]\\(\\S+\\)|<\\S+>/g,\n  imageReg1 = /^<img src=\"(\\S+)\" .+\\/>/,\n  imageReg2 = /^!\\[\\]\\((\\S+)\\)/,\n  linkReg1 = /^\\[.+\\]\\(\\S+\\)/,\n  linkReg2 = /^<\\S+>$/;\n\nconst getLinks = (hrefs) => {\n  const hrefObj = {\n    links: [],\n    images: []\n  };\n  hrefs.forEach((href) => {\n    if (href.search(linkReg1) >= 0 || href.search(linkReg2) >= 0) {\n      hrefObj.links.push(href);\n    } else {\n      let imageSrcs = href.match(imageReg1);\n      let imageSrcs1 = href.match(imageReg2);\n      if (imageSrcs) {\n        hrefObj.images.push(imageSrcs[1]);\n      } else if (imageSrcs1) {\n        hrefObj.images.push(imageSrcs1[1]);\n      }\n    }\n  });\n  return hrefObj;\n};\n\n\nconst getPreviewContent = (markdownContent) => {\n  let previewText = '';\n  let newMarkdownContent = markdownContent.replace(hrefReg, '');\n  for (let index = 0; index < newMarkdownContent.length; index++) {\n    if (newMarkdownContent[index] === '#') {\n      continue;\n    } else if (newMarkdownContent[index] === '\\n') {\n      previewText += ' ';\n    } else {\n      previewText += newMarkdownContent[index];\n    }\n    if (previewText.length === 30) {\n      break;\n    }\n  }\n\n  const hrefs = markdownContent.match(hrefReg);\n  if (hrefs) {\n    const { images, links } = getLinks(hrefs);\n    return { previewText, images, links };\n  }\n  return { previewText, images: [], links: [] };\n};\n\n\nexport default getPreviewContent;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport TermsPreviewWidget from '../terms-preview-widget';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string,\n  content: PropTypes.string,\n  onClosePreviewDialog: PropTypes.func.isRequired,\n};\n\nclass TermsPreviewDialog extends React.Component {\n\n  static defaultProps = {\n    title: gettext('Terms'),\n  }\n\n\n  toggle = () => {\n    this.props.onClosePreviewDialog();\n  }\n\n  render() {\n    let { title, content } = this.props;\n    return (\n      <Modal\n        isOpen={true}\n        size={'lg'}\n        style={{width: 600}}\n        wrapClassName={'conditions-perview-wrapper'}\n        toggle={this.toggle}\n      >\n        <ModalHeader toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody>\n          <TermsPreviewWidget content={content} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nTermsPreviewDialog.propTypes = propTypes;\n\nexport default TermsPreviewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport getPreviewContent from '../../../utils/markdown-utils';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TermsPerviewDialog from '../../../components/dialog/terms-preview-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\n\nconst propsTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      itemContent: '...',\n      isOpIconShown: false,\n      isUpdateDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTermsPerviewDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let mdFile = this.props.item.text;\n    processor.process(mdFile).then((result) => {\n      let innerHtml = String(result);\n      this.setState({itemContent: innerHtml});\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.item.text !== this.props.item.text) {\n      let mdFile = nextProps.item.text;\n      processor.process(mdFile).then((result) => {\n        let innerHtml = String(result);\n        this.setState({itemContent: innerHtml});\n      });\n    }\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  toggleUpdateDialog = (e) => {\n    this.setState({isUpdateDialogOpen: !this.state.isUpdateDialogOpen});\n  }\n\n  toggleDeleteDialog = (e) => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTermsContentDialog = (e) => {\n    this.setState({isTermsPerviewDialogOpen: !this.state.isTermsPerviewDialogOpen});\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Update':\n        this.toggleUpdateDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  deleteTerm = () => {\n    this.props.deleteTerm(this.props.item.id);\n    this.toggleDeleteDialog();\n  }\n\n  updateTerm = (name, versionNumber, text, isActive) => {\n    this.props.updateTerm(this.props.item.id, name, versionNumber, text, isActive);\n    this.toggleUpdateDialog();\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Update':\n        translateResult = gettext('Update');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    let { item } = this.props;\n    let { isDeleteDialogOpen, isUpdateDialogOpen, isTermsPerviewDialogOpen } = this.state;\n    let previewContent = getPreviewContent(item.text);\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>{item.name}</td>\n          <td>{item.version_number}</td>\n          <td className=\"ellipsis\">\n            <a href='#' onClick={this.toggleTermsContentDialog}>{previewContent.previewText}</a>\n          </td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.activate_time ? moment(item.activate_time).fromNow() : '--'}</td>\n          <td>\n            {this.state.isOpIconShown &&\n              <OpMenu\n                operations={['Update', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete T&C')}\n              message={deleteDialogMsg}\n              toggleDialog={this.toggleDeleteDialog}\n              executeOperation={this.deleteTerm}\n              confirmBtnText={gettext('Delete')}\n            />\n          </ModalPortal>\n        }\n        {isUpdateDialogOpen &&\n          <ModalPortal>\n            <AddOrUpdateTermDialog\n              updateTerm={this.updateTerm}\n              toggle={this.toggleUpdateDialog}\n              isUpdate={true}\n              oldTermObj={item}\n            />\n          </ModalPortal>\n        }\n        {isTermsPerviewDialogOpen &&\n          <ModalPortal>\n            <TermsPerviewDialog\n              content={item.text}\n              onClosePreviewDialog={this.toggleTermsContentDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = propsTypes;\n\nexport default Item;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Item from './item';\n\nconst propTypes = {\n  loading: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n  errorMsg: PropTypes.string,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No terms and conditions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Version')}</th>\n                <th width=\"25%\">{gettext('Text')}</th>\n                <th width=\"20%\">{gettext('Created')}</th>\n                <th width=\"20%\">{gettext('Activated')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    deleteTerm={this.props.deleteTerm}\n                    updateTerm={this.props.updateTerm}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = propTypes;\n\nexport default Content;\n\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './content';\n\nclass TermsAndConditions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      termList: [],\n      isAddTermDialogOpen: false,\n    };\n  }\n\n  toggleAddTermDialog = () => {\n    this.setState({isAddTermDialogOpen: !this.state.isAddTermDialogOpen});\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListTermsAndConditions().then((res) => {\n      this.setState({\n        termList: res.data.term_and_condition_list,\n        loading: false,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  addTerm = (name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminAddTermAndCondition(name, versionNumber, text, isActive).then(res => {\n      // After adding the terms, you need to refresh the page.\n      location.reload();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateTerm = (termID, name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminUpdateTermAndCondition(termID, name, versionNumber, text, isActive).then(res => {\n      let termList = this.state.termList.map(item => {\n        if (item.id == termID) {\n          return res.data;\n        } else {\n          return item;\n        }\n      });\n      this.setState({termList: termList});\n      toaster.success(gettext('Update succeeded.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteTerm = (termID) => {\n    seafileAPI.sysAdminDeleteTermAndCondition(termID).then(res => {\n      let termList = this.state.termList.filter(item => item.id != termID);\n      this.setState({termList: termList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { termList, isAddTermDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddTermDialog}>{gettext('Add')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Terms and Conditions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={termList}\n                deleteTerm={this.deleteTerm}\n                updateTerm={this.updateTerm}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddTermDialogOpen &&\n        <ModalPortal>\n          <AddOrUpdateTermDialog\n            isUpdate={false}\n            addTerm={this.addTerm}\n            toggle={this.toggleAddTermDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TermsAndConditions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all', text: gettext('All')},\n      {name: 'unhandled', urlPart: 'unhandled', text: gettext('Unhandled')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/virus-files/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"27%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass AllVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listVirusFiles(page, perPage).then((res) => {\n      const data = res.data;\n      this.setState({\n        loading: false,\n        virusFiles: data.virus_file_list,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AllVirusFiles;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  }\n\n  toggleItemSelected = (e) => {\n    this.props.toggleItemSelected(this.props.virusFile, e.target.checked);\n  }\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td className=\"text-center\">\n          <input type=\"checkbox\" checked={virusFile.isSelected} onChange={this.toggleItemSelected} />\n        </td>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage,\n      isAllItemsSelected\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"text-center\">\n                  <input type=\"checkbox\" checked={isAllItemsSelected} onChange={this.props.toggleAllSelected} />\n                </th>\n                <th width=\"24%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                    toggleItemSelected={this.props.toggleItemSelected}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass UnhandledVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n\n      isAllItemsSelected: false,\n      selectedItems: [],\n\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    const hasHandled = false;\n    seafileAPI.listVirusFiles(page, perPage, hasHandled).then((res) => {\n      const data = res.data;\n      const items = data.virus_file_list.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        loading: false,\n        virusFiles: items,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  toggleAllSelected = () => {\n    this.setState((prevState) => ({\n      isAllItemsSelected: !prevState.isAllItemsSelected,\n      virusFiles: this.state.virusFiles.map((item) => {\n        item.isSelected = !prevState.isAllItemsSelected;\n        return item;\n      })\n    }));\n  }\n\n  toggleItemSelected = (targetItem, isSelected) => {\n    this.setState({\n      virusFiles: this.state.virusFiles.map((item) => {\n        if (item === targetItem) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    }, () => {\n      this.setState({\n        isAllItemsSelected: !this.state.virusFiles.some(item => !item.isSelected)\n      });\n    });\n  }\n\n  handleSelectedItems = (op) => {\n    // op: 'delete-virus', 'ignore-virus'\n    const virusIDs = this.state.virusFiles\n      .filter(item => {\n        if (op == 'delete-virus') {\n          return item.isSelected && !item.has_deleted;\n        } else {\n          return item.isSelected && !item.has_ignored;\n        }\n      })\n      .map(item => item.virus_id);\n    seafileAPI.batchProcessVirusFiles(virusIDs, op).then((res) => {\n      let fileList = this.state.virusFiles;\n      res.data.success.forEach(item => {\n        let file = fileList.find(file => file.virus_id == item.virus_id);\n        if (op == 'delete-virus') {\n          file.has_deleted = true;\n        } else {\n          file.has_ignored = true;\n        }\n      });\n      this.setState({\n        virusFiles: fileList\n      });\n\n      res.data.failed.forEach(item => {\n        const file = fileList.find(file => file.virus_id == item.virus_id);\n        let errMsg = op == 'delete-virus' ?\n          gettext('Failed to delete %(virus_file) from library %(library): %(error_msg)') :\n          gettext('Failed to ignore %(virus_file) from library %(library): %(error_msg)');\n        errMsg = errMsg.replace('%(virus_file)', file.file_path)\n          .replace('%(library)', file.repo_name)\n          .replace('%(error_msg)', item.error_msg);\n        toaster.danger(errMsg);\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  deleteSelectedItems = () => {\n    const op = 'delete-virus';\n    this.handleSelectedItems(op);\n  }\n\n  ignoreSelectedItems = () => {\n    const op = 'ignore-virus';\n    this.handleSelectedItems(op);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.virusFiles.some(item => item.isSelected) ? (\n          <MainPanelTopbar {...this.props}>\n            <Fragment>\n              <Button onClick={this.deleteSelectedItems} className=\"operation-item\">{gettext('Delete')}</Button>\n              <Button onClick={this.ignoreSelectedItems} className=\"operation-item\">{gettext('Ignore')}</Button>\n            </Fragment>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar {...this.props} />\n        }\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"unhandled\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n                isAllItemsSelected={this.state.isAllItemsSelected}\n                toggleAllSelected={this.toggleAllSelected}\n                toggleItemSelected={this.toggleItemSelected}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UnhandledVirusFiles;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass LogsNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'adminOperationLogs', urlPart:'admin-logs/operation', text: gettext('Admin Operation Logs')},\n      {name: 'adminLoginLogs', urlPart:'admin-logs/login', text: gettext('Admin Login Logs')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nLogsNav.propTypes = propTypes;\n\nexport default LogsNav;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, enableSysAdminViewRepo, isPro } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin operation logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Operation')}</th>\n                <th width=\"50%\">{gettext('Detail')}</th>\n                <th width=\"15%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  getOperationText = (operationType) => {\n    switch (operationType) {\n      case 'repo_create': return gettext('Create Library');\n      case 'repo_delete': return gettext('Delete Library');\n      case 'repo_transfer': return gettext('Transfer Library');\n      case 'group_create': return gettext('Create Group');\n      case 'group_transfer': return gettext('Transfer Group');\n      case 'group_delete': return gettext('Delete Group');\n      case 'user_add': return gettext('Add User');\n      case 'user_delete': return gettext('Delete User');\n      default: return '';\n    }\n  }\n\n  getOperationDetail = (item) => {\n    let detail = item.detail;\n\n    let ownerPageUrl = '';\n    if (detail.owner) {\n      ownerPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.owner) + '/';\n    }\n    let userPageUrl = '';\n    if (detail.email) {\n      userPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.email) + '/';\n    }\n    let detailText = '';\n    let repoPageUrl = '';\n    let groupPageUrl = '';\n    if (item.operation == 'repo_create' || item.operation == 'repo_delete' || item.operation == 'repo_transfer') {\n      repoPageUrl = siteRoot + 'sys/libraries/' + detail.id + '/' + encodeURIComponent(detail.name) + '/';\n    }\n    if (item.operation == 'group_create' || item.operation == 'group_delete' || item.operation == 'group_transfer') {\n      groupPageUrl = siteRoot + 'sys/groups/' + detail.id + '/libraries/';\n    }\n\n    switch (item.operation) {\n      case 'repo_create':\n        detailText = gettext('Created library {library_name} with {owner} as its owner')\n          .replace('{owner}', '<a href=\"' + ownerPageUrl + '\">' + detail.owner + '</a>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'repo_delete':\n        detailText = gettext('Deleted library {library_name}')\n          .replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'repo_transfer':\n        detailText = gettext('Transferred library {library_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'group_create':\n        detailText = gettext('Created group {group_name}')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_transfer':\n        detailText = gettext('Transferred group {group_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_delete':\n        detailText = gettext('Deleted group {group_name}')\n          .replace('{group_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'user_add':\n        detailText = gettext('Added user {user}')\n          .replace('{user}', '<a href=\"' + userPageUrl + '\">' + detail.email+ '</a>');\n        return detailText;\n\n      case 'user_delete':\n        detailText = gettext('Deleted user {user}')\n          .replace('{user}', '<span class=\"font-weight-bold\">' + detail.email+ '</span>');\n        return detailText;\n\n      default: return '';\n    }\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{this.getOperationText(item.operation)}</td>\n        <td>\n          <span dangerouslySetInnerHTML={{__html: this.getOperationDetail(item)}}></span>\n        </td>\n        <td>{moment(item.datetime).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass AdminOperationLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminOperationLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminOperationLogs;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.login_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass AdminLoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminLoginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminLoginLogs;\n","import React, { Component, Fragment } from 'react';\nimport Account from '../../components/common/account';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../../components/toast';\nimport moment from 'moment';\nimport MainPanelTopbar from './main-panel-topbar';\n\nclass AbuseReports extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      abuseReportList: [],\n    };\n  }\n\n  listAbuseReports = () => {\n    seafileAPI.sysAdminListAbuseReports().then((res) => {\n      this.setState({\n        abuseReportList: res.data.abuse_report_list,\n      });\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  updateAbuseReport = (handled, abuseReportId) => {\n    seafileAPI.sysAdminUpdateAbuseReport(handled, abuseReportId).then((res) => {\n      const abuseReportList = this.state.abuseReportList.map((item, index) => {\n        if (item.id === abuseReportId) {\n          item.handled = res.data.handled;\n        }\n        return item;\n      });\n      this.setState({\n        abuseReportList: abuseReportList,\n      });\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAbuseReports();\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    const AbuseReportList = this.state.abuseReportList.map((item, index) => {\n      const handled = (!item.handled).toString();\n      const abuseReportId = item.id;\n      const fileUrl = siteRoot + 'lib/' + item.repo_id + '/file' + item.file_path;\n      return (\n        <tr key={index}>\n          <td>{item.repo_name}</td>\n          <td><a href={fileUrl} target=\"_blank\">{item.file_path}</a></td>\n          <td>{item.reporter}</td>\n          <td>{item.abuse_type}</td>\n          <td>{item.description}</td>\n          <td>{moment(item.time).format('YYYY-MM-DD')}</td>\n          <td><p onClick={this.updateAbuseReport.bind(this, handled, abuseReportId)}\n            className=\"op-target ellipsis ellipsis-op-target cursor-pointer\"\n          >{gettext(item.handled.toString())}</p></td>\n        </tr>\n      );\n    });\n\n    return (\n      <Fragment>\n        <MainPanelTopbar {...this.props} />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Abuse Reports')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table className={`table-hover`}>\n                <thead>\n                    <tr>\n                      <th width=\"20%\">{gettext('Library')}</th>\n                      <th width=\"20%\">{gettext('File')}</th>\n                      <th width=\"10%\">{gettext('Reporter')}</th>\n                      <th width=\"15%\">{gettext('Abuse Type')}</th>\n                      <th width=\"20%\">{gettext('Description')}</th>\n                      <th width=\"10%\">{gettext('Time')}</th>\n                      <th width=\"5%\">{gettext('Handled')}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                  {AbuseReportList}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AbuseReports;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { Router } from '@gatsbyjs/reach-router';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nimport SidePanel from './side-panel';\nimport MainPanel from './main-panel';\n\nimport Info from './info';\n\nimport StatisticFile from './statistic/statistic-file';\nimport StatisticStorage from './statistic/statistic-storage';\nimport StatisticTraffic from './statistic/statistic-traffic';\nimport StatisticUsers from './statistic/statistic-users';\nimport StatisticReport from './statistic/statistic-reports';\n\nimport DesktopDevices from './devices/desktop-devices';\nimport MobileDevices from './devices/mobile-devices';\nimport DeviceErrors from './devices/devices-errors';\n\nimport Users from './users/users';\nimport AdminUsers from './users/admin-users';\nimport LDAPImportedUsers from './users/ldap-imported-users';\nimport LDAPUsers from './users/ldap-users';\nimport SearchUsers from './users/search-users';\nimport User from './users/user-info';\nimport UserOwnedRepos from './users/user-repos';\nimport UserSharedRepos from './users/user-shared-repos';\nimport UserLinks from './users/user-links';\nimport UserGroups from './users/user-groups';\n\nimport AllRepos from './repos/all-repos';\nimport SystemRepo from './repos/system-repo';\nimport TrashRepos from './repos/trash-repos';\nimport SearchRepos from './repos/search-repos';\nimport DirView from './repos/dir-view';\n\nimport Groups from './groups/groups';\nimport SearchGroups from './groups/search-groups';\nimport GroupRepos from './groups/group-repos';\nimport GroupMembers from './groups/group-members';\n\nimport Departments from './departments/departments';\nimport DepartmentList from './departments/department-list';\nimport SubDepartments from './departments/sub-departments';\nimport DepartmentMembers from './departments/department-members';\nimport DepartmentLibraries from './departments/department-libraries';\n\nimport ShareLinks from './links/share-links';\nimport UploadLinks from './links/upload-links';\n\nimport Orgs from './orgs/orgs';\nimport SearchOrgs from './orgs/search-orgs';\nimport OrgInfo from './orgs/org-info';\nimport OrgUsers from './orgs/org-users';\nimport OrgGroups from './orgs/org-groups';\nimport OrgRepos from './orgs/org-repos';\n\nimport Institutions from './institutions/institutions';\nimport InstitutionInfo from './institutions/institution-info';\nimport InstitutionUsers from './institutions/institution-users';\nimport InstitutionAdmins from './institutions/institution-admins';\n\nimport LoginLogs from './logs-page/login-logs';\nimport FileAccessLogs from './logs-page/file-access-logs';\nimport FileUpdateLogs from './logs-page/file-update-logs';\nimport SharePermissionLogs from './logs-page/share-permission-logs';\n\nimport WebSettings from './web-settings/web-settings';\nimport Notifications from './notifications/notifications';\nimport FileScanRecords from './file-scan-records';\nimport WorkWeixinDepartments from './work-weixin-departments';\nimport DingtalkDepartments from './dingtalk-departments';\nimport Invitations from './invitations/invitations';\nimport TermsAndConditions from './terms-and-conditions/terms-and-conditions';\n\nimport AllVirusFiles from './virus-scan/all-virus-files';\nimport UnhandledVirusFiles from './virus-scan/unhandled-virus-files';\n\nimport AdminOperationLogs from './admin-logs/operation-logs';\nimport AdminLoginLogs from './admin-logs/login-logs';\n\nimport AbuseReports from './abuse-reports';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\n\nclass SysAdmin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidePanelClosed: false,\n      currentTab: 'file-scan'\n    };\n  }\n\n  componentDidMount() {\n    let href = window.location.href.split('/');\n    let currentTab = href[href.length - 2];\n\n    const pageList = [\n      {\n        tab: 'devices',\n        urlPartList: ['desktop-devices', 'mobile-devices', 'device-errors']\n      },\n      {\n        tab: 'libraries',\n        urlPartList: ['all-libraries', 'search-libraries', 'system-library', 'trash-libraries', 'libraries/']\n      },\n      {\n        tab: 'statistic',\n        urlPartList: ['statistics/file', 'statistics/storage', 'statistics/user', 'statistics/traffic', 'statistics/reports']\n      },\n      {\n        tab: 'users',\n        urlPartList: ['users/', 'search-users/']\n      },\n      {\n        tab: 'groups',\n        urlPartList: ['groups/', 'search-groups/']\n      },\n      {\n        tab: 'organizations',\n        urlPartList: ['organizations/', 'search-organizations/']\n      },\n      {\n        tab: 'links',\n        urlPartList: ['share-links/', 'upload-links/']\n      },\n      {\n        tab: 'institutions',\n        urlPartList: ['institutions/']\n      },\n      {\n        tab: 'termsandconditions',\n        urlPartList: ['terms-and-conditions/']\n      },\n      {\n        tab: 'departments',\n        urlPartList: ['departments/']\n      },\n      {\n        tab: 'logs',\n        urlPartList: ['logs/']\n      },\n      {\n        tab: 'virus-files',\n        urlPartList: ['virus-files/']\n      },\n      {\n        tab: 'adminLogs',\n        urlPartList: ['admin-logs/']\n      }\n    ];\n    const tmpTab = this.getCurrentTabForPageList(pageList);\n    currentTab = tmpTab ? tmpTab : currentTab;\n\n    this.setState({currentTab: currentTab});\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  getCurrentTabForPageList = (pageList) => {\n    let urlPartList, tab;\n    const urlBase = `${siteRoot}sys/`;\n    for (let i = 0, len = pageList.length; i < len; i++) {\n      urlPartList = pageList[i].urlPartList;\n      tab = pageList[i].tab;\n      for (let j = 0, jlen = urlPartList.length; j < jlen; j++) {\n        if (location.href.indexOf(`${urlBase}${urlPartList[j]}`) != -1) {\n          return tab;\n        }\n      }\n    }\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({isSidePanelClosed: !this.state.isSidePanelClosed});\n  }\n\n  tabItemClick = (param) => {\n    this.setState({currentTab: param});\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    const { currentTab, isSidePanelClosed } = this.state;\n    const commonProps = {\n      toggleSidePanel: this.toggleSidePanel\n    };\n\n    return (\n      <div id=\"main\">\n        <SidePanel\n          isSidePanelClosed={isSidePanelClosed}\n          onCloseSidePanel={this.onCloseSidePanel}\n          currentTab={currentTab}\n          tabItemClick={this.tabItemClick}\n        />\n        <MainPanel>\n          <Router className=\"reach-router\">\n            <Info path={siteRoot + 'sys/info'} {...commonProps} />\n            <StatisticFile path={siteRoot + 'sys/statistics/file'} {...commonProps} />\n            <StatisticStorage path={siteRoot + 'sys/statistics/storage'} {...commonProps} />\n            <StatisticUsers path={siteRoot + 'sys/statistics/user'} {...commonProps} />\n            <StatisticTraffic path={siteRoot + 'sys/statistics/traffic'} {...commonProps} />\n            <StatisticReport path={siteRoot + 'sys/statistics/reports'} {...commonProps} />\n            <DesktopDevices path={siteRoot + 'sys/desktop-devices'} {...commonProps} />\n            <MobileDevices path={siteRoot + 'sys/mobile-devices'} {...commonProps} />\n            <DeviceErrors path={siteRoot + 'sys/device-errors'} {...commonProps} />\n            <AllRepos path={siteRoot + 'sys/all-libraries'} {...commonProps} />\n            <SystemRepo path={siteRoot + 'sys/system-library'} {...commonProps} />\n            <TrashRepos path={siteRoot + 'sys/trash-libraries'} {...commonProps} />\n            <SearchRepos path={siteRoot + 'sys/search-libraries'} {...commonProps} />\n            <DirView path={siteRoot + 'sys/libraries/:repoID/*'} {...commonProps} />\n            <WebSettings path={siteRoot + 'sys/web-settings'} {...commonProps} />\n            <Notifications path={siteRoot + 'sys/notifications'} {...commonProps} />\n            <Groups path={siteRoot + 'sys/groups'} {...commonProps} />\n            <SearchGroups path={siteRoot + 'sys/search-groups'} {...commonProps} />\n            <GroupRepos path={siteRoot + 'sys/groups/:groupID/libraries'} {...commonProps} />\n            <GroupMembers path={siteRoot + 'sys/groups/:groupID/members'} {...commonProps} />\n            <Departments path={siteRoot + 'sys/departments'}>\n              <DepartmentList path='/' {...commonProps} />\n              <SubDepartments path='/:groupID' {...commonProps} />\n              <DepartmentMembers path='/:groupID/members' {...commonProps} />\n              <DepartmentLibraries path='/:groupID/libraries' {...commonProps} />\n            </Departments>\n            <ShareLinks path={siteRoot + 'sys/share-links'} {...commonProps} />\n            <UploadLinks path={siteRoot + 'sys/upload-links'} {...commonProps} />\n            <Orgs path={siteRoot + 'sys/organizations'} {...commonProps} />\n            <SearchOrgs path={siteRoot + 'sys/search-organizations'} {...commonProps} />\n            <OrgInfo path={siteRoot + 'sys/organizations/:orgID/info'} {...commonProps} />\n            <OrgUsers path={siteRoot + 'sys/organizations/:orgID/users'} {...commonProps} />\n            <OrgGroups path={siteRoot + 'sys/organizations/:orgID/groups'} {...commonProps} />\n            <OrgRepos path={siteRoot + 'sys/organizations/:orgID/libraries'} {...commonProps} />\n            <Institutions path={siteRoot + 'sys/institutions'} {...commonProps} />\n            <InstitutionInfo path={siteRoot + 'sys/institutions/:institutionID/info'} {...commonProps} />\n            <InstitutionUsers path={siteRoot + 'sys/institutions/:institutionID/members'} {...commonProps} />\n            <InstitutionAdmins path={siteRoot + 'sys/institutions/:institutionID/admins'} {...commonProps} />\n            <LoginLogs path={siteRoot + 'sys/logs/login'} {...commonProps} />\n            <FileAccessLogs path={siteRoot + 'sys/logs/file-access'} {...commonProps} />\n            <FileUpdateLogs path={siteRoot + 'sys/logs/file-update'} {...commonProps} />\n            <SharePermissionLogs path={siteRoot + 'sys/logs/share-permission'} {...commonProps} />\n            <AdminOperationLogs path={siteRoot + 'sys/admin-logs/operation'} {...commonProps} />\n            <AdminLoginLogs path={siteRoot + 'sys/admin-logs/login'} {...commonProps} />\n\n            <Users path={siteRoot + 'sys/users'} {...commonProps} />\n            <AdminUsers path={siteRoot + 'sys/users/admins'} {...commonProps} />\n            <LDAPImportedUsers path={siteRoot + 'sys/users/ldap-imported'} {...commonProps} />\n            <LDAPUsers path={siteRoot + 'sys/users/ldap'} {...commonProps} />\n            <SearchUsers path={siteRoot + 'sys/search-users'} {...commonProps} />\n            <User path={siteRoot + 'sys/users/:email'} {...commonProps} />\n            <UserOwnedRepos path={siteRoot + 'sys/users/:email/owned-libraries'} {...commonProps} />\n            <UserSharedRepos path={siteRoot + 'sys/users/:email/shared-libraries'} {...commonProps} />\n            <UserLinks path={siteRoot + 'sys/users/:email/shared-links'} {...commonProps} />\n            <UserGroups path={siteRoot + 'sys/users/:email/groups'} {...commonProps} />\n\n            <Invitations path={siteRoot + 'sys/invitations'} {...commonProps} />\n            <TermsAndConditions path={siteRoot + 'sys/terms-and-conditions/'} {...commonProps} />\n\n            <AllVirusFiles path={siteRoot + 'sys/virus-files/all'} {...commonProps} />\n            <UnhandledVirusFiles path={siteRoot + 'sys/virus-files/unhandled'} {...commonProps} />\n\n            <FileScanRecords path={siteRoot + 'sys/file-scan-records'} {...commonProps} />\n            <WorkWeixinDepartments path={siteRoot + 'sys/work-weixin'} {...commonProps} />\n            <DingtalkDepartments path={siteRoot + 'sys/dingtalk'} {...commonProps} />\n            <AbuseReports path={siteRoot + 'sys/abuse-reports'} {...commonProps} />\n          </Router>\n        </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SysAdmin />, document.getElementById('wrapper'));\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","\n;(function (name, root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory()\n  }\n  /* istanbul ignore next */\n  else if (typeof define === 'function' && define.amd) {\n    define(factory)\n  }\n  else {\n    root[name] = factory()\n  }\n}('dcopy', this, function () {\n  /**\n   * Deep copy objects and arrays\n   *\n   * @param {Object/Array} target\n   * @return {Object/Array} copy\n   * @api public\n   */\n\n  return function (target) {\n    if (/number|string|boolean/.test(typeof target)) {\n      return target\n    }\n    if (target instanceof Date) {\n      return new Date(target.getTime())\n    }\n\n    var copy = (target instanceof Array) ? [] : {}\n    walk(target, copy)\n    return copy\n\n    function walk (target, copy) {\n      for (var key in target) {\n        var obj = target[key]\n        if (obj instanceof Date) {\n          var value = new Date(obj.getTime())\n          add(copy, key, value)\n        }\n        else if (obj instanceof Function) {\n          var value = obj\n          add(copy, key, value)\n        }\n        else if (obj instanceof Array) {\n          var value = []\n          var last = add(copy, key, value)\n          walk(obj, last)\n        }\n        else if (obj instanceof Object) {\n          var value = {}\n          var last = add(copy, key, value)\n          walk(obj, last)\n        }\n        else {\n          var value = obj\n          add(copy, key, value)\n        }\n      }\n    }\n  }\n\n  /**\n   * Adds a value to the copy object based on its type\n   *\n   * @api private\n   */\n\n  function add (copy, key, value) {\n    if (copy instanceof Array) {\n      copy.push(value)\n      return copy[copy.length - 1]\n    }\n    else if (copy instanceof Object) {\n      copy[key] = value\n      return copy[key]\n    }\n  }\n}))\n","/* MIT license */\nvar cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nvar reverseKeywords = {};\nfor (var key in cssKeywords) {\n\tif (cssKeywords.hasOwnProperty(key)) {\n\t\treverseKeywords[cssKeywords[key]] = key;\n\t}\n}\n\nvar convert = module.exports = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\n// hide .channels and .labels properties\nfor (var model in convert) {\n\tif (convert.hasOwnProperty(model)) {\n\t\tif (!('channels' in convert[model])) {\n\t\t\tthrow new Error('missing channels property: ' + model);\n\t\t}\n\n\t\tif (!('labels' in convert[model])) {\n\t\t\tthrow new Error('missing channel labels property: ' + model);\n\t\t}\n\n\t\tif (convert[model].labels.length !== convert[model].channels) {\n\t\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t\t}\n\n\t\tvar channels = convert[model].channels;\n\t\tvar labels = convert[model].labels;\n\t\tdelete convert[model].channels;\n\t\tdelete convert[model].labels;\n\t\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\t\tObject.defineProperty(convert[model], 'labels', {value: labels});\n\t}\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar l;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tvar rdif;\n\tvar gdif;\n\tvar bdif;\n\tvar h;\n\tvar s;\n\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar v = Math.max(r, g, b);\n\tvar diff = v - Math.min(r, g, b);\n\tvar diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = s = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar h = convert.rgb.hsl(rgb)[0];\n\tvar w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar c;\n\tvar m;\n\tvar y;\n\tvar k;\n\n\tk = Math.min(1 - r, 1 - g, 1 - b);\n\tc = (1 - r - k) / (1 - k) || 0;\n\tm = (1 - g - k) / (1 - k) || 0;\n\ty = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\nfunction comparativeDistance(x, y) {\n\treturn (\n\t\tMath.pow(x[0] - y[0], 2) +\n\t\tMath.pow(x[1] - y[1], 2) +\n\t\tMath.pow(x[2] - y[2], 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tvar reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tvar currentClosestDistance = Infinity;\n\tvar currentClosestKeyword;\n\n\tfor (var keyword in cssKeywords) {\n\t\tif (cssKeywords.hasOwnProperty(keyword)) {\n\t\t\tvar value = cssKeywords[keyword];\n\n\t\t\t// Compute comparative distance\n\t\t\tvar distance = comparativeDistance(rgb, value);\n\n\t\t\t// Check if its less, if so set as closest\n\t\t\tif (distance < currentClosestDistance) {\n\t\t\t\tcurrentClosestDistance = distance;\n\t\t\t\tcurrentClosestKeyword = keyword;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tvar y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tvar z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tvar xyz = convert.rgb.xyz(rgb);\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tvar h = hsl[0] / 360;\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar t1;\n\tvar t2;\n\tvar t3;\n\tvar rgb;\n\tvar val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tt1 = 2 * l - t2;\n\n\trgb = [0, 0, 0];\n\tfor (var i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tvar h = hsl[0];\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar smin = s;\n\tvar lmin = Math.max(l, 0.01);\n\tvar sv;\n\tvar v;\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tv = (l + s) / 2;\n\tsv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tvar h = hsv[0] / 60;\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar hi = Math.floor(h) % 6;\n\n\tvar f = h - Math.floor(h);\n\tvar p = 255 * v * (1 - s);\n\tvar q = 255 * v * (1 - (s * f));\n\tvar t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tvar h = hsv[0];\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar vmin = Math.max(v, 0.01);\n\tvar lmin;\n\tvar sl;\n\tvar l;\n\n\tl = (2 - s) * v;\n\tlmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tvar h = hwb[0] / 360;\n\tvar wh = hwb[1] / 100;\n\tvar bl = hwb[2] / 100;\n\tvar ratio = wh + bl;\n\tvar i;\n\tvar v;\n\tvar f;\n\tvar n;\n\n\t// wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\ti = Math.floor(6 * h);\n\tv = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tn = wh + f * (v - wh); // linear interpolation\n\n\tvar r;\n\tvar g;\n\tvar b;\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v; g = n; b = wh; break;\n\t\tcase 1: r = n; g = v; b = wh; break;\n\t\tcase 2: r = wh; g = v; b = n; break;\n\t\tcase 3: r = wh; g = n; b = v; break;\n\t\tcase 4: r = n; g = wh; b = v; break;\n\t\tcase 5: r = v; g = wh; b = n; break;\n\t}\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tvar c = cmyk[0] / 100;\n\tvar m = cmyk[1] / 100;\n\tvar y = cmyk[2] / 100;\n\tvar k = cmyk[3] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = 1 - Math.min(1, c * (1 - k) + k);\n\tg = 1 - Math.min(1, m * (1 - k) + k);\n\tb = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tvar x = xyz[0] / 100;\n\tvar y = xyz[1] / 100;\n\tvar z = xyz[2] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar x;\n\tvar y;\n\tvar z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tvar y2 = Math.pow(y, 3);\n\tvar x2 = Math.pow(x, 3);\n\tvar z2 = Math.pow(z, 3);\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar hr;\n\tvar h;\n\tvar c;\n\n\thr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tc = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tvar l = lch[0];\n\tvar c = lch[1];\n\tvar h = lch[2];\n\tvar a;\n\tvar b;\n\tvar hr;\n\n\thr = h / 360 * 2 * Math.PI;\n\ta = c * Math.cos(hr);\n\tb = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\tvar value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tvar ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\n\t// we use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tvar ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tvar color = args % 10;\n\n\t// handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tvar mult = (~~(args > 50) + 1) * 0.5;\n\tvar r = ((color & 1) * mult) * 255;\n\tvar g = (((color >> 1) & 1) * mult) * 255;\n\tvar b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// handle greyscale\n\tif (args >= 232) {\n\t\tvar c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tvar rem;\n\tvar r = Math.floor(args / 36) / 5 * 255;\n\tvar g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tvar b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tvar integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tvar match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tvar colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(function (char) {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tvar integer = parseInt(colorString, 16);\n\tvar r = (integer >> 16) & 0xFF;\n\tvar g = (integer >> 8) & 0xFF;\n\tvar b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar max = Math.max(Math.max(r, g), b);\n\tvar min = Math.min(Math.min(r, g), b);\n\tvar chroma = (max - min);\n\tvar grayscale;\n\tvar hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma + 4;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar c = 1;\n\tvar f = 0;\n\n\tif (l < 0.5) {\n\t\tc = 2.0 * s * l;\n\t} else {\n\t\tc = 2.0 * s * (1.0 - l);\n\t}\n\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\n\tvar c = s * v;\n\tvar f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tvar h = hcg[0] / 360;\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tvar pure = [0, 0, 0];\n\tvar hi = (h % 1) * 6;\n\tvar v = hi % 1;\n\tvar w = 1 - v;\n\tvar mg = 0;\n\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar v = c + g * (1.0 - c);\n\tvar f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar l = g * (1.0 - c) + 0.5 * c;\n\tvar s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\tvar v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tvar w = hwb[1] / 100;\n\tvar b = hwb[2] / 100;\n\tvar v = 1 - b;\n\tvar c = v - w;\n\tvar g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tvar val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tvar integer = (val << 16) + (val << 8) + val;\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tvar val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport '../../css/commit-details.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  commitID: PropTypes.string.isRequired,\n  commitTime: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass CommitDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    const {repoID, commitID} = this.props;\n    seafileAPI.getCommitDetails(repoID, commitID).then((res) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        commitDetails: res.data\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  render() {\n    const { toggleDialog, commitTime} = this.props;\n    return (\n      <Modal isOpen={true} centered={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Modification Details')}</ModalHeader>\n        <ModalBody>\n          <p className=\"small\">{moment(this.props.commitTime).format('YYYY-MM-DD HH:mm:ss')}</p>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  renderDetails = (data) => {\n    const detailsData = [\n      {type: 'new', title: gettext('New files')},\n      {type: 'removed', title: gettext('Deleted files')},\n      {type: 'renamed', title: gettext('Renamed or Moved files')},\n      {type: 'modified', title: gettext('Modified files')},\n      {type: 'newdir', title: gettext('New directories')},\n      {type: 'deldir', title: gettext('Deleted directories')}\n    ];\n\n    let showDesc = true;\n    for (let i = 0, len = detailsData.length; i < len; i++) {\n      if (data[detailsData[i].type].length) {\n        showDesc = false;\n        break;\n      }\n    }\n    if (showDesc) {\n      return <p>{data.cmt_desc}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        {detailsData.map((item, index) => {\n          if (!data[item.type].length) {\n            return;\n          }\n          return (\n            <React.Fragment key={index}>\n              <h6>{item.title}</h6>\n              <ul>\n                {\n                  data[item.type].map((item, index) => {\n                    return <li key={index} dangerouslySetInnerHTML={{__html: item}} className=\"commit-detail-item\"></li>;\n                  })\n                }\n              </ul>\n            </React.Fragment>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const {isLoading, errorMsg, commitDetails} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return this.renderDetails(commitDetails);\n  }\n}\n\nCommitDetails.propTypes = propTypes;\n\nexport default CommitDetails;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Chart\", {\n  enumerable: true,\n  get: function get() {\n    return _chart[\"default\"];\n  }\n});\nexports.defaults = exports.Scatter = exports.Bubble = exports.Polar = exports.Radar = exports.HorizontalBar = exports.Bar = exports.Line = exports.Pie = exports.Doughnut = exports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _chart = _interopRequireDefault(require(\"chart.js\"));\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _keyBy = _interopRequireDefault(require(\"lodash/keyBy\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar NODE_ENV = typeof process !== 'undefined' && process.env && process.env.NODE_ENV;\n\nvar ChartComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(ChartComponent, _React$Component);\n\n  var _super = _createSuper(ChartComponent);\n\n  function ChartComponent() {\n    var _this;\n\n    _classCallCheck(this, ChartComponent);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnClick\", function (event) {\n      var instance = _this.chartInstance;\n      var _this$props = _this.props,\n          getDatasetAtEvent = _this$props.getDatasetAtEvent,\n          getElementAtEvent = _this$props.getElementAtEvent,\n          getElementsAtEvent = _this$props.getElementsAtEvent,\n          onElementsClick = _this$props.onElementsClick;\n      getDatasetAtEvent && getDatasetAtEvent(instance.getDatasetAtEvent(event), event);\n      getElementAtEvent && getElementAtEvent(instance.getElementAtEvent(event), event);\n      getElementsAtEvent && getElementsAtEvent(instance.getElementsAtEvent(event), event);\n      onElementsClick && onElementsClick(instance.getElementsAtEvent(event), event); // Backward compatibility\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", function (element) {\n      _this.element = element;\n    });\n\n    _this.chartInstance = undefined;\n    return _this;\n  }\n\n  _createClass(ChartComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.renderChart();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.redraw) {\n        this.destroyChart();\n        this.renderChart();\n        return;\n      }\n\n      this.updateChart();\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var _this$props2 = this.props,\n          redraw = _this$props2.redraw,\n          type = _this$props2.type,\n          options = _this$props2.options,\n          plugins = _this$props2.plugins,\n          legend = _this$props2.legend,\n          height = _this$props2.height,\n          width = _this$props2.width;\n\n      if (nextProps.redraw === true) {\n        return true;\n      }\n\n      if (height !== nextProps.height || width !== nextProps.width) {\n        return true;\n      }\n\n      if (type !== nextProps.type) {\n        return true;\n      }\n\n      if (!(0, _isEqual[\"default\"])(legend, nextProps.legend)) {\n        return true;\n      }\n\n      if (!(0, _isEqual[\"default\"])(options, nextProps.options)) {\n        return true;\n      }\n\n      var nextData = this.transformDataProp(nextProps);\n\n      if (!(0, _isEqual[\"default\"])(this.shadowDataProp, nextData)) {\n        return true;\n      }\n\n      return !(0, _isEqual[\"default\"])(plugins, nextProps.plugins);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyChart();\n    }\n  }, {\n    key: \"transformDataProp\",\n    value: function transformDataProp(props) {\n      var data = props.data;\n\n      if (typeof data == 'function') {\n        var node = this.element;\n        return data(node);\n      } else {\n        return data;\n      }\n    } // Chart.js directly mutates the data.dataset objects by adding _meta proprerty\n    // this makes impossible to compare the current and next data changes\n    // therefore we memoize the data prop while sending a fake to Chart.js for mutation.\n    // see https://github.com/chartjs/Chart.js/blob/master/src/core/core.controller.js#L615-L617\n\n  }, {\n    key: \"memoizeDataProps\",\n    value: function memoizeDataProps() {\n      if (!this.props.data) {\n        return;\n      }\n\n      var data = this.transformDataProp(this.props);\n      this.shadowDataProp = _objectSpread(_objectSpread({}, data), {}, {\n        datasets: data.datasets && data.datasets.map(function (set) {\n          return _objectSpread({}, set);\n        })\n      });\n      this.saveCurrentDatasets(); // to remove the dataset metadata from this chart when the chart is destroyed\n\n      return data;\n    }\n  }, {\n    key: \"checkDatasets\",\n    value: function checkDatasets(datasets) {\n      var isDev = NODE_ENV !== 'production' && NODE_ENV !== 'prod';\n      var usingCustomKeyProvider = this.props.datasetKeyProvider !== ChartComponent.getLabelAsKey;\n      var multipleDatasets = datasets.length > 1;\n\n      if (isDev && multipleDatasets && !usingCustomKeyProvider) {\n        var shouldWarn = false;\n        datasets.forEach(function (dataset) {\n          if (!dataset.label) {\n            shouldWarn = true;\n          }\n        });\n\n        if (shouldWarn) {\n          console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the \"label\" property on each dataset is used. Alternatively, you may provide a \"datasetKeyProvider\" as a prop that returns a unique key.');\n        }\n      }\n    }\n  }, {\n    key: \"getCurrentDatasets\",\n    value: function getCurrentDatasets() {\n      return this.chartInstance && this.chartInstance.config.data && this.chartInstance.config.data.datasets || [];\n    }\n  }, {\n    key: \"saveCurrentDatasets\",\n    value: function saveCurrentDatasets() {\n      var _this2 = this;\n\n      this.datasets = this.datasets || {};\n      var currentDatasets = this.getCurrentDatasets();\n      currentDatasets.forEach(function (d) {\n        _this2.datasets[_this2.props.datasetKeyProvider(d)] = d;\n      });\n    }\n  }, {\n    key: \"updateChart\",\n    value: function updateChart() {\n      var _this3 = this;\n\n      var options = this.props.options;\n      var data = this.memoizeDataProps(this.props);\n      if (!this.chartInstance) return;\n\n      if (options) {\n        this.chartInstance.options = _chart[\"default\"].helpers.configMerge(this.chartInstance.options, options);\n      } // Pipe datasets to chart instance datasets enabling\n      // seamless transitions\n\n\n      var currentDatasets = this.getCurrentDatasets();\n      var nextDatasets = data.datasets || [];\n      this.checkDatasets(currentDatasets);\n      var currentDatasetsIndexed = (0, _keyBy[\"default\"])(currentDatasets, this.props.datasetKeyProvider); // We can safely replace the dataset array, as long as we retain the _meta property\n      // on each dataset.\n\n      this.chartInstance.config.data.datasets = nextDatasets.map(function (next) {\n        var current = currentDatasetsIndexed[_this3.props.datasetKeyProvider(next)];\n\n        if (current && current.type === next.type && next.data) {\n          // Be robust to no data. Relevant for other update mechanisms as in chartjs-plugin-streaming.\n          // The data array must be edited in place. As chart.js adds listeners to it.\n          current.data.splice(next.data.length);\n          next.data.forEach(function (point, pid) {\n            current.data[pid] = next.data[pid];\n          });\n\n          var _data = next.data,\n              otherProps = _objectWithoutProperties(next, [\"data\"]); // Merge properties. Notice a weakness here. If a property is removed\n          // from next, it will be retained by current and never disappears.\n          // Workaround is to set value to null or undefined in next.\n\n\n          return _objectSpread(_objectSpread({}, current), otherProps);\n        } else {\n          return next;\n        }\n      });\n\n      var datasets = data.datasets,\n          rest = _objectWithoutProperties(data, [\"datasets\"]);\n\n      this.chartInstance.config.data = _objectSpread(_objectSpread({}, this.chartInstance.config.data), rest);\n      this.chartInstance.update();\n    }\n  }, {\n    key: \"renderChart\",\n    value: function renderChart() {\n      var _this$props3 = this.props,\n          options = _this$props3.options,\n          legend = _this$props3.legend,\n          type = _this$props3.type,\n          plugins = _this$props3.plugins;\n      var node = this.element;\n      var data = this.memoizeDataProps();\n\n      if (typeof legend !== 'undefined' && !(0, _isEqual[\"default\"])(ChartComponent.defaultProps.legend, legend)) {\n        options.legend = legend;\n      }\n\n      this.chartInstance = new _chart[\"default\"](node, {\n        type: type,\n        data: data,\n        options: options,\n        plugins: plugins\n      });\n    }\n  }, {\n    key: \"destroyChart\",\n    value: function destroyChart() {\n      if (!this.chartInstance) {\n        return;\n      } // Put all of the datasets that have existed in the chart back on the chart\n      // so that the metadata associated with this chart get destroyed.\n      // This allows the datasets to be used in another chart. This can happen,\n      // for example, in a tabbed UI where the chart gets created each time the\n      // tab gets switched to the chart and uses the same data).\n\n\n      this.saveCurrentDatasets();\n      var datasets = Object.values(this.datasets);\n      this.chartInstance.config.data.datasets = datasets;\n      this.chartInstance.destroy();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          height = _this$props4.height,\n          width = _this$props4.width,\n          id = _this$props4.id;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"canvas\", {\n        ref: this.ref,\n        height: height,\n        width: width,\n        id: id,\n        onClick: this.handleOnClick\n      });\n    }\n  }]);\n\n  return ChartComponent;\n}(_react[\"default\"].Component);\n\n_defineProperty(ChartComponent, \"getLabelAsKey\", function (d) {\n  return d.label;\n});\n\n_defineProperty(ChartComponent, \"propTypes\", {\n  data: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].func]).isRequired,\n  getDatasetAtEvent: _propTypes[\"default\"].func,\n  getElementAtEvent: _propTypes[\"default\"].func,\n  getElementsAtEvent: _propTypes[\"default\"].func,\n  height: _propTypes[\"default\"].number,\n  legend: _propTypes[\"default\"].object,\n  onElementsClick: _propTypes[\"default\"].func,\n  options: _propTypes[\"default\"].object,\n  plugins: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].object),\n  redraw: _propTypes[\"default\"].bool,\n  type: function type(props, propName, componentName) {\n    if (!_chart[\"default\"].controllers[props[propName]]) {\n      return new Error('Invalid chart type `' + props[propName] + '` supplied to' + ' `' + componentName + '`.');\n    }\n  },\n  width: _propTypes[\"default\"].number,\n  datasetKeyProvider: _propTypes[\"default\"].func\n});\n\n_defineProperty(ChartComponent, \"defaultProps\", {\n  legend: {\n    display: true,\n    position: 'bottom'\n  },\n  type: 'doughnut',\n  height: 150,\n  width: 300,\n  redraw: false,\n  options: {},\n  datasetKeyProvider: ChartComponent.getLabelAsKey\n});\n\nvar _default = ChartComponent;\nexports[\"default\"] = _default;\n\nvar Doughnut = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Doughnut, _React$Component2);\n\n  var _super2 = _createSuper(Doughnut);\n\n  function Doughnut() {\n    _classCallCheck(this, Doughnut);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(Doughnut, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref) {\n          return _this4.chartInstance = _ref && _ref.chartInstance;\n        },\n        type: \"doughnut\"\n      }));\n    }\n  }]);\n\n  return Doughnut;\n}(_react[\"default\"].Component);\n\nexports.Doughnut = Doughnut;\n\nvar Pie = /*#__PURE__*/function (_React$Component3) {\n  _inherits(Pie, _React$Component3);\n\n  var _super3 = _createSuper(Pie);\n\n  function Pie() {\n    _classCallCheck(this, Pie);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Pie, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref2) {\n          return _this5.chartInstance = _ref2 && _ref2.chartInstance;\n        },\n        type: \"pie\"\n      }));\n    }\n  }]);\n\n  return Pie;\n}(_react[\"default\"].Component);\n\nexports.Pie = Pie;\n\nvar Line = /*#__PURE__*/function (_React$Component4) {\n  _inherits(Line, _React$Component4);\n\n  var _super4 = _createSuper(Line);\n\n  function Line() {\n    _classCallCheck(this, Line);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(Line, [{\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref3) {\n          return _this6.chartInstance = _ref3 && _ref3.chartInstance;\n        },\n        type: \"line\"\n      }));\n    }\n  }]);\n\n  return Line;\n}(_react[\"default\"].Component);\n\nexports.Line = Line;\n\nvar Bar = /*#__PURE__*/function (_React$Component5) {\n  _inherits(Bar, _React$Component5);\n\n  var _super5 = _createSuper(Bar);\n\n  function Bar() {\n    _classCallCheck(this, Bar);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(Bar, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref4) {\n          return _this7.chartInstance = _ref4 && _ref4.chartInstance;\n        },\n        type: \"bar\"\n      }));\n    }\n  }]);\n\n  return Bar;\n}(_react[\"default\"].Component);\n\nexports.Bar = Bar;\n\nvar HorizontalBar = /*#__PURE__*/function (_React$Component6) {\n  _inherits(HorizontalBar, _React$Component6);\n\n  var _super6 = _createSuper(HorizontalBar);\n\n  function HorizontalBar() {\n    _classCallCheck(this, HorizontalBar);\n\n    return _super6.apply(this, arguments);\n  }\n\n  _createClass(HorizontalBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref5) {\n          return _this8.chartInstance = _ref5 && _ref5.chartInstance;\n        },\n        type: \"horizontalBar\"\n      }));\n    }\n  }]);\n\n  return HorizontalBar;\n}(_react[\"default\"].Component);\n\nexports.HorizontalBar = HorizontalBar;\n\nvar Radar = /*#__PURE__*/function (_React$Component7) {\n  _inherits(Radar, _React$Component7);\n\n  var _super7 = _createSuper(Radar);\n\n  function Radar() {\n    _classCallCheck(this, Radar);\n\n    return _super7.apply(this, arguments);\n  }\n\n  _createClass(Radar, [{\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref6) {\n          return _this9.chartInstance = _ref6 && _ref6.chartInstance;\n        },\n        type: \"radar\"\n      }));\n    }\n  }]);\n\n  return Radar;\n}(_react[\"default\"].Component);\n\nexports.Radar = Radar;\n\nvar Polar = /*#__PURE__*/function (_React$Component8) {\n  _inherits(Polar, _React$Component8);\n\n  var _super8 = _createSuper(Polar);\n\n  function Polar() {\n    _classCallCheck(this, Polar);\n\n    return _super8.apply(this, arguments);\n  }\n\n  _createClass(Polar, [{\n    key: \"render\",\n    value: function render() {\n      var _this10 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref7) {\n          return _this10.chartInstance = _ref7 && _ref7.chartInstance;\n        },\n        type: \"polarArea\"\n      }));\n    }\n  }]);\n\n  return Polar;\n}(_react[\"default\"].Component);\n\nexports.Polar = Polar;\n\nvar Bubble = /*#__PURE__*/function (_React$Component9) {\n  _inherits(Bubble, _React$Component9);\n\n  var _super9 = _createSuper(Bubble);\n\n  function Bubble() {\n    _classCallCheck(this, Bubble);\n\n    return _super9.apply(this, arguments);\n  }\n\n  _createClass(Bubble, [{\n    key: \"render\",\n    value: function render() {\n      var _this11 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref8) {\n          return _this11.chartInstance = _ref8 && _ref8.chartInstance;\n        },\n        type: \"bubble\"\n      }));\n    }\n  }]);\n\n  return Bubble;\n}(_react[\"default\"].Component);\n\nexports.Bubble = Bubble;\n\nvar Scatter = /*#__PURE__*/function (_React$Component10) {\n  _inherits(Scatter, _React$Component10);\n\n  var _super10 = _createSuper(Scatter);\n\n  function Scatter() {\n    _classCallCheck(this, Scatter);\n\n    return _super10.apply(this, arguments);\n  }\n\n  _createClass(Scatter, [{\n    key: \"render\",\n    value: function render() {\n      var _this12 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(ChartComponent, _extends({}, this.props, {\n        ref: function ref(_ref9) {\n          return _this12.chartInstance = _ref9 && _ref9.chartInstance;\n        },\n        type: \"scatter\"\n      }));\n    }\n  }]);\n\n  return Scatter;\n}(_react[\"default\"].Component);\n\nexports.Scatter = Scatter;\nvar defaults = _chart[\"default\"].defaults;\nexports.defaults = defaults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro } from '../../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  unlinkDevice: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminUnlinkDevice extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputChecked: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      inputChecked: e.target.checked\n    });\n  }\n\n  unlinkDevice = () => {\n    this.props.toggleDialog();\n    this.props.unlinkDevice(this.state.inputChecked);\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n    const toggle = this.props.toggleDialog;\n    return (\n      <Modal isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          {isPro &&\n          <div className=\"d-flex align-items-center\">\n            <input id=\"delete-files\" className=\"mr-1\" type=\"checkbox\" checked={inputChecked} onChange={this.handleInputChange} />\n            <label htmlFor=\"delete-files\" className=\"m-0\">{gettext('Delete files from this device the next time it comes online.')}</label>\n          </div>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.unlinkDevice}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminUnlinkDevice.propTypes = propTypes;\n\nexport default SysAdminUnlinkDevice;\n","/**\n * @namespace Chart\n */\nvar Chart = require('./core/core.js')();\n\nrequire('./core/core.helpers')(Chart);\nrequire('./core/core.canvasHelpers')(Chart);\nrequire('./core/core.element')(Chart);\nrequire('./core/core.animation')(Chart);\nrequire('./core/core.controller')(Chart);\nrequire('./core/core.datasetController')(Chart);\nrequire('./core/core.layoutService')(Chart);\nrequire('./core/core.scaleService')(Chart);\nrequire('./core/core.plugin.js')(Chart);\nrequire('./core/core.scale')(Chart);\nrequire('./core/core.title')(Chart);\nrequire('./core/core.legend')(Chart);\nrequire('./core/core.tooltip')(Chart);\n\nrequire('./elements/element.arc')(Chart);\nrequire('./elements/element.line')(Chart);\nrequire('./elements/element.point')(Chart);\nrequire('./elements/element.rectangle')(Chart);\n\nrequire('./scales/scale.linearbase.js')(Chart);\nrequire('./scales/scale.category')(Chart);\nrequire('./scales/scale.linear')(Chart);\nrequire('./scales/scale.logarithmic')(Chart);\nrequire('./scales/scale.radialLinear')(Chart);\nrequire('./scales/scale.time')(Chart);\n\n// Controllers must be loaded after elements\n// See Chart.core.datasetController.dataElementType\nrequire('./controllers/controller.bar')(Chart);\nrequire('./controllers/controller.bubble')(Chart);\nrequire('./controllers/controller.doughnut')(Chart);\nrequire('./controllers/controller.line')(Chart);\nrequire('./controllers/controller.polarArea')(Chart);\nrequire('./controllers/controller.radar')(Chart);\n\nrequire('./charts/Chart.Bar')(Chart);\nrequire('./charts/Chart.Bubble')(Chart);\nrequire('./charts/Chart.Doughnut')(Chart);\nrequire('./charts/Chart.Line')(Chart);\nrequire('./charts/Chart.PolarArea')(Chart);\nrequire('./charts/Chart.Radar')(Chart);\nrequire('./charts/Chart.Scatter')(Chart);\n\nwindow.Chart = module.exports = Chart;\n","'use strict';\n\nmodule.exports = function() {\n\n\t// Occupy the global variable of Chart, and create a simple base class\n\tvar Chart = function(context, config) {\n\t\tvar me = this;\n\t\tvar helpers = Chart.helpers;\n\t\tme.config = config || {\n\t\t\tdata: {\n\t\t\t\tdatasets: []\n\t\t\t}\n\t\t};\n\n\t\t// Support a jQuery'd canvas element\n\t\tif (context.length && context[0].getContext) {\n\t\t\tcontext = context[0];\n\t\t}\n\n\t\t// Support a canvas domnode\n\t\tif (context.getContext) {\n\t\t\tcontext = context.getContext('2d');\n\t\t}\n\n\t\tme.ctx = context;\n\t\tme.canvas = context.canvas;\n\n\t\tcontext.canvas.style.display = context.canvas.style.display || 'block';\n\n\t\t// Figure out what the size of the chart will be.\n\t\t// If the canvas has a specified width and height, we use those else\n\t\t// we look to see if the canvas node has a CSS width and height.\n\t\t// If there is still no height, fill the parent container\n\t\tme.width = context.canvas.width || parseInt(helpers.getStyle(context.canvas, 'width'), 10) || helpers.getMaximumWidth(context.canvas);\n\t\tme.height = context.canvas.height || parseInt(helpers.getStyle(context.canvas, 'height'), 10) || helpers.getMaximumHeight(context.canvas);\n\n\t\tme.aspectRatio = me.width / me.height;\n\n\t\tif (isNaN(me.aspectRatio) || isFinite(me.aspectRatio) === false) {\n\t\t\t// If the canvas has no size, try and figure out what the aspect ratio will be.\n\t\t\t// Some charts prefer square canvases (pie, radar, etc). If that is specified, use that\n\t\t\t// else use the canvas default ratio of 2\n\t\t\tme.aspectRatio = config.aspectRatio !== undefined ? config.aspectRatio : 2;\n\t\t}\n\n\t\t// Store the original style of the element so we can set it back\n\t\tme.originalCanvasStyleWidth = context.canvas.style.width;\n\t\tme.originalCanvasStyleHeight = context.canvas.style.height;\n\n\t\t// High pixel density displays - multiply the size of the canvas height/width by the device pixel ratio, then scale.\n\t\thelpers.retinaScale(me);\n\t\tme.controller = new Chart.Controller(me);\n\n\t\t// Always bind this so that if the responsive state changes we still work\n\t\thelpers.addResizeListener(context.canvas.parentNode, function() {\n\t\t\tif (me.controller && me.controller.config.options.responsive) {\n\t\t\t\tme.controller.resize();\n\t\t\t}\n\t\t});\n\n\t\treturn me.controller ? me.controller : me;\n\n\t};\n\n\t// Globally expose the defaults to allow for user updating/changing\n\tChart.defaults = {\n\t\tglobal: {\n\t\t\tresponsive: true,\n\t\t\tresponsiveAnimationDuration: 0,\n\t\t\tmaintainAspectRatio: true,\n\t\t\tevents: ['mousemove', 'mouseout', 'click', 'touchstart', 'touchmove'],\n\t\t\thover: {\n\t\t\t\tonHover: null,\n\t\t\t\tmode: 'single',\n\t\t\t\tanimationDuration: 400\n\t\t\t},\n\t\t\tonClick: null,\n\t\t\tdefaultColor: 'rgba(0,0,0,0.1)',\n\t\t\tdefaultFontColor: '#666',\n\t\t\tdefaultFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n\t\t\tdefaultFontSize: 12,\n\t\t\tdefaultFontStyle: 'normal',\n\t\t\tshowLines: true,\n\n\t\t\t// Element defaults defined in element extensions\n\t\t\telements: {},\n\n\t\t\t// Legend callback string\n\t\t\tlegendCallback: function(chart) {\n\t\t\t\tvar text = [];\n\t\t\t\ttext.push('<ul class=\"' + chart.id + '-legend\">');\n\t\t\t\tfor (var i = 0; i < chart.data.datasets.length; i++) {\n\t\t\t\t\ttext.push('<li><span style=\"background-color:' + chart.data.datasets[i].backgroundColor + '\"></span>');\n\t\t\t\t\tif (chart.data.datasets[i].label) {\n\t\t\t\t\t\ttext.push(chart.data.datasets[i].label);\n\t\t\t\t\t}\n\t\t\t\t\ttext.push('</li>');\n\t\t\t\t}\n\t\t\t\ttext.push('</ul>');\n\n\t\t\t\treturn text.join('');\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.Chart = Chart;\n\n\treturn Chart;\n\n};\n","/* global window: false */\n/* global document: false */\n'use strict';\n\nvar color = require('chartjs-color');\n\nmodule.exports = function(Chart) {\n\t// Global Chart helpers object for utility methods and classes\n\tvar helpers = Chart.helpers = {};\n\n\t// -- Basic js utility methods\n\thelpers.each = function(loopable, callback, self, reverse) {\n\t\t// Check to see if null or undefined firstly.\n\t\tvar i, len;\n\t\tif (helpers.isArray(loopable)) {\n\t\t\tlen = loopable.length;\n\t\t\tif (reverse) {\n\t\t\t\tfor (i = len - 1; i >= 0; i--) {\n\t\t\t\t\tcallback.call(self, loopable[i], i);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\tcallback.call(self, loopable[i], i);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof loopable === 'object') {\n\t\t\tvar keys = Object.keys(loopable);\n\t\t\tlen = keys.length;\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tcallback.call(self, loopable[keys[i]], keys[i]);\n\t\t\t}\n\t\t}\n\t};\n\thelpers.clone = function(obj) {\n\t\tvar objClone = {};\n\t\thelpers.each(obj, function(value, key) {\n\t\t\tif (helpers.isArray(value)) {\n\t\t\t\tobjClone[key] = value.slice(0);\n\t\t\t} else if (typeof value === 'object' && value !== null) {\n\t\t\t\tobjClone[key] = helpers.clone(value);\n\t\t\t} else {\n\t\t\t\tobjClone[key] = value;\n\t\t\t}\n\t\t});\n\t\treturn objClone;\n\t};\n\thelpers.extend = function(base) {\n\t\tvar setFn = function(value, key) {\n\t\t\tbase[key] = value;\n\t\t};\n\t\tfor (var i = 1, ilen = arguments.length; i < ilen; i++) {\n\t\t\thelpers.each(arguments[i], setFn);\n\t\t}\n\t\treturn base;\n\t};\n\t// Need a special merge function to chart configs since they are now grouped\n\thelpers.configMerge = function(_base) {\n\t\tvar base = helpers.clone(_base);\n\t\thelpers.each(Array.prototype.slice.call(arguments, 1), function(extension) {\n\t\t\thelpers.each(extension, function(value, key) {\n\t\t\t\tif (key === 'scales') {\n\t\t\t\t\t// Scale config merging is complex. Add out own function here for that\n\t\t\t\t\tbase[key] = helpers.scaleMerge(base.hasOwnProperty(key) ? base[key] : {}, value);\n\n\t\t\t\t} else if (key === 'scale') {\n\t\t\t\t\t// Used in polar area & radar charts since there is only one scale\n\t\t\t\t\tbase[key] = helpers.configMerge(base.hasOwnProperty(key) ? base[key] : {}, Chart.scaleService.getScaleDefaults(value.type), value);\n\t\t\t\t} else if (base.hasOwnProperty(key) && helpers.isArray(base[key]) && helpers.isArray(value)) {\n\t\t\t\t\t// In this case we have an array of objects replacing another array. Rather than doing a strict replace,\n\t\t\t\t\t// merge. This allows easy scale option merging\n\t\t\t\t\tvar baseArray = base[key];\n\n\t\t\t\t\thelpers.each(value, function(valueObj, index) {\n\n\t\t\t\t\t\tif (index < baseArray.length) {\n\t\t\t\t\t\t\tif (typeof baseArray[index] === 'object' && baseArray[index] !== null && typeof valueObj === 'object' && valueObj !== null) {\n\t\t\t\t\t\t\t\t// Two objects are coming together. Do a merge of them.\n\t\t\t\t\t\t\t\tbaseArray[index] = helpers.configMerge(baseArray[index], valueObj);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Just overwrite in this case since there is nothing to merge\n\t\t\t\t\t\t\t\tbaseArray[index] = valueObj;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbaseArray.push(valueObj); // nothing to merge\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t} else if (base.hasOwnProperty(key) && typeof base[key] === 'object' && base[key] !== null && typeof value === 'object') {\n\t\t\t\t\t// If we are overwriting an object with an object, do a merge of the properties.\n\t\t\t\t\tbase[key] = helpers.configMerge(base[key], value);\n\n\t\t\t\t} else {\n\t\t\t\t\t// can just overwrite the value in this case\n\t\t\t\t\tbase[key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn base;\n\t};\n\thelpers.scaleMerge = function(_base, extension) {\n\t\tvar base = helpers.clone(_base);\n\n\t\thelpers.each(extension, function(value, key) {\n\t\t\tif (key === 'xAxes' || key === 'yAxes') {\n\t\t\t\t// These properties are arrays of items\n\t\t\t\tif (base.hasOwnProperty(key)) {\n\t\t\t\t\thelpers.each(value, function(valueObj, index) {\n\t\t\t\t\t\tvar axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n\t\t\t\t\t\tvar axisDefaults = Chart.scaleService.getScaleDefaults(axisType);\n\t\t\t\t\t\tif (index >= base[key].length || !base[key][index].type) {\n\t\t\t\t\t\t\tbase[key].push(helpers.configMerge(axisDefaults, valueObj));\n\t\t\t\t\t\t} else if (valueObj.type && valueObj.type !== base[key][index].type) {\n\t\t\t\t\t\t\t// Type changed. Bring in the new defaults before we bring in valueObj so that valueObj can override the correct scale defaults\n\t\t\t\t\t\t\tbase[key][index] = helpers.configMerge(base[key][index], axisDefaults, valueObj);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Type is the same\n\t\t\t\t\t\t\tbase[key][index] = helpers.configMerge(base[key][index], valueObj);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbase[key] = [];\n\t\t\t\t\thelpers.each(value, function(valueObj) {\n\t\t\t\t\t\tvar axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n\t\t\t\t\t\tbase[key].push(helpers.configMerge(Chart.scaleService.getScaleDefaults(axisType), valueObj));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (base.hasOwnProperty(key) && typeof base[key] === 'object' && base[key] !== null && typeof value === 'object') {\n\t\t\t\t// If we are overwriting an object with an object, do a merge of the properties.\n\t\t\t\tbase[key] = helpers.configMerge(base[key], value);\n\n\t\t\t} else {\n\t\t\t\t// can just overwrite the value in this case\n\t\t\t\tbase[key] = value;\n\t\t\t}\n\t\t});\n\n\t\treturn base;\n\t};\n\thelpers.getValueAtIndexOrDefault = function(value, index, defaultValue) {\n\t\tif (value === undefined || value === null) {\n\t\t\treturn defaultValue;\n\t\t}\n\n\t\tif (helpers.isArray(value)) {\n\t\t\treturn index < value.length ? value[index] : defaultValue;\n\t\t}\n\n\t\treturn value;\n\t};\n\thelpers.getValueOrDefault = function(value, defaultValue) {\n\t\treturn value === undefined ? defaultValue : value;\n\t};\n\thelpers.indexOf = Array.prototype.indexOf?\n\t\tfunction(array, item) {\n\t\t\treturn array.indexOf(item);\n\t\t}:\n\t\tfunction(array, item) {\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (array[i] === item) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.where = function(collection, filterCallback) {\n\t\tif (helpers.isArray(collection) && Array.prototype.filter) {\n\t\t\treturn collection.filter(filterCallback);\n\t\t}\n\t\tvar filtered = [];\n\n\t\thelpers.each(collection, function(item) {\n\t\t\tif (filterCallback(item)) {\n\t\t\t\tfiltered.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn filtered;\n\t};\n\thelpers.findIndex = Array.prototype.findIndex?\n\t\tfunction(array, callback, scope) {\n\t\t\treturn array.findIndex(callback, scope);\n\t\t} :\n\t\tfunction(array, callback, scope) {\n\t\t\tscope = scope === undefined? array : scope;\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (callback.call(scope, array[i], i, array)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to start of the array\n\t\tif (startIndex === undefined || startIndex === null) {\n\t\t\tstartIndex = -1;\n\t\t}\n\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to end of the array\n\t\tif (startIndex === undefined || startIndex === null) {\n\t\t\tstartIndex = arrayToSearch.length;\n\t\t}\n\t\tfor (var i = startIndex - 1; i >= 0; i--) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.inherits = function(extensions) {\n\t\t// Basic javascript inheritance based on the model created in Backbone.js\n\t\tvar me = this;\n\t\tvar ChartElement = (extensions && extensions.hasOwnProperty('constructor')) ? extensions.constructor : function() {\n\t\t\treturn me.apply(this, arguments);\n\t\t};\n\n\t\tvar Surrogate = function() {\n\t\t\tthis.constructor = ChartElement;\n\t\t};\n\t\tSurrogate.prototype = me.prototype;\n\t\tChartElement.prototype = new Surrogate();\n\n\t\tChartElement.extend = helpers.inherits;\n\n\t\tif (extensions) {\n\t\t\thelpers.extend(ChartElement.prototype, extensions);\n\t\t}\n\n\t\tChartElement.__super__ = me.prototype;\n\n\t\treturn ChartElement;\n\t};\n\thelpers.noop = function() {};\n\thelpers.uid = (function() {\n\t\tvar id = 0;\n\t\treturn function() {\n\t\t\treturn id++;\n\t\t};\n\t}());\n\t// -- Math methods\n\thelpers.isNumber = function(n) {\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t};\n\thelpers.almostEquals = function(x, y, epsilon) {\n\t\treturn Math.abs(x - y) < epsilon;\n\t};\n\thelpers.max = function(array) {\n\t\treturn array.reduce(function(max, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.max(max, value);\n\t\t\t}\n\t\t\treturn max;\n\t\t}, Number.NEGATIVE_INFINITY);\n\t};\n\thelpers.min = function(array) {\n\t\treturn array.reduce(function(min, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.min(min, value);\n\t\t\t}\n\t\t\treturn min;\n\t\t}, Number.POSITIVE_INFINITY);\n\t};\n\thelpers.sign = Math.sign?\n\t\tfunction(x) {\n\t\t\treturn Math.sign(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\tx = +x; // convert to a number\n\t\t\tif (x === 0 || isNaN(x)) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn x > 0 ? 1 : -1;\n\t\t};\n\thelpers.log10 = Math.log10?\n\t\tfunction(x) {\n\t\t\treturn Math.log10(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\treturn Math.log(x) / Math.LN10;\n\t\t};\n\thelpers.toRadians = function(degrees) {\n\t\treturn degrees * (Math.PI / 180);\n\t};\n\thelpers.toDegrees = function(radians) {\n\t\treturn radians * (180 / Math.PI);\n\t};\n\t// Gets the angle from vertical upright to the point about a centre.\n\thelpers.getAngleFromPoint = function(centrePoint, anglePoint) {\n\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x,\n\t\t\tdistanceFromYCenter = anglePoint.y - centrePoint.y,\n\t\t\tradialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n\t\tvar angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n\t\tif (angle < (-0.5 * Math.PI)) {\n\t\t\tangle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n\t\t}\n\n\t\treturn {\n\t\t\tangle: angle,\n\t\t\tdistance: radialDistanceFromCenter\n\t\t};\n\t};\n\thelpers.aliasPixel = function(pixelWidth) {\n\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\n\t};\n\thelpers.splineCurve = function(firstPoint, middlePoint, afterPoint, t) {\n\t\t// Props to Rob Spencer at scaled innovation for his post on splining between points\n\t\t// http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n\t\t// This function must also respect \"skipped\" points\n\n\t\tvar previous = firstPoint.skip ? middlePoint : firstPoint,\n\t\t\tcurrent = middlePoint,\n\t\t\tnext = afterPoint.skip ? middlePoint : afterPoint;\n\n\t\tvar d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\n\t\tvar d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\n\n\t\tvar s01 = d01 / (d01 + d12);\n\t\tvar s12 = d12 / (d01 + d12);\n\n\t\t// If all points are the same, s01 & s02 will be inf\n\t\ts01 = isNaN(s01) ? 0 : s01;\n\t\ts12 = isNaN(s12) ? 0 : s12;\n\n\t\tvar fa = t * s01; // scaling factor for triangle Ta\n\t\tvar fb = t * s12;\n\n\t\treturn {\n\t\t\tprevious: {\n\t\t\t\tx: current.x - fa * (next.x - previous.x),\n\t\t\t\ty: current.y - fa * (next.y - previous.y)\n\t\t\t},\n\t\t\tnext: {\n\t\t\t\tx: current.x + fb * (next.x - previous.x),\n\t\t\t\ty: current.y + fb * (next.y - previous.y)\n\t\t\t}\n\t\t};\n\t};\n\thelpers.EPSILON = Number.EPSILON || 1e-14;\n\thelpers.splineCurveMonotone = function(points) {\n\t\t// This function calculates Bézier control points in a similar way than |splineCurve|,\n\t\t// but preserves monotonicity of the provided data and ensures no local extremums are added\n\t\t// between the dataset discrete points due to the interpolation.\n\t\t// See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n\n\t\tvar pointsWithTangents = (points || []).map(function(point) {\n\t\t\treturn {\n\t\t\t\tmodel: point._model,\n\t\t\t\tdeltaK: 0,\n\t\t\t\tmK: 0\n\t\t\t};\n\t\t});\n\n\t\t// Calculate slopes (deltaK) and initialize tangents (mK)\n\t\tvar pointsLen = pointsWithTangents.length;\n\t\tvar i, pointBefore, pointCurrent, pointAfter;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tpointCurrent.deltaK = (pointAfter.model.y - pointCurrent.model.y) / (pointAfter.model.x - pointCurrent.model.x);\n\t\t\t}\n\n\t\t\tif (!pointBefore || pointBefore.model.skip) {\n\t\t\t\tpointCurrent.mK = pointCurrent.deltaK;\n\t\t\t} else if (!pointAfter || pointAfter.model.skip) {\n\t\t\t\tpointCurrent.mK = pointBefore.deltaK;\n\t\t\t} else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\n\t\t\t\tpointCurrent.mK = 0;\n\t\t\t} else {\n\t\t\t\tpointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\n\t\t\t}\n\t\t}\n\n\t\t// Adjust tangents to ensure monotonic properties\n\t\tvar alphaK, betaK, tauK, squaredMagnitude;\n\t\tfor (i = 0; i < pointsLen - 1; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tpointAfter = pointsWithTangents[i + 1];\n\t\t\tif (pointCurrent.model.skip || pointAfter.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (helpers.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\n\t\t\t\tpointCurrent.mK = pointAfter.mK = 0;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\talphaK = pointCurrent.mK / pointCurrent.deltaK;\n\t\t\tbetaK = pointAfter.mK / pointCurrent.deltaK;\n\t\t\tsquaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n\t\t\tif (squaredMagnitude <= 9) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ttauK = 3 / Math.sqrt(squaredMagnitude);\n\t\t\tpointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\n\t\t\tpointAfter.mK = betaK * tauK * pointCurrent.deltaK;\n\t\t}\n\n\t\t// Compute control points\n\t\tvar deltaX;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointBefore && !pointBefore.model.skip) {\n\t\t\t\tdeltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\n\t\t\t\tpointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tdeltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\n\t\t\t\tpointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.nextItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index >= collection.length - 1 ? collection[0] : collection[index + 1];\n\t\t}\n\t\treturn index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\n\t};\n\thelpers.previousItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index <= 0 ? collection[collection.length - 1] : collection[index - 1];\n\t\t}\n\t\treturn index <= 0 ? collection[0] : collection[index - 1];\n\t};\n\t// Implementation of the nice number algorithm used in determining where axis labels will go\n\thelpers.niceNum = function(range, round) {\n\t\tvar exponent = Math.floor(helpers.log10(range));\n\t\tvar fraction = range / Math.pow(10, exponent);\n\t\tvar niceFraction;\n\n\t\tif (round) {\n\t\t\tif (fraction < 1.5) {\n\t\t\t\tniceFraction = 1;\n\t\t\t} else if (fraction < 3) {\n\t\t\t\tniceFraction = 2;\n\t\t\t} else if (fraction < 7) {\n\t\t\t\tniceFraction = 5;\n\t\t\t} else {\n\t\t\t\tniceFraction = 10;\n\t\t\t}\n\t\t} else if (fraction <= 1.0) {\n\t\t\tniceFraction = 1;\n\t\t} else if (fraction <= 2) {\n\t\t\tniceFraction = 2;\n\t\t} else if (fraction <= 5) {\n\t\t\tniceFraction = 5;\n\t\t} else {\n\t\t\tniceFraction = 10;\n\t\t}\n\n\t\treturn niceFraction * Math.pow(10, exponent);\n\t};\n\t// Easing functions adapted from Robert Penner's easing equations\n\t// http://www.robertpenner.com/easing/\n\tvar easingEffects = helpers.easingEffects = {\n\t\tlinear: function(t) {\n\t\t\treturn t;\n\t\t},\n\t\teaseInQuad: function(t) {\n\t\t\treturn t * t;\n\t\t},\n\t\teaseOutQuad: function(t) {\n\t\t\treturn -1 * t * (t - 2);\n\t\t},\n\t\teaseInOutQuad: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t;\n\t\t\t}\n\t\t\treturn -1 / 2 * ((--t) * (t - 2) - 1);\n\t\t},\n\t\teaseInCubic: function(t) {\n\t\t\treturn t * t * t;\n\t\t},\n\t\teaseOutCubic: function(t) {\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * t + 1);\n\t\t},\n\t\teaseInOutCubic: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t;\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * t + 2);\n\t\t},\n\t\teaseInQuart: function(t) {\n\t\t\treturn t * t * t * t;\n\t\t},\n\t\teaseOutQuart: function(t) {\n\t\t\treturn -1 * ((t = t / 1 - 1) * t * t * t - 1);\n\t\t},\n\t\teaseInOutQuart: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t * t;\n\t\t\t}\n\t\t\treturn -1 / 2 * ((t -= 2) * t * t * t - 2);\n\t\t},\n\t\teaseInQuint: function(t) {\n\t\t\treturn 1 * (t /= 1) * t * t * t * t;\n\t\t},\n\t\teaseOutQuint: function(t) {\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\n\t\t},\n\t\teaseInOutQuint: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t * t * t;\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * t * t * t + 2);\n\t\t},\n\t\teaseInSine: function(t) {\n\t\t\treturn -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\n\t\t},\n\t\teaseOutSine: function(t) {\n\t\t\treturn 1 * Math.sin(t / 1 * (Math.PI / 2));\n\t\t},\n\t\teaseInOutSine: function(t) {\n\t\t\treturn -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\n\t\t},\n\t\teaseInExpo: function(t) {\n\t\t\treturn (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\n\t\t},\n\t\teaseOutExpo: function(t) {\n\t\t\treturn (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\n\t\t},\n\t\teaseInOutExpo: function(t) {\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (t === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * Math.pow(2, 10 * (t - 1));\n\t\t\t}\n\t\t\treturn 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\n\t\t},\n\t\teaseInCirc: function(t) {\n\t\t\tif (t >= 1) {\n\t\t\t\treturn t;\n\t\t\t}\n\t\t\treturn -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\n\t\t},\n\t\teaseOutCirc: function(t) {\n\t\t\treturn 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\n\t\t},\n\t\teaseInOutCirc: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn -1 / 2 * (Math.sqrt(1 - t * t) - 1);\n\t\t\t}\n\t\t\treturn 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n\t\t},\n\t\teaseInElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1) === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * 0.3;\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t},\n\t\teaseOutElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1) === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * 0.3;\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\n\t\t},\n\t\teaseInOutElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1 / 2) === 2) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * (0.3 * 1.5);\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\tif (t < 1) {\n\t\t\t\treturn -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t\t}\n\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\t\t},\n\t\teaseInBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn 1 * (t /= 1) * t * ((s + 1) * t - s);\n\t\t},\n\t\teaseOutBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\n\t\t},\n\t\teaseInOutBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n\t\t},\n\t\teaseInBounce: function(t) {\n\t\t\treturn 1 - easingEffects.easeOutBounce(1 - t);\n\t\t},\n\t\teaseOutBounce: function(t) {\n\t\t\tif ((t /= 1) < (1 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * t * t);\n\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75);\n\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375);\n\t\t\t}\n\t\t\treturn 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375);\n\t\t},\n\t\teaseInOutBounce: function(t) {\n\t\t\tif (t < 1 / 2) {\n\t\t\t\treturn easingEffects.easeInBounce(t * 2) * 0.5;\n\t\t\t}\n\t\t\treturn easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\n\t\t}\n\t};\n\t// Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\thelpers.requestAnimFrame = (function() {\n\t\treturn window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.oRequestAnimationFrame ||\n\t\t\twindow.msRequestAnimationFrame ||\n\t\t\tfunction(callback) {\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\n\t\t\t};\n\t}());\n\thelpers.cancelAnimFrame = (function() {\n\t\treturn window.cancelAnimationFrame ||\n\t\t\twindow.webkitCancelAnimationFrame ||\n\t\t\twindow.mozCancelAnimationFrame ||\n\t\t\twindow.oCancelAnimationFrame ||\n\t\t\twindow.msCancelAnimationFrame ||\n\t\t\tfunction(callback) {\n\t\t\t\treturn window.clearTimeout(callback, 1000 / 60);\n\t\t\t};\n\t}());\n\t// -- DOM methods\n\thelpers.getRelativePosition = function(evt, chart) {\n\t\tvar mouseX, mouseY;\n\t\tvar e = evt.originalEvent || evt,\n\t\t\tcanvas = evt.currentTarget || evt.srcElement,\n\t\t\tboundingRect = canvas.getBoundingClientRect();\n\n\t\tvar touches = e.touches;\n\t\tif (touches && touches.length > 0) {\n\t\t\tmouseX = touches[0].clientX;\n\t\t\tmouseY = touches[0].clientY;\n\n\t\t} else {\n\t\t\tmouseX = e.clientX;\n\t\t\tmouseY = e.clientY;\n\t\t}\n\n\t\t// Scale mouse coordinates into canvas coordinates\n\t\t// by following the pattern laid out by 'jerryj' in the comments of\n\t\t// http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\n\t\tvar paddingLeft = parseFloat(helpers.getStyle(canvas, 'padding-left'));\n\t\tvar paddingTop = parseFloat(helpers.getStyle(canvas, 'padding-top'));\n\t\tvar paddingRight = parseFloat(helpers.getStyle(canvas, 'padding-right'));\n\t\tvar paddingBottom = parseFloat(helpers.getStyle(canvas, 'padding-bottom'));\n\t\tvar width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\n\t\tvar height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom;\n\n\t\t// We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\n\t\t// the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\n\t\tmouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / (width) * canvas.width / chart.currentDevicePixelRatio);\n\t\tmouseY = Math.round((mouseY - boundingRect.top - paddingTop) / (height) * canvas.height / chart.currentDevicePixelRatio);\n\n\t\treturn {\n\t\t\tx: mouseX,\n\t\t\ty: mouseY\n\t\t};\n\n\t};\n\thelpers.addEvent = function(node, eventType, method) {\n\t\tif (node.addEventListener) {\n\t\t\tnode.addEventListener(eventType, method);\n\t\t} else if (node.attachEvent) {\n\t\t\tnode.attachEvent('on' + eventType, method);\n\t\t} else {\n\t\t\tnode['on' + eventType] = method;\n\t\t}\n\t};\n\thelpers.removeEvent = function(node, eventType, handler) {\n\t\tif (node.removeEventListener) {\n\t\t\tnode.removeEventListener(eventType, handler, false);\n\t\t} else if (node.detachEvent) {\n\t\t\tnode.detachEvent('on' + eventType, handler);\n\t\t} else {\n\t\t\tnode['on' + eventType] = helpers.noop;\n\t\t}\n\t};\n\thelpers.bindEvents = function(chartInstance, arrayOfEvents, handler) {\n\t\t// Create the events object if it's not already present\n\t\tvar events = chartInstance.events = chartInstance.events || {};\n\n\t\thelpers.each(arrayOfEvents, function(eventName) {\n\t\t\tevents[eventName] = function() {\n\t\t\t\thandler.apply(chartInstance, arguments);\n\t\t\t};\n\t\t\thelpers.addEvent(chartInstance.chart.canvas, eventName, events[eventName]);\n\t\t});\n\t};\n\thelpers.unbindEvents = function(chartInstance, arrayOfEvents) {\n\t\tvar canvas = chartInstance.chart.canvas;\n\t\thelpers.each(arrayOfEvents, function(handler, eventName) {\n\t\t\thelpers.removeEvent(canvas, eventName, handler);\n\t\t});\n\t};\n\n\t// Private helper function to convert max-width/max-height values that may be percentages into a number\n\tfunction parseMaxStyle(styleValue, node, parentProperty) {\n\t\tvar valueInPixels;\n\t\tif (typeof(styleValue) === 'string') {\n\t\t\tvalueInPixels = parseInt(styleValue, 10);\n\n\t\t\tif (styleValue.indexOf('%') !== -1) {\n\t\t\t\t// percentage * size in dimension\n\t\t\t\tvalueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n\t\t\t}\n\t\t} else {\n\t\t\tvalueInPixels = styleValue;\n\t\t}\n\n\t\treturn valueInPixels;\n\t}\n\n\t/**\n\t * Returns if the given value contains an effective constraint.\n\t * @private\n\t */\n\tfunction isConstrainedValue(value) {\n\t\treturn value !== undefined && value !== null && value !== 'none';\n\t}\n\n\t// Private helper to get a constraint dimension\n\t// @param domNode : the node to check the constraint on\n\t// @param maxStyle : the style that defines the maximum for the direction we are using (maxWidth / maxHeight)\n\t// @param percentageProperty : property of parent to use when calculating width as a percentage\n\t// @see http://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser\n\tfunction getConstraintDimension(domNode, maxStyle, percentageProperty) {\n\t\tvar view = document.defaultView;\n\t\tvar parentNode = domNode.parentNode;\n\t\tvar constrainedNode = view.getComputedStyle(domNode)[maxStyle];\n\t\tvar constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\n\t\tvar hasCNode = isConstrainedValue(constrainedNode);\n\t\tvar hasCContainer = isConstrainedValue(constrainedContainer);\n\t\tvar infinity = Number.POSITIVE_INFINITY;\n\n\t\tif (hasCNode || hasCContainer) {\n\t\t\treturn Math.min(\n\t\t\t\thasCNode? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity,\n\t\t\t\thasCContainer? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\n\t\t}\n\n\t\treturn 'none';\n\t}\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintWidth = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-width', 'clientWidth');\n\t};\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintHeight = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-height', 'clientHeight');\n\t};\n\thelpers.getMaximumWidth = function(domNode) {\n\t\tvar container = domNode.parentNode;\n\t\tvar paddingLeft = parseInt(helpers.getStyle(container, 'padding-left'), 10);\n\t\tvar paddingRight = parseInt(helpers.getStyle(container, 'padding-right'), 10);\n\t\tvar w = container.clientWidth - paddingLeft - paddingRight;\n\t\tvar cw = helpers.getConstraintWidth(domNode);\n\t\treturn isNaN(cw)? w : Math.min(w, cw);\n\t};\n\thelpers.getMaximumHeight = function(domNode) {\n\t\tvar container = domNode.parentNode;\n\t\tvar paddingTop = parseInt(helpers.getStyle(container, 'padding-top'), 10);\n\t\tvar paddingBottom = parseInt(helpers.getStyle(container, 'padding-bottom'), 10);\n\t\tvar h = container.clientHeight - paddingTop - paddingBottom;\n\t\tvar ch = helpers.getConstraintHeight(domNode);\n\t\treturn isNaN(ch)? h : Math.min(h, ch);\n\t};\n\thelpers.getStyle = function(el, property) {\n\t\treturn el.currentStyle ?\n\t\t\tel.currentStyle[property] :\n\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n\t};\n\thelpers.retinaScale = function(chart) {\n\t\tvar ctx = chart.ctx;\n\t\tvar canvas = chart.canvas;\n\t\tvar width = canvas.width;\n\t\tvar height = canvas.height;\n\t\tvar pixelRatio = chart.currentDevicePixelRatio = window.devicePixelRatio || 1;\n\n\t\tif (pixelRatio !== 1) {\n\t\t\tcanvas.height = height * pixelRatio;\n\t\t\tcanvas.width = width * pixelRatio;\n\t\t\tctx.scale(pixelRatio, pixelRatio);\n\n\t\t\t// Store the device pixel ratio so that we can go backwards in `destroy`.\n\t\t\t// The devicePixelRatio changes with zoom, so there are no guarantees that it is the same\n\t\t\t// when destroy is called\n\t\t\tchart.originalDevicePixelRatio = chart.originalDevicePixelRatio || pixelRatio;\n\t\t}\n\n\t\tcanvas.style.width = width + 'px';\n\t\tcanvas.style.height = height + 'px';\n\t};\n\t// -- Canvas methods\n\thelpers.clear = function(chart) {\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\n\t};\n\thelpers.fontString = function(pixelSize, fontStyle, fontFamily) {\n\t\treturn fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n\t};\n\thelpers.longestText = function(ctx, font, arrayOfThings, cache) {\n\t\tcache = cache || {};\n\t\tvar data = cache.data = cache.data || {};\n\t\tvar gc = cache.garbageCollect = cache.garbageCollect || [];\n\n\t\tif (cache.font !== font) {\n\t\t\tdata = cache.data = {};\n\t\t\tgc = cache.garbageCollect = [];\n\t\t\tcache.font = font;\n\t\t}\n\n\t\tctx.font = font;\n\t\tvar longest = 0;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\t// Undefined strings and arrays should not be measured\n\t\t\tif (thing !== undefined && thing !== null && helpers.isArray(thing) !== true) {\n\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, thing);\n\t\t\t} else if (helpers.isArray(thing)) {\n\t\t\t\t// if it is an array lets measure each element\n\t\t\t\t// to do maybe simplify this function a bit so we can do this more recursively?\n\t\t\t\thelpers.each(thing, function(nestedThing) {\n\t\t\t\t\t// Undefined strings and arrays should not be measured\n\t\t\t\t\tif (nestedThing !== undefined && nestedThing !== null && !helpers.isArray(nestedThing)) {\n\t\t\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, nestedThing);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tvar gcLen = gc.length / 2;\n\t\tif (gcLen > arrayOfThings.length) {\n\t\t\tfor (var i = 0; i < gcLen; i++) {\n\t\t\t\tdelete data[gc[i]];\n\t\t\t}\n\t\t\tgc.splice(0, gcLen);\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.measureText = function(ctx, data, gc, longest, string) {\n\t\tvar textWidth = data[string];\n\t\tif (!textWidth) {\n\t\t\ttextWidth = data[string] = ctx.measureText(string).width;\n\t\t\tgc.push(string);\n\t\t}\n\t\tif (textWidth > longest) {\n\t\t\tlongest = textWidth;\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.numberOfLabelLines = function(arrayOfThings) {\n\t\tvar numberOfLines = 1;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\tif (helpers.isArray(thing)) {\n\t\t\t\tif (thing.length > numberOfLines) {\n\t\t\t\t\tnumberOfLines = thing.length;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn numberOfLines;\n\t};\n\thelpers.drawRoundedRectangle = function(ctx, x, y, width, height, radius) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(x + radius, y);\n\t\tctx.lineTo(x + width - radius, y);\n\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n\t\tctx.lineTo(x + width, y + height - radius);\n\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n\t\tctx.lineTo(x + radius, y + height);\n\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n\t\tctx.lineTo(x, y + radius);\n\t\tctx.quadraticCurveTo(x, y, x + radius, y);\n\t\tctx.closePath();\n\t};\n\thelpers.color = function(c) {\n\t\tif (!color) {\n\t\t\tconsole.error('Color.js not found!');\n\t\t\treturn c;\n\t\t}\n\n\t\t/* global CanvasGradient */\n\t\tif (c instanceof CanvasGradient) {\n\t\t\treturn color(Chart.defaults.global.defaultColor);\n\t\t}\n\n\t\treturn color(c);\n\t};\n\thelpers.addResizeListener = function(node, callback) {\n\t\t// Hide an iframe before the node\n\t\tvar hiddenIframe = document.createElement('iframe');\n\t\tvar hiddenIframeClass = 'chartjs-hidden-iframe';\n\n\t\tif (hiddenIframe.classlist) {\n\t\t\t// can use classlist\n\t\t\thiddenIframe.classlist.add(hiddenIframeClass);\n\t\t} else {\n\t\t\thiddenIframe.setAttribute('class', hiddenIframeClass);\n\t\t}\n\n\t\t// Set the style\n\t\thiddenIframe.tabIndex = -1;\n\t\tvar style = hiddenIframe.style;\n\t\tstyle.width = '100%';\n\t\tstyle.display = 'block';\n\t\tstyle.border = 0;\n\t\tstyle.height = 0;\n\t\tstyle.margin = 0;\n\t\tstyle.position = 'absolute';\n\t\tstyle.left = 0;\n\t\tstyle.right = 0;\n\t\tstyle.top = 0;\n\t\tstyle.bottom = 0;\n\n\t\t// Insert the iframe so that contentWindow is available\n\t\tnode.insertBefore(hiddenIframe, node.firstChild);\n\n\t\t(hiddenIframe.contentWindow || hiddenIframe).onresize = function() {\n\t\t\tif (callback) {\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t};\n\t};\n\thelpers.removeResizeListener = function(node) {\n\t\tvar hiddenIframe = node.querySelector('.chartjs-hidden-iframe');\n\n\t\t// Remove the resize detect iframe\n\t\tif (hiddenIframe) {\n\t\t\thiddenIframe.parentNode.removeChild(hiddenIframe);\n\t\t}\n\t};\n\thelpers.isArray = Array.isArray?\n\t\tfunction(obj) {\n\t\t\treturn Array.isArray(obj);\n\t\t} :\n\t\tfunction(obj) {\n\t\t\treturn Object.prototype.toString.call(obj) === '[object Array]';\n\t\t};\n\t// ! @see http://stackoverflow.com/a/14853974\n\thelpers.arrayEquals = function(a0, a1) {\n\t\tvar i, ilen, v0, v1;\n\n\t\tif (!a0 || !a1 || a0.length !== a1.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (i = 0, ilen=a0.length; i < ilen; ++i) {\n\t\t\tv0 = a0[i];\n\t\t\tv1 = a1[i];\n\n\t\t\tif (v0 instanceof Array && v1 instanceof Array) {\n\t\t\t\tif (!helpers.arrayEquals(v0, v1)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (v0 !== v1) {\n\t\t\t\t// NOTE: two different object instances will never be equal: {x:20} != {x:20}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\thelpers.callCallback = function(fn, args, _tArg) {\n\t\tif (fn && typeof fn.call === 'function') {\n\t\t\tfn.apply(_tArg, args);\n\t\t}\n\t};\n\thelpers.getHoverColor = function(colorValue) {\n\t\t/* global CanvasPattern */\n\t\treturn (colorValue instanceof CanvasPattern) ?\n\t\t\tcolorValue :\n\t\t\thelpers.color(colorValue).saturate(0.5).darken(0.1).rgbString();\n\t};\n};\n","/* MIT license */\nvar convert = require('color-convert');\nvar string = require('chartjs-color-string');\n\nvar Color = function (obj) {\n\tif (obj instanceof Color) {\n\t\treturn obj;\n\t}\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(obj);\n\t}\n\n\tthis.valid = false;\n\tthis.values = {\n\t\trgb: [0, 0, 0],\n\t\thsl: [0, 0, 0],\n\t\thsv: [0, 0, 0],\n\t\thwb: [0, 0, 0],\n\t\tcmyk: [0, 0, 0, 0],\n\t\talpha: 1\n\t};\n\n\t// parse Color() argument\n\tvar vals;\n\tif (typeof obj === 'string') {\n\t\tvals = string.getRgba(obj);\n\t\tif (vals) {\n\t\t\tthis.setValues('rgb', vals);\n\t\t} else if (vals = string.getHsla(obj)) {\n\t\t\tthis.setValues('hsl', vals);\n\t\t} else if (vals = string.getHwb(obj)) {\n\t\t\tthis.setValues('hwb', vals);\n\t\t}\n\t} else if (typeof obj === 'object') {\n\t\tvals = obj;\n\t\tif (vals.r !== undefined || vals.red !== undefined) {\n\t\t\tthis.setValues('rgb', vals);\n\t\t} else if (vals.l !== undefined || vals.lightness !== undefined) {\n\t\t\tthis.setValues('hsl', vals);\n\t\t} else if (vals.v !== undefined || vals.value !== undefined) {\n\t\t\tthis.setValues('hsv', vals);\n\t\t} else if (vals.w !== undefined || vals.whiteness !== undefined) {\n\t\t\tthis.setValues('hwb', vals);\n\t\t} else if (vals.c !== undefined || vals.cyan !== undefined) {\n\t\t\tthis.setValues('cmyk', vals);\n\t\t}\n\t}\n};\n\nColor.prototype = {\n\tisValid: function () {\n\t\treturn this.valid;\n\t},\n\trgb: function () {\n\t\treturn this.setSpace('rgb', arguments);\n\t},\n\thsl: function () {\n\t\treturn this.setSpace('hsl', arguments);\n\t},\n\thsv: function () {\n\t\treturn this.setSpace('hsv', arguments);\n\t},\n\thwb: function () {\n\t\treturn this.setSpace('hwb', arguments);\n\t},\n\tcmyk: function () {\n\t\treturn this.setSpace('cmyk', arguments);\n\t},\n\n\trgbArray: function () {\n\t\treturn this.values.rgb;\n\t},\n\thslArray: function () {\n\t\treturn this.values.hsl;\n\t},\n\thsvArray: function () {\n\t\treturn this.values.hsv;\n\t},\n\thwbArray: function () {\n\t\tvar values = this.values;\n\t\tif (values.alpha !== 1) {\n\t\t\treturn values.hwb.concat([values.alpha]);\n\t\t}\n\t\treturn values.hwb;\n\t},\n\tcmykArray: function () {\n\t\treturn this.values.cmyk;\n\t},\n\trgbaArray: function () {\n\t\tvar values = this.values;\n\t\treturn values.rgb.concat([values.alpha]);\n\t},\n\thslaArray: function () {\n\t\tvar values = this.values;\n\t\treturn values.hsl.concat([values.alpha]);\n\t},\n\talpha: function (val) {\n\t\tif (val === undefined) {\n\t\t\treturn this.values.alpha;\n\t\t}\n\t\tthis.setValues('alpha', val);\n\t\treturn this;\n\t},\n\n\tred: function (val) {\n\t\treturn this.setChannel('rgb', 0, val);\n\t},\n\tgreen: function (val) {\n\t\treturn this.setChannel('rgb', 1, val);\n\t},\n\tblue: function (val) {\n\t\treturn this.setChannel('rgb', 2, val);\n\t},\n\thue: function (val) {\n\t\tif (val) {\n\t\t\tval %= 360;\n\t\t\tval = val < 0 ? 360 + val : val;\n\t\t}\n\t\treturn this.setChannel('hsl', 0, val);\n\t},\n\tsaturation: function (val) {\n\t\treturn this.setChannel('hsl', 1, val);\n\t},\n\tlightness: function (val) {\n\t\treturn this.setChannel('hsl', 2, val);\n\t},\n\tsaturationv: function (val) {\n\t\treturn this.setChannel('hsv', 1, val);\n\t},\n\twhiteness: function (val) {\n\t\treturn this.setChannel('hwb', 1, val);\n\t},\n\tblackness: function (val) {\n\t\treturn this.setChannel('hwb', 2, val);\n\t},\n\tvalue: function (val) {\n\t\treturn this.setChannel('hsv', 2, val);\n\t},\n\tcyan: function (val) {\n\t\treturn this.setChannel('cmyk', 0, val);\n\t},\n\tmagenta: function (val) {\n\t\treturn this.setChannel('cmyk', 1, val);\n\t},\n\tyellow: function (val) {\n\t\treturn this.setChannel('cmyk', 2, val);\n\t},\n\tblack: function (val) {\n\t\treturn this.setChannel('cmyk', 3, val);\n\t},\n\n\thexString: function () {\n\t\treturn string.hexString(this.values.rgb);\n\t},\n\trgbString: function () {\n\t\treturn string.rgbString(this.values.rgb, this.values.alpha);\n\t},\n\trgbaString: function () {\n\t\treturn string.rgbaString(this.values.rgb, this.values.alpha);\n\t},\n\tpercentString: function () {\n\t\treturn string.percentString(this.values.rgb, this.values.alpha);\n\t},\n\thslString: function () {\n\t\treturn string.hslString(this.values.hsl, this.values.alpha);\n\t},\n\thslaString: function () {\n\t\treturn string.hslaString(this.values.hsl, this.values.alpha);\n\t},\n\thwbString: function () {\n\t\treturn string.hwbString(this.values.hwb, this.values.alpha);\n\t},\n\tkeyword: function () {\n\t\treturn string.keyword(this.values.rgb, this.values.alpha);\n\t},\n\n\trgbNumber: function () {\n\t\tvar rgb = this.values.rgb;\n\t\treturn (rgb[0] << 16) | (rgb[1] << 8) | rgb[2];\n\t},\n\n\tluminosity: function () {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tvar rgb = this.values.rgb;\n\t\tvar lum = [];\n\t\tfor (var i = 0; i < rgb.length; i++) {\n\t\t\tvar chan = rgb[i] / 255;\n\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\n\t\t}\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast: function (color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tvar lum1 = this.luminosity();\n\t\tvar lum2 = color2.luminosity();\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel: function (color2) {\n\t\tvar contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7.1) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tdark: function () {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tvar rgb = this.values.rgb;\n\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n\t\treturn yiq < 128;\n\t},\n\n\tlight: function () {\n\t\treturn !this.dark();\n\t},\n\n\tnegate: function () {\n\t\tvar rgb = [];\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\trgb[i] = 255 - this.values.rgb[i];\n\t\t}\n\t\tthis.setValues('rgb', rgb);\n\t\treturn this;\n\t},\n\n\tlighten: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[2] += hsl[2] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tdarken: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[2] -= hsl[2] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tsaturate: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[1] += hsl[1] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tdesaturate: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[1] -= hsl[1] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\twhiten: function (ratio) {\n\t\tvar hwb = this.values.hwb;\n\t\thwb[1] += hwb[1] * ratio;\n\t\tthis.setValues('hwb', hwb);\n\t\treturn this;\n\t},\n\n\tblacken: function (ratio) {\n\t\tvar hwb = this.values.hwb;\n\t\thwb[2] += hwb[2] * ratio;\n\t\tthis.setValues('hwb', hwb);\n\t\treturn this;\n\t},\n\n\tgreyscale: function () {\n\t\tvar rgb = this.values.rgb;\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\tthis.setValues('rgb', [val, val, val]);\n\t\treturn this;\n\t},\n\n\tclearer: function (ratio) {\n\t\tvar alpha = this.values.alpha;\n\t\tthis.setValues('alpha', alpha - (alpha * ratio));\n\t\treturn this;\n\t},\n\n\topaquer: function (ratio) {\n\t\tvar alpha = this.values.alpha;\n\t\tthis.setValues('alpha', alpha + (alpha * ratio));\n\t\treturn this;\n\t},\n\n\trotate: function (degrees) {\n\t\tvar hsl = this.values.hsl;\n\t\tvar hue = (hsl[0] + degrees) % 360;\n\t\thsl[0] = hue < 0 ? 360 + hue : hue;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\t/**\n\t * Ported from sass implementation in C\n\t * https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t */\n\tmix: function (mixinColor, weight) {\n\t\tvar color1 = this;\n\t\tvar color2 = mixinColor;\n\t\tvar p = weight === undefined ? 0.5 : weight;\n\n\t\tvar w = 2 * p - 1;\n\t\tvar a = color1.alpha() - color2.alpha();\n\n\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n\t\tvar w2 = 1 - w1;\n\n\t\treturn this\n\t\t\t.rgb(\n\t\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\t\tw1 * color1.blue() + w2 * color2.blue()\n\t\t\t)\n\t\t\t.alpha(color1.alpha() * p + color2.alpha() * (1 - p));\n\t},\n\n\ttoJSON: function () {\n\t\treturn this.rgb();\n\t},\n\n\tclone: function () {\n\t\t// NOTE(SB): using node-clone creates a dependency to Buffer when using browserify,\n\t\t// making the final build way to big to embed in Chart.js. So let's do it manually,\n\t\t// assuming that values to clone are 1 dimension arrays containing only numbers,\n\t\t// except 'alpha' which is a number.\n\t\tvar result = new Color();\n\t\tvar source = this.values;\n\t\tvar target = result.values;\n\t\tvar value, type;\n\n\t\tfor (var prop in source) {\n\t\t\tif (source.hasOwnProperty(prop)) {\n\t\t\t\tvalue = source[prop];\n\t\t\t\ttype = ({}).toString.call(value);\n\t\t\t\tif (type === '[object Array]') {\n\t\t\t\t\ttarget[prop] = value.slice(0);\n\t\t\t\t} else if (type === '[object Number]') {\n\t\t\t\t\ttarget[prop] = value;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('unexpected color value:', value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nColor.prototype.spaces = {\n\trgb: ['red', 'green', 'blue'],\n\thsl: ['hue', 'saturation', 'lightness'],\n\thsv: ['hue', 'saturation', 'value'],\n\thwb: ['hue', 'whiteness', 'blackness'],\n\tcmyk: ['cyan', 'magenta', 'yellow', 'black']\n};\n\nColor.prototype.maxes = {\n\trgb: [255, 255, 255],\n\thsl: [360, 100, 100],\n\thsv: [360, 100, 100],\n\thwb: [360, 100, 100],\n\tcmyk: [100, 100, 100, 100]\n};\n\nColor.prototype.getValues = function (space) {\n\tvar values = this.values;\n\tvar vals = {};\n\n\tfor (var i = 0; i < space.length; i++) {\n\t\tvals[space.charAt(i)] = values[space][i];\n\t}\n\n\tif (values.alpha !== 1) {\n\t\tvals.a = values.alpha;\n\t}\n\n\t// {r: 255, g: 255, b: 255, a: 0.4}\n\treturn vals;\n};\n\nColor.prototype.setValues = function (space, vals) {\n\tvar values = this.values;\n\tvar spaces = this.spaces;\n\tvar maxes = this.maxes;\n\tvar alpha = 1;\n\tvar i;\n\n\tthis.valid = true;\n\n\tif (space === 'alpha') {\n\t\talpha = vals;\n\t} else if (vals.length) {\n\t\t// [10, 10, 10]\n\t\tvalues[space] = vals.slice(0, space.length);\n\t\talpha = vals[space.length];\n\t} else if (vals[space.charAt(0)] !== undefined) {\n\t\t// {r: 10, g: 10, b: 10}\n\t\tfor (i = 0; i < space.length; i++) {\n\t\t\tvalues[space][i] = vals[space.charAt(i)];\n\t\t}\n\n\t\talpha = vals.a;\n\t} else if (vals[spaces[space][0]] !== undefined) {\n\t\t// {red: 10, green: 10, blue: 10}\n\t\tvar chans = spaces[space];\n\n\t\tfor (i = 0; i < space.length; i++) {\n\t\t\tvalues[space][i] = vals[chans[i]];\n\t\t}\n\n\t\talpha = vals.alpha;\n\t}\n\n\tvalues.alpha = Math.max(0, Math.min(1, (alpha === undefined ? values.alpha : alpha)));\n\n\tif (space === 'alpha') {\n\t\treturn false;\n\t}\n\n\tvar capped;\n\n\t// cap values of the space prior converting all values\n\tfor (i = 0; i < space.length; i++) {\n\t\tcapped = Math.max(0, Math.min(maxes[space][i], values[space][i]));\n\t\tvalues[space][i] = Math.round(capped);\n\t}\n\n\t// convert to all the other color spaces\n\tfor (var sname in spaces) {\n\t\tif (sname !== space) {\n\t\t\tvalues[sname] = convert[space][sname](values[space]);\n\t\t}\n\t}\n\n\treturn true;\n};\n\nColor.prototype.setSpace = function (space, args) {\n\tvar vals = args[0];\n\n\tif (vals === undefined) {\n\t\t// color.rgb()\n\t\treturn this.getValues(space);\n\t}\n\n\t// color.rgb(10, 10, 10)\n\tif (typeof vals === 'number') {\n\t\tvals = Array.prototype.slice.call(args);\n\t}\n\n\tthis.setValues(space, vals);\n\treturn this;\n};\n\nColor.prototype.setChannel = function (space, index, val) {\n\tvar svalues = this.values[space];\n\tif (val === undefined) {\n\t\t// color.red()\n\t\treturn svalues[index];\n\t} else if (val === svalues[index]) {\n\t\t// color.red(color.red())\n\t\treturn this;\n\t}\n\n\t// color.red(100)\n\tsvalues[index] = val;\n\tthis.setValues(space, svalues);\n\n\treturn this;\n};\n\nif (typeof window !== 'undefined') {\n\twindow.Color = Color;\n}\n\nmodule.exports = Color;\n","var conversions = require('./conversions');\nvar route = require('./route');\n\nvar convert = {};\n\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\tvar result = fn(args);\n\n\t\t// we're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (var len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tvar routes = route(fromModel);\n\tvar routeModels = Object.keys(routes);\n\n\trouteModels.forEach(function (toModel) {\n\t\tvar fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","var conversions = require('./conversions');\n\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tvar graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tvar models = Object.keys(conversions);\n\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tvar graph = buildGraph();\n\tvar queue = [fromModel]; // unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tvar current = queue.pop();\n\t\tvar adjacents = Object.keys(conversions[current]);\n\n\t\tfor (var len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tvar adjacent = adjacents[i];\n\t\t\tvar node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tvar path = [graph[toModel].parent, toModel];\n\tvar fn = conversions[graph[toModel].parent][toModel];\n\n\tvar cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tvar graph = deriveBFS(fromModel);\n\tvar conversion = {};\n\n\tvar models = Object.keys(graph);\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tvar toModel = models[i];\n\t\tvar node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// no possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","/* MIT license */\nvar colorNames = require('color-name');\n\nmodule.exports = {\n   getRgba: getRgba,\n   getHsla: getHsla,\n   getRgb: getRgb,\n   getHsl: getHsl,\n   getHwb: getHwb,\n   getAlpha: getAlpha,\n\n   hexString: hexString,\n   rgbString: rgbString,\n   rgbaString: rgbaString,\n   percentString: percentString,\n   percentaString: percentaString,\n   hslString: hslString,\n   hslaString: hslaString,\n   hwbString: hwbString,\n   keyword: keyword\n}\n\nfunction getRgba(string) {\n   if (!string) {\n      return;\n   }\n   var abbr =  /^#([a-fA-F0-9]{3,4})$/i,\n       hex =  /^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,\n       rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/i,\n       per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/i,\n       keyword = /(\\w+)/;\n\n   var rgb = [0, 0, 0],\n       a = 1,\n       match = string.match(abbr),\n       hexAlpha = \"\";\n   if (match) {\n      match = match[1];\n      hexAlpha = match[3];\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match[i] + match[i], 16);\n      }\n      if (hexAlpha) {\n         a = Math.round((parseInt(hexAlpha + hexAlpha, 16) / 255) * 100) / 100;\n      }\n   }\n   else if (match = string.match(hex)) {\n      hexAlpha = match[2];\n      match = match[1];\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match.slice(i * 2, i * 2 + 2), 16);\n      }\n      if (hexAlpha) {\n         a = Math.round((parseInt(hexAlpha, 16) / 255) * 100) / 100;\n      }\n   }\n   else if (match = string.match(rgba)) {\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match[i + 1]);\n      }\n      a = parseFloat(match[4]);\n   }\n   else if (match = string.match(per)) {\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n      }\n      a = parseFloat(match[4]);\n   }\n   else if (match = string.match(keyword)) {\n      if (match[1] == \"transparent\") {\n         return [0, 0, 0, 0];\n      }\n      rgb = colorNames[match[1]];\n      if (!rgb) {\n         return;\n      }\n   }\n\n   for (var i = 0; i < rgb.length; i++) {\n      rgb[i] = scale(rgb[i], 0, 255);\n   }\n   if (!a && a != 0) {\n      a = 1;\n   }\n   else {\n      a = scale(a, 0, 1);\n   }\n   rgb[3] = a;\n   return rgb;\n}\n\nfunction getHsla(string) {\n   if (!string) {\n      return;\n   }\n   var hsl = /^hsla?\\(\\s*([+-]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)/;\n   var match = string.match(hsl);\n   if (match) {\n      var alpha = parseFloat(match[4]);\n      var h = scale(parseInt(match[1]), 0, 360),\n          s = scale(parseFloat(match[2]), 0, 100),\n          l = scale(parseFloat(match[3]), 0, 100),\n          a = scale(isNaN(alpha) ? 1 : alpha, 0, 1);\n      return [h, s, l, a];\n   }\n}\n\nfunction getHwb(string) {\n   if (!string) {\n      return;\n   }\n   var hwb = /^hwb\\(\\s*([+-]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)/;\n   var match = string.match(hwb);\n   if (match) {\n    var alpha = parseFloat(match[4]);\n      var h = scale(parseInt(match[1]), 0, 360),\n          w = scale(parseFloat(match[2]), 0, 100),\n          b = scale(parseFloat(match[3]), 0, 100),\n          a = scale(isNaN(alpha) ? 1 : alpha, 0, 1);\n      return [h, w, b, a];\n   }\n}\n\nfunction getRgb(string) {\n   var rgba = getRgba(string);\n   return rgba && rgba.slice(0, 3);\n}\n\nfunction getHsl(string) {\n  var hsla = getHsla(string);\n  return hsla && hsla.slice(0, 3);\n}\n\nfunction getAlpha(string) {\n   var vals = getRgba(string);\n   if (vals) {\n      return vals[3];\n   }\n   else if (vals = getHsla(string)) {\n      return vals[3];\n   }\n   else if (vals = getHwb(string)) {\n      return vals[3];\n   }\n}\n\n// generators\nfunction hexString(rgba, a) {\n   var a = (a !== undefined && rgba.length === 3) ? a : rgba[3];\n   return \"#\" + hexDouble(rgba[0]) \n              + hexDouble(rgba[1])\n              + hexDouble(rgba[2])\n              + (\n                 (a >= 0 && a < 1)\n                 ? hexDouble(Math.round(a * 255))\n                 : \"\"\n              );\n}\n\nfunction rgbString(rgba, alpha) {\n   if (alpha < 1 || (rgba[3] && rgba[3] < 1)) {\n      return rgbaString(rgba, alpha);\n   }\n   return \"rgb(\" + rgba[0] + \", \" + rgba[1] + \", \" + rgba[2] + \")\";\n}\n\nfunction rgbaString(rgba, alpha) {\n   if (alpha === undefined) {\n      alpha = (rgba[3] !== undefined ? rgba[3] : 1);\n   }\n   return \"rgba(\" + rgba[0] + \", \" + rgba[1] + \", \" + rgba[2]\n           + \", \" + alpha + \")\";\n}\n\nfunction percentString(rgba, alpha) {\n   if (alpha < 1 || (rgba[3] && rgba[3] < 1)) {\n      return percentaString(rgba, alpha);\n   }\n   var r = Math.round(rgba[0]/255 * 100),\n       g = Math.round(rgba[1]/255 * 100),\n       b = Math.round(rgba[2]/255 * 100);\n\n   return \"rgb(\" + r + \"%, \" + g + \"%, \" + b + \"%)\";\n}\n\nfunction percentaString(rgba, alpha) {\n   var r = Math.round(rgba[0]/255 * 100),\n       g = Math.round(rgba[1]/255 * 100),\n       b = Math.round(rgba[2]/255 * 100);\n   return \"rgba(\" + r + \"%, \" + g + \"%, \" + b + \"%, \" + (alpha || rgba[3] || 1) + \")\";\n}\n\nfunction hslString(hsla, alpha) {\n   if (alpha < 1 || (hsla[3] && hsla[3] < 1)) {\n      return hslaString(hsla, alpha);\n   }\n   return \"hsl(\" + hsla[0] + \", \" + hsla[1] + \"%, \" + hsla[2] + \"%)\";\n}\n\nfunction hslaString(hsla, alpha) {\n   if (alpha === undefined) {\n      alpha = (hsla[3] !== undefined ? hsla[3] : 1);\n   }\n   return \"hsla(\" + hsla[0] + \", \" + hsla[1] + \"%, \" + hsla[2] + \"%, \"\n           + alpha + \")\";\n}\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\nfunction hwbString(hwb, alpha) {\n   if (alpha === undefined) {\n      alpha = (hwb[3] !== undefined ? hwb[3] : 1);\n   }\n   return \"hwb(\" + hwb[0] + \", \" + hwb[1] + \"%, \" + hwb[2] + \"%\"\n           + (alpha !== undefined && alpha !== 1 ? \", \" + alpha : \"\") + \")\";\n}\n\nfunction keyword(rgb) {\n  return reverseNames[rgb.slice(0, 3)];\n}\n\n// helpers\nfunction scale(num, min, max) {\n   return Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n  var str = num.toString(16).toUpperCase();\n  return (str.length < 2) ? \"0\" + str : str;\n}\n\n\n//create a list of reverse color names\nvar reverseNames = {};\nfor (var name in colorNames) {\n   reverseNames[colorNames[name]] = name;\n}\n","'use strict';\n\nmodule.exports = function(Chart) {\n\t// Global Chart canvas helpers object for drawing items to canvas\n\tvar helpers = Chart.canvasHelpers = {};\n\n\thelpers.drawPoint = function(ctx, pointStyle, radius, x, y) {\n\t\tvar type, edgeLength, xOffset, yOffset, height, size;\n\n\t\tif (typeof pointStyle === 'object') {\n\t\t\ttype = pointStyle.toString();\n\t\t\tif (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n\t\t\t\tctx.drawImage(pointStyle, x - pointStyle.width / 2, y - pointStyle.height / 2);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (isNaN(radius) || radius <= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (pointStyle) {\n\t\t// Default includes circle\n\t\tdefault:\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t\tbreak;\n\t\tcase 'triangle':\n\t\t\tctx.beginPath();\n\t\t\tedgeLength = 3 * radius / Math.sqrt(3);\n\t\t\theight = edgeLength * Math.sqrt(3) / 2;\n\t\t\tctx.moveTo(x - edgeLength / 2, y + height / 3);\n\t\t\tctx.lineTo(x + edgeLength / 2, y + height / 3);\n\t\t\tctx.lineTo(x, y - 2 * height / 3);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t\tbreak;\n\t\tcase 'rect':\n\t\t\tsize = 1 / Math.SQRT2 * radius;\n\t\t\tctx.beginPath();\n\t\t\tctx.fillRect(x - size, y - size, 2 * size, 2 * size);\n\t\t\tctx.strokeRect(x - size, y - size, 2 * size, 2 * size);\n\t\t\tbreak;\n\t\tcase 'rectRot':\n\t\t\tsize = 1 / Math.SQRT2 * radius;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x - size, y);\n\t\t\tctx.lineTo(x, y + size);\n\t\t\tctx.lineTo(x + size, y);\n\t\t\tctx.lineTo(x, y - size);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t\tbreak;\n\t\tcase 'cross':\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x, y + radius);\n\t\t\tctx.lineTo(x, y - radius);\n\t\t\tctx.moveTo(x - radius, y);\n\t\t\tctx.lineTo(x + radius, y);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\tcase 'crossRot':\n\t\t\tctx.beginPath();\n\t\t\txOffset = Math.cos(Math.PI / 4) * radius;\n\t\t\tyOffset = Math.sin(Math.PI / 4) * radius;\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\n\t\t\tctx.moveTo(x - xOffset, y + yOffset);\n\t\t\tctx.lineTo(x + xOffset, y - yOffset);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\tcase 'star':\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x, y + radius);\n\t\t\tctx.lineTo(x, y - radius);\n\t\t\tctx.moveTo(x - radius, y);\n\t\t\tctx.lineTo(x + radius, y);\n\t\t\txOffset = Math.cos(Math.PI / 4) * radius;\n\t\t\tyOffset = Math.sin(Math.PI / 4) * radius;\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\n\t\t\tctx.moveTo(x - xOffset, y + yOffset);\n\t\t\tctx.lineTo(x + xOffset, y - yOffset);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\tcase 'line':\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x - radius, y);\n\t\t\tctx.lineTo(x + radius, y);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\tcase 'dash':\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x, y);\n\t\t\tctx.lineTo(x + radius, y);\n\t\t\tctx.closePath();\n\t\t\tbreak;\n\t\t}\n\n\t\tctx.stroke();\n\t};\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.elements = {};\n\n\tChart.Element = function(configuration) {\n\t\thelpers.extend(this, configuration);\n\t\tthis.initialize.apply(this, arguments);\n\t};\n\n\thelpers.extend(Chart.Element.prototype, {\n\n\t\tinitialize: function() {\n\t\t\tthis.hidden = false;\n\t\t},\n\n\t\tpivot: function() {\n\t\t\tvar me = this;\n\t\t\tif (!me._view) {\n\t\t\t\tme._view = helpers.clone(me._model);\n\t\t\t}\n\t\t\tme._start = helpers.clone(me._view);\n\t\t\treturn me;\n\t\t},\n\n\t\ttransition: function(ease) {\n\t\t\tvar me = this;\n\n\t\t\tif (!me._view) {\n\t\t\t\tme._view = helpers.clone(me._model);\n\t\t\t}\n\n\t\t\t// No animation -> No Transition\n\t\t\tif (ease === 1) {\n\t\t\t\tme._view = me._model;\n\t\t\t\tme._start = null;\n\t\t\t\treturn me;\n\t\t\t}\n\n\t\t\tif (!me._start) {\n\t\t\t\tme.pivot();\n\t\t\t}\n\n\t\t\thelpers.each(me._model, function(value, key) {\n\n\t\t\t\tif (key[0] === '_') {\n\t\t\t\t\t// Only non-underscored properties\n\t\t\t\t// Init if doesn't exist\n\t\t\t\t} else if (!me._view.hasOwnProperty(key)) {\n\t\t\t\t\tif (typeof value === 'number' && !isNaN(me._view[key])) {\n\t\t\t\t\t\tme._view[key] = value * ease;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tme._view[key] = value;\n\t\t\t\t\t}\n\t\t\t\t// No unnecessary computations\n\t\t\t\t} else if (value === me._view[key]) {\n\t\t\t\t\t// It's the same! Woohoo!\n\t\t\t\t// Color transitions if possible\n\t\t\t\t} else if (typeof value === 'string') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar color = helpers.color(me._model[key]).mix(helpers.color(me._start[key]), ease);\n\t\t\t\t\t\tme._view[key] = color.rgbString();\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tme._view[key] = value;\n\t\t\t\t\t}\n\t\t\t\t// Number transitions\n\t\t\t\t} else if (typeof value === 'number') {\n\t\t\t\t\tvar startVal = me._start[key] !== undefined && isNaN(me._start[key]) === false ? me._start[key] : 0;\n\t\t\t\t\tme._view[key] = ((me._model[key] - startVal) * ease) + startVal;\n\t\t\t\t// Everything else\n\t\t\t\t} else {\n\t\t\t\t\tme._view[key] = value;\n\t\t\t\t}\n\t\t\t}, me);\n\n\t\t\treturn me;\n\t\t},\n\n\t\ttooltipPosition: function() {\n\t\t\treturn {\n\t\t\t\tx: this._model.x,\n\t\t\t\ty: this._model.y\n\t\t\t};\n\t\t},\n\n\t\thasValue: function() {\n\t\t\treturn helpers.isNumber(this._model.x) && helpers.isNumber(this._model.y);\n\t\t}\n\t});\n\n\tChart.Element.extend = helpers.inherits;\n\n};\n","/* global window: false */\n'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.global.animation = {\n\t\tduration: 1000,\n\t\teasing: 'easeOutQuart',\n\t\tonProgress: helpers.noop,\n\t\tonComplete: helpers.noop\n\t};\n\n\tChart.Animation = Chart.Element.extend({\n\t\tcurrentStep: null, // the current animation step\n\t\tnumSteps: 60, // default number of steps\n\t\teasing: '', // the easing to use for this animation\n\t\trender: null, // render function used by the animation service\n\n\t\tonAnimationProgress: null, // user specified callback to fire on each step of the animation\n\t\tonAnimationComplete: null // user specified callback to fire when the animation finishes\n\t});\n\n\tChart.animationService = {\n\t\tframeDuration: 17,\n\t\tanimations: [],\n\t\tdropFrames: 0,\n\t\trequest: null,\n\t\taddAnimation: function(chartInstance, animationObject, duration, lazy) {\n\t\t\tvar me = this;\n\n\t\t\tif (!lazy) {\n\t\t\t\tchartInstance.animating = true;\n\t\t\t}\n\n\t\t\tfor (var index = 0; index < me.animations.length; ++index) {\n\t\t\t\tif (me.animations[index].chartInstance === chartInstance) {\n\t\t\t\t\t// replacing an in progress animation\n\t\t\t\t\tme.animations[index].animationObject = animationObject;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.animations.push({\n\t\t\t\tchartInstance: chartInstance,\n\t\t\t\tanimationObject: animationObject\n\t\t\t});\n\n\t\t\t// If there are no animations queued, manually kickstart a digest, for lack of a better word\n\t\t\tif (me.animations.length === 1) {\n\t\t\t\tme.requestAnimationFrame();\n\t\t\t}\n\t\t},\n\t\t// Cancel the animation for a given chart instance\n\t\tcancelAnimation: function(chartInstance) {\n\t\t\tvar index = helpers.findIndex(this.animations, function(animationWrapper) {\n\t\t\t\treturn animationWrapper.chartInstance === chartInstance;\n\t\t\t});\n\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.animations.splice(index, 1);\n\t\t\t\tchartInstance.animating = false;\n\t\t\t}\n\t\t},\n\t\trequestAnimationFrame: function() {\n\t\t\tvar me = this;\n\t\t\tif (me.request === null) {\n\t\t\t\t// Skip animation frame requests until the active one is executed.\n\t\t\t\t// This can happen when processing mouse events, e.g. 'mousemove'\n\t\t\t\t// and 'mouseout' events will trigger multiple renders.\n\t\t\t\tme.request = helpers.requestAnimFrame.call(window, function() {\n\t\t\t\t\tme.request = null;\n\t\t\t\t\tme.startDigest();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tstartDigest: function() {\n\t\t\tvar me = this;\n\n\t\t\tvar startTime = Date.now();\n\t\t\tvar framesToDrop = 0;\n\n\t\t\tif (me.dropFrames > 1) {\n\t\t\t\tframesToDrop = Math.floor(me.dropFrames);\n\t\t\t\tme.dropFrames = me.dropFrames % 1;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\t\t\twhile (i < me.animations.length) {\n\t\t\t\tif (me.animations[i].animationObject.currentStep === null) {\n\t\t\t\t\tme.animations[i].animationObject.currentStep = 0;\n\t\t\t\t}\n\n\t\t\t\tme.animations[i].animationObject.currentStep += 1 + framesToDrop;\n\n\t\t\t\tif (me.animations[i].animationObject.currentStep > me.animations[i].animationObject.numSteps) {\n\t\t\t\t\tme.animations[i].animationObject.currentStep = me.animations[i].animationObject.numSteps;\n\t\t\t\t}\n\n\t\t\t\tme.animations[i].animationObject.render(me.animations[i].chartInstance, me.animations[i].animationObject);\n\t\t\t\tif (me.animations[i].animationObject.onAnimationProgress && me.animations[i].animationObject.onAnimationProgress.call) {\n\t\t\t\t\tme.animations[i].animationObject.onAnimationProgress.call(me.animations[i].chartInstance, me.animations[i]);\n\t\t\t\t}\n\n\t\t\t\tif (me.animations[i].animationObject.currentStep === me.animations[i].animationObject.numSteps) {\n\t\t\t\t\tif (me.animations[i].animationObject.onAnimationComplete && me.animations[i].animationObject.onAnimationComplete.call) {\n\t\t\t\t\t\tme.animations[i].animationObject.onAnimationComplete.call(me.animations[i].chartInstance, me.animations[i]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// executed the last frame. Remove the animation.\n\t\t\t\t\tme.animations[i].chartInstance.animating = false;\n\n\t\t\t\t\tme.animations.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar endTime = Date.now();\n\t\t\tvar dropFrames = (endTime - startTime) / me.frameDuration;\n\n\t\t\tme.dropFrames += dropFrames;\n\n\t\t\t// Do we have more stuff to animate?\n\t\t\tif (me.animations.length > 0) {\n\t\t\t\tme.requestAnimationFrame();\n\t\t\t}\n\t\t}\n\t};\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\t// Create a dictionary of chart types, to allow for extension of existing types\n\tChart.types = {};\n\n\t// Store a reference to each instance - allowing us to globally resize chart instances on window resize.\n\t// Destroy method on the chart will remove the instance of the chart from this reference.\n\tChart.instances = {};\n\n\t// Controllers available for dataset visualization eg. bar, line, slice, etc.\n\tChart.controllers = {};\n\n\t/**\n\t * @class Chart.Controller\n\t * The main controller of a chart.\n\t */\n\tChart.Controller = function(instance) {\n\n\t\tthis.chart = instance;\n\t\tthis.config = instance.config;\n\t\tthis.options = this.config.options = helpers.configMerge(Chart.defaults.global, Chart.defaults[this.config.type], this.config.options || {});\n\t\tthis.id = helpers.uid();\n\n\t\tObject.defineProperty(this, 'data', {\n\t\t\tget: function() {\n\t\t\t\treturn this.config.data;\n\t\t\t}\n\t\t});\n\n\t\t// Add the chart instance to the global namespace\n\t\tChart.instances[this.id] = this;\n\n\t\tif (this.options.responsive) {\n\t\t\t// Silent resize before chart draws\n\t\t\tthis.resize(true);\n\t\t}\n\n\t\tthis.initialize();\n\n\t\treturn this;\n\t};\n\n\thelpers.extend(Chart.Controller.prototype, /** @lends Chart.Controller */ {\n\n\t\tinitialize: function() {\n\t\t\tvar me = this;\n\t\t\t// Before init plugin notification\n\t\t\tChart.plugins.notify('beforeInit', [me]);\n\n\t\t\tme.bindEvents();\n\n\t\t\t// Make sure controllers are built first so that each dataset is bound to an axis before the scales\n\t\t\t// are built\n\t\t\tme.ensureScalesHaveIDs();\n\t\t\tme.buildOrUpdateControllers();\n\t\t\tme.buildScales();\n\t\t\tme.updateLayout();\n\t\t\tme.resetElements();\n\t\t\tme.initToolTip();\n\t\t\tme.update();\n\n\t\t\t// After init plugin notification\n\t\t\tChart.plugins.notify('afterInit', [me]);\n\n\t\t\treturn me;\n\t\t},\n\n\t\tclear: function() {\n\t\t\thelpers.clear(this.chart);\n\t\t\treturn this;\n\t\t},\n\n\t\tstop: function() {\n\t\t\t// Stops any current animation loop occuring\n\t\t\tChart.animationService.cancelAnimation(this);\n\t\t\treturn this;\n\t\t},\n\n\t\tresize: function(silent) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar canvas = chart.canvas;\n\t\t\tvar newWidth = helpers.getMaximumWidth(canvas);\n\t\t\tvar aspectRatio = chart.aspectRatio;\n\t\t\tvar newHeight = (me.options.maintainAspectRatio && isNaN(aspectRatio) === false && isFinite(aspectRatio) && aspectRatio !== 0) ? newWidth / aspectRatio : helpers.getMaximumHeight(canvas);\n\n\t\t\tvar sizeChanged = chart.width !== newWidth || chart.height !== newHeight;\n\n\t\t\tif (!sizeChanged) {\n\t\t\t\treturn me;\n\t\t\t}\n\n\t\t\tcanvas.width = chart.width = newWidth;\n\t\t\tcanvas.height = chart.height = newHeight;\n\n\t\t\thelpers.retinaScale(chart);\n\n\t\t\t// Notify any plugins about the resize\n\t\t\tvar newSize = {width: newWidth, height: newHeight};\n\t\t\tChart.plugins.notify('resize', [me, newSize]);\n\n\t\t\t// Notify of resize\n\t\t\tif (me.options.onResize) {\n\t\t\t\tme.options.onResize(me, newSize);\n\t\t\t}\n\n\t\t\tif (!silent) {\n\t\t\t\tme.stop();\n\t\t\t\tme.update(me.options.responsiveAnimationDuration);\n\t\t\t}\n\n\t\t\treturn me;\n\t\t},\n\n\t\tensureScalesHaveIDs: function() {\n\t\t\tvar options = this.options;\n\t\t\tvar scalesOptions = options.scales || {};\n\t\t\tvar scaleOptions = options.scale;\n\n\t\t\thelpers.each(scalesOptions.xAxes, function(xAxisOptions, index) {\n\t\t\t\txAxisOptions.id = xAxisOptions.id || ('x-axis-' + index);\n\t\t\t});\n\n\t\t\thelpers.each(scalesOptions.yAxes, function(yAxisOptions, index) {\n\t\t\t\tyAxisOptions.id = yAxisOptions.id || ('y-axis-' + index);\n\t\t\t});\n\n\t\t\tif (scaleOptions) {\n\t\t\t\tscaleOptions.id = scaleOptions.id || 'scale';\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Builds a map of scale ID to scale object for future lookup.\n\t\t */\n\t\tbuildScales: function() {\n\t\t\tvar me = this;\n\t\t\tvar options = me.options;\n\t\t\tvar scales = me.scales = {};\n\t\t\tvar items = [];\n\n\t\t\tif (options.scales) {\n\t\t\t\titems = items.concat(\n\t\t\t\t\t(options.scales.xAxes || []).map(function(xAxisOptions) {\n\t\t\t\t\t\treturn {options: xAxisOptions, dtype: 'category'};\n\t\t\t\t\t}),\n\t\t\t\t\t(options.scales.yAxes || []).map(function(yAxisOptions) {\n\t\t\t\t\t\treturn {options: yAxisOptions, dtype: 'linear'};\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (options.scale) {\n\t\t\t\titems.push({options: options.scale, dtype: 'radialLinear', isDefault: true});\n\t\t\t}\n\n\t\t\thelpers.each(items, function(item) {\n\t\t\t\tvar scaleOptions = item.options;\n\t\t\t\tvar scaleType = helpers.getValueOrDefault(scaleOptions.type, item.dtype);\n\t\t\t\tvar scaleClass = Chart.scaleService.getScaleConstructor(scaleType);\n\t\t\t\tif (!scaleClass) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar scale = new scaleClass({\n\t\t\t\t\tid: scaleOptions.id,\n\t\t\t\t\toptions: scaleOptions,\n\t\t\t\t\tctx: me.chart.ctx,\n\t\t\t\t\tchart: me\n\t\t\t\t});\n\n\t\t\t\tscales[scale.id] = scale;\n\n\t\t\t\t// TODO(SB): I think we should be able to remove this custom case (options.scale)\n\t\t\t\t// and consider it as a regular scale part of the \"scales\"\" map only! This would\n\t\t\t\t// make the logic easier and remove some useless? custom code.\n\t\t\t\tif (item.isDefault) {\n\t\t\t\t\tme.scale = scale;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tChart.scaleService.addScalesToLayout(this);\n\t\t},\n\n\t\tupdateLayout: function() {\n\t\t\tChart.layoutService.update(this, this.chart.width, this.chart.height);\n\t\t},\n\n\t\tbuildOrUpdateControllers: function() {\n\t\t\tvar me = this;\n\t\t\tvar types = [];\n\t\t\tvar newControllers = [];\n\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tvar meta = me.getDatasetMeta(datasetIndex);\n\t\t\t\tif (!meta.type) {\n\t\t\t\t\tmeta.type = dataset.type || me.config.type;\n\t\t\t\t}\n\n\t\t\t\ttypes.push(meta.type);\n\n\t\t\t\tif (meta.controller) {\n\t\t\t\t\tmeta.controller.updateIndex(datasetIndex);\n\t\t\t\t} else {\n\t\t\t\t\tmeta.controller = new Chart.controllers[meta.type](me, datasetIndex);\n\t\t\t\t\tnewControllers.push(meta.controller);\n\t\t\t\t}\n\t\t\t}, me);\n\n\t\t\tif (types.length > 1) {\n\t\t\t\tfor (var i = 1; i < types.length; i++) {\n\t\t\t\t\tif (types[i] !== types[i - 1]) {\n\t\t\t\t\t\tme.isCombo = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newControllers;\n\t\t},\n\n\t\tresetElements: function() {\n\t\t\tvar me = this;\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tme.getDatasetMeta(datasetIndex).controller.reset();\n\t\t\t}, me);\n\t\t},\n\n\t\tupdate: function(animationDuration, lazy) {\n\t\t\tvar me = this;\n\t\t\tChart.plugins.notify('beforeUpdate', [me]);\n\n\t\t\t// In case the entire data object changed\n\t\t\tme.tooltip._data = me.data;\n\n\t\t\t// Make sure dataset controllers are updated and new controllers are reset\n\t\t\tvar newControllers = me.buildOrUpdateControllers();\n\n\t\t\t// Make sure all dataset controllers have correct meta data counts\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tme.getDatasetMeta(datasetIndex).controller.buildOrUpdateElements();\n\t\t\t}, me);\n\n\t\t\tChart.layoutService.update(me, me.chart.width, me.chart.height);\n\n\t\t\t// Apply changes to the dataets that require the scales to have been calculated i.e BorderColor chages\n\t\t\tChart.plugins.notify('afterScaleUpdate', [me]);\n\n\t\t\t// Can only reset the new controllers after the scales have been updated\n\t\t\thelpers.each(newControllers, function(controller) {\n\t\t\t\tcontroller.reset();\n\t\t\t});\n\n\t\t\tme.updateDatasets();\n\n\t\t\t// Do this before render so that any plugins that need final scale updates can use it\n\t\t\tChart.plugins.notify('afterUpdate', [me]);\n\n\t\t\tme.render(animationDuration, lazy);\n\t\t},\n\n\t\t/**\n\t\t * @method beforeDatasetsUpdate\n\t\t * @description Called before all datasets are updated. If a plugin returns false,\n\t\t * the datasets update will be cancelled until another chart update is triggered.\n\t\t * @param {Object} instance the chart instance being updated.\n\t\t * @returns {Boolean} false to cancel the datasets update.\n\t\t * @memberof Chart.PluginBase\n\t\t * @since version 2.1.5\n\t\t * @instance\n\t\t */\n\n\t\t/**\n\t\t * @method afterDatasetsUpdate\n\t\t * @description Called after all datasets have been updated. Note that this\n\t\t * extension will not be called if the datasets update has been cancelled.\n\t\t * @param {Object} instance the chart instance being updated.\n\t\t * @memberof Chart.PluginBase\n\t\t * @since version 2.1.5\n\t\t * @instance\n\t\t */\n\n\t\t/**\n\t\t * Updates all datasets unless a plugin returns false to the beforeDatasetsUpdate\n\t\t * extension, in which case no datasets will be updated and the afterDatasetsUpdate\n\t\t * notification will be skipped.\n\t\t * @protected\n\t\t * @instance\n\t\t */\n\t\tupdateDatasets: function() {\n\t\t\tvar me = this;\n\t\t\tvar i, ilen;\n\n\t\t\tif (Chart.plugins.notify('beforeDatasetsUpdate', [me])) {\n\t\t\t\tfor (i = 0, ilen = me.data.datasets.length; i < ilen; ++i) {\n\t\t\t\t\tme.getDatasetMeta(i).controller.update();\n\t\t\t\t}\n\n\t\t\t\tChart.plugins.notify('afterDatasetsUpdate', [me]);\n\t\t\t}\n\t\t},\n\n\t\trender: function(duration, lazy) {\n\t\t\tvar me = this;\n\t\t\tChart.plugins.notify('beforeRender', [me]);\n\n\t\t\tvar animationOptions = me.options.animation;\n\t\t\tif (animationOptions && ((typeof duration !== 'undefined' && duration !== 0) || (typeof duration === 'undefined' && animationOptions.duration !== 0))) {\n\t\t\t\tvar animation = new Chart.Animation();\n\t\t\t\tanimation.numSteps = (duration || animationOptions.duration) / 16.66; // 60 fps\n\t\t\t\tanimation.easing = animationOptions.easing;\n\n\t\t\t\t// render function\n\t\t\t\tanimation.render = function(chartInstance, animationObject) {\n\t\t\t\t\tvar easingFunction = helpers.easingEffects[animationObject.easing];\n\t\t\t\t\tvar stepDecimal = animationObject.currentStep / animationObject.numSteps;\n\t\t\t\t\tvar easeDecimal = easingFunction(stepDecimal);\n\n\t\t\t\t\tchartInstance.draw(easeDecimal, stepDecimal, animationObject.currentStep);\n\t\t\t\t};\n\n\t\t\t\t// user events\n\t\t\t\tanimation.onAnimationProgress = animationOptions.onProgress;\n\t\t\t\tanimation.onAnimationComplete = animationOptions.onComplete;\n\n\t\t\t\tChart.animationService.addAnimation(me, animation, duration, lazy);\n\t\t\t} else {\n\t\t\t\tme.draw();\n\t\t\t\tif (animationOptions && animationOptions.onComplete && animationOptions.onComplete.call) {\n\t\t\t\t\tanimationOptions.onComplete.call(me);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn me;\n\t\t},\n\n\t\tdraw: function(ease) {\n\t\t\tvar me = this;\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\tme.clear();\n\n\t\t\tChart.plugins.notify('beforeDraw', [me, easingDecimal]);\n\n\t\t\t// Draw all the scales\n\t\t\thelpers.each(me.boxes, function(box) {\n\t\t\t\tbox.draw(me.chartArea);\n\t\t\t}, me);\n\t\t\tif (me.scale) {\n\t\t\t\tme.scale.draw();\n\t\t\t}\n\n\t\t\tChart.plugins.notify('beforeDatasetsDraw', [me, easingDecimal]);\n\n\t\t\t// Draw each dataset via its respective controller (reversed to support proper line stacking)\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (me.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tme.getDatasetMeta(datasetIndex).controller.draw(ease);\n\t\t\t\t}\n\t\t\t}, me, true);\n\n\t\t\tChart.plugins.notify('afterDatasetsDraw', [me, easingDecimal]);\n\n\t\t\t// Finally draw the tooltip\n\t\t\tme.tooltip.transition(easingDecimal).draw();\n\n\t\t\tChart.plugins.notify('afterDraw', [me, easingDecimal]);\n\t\t},\n\n\t\t// Get the single element that was clicked on\n\t\t// @return : An object containing the dataset index and element index of the matching element. Also contains the rectangle that was draw\n\t\tgetElementAtEvent: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar eventPosition = helpers.getRelativePosition(e, me.chart);\n\t\t\tvar elementsArray = [];\n\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (me.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tvar meta = me.getDatasetMeta(datasetIndex);\n\t\t\t\t\thelpers.each(meta.data, function(element) {\n\t\t\t\t\t\tif (element.inRange(eventPosition.x, eventPosition.y)) {\n\t\t\t\t\t\t\telementsArray.push(element);\n\t\t\t\t\t\t\treturn elementsArray;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn elementsArray.slice(0, 1);\n\t\t},\n\n\t\tgetElementsAtEvent: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar eventPosition = helpers.getRelativePosition(e, me.chart);\n\t\t\tvar elementsArray = [];\n\n\t\t\tvar found = function() {\n\t\t\t\tif (me.data.datasets) {\n\t\t\t\t\tfor (var i = 0; i < me.data.datasets.length; i++) {\n\t\t\t\t\t\tvar meta = me.getDatasetMeta(i);\n\t\t\t\t\t\tif (me.isDatasetVisible(i)) {\n\t\t\t\t\t\t\tfor (var j = 0; j < meta.data.length; j++) {\n\t\t\t\t\t\t\t\tif (meta.data[j].inRange(eventPosition.x, eventPosition.y)) {\n\t\t\t\t\t\t\t\t\treturn meta.data[j];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.call(me);\n\n\t\t\tif (!found) {\n\t\t\t\treturn elementsArray;\n\t\t\t}\n\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (me.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tvar meta = me.getDatasetMeta(datasetIndex),\n\t\t\t\t\t\telement = meta.data[found._index];\n\t\t\t\t\tif (element && !element._view.skip) {\n\t\t\t\t\t\telementsArray.push(element);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, me);\n\n\t\t\treturn elementsArray;\n\t\t},\n\n\t\tgetElementsAtXAxis: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar eventPosition = helpers.getRelativePosition(e, me.chart);\n\t\t\tvar elementsArray = [];\n\n\t\t\tvar found = function() {\n\t\t\t\tif (me.data.datasets) {\n\t\t\t\t\tfor (var i = 0; i < me.data.datasets.length; i++) {\n\t\t\t\t\t\tvar meta = me.getDatasetMeta(i);\n\t\t\t\t\t\tif (me.isDatasetVisible(i)) {\n\t\t\t\t\t\t\tfor (var j = 0; j < meta.data.length; j++) {\n\t\t\t\t\t\t\t\tif (meta.data[j].inLabelRange(eventPosition.x, eventPosition.y)) {\n\t\t\t\t\t\t\t\t\treturn meta.data[j];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.call(me);\n\n\t\t\tif (!found) {\n\t\t\t\treturn elementsArray;\n\t\t\t}\n\n\t\t\thelpers.each(me.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (me.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tvar meta = me.getDatasetMeta(datasetIndex);\n\t\t\t\t\tvar index = helpers.findIndex(meta.data, function(it) {\n\t\t\t\t\t\treturn found._model.x === it._model.x;\n\t\t\t\t\t});\n\t\t\t\t\tif (index !== -1 && !meta.data[index]._view.skip) {\n\t\t\t\t\t\telementsArray.push(meta.data[index]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, me);\n\n\t\t\treturn elementsArray;\n\t\t},\n\n\t\tgetElementsAtEventForMode: function(e, mode) {\n\t\t\tvar me = this;\n\t\t\tswitch (mode) {\n\t\t\tcase 'single':\n\t\t\t\treturn me.getElementAtEvent(e);\n\t\t\tcase 'label':\n\t\t\t\treturn me.getElementsAtEvent(e);\n\t\t\tcase 'dataset':\n\t\t\t\treturn me.getDatasetAtEvent(e);\n\t\t\tcase 'x-axis':\n\t\t\t\treturn me.getElementsAtXAxis(e);\n\t\t\tdefault:\n\t\t\t\treturn e;\n\t\t\t}\n\t\t},\n\n\t\tgetDatasetAtEvent: function(e) {\n\t\t\tvar elementsArray = this.getElementAtEvent(e);\n\n\t\t\tif (elementsArray.length > 0) {\n\t\t\t\telementsArray = this.getDatasetMeta(elementsArray[0]._datasetIndex).data;\n\t\t\t}\n\n\t\t\treturn elementsArray;\n\t\t},\n\n\t\tgetDatasetMeta: function(datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar dataset = me.data.datasets[datasetIndex];\n\t\t\tif (!dataset._meta) {\n\t\t\t\tdataset._meta = {};\n\t\t\t}\n\n\t\t\tvar meta = dataset._meta[me.id];\n\t\t\tif (!meta) {\n\t\t\t\tmeta = dataset._meta[me.id] = {\n\t\t\t\t\ttype: null,\n\t\t\t\t\tdata: [],\n\t\t\t\t\tdataset: null,\n\t\t\t\t\tcontroller: null,\n\t\t\t\t\thidden: null,\t\t\t// See isDatasetVisible() comment\n\t\t\t\t\txAxisID: null,\n\t\t\t\t\tyAxisID: null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn meta;\n\t\t},\n\n\t\tgetVisibleDatasetCount: function() {\n\t\t\tvar count = 0;\n\t\t\tfor (var i = 0, ilen = this.data.datasets.length; i<ilen; ++i) {\n\t\t\t\tif (this.isDatasetVisible(i)) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn count;\n\t\t},\n\n\t\tisDatasetVisible: function(datasetIndex) {\n\t\t\tvar meta = this.getDatasetMeta(datasetIndex);\n\n\t\t\t// meta.hidden is a per chart dataset hidden flag override with 3 states: if true or false,\n\t\t\t// the dataset.hidden value is ignored, else if null, the dataset hidden state is returned.\n\t\t\treturn typeof meta.hidden === 'boolean'? !meta.hidden : !this.data.datasets[datasetIndex].hidden;\n\t\t},\n\n\t\tgenerateLegend: function() {\n\t\t\treturn this.options.legendCallback(this);\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\tvar me = this;\n\t\t\tme.stop();\n\t\t\tme.clear();\n\t\t\thelpers.unbindEvents(me, me.events);\n\t\t\thelpers.removeResizeListener(me.chart.canvas.parentNode);\n\n\t\t\t// Reset canvas height/width attributes\n\t\t\tvar canvas = me.chart.canvas;\n\t\t\tcanvas.width = me.chart.width;\n\t\t\tcanvas.height = me.chart.height;\n\n\t\t\t// if we scaled the canvas in response to a devicePixelRatio !== 1, we need to undo that transform here\n\t\t\tif (me.chart.originalDevicePixelRatio !== undefined) {\n\t\t\t\tme.chart.ctx.scale(1 / me.chart.originalDevicePixelRatio, 1 / me.chart.originalDevicePixelRatio);\n\t\t\t}\n\n\t\t\t// Reset to the old style since it may have been changed by the device pixel ratio changes\n\t\t\tcanvas.style.width = me.chart.originalCanvasStyleWidth;\n\t\t\tcanvas.style.height = me.chart.originalCanvasStyleHeight;\n\n\t\t\tChart.plugins.notify('destroy', [me]);\n\n\t\t\tdelete Chart.instances[me.id];\n\t\t},\n\n\t\ttoBase64Image: function() {\n\t\t\treturn this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments);\n\t\t},\n\n\t\tinitToolTip: function() {\n\t\t\tvar me = this;\n\t\t\tme.tooltip = new Chart.Tooltip({\n\t\t\t\t_chart: me.chart,\n\t\t\t\t_chartInstance: me,\n\t\t\t\t_data: me.data,\n\t\t\t\t_options: me.options.tooltips\n\t\t\t}, me);\n\t\t},\n\n\t\tbindEvents: function() {\n\t\t\tvar me = this;\n\t\t\thelpers.bindEvents(me, me.options.events, function(evt) {\n\t\t\t\tme.eventHandler(evt);\n\t\t\t});\n\t\t},\n\n\t\tupdateHoverStyle: function(elements, mode, enabled) {\n\t\t\tvar method = enabled? 'setHoverStyle' : 'removeHoverStyle';\n\t\t\tvar element, i, ilen;\n\n\t\t\tswitch (mode) {\n\t\t\tcase 'single':\n\t\t\t\telements = [elements[0]];\n\t\t\t\tbreak;\n\t\t\tcase 'label':\n\t\t\tcase 'dataset':\n\t\t\tcase 'x-axis':\n\t\t\t\t// elements = elements;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// unsupported mode\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (i=0, ilen=elements.length; i<ilen; ++i) {\n\t\t\t\telement = elements[i];\n\t\t\t\tif (element) {\n\t\t\t\t\tthis.getDatasetMeta(element._datasetIndex).controller[method](element);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\teventHandler: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar tooltip = me.tooltip;\n\t\t\tvar options = me.options || {};\n\t\t\tvar hoverOptions = options.hover;\n\t\t\tvar tooltipsOptions = options.tooltips;\n\n\t\t\tme.lastActive = me.lastActive || [];\n\t\t\tme.lastTooltipActive = me.lastTooltipActive || [];\n\n\t\t\t// Find Active Elements for hover and tooltips\n\t\t\tif (e.type === 'mouseout') {\n\t\t\t\tme.active = [];\n\t\t\t\tme.tooltipActive = [];\n\t\t\t} else {\n\t\t\t\tme.active = me.getElementsAtEventForMode(e, hoverOptions.mode);\n\t\t\t\tme.tooltipActive = me.getElementsAtEventForMode(e, tooltipsOptions.mode);\n\t\t\t}\n\n\t\t\t// On Hover hook\n\t\t\tif (hoverOptions.onHover) {\n\t\t\t\thoverOptions.onHover.call(me, me.active);\n\t\t\t}\n\n\t\t\tif (me.legend && me.legend.handleEvent) {\n\t\t\t\tme.legend.handleEvent(e);\n\t\t\t}\n\n\t\t\tif (e.type === 'mouseup' || e.type === 'click') {\n\t\t\t\tif (options.onClick) {\n\t\t\t\t\toptions.onClick.call(me, e, me.active);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove styling for last active (even if it may still be active)\n\t\t\tif (me.lastActive.length) {\n\t\t\t\tme.updateHoverStyle(me.lastActive, hoverOptions.mode, false);\n\t\t\t}\n\n\t\t\t// Built in hover styling\n\t\t\tif (me.active.length && hoverOptions.mode) {\n\t\t\t\tme.updateHoverStyle(me.active, hoverOptions.mode, true);\n\t\t\t}\n\n\t\t\t// Built in Tooltips\n\t\t\tif (tooltipsOptions.enabled || tooltipsOptions.custom) {\n\t\t\t\ttooltip.initialize();\n\t\t\t\ttooltip._active = me.tooltipActive;\n\t\t\t\ttooltip.update(true);\n\t\t\t}\n\n\t\t\t// Hover animations\n\t\t\ttooltip.pivot();\n\n\t\t\tif (!me.animating) {\n\t\t\t\t// If entering, leaving, or changing elements, animate the change via pivot\n\t\t\t\tif (!helpers.arrayEquals(me.active, me.lastActive) ||\n\t\t\t\t\t!helpers.arrayEquals(me.tooltipActive, me.lastTooltipActive)) {\n\n\t\t\t\t\tme.stop();\n\n\t\t\t\t\tif (tooltipsOptions.enabled || tooltipsOptions.custom) {\n\t\t\t\t\t\ttooltip.update(true);\n\t\t\t\t\t}\n\n\t\t\t\t\t// We only need to render at this point. Updating will cause scales to be\n\t\t\t\t\t// recomputed generating flicker & using more memory than necessary.\n\t\t\t\t\tme.render(hoverOptions.animationDuration, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remember Last Actives\n\t\t\tme.lastActive = me.active;\n\t\t\tme.lastTooltipActive = me.tooltipActive;\n\t\t\treturn me;\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar noop = helpers.noop;\n\n\t// Base class for all dataset controllers (line, bar, etc)\n\tChart.DatasetController = function(chart, datasetIndex) {\n\t\tthis.initialize(chart, datasetIndex);\n\t};\n\n\thelpers.extend(Chart.DatasetController.prototype, {\n\n\t\t/**\n\t\t * Element type used to generate a meta dataset (e.g. Chart.element.Line).\n\t\t * @type {Chart.core.element}\n\t\t */\n\t\tdatasetElementType: null,\n\n\t\t/**\n\t\t * Element type used to generate a meta data (e.g. Chart.element.Point).\n\t\t * @type {Chart.core.element}\n\t\t */\n\t\tdataElementType: null,\n\n\t\tinitialize: function(chart, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tme.chart = chart;\n\t\t\tme.index = datasetIndex;\n\t\t\tme.linkScales();\n\t\t\tme.addElements();\n\t\t},\n\n\t\tupdateIndex: function(datasetIndex) {\n\t\t\tthis.index = datasetIndex;\n\t\t},\n\n\t\tlinkScales: function() {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar dataset = me.getDataset();\n\n\t\t\tif (meta.xAxisID === null) {\n\t\t\t\tmeta.xAxisID = dataset.xAxisID || me.chart.options.scales.xAxes[0].id;\n\t\t\t}\n\t\t\tif (meta.yAxisID === null) {\n\t\t\t\tmeta.yAxisID = dataset.yAxisID || me.chart.options.scales.yAxes[0].id;\n\t\t\t}\n\t\t},\n\n\t\tgetDataset: function() {\n\t\t\treturn this.chart.data.datasets[this.index];\n\t\t},\n\n\t\tgetMeta: function() {\n\t\t\treturn this.chart.getDatasetMeta(this.index);\n\t\t},\n\n\t\tgetScaleForId: function(scaleID) {\n\t\t\treturn this.chart.scales[scaleID];\n\t\t},\n\n\t\treset: function() {\n\t\t\tthis.update(true);\n\t\t},\n\n\t\tcreateMetaDataset: function() {\n\t\t\tvar me = this;\n\t\t\tvar type = me.datasetElementType;\n\t\t\treturn type && new type({\n\t\t\t\t_chart: me.chart.chart,\n\t\t\t\t_datasetIndex: me.index\n\t\t\t});\n\t\t},\n\n\t\tcreateMetaData: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar type = me.dataElementType;\n\t\t\treturn type && new type({\n\t\t\t\t_chart: me.chart.chart,\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index\n\t\t\t});\n\t\t},\n\n\t\taddElements: function() {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar data = me.getDataset().data || [];\n\t\t\tvar metaData = meta.data;\n\t\t\tvar i, ilen;\n\n\t\t\tfor (i=0, ilen=data.length; i<ilen; ++i) {\n\t\t\t\tmetaData[i] = metaData[i] || me.createMetaData(meta, i);\n\t\t\t}\n\n\t\t\tmeta.dataset = meta.dataset || me.createMetaDataset();\n\t\t},\n\n\t\taddElementAndReset: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar element = me.createMetaData(index);\n\t\t\tme.getMeta().data.splice(index, 0, element);\n\t\t\tme.updateElement(element, index, true);\n\t\t},\n\n\t\tbuildOrUpdateElements: function() {\n\t\t\t// Handle the number of data points changing\n\t\t\tvar meta = this.getMeta(),\n\t\t\t\tmd = meta.data,\n\t\t\t\tnumData = this.getDataset().data.length,\n\t\t\t\tnumMetaData = md.length;\n\n\t\t\t// Make sure that we handle number of datapoints changing\n\t\t\tif (numData < numMetaData) {\n\t\t\t\t// Remove excess bars for data points that have been removed\n\t\t\t\tmd.splice(numData, numMetaData - numData);\n\t\t\t} else if (numData > numMetaData) {\n\t\t\t\t// Add new elements\n\t\t\t\tfor (var index = numMetaData; index < numData; ++index) {\n\t\t\t\t\tthis.addElementAndReset(index);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tupdate: noop,\n\n\t\tdraw: function(ease) {\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\thelpers.each(this.getMeta().data, function(element) {\n\t\t\t\telement.transition(easingDecimal).draw();\n\t\t\t});\n\t\t},\n\n\t\tremoveHoverStyle: function(element, elementOpts) {\n\t\t\tvar dataset = this.chart.data.datasets[element._datasetIndex],\n\t\t\t\tindex = element._index,\n\t\t\t\tcustom = element.custom || {},\n\t\t\t\tvalueOrDefault = helpers.getValueAtIndexOrDefault,\n\t\t\t\tmodel = element._model;\n\n\t\t\tmodel.backgroundColor = custom.backgroundColor ? custom.backgroundColor : valueOrDefault(dataset.backgroundColor, index, elementOpts.backgroundColor);\n\t\t\tmodel.borderColor = custom.borderColor ? custom.borderColor : valueOrDefault(dataset.borderColor, index, elementOpts.borderColor);\n\t\t\tmodel.borderWidth = custom.borderWidth ? custom.borderWidth : valueOrDefault(dataset.borderWidth, index, elementOpts.borderWidth);\n\t\t},\n\n\t\tsetHoverStyle: function(element) {\n\t\t\tvar dataset = this.chart.data.datasets[element._datasetIndex],\n\t\t\t\tindex = element._index,\n\t\t\t\tcustom = element.custom || {},\n\t\t\t\tvalueOrDefault = helpers.getValueAtIndexOrDefault,\n\t\t\t\tgetHoverColor = helpers.getHoverColor,\n\t\t\t\tmodel = element._model;\n\n\t\t\tmodel.backgroundColor = custom.hoverBackgroundColor ? custom.hoverBackgroundColor : valueOrDefault(dataset.hoverBackgroundColor, index, getHoverColor(model.backgroundColor));\n\t\t\tmodel.borderColor = custom.hoverBorderColor ? custom.hoverBorderColor : valueOrDefault(dataset.hoverBorderColor, index, getHoverColor(model.borderColor));\n\t\t\tmodel.borderWidth = custom.hoverBorderWidth ? custom.hoverBorderWidth : valueOrDefault(dataset.hoverBorderWidth, index, model.borderWidth);\n\t\t}\n\n\t});\n\n\tChart.DatasetController.extend = helpers.inherits;\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\t// The layout service is very self explanatory.  It's responsible for the layout within a chart.\n\t// Scales, Legends and Plugins all rely on the layout service and can easily register to be placed anywhere they need\n\t// It is this service's responsibility of carrying out that layout.\n\tChart.layoutService = {\n\t\tdefaults: {},\n\n\t\t// Register a box to a chartInstance. A box is simply a reference to an object that requires layout. eg. Scales, Legend, Plugins.\n\t\taddBox: function(chartInstance, box) {\n\t\t\tif (!chartInstance.boxes) {\n\t\t\t\tchartInstance.boxes = [];\n\t\t\t}\n\t\t\tchartInstance.boxes.push(box);\n\t\t},\n\n\t\tremoveBox: function(chartInstance, box) {\n\t\t\tif (!chartInstance.boxes) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tchartInstance.boxes.splice(chartInstance.boxes.indexOf(box), 1);\n\t\t},\n\n\t\t// The most important function\n\t\tupdate: function(chartInstance, width, height) {\n\n\t\t\tif (!chartInstance) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar xPadding = 0;\n\t\t\tvar yPadding = 0;\n\n\t\t\tvar leftBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'left';\n\t\t\t});\n\t\t\tvar rightBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'right';\n\t\t\t});\n\t\t\tvar topBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'top';\n\t\t\t});\n\t\t\tvar bottomBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'bottom';\n\t\t\t});\n\n\t\t\t// Boxes that overlay the chartarea such as the radialLinear scale\n\t\t\tvar chartAreaBoxes = helpers.where(chartInstance.boxes, function(box) {\n\t\t\t\treturn box.options.position === 'chartArea';\n\t\t\t});\n\n\t\t\t// Ensure that full width boxes are at the very top / bottom\n\t\t\ttopBoxes.sort(function(a, b) {\n\t\t\t\treturn (b.options.fullWidth ? 1 : 0) - (a.options.fullWidth ? 1 : 0);\n\t\t\t});\n\t\t\tbottomBoxes.sort(function(a, b) {\n\t\t\t\treturn (a.options.fullWidth ? 1 : 0) - (b.options.fullWidth ? 1 : 0);\n\t\t\t});\n\n\t\t\t// Essentially we now have any number of boxes on each of the 4 sides.\n\t\t\t// Our canvas looks like the following.\n\t\t\t// The areas L1 and L2 are the left axes. R1 is the right axis, T1 is the top axis and\n\t\t\t// B1 is the bottom axis\n\t\t\t// There are also 4 quadrant-like locations (left to right instead of clockwise) reserved for chart overlays\n\t\t\t// These locations are single-box locations only, when trying to register a chartArea location that is already taken,\n\t\t\t// an error will be thrown.\n\t\t\t//\n\t\t\t// |----------------------------------------------------|\n\t\t\t// |                  T1 (Full Width)                   |\n\t\t\t// |----------------------------------------------------|\n\t\t\t// |    |    |                 T2                  |    |\n\t\t\t// |    |----|-------------------------------------|----|\n\t\t\t// |    |    | C1 |                           | C2 |    |\n\t\t\t// |    |    |----|                           |----|    |\n\t\t\t// |    |    |                                     |    |\n\t\t\t// | L1 | L2 |           ChartArea (C0)            | R1 |\n\t\t\t// |    |    |                                     |    |\n\t\t\t// |    |    |----|                           |----|    |\n\t\t\t// |    |    | C3 |                           | C4 |    |\n\t\t\t// |    |----|-------------------------------------|----|\n\t\t\t// |    |    |                 B1                  |    |\n\t\t\t// |----------------------------------------------------|\n\t\t\t// |                  B2 (Full Width)                   |\n\t\t\t// |----------------------------------------------------|\n\t\t\t//\n\t\t\t// What we do to find the best sizing, we do the following\n\t\t\t// 1. Determine the minimum size of the chart area.\n\t\t\t// 2. Split the remaining width equally between each vertical axis\n\t\t\t// 3. Split the remaining height equally between each horizontal axis\n\t\t\t// 4. Give each layout the maximum size it can be. The layout will return it's minimum size\n\t\t\t// 5. Adjust the sizes of each axis based on it's minimum reported size.\n\t\t\t// 6. Refit each axis\n\t\t\t// 7. Position each axis in the final location\n\t\t\t// 8. Tell the chart the final location of the chart area\n\t\t\t// 9. Tell any axes that overlay the chart area the positions of the chart area\n\n\t\t\t// Step 1\n\t\t\tvar chartWidth = width - (2 * xPadding);\n\t\t\tvar chartHeight = height - (2 * yPadding);\n\t\t\tvar chartAreaWidth = chartWidth / 2; // min 50%\n\t\t\tvar chartAreaHeight = chartHeight / 2; // min 50%\n\n\t\t\t// Step 2\n\t\t\tvar verticalBoxWidth = (width - chartAreaWidth) / (leftBoxes.length + rightBoxes.length);\n\n\t\t\t// Step 3\n\t\t\tvar horizontalBoxHeight = (height - chartAreaHeight) / (topBoxes.length + bottomBoxes.length);\n\n\t\t\t// Step 4\n\t\t\tvar maxChartAreaWidth = chartWidth;\n\t\t\tvar maxChartAreaHeight = chartHeight;\n\t\t\tvar minBoxSizes = [];\n\n\t\t\tfunction getMinimumBoxSize(box) {\n\t\t\t\tvar minSize;\n\t\t\t\tvar isHorizontal = box.isHorizontal();\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tminSize = box.update(box.options.fullWidth ? chartWidth : maxChartAreaWidth, horizontalBoxHeight);\n\t\t\t\t\tmaxChartAreaHeight -= minSize.height;\n\t\t\t\t} else {\n\t\t\t\t\tminSize = box.update(verticalBoxWidth, chartAreaHeight);\n\t\t\t\t\tmaxChartAreaWidth -= minSize.width;\n\t\t\t\t}\n\n\t\t\t\tminBoxSizes.push({\n\t\t\t\t\thorizontal: isHorizontal,\n\t\t\t\t\tminSize: minSize,\n\t\t\t\t\tbox: box\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thelpers.each(leftBoxes.concat(rightBoxes, topBoxes, bottomBoxes), getMinimumBoxSize);\n\n\t\t\t// At this point, maxChartAreaHeight and maxChartAreaWidth are the size the chart area could\n\t\t\t// be if the axes are drawn at their minimum sizes.\n\n\t\t\t// Steps 5 & 6\n\t\t\tvar totalLeftBoxesWidth = xPadding;\n\t\t\tvar totalRightBoxesWidth = xPadding;\n\t\t\tvar totalTopBoxesHeight = yPadding;\n\t\t\tvar totalBottomBoxesHeight = yPadding;\n\n\t\t\t// Function to fit a box\n\t\t\tfunction fitBox(box) {\n\t\t\t\tvar minBoxSize = helpers.findNextWhere(minBoxSizes, function(minBox) {\n\t\t\t\t\treturn minBox.box === box;\n\t\t\t\t});\n\n\t\t\t\tif (minBoxSize) {\n\t\t\t\t\tif (box.isHorizontal()) {\n\t\t\t\t\t\tvar scaleMargin = {\n\t\t\t\t\t\t\tleft: totalLeftBoxesWidth,\n\t\t\t\t\t\t\tright: totalRightBoxesWidth,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\tbottom: 0\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Don't use min size here because of label rotation. When the labels are rotated, their rotation highly depends\n\t\t\t\t\t\t// on the margin. Sometimes they need to increase in size slightly\n\t\t\t\t\t\tbox.update(box.options.fullWidth ? chartWidth : maxChartAreaWidth, chartHeight / 2, scaleMargin);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbox.update(minBoxSize.minSize.width, maxChartAreaHeight);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update, and calculate the left and right margins for the horizontal boxes\n\t\t\thelpers.each(leftBoxes.concat(rightBoxes), fitBox);\n\n\t\t\thelpers.each(leftBoxes, function(box) {\n\t\t\t\ttotalLeftBoxesWidth += box.width;\n\t\t\t});\n\n\t\t\thelpers.each(rightBoxes, function(box) {\n\t\t\t\ttotalRightBoxesWidth += box.width;\n\t\t\t});\n\n\t\t\t// Set the Left and Right margins for the horizontal boxes\n\t\t\thelpers.each(topBoxes.concat(bottomBoxes), fitBox);\n\n\t\t\t// Figure out how much margin is on the top and bottom of the vertical boxes\n\t\t\thelpers.each(topBoxes, function(box) {\n\t\t\t\ttotalTopBoxesHeight += box.height;\n\t\t\t});\n\n\t\t\thelpers.each(bottomBoxes, function(box) {\n\t\t\t\ttotalBottomBoxesHeight += box.height;\n\t\t\t});\n\n\t\t\tfunction finalFitVerticalBox(box) {\n\t\t\t\tvar minBoxSize = helpers.findNextWhere(minBoxSizes, function(minSize) {\n\t\t\t\t\treturn minSize.box === box;\n\t\t\t\t});\n\n\t\t\t\tvar scaleMargin = {\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\ttop: totalTopBoxesHeight,\n\t\t\t\t\tbottom: totalBottomBoxesHeight\n\t\t\t\t};\n\n\t\t\t\tif (minBoxSize) {\n\t\t\t\t\tbox.update(minBoxSize.minSize.width, maxChartAreaHeight, scaleMargin);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Let the left layout know the final margin\n\t\t\thelpers.each(leftBoxes.concat(rightBoxes), finalFitVerticalBox);\n\n\t\t\t// Recalculate because the size of each layout might have changed slightly due to the margins (label rotation for instance)\n\t\t\ttotalLeftBoxesWidth = xPadding;\n\t\t\ttotalRightBoxesWidth = xPadding;\n\t\t\ttotalTopBoxesHeight = yPadding;\n\t\t\ttotalBottomBoxesHeight = yPadding;\n\n\t\t\thelpers.each(leftBoxes, function(box) {\n\t\t\t\ttotalLeftBoxesWidth += box.width;\n\t\t\t});\n\n\t\t\thelpers.each(rightBoxes, function(box) {\n\t\t\t\ttotalRightBoxesWidth += box.width;\n\t\t\t});\n\n\t\t\thelpers.each(topBoxes, function(box) {\n\t\t\t\ttotalTopBoxesHeight += box.height;\n\t\t\t});\n\t\t\thelpers.each(bottomBoxes, function(box) {\n\t\t\t\ttotalBottomBoxesHeight += box.height;\n\t\t\t});\n\n\t\t\t// Figure out if our chart area changed. This would occur if the dataset layout label rotation\n\t\t\t// changed due to the application of the margins in step 6. Since we can only get bigger, this is safe to do\n\t\t\t// without calling `fit` again\n\t\t\tvar newMaxChartAreaHeight = height - totalTopBoxesHeight - totalBottomBoxesHeight;\n\t\t\tvar newMaxChartAreaWidth = width - totalLeftBoxesWidth - totalRightBoxesWidth;\n\n\t\t\tif (newMaxChartAreaWidth !== maxChartAreaWidth || newMaxChartAreaHeight !== maxChartAreaHeight) {\n\t\t\t\thelpers.each(leftBoxes, function(box) {\n\t\t\t\t\tbox.height = newMaxChartAreaHeight;\n\t\t\t\t});\n\n\t\t\t\thelpers.each(rightBoxes, function(box) {\n\t\t\t\t\tbox.height = newMaxChartAreaHeight;\n\t\t\t\t});\n\n\t\t\t\thelpers.each(topBoxes, function(box) {\n\t\t\t\t\tif (!box.options.fullWidth) {\n\t\t\t\t\t\tbox.width = newMaxChartAreaWidth;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\thelpers.each(bottomBoxes, function(box) {\n\t\t\t\t\tif (!box.options.fullWidth) {\n\t\t\t\t\t\tbox.width = newMaxChartAreaWidth;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmaxChartAreaHeight = newMaxChartAreaHeight;\n\t\t\t\tmaxChartAreaWidth = newMaxChartAreaWidth;\n\t\t\t}\n\n\t\t\t// Step 7 - Position the boxes\n\t\t\tvar left = xPadding;\n\t\t\tvar top = yPadding;\n\n\t\t\tfunction placeBox(box) {\n\t\t\t\tif (box.isHorizontal()) {\n\t\t\t\t\tbox.left = box.options.fullWidth ? xPadding : totalLeftBoxesWidth;\n\t\t\t\t\tbox.right = box.options.fullWidth ? width - xPadding : totalLeftBoxesWidth + maxChartAreaWidth;\n\t\t\t\t\tbox.top = top;\n\t\t\t\t\tbox.bottom = top + box.height;\n\n\t\t\t\t\t// Move to next point\n\t\t\t\t\ttop = box.bottom;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbox.left = left;\n\t\t\t\t\tbox.right = left + box.width;\n\t\t\t\t\tbox.top = totalTopBoxesHeight;\n\t\t\t\t\tbox.bottom = totalTopBoxesHeight + maxChartAreaHeight;\n\n\t\t\t\t\t// Move to next point\n\t\t\t\t\tleft = box.right;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thelpers.each(leftBoxes.concat(topBoxes), placeBox);\n\n\t\t\t// Account for chart width and height\n\t\t\tleft += maxChartAreaWidth;\n\t\t\ttop += maxChartAreaHeight;\n\n\t\t\thelpers.each(rightBoxes, placeBox);\n\t\t\thelpers.each(bottomBoxes, placeBox);\n\n\t\t\t// Step 8\n\t\t\tchartInstance.chartArea = {\n\t\t\t\tleft: totalLeftBoxesWidth,\n\t\t\t\ttop: totalTopBoxesHeight,\n\t\t\t\tright: totalLeftBoxesWidth + maxChartAreaWidth,\n\t\t\t\tbottom: totalTopBoxesHeight + maxChartAreaHeight\n\t\t\t};\n\n\t\t\t// Step 9\n\t\t\thelpers.each(chartAreaBoxes, function(box) {\n\t\t\t\tbox.left = chartInstance.chartArea.left;\n\t\t\t\tbox.top = chartInstance.chartArea.top;\n\t\t\t\tbox.right = chartInstance.chartArea.right;\n\t\t\t\tbox.bottom = chartInstance.chartArea.bottom;\n\n\t\t\t\tbox.update(maxChartAreaWidth, maxChartAreaHeight);\n\t\t\t});\n\t\t}\n\t};\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.scaleService = {\n\t\t// Scale registration object. Extensions can register new scale types (such as log or DB scales) and then\n\t\t// use the new chart options to grab the correct scale\n\t\tconstructors: {},\n\t\t// Use a registration function so that we can move to an ES6 map when we no longer need to support\n\t\t// old browsers\n\n\t\t// Scale config defaults\n\t\tdefaults: {},\n\t\tregisterScaleType: function(type, scaleConstructor, defaults) {\n\t\t\tthis.constructors[type] = scaleConstructor;\n\t\t\tthis.defaults[type] = helpers.clone(defaults);\n\t\t},\n\t\tgetScaleConstructor: function(type) {\n\t\t\treturn this.constructors.hasOwnProperty(type) ? this.constructors[type] : undefined;\n\t\t},\n\t\tgetScaleDefaults: function(type) {\n\t\t\t// Return the scale defaults merged with the global settings so that we always use the latest ones\n\t\t\treturn this.defaults.hasOwnProperty(type) ? helpers.scaleMerge(Chart.defaults.scale, this.defaults[type]) : {};\n\t\t},\n\t\tupdateScaleDefaults: function(type, additions) {\n\t\t\tvar defaults = this.defaults;\n\t\t\tif (defaults.hasOwnProperty(type)) {\n\t\t\t\tdefaults[type] = helpers.extend(defaults[type], additions);\n\t\t\t}\n\t\t},\n\t\taddScalesToLayout: function(chartInstance) {\n\t\t\t// Adds each scale to the chart.boxes array to be sized accordingly\n\t\t\thelpers.each(chartInstance.scales, function(scale) {\n\t\t\t\tChart.layoutService.addBox(chartInstance, scale);\n\t\t\t});\n\t\t}\n\t};\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar noop = Chart.helpers.noop;\n\n\t/**\n\t * The plugin service singleton\n\t * @namespace Chart.plugins\n\t * @since 2.1.0\n\t */\n\tChart.plugins = {\n\t\t_plugins: [],\n\n\t\t/**\n\t\t * Registers the given plugin(s) if not already registered.\n\t\t * @param {Array|Object} plugins plugin instance(s).\n\t\t */\n\t\tregister: function(plugins) {\n\t\t\tvar p = this._plugins;\n\t\t\t([]).concat(plugins).forEach(function(plugin) {\n\t\t\t\tif (p.indexOf(plugin) === -1) {\n\t\t\t\t\tp.push(plugin);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Unregisters the given plugin(s) only if registered.\n\t\t * @param {Array|Object} plugins plugin instance(s).\n\t\t */\n\t\tunregister: function(plugins) {\n\t\t\tvar p = this._plugins;\n\t\t\t([]).concat(plugins).forEach(function(plugin) {\n\t\t\t\tvar idx = p.indexOf(plugin);\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tp.splice(idx, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Remove all registered p^lugins.\n\t\t * @since 2.1.5\n\t\t */\n\t\tclear: function() {\n\t\t\tthis._plugins = [];\n\t\t},\n\n\t\t/**\n\t\t * Returns the number of registered plugins?\n\t\t * @returns {Number}\n\t\t * @since 2.1.5\n\t\t */\n\t\tcount: function() {\n\t\t\treturn this._plugins.length;\n\t\t},\n\n\t\t/**\n\t\t * Returns all registered plugin intances.\n\t\t * @returns {Array} array of plugin objects.\n\t\t * @since 2.1.5\n\t\t */\n\t\tgetAll: function() {\n\t\t\treturn this._plugins;\n\t\t},\n\n\t\t/**\n\t\t * Calls registered plugins on the specified extension, with the given args. This\n\t\t * method immediately returns as soon as a plugin explicitly returns false. The\n\t\t * returned value can be used, for instance, to interrupt the current action.\n\t\t * @param {String} extension the name of the plugin method to call (e.g. 'beforeUpdate').\n\t\t * @param {Array} [args] extra arguments to apply to the extension call.\n\t\t * @returns {Boolean} false if any of the plugins return false, else returns true.\n\t\t */\n\t\tnotify: function(extension, args) {\n\t\t\tvar plugins = this._plugins;\n\t\t\tvar ilen = plugins.length;\n\t\t\tvar i, plugin;\n\n\t\t\tfor (i=0; i<ilen; ++i) {\n\t\t\t\tplugin = plugins[i];\n\t\t\t\tif (typeof plugin[extension] === 'function') {\n\t\t\t\t\tif (plugin[extension].apply(plugin, args || []) === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t};\n\n\t/**\n\t * Plugin extension methods.\n\t * @interface Chart.PluginBase\n\t * @since 2.1.0\n\t */\n\tChart.PluginBase = Chart.Element.extend({\n\t\t// Called at start of chart init\n\t\tbeforeInit: noop,\n\n\t\t// Called at end of chart init\n\t\tafterInit: noop,\n\n\t\t// Called at start of update\n\t\tbeforeUpdate: noop,\n\n\t\t// Called at end of update\n\t\tafterUpdate: noop,\n\n\t\t// Called at start of draw\n\t\tbeforeDraw: noop,\n\n\t\t// Called at end of draw\n\t\tafterDraw: noop,\n\n\t\t// Called during destroy\n\t\tdestroy: noop\n\t});\n\n\t/**\n\t * Provided for backward compatibility, use Chart.plugins instead\n\t * @namespace Chart.pluginService\n\t * @deprecated since version 2.1.5\n\t * @todo remove me at version 3\n\t */\n\tChart.pluginService = Chart.plugins;\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.scale = {\n\t\tdisplay: true,\n\t\tposition: 'left',\n\n\t\t// grid line settings\n\t\tgridLines: {\n\t\t\tdisplay: true,\n\t\t\tcolor: 'rgba(0, 0, 0, 0.1)',\n\t\t\tlineWidth: 1,\n\t\t\tdrawBorder: true,\n\t\t\tdrawOnChartArea: true,\n\t\t\tdrawTicks: true,\n\t\t\ttickMarkLength: 10,\n\t\t\tzeroLineWidth: 1,\n\t\t\tzeroLineColor: 'rgba(0,0,0,0.25)',\n\t\t\toffsetGridLines: false,\n\t\t\tborderDash: [],\n\t\t\tborderDashOffset: 0.0\n\t\t},\n\n\t\t// scale label\n\t\tscaleLabel: {\n\t\t\t// actual label\n\t\t\tlabelString: '',\n\n\t\t\t// display property\n\t\t\tdisplay: false\n\t\t},\n\n\t\t// label settings\n\t\tticks: {\n\t\t\tbeginAtZero: false,\n\t\t\tminRotation: 0,\n\t\t\tmaxRotation: 50,\n\t\t\tmirror: false,\n\t\t\tpadding: 10,\n\t\t\treverse: false,\n\t\t\tdisplay: true,\n\t\t\tautoSkip: true,\n\t\t\tautoSkipPadding: 0,\n\t\t\tlabelOffset: 0,\n\t\t\t// We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\n\t\t\tcallback: function(value) {\n\t\t\t\treturn helpers.isArray(value) ? value : '' + value;\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.Scale = Chart.Element.extend({\n\n\t\t// These methods are ordered by lifecyle. Utilities then follow.\n\t\t// Any function defined here is inherited by all scale types.\n\t\t// Any function can be extended by the scale type\n\n\t\tbeforeUpdate: function() {\n\t\t\thelpers.callCallback(this.options.beforeUpdate, [this]);\n\t\t},\n\t\tupdate: function(maxWidth, maxHeight, margins) {\n\t\t\tvar me = this;\n\n\t\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\t\tme.beforeUpdate();\n\n\t\t\t// Absorb the master measurements\n\t\t\tme.maxWidth = maxWidth;\n\t\t\tme.maxHeight = maxHeight;\n\t\t\tme.margins = helpers.extend({\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tbottom: 0\n\t\t\t}, margins);\n\n\t\t\t// Dimensions\n\t\t\tme.beforeSetDimensions();\n\t\t\tme.setDimensions();\n\t\t\tme.afterSetDimensions();\n\n\t\t\t// Data min/max\n\t\t\tme.beforeDataLimits();\n\t\t\tme.determineDataLimits();\n\t\t\tme.afterDataLimits();\n\n\t\t\t// Ticks\n\t\t\tme.beforeBuildTicks();\n\t\t\tme.buildTicks();\n\t\t\tme.afterBuildTicks();\n\n\t\t\tme.beforeTickToLabelConversion();\n\t\t\tme.convertTicksToLabels();\n\t\t\tme.afterTickToLabelConversion();\n\n\t\t\t// Tick Rotation\n\t\t\tme.beforeCalculateTickRotation();\n\t\t\tme.calculateTickRotation();\n\t\t\tme.afterCalculateTickRotation();\n\t\t\t// Fit\n\t\t\tme.beforeFit();\n\t\t\tme.fit();\n\t\t\tme.afterFit();\n\t\t\t//\n\t\t\tme.afterUpdate();\n\n\t\t\treturn me.minSize;\n\n\t\t},\n\t\tafterUpdate: function() {\n\t\t\thelpers.callCallback(this.options.afterUpdate, [this]);\n\t\t},\n\n\t\t//\n\n\t\tbeforeSetDimensions: function() {\n\t\t\thelpers.callCallback(this.options.beforeSetDimensions, [this]);\n\t\t},\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.width = me.maxWidth;\n\t\t\t\tme.left = 0;\n\t\t\t\tme.right = me.width;\n\t\t\t} else {\n\t\t\t\tme.height = me.maxHeight;\n\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.top = 0;\n\t\t\t\tme.bottom = me.height;\n\t\t\t}\n\n\t\t\t// Reset padding\n\t\t\tme.paddingLeft = 0;\n\t\t\tme.paddingTop = 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingBottom = 0;\n\t\t},\n\t\tafterSetDimensions: function() {\n\t\t\thelpers.callCallback(this.options.afterSetDimensions, [this]);\n\t\t},\n\n\t\t// Data limits\n\t\tbeforeDataLimits: function() {\n\t\t\thelpers.callCallback(this.options.beforeDataLimits, [this]);\n\t\t},\n\t\tdetermineDataLimits: helpers.noop,\n\t\tafterDataLimits: function() {\n\t\t\thelpers.callCallback(this.options.afterDataLimits, [this]);\n\t\t},\n\n\t\t//\n\t\tbeforeBuildTicks: function() {\n\t\t\thelpers.callCallback(this.options.beforeBuildTicks, [this]);\n\t\t},\n\t\tbuildTicks: helpers.noop,\n\t\tafterBuildTicks: function() {\n\t\t\thelpers.callCallback(this.options.afterBuildTicks, [this]);\n\t\t},\n\n\t\tbeforeTickToLabelConversion: function() {\n\t\t\thelpers.callCallback(this.options.beforeTickToLabelConversion, [this]);\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\t// Convert ticks to strings\n\t\t\tme.ticks = me.ticks.map(function(numericalTick, index, ticks) {\n\t\t\t\tif (me.options.ticks.userCallback) {\n\t\t\t\t\treturn me.options.ticks.userCallback(numericalTick, index, ticks);\n\t\t\t\t}\n\t\t\t\treturn me.options.ticks.callback(numericalTick, index, ticks);\n\t\t\t},\n\t\t\tme);\n\t\t},\n\t\tafterTickToLabelConversion: function() {\n\t\t\thelpers.callCallback(this.options.afterTickToLabelConversion, [this]);\n\t\t},\n\n\t\t//\n\n\t\tbeforeCalculateTickRotation: function() {\n\t\t\thelpers.callCallback(this.options.beforeCalculateTickRotation, [this]);\n\t\t},\n\t\tcalculateTickRotation: function() {\n\t\t\tvar me = this;\n\t\t\tvar context = me.ctx;\n\t\t\tvar globalDefaults = Chart.defaults.global;\n\t\t\tvar optionTicks = me.options.ticks;\n\n\t\t\t// Get the width of each grid by calculating the difference\n\t\t\t// between x offsets between 0 and 1.\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(optionTicks.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(optionTicks.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(optionTicks.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\t\t\tcontext.font = tickLabelFont;\n\n\t\t\tvar firstWidth = context.measureText(me.ticks[0]).width;\n\t\t\tvar lastWidth = context.measureText(me.ticks[me.ticks.length - 1]).width;\n\t\t\tvar firstRotated;\n\n\t\t\tme.labelRotation = optionTicks.minRotation || 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingLeft = 0;\n\n\t\t\tif (me.options.display) {\n\t\t\t\tif (me.isHorizontal()) {\n\t\t\t\t\tme.paddingRight = lastWidth / 2 + 3;\n\t\t\t\t\tme.paddingLeft = firstWidth / 2 + 3;\n\n\t\t\t\t\tif (!me.longestTextCache) {\n\t\t\t\t\t\tme.longestTextCache = {};\n\t\t\t\t\t}\n\t\t\t\t\tvar originalLabelWidth = helpers.longestText(context, tickLabelFont, me.ticks, me.longestTextCache);\n\t\t\t\t\tvar labelWidth = originalLabelWidth;\n\t\t\t\t\tvar cosRotation;\n\t\t\t\t\tvar sinRotation;\n\n\t\t\t\t\t// Allow 3 pixels x2 padding either side for label readability\n\t\t\t\t\t// only the index matters for a dataset scale, but we want a consistent interface between scales\n\t\t\t\t\tvar tickWidth = me.getPixelForTick(1) - me.getPixelForTick(0) - 6;\n\n\t\t\t\t\t// Max label rotation can be set or default to 90 - also act as a loop counter\n\t\t\t\t\twhile (labelWidth > tickWidth && me.labelRotation < optionTicks.maxRotation) {\n\t\t\t\t\t\tcosRotation = Math.cos(helpers.toRadians(me.labelRotation));\n\t\t\t\t\t\tsinRotation = Math.sin(helpers.toRadians(me.labelRotation));\n\n\t\t\t\t\t\tfirstRotated = cosRotation * firstWidth;\n\n\t\t\t\t\t\t// We're right aligning the text now.\n\t\t\t\t\t\tif (firstRotated + tickFontSize / 2 > me.yLabelWidth) {\n\t\t\t\t\t\t\tme.paddingLeft = firstRotated + tickFontSize / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tme.paddingRight = tickFontSize / 2;\n\n\t\t\t\t\t\tif (sinRotation * originalLabelWidth > me.maxHeight) {\n\t\t\t\t\t\t\t// go back one step\n\t\t\t\t\t\t\tme.labelRotation--;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tme.labelRotation++;\n\t\t\t\t\t\tlabelWidth = cosRotation * originalLabelWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (me.margins) {\n\t\t\t\tme.paddingLeft = Math.max(me.paddingLeft - me.margins.left, 0);\n\t\t\t\tme.paddingRight = Math.max(me.paddingRight - me.margins.right, 0);\n\t\t\t}\n\t\t},\n\t\tafterCalculateTickRotation: function() {\n\t\t\thelpers.callCallback(this.options.afterCalculateTickRotation, [this]);\n\t\t},\n\n\t\t//\n\n\t\tbeforeFit: function() {\n\t\t\thelpers.callCallback(this.options.beforeFit, [this]);\n\t\t},\n\t\tfit: function() {\n\t\t\tvar me = this;\n\t\t\t// Reset\n\t\t\tvar minSize = me.minSize = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t};\n\n\t\t\tvar opts = me.options;\n\t\t\tvar globalDefaults = Chart.defaults.global;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar scaleLabelOpts = opts.scaleLabel;\n\t\t\tvar gridLineOpts = opts.gridLines;\n\t\t\tvar display = opts.display;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(tickOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(tickOpts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(tickOpts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\n\t\t\tvar scaleLabelFontSize = helpers.getValueOrDefault(scaleLabelOpts.fontSize, globalDefaults.defaultFontSize);\n\n\t\t\tvar tickMarkLength = opts.gridLines.tickMarkLength;\n\n\t\t\t// Width\n\t\t\tif (isHorizontal) {\n\t\t\t\t// subtract the margins to line up with the chartArea if we are a full width scale\n\t\t\t\tminSize.width = me.isFullWidth() ? me.maxWidth - me.margins.left - me.margins.right : me.maxWidth;\n\t\t\t} else {\n\t\t\t\tminSize.width = display && gridLineOpts.drawTicks ? tickMarkLength : 0;\n\t\t\t}\n\n\t\t\t// height\n\t\t\tif (isHorizontal) {\n\t\t\t\tminSize.height = display && gridLineOpts.drawTicks ? tickMarkLength : 0;\n\t\t\t} else {\n\t\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t\t}\n\n\t\t\t// Are we showing a title for the scale?\n\t\t\tif (scaleLabelOpts.display && display) {\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tminSize.height += (scaleLabelFontSize * 1.5);\n\t\t\t\t} else {\n\t\t\t\t\tminSize.width += (scaleLabelFontSize * 1.5);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tickOpts.display && display) {\n\t\t\t\t// Don't bother fitting the ticks if we are not showing them\n\t\t\t\tif (!me.longestTextCache) {\n\t\t\t\t\tme.longestTextCache = {};\n\t\t\t\t}\n\n\t\t\t\tvar largestTextWidth = helpers.longestText(me.ctx, tickLabelFont, me.ticks, me.longestTextCache);\n\t\t\t\tvar tallestLabelHeightInLines = helpers.numberOfLabelLines(me.ticks);\n\t\t\t\tvar lineSpace = tickFontSize * 0.5;\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\t// A horizontal axis is more constrained by the height.\n\t\t\t\t\tme.longestLabelWidth = largestTextWidth;\n\n\t\t\t\t\t// TODO - improve this calculation\n\t\t\t\t\tvar labelHeight = (Math.sin(helpers.toRadians(me.labelRotation)) * me.longestLabelWidth) + (tickFontSize * tallestLabelHeightInLines) + (lineSpace * tallestLabelHeightInLines);\n\n\t\t\t\t\tminSize.height = Math.min(me.maxHeight, minSize.height + labelHeight);\n\t\t\t\t\tme.ctx.font = tickLabelFont;\n\n\t\t\t\t\tvar firstLabelWidth = me.ctx.measureText(me.ticks[0]).width;\n\t\t\t\t\tvar lastLabelWidth = me.ctx.measureText(me.ticks[me.ticks.length - 1]).width;\n\n\t\t\t\t\t// Ensure that our ticks are always inside the canvas. When rotated, ticks are right aligned which means that the right padding is dominated\n\t\t\t\t\t// by the font height\n\t\t\t\t\tvar cosRotation = Math.cos(helpers.toRadians(me.labelRotation));\n\t\t\t\t\tvar sinRotation = Math.sin(helpers.toRadians(me.labelRotation));\n\t\t\t\t\tme.paddingLeft = me.labelRotation !== 0 ? (cosRotation * firstLabelWidth) + 3 : firstLabelWidth / 2 + 3; // add 3 px to move away from canvas edges\n\t\t\t\t\tme.paddingRight = me.labelRotation !== 0 ? (sinRotation * (tickFontSize / 2)) + 3 : lastLabelWidth / 2 + 3; // when rotated\n\t\t\t\t} else {\n\t\t\t\t\t// A vertical axis is more constrained by the width. Labels are the dominant factor here, so get that length first\n\t\t\t\t\tvar maxLabelWidth = me.maxWidth - minSize.width;\n\n\t\t\t\t\t// Account for padding\n\t\t\t\t\tvar mirror = tickOpts.mirror;\n\t\t\t\t\tif (!mirror) {\n\t\t\t\t\t\tlargestTextWidth += me.options.ticks.padding;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If mirrored text is on the inside so don't expand\n\t\t\t\t\t\tlargestTextWidth = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (largestTextWidth < maxLabelWidth) {\n\t\t\t\t\t\t// We don't need all the room\n\t\t\t\t\t\tminSize.width += largestTextWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Expand to max size\n\t\t\t\t\t\tminSize.width = me.maxWidth;\n\t\t\t\t\t}\n\n\t\t\t\t\tme.paddingTop = tickFontSize / 2;\n\t\t\t\t\tme.paddingBottom = tickFontSize / 2;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (me.margins) {\n\t\t\t\tme.paddingLeft = Math.max(me.paddingLeft - me.margins.left, 0);\n\t\t\t\tme.paddingTop = Math.max(me.paddingTop - me.margins.top, 0);\n\t\t\t\tme.paddingRight = Math.max(me.paddingRight - me.margins.right, 0);\n\t\t\t\tme.paddingBottom = Math.max(me.paddingBottom - me.margins.bottom, 0);\n\t\t\t}\n\n\t\t\tme.width = minSize.width;\n\t\t\tme.height = minSize.height;\n\n\t\t},\n\t\tafterFit: function() {\n\t\t\thelpers.callCallback(this.options.afterFit, [this]);\n\t\t},\n\n\t\t// Shared Methods\n\t\tisHorizontal: function() {\n\t\t\treturn this.options.position === 'top' || this.options.position === 'bottom';\n\t\t},\n\t\tisFullWidth: function() {\n\t\t\treturn (this.options.fullWidth);\n\t\t},\n\n\t\t// Get the correct value. NaN bad inputs, If the value type is object get the x or y based on whether we are horizontal or not\n\t\tgetRightValue: function(rawValue) {\n\t\t\t// Null and undefined values first\n\t\t\tif (rawValue === null || typeof(rawValue) === 'undefined') {\n\t\t\t\treturn NaN;\n\t\t\t}\n\t\t\t// isNaN(object) returns true, so make sure NaN is checking for a number\n\t\t\tif (typeof(rawValue) === 'number' && isNaN(rawValue)) {\n\t\t\t\treturn NaN;\n\t\t\t}\n\t\t\t// If it is in fact an object, dive in one more level\n\t\t\tif (typeof(rawValue) === 'object') {\n\t\t\t\tif ((rawValue instanceof Date) || (rawValue.isValid)) {\n\t\t\t\t\treturn rawValue;\n\t\t\t\t}\n\t\t\t\treturn this.getRightValue(this.isHorizontal() ? rawValue.x : rawValue.y);\n\t\t\t}\n\n\t\t\t// Value is good, return it\n\t\t\treturn rawValue;\n\t\t},\n\n\t\t// Used to get the value to display in the tooltip for the data at the given index\n\t\t// function getLabelForIndex(index, datasetIndex)\n\t\tgetLabelForIndex: helpers.noop,\n\n\t\t// Used to get data value locations.  Value can either be an index or a numerical value\n\t\tgetPixelForValue: helpers.noop,\n\n\t\t// Used to get the data value from a given pixel. This is the inverse of getPixelForValue\n\t\tgetValueForPixel: helpers.noop,\n\n\t\t// Used for tick location, should\n\t\tgetPixelForTick: function(index, includeOffset) {\n\t\t\tvar me = this;\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\tvar tickWidth = innerWidth / Math.max((me.ticks.length - ((me.options.gridLines.offsetGridLines) ? 0 : 1)), 1);\n\t\t\t\tvar pixel = (tickWidth * index) + me.paddingLeft;\n\n\t\t\t\tif (includeOffset) {\n\t\t\t\t\tpixel += tickWidth / 2;\n\t\t\t\t}\n\n\t\t\t\tvar finalVal = me.left + Math.round(pixel);\n\t\t\t\tfinalVal += me.isFullWidth() ? me.margins.left : 0;\n\t\t\t\treturn finalVal;\n\t\t\t}\n\t\t\tvar innerHeight = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\treturn me.top + (index * (innerHeight / (me.ticks.length - 1)));\n\t\t},\n\n\t\t// Utility for getting the pixel location of a percentage of scale\n\t\tgetPixelForDecimal: function(decimal /* , includeOffset*/) {\n\t\t\tvar me = this;\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\tvar valueOffset = (innerWidth * decimal) + me.paddingLeft;\n\n\t\t\t\tvar finalVal = me.left + Math.round(valueOffset);\n\t\t\t\tfinalVal += me.isFullWidth() ? me.margins.left : 0;\n\t\t\t\treturn finalVal;\n\t\t\t}\n\t\t\treturn me.top + (decimal * me.height);\n\t\t},\n\n\t\tgetBasePixel: function() {\n\t\t\tvar me = this;\n\t\t\tvar min = me.min;\n\t\t\tvar max = me.max;\n\n\t\t\treturn me.getPixelForValue(\n\t\t\t\tme.beginAtZero? 0:\n\t\t\t\tmin < 0 && max < 0? max :\n\t\t\t\tmin > 0 && max > 0? min :\n\t\t\t\t0);\n\t\t},\n\n\t\t// Actualy draw the scale on the canvas\n\t\t// @param {rectangle} chartArea : the area of the chart to draw full grid lines on\n\t\tdraw: function(chartArea) {\n\t\t\tvar me = this;\n\t\t\tvar options = me.options;\n\t\t\tif (!options.display) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar context = me.ctx;\n\t\t\tvar globalDefaults = Chart.defaults.global;\n\t\t\tvar optionTicks = options.ticks;\n\t\t\tvar gridLines = options.gridLines;\n\t\t\tvar scaleLabel = options.scaleLabel;\n\n\t\t\tvar isRotated = me.labelRotation !== 0;\n\t\t\tvar skipRatio;\n\t\t\tvar useAutoskipper = optionTicks.autoSkip;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\t// figure out the maximum number of gridlines to show\n\t\t\tvar maxTicks;\n\t\t\tif (optionTicks.maxTicksLimit) {\n\t\t\t\tmaxTicks = optionTicks.maxTicksLimit;\n\t\t\t}\n\n\t\t\tvar tickFontColor = helpers.getValueOrDefault(optionTicks.fontColor, globalDefaults.defaultFontColor);\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(optionTicks.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(optionTicks.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(optionTicks.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\t\t\tvar tl = gridLines.tickMarkLength;\n\t\t\tvar borderDash = helpers.getValueOrDefault(gridLines.borderDash, globalDefaults.borderDash);\n\t\t\tvar borderDashOffset = helpers.getValueOrDefault(gridLines.borderDashOffset, globalDefaults.borderDashOffset);\n\n\t\t\tvar scaleLabelFontColor = helpers.getValueOrDefault(scaleLabel.fontColor, globalDefaults.defaultFontColor);\n\t\t\tvar scaleLabelFontSize = helpers.getValueOrDefault(scaleLabel.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar scaleLabelFontStyle = helpers.getValueOrDefault(scaleLabel.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar scaleLabelFontFamily = helpers.getValueOrDefault(scaleLabel.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar scaleLabelFont = helpers.fontString(scaleLabelFontSize, scaleLabelFontStyle, scaleLabelFontFamily);\n\n\t\t\tvar labelRotationRadians = helpers.toRadians(me.labelRotation);\n\t\t\tvar cosRotation = Math.cos(labelRotationRadians);\n\t\t\tvar longestRotatedLabel = me.longestLabelWidth * cosRotation;\n\n\t\t\t// Make sure we draw text in the correct color and font\n\t\t\tcontext.fillStyle = tickFontColor;\n\n\t\t\tvar itemsToDraw = [];\n\n\t\t\tif (isHorizontal) {\n\t\t\t\tskipRatio = false;\n\n\t\t\t\t// Only calculate the skip ratio with the half width of longestRotateLabel if we got an actual rotation\n\t\t\t\t// See #2584\n\t\t\t\tif (isRotated) {\n\t\t\t\t\tlongestRotatedLabel /= 2;\n\t\t\t\t}\n\n\t\t\t\tif ((longestRotatedLabel + optionTicks.autoSkipPadding) * me.ticks.length > (me.width - (me.paddingLeft + me.paddingRight))) {\n\t\t\t\t\tskipRatio = 1 + Math.floor(((longestRotatedLabel + optionTicks.autoSkipPadding) * me.ticks.length) / (me.width - (me.paddingLeft + me.paddingRight)));\n\t\t\t\t}\n\n\t\t\t\t// if they defined a max number of optionTicks,\n\t\t\t\t// increase skipRatio until that number is met\n\t\t\t\tif (maxTicks && me.ticks.length > maxTicks) {\n\t\t\t\t\twhile (!skipRatio || me.ticks.length / (skipRatio || 1) > maxTicks) {\n\t\t\t\t\t\tif (!skipRatio) {\n\t\t\t\t\t\t\tskipRatio = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tskipRatio += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!useAutoskipper) {\n\t\t\t\t\tskipRatio = false;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tvar xTickStart = options.position === 'right' ? me.left : me.right - tl;\n\t\t\tvar xTickEnd = options.position === 'right' ? me.left + tl : me.right;\n\t\t\tvar yTickStart = options.position === 'bottom' ? me.top : me.bottom - tl;\n\t\t\tvar yTickEnd = options.position === 'bottom' ? me.top + tl : me.bottom;\n\n\t\t\thelpers.each(me.ticks, function(label, index) {\n\t\t\t\t// If the callback returned a null or undefined value, do not draw this line\n\t\t\t\tif (label === undefined || label === null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar isLastTick = me.ticks.length === index + 1;\n\n\t\t\t\t// Since we always show the last tick,we need may need to hide the last shown one before\n\t\t\t\tvar shouldSkip = (skipRatio > 1 && index % skipRatio > 0) || (index % skipRatio === 0 && index + skipRatio >= me.ticks.length);\n\t\t\t\tif (shouldSkip && !isLastTick || (label === undefined || label === null)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar lineWidth, lineColor;\n\t\t\t\tif (index === (typeof me.zeroLineIndex !== 'undefined' ? me.zeroLineIndex : 0)) {\n\t\t\t\t\t// Draw the first index specially\n\t\t\t\t\tlineWidth = gridLines.zeroLineWidth;\n\t\t\t\t\tlineColor = gridLines.zeroLineColor;\n\t\t\t\t} else {\n\t\t\t\t\tlineWidth = helpers.getValueAtIndexOrDefault(gridLines.lineWidth, index);\n\t\t\t\t\tlineColor = helpers.getValueAtIndexOrDefault(gridLines.color, index);\n\t\t\t\t}\n\n\t\t\t\t// Common properties\n\t\t\t\tvar tx1, ty1, tx2, ty2, x1, y1, x2, y2, labelX, labelY;\n\t\t\t\tvar textAlign = 'middle';\n\t\t\t\tvar textBaseline = 'middle';\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tif (!isRotated) {\n\t\t\t\t\t\ttextBaseline = options.position === 'top' ? 'bottom' : 'top';\n\t\t\t\t\t}\n\n\t\t\t\t\ttextAlign = isRotated ? 'right' : 'center';\n\n\t\t\t\t\tvar xLineValue = me.getPixelForTick(index) + helpers.aliasPixel(lineWidth); // xvalues for grid lines\n\t\t\t\t\tlabelX = me.getPixelForTick(index, gridLines.offsetGridLines) + optionTicks.labelOffset; // x values for optionTicks (need to consider offsetLabel option)\n\t\t\t\t\tlabelY = (isRotated) ? me.top + 12 : options.position === 'top' ? me.bottom - tl : me.top + tl;\n\n\t\t\t\t\ttx1 = tx2 = x1 = x2 = xLineValue;\n\t\t\t\t\tty1 = yTickStart;\n\t\t\t\t\tty2 = yTickEnd;\n\t\t\t\t\ty1 = chartArea.top;\n\t\t\t\t\ty2 = chartArea.bottom;\n\t\t\t\t} else {\n\t\t\t\t\tif (options.position === 'left') {\n\t\t\t\t\t\tif (optionTicks.mirror) {\n\t\t\t\t\t\t\tlabelX = me.right + optionTicks.padding;\n\t\t\t\t\t\t\ttextAlign = 'left';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlabelX = me.right - optionTicks.padding;\n\t\t\t\t\t\t\ttextAlign = 'right';\n\t\t\t\t\t\t}\n\t\t\t\t\t// right side\n\t\t\t\t\t} else if (optionTicks.mirror) {\n\t\t\t\t\t\tlabelX = me.left - optionTicks.padding;\n\t\t\t\t\t\ttextAlign = 'right';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlabelX = me.left + optionTicks.padding;\n\t\t\t\t\t\ttextAlign = 'left';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar yLineValue = me.getPixelForTick(index); // xvalues for grid lines\n\t\t\t\t\tyLineValue += helpers.aliasPixel(lineWidth);\n\t\t\t\t\tlabelY = me.getPixelForTick(index, gridLines.offsetGridLines);\n\n\t\t\t\t\ttx1 = xTickStart;\n\t\t\t\t\ttx2 = xTickEnd;\n\t\t\t\t\tx1 = chartArea.left;\n\t\t\t\t\tx2 = chartArea.right;\n\t\t\t\t\tty1 = ty2 = y1 = y2 = yLineValue;\n\t\t\t\t}\n\n\t\t\t\titemsToDraw.push({\n\t\t\t\t\ttx1: tx1,\n\t\t\t\t\tty1: ty1,\n\t\t\t\t\ttx2: tx2,\n\t\t\t\t\tty2: ty2,\n\t\t\t\t\tx1: x1,\n\t\t\t\t\ty1: y1,\n\t\t\t\t\tx2: x2,\n\t\t\t\t\ty2: y2,\n\t\t\t\t\tlabelX: labelX,\n\t\t\t\t\tlabelY: labelY,\n\t\t\t\t\tglWidth: lineWidth,\n\t\t\t\t\tglColor: lineColor,\n\t\t\t\t\tglBorderDash: borderDash,\n\t\t\t\t\tglBorderDashOffset: borderDashOffset,\n\t\t\t\t\trotation: -1 * labelRotationRadians,\n\t\t\t\t\tlabel: label,\n\t\t\t\t\ttextBaseline: textBaseline,\n\t\t\t\t\ttextAlign: textAlign\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Draw all of the tick labels, tick marks, and grid lines at the correct places\n\t\t\thelpers.each(itemsToDraw, function(itemToDraw) {\n\t\t\t\tif (gridLines.display) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.lineWidth = itemToDraw.glWidth;\n\t\t\t\t\tcontext.strokeStyle = itemToDraw.glColor;\n\t\t\t\t\tif (context.setLineDash) {\n\t\t\t\t\t\tcontext.setLineDash(itemToDraw.glBorderDash);\n\t\t\t\t\t\tcontext.lineDashOffset = itemToDraw.glBorderDashOffset;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext.beginPath();\n\n\t\t\t\t\tif (gridLines.drawTicks) {\n\t\t\t\t\t\tcontext.moveTo(itemToDraw.tx1, itemToDraw.ty1);\n\t\t\t\t\t\tcontext.lineTo(itemToDraw.tx2, itemToDraw.ty2);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (gridLines.drawOnChartArea) {\n\t\t\t\t\t\tcontext.moveTo(itemToDraw.x1, itemToDraw.y1);\n\t\t\t\t\t\tcontext.lineTo(itemToDraw.x2, itemToDraw.y2);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext.stroke();\n\t\t\t\t\tcontext.restore();\n\t\t\t\t}\n\n\t\t\t\tif (optionTicks.display) {\n\t\t\t\t\tcontext.save();\n\t\t\t\t\tcontext.translate(itemToDraw.labelX, itemToDraw.labelY);\n\t\t\t\t\tcontext.rotate(itemToDraw.rotation);\n\t\t\t\t\tcontext.font = tickLabelFont;\n\t\t\t\t\tcontext.textBaseline = itemToDraw.textBaseline;\n\t\t\t\t\tcontext.textAlign = itemToDraw.textAlign;\n\n\t\t\t\t\tvar label = itemToDraw.label;\n\t\t\t\t\tif (helpers.isArray(label)) {\n\t\t\t\t\t\tfor (var i = 0, y = -(label.length - 1)*tickFontSize*0.75; i < label.length; ++i) {\n\t\t\t\t\t\t\t// We just make sure the multiline element is a string here..\n\t\t\t\t\t\t\tcontext.fillText('' + label[i], 0, y);\n\t\t\t\t\t\t\t// apply same lineSpacing as calculated @ L#320\n\t\t\t\t\t\t\ty += (tickFontSize * 1.5);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.fillText(label, 0, 0);\n\t\t\t\t\t}\n\t\t\t\t\tcontext.restore();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (scaleLabel.display) {\n\t\t\t\t// Draw the scale label\n\t\t\t\tvar scaleLabelX;\n\t\t\t\tvar scaleLabelY;\n\t\t\t\tvar rotation = 0;\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tscaleLabelX = me.left + ((me.right - me.left) / 2); // midpoint of the width\n\t\t\t\t\tscaleLabelY = options.position === 'bottom' ? me.bottom - (scaleLabelFontSize / 2) : me.top + (scaleLabelFontSize / 2);\n\t\t\t\t} else {\n\t\t\t\t\tvar isLeft = options.position === 'left';\n\t\t\t\t\tscaleLabelX = isLeft ? me.left + (scaleLabelFontSize / 2) : me.right - (scaleLabelFontSize / 2);\n\t\t\t\t\tscaleLabelY = me.top + ((me.bottom - me.top) / 2);\n\t\t\t\t\trotation = isLeft ? -0.5 * Math.PI : 0.5 * Math.PI;\n\t\t\t\t}\n\n\t\t\t\tcontext.save();\n\t\t\t\tcontext.translate(scaleLabelX, scaleLabelY);\n\t\t\t\tcontext.rotate(rotation);\n\t\t\t\tcontext.textAlign = 'center';\n\t\t\t\tcontext.textBaseline = 'middle';\n\t\t\t\tcontext.fillStyle = scaleLabelFontColor; // render in correct colour\n\t\t\t\tcontext.font = scaleLabelFont;\n\t\t\t\tcontext.fillText(scaleLabel.labelString, 0, 0);\n\t\t\t\tcontext.restore();\n\t\t\t}\n\n\t\t\tif (gridLines.drawBorder) {\n\t\t\t\t// Draw the line at the edge of the axis\n\t\t\t\tcontext.lineWidth = helpers.getValueAtIndexOrDefault(gridLines.lineWidth, 0);\n\t\t\t\tcontext.strokeStyle = helpers.getValueAtIndexOrDefault(gridLines.color, 0);\n\t\t\t\tvar x1 = me.left,\n\t\t\t\t\tx2 = me.right,\n\t\t\t\t\ty1 = me.top,\n\t\t\t\t\ty2 = me.bottom;\n\n\t\t\t\tvar aliasPixel = helpers.aliasPixel(context.lineWidth);\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\ty1 = y2 = options.position === 'top' ? me.bottom : me.top;\n\t\t\t\t\ty1 += aliasPixel;\n\t\t\t\t\ty2 += aliasPixel;\n\t\t\t\t} else {\n\t\t\t\t\tx1 = x2 = options.position === 'left' ? me.right : me.left;\n\t\t\t\t\tx1 += aliasPixel;\n\t\t\t\t\tx2 += aliasPixel;\n\t\t\t\t}\n\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(x1, y1);\n\t\t\t\tcontext.lineTo(x2, y2);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.global.title = {\n\t\tdisplay: false,\n\t\tposition: 'top',\n\t\tfullWidth: true, // marks that this box should take the full width of the canvas (pushing down other boxes)\n\n\t\tfontStyle: 'bold',\n\t\tpadding: 10,\n\n\t\t// actual title\n\t\ttext: ''\n\t};\n\n\tvar noop = helpers.noop;\n\tChart.Title = Chart.Element.extend({\n\n\t\tinitialize: function(config) {\n\t\t\tvar me = this;\n\t\t\thelpers.extend(me, config);\n\t\t\tme.options = helpers.configMerge(Chart.defaults.global.title, config.options);\n\n\t\t\t// Contains hit boxes for each dataset (in dataset order)\n\t\t\tme.legendHitBoxes = [];\n\t\t},\n\n\t\t// These methods are ordered by lifecyle. Utilities then follow.\n\n\t\tbeforeUpdate: function() {\n\t\t\tvar chartOpts = this.chart.options;\n\t\t\tif (chartOpts && chartOpts.title) {\n\t\t\t\tthis.options = helpers.configMerge(Chart.defaults.global.title, chartOpts.title);\n\t\t\t}\n\t\t},\n\t\tupdate: function(maxWidth, maxHeight, margins) {\n\t\t\tvar me = this;\n\n\t\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\t\tme.beforeUpdate();\n\n\t\t\t// Absorb the master measurements\n\t\t\tme.maxWidth = maxWidth;\n\t\t\tme.maxHeight = maxHeight;\n\t\t\tme.margins = margins;\n\n\t\t\t// Dimensions\n\t\t\tme.beforeSetDimensions();\n\t\t\tme.setDimensions();\n\t\t\tme.afterSetDimensions();\n\t\t\t// Labels\n\t\t\tme.beforeBuildLabels();\n\t\t\tme.buildLabels();\n\t\t\tme.afterBuildLabels();\n\n\t\t\t// Fit\n\t\t\tme.beforeFit();\n\t\t\tme.fit();\n\t\t\tme.afterFit();\n\t\t\t//\n\t\t\tme.afterUpdate();\n\n\t\t\treturn me.minSize;\n\n\t\t},\n\t\tafterUpdate: noop,\n\n\t\t//\n\n\t\tbeforeSetDimensions: noop,\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.width = me.maxWidth;\n\t\t\t\tme.left = 0;\n\t\t\t\tme.right = me.width;\n\t\t\t} else {\n\t\t\t\tme.height = me.maxHeight;\n\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.top = 0;\n\t\t\t\tme.bottom = me.height;\n\t\t\t}\n\n\t\t\t// Reset padding\n\t\t\tme.paddingLeft = 0;\n\t\t\tme.paddingTop = 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingBottom = 0;\n\n\t\t\t// Reset minSize\n\t\t\tme.minSize = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t};\n\t\t},\n\t\tafterSetDimensions: noop,\n\n\t\t//\n\n\t\tbeforeBuildLabels: noop,\n\t\tbuildLabels: noop,\n\t\tafterBuildLabels: noop,\n\n\t\t//\n\n\t\tbeforeFit: noop,\n\t\tfit: function() {\n\t\t\tvar me = this,\n\t\t\t\tvalueOrDefault = helpers.getValueOrDefault,\n\t\t\t\topts = me.options,\n\t\t\t\tglobalDefaults = Chart.defaults.global,\n\t\t\t\tdisplay = opts.display,\n\t\t\t\tfontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize),\n\t\t\t\tminSize = me.minSize;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tminSize.width = me.maxWidth; // fill all the width\n\t\t\t\tminSize.height = display ? fontSize + (opts.padding * 2) : 0;\n\t\t\t} else {\n\t\t\t\tminSize.width = display ? fontSize + (opts.padding * 2) : 0;\n\t\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t\t}\n\n\t\t\tme.width = minSize.width;\n\t\t\tme.height = minSize.height;\n\n\t\t},\n\t\tafterFit: noop,\n\n\t\t// Shared Methods\n\t\tisHorizontal: function() {\n\t\t\tvar pos = this.options.position;\n\t\t\treturn pos === 'top' || pos === 'bottom';\n\t\t},\n\n\t\t// Actualy draw the title block on the canvas\n\t\tdraw: function() {\n\t\t\tvar me = this,\n\t\t\t\tctx = me.ctx,\n\t\t\t\tvalueOrDefault = helpers.getValueOrDefault,\n\t\t\t\topts = me.options,\n\t\t\t\tglobalDefaults = Chart.defaults.global;\n\n\t\t\tif (opts.display) {\n\t\t\t\tvar fontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize),\n\t\t\t\t\tfontStyle = valueOrDefault(opts.fontStyle, globalDefaults.defaultFontStyle),\n\t\t\t\t\tfontFamily = valueOrDefault(opts.fontFamily, globalDefaults.defaultFontFamily),\n\t\t\t\t\ttitleFont = helpers.fontString(fontSize, fontStyle, fontFamily),\n\t\t\t\t\trotation = 0,\n\t\t\t\t\ttitleX,\n\t\t\t\t\ttitleY,\n\t\t\t\t\ttop = me.top,\n\t\t\t\t\tleft = me.left,\n\t\t\t\t\tbottom = me.bottom,\n\t\t\t\t\tright = me.right;\n\n\t\t\t\tctx.fillStyle = valueOrDefault(opts.fontColor, globalDefaults.defaultFontColor); // render in correct colour\n\t\t\t\tctx.font = titleFont;\n\n\t\t\t\t// Horizontal\n\t\t\t\tif (me.isHorizontal()) {\n\t\t\t\t\ttitleX = left + ((right - left) / 2); // midpoint of the width\n\t\t\t\t\ttitleY = top + ((bottom - top) / 2); // midpoint of the height\n\t\t\t\t} else {\n\t\t\t\t\ttitleX = opts.position === 'left' ? left + (fontSize / 2) : right - (fontSize / 2);\n\t\t\t\t\ttitleY = top + ((bottom - top) / 2);\n\t\t\t\t\trotation = Math.PI * (opts.position === 'left' ? -0.5 : 0.5);\n\t\t\t\t}\n\n\t\t\t\tctx.save();\n\t\t\t\tctx.translate(titleX, titleY);\n\t\t\t\tctx.rotate(rotation);\n\t\t\t\tctx.textAlign = 'center';\n\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\tctx.fillText(opts.text, 0, 0);\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t});\n\n\t// Register the title plugin\n\tChart.plugins.register({\n\t\tbeforeInit: function(chartInstance) {\n\t\t\tvar opts = chartInstance.options;\n\t\t\tvar titleOpts = opts.title;\n\n\t\t\tif (titleOpts) {\n\t\t\t\tchartInstance.titleBlock = new Chart.Title({\n\t\t\t\t\tctx: chartInstance.chart.ctx,\n\t\t\t\t\toptions: titleOpts,\n\t\t\t\t\tchart: chartInstance\n\t\t\t\t});\n\n\t\t\t\tChart.layoutService.addBox(chartInstance, chartInstance.titleBlock);\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar noop = helpers.noop;\n\n\tChart.defaults.global.legend = {\n\n\t\tdisplay: true,\n\t\tposition: 'top',\n\t\tfullWidth: true, // marks that this box should take the full width of the canvas (pushing down other boxes)\n\t\treverse: false,\n\n\t\t// a callback that will handle\n\t\tonClick: function(e, legendItem) {\n\t\t\tvar index = legendItem.datasetIndex;\n\t\t\tvar ci = this.chart;\n\t\t\tvar meta = ci.getDatasetMeta(index);\n\n\t\t\t// See controller.isDatasetVisible comment\n\t\t\tmeta.hidden = meta.hidden === null? !ci.data.datasets[index].hidden : null;\n\n\t\t\t// We hid a dataset ... rerender the chart\n\t\t\tci.update();\n\t\t},\n\n\t\tonHover: null,\n\n\t\tlabels: {\n\t\t\tboxWidth: 40,\n\t\t\tpadding: 10,\n\t\t\t// Generates labels shown in the legend\n\t\t\t// Valid properties to return:\n\t\t\t// text : text to display\n\t\t\t// fillStyle : fill of coloured box\n\t\t\t// strokeStyle: stroke of coloured box\n\t\t\t// hidden : if this legend item refers to a hidden item\n\t\t\t// lineCap : cap style for line\n\t\t\t// lineDash\n\t\t\t// lineDashOffset :\n\t\t\t// lineJoin :\n\t\t\t// lineWidth :\n\t\t\tgenerateLabels: function(chart) {\n\t\t\t\tvar data = chart.data;\n\t\t\t\treturn helpers.isArray(data.datasets) ? data.datasets.map(function(dataset, i) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttext: dataset.label,\n\t\t\t\t\t\tfillStyle: (!helpers.isArray(dataset.backgroundColor) ? dataset.backgroundColor : dataset.backgroundColor[0]),\n\t\t\t\t\t\thidden: !chart.isDatasetVisible(i),\n\t\t\t\t\t\tlineCap: dataset.borderCapStyle,\n\t\t\t\t\t\tlineDash: dataset.borderDash,\n\t\t\t\t\t\tlineDashOffset: dataset.borderDashOffset,\n\t\t\t\t\t\tlineJoin: dataset.borderJoinStyle,\n\t\t\t\t\t\tlineWidth: dataset.borderWidth,\n\t\t\t\t\t\tstrokeStyle: dataset.borderColor,\n\t\t\t\t\t\tpointStyle: dataset.pointStyle,\n\n\t\t\t\t\t\t// Below is extra data used for toggling the datasets\n\t\t\t\t\t\tdatasetIndex: i\n\t\t\t\t\t};\n\t\t\t\t}, this) : [];\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.Legend = Chart.Element.extend({\n\n\t\tinitialize: function(config) {\n\t\t\thelpers.extend(this, config);\n\n\t\t\t// Contains hit boxes for each dataset (in dataset order)\n\t\t\tthis.legendHitBoxes = [];\n\n\t\t\t// Are we in doughnut mode which has a different data type\n\t\t\tthis.doughnutMode = false;\n\t\t},\n\n\t\t// These methods are ordered by lifecyle. Utilities then follow.\n\t\t// Any function defined here is inherited by all legend types.\n\t\t// Any function can be extended by the legend type\n\n\t\tbeforeUpdate: noop,\n\t\tupdate: function(maxWidth, maxHeight, margins) {\n\t\t\tvar me = this;\n\n\t\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\t\tme.beforeUpdate();\n\n\t\t\t// Absorb the master measurements\n\t\t\tme.maxWidth = maxWidth;\n\t\t\tme.maxHeight = maxHeight;\n\t\t\tme.margins = margins;\n\n\t\t\t// Dimensions\n\t\t\tme.beforeSetDimensions();\n\t\t\tme.setDimensions();\n\t\t\tme.afterSetDimensions();\n\t\t\t// Labels\n\t\t\tme.beforeBuildLabels();\n\t\t\tme.buildLabels();\n\t\t\tme.afterBuildLabels();\n\n\t\t\t// Fit\n\t\t\tme.beforeFit();\n\t\t\tme.fit();\n\t\t\tme.afterFit();\n\t\t\t//\n\t\t\tme.afterUpdate();\n\n\t\t\treturn me.minSize;\n\t\t},\n\t\tafterUpdate: noop,\n\n\t\t//\n\n\t\tbeforeSetDimensions: noop,\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.width = me.maxWidth;\n\t\t\t\tme.left = 0;\n\t\t\t\tme.right = me.width;\n\t\t\t} else {\n\t\t\t\tme.height = me.maxHeight;\n\n\t\t\t\t// Reset position before calculating rotation\n\t\t\t\tme.top = 0;\n\t\t\t\tme.bottom = me.height;\n\t\t\t}\n\n\t\t\t// Reset padding\n\t\t\tme.paddingLeft = 0;\n\t\t\tme.paddingTop = 0;\n\t\t\tme.paddingRight = 0;\n\t\t\tme.paddingBottom = 0;\n\n\t\t\t// Reset minSize\n\t\t\tme.minSize = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t};\n\t\t},\n\t\tafterSetDimensions: noop,\n\n\t\t//\n\n\t\tbeforeBuildLabels: noop,\n\t\tbuildLabels: function() {\n\t\t\tvar me = this;\n\t\t\tme.legendItems = me.options.labels.generateLabels.call(me, me.chart);\n\t\t\tif (me.options.reverse) {\n\t\t\t\tme.legendItems.reverse();\n\t\t\t}\n\t\t},\n\t\tafterBuildLabels: noop,\n\n\t\t//\n\n\t\tbeforeFit: noop,\n\t\tfit: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar labelOpts = opts.labels;\n\t\t\tvar display = opts.display;\n\n\t\t\tvar ctx = me.ctx;\n\n\t\t\tvar globalDefault = Chart.defaults.global,\n\t\t\t\titemOrDefault = helpers.getValueOrDefault,\n\t\t\t\tfontSize = itemOrDefault(labelOpts.fontSize, globalDefault.defaultFontSize),\n\t\t\t\tfontStyle = itemOrDefault(labelOpts.fontStyle, globalDefault.defaultFontStyle),\n\t\t\t\tfontFamily = itemOrDefault(labelOpts.fontFamily, globalDefault.defaultFontFamily),\n\t\t\t\tlabelFont = helpers.fontString(fontSize, fontStyle, fontFamily);\n\n\t\t\t// Reset hit boxes\n\t\t\tvar hitboxes = me.legendHitBoxes = [];\n\n\t\t\tvar minSize = me.minSize;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\tif (isHorizontal) {\n\t\t\t\tminSize.width = me.maxWidth; // fill all the width\n\t\t\t\tminSize.height = display ? 10 : 0;\n\t\t\t} else {\n\t\t\t\tminSize.width = display ? 10 : 0;\n\t\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t\t}\n\n\t\t\t// Increase sizes here\n\t\t\tif (display) {\n\t\t\t\tctx.font = labelFont;\n\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\t// Labels\n\n\t\t\t\t\t// Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\n\t\t\t\t\tvar lineWidths = me.lineWidths = [0];\n\t\t\t\t\tvar totalHeight = me.legendItems.length ? fontSize + (labelOpts.padding) : 0;\n\n\t\t\t\t\tctx.textAlign = 'left';\n\t\t\t\t\tctx.textBaseline = 'top';\n\n\t\t\t\t\thelpers.each(me.legendItems, function(legendItem, i) {\n\t\t\t\t\t\tvar boxWidth = labelOpts.usePointStyle ?\n\t\t\t\t\t\t\tfontSize * Math.sqrt(2) :\n\t\t\t\t\t\t\tlabelOpts.boxWidth;\n\n\t\t\t\t\t\tvar width = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n\t\t\t\t\t\tif (lineWidths[lineWidths.length - 1] + width + labelOpts.padding >= me.width) {\n\t\t\t\t\t\t\ttotalHeight += fontSize + (labelOpts.padding);\n\t\t\t\t\t\t\tlineWidths[lineWidths.length] = me.left;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Store the hitbox width and height here. Final position will be updated in `draw`\n\t\t\t\t\t\thitboxes[i] = {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\theight: fontSize\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tlineWidths[lineWidths.length - 1] += width + labelOpts.padding;\n\t\t\t\t\t});\n\n\t\t\t\t\tminSize.height += totalHeight;\n\n\t\t\t\t} else {\n\t\t\t\t\tvar vPadding = labelOpts.padding;\n\t\t\t\t\tvar columnWidths = me.columnWidths = [];\n\t\t\t\t\tvar totalWidth = labelOpts.padding;\n\t\t\t\t\tvar currentColWidth = 0;\n\t\t\t\t\tvar currentColHeight = 0;\n\t\t\t\t\tvar itemHeight = fontSize + vPadding;\n\n\t\t\t\t\thelpers.each(me.legendItems, function(legendItem, i) {\n\t\t\t\t\t\t// If usePointStyle is set, multiple boxWidth by 2 since it represents\n\t\t\t\t\t\t// the radius and not truly the width\n\t\t\t\t\t\tvar boxWidth = labelOpts.usePointStyle ? 2 * labelOpts.boxWidth : labelOpts.boxWidth;\n\n\t\t\t\t\t\tvar itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n\n\t\t\t\t\t\t// If too tall, go to new column\n\t\t\t\t\t\tif (currentColHeight + itemHeight > minSize.height) {\n\t\t\t\t\t\t\ttotalWidth += currentColWidth + labelOpts.padding;\n\t\t\t\t\t\t\tcolumnWidths.push(currentColWidth); // previous column width\n\n\t\t\t\t\t\t\tcurrentColWidth = 0;\n\t\t\t\t\t\t\tcurrentColHeight = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Get max width\n\t\t\t\t\t\tcurrentColWidth = Math.max(currentColWidth, itemWidth);\n\t\t\t\t\t\tcurrentColHeight += itemHeight;\n\n\t\t\t\t\t\t// Store the hitbox width and height here. Final position will be updated in `draw`\n\t\t\t\t\t\thitboxes[i] = {\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\twidth: itemWidth,\n\t\t\t\t\t\t\theight: fontSize\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\t\ttotalWidth += currentColWidth;\n\t\t\t\t\tcolumnWidths.push(currentColWidth);\n\t\t\t\t\tminSize.width += totalWidth;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.width = minSize.width;\n\t\t\tme.height = minSize.height;\n\t\t},\n\t\tafterFit: noop,\n\n\t\t// Shared Methods\n\t\tisHorizontal: function() {\n\t\t\treturn this.options.position === 'top' || this.options.position === 'bottom';\n\t\t},\n\n\t\t// Actualy draw the legend on the canvas\n\t\tdraw: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar labelOpts = opts.labels;\n\t\t\tvar globalDefault = Chart.defaults.global,\n\t\t\t\tlineDefault = globalDefault.elements.line,\n\t\t\t\tlegendWidth = me.width,\n\t\t\t\tlineWidths = me.lineWidths;\n\n\t\t\tif (opts.display) {\n\t\t\t\tvar ctx = me.ctx,\n\t\t\t\t\tcursor,\n\t\t\t\t\titemOrDefault = helpers.getValueOrDefault,\n\t\t\t\t\tfontColor = itemOrDefault(labelOpts.fontColor, globalDefault.defaultFontColor),\n\t\t\t\t\tfontSize = itemOrDefault(labelOpts.fontSize, globalDefault.defaultFontSize),\n\t\t\t\t\tfontStyle = itemOrDefault(labelOpts.fontStyle, globalDefault.defaultFontStyle),\n\t\t\t\t\tfontFamily = itemOrDefault(labelOpts.fontFamily, globalDefault.defaultFontFamily),\n\t\t\t\t\tlabelFont = helpers.fontString(fontSize, fontStyle, fontFamily);\n\n\t\t\t\t// Canvas setup\n\t\t\t\tctx.textAlign = 'left';\n\t\t\t\tctx.textBaseline = 'top';\n\t\t\t\tctx.lineWidth = 0.5;\n\t\t\t\tctx.strokeStyle = fontColor; // for strikethrough effect\n\t\t\t\tctx.fillStyle = fontColor; // render in correct colour\n\t\t\t\tctx.font = labelFont;\n\n\t\t\t\tvar boxWidth = labelOpts.boxWidth,\n\t\t\t\t\thitboxes = me.legendHitBoxes;\n\n\t\t\t\t// current position\n\t\t\t\tvar drawLegendBox = function(x, y, legendItem) {\n\t\t\t\t\tif (isNaN(boxWidth) || boxWidth <= 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set the ctx for the box\n\t\t\t\t\tctx.save();\n\n\t\t\t\t\tctx.fillStyle = itemOrDefault(legendItem.fillStyle, globalDefault.defaultColor);\n\t\t\t\t\tctx.lineCap = itemOrDefault(legendItem.lineCap, lineDefault.borderCapStyle);\n\t\t\t\t\tctx.lineDashOffset = itemOrDefault(legendItem.lineDashOffset, lineDefault.borderDashOffset);\n\t\t\t\t\tctx.lineJoin = itemOrDefault(legendItem.lineJoin, lineDefault.borderJoinStyle);\n\t\t\t\t\tctx.lineWidth = itemOrDefault(legendItem.lineWidth, lineDefault.borderWidth);\n\t\t\t\t\tctx.strokeStyle = itemOrDefault(legendItem.strokeStyle, globalDefault.defaultColor);\n\t\t\t\t\tvar isLineWidthZero = (itemOrDefault(legendItem.lineWidth, lineDefault.borderWidth) === 0);\n\n\t\t\t\t\tif (ctx.setLineDash) {\n\t\t\t\t\t\t// IE 9 and 10 do not support line dash\n\t\t\t\t\t\tctx.setLineDash(itemOrDefault(legendItem.lineDash, lineDefault.borderDash));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.labels && opts.labels.usePointStyle) {\n\t\t\t\t\t\t// Recalulate x and y for drawPoint() because its expecting\n\t\t\t\t\t\t// x and y to be center of figure (instead of top left)\n\t\t\t\t\t\tvar radius = fontSize * Math.SQRT2 / 2;\n\t\t\t\t\t\tvar offSet = radius / Math.SQRT2;\n\t\t\t\t\t\tvar centerX = x + offSet;\n\t\t\t\t\t\tvar centerY = y + offSet;\n\n\t\t\t\t\t\t// Draw pointStyle as legend symbol\n\t\t\t\t\t\tChart.canvasHelpers.drawPoint(ctx, legendItem.pointStyle, radius, centerX, centerY);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Draw box as legend symbol\n\t\t\t\t\t\tif (!isLineWidthZero) {\n\t\t\t\t\t\t\tctx.strokeRect(x, y, boxWidth, fontSize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tctx.fillRect(x, y, boxWidth, fontSize);\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.restore();\n\t\t\t\t};\n\t\t\t\tvar fillText = function(x, y, legendItem, textWidth) {\n\t\t\t\t\tctx.fillText(legendItem.text, boxWidth + (fontSize / 2) + x, y);\n\n\t\t\t\t\tif (legendItem.hidden) {\n\t\t\t\t\t\t// Strikethrough the text if hidden\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.lineWidth = 2;\n\t\t\t\t\t\tctx.moveTo(boxWidth + (fontSize / 2) + x, y + (fontSize / 2));\n\t\t\t\t\t\tctx.lineTo(boxWidth + (fontSize / 2) + x + textWidth, y + (fontSize / 2));\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Horizontal\n\t\t\t\tvar isHorizontal = me.isHorizontal();\n\t\t\t\tif (isHorizontal) {\n\t\t\t\t\tcursor = {\n\t\t\t\t\t\tx: me.left + ((legendWidth - lineWidths[0]) / 2),\n\t\t\t\t\t\ty: me.top + labelOpts.padding,\n\t\t\t\t\t\tline: 0\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tcursor = {\n\t\t\t\t\t\tx: me.left + labelOpts.padding,\n\t\t\t\t\t\ty: me.top + labelOpts.padding,\n\t\t\t\t\t\tline: 0\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tvar itemHeight = fontSize + labelOpts.padding;\n\t\t\t\thelpers.each(me.legendItems, function(legendItem, i) {\n\t\t\t\t\tvar textWidth = ctx.measureText(legendItem.text).width,\n\t\t\t\t\t\twidth = labelOpts.usePointStyle ?\n\t\t\t\t\t\t\tfontSize + (fontSize / 2) + textWidth :\n\t\t\t\t\t\t\tboxWidth + (fontSize / 2) + textWidth,\n\t\t\t\t\t\tx = cursor.x,\n\t\t\t\t\t\ty = cursor.y;\n\n\t\t\t\t\tif (isHorizontal) {\n\t\t\t\t\t\tif (x + width >= legendWidth) {\n\t\t\t\t\t\t\ty = cursor.y += itemHeight;\n\t\t\t\t\t\t\tcursor.line++;\n\t\t\t\t\t\t\tx = cursor.x = me.left + ((legendWidth - lineWidths[cursor.line]) / 2);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (y + itemHeight > me.bottom) {\n\t\t\t\t\t\tx = cursor.x = x + me.columnWidths[cursor.line] + labelOpts.padding;\n\t\t\t\t\t\ty = cursor.y = me.top;\n\t\t\t\t\t\tcursor.line++;\n\t\t\t\t\t}\n\n\t\t\t\t\tdrawLegendBox(x, y, legendItem);\n\n\t\t\t\t\thitboxes[i].left = x;\n\t\t\t\t\thitboxes[i].top = y;\n\n\t\t\t\t\t// Fill the actual label\n\t\t\t\t\tfillText(x, y, legendItem, textWidth);\n\n\t\t\t\t\tif (isHorizontal) {\n\t\t\t\t\t\tcursor.x += width + (labelOpts.padding);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcursor.y += itemHeight;\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t// Handle an event\n\t\thandleEvent: function(e) {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar type = e.type === 'mouseup' ? 'click' : e.type;\n\n\t\t\tif (type === 'mousemove') {\n\t\t\t\tif (!opts.onHover) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'click') {\n\t\t\t\tif (!opts.onClick) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar position = helpers.getRelativePosition(e, me.chart.chart),\n\t\t\t\tx = position.x,\n\t\t\t\ty = position.y;\n\n\t\t\tif (x >= me.left && x <= me.right && y >= me.top && y <= me.bottom) {\n\t\t\t\t// See if we are touching one of the dataset boxes\n\t\t\t\tvar lh = me.legendHitBoxes;\n\t\t\t\tfor (var i = 0; i < lh.length; ++i) {\n\t\t\t\t\tvar hitBox = lh[i];\n\n\t\t\t\t\tif (x >= hitBox.left && x <= hitBox.left + hitBox.width && y >= hitBox.top && y <= hitBox.top + hitBox.height) {\n\t\t\t\t\t\t// Touching an element\n\t\t\t\t\t\tif (type === 'click') {\n\t\t\t\t\t\t\topts.onClick.call(me, e, me.legendItems[i]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (type === 'mousemove') {\n\t\t\t\t\t\t\topts.onHover.call(me, e, me.legendItems[i]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// Register the legend plugin\n\tChart.plugins.register({\n\t\tbeforeInit: function(chartInstance) {\n\t\t\tvar opts = chartInstance.options;\n\t\t\tvar legendOpts = opts.legend;\n\n\t\t\tif (legendOpts) {\n\t\t\t\tchartInstance.legend = new Chart.Legend({\n\t\t\t\t\tctx: chartInstance.chart.ctx,\n\t\t\t\t\toptions: legendOpts,\n\t\t\t\t\tchart: chartInstance\n\t\t\t\t});\n\n\t\t\t\tChart.layoutService.addBox(chartInstance, chartInstance.legend);\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.global.tooltips = {\n\t\tenabled: true,\n\t\tcustom: null,\n\t\tmode: 'single',\n\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\n\t\ttitleFontStyle: 'bold',\n\t\ttitleSpacing: 2,\n\t\ttitleMarginBottom: 6,\n\t\ttitleFontColor: '#fff',\n\t\ttitleAlign: 'left',\n\t\tbodySpacing: 2,\n\t\tbodyFontColor: '#fff',\n\t\tbodyAlign: 'left',\n\t\tfooterFontStyle: 'bold',\n\t\tfooterSpacing: 2,\n\t\tfooterMarginTop: 6,\n\t\tfooterFontColor: '#fff',\n\t\tfooterAlign: 'left',\n\t\tyPadding: 6,\n\t\txPadding: 6,\n\t\tyAlign: 'center',\n\t\txAlign: 'center',\n\t\tcaretSize: 5,\n\t\tcornerRadius: 6,\n\t\tmultiKeyBackground: '#fff',\n\t\tcallbacks: {\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeTitle: helpers.noop,\n\t\t\ttitle: function(tooltipItems, data) {\n\t\t\t\t// Pick first xLabel for now\n\t\t\t\tvar title = '';\n\t\t\t\tvar labels = data.labels;\n\t\t\t\tvar labelCount = labels ? labels.length : 0;\n\n\t\t\t\tif (tooltipItems.length > 0) {\n\t\t\t\t\tvar item = tooltipItems[0];\n\n\t\t\t\t\tif (item.xLabel) {\n\t\t\t\t\t\ttitle = item.xLabel;\n\t\t\t\t\t} else if (labelCount > 0 && item.index < labelCount) {\n\t\t\t\t\t\ttitle = labels[item.index];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tafterTitle: helpers.noop,\n\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeBody: helpers.noop,\n\n\t\t\t// Args are: (tooltipItem, data)\n\t\t\tbeforeLabel: helpers.noop,\n\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\tvar datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';\n\t\t\t\treturn datasetLabel + ': ' + tooltipItem.yLabel;\n\t\t\t},\n\t\t\tlabelColor: function(tooltipItem, chartInstance) {\n\t\t\t\tvar meta = chartInstance.getDatasetMeta(tooltipItem.datasetIndex);\n\t\t\t\tvar activeElement = meta.data[tooltipItem.index];\n\t\t\t\tvar view = activeElement._view;\n\t\t\t\treturn {\n\t\t\t\t\tborderColor: view.borderColor,\n\t\t\t\t\tbackgroundColor: view.backgroundColor\n\t\t\t\t};\n\t\t\t},\n\t\t\tafterLabel: helpers.noop,\n\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tafterBody: helpers.noop,\n\n\t\t\t// Args are: (tooltipItems, data)\n\t\t\tbeforeFooter: helpers.noop,\n\t\t\tfooter: helpers.noop,\n\t\t\tafterFooter: helpers.noop\n\t\t}\n\t};\n\n\t// Helper to push or concat based on if the 2nd parameter is an array or not\n\tfunction pushOrConcat(base, toPush) {\n\t\tif (toPush) {\n\t\t\tif (helpers.isArray(toPush)) {\n\t\t\t\t// base = base.concat(toPush);\n\t\t\t\tArray.prototype.push.apply(base, toPush);\n\t\t\t} else {\n\t\t\t\tbase.push(toPush);\n\t\t\t}\n\t\t}\n\n\t\treturn base;\n\t}\n\n\tfunction getAveragePosition(elements) {\n\t\tif (!elements.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar i, len;\n\t\tvar xPositions = [];\n\t\tvar yPositions = [];\n\n\t\tfor (i = 0, len = elements.length; i < len; ++i) {\n\t\t\tvar el = elements[i];\n\t\t\tif (el && el.hasValue()) {\n\t\t\t\tvar pos = el.tooltipPosition();\n\t\t\t\txPositions.push(pos.x);\n\t\t\t\tyPositions.push(pos.y);\n\t\t\t}\n\t\t}\n\n\t\tvar x = 0,\n\t\t\ty = 0;\n\t\tfor (i = 0; i < xPositions.length; ++i) {\n\t\t\tif (xPositions[i]) {\n\t\t\t\tx += xPositions[i];\n\t\t\t\ty += yPositions[i];\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tx: Math.round(x / xPositions.length),\n\t\t\ty: Math.round(y / xPositions.length)\n\t\t};\n\t}\n\n\t// Private helper to create a tooltip iteam model\n\t// @param element : the chart element (point, arc, bar) to create the tooltip item for\n\t// @return : new tooltip item\n\tfunction createTooltipItem(element) {\n\t\tvar xScale = element._xScale;\n\t\tvar yScale = element._yScale || element._scale; // handle radar || polarArea charts\n\t\tvar index = element._index,\n\t\t\tdatasetIndex = element._datasetIndex;\n\n\t\treturn {\n\t\t\txLabel: xScale ? xScale.getLabelForIndex(index, datasetIndex) : '',\n\t\t\tyLabel: yScale ? yScale.getLabelForIndex(index, datasetIndex) : '',\n\t\t\tindex: index,\n\t\t\tdatasetIndex: datasetIndex\n\t\t};\n\t}\n\n\tChart.Tooltip = Chart.Element.extend({\n\t\tinitialize: function() {\n\t\t\tvar me = this;\n\t\t\tvar globalDefaults = Chart.defaults.global;\n\t\t\tvar tooltipOpts = me._options;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\n\t\t\thelpers.extend(me, {\n\t\t\t\t_model: {\n\t\t\t\t\t// Positioning\n\t\t\t\t\txPadding: tooltipOpts.xPadding,\n\t\t\t\t\tyPadding: tooltipOpts.yPadding,\n\t\t\t\t\txAlign: tooltipOpts.xAlign,\n\t\t\t\t\tyAlign: tooltipOpts.yAlign,\n\n\t\t\t\t\t// Body\n\t\t\t\t\tbodyFontColor: tooltipOpts.bodyFontColor,\n\t\t\t\t\t_bodyFontFamily: getValueOrDefault(tooltipOpts.bodyFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t\t\t_bodyFontStyle: getValueOrDefault(tooltipOpts.bodyFontStyle, globalDefaults.defaultFontStyle),\n\t\t\t\t\t_bodyAlign: tooltipOpts.bodyAlign,\n\t\t\t\t\tbodyFontSize: getValueOrDefault(tooltipOpts.bodyFontSize, globalDefaults.defaultFontSize),\n\t\t\t\t\tbodySpacing: tooltipOpts.bodySpacing,\n\n\t\t\t\t\t// Title\n\t\t\t\t\ttitleFontColor: tooltipOpts.titleFontColor,\n\t\t\t\t\t_titleFontFamily: getValueOrDefault(tooltipOpts.titleFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t\t\t_titleFontStyle: getValueOrDefault(tooltipOpts.titleFontStyle, globalDefaults.defaultFontStyle),\n\t\t\t\t\ttitleFontSize: getValueOrDefault(tooltipOpts.titleFontSize, globalDefaults.defaultFontSize),\n\t\t\t\t\t_titleAlign: tooltipOpts.titleAlign,\n\t\t\t\t\ttitleSpacing: tooltipOpts.titleSpacing,\n\t\t\t\t\ttitleMarginBottom: tooltipOpts.titleMarginBottom,\n\n\t\t\t\t\t// Footer\n\t\t\t\t\tfooterFontColor: tooltipOpts.footerFontColor,\n\t\t\t\t\t_footerFontFamily: getValueOrDefault(tooltipOpts.footerFontFamily, globalDefaults.defaultFontFamily),\n\t\t\t\t\t_footerFontStyle: getValueOrDefault(tooltipOpts.footerFontStyle, globalDefaults.defaultFontStyle),\n\t\t\t\t\tfooterFontSize: getValueOrDefault(tooltipOpts.footerFontSize, globalDefaults.defaultFontSize),\n\t\t\t\t\t_footerAlign: tooltipOpts.footerAlign,\n\t\t\t\t\tfooterSpacing: tooltipOpts.footerSpacing,\n\t\t\t\t\tfooterMarginTop: tooltipOpts.footerMarginTop,\n\n\t\t\t\t\t// Appearance\n\t\t\t\t\tcaretSize: tooltipOpts.caretSize,\n\t\t\t\t\tcornerRadius: tooltipOpts.cornerRadius,\n\t\t\t\t\tbackgroundColor: tooltipOpts.backgroundColor,\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tlegendColorBackground: tooltipOpts.multiKeyBackground\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// Get the title\n\t\t// Args are: (tooltipItem, data)\n\t\tgetTitle: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me._options;\n\t\t\tvar callbacks = opts.callbacks;\n\n\t\t\tvar beforeTitle = callbacks.beforeTitle.apply(me, arguments),\n\t\t\t\ttitle = callbacks.title.apply(me, arguments),\n\t\t\t\tafterTitle = callbacks.afterTitle.apply(me, arguments);\n\n\t\t\tvar lines = [];\n\t\t\tlines = pushOrConcat(lines, beforeTitle);\n\t\t\tlines = pushOrConcat(lines, title);\n\t\t\tlines = pushOrConcat(lines, afterTitle);\n\n\t\t\treturn lines;\n\t\t},\n\n\t\t// Args are: (tooltipItem, data)\n\t\tgetBeforeBody: function() {\n\t\t\tvar lines = this._options.callbacks.beforeBody.apply(this, arguments);\n\t\t\treturn helpers.isArray(lines) ? lines : lines !== undefined ? [lines] : [];\n\t\t},\n\n\t\t// Args are: (tooltipItem, data)\n\t\tgetBody: function(tooltipItems, data) {\n\t\t\tvar me = this;\n\t\t\tvar callbacks = me._options.callbacks;\n\t\t\tvar bodyItems = [];\n\n\t\t\thelpers.each(tooltipItems, function(tooltipItem) {\n\t\t\t\tvar bodyItem = {\n\t\t\t\t\tbefore: [],\n\t\t\t\t\tlines: [],\n\t\t\t\t\tafter: []\n\t\t\t\t};\n\t\t\t\tpushOrConcat(bodyItem.before, callbacks.beforeLabel.call(me, tooltipItem, data));\n\t\t\t\tpushOrConcat(bodyItem.lines, callbacks.label.call(me, tooltipItem, data));\n\t\t\t\tpushOrConcat(bodyItem.after, callbacks.afterLabel.call(me, tooltipItem, data));\n\n\t\t\t\tbodyItems.push(bodyItem);\n\t\t\t});\n\n\t\t\treturn bodyItems;\n\t\t},\n\n\t\t// Args are: (tooltipItem, data)\n\t\tgetAfterBody: function() {\n\t\t\tvar lines = this._options.callbacks.afterBody.apply(this, arguments);\n\t\t\treturn helpers.isArray(lines) ? lines : lines !== undefined ? [lines] : [];\n\t\t},\n\n\t\t// Get the footer and beforeFooter and afterFooter lines\n\t\t// Args are: (tooltipItem, data)\n\t\tgetFooter: function() {\n\t\t\tvar me = this;\n\t\t\tvar callbacks = me._options.callbacks;\n\n\t\t\tvar beforeFooter = callbacks.beforeFooter.apply(me, arguments);\n\t\t\tvar footer = callbacks.footer.apply(me, arguments);\n\t\t\tvar afterFooter = callbacks.afterFooter.apply(me, arguments);\n\n\t\t\tvar lines = [];\n\t\t\tlines = pushOrConcat(lines, beforeFooter);\n\t\t\tlines = pushOrConcat(lines, footer);\n\t\t\tlines = pushOrConcat(lines, afterFooter);\n\n\t\t\treturn lines;\n\t\t},\n\n\t\tupdate: function(changed) {\n\t\t\tvar me = this;\n\t\t\tvar opts = me._options;\n\t\t\tvar model = me._model;\n\t\t\tvar active = me._active;\n\n\t\t\tvar data = me._data;\n\t\t\tvar chartInstance = me._chartInstance;\n\n\t\t\tvar i, len;\n\n\t\t\tif (active.length) {\n\t\t\t\tmodel.opacity = 1;\n\n\t\t\t\tvar labelColors = [],\n\t\t\t\t\ttooltipPosition = getAveragePosition(active);\n\n\t\t\t\tvar tooltipItems = [];\n\t\t\t\tfor (i = 0, len = active.length; i < len; ++i) {\n\t\t\t\t\ttooltipItems.push(createTooltipItem(active[i]));\n\t\t\t\t}\n\n\t\t\t\t// If the user provided a sorting function, use it to modify the tooltip items\n\t\t\t\tif (opts.itemSort) {\n\t\t\t\t\ttooltipItems = tooltipItems.sort(function(a, b) {\n\t\t\t\t\t\treturn opts.itemSort(a, b, data);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// If there is more than one item, show color items\n\t\t\t\tif (active.length > 1) {\n\t\t\t\t\thelpers.each(tooltipItems, function(tooltipItem) {\n\t\t\t\t\t\tlabelColors.push(opts.callbacks.labelColor.call(me, tooltipItem, chartInstance));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Build the Text Lines\n\t\t\t\thelpers.extend(model, {\n\t\t\t\t\ttitle: me.getTitle(tooltipItems, data),\n\t\t\t\t\tbeforeBody: me.getBeforeBody(tooltipItems, data),\n\t\t\t\t\tbody: me.getBody(tooltipItems, data),\n\t\t\t\t\tafterBody: me.getAfterBody(tooltipItems, data),\n\t\t\t\t\tfooter: me.getFooter(tooltipItems, data),\n\t\t\t\t\tx: Math.round(tooltipPosition.x),\n\t\t\t\t\ty: Math.round(tooltipPosition.y),\n\t\t\t\t\tcaretPadding: helpers.getValueOrDefault(tooltipPosition.padding, 2),\n\t\t\t\t\tlabelColors: labelColors\n\t\t\t\t});\n\n\t\t\t\t// We need to determine alignment of\n\t\t\t\tvar tooltipSize = me.getTooltipSize(model);\n\t\t\t\tme.determineAlignment(tooltipSize); // Smart Tooltip placement to stay on the canvas\n\n\t\t\t\thelpers.extend(model, me.getBackgroundPoint(model, tooltipSize));\n\t\t\t} else {\n\t\t\t\tme._model.opacity = 0;\n\t\t\t}\n\n\t\t\tif (changed && opts.custom) {\n\t\t\t\topts.custom.call(me, model);\n\t\t\t}\n\n\t\t\treturn me;\n\t\t},\n\t\tgetTooltipSize: function(vm) {\n\t\t\tvar ctx = this._chart.ctx;\n\n\t\t\tvar size = {\n\t\t\t\theight: vm.yPadding * 2, // Tooltip Padding\n\t\t\t\twidth: 0\n\t\t\t};\n\n\t\t\t// Count of all lines in the body\n\t\t\tvar body = vm.body;\n\t\t\tvar combinedBodyLength = body.reduce(function(count, bodyItem) {\n\t\t\t\treturn count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length;\n\t\t\t}, 0);\n\t\t\tcombinedBodyLength += vm.beforeBody.length + vm.afterBody.length;\n\n\t\t\tvar titleLineCount = vm.title.length;\n\t\t\tvar footerLineCount = vm.footer.length;\n\t\t\tvar titleFontSize = vm.titleFontSize,\n\t\t\t\tbodyFontSize = vm.bodyFontSize,\n\t\t\t\tfooterFontSize = vm.footerFontSize;\n\n\t\t\tsize.height += titleLineCount * titleFontSize; // Title Lines\n\t\t\tsize.height += (titleLineCount - 1) * vm.titleSpacing; // Title Line Spacing\n\t\t\tsize.height += titleLineCount ? vm.titleMarginBottom : 0; // Title's bottom Margin\n\t\t\tsize.height += combinedBodyLength * bodyFontSize; // Body Lines\n\t\t\tsize.height += combinedBodyLength ? (combinedBodyLength - 1) * vm.bodySpacing : 0; // Body Line Spacing\n\t\t\tsize.height += footerLineCount ? vm.footerMarginTop : 0; // Footer Margin\n\t\t\tsize.height += footerLineCount * (footerFontSize); // Footer Lines\n\t\t\tsize.height += footerLineCount ? (footerLineCount - 1) * vm.footerSpacing : 0; // Footer Line Spacing\n\n\t\t\t// Title width\n\t\t\tvar widthPadding = 0;\n\t\t\tvar maxLineWidth = function(line) {\n\t\t\t\tsize.width = Math.max(size.width, ctx.measureText(line).width + widthPadding);\n\t\t\t};\n\n\t\t\tctx.font = helpers.fontString(titleFontSize, vm._titleFontStyle, vm._titleFontFamily);\n\t\t\thelpers.each(vm.title, maxLineWidth);\n\n\t\t\t// Body width\n\t\t\tctx.font = helpers.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\n\t\t\thelpers.each(vm.beforeBody.concat(vm.afterBody), maxLineWidth);\n\n\t\t\t// Body lines may include some extra width due to the color box\n\t\t\twidthPadding = body.length > 1 ? (bodyFontSize + 2) : 0;\n\t\t\thelpers.each(body, function(bodyItem) {\n\t\t\t\thelpers.each(bodyItem.before, maxLineWidth);\n\t\t\t\thelpers.each(bodyItem.lines, maxLineWidth);\n\t\t\t\thelpers.each(bodyItem.after, maxLineWidth);\n\t\t\t});\n\n\t\t\t// Reset back to 0\n\t\t\twidthPadding = 0;\n\n\t\t\t// Footer width\n\t\t\tctx.font = helpers.fontString(footerFontSize, vm._footerFontStyle, vm._footerFontFamily);\n\t\t\thelpers.each(vm.footer, maxLineWidth);\n\n\t\t\t// Add padding\n\t\t\tsize.width += 2 * vm.xPadding;\n\n\t\t\treturn size;\n\t\t},\n\t\tdetermineAlignment: function(size) {\n\t\t\tvar me = this;\n\t\t\tvar model = me._model;\n\t\t\tvar chart = me._chart;\n\t\t\tvar chartArea = me._chartInstance.chartArea;\n\n\t\t\tif (model.y < size.height) {\n\t\t\t\tmodel.yAlign = 'top';\n\t\t\t} else if (model.y > (chart.height - size.height)) {\n\t\t\t\tmodel.yAlign = 'bottom';\n\t\t\t}\n\n\t\t\tvar lf, rf; // functions to determine left, right alignment\n\t\t\tvar olf, orf; // functions to determine if left/right alignment causes tooltip to go outside chart\n\t\t\tvar yf; // function to get the y alignment if the tooltip goes outside of the left or right edges\n\t\t\tvar midX = (chartArea.left + chartArea.right) / 2;\n\t\t\tvar midY = (chartArea.top + chartArea.bottom) / 2;\n\n\t\t\tif (model.yAlign === 'center') {\n\t\t\t\tlf = function(x) {\n\t\t\t\t\treturn x <= midX;\n\t\t\t\t};\n\t\t\t\trf = function(x) {\n\t\t\t\t\treturn x > midX;\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tlf = function(x) {\n\t\t\t\t\treturn x <= (size.width / 2);\n\t\t\t\t};\n\t\t\t\trf = function(x) {\n\t\t\t\t\treturn x >= (chart.width - (size.width / 2));\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tolf = function(x) {\n\t\t\t\treturn x + size.width > chart.width;\n\t\t\t};\n\t\t\torf = function(x) {\n\t\t\t\treturn x - size.width < 0;\n\t\t\t};\n\t\t\tyf = function(y) {\n\t\t\t\treturn y <= midY ? 'top' : 'bottom';\n\t\t\t};\n\n\t\t\tif (lf(model.x)) {\n\t\t\t\tmodel.xAlign = 'left';\n\n\t\t\t\t// Is tooltip too wide and goes over the right side of the chart.?\n\t\t\t\tif (olf(model.x)) {\n\t\t\t\t\tmodel.xAlign = 'center';\n\t\t\t\t\tmodel.yAlign = yf(model.y);\n\t\t\t\t}\n\t\t\t} else if (rf(model.x)) {\n\t\t\t\tmodel.xAlign = 'right';\n\n\t\t\t\t// Is tooltip too wide and goes outside left edge of canvas?\n\t\t\t\tif (orf(model.x)) {\n\t\t\t\t\tmodel.xAlign = 'center';\n\t\t\t\t\tmodel.yAlign = yf(model.y);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetBackgroundPoint: function(vm, size) {\n\t\t\t// Background Position\n\t\t\tvar pt = {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y\n\t\t\t};\n\n\t\t\tvar caretSize = vm.caretSize,\n\t\t\t\tcaretPadding = vm.caretPadding,\n\t\t\t\tcornerRadius = vm.cornerRadius,\n\t\t\t\txAlign = vm.xAlign,\n\t\t\t\tyAlign = vm.yAlign,\n\t\t\t\tpaddingAndSize = caretSize + caretPadding,\n\t\t\t\tradiusAndPadding = cornerRadius + caretPadding;\n\n\t\t\tif (xAlign === 'right') {\n\t\t\t\tpt.x -= size.width;\n\t\t\t} else if (xAlign === 'center') {\n\t\t\t\tpt.x -= (size.width / 2);\n\t\t\t}\n\n\t\t\tif (yAlign === 'top') {\n\t\t\t\tpt.y += paddingAndSize;\n\t\t\t} else if (yAlign === 'bottom') {\n\t\t\t\tpt.y -= size.height + paddingAndSize;\n\t\t\t} else {\n\t\t\t\tpt.y -= (size.height / 2);\n\t\t\t}\n\n\t\t\tif (yAlign === 'center') {\n\t\t\t\tif (xAlign === 'left') {\n\t\t\t\t\tpt.x += paddingAndSize;\n\t\t\t\t} else if (xAlign === 'right') {\n\t\t\t\t\tpt.x -= paddingAndSize;\n\t\t\t\t}\n\t\t\t} else if (xAlign === 'left') {\n\t\t\t\tpt.x -= radiusAndPadding;\n\t\t\t} else if (xAlign === 'right') {\n\t\t\t\tpt.x += radiusAndPadding;\n\t\t\t}\n\n\t\t\treturn pt;\n\t\t},\n\t\tdrawCaret: function(tooltipPoint, size, opacity) {\n\t\t\tvar vm = this._view;\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar x1, x2, x3;\n\t\t\tvar y1, y2, y3;\n\t\t\tvar caretSize = vm.caretSize;\n\t\t\tvar cornerRadius = vm.cornerRadius;\n\t\t\tvar xAlign = vm.xAlign,\n\t\t\t\tyAlign = vm.yAlign;\n\t\t\tvar ptX = tooltipPoint.x,\n\t\t\t\tptY = tooltipPoint.y;\n\t\t\tvar width = size.width,\n\t\t\t\theight = size.height;\n\n\t\t\tif (yAlign === 'center') {\n\t\t\t\t// Left or right side\n\t\t\t\tif (xAlign === 'left') {\n\t\t\t\t\tx1 = ptX;\n\t\t\t\t\tx2 = x1 - caretSize;\n\t\t\t\t\tx3 = x1;\n\t\t\t\t} else {\n\t\t\t\t\tx1 = ptX + width;\n\t\t\t\t\tx2 = x1 + caretSize;\n\t\t\t\t\tx3 = x1;\n\t\t\t\t}\n\n\t\t\t\ty2 = ptY + (height / 2);\n\t\t\t\ty1 = y2 - caretSize;\n\t\t\t\ty3 = y2 + caretSize;\n\t\t\t} else {\n\t\t\t\tif (xAlign === 'left') {\n\t\t\t\t\tx1 = ptX + cornerRadius;\n\t\t\t\t\tx2 = x1 + caretSize;\n\t\t\t\t\tx3 = x2 + caretSize;\n\t\t\t\t} else if (xAlign === 'right') {\n\t\t\t\t\tx1 = ptX + width - cornerRadius;\n\t\t\t\t\tx2 = x1 - caretSize;\n\t\t\t\t\tx3 = x2 - caretSize;\n\t\t\t\t} else {\n\t\t\t\t\tx2 = ptX + (width / 2);\n\t\t\t\t\tx1 = x2 - caretSize;\n\t\t\t\t\tx3 = x2 + caretSize;\n\t\t\t\t}\n\n\t\t\t\tif (yAlign === 'top') {\n\t\t\t\t\ty1 = ptY;\n\t\t\t\t\ty2 = y1 - caretSize;\n\t\t\t\t\ty3 = y1;\n\t\t\t\t} else {\n\t\t\t\t\ty1 = ptY + height;\n\t\t\t\t\ty2 = y1 + caretSize;\n\t\t\t\t\ty3 = y1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar bgColor = helpers.color(vm.backgroundColor);\n\t\t\tctx.fillStyle = bgColor.alpha(opacity * bgColor.alpha()).rgbString();\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x1, y1);\n\t\t\tctx.lineTo(x2, y2);\n\t\t\tctx.lineTo(x3, y3);\n\t\t\tctx.closePath();\n\t\t\tctx.fill();\n\t\t},\n\t\tdrawTitle: function(pt, vm, ctx, opacity) {\n\t\t\tvar title = vm.title;\n\n\t\t\tif (title.length) {\n\t\t\t\tctx.textAlign = vm._titleAlign;\n\t\t\t\tctx.textBaseline = 'top';\n\n\t\t\t\tvar titleFontSize = vm.titleFontSize,\n\t\t\t\t\ttitleSpacing = vm.titleSpacing;\n\n\t\t\t\tvar titleFontColor = helpers.color(vm.titleFontColor);\n\t\t\t\tctx.fillStyle = titleFontColor.alpha(opacity * titleFontColor.alpha()).rgbString();\n\t\t\t\tctx.font = helpers.fontString(titleFontSize, vm._titleFontStyle, vm._titleFontFamily);\n\n\t\t\t\tvar i, len;\n\t\t\t\tfor (i = 0, len = title.length; i < len; ++i) {\n\t\t\t\t\tctx.fillText(title[i], pt.x, pt.y);\n\t\t\t\t\tpt.y += titleFontSize + titleSpacing; // Line Height and spacing\n\n\t\t\t\t\tif (i + 1 === title.length) {\n\t\t\t\t\t\tpt.y += vm.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdrawBody: function(pt, vm, ctx, opacity) {\n\t\t\tvar bodyFontSize = vm.bodyFontSize;\n\t\t\tvar bodySpacing = vm.bodySpacing;\n\t\t\tvar body = vm.body;\n\n\t\t\tctx.textAlign = vm._bodyAlign;\n\t\t\tctx.textBaseline = 'top';\n\n\t\t\tvar bodyFontColor = helpers.color(vm.bodyFontColor);\n\t\t\tvar textColor = bodyFontColor.alpha(opacity * bodyFontColor.alpha()).rgbString();\n\t\t\tctx.fillStyle = textColor;\n\t\t\tctx.font = helpers.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\n\n\t\t\t// Before Body\n\t\t\tvar xLinePadding = 0;\n\t\t\tvar fillLineOfText = function(line) {\n\t\t\t\tctx.fillText(line, pt.x + xLinePadding, pt.y);\n\t\t\t\tpt.y += bodyFontSize + bodySpacing;\n\t\t\t};\n\n\t\t\t// Before body lines\n\t\t\thelpers.each(vm.beforeBody, fillLineOfText);\n\n\t\t\tvar drawColorBoxes = body.length > 1;\n\t\t\txLinePadding = drawColorBoxes ? (bodyFontSize + 2) : 0;\n\n\t\t\t// Draw body lines now\n\t\t\thelpers.each(body, function(bodyItem, i) {\n\t\t\t\thelpers.each(bodyItem.before, fillLineOfText);\n\n\t\t\t\thelpers.each(bodyItem.lines, function(line) {\n\t\t\t\t\t// Draw Legend-like boxes if needed\n\t\t\t\t\tif (drawColorBoxes) {\n\t\t\t\t\t\t// Fill a white rect so that colours merge nicely if the opacity is < 1\n\t\t\t\t\t\tctx.fillStyle = helpers.color(vm.legendColorBackground).alpha(opacity).rgbaString();\n\t\t\t\t\t\tctx.fillRect(pt.x, pt.y, bodyFontSize, bodyFontSize);\n\n\t\t\t\t\t\t// Border\n\t\t\t\t\t\tctx.strokeStyle = helpers.color(vm.labelColors[i].borderColor).alpha(opacity).rgbaString();\n\t\t\t\t\t\tctx.strokeRect(pt.x, pt.y, bodyFontSize, bodyFontSize);\n\n\t\t\t\t\t\t// Inner square\n\t\t\t\t\t\tctx.fillStyle = helpers.color(vm.labelColors[i].backgroundColor).alpha(opacity).rgbaString();\n\t\t\t\t\t\tctx.fillRect(pt.x + 1, pt.y + 1, bodyFontSize - 2, bodyFontSize - 2);\n\n\t\t\t\t\t\tctx.fillStyle = textColor;\n\t\t\t\t\t}\n\n\t\t\t\t\tfillLineOfText(line);\n\t\t\t\t});\n\n\t\t\t\thelpers.each(bodyItem.after, fillLineOfText);\n\t\t\t});\n\n\t\t\t// Reset back to 0 for after body\n\t\t\txLinePadding = 0;\n\n\t\t\t// After body lines\n\t\t\thelpers.each(vm.afterBody, fillLineOfText);\n\t\t\tpt.y -= bodySpacing; // Remove last body spacing\n\t\t},\n\t\tdrawFooter: function(pt, vm, ctx, opacity) {\n\t\t\tvar footer = vm.footer;\n\n\t\t\tif (footer.length) {\n\t\t\t\tpt.y += vm.footerMarginTop;\n\n\t\t\t\tctx.textAlign = vm._footerAlign;\n\t\t\t\tctx.textBaseline = 'top';\n\n\t\t\t\tvar footerFontColor = helpers.color(vm.footerFontColor);\n\t\t\t\tctx.fillStyle = footerFontColor.alpha(opacity * footerFontColor.alpha()).rgbString();\n\t\t\t\tctx.font = helpers.fontString(vm.footerFontSize, vm._footerFontStyle, vm._footerFontFamily);\n\n\t\t\t\thelpers.each(footer, function(line) {\n\t\t\t\t\tctx.fillText(line, pt.x, pt.y);\n\t\t\t\t\tpt.y += vm.footerFontSize + vm.footerSpacing;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tdraw: function() {\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar vm = this._view;\n\n\t\t\tif (vm.opacity === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar tooltipSize = this.getTooltipSize(vm);\n\t\t\tvar pt = {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y\n\t\t\t};\n\n\t\t\t// IE11/Edge does not like very small opacities, so snap to 0\n\t\t\tvar opacity = Math.abs(vm.opacity < 1e-3) ? 0 : vm.opacity;\n\n\t\t\tif (this._options.enabled) {\n\t\t\t\t// Draw Background\n\t\t\t\tvar bgColor = helpers.color(vm.backgroundColor);\n\t\t\t\tctx.fillStyle = bgColor.alpha(opacity * bgColor.alpha()).rgbString();\n\t\t\t\thelpers.drawRoundedRectangle(ctx, pt.x, pt.y, tooltipSize.width, tooltipSize.height, vm.cornerRadius);\n\t\t\t\tctx.fill();\n\n\t\t\t\t// Draw Caret\n\t\t\t\tthis.drawCaret(pt, tooltipSize, opacity);\n\n\t\t\t\t// Draw Title, Body, and Footer\n\t\t\t\tpt.x += vm.xPadding;\n\t\t\t\tpt.y += vm.yPadding;\n\n\t\t\t\t// Titles\n\t\t\t\tthis.drawTitle(pt, vm, ctx, opacity);\n\n\t\t\t\t// Body\n\t\t\t\tthis.drawBody(pt, vm, ctx, opacity);\n\n\t\t\t\t// Footer\n\t\t\t\tthis.drawFooter(pt, vm, ctx, opacity);\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers,\n\t\tglobalOpts = Chart.defaults.global;\n\n\tglobalOpts.elements.arc = {\n\t\tbackgroundColor: globalOpts.defaultColor,\n\t\tborderColor: '#fff',\n\t\tborderWidth: 2\n\t};\n\n\tChart.elements.Arc = Chart.Element.extend({\n\t\tinLabelRange: function(mouseX) {\n\t\t\tvar vm = this._view;\n\n\t\t\tif (vm) {\n\t\t\t\treturn (Math.pow(mouseX - vm.x, 2) < Math.pow(vm.radius + vm.hoverRadius, 2));\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tinRange: function(chartX, chartY) {\n\t\t\tvar vm = this._view;\n\n\t\t\tif (vm) {\n\t\t\t\tvar pointRelativePosition = helpers.getAngleFromPoint(vm, {\n\t\t\t\t\t\tx: chartX,\n\t\t\t\t\t\ty: chartY\n\t\t\t\t\t}),\n\t\t\t\t\tangle = pointRelativePosition.angle,\n\t\t\t\t\tdistance = pointRelativePosition.distance;\n\n\t\t\t\t// Sanitise angle range\n\t\t\t\tvar startAngle = vm.startAngle;\n\t\t\t\tvar endAngle = vm.endAngle;\n\t\t\t\twhile (endAngle < startAngle) {\n\t\t\t\t\tendAngle += 2.0 * Math.PI;\n\t\t\t\t}\n\t\t\t\twhile (angle > endAngle) {\n\t\t\t\t\tangle -= 2.0 * Math.PI;\n\t\t\t\t}\n\t\t\t\twhile (angle < startAngle) {\n\t\t\t\t\tangle += 2.0 * Math.PI;\n\t\t\t\t}\n\n\t\t\t\t// Check if within the range of the open/close angle\n\t\t\t\tvar betweenAngles = (angle >= startAngle && angle <= endAngle),\n\t\t\t\t\twithinRadius = (distance >= vm.innerRadius && distance <= vm.outerRadius);\n\n\t\t\t\treturn (betweenAngles && withinRadius);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\ttooltipPosition: function() {\n\t\t\tvar vm = this._view;\n\n\t\t\tvar centreAngle = vm.startAngle + ((vm.endAngle - vm.startAngle) / 2),\n\t\t\t\trangeFromCentre = (vm.outerRadius - vm.innerRadius) / 2 + vm.innerRadius;\n\t\t\treturn {\n\t\t\t\tx: vm.x + (Math.cos(centreAngle) * rangeFromCentre),\n\t\t\t\ty: vm.y + (Math.sin(centreAngle) * rangeFromCentre)\n\t\t\t};\n\t\t},\n\t\tdraw: function() {\n\n\t\t\tvar ctx = this._chart.ctx,\n\t\t\t\tvm = this._view,\n\t\t\t\tsA = vm.startAngle,\n\t\t\t\teA = vm.endAngle;\n\n\t\t\tctx.beginPath();\n\n\t\t\tctx.arc(vm.x, vm.y, vm.outerRadius, sA, eA);\n\t\t\tctx.arc(vm.x, vm.y, vm.innerRadius, eA, sA, true);\n\n\t\t\tctx.closePath();\n\t\t\tctx.strokeStyle = vm.borderColor;\n\t\t\tctx.lineWidth = vm.borderWidth;\n\n\t\t\tctx.fillStyle = vm.backgroundColor;\n\n\t\t\tctx.fill();\n\t\t\tctx.lineJoin = 'bevel';\n\n\t\t\tif (vm.borderWidth) {\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar globalDefaults = Chart.defaults.global;\n\n\tChart.defaults.global.elements.line = {\n\t\ttension: 0.4,\n\t\tbackgroundColor: globalDefaults.defaultColor,\n\t\tborderWidth: 3,\n\t\tborderColor: globalDefaults.defaultColor,\n\t\tborderCapStyle: 'butt',\n\t\tborderDash: [],\n\t\tborderDashOffset: 0.0,\n\t\tborderJoinStyle: 'miter',\n\t\tcapBezierPoints: true,\n\t\tfill: true // do we fill in the area between the line and its base axis\n\t};\n\n\tChart.elements.Line = Chart.Element.extend({\n\t\tdraw: function() {\n\t\t\tvar me = this;\n\t\t\tvar vm = me._view;\n\t\t\tvar spanGaps = vm.spanGaps;\n\t\t\tvar scaleZero = vm.scaleZero;\n\t\t\tvar loop = me._loop;\n\n\t\t\tvar ctx = me._chart.ctx;\n\t\t\tctx.save();\n\n\t\t\t// Helper function to draw a line to a point\n\t\t\tfunction lineToPoint(previousPoint, point) {\n\t\t\t\tvar pointVM = point._view;\n\t\t\t\tif (point._view.steppedLine === true) {\n\t\t\t\t\tctx.lineTo(pointVM.x, previousPoint._view.y);\n\t\t\t\t\tctx.lineTo(pointVM.x, pointVM.y);\n\t\t\t\t} else if (point._view.tension === 0) {\n\t\t\t\t\tctx.lineTo(pointVM.x, pointVM.y);\n\t\t\t\t} else {\n\t\t\t\t\tctx.bezierCurveTo(\n\t\t\t\t\t\tpreviousPoint._view.controlPointNextX,\n\t\t\t\t\t\tpreviousPoint._view.controlPointNextY,\n\t\t\t\t\t\tpointVM.controlPointPreviousX,\n\t\t\t\t\t\tpointVM.controlPointPreviousY,\n\t\t\t\t\t\tpointVM.x,\n\t\t\t\t\t\tpointVM.y\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar points = me._children.slice(); // clone array\n\t\t\tvar lastDrawnIndex = -1;\n\n\t\t\t// If we are looping, adding the first point again\n\t\t\tif (loop && points.length) {\n\t\t\t\tpoints.push(points[0]);\n\t\t\t}\n\n\t\t\tvar index, current, previous, currentVM;\n\n\t\t\t// Fill Line\n\t\t\tif (points.length && vm.fill) {\n\t\t\t\tctx.beginPath();\n\n\t\t\t\tfor (index = 0; index < points.length; ++index) {\n\t\t\t\t\tcurrent = points[index];\n\t\t\t\t\tprevious = helpers.previousItem(points, index);\n\t\t\t\t\tcurrentVM = current._view;\n\n\t\t\t\t\t// First point moves to it's starting position no matter what\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\tif (loop) {\n\t\t\t\t\t\t\tctx.moveTo(scaleZero.x, scaleZero.y);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.moveTo(currentVM.x, scaleZero);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!currentVM.skip) {\n\t\t\t\t\t\t\tlastDrawnIndex = index;\n\t\t\t\t\t\t\tctx.lineTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprevious = lastDrawnIndex === -1 ? previous : points[lastDrawnIndex];\n\n\t\t\t\t\t\tif (currentVM.skip) {\n\t\t\t\t\t\t\t// Only do this if this is the first point that is skipped\n\t\t\t\t\t\t\tif (!spanGaps && lastDrawnIndex === (index - 1)) {\n\t\t\t\t\t\t\t\tif (loop) {\n\t\t\t\t\t\t\t\t\tctx.lineTo(scaleZero.x, scaleZero.y);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tctx.lineTo(previous._view.x, scaleZero);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (lastDrawnIndex !== (index - 1)) {\n\t\t\t\t\t\t\t\t// There was a gap and this is the first point after the gap. If we've never drawn a point, this is a special case.\n\t\t\t\t\t\t\t\t// If the first data point is NaN, then there is no real gap to skip\n\t\t\t\t\t\t\t\tif (spanGaps && lastDrawnIndex !== -1) {\n\t\t\t\t\t\t\t\t\t// We are spanning the gap, so simple draw a line to this point\n\t\t\t\t\t\t\t\t\tlineToPoint(previous, current);\n\t\t\t\t\t\t\t\t} else if (loop) {\n\t\t\t\t\t\t\t\t\tctx.lineTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tctx.lineTo(currentVM.x, scaleZero);\n\t\t\t\t\t\t\t\t\tctx.lineTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Line to next point\n\t\t\t\t\t\t\t\tlineToPoint(previous, current);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlastDrawnIndex = index;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!loop && lastDrawnIndex !== -1) {\n\t\t\t\t\tctx.lineTo(points[lastDrawnIndex]._view.x, scaleZero);\n\t\t\t\t}\n\n\t\t\t\tctx.fillStyle = vm.backgroundColor || globalDefaults.defaultColor;\n\t\t\t\tctx.closePath();\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\t// Stroke Line Options\n\t\t\tvar globalOptionLineElements = globalDefaults.elements.line;\n\t\t\tctx.lineCap = vm.borderCapStyle || globalOptionLineElements.borderCapStyle;\n\n\t\t\t// IE 9 and 10 do not support line dash\n\t\t\tif (ctx.setLineDash) {\n\t\t\t\tctx.setLineDash(vm.borderDash || globalOptionLineElements.borderDash);\n\t\t\t}\n\n\t\t\tctx.lineDashOffset = vm.borderDashOffset || globalOptionLineElements.borderDashOffset;\n\t\t\tctx.lineJoin = vm.borderJoinStyle || globalOptionLineElements.borderJoinStyle;\n\t\t\tctx.lineWidth = vm.borderWidth || globalOptionLineElements.borderWidth;\n\t\t\tctx.strokeStyle = vm.borderColor || globalDefaults.defaultColor;\n\n\t\t\t// Stroke Line\n\t\t\tctx.beginPath();\n\t\t\tlastDrawnIndex = -1;\n\n\t\t\tfor (index = 0; index < points.length; ++index) {\n\t\t\t\tcurrent = points[index];\n\t\t\t\tprevious = helpers.previousItem(points, index);\n\t\t\t\tcurrentVM = current._view;\n\n\t\t\t\t// First point moves to it's starting position no matter what\n\t\t\t\tif (index === 0) {\n\t\t\t\t\tif (!currentVM.skip) {\n\t\t\t\t\t\tctx.moveTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\tlastDrawnIndex = index;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tprevious = lastDrawnIndex === -1 ? previous : points[lastDrawnIndex];\n\n\t\t\t\t\tif (!currentVM.skip) {\n\t\t\t\t\t\tif ((lastDrawnIndex !== (index - 1) && !spanGaps) || lastDrawnIndex === -1) {\n\t\t\t\t\t\t\t// There was a gap and this is the first point after the gap\n\t\t\t\t\t\t\tctx.moveTo(currentVM.x, currentVM.y);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Line to next point\n\t\t\t\t\t\t\tlineToPoint(previous, current);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastDrawnIndex = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tctx.stroke();\n\t\t\tctx.restore();\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers,\n\t\tglobalOpts = Chart.defaults.global,\n\t\tdefaultColor = globalOpts.defaultColor;\n\n\tglobalOpts.elements.point = {\n\t\tradius: 3,\n\t\tpointStyle: 'circle',\n\t\tbackgroundColor: defaultColor,\n\t\tborderWidth: 1,\n\t\tborderColor: defaultColor,\n\t\t// Hover\n\t\thitRadius: 1,\n\t\thoverRadius: 4,\n\t\thoverBorderWidth: 1\n\t};\n\n\tChart.elements.Point = Chart.Element.extend({\n\t\tinRange: function(mouseX, mouseY) {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm ? ((Math.pow(mouseX - vm.x, 2) + Math.pow(mouseY - vm.y, 2)) < Math.pow(vm.hitRadius + vm.radius, 2)) : false;\n\t\t},\n\t\tinLabelRange: function(mouseX) {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm ? (Math.pow(mouseX - vm.x, 2) < Math.pow(vm.radius + vm.hitRadius, 2)) : false;\n\t\t},\n\t\ttooltipPosition: function() {\n\t\t\tvar vm = this._view;\n\t\t\treturn {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y,\n\t\t\t\tpadding: vm.radius + vm.borderWidth\n\t\t\t};\n\t\t},\n\t\tdraw: function() {\n\t\t\tvar vm = this._view;\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar pointStyle = vm.pointStyle;\n\t\t\tvar radius = vm.radius;\n\t\t\tvar x = vm.x;\n\t\t\tvar y = vm.y;\n\n\t\t\tif (vm.skip) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tctx.strokeStyle = vm.borderColor || defaultColor;\n\t\t\tctx.lineWidth = helpers.getValueOrDefault(vm.borderWidth, globalOpts.elements.point.borderWidth);\n\t\t\tctx.fillStyle = vm.backgroundColor || defaultColor;\n\n\t\t\tChart.canvasHelpers.drawPoint(ctx, pointStyle, radius, x, y);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar globalOpts = Chart.defaults.global;\n\n\tglobalOpts.elements.rectangle = {\n\t\tbackgroundColor: globalOpts.defaultColor,\n\t\tborderWidth: 0,\n\t\tborderColor: globalOpts.defaultColor,\n\t\tborderSkipped: 'bottom'\n\t};\n\n\tChart.elements.Rectangle = Chart.Element.extend({\n\t\tdraw: function() {\n\t\t\tvar ctx = this._chart.ctx;\n\t\t\tvar vm = this._view;\n\n\t\t\tvar halfWidth = vm.width / 2,\n\t\t\t\tleftX = vm.x - halfWidth,\n\t\t\t\trightX = vm.x + halfWidth,\n\t\t\t\ttop = vm.base - (vm.base - vm.y),\n\t\t\t\thalfStroke = vm.borderWidth / 2;\n\n\t\t\t// Canvas doesn't allow us to stroke inside the width so we can\n\t\t\t// adjust the sizes to fit if we're setting a stroke on the line\n\t\t\tif (vm.borderWidth) {\n\t\t\t\tleftX += halfStroke;\n\t\t\t\trightX -= halfStroke;\n\t\t\t\ttop += halfStroke;\n\t\t\t}\n\n\t\t\tctx.beginPath();\n\t\t\tctx.fillStyle = vm.backgroundColor;\n\t\t\tctx.strokeStyle = vm.borderColor;\n\t\t\tctx.lineWidth = vm.borderWidth;\n\n\t\t\t// Corner points, from bottom-left to bottom-right clockwise\n\t\t\t// | 1 2 |\n\t\t\t// | 0 3 |\n\t\t\tvar corners = [\n\t\t\t\t[leftX, vm.base],\n\t\t\t\t[leftX, top],\n\t\t\t\t[rightX, top],\n\t\t\t\t[rightX, vm.base]\n\t\t\t];\n\n\t\t\t// Find first (starting) corner with fallback to 'bottom'\n\t\t\tvar borders = ['bottom', 'left', 'top', 'right'];\n\t\t\tvar startCorner = borders.indexOf(vm.borderSkipped, 0);\n\t\t\tif (startCorner === -1) {\n\t\t\t\tstartCorner = 0;\n\t\t\t}\n\n\t\t\tfunction cornerAt(index) {\n\t\t\t\treturn corners[(startCorner + index) % 4];\n\t\t\t}\n\n\t\t\t// Draw rectangle from 'startCorner'\n\t\t\tctx.moveTo.apply(ctx, cornerAt(0));\n\t\t\tfor (var i = 1; i < 4; i++) {\n\t\t\t\tctx.lineTo.apply(ctx, cornerAt(i));\n\t\t\t}\n\n\t\t\tctx.fill();\n\t\t\tif (vm.borderWidth) {\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t},\n\t\theight: function() {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm.base - vm.y;\n\t\t},\n\t\tinRange: function(mouseX, mouseY) {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm ?\n\t\t\t\t\t(vm.y < vm.base ?\n\t\t\t\t\t\t(mouseX >= vm.x - vm.width / 2 && mouseX <= vm.x + vm.width / 2) && (mouseY >= vm.y && mouseY <= vm.base) :\n\t\t\t\t\t\t(mouseX >= vm.x - vm.width / 2 && mouseX <= vm.x + vm.width / 2) && (mouseY >= vm.base && mouseY <= vm.y)) :\n\t\t\t\t\tfalse;\n\t\t},\n\t\tinLabelRange: function(mouseX) {\n\t\t\tvar vm = this._view;\n\t\t\treturn vm ? (mouseX >= vm.x - vm.width / 2 && mouseX <= vm.x + vm.width / 2) : false;\n\t\t},\n\t\ttooltipPosition: function() {\n\t\t\tvar vm = this._view;\n\t\t\treturn {\n\t\t\t\tx: vm.x,\n\t\t\t\ty: vm.y\n\t\t\t};\n\t\t}\n\t});\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers,\n\t\tnoop = helpers.noop;\n\n\tChart.LinearScaleBase = Chart.Scale.extend({\n\t\thandleTickRangeOptions: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\n\t\t\t// If we are forcing it to begin at 0, but 0 will already be rendered on the chart,\n\t\t\t// do nothing since that would make the chart weird. If the user really wants a weird chart\n\t\t\t// axis, they can manually override it\n\t\t\tif (tickOpts.beginAtZero) {\n\t\t\t\tvar minSign = helpers.sign(me.min);\n\t\t\t\tvar maxSign = helpers.sign(me.max);\n\n\t\t\t\tif (minSign < 0 && maxSign < 0) {\n\t\t\t\t\t// move the top up to 0\n\t\t\t\t\tme.max = 0;\n\t\t\t\t} else if (minSign > 0 && maxSign > 0) {\n\t\t\t\t\t// move the botttom down to 0\n\t\t\t\t\tme.min = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tickOpts.min !== undefined) {\n\t\t\t\tme.min = tickOpts.min;\n\t\t\t} else if (tickOpts.suggestedMin !== undefined) {\n\t\t\t\tme.min = Math.min(me.min, tickOpts.suggestedMin);\n\t\t\t}\n\n\t\t\tif (tickOpts.max !== undefined) {\n\t\t\t\tme.max = tickOpts.max;\n\t\t\t} else if (tickOpts.suggestedMax !== undefined) {\n\t\t\t\tme.max = Math.max(me.max, tickOpts.suggestedMax);\n\t\t\t}\n\n\t\t\tif (me.min === me.max) {\n\t\t\t\tme.max++;\n\n\t\t\t\tif (!tickOpts.beginAtZero) {\n\t\t\t\t\tme.min--;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetTickLimit: noop,\n\t\thandleDirectionalChanges: noop,\n\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar ticks = me.ticks = [];\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\n\t\t\t// Figure out what the max number of ticks we can support it is based on the size of\n\t\t\t// the axis area. For now, we say that the minimum tick spacing in pixels must be 50\n\t\t\t// We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\n\t\t\t// the graph\n\n\t\t\tvar maxTicks = me.getTickLimit();\n\n\t\t\t// Make sure we always have at least 2 ticks\n\t\t\tmaxTicks = Math.max(2, maxTicks);\n\n\t\t\t// To get a \"nice\" value for the tick spacing, we will use the appropriately named\n\t\t\t// \"nice number\" algorithm. See http://stackoverflow.com/questions/8506881/nice-label-algorithm-for-charts-with-minimum-ticks\n\t\t\t// for details.\n\n\t\t\tvar spacing;\n\t\t\tvar fixedStepSizeSet = (tickOpts.fixedStepSize && tickOpts.fixedStepSize > 0) || (tickOpts.stepSize && tickOpts.stepSize > 0);\n\t\t\tif (fixedStepSizeSet) {\n\t\t\t\tspacing = getValueOrDefault(tickOpts.fixedStepSize, tickOpts.stepSize);\n\t\t\t} else {\n\t\t\t\tvar niceRange = helpers.niceNum(me.max - me.min, false);\n\t\t\t\tspacing = helpers.niceNum(niceRange / (maxTicks - 1), true);\n\t\t\t}\n\t\t\tvar niceMin = Math.floor(me.min / spacing) * spacing;\n\t\t\tvar niceMax = Math.ceil(me.max / spacing) * spacing;\n\t\t\tvar numSpaces = (niceMax - niceMin) / spacing;\n\n\t\t\t// If very close to our rounded value, use it.\n\t\t\tif (helpers.almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n\t\t\t\tnumSpaces = Math.round(numSpaces);\n\t\t\t} else {\n\t\t\t\tnumSpaces = Math.ceil(numSpaces);\n\t\t\t}\n\n\t\t\t// Put the values into the ticks array\n\t\t\tticks.push(tickOpts.min !== undefined ? tickOpts.min : niceMin);\n\t\t\tfor (var j = 1; j < numSpaces; ++j) {\n\t\t\t\tticks.push(niceMin + (j * spacing));\n\t\t\t}\n\t\t\tticks.push(tickOpts.max !== undefined ? tickOpts.max : niceMax);\n\n\t\t\tme.handleDirectionalChanges();\n\n\t\t\t// At this point, we need to update our max and min given the tick values since we have expanded the\n\t\t\t// range of the scale\n\t\t\tme.max = helpers.max(ticks);\n\t\t\tme.min = helpers.min(ticks);\n\n\t\t\tif (tickOpts.reverse) {\n\t\t\t\tticks.reverse();\n\n\t\t\t\tme.start = me.max;\n\t\t\t\tme.end = me.min;\n\t\t\t} else {\n\t\t\t\tme.start = me.min;\n\t\t\t\tme.end = me.max;\n\t\t\t}\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\tme.ticksAsNumbers = me.ticks.slice();\n\t\t\tme.zeroLineIndex = me.ticks.indexOf(0);\n\n\t\t\tChart.Scale.prototype.convertTicksToLabels.call(me);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\t// Default config for a category scale\n\tvar defaultConfig = {\n\t\tposition: 'bottom'\n\t};\n\n\tvar DatasetScale = Chart.Scale.extend({\n\t\t/**\n\t\t* Internal function to get the correct labels. If data.xLabels or data.yLabels are defined, use tose\n\t\t* else fall back to data.labels\n\t\t* @private\n\t\t*/\n\t\tgetLabels: function() {\n\t\t\tvar data = this.chart.data;\n\t\t\treturn (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels;\n\t\t},\n\t\t// Implement this so that\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tvar labels = me.getLabels();\n\t\t\tme.minIndex = 0;\n\t\t\tme.maxIndex = labels.length - 1;\n\t\t\tvar findIndex;\n\n\t\t\tif (me.options.ticks.min !== undefined) {\n\t\t\t\t// user specified min value\n\t\t\t\tfindIndex = helpers.indexOf(labels, me.options.ticks.min);\n\t\t\t\tme.minIndex = findIndex !== -1 ? findIndex : me.minIndex;\n\t\t\t}\n\n\t\t\tif (me.options.ticks.max !== undefined) {\n\t\t\t\t// user specified max value\n\t\t\t\tfindIndex = helpers.indexOf(labels, me.options.ticks.max);\n\t\t\t\tme.maxIndex = findIndex !== -1 ? findIndex : me.maxIndex;\n\t\t\t}\n\n\t\t\tme.min = labels[me.minIndex];\n\t\t\tme.max = labels[me.maxIndex];\n\t\t},\n\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\t\t\tvar labels = me.getLabels();\n\t\t\t// If we are viewing some subset of labels, slice the original array\n\t\t\tme.ticks = (me.minIndex === 0 && me.maxIndex === labels.length - 1) ? labels : labels.slice(me.minIndex, me.maxIndex + 1);\n\t\t},\n\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar data = me.chart.data;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\tif ((data.xLabels && isHorizontal) || (data.yLabels && !isHorizontal)) {\n\t\t\t\treturn me.getRightValue(data.datasets[datasetIndex].data[index]);\n\t\t\t}\n\t\t\treturn me.ticks[index];\n\t\t},\n\n\t\t// Used to get data value locations.  Value can either be an index or a numerical value\n\t\tgetPixelForValue: function(value, index, datasetIndex, includeOffset) {\n\t\t\tvar me = this;\n\t\t\t// 1 is added because we need the length but we have the indexes\n\t\t\tvar offsetAmt = Math.max((me.maxIndex + 1 - me.minIndex - ((me.options.gridLines.offsetGridLines) ? 0 : 1)), 1);\n\n\t\t\tif (value !== undefined && isNaN(index)) {\n\t\t\t\tvar labels = me.getLabels();\n\t\t\t\tvar idx = labels.indexOf(value);\n\t\t\t\tindex = idx !== -1 ? idx : index;\n\t\t\t}\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\tvar valueWidth = innerWidth / offsetAmt;\n\t\t\t\tvar widthOffset = (valueWidth * (index - me.minIndex)) + me.paddingLeft;\n\n\t\t\t\tif (me.options.gridLines.offsetGridLines && includeOffset || me.maxIndex === me.minIndex && includeOffset) {\n\t\t\t\t\twidthOffset += (valueWidth / 2);\n\t\t\t\t}\n\n\t\t\t\treturn me.left + Math.round(widthOffset);\n\t\t\t}\n\t\t\tvar innerHeight = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\tvar valueHeight = innerHeight / offsetAmt;\n\t\t\tvar heightOffset = (valueHeight * (index - me.minIndex)) + me.paddingTop;\n\n\t\t\tif (me.options.gridLines.offsetGridLines && includeOffset) {\n\t\t\t\theightOffset += (valueHeight / 2);\n\t\t\t}\n\n\t\t\treturn me.top + Math.round(heightOffset);\n\t\t},\n\t\tgetPixelForTick: function(index, includeOffset) {\n\t\t\treturn this.getPixelForValue(this.ticks[index], index + this.minIndex, null, includeOffset);\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar value;\n\t\t\tvar offsetAmt = Math.max((me.ticks.length - ((me.options.gridLines.offsetGridLines) ? 0 : 1)), 1);\n\t\t\tvar horz = me.isHorizontal();\n\t\t\tvar innerDimension = horz ? me.width - (me.paddingLeft + me.paddingRight) : me.height - (me.paddingTop + me.paddingBottom);\n\t\t\tvar valueDimension = innerDimension / offsetAmt;\n\n\t\t\tpixel -= horz ? me.left : me.top;\n\n\t\t\tif (me.options.gridLines.offsetGridLines) {\n\t\t\t\tpixel -= (valueDimension / 2);\n\t\t\t}\n\t\t\tpixel -= horz ? me.paddingLeft : me.paddingTop;\n\n\t\t\tif (pixel <= 0) {\n\t\t\t\tvalue = 0;\n\t\t\t} else {\n\t\t\t\tvalue = Math.round(pixel / valueDimension);\n\t\t\t}\n\n\t\t\treturn value;\n\t\t},\n\t\tgetBasePixel: function() {\n\t\t\treturn this.bottom;\n\t\t}\n\t});\n\n\tChart.scaleService.registerScaleType('category', DatasetScale, defaultConfig);\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\t\tposition: 'left',\n\t\tticks: {\n\t\t\tcallback: function(tickValue, index, ticks) {\n\t\t\t\t// If we have lots of ticks, don't use the ones\n\t\t\t\tvar delta = ticks.length > 3 ? ticks[2] - ticks[1] : ticks[1] - ticks[0];\n\n\t\t\t\t// If we have a number like 2.5 as the delta, figure out how many decimal places we need\n\t\t\t\tif (Math.abs(delta) > 1) {\n\t\t\t\t\tif (tickValue !== Math.floor(tickValue)) {\n\t\t\t\t\t\t// not an integer\n\t\t\t\t\t\tdelta = tickValue - Math.floor(tickValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar logDelta = helpers.log10(Math.abs(delta));\n\t\t\t\tvar tickString = '';\n\n\t\t\t\tif (tickValue !== 0) {\n\t\t\t\t\tvar numDecimal = -1 * Math.floor(logDelta);\n\t\t\t\t\tnumDecimal = Math.max(Math.min(numDecimal, 20), 0); // toFixed has a max of 20 decimal places\n\t\t\t\t\ttickString = tickValue.toFixed(numDecimal);\n\t\t\t\t} else {\n\t\t\t\t\ttickString = '0'; // never show decimal places for 0\n\t\t\t\t}\n\n\t\t\t\treturn tickString;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar LinearScale = Chart.LinearScaleBase.extend({\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar chart = me.chart;\n\t\t\tvar data = chart.data;\n\t\t\tvar datasets = data.datasets;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\n\t\t\tfunction IDMatches(meta) {\n\t\t\t\treturn isHorizontal ? meta.xAxisID === me.id : meta.yAxisID === me.id;\n\t\t\t}\n\n\t\t\t// First Calculate the range\n\t\t\tme.min = null;\n\t\t\tme.max = null;\n\n\t\t\tif (opts.stacked) {\n\t\t\t\tvar valuesPerType = {};\n\n\t\t\t\thelpers.each(datasets, function(dataset, datasetIndex) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\t\t\t\t\tif (valuesPerType[meta.type] === undefined) {\n\t\t\t\t\t\tvaluesPerType[meta.type] = {\n\t\t\t\t\t\t\tpositiveValues: [],\n\t\t\t\t\t\t\tnegativeValues: []\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Store these per type\n\t\t\t\t\tvar positiveValues = valuesPerType[meta.type].positiveValues;\n\t\t\t\t\tvar negativeValues = valuesPerType[meta.type].negativeValues;\n\n\t\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\n\t\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpositiveValues[index] = positiveValues[index] || 0;\n\t\t\t\t\t\t\tnegativeValues[index] = negativeValues[index] || 0;\n\n\t\t\t\t\t\t\tif (opts.relativePoints) {\n\t\t\t\t\t\t\t\tpositiveValues[index] = 100;\n\t\t\t\t\t\t\t} else if (value < 0) {\n\t\t\t\t\t\t\t\tnegativeValues[index] += value;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpositiveValues[index] += value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\thelpers.each(valuesPerType, function(valuesForType) {\n\t\t\t\t\tvar values = valuesForType.positiveValues.concat(valuesForType.negativeValues);\n\t\t\t\t\tvar minVal = helpers.min(values);\n\t\t\t\t\tvar maxVal = helpers.max(values);\n\t\t\t\t\tme.min = me.min === null ? minVal : Math.min(me.min, minVal);\n\t\t\t\t\tme.max = me.max === null ? maxVal : Math.max(me.max, maxVal);\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\thelpers.each(datasets, function(dataset, datasetIndex) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\t\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\n\t\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (me.min === null) {\n\t\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t\t} else if (value < me.min) {\n\t\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (me.max === null) {\n\t\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t\t} else if (value > me.max) {\n\t\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\n\t\t\tthis.handleTickRangeOptions();\n\t\t},\n\t\tgetTickLimit: function() {\n\t\t\tvar maxTicks;\n\t\t\tvar me = this;\n\t\t\tvar tickOpts = me.options.ticks;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tmaxTicks = Math.min(tickOpts.maxTicksLimit ? tickOpts.maxTicksLimit : 11, Math.ceil(me.width / 50));\n\t\t\t} else {\n\t\t\t\t// The factor of 2 used to scale the font size has been experimentally determined.\n\t\t\t\tvar tickFontSize = helpers.getValueOrDefault(tickOpts.fontSize, Chart.defaults.global.defaultFontSize);\n\t\t\t\tmaxTicks = Math.min(tickOpts.maxTicksLimit ? tickOpts.maxTicksLimit : 11, Math.ceil(me.height / (2 * tickFontSize)));\n\t\t\t}\n\n\t\t\treturn maxTicks;\n\t\t},\n\t\t// Called after the ticks are built. We need\n\t\thandleDirectionalChanges: function() {\n\t\t\tif (!this.isHorizontal()) {\n\t\t\t\t// We are in a vertical orientation. The top value is the highest. So reverse the array\n\t\t\t\tthis.ticks.reverse();\n\t\t\t}\n\t\t},\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\treturn +this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);\n\t\t},\n\t\t// Utils\n\t\tgetPixelForValue: function(value) {\n\t\t\t// This must be called after fit has been run so that\n\t\t\t// this.left, this.top, this.right, and this.bottom have been defined\n\t\t\tvar me = this;\n\t\t\tvar paddingLeft = me.paddingLeft;\n\t\t\tvar paddingBottom = me.paddingBottom;\n\t\t\tvar start = me.start;\n\n\t\t\tvar rightValue = +me.getRightValue(value);\n\t\t\tvar pixel;\n\t\t\tvar innerDimension;\n\t\t\tvar range = me.end - start;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tinnerDimension = me.width - (paddingLeft + me.paddingRight);\n\t\t\t\tpixel = me.left + (innerDimension / range * (rightValue - start));\n\t\t\t\treturn Math.round(pixel + paddingLeft);\n\t\t\t}\n\t\t\tinnerDimension = me.height - (me.paddingTop + paddingBottom);\n\t\t\tpixel = (me.bottom - paddingBottom) - (innerDimension / range * (rightValue - start));\n\t\t\treturn Math.round(pixel);\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\t\t\tvar paddingLeft = me.paddingLeft;\n\t\t\tvar paddingBottom = me.paddingBottom;\n\t\t\tvar innerDimension = isHorizontal ? me.width - (paddingLeft + me.paddingRight) : me.height - (me.paddingTop + paddingBottom);\n\t\t\tvar offset = (isHorizontal ? pixel - me.left - paddingLeft : me.bottom - paddingBottom - pixel) / innerDimension;\n\t\t\treturn me.start + ((me.end - me.start) * offset);\n\t\t},\n\t\tgetPixelForTick: function(index) {\n\t\t\treturn this.getPixelForValue(this.ticksAsNumbers[index]);\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('linear', LinearScale, defaultConfig);\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tvar defaultConfig = {\n\t\tposition: 'left',\n\n\t\t// label settings\n\t\tticks: {\n\t\t\tcallback: function(value, index, arr) {\n\t\t\t\tvar remain = value / (Math.pow(10, Math.floor(helpers.log10(value))));\n\n\t\t\t\tif (value === 0) {\n\t\t\t\t\treturn '0';\n\t\t\t\t} else if (remain === 1 || remain === 2 || remain === 5 || index === 0 || index === arr.length - 1) {\n\t\t\t\t\treturn value.toExponential();\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t};\n\n\tvar LogarithmicScale = Chart.Scale.extend({\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar chart = me.chart;\n\t\t\tvar data = chart.data;\n\t\t\tvar datasets = data.datasets;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\t\t\tvar isHorizontal = me.isHorizontal();\n\t\t\tfunction IDMatches(meta) {\n\t\t\t\treturn isHorizontal ? meta.xAxisID === me.id : meta.yAxisID === me.id;\n\t\t\t}\n\n\t\t\t// Calculate Range\n\t\t\tme.min = null;\n\t\t\tme.max = null;\n\t\t\tme.minNotZero = null;\n\n\t\t\tif (opts.stacked) {\n\t\t\t\tvar valuesPerType = {};\n\n\t\t\t\thelpers.each(datasets, function(dataset, datasetIndex) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\t\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\n\t\t\t\t\t\tif (valuesPerType[meta.type] === undefined) {\n\t\t\t\t\t\t\tvaluesPerType[meta.type] = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\t\tvar values = valuesPerType[meta.type];\n\t\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvalues[index] = values[index] || 0;\n\n\t\t\t\t\t\t\tif (opts.relativePoints) {\n\t\t\t\t\t\t\t\tvalues[index] = 100;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Don't need to split positive and negative since the log scale can't handle a 0 crossing\n\t\t\t\t\t\t\t\tvalues[index] += value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\thelpers.each(valuesPerType, function(valuesForType) {\n\t\t\t\t\tvar minVal = helpers.min(valuesForType);\n\t\t\t\t\tvar maxVal = helpers.max(valuesForType);\n\t\t\t\t\tme.min = me.min === null ? minVal : Math.min(me.min, minVal);\n\t\t\t\t\tme.max = me.max === null ? maxVal : Math.max(me.max, maxVal);\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\thelpers.each(datasets, function(dataset, datasetIndex) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\t\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\n\t\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (me.min === null) {\n\t\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t\t} else if (value < me.min) {\n\t\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (me.max === null) {\n\t\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t\t} else if (value > me.max) {\n\t\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (value !== 0 && (me.minNotZero === null || value < me.minNotZero)) {\n\t\t\t\t\t\t\t\tme.minNotZero = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tme.min = getValueOrDefault(tickOpts.min, me.min);\n\t\t\tme.max = getValueOrDefault(tickOpts.max, me.max);\n\n\t\t\tif (me.min === me.max) {\n\t\t\t\tif (me.min !== 0 && me.min !== null) {\n\t\t\t\t\tme.min = Math.pow(10, Math.floor(helpers.log10(me.min)) - 1);\n\t\t\t\t\tme.max = Math.pow(10, Math.floor(helpers.log10(me.max)) + 1);\n\t\t\t\t} else {\n\t\t\t\t\tme.min = 1;\n\t\t\t\t\tme.max = 10;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\n\t\t\t// Reset the ticks array. Later on, we will draw a grid line at these positions\n\t\t\t// The array simply contains the numerical value of the spots where ticks will be\n\t\t\tvar ticks = me.ticks = [];\n\n\t\t\t// Figure out what the max number of ticks we can support it is based on the size of\n\t\t\t// the axis area. For now, we say that the minimum tick spacing in pixels must be 50\n\t\t\t// We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\n\t\t\t// the graph\n\n\t\t\tvar tickVal = getValueOrDefault(tickOpts.min, Math.pow(10, Math.floor(helpers.log10(me.min))));\n\n\t\t\twhile (tickVal < me.max) {\n\t\t\t\tticks.push(tickVal);\n\n\t\t\t\tvar exp;\n\t\t\t\tvar significand;\n\n\t\t\t\tif (tickVal === 0) {\n\t\t\t\t\texp = Math.floor(helpers.log10(me.minNotZero));\n\t\t\t\t\tsignificand = Math.round(me.minNotZero / Math.pow(10, exp));\n\t\t\t\t} else {\n\t\t\t\t\texp = Math.floor(helpers.log10(tickVal));\n\t\t\t\t\tsignificand = Math.floor(tickVal / Math.pow(10, exp)) + 1;\n\t\t\t\t}\n\n\t\t\t\tif (significand === 10) {\n\t\t\t\t\tsignificand = 1;\n\t\t\t\t\t++exp;\n\t\t\t\t}\n\n\t\t\t\ttickVal = significand * Math.pow(10, exp);\n\t\t\t}\n\n\t\t\tvar lastTick = getValueOrDefault(tickOpts.max, tickVal);\n\t\t\tticks.push(lastTick);\n\n\t\t\tif (!me.isHorizontal()) {\n\t\t\t\t// We are in a vertical orientation. The top value is the highest. So reverse the array\n\t\t\t\tticks.reverse();\n\t\t\t}\n\n\t\t\t// At this point, we need to update our max and min given the tick values since we have expanded the\n\t\t\t// range of the scale\n\t\t\tme.max = helpers.max(ticks);\n\t\t\tme.min = helpers.min(ticks);\n\n\t\t\tif (tickOpts.reverse) {\n\t\t\t\tticks.reverse();\n\n\t\t\t\tme.start = me.max;\n\t\t\t\tme.end = me.min;\n\t\t\t} else {\n\t\t\t\tme.start = me.min;\n\t\t\t\tme.end = me.max;\n\t\t\t}\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tthis.tickValues = this.ticks.slice();\n\n\t\t\tChart.Scale.prototype.convertTicksToLabels.call(this);\n\t\t},\n\t\t// Get the correct tooltip label\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\treturn +this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);\n\t\t},\n\t\tgetPixelForTick: function(index) {\n\t\t\treturn this.getPixelForValue(this.tickValues[index]);\n\t\t},\n\t\tgetPixelForValue: function(value) {\n\t\t\tvar me = this;\n\t\t\tvar innerDimension;\n\t\t\tvar pixel;\n\n\t\t\tvar start = me.start;\n\t\t\tvar newVal = +me.getRightValue(value);\n\t\t\tvar range;\n\t\t\tvar paddingTop = me.paddingTop;\n\t\t\tvar paddingBottom = me.paddingBottom;\n\t\t\tvar paddingLeft = me.paddingLeft;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\trange = helpers.log10(me.end) - helpers.log10(start); // todo: if start === 0\n\t\t\t\tif (newVal === 0) {\n\t\t\t\t\tpixel = me.left + paddingLeft;\n\t\t\t\t} else {\n\t\t\t\t\tinnerDimension = me.width - (paddingLeft + me.paddingRight);\n\t\t\t\t\tpixel = me.left + (innerDimension / range * (helpers.log10(newVal) - helpers.log10(start)));\n\t\t\t\t\tpixel += paddingLeft;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Bottom - top since pixels increase downard on a screen\n\t\t\t\tinnerDimension = me.height - (paddingTop + paddingBottom);\n\t\t\t\tif (start === 0 && !tickOpts.reverse) {\n\t\t\t\t\trange = helpers.log10(me.end) - helpers.log10(me.minNotZero);\n\t\t\t\t\tif (newVal === start) {\n\t\t\t\t\t\tpixel = me.bottom - paddingBottom;\n\t\t\t\t\t} else if (newVal === me.minNotZero) {\n\t\t\t\t\t\tpixel = me.bottom - paddingBottom - innerDimension * 0.02;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixel = me.bottom - paddingBottom - innerDimension * 0.02 - (innerDimension * 0.98/ range * (helpers.log10(newVal)-helpers.log10(me.minNotZero)));\n\t\t\t\t\t}\n\t\t\t\t} else if (me.end === 0 && tickOpts.reverse) {\n\t\t\t\t\trange = helpers.log10(me.start) - helpers.log10(me.minNotZero);\n\t\t\t\t\tif (newVal === me.end) {\n\t\t\t\t\t\tpixel = me.top + paddingTop;\n\t\t\t\t\t} else if (newVal === me.minNotZero) {\n\t\t\t\t\t\tpixel = me.top + paddingTop + innerDimension * 0.02;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpixel = me.top + paddingTop + innerDimension * 0.02 + (innerDimension * 0.98/ range * (helpers.log10(newVal)-helpers.log10(me.minNotZero)));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trange = helpers.log10(me.end) - helpers.log10(start);\n\t\t\t\t\tinnerDimension = me.height - (paddingTop + paddingBottom);\n\t\t\t\t\tpixel = (me.bottom - paddingBottom) - (innerDimension / range * (helpers.log10(newVal) - helpers.log10(start)));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn pixel;\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar range = helpers.log10(me.end) - helpers.log10(me.start);\n\t\t\tvar value, innerDimension;\n\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\tinnerDimension = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\tvalue = me.start * Math.pow(10, (pixel - me.left - me.paddingLeft) * range / innerDimension);\n\t\t\t} else {  // todo: if start === 0\n\t\t\t\tinnerDimension = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\t\tvalue = Math.pow(10, (me.bottom - me.paddingBottom - pixel) * range / innerDimension) / me.start;\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('logarithmic', LogarithmicScale, defaultConfig);\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar globalDefaults = Chart.defaults.global;\n\n\tvar defaultConfig = {\n\t\tdisplay: true,\n\n\t\t// Boolean - Whether to animate scaling the chart from the centre\n\t\tanimate: true,\n\t\tlineArc: false,\n\t\tposition: 'chartArea',\n\n\t\tangleLines: {\n\t\t\tdisplay: true,\n\t\t\tcolor: 'rgba(0, 0, 0, 0.1)',\n\t\t\tlineWidth: 1\n\t\t},\n\n\t\t// label settings\n\t\tticks: {\n\t\t\t// Boolean - Show a backdrop to the scale label\n\t\t\tshowLabelBackdrop: true,\n\n\t\t\t// String - The colour of the label backdrop\n\t\t\tbackdropColor: 'rgba(255,255,255,0.75)',\n\n\t\t\t// Number - The backdrop padding above & below the label in pixels\n\t\t\tbackdropPaddingY: 2,\n\n\t\t\t// Number - The backdrop padding to the side of the label in pixels\n\t\t\tbackdropPaddingX: 2\n\t\t},\n\n\t\tpointLabels: {\n\t\t\t// Number - Point label font size in pixels\n\t\t\tfontSize: 10,\n\n\t\t\t// Function - Used to convert point labels\n\t\t\tcallback: function(label) {\n\t\t\t\treturn label;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar LinearRadialScale = Chart.LinearScaleBase.extend({\n\t\tgetValueCount: function() {\n\t\t\treturn this.chart.data.labels.length;\n\t\t},\n\t\tsetDimensions: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\t// Set the unconstrained dimension before label rotation\n\t\t\tme.width = me.maxWidth;\n\t\t\tme.height = me.maxHeight;\n\t\t\tme.xCenter = Math.round(me.width / 2);\n\t\t\tme.yCenter = Math.round(me.height / 2);\n\n\t\t\tvar minSize = helpers.min([me.height, me.width]);\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(tickOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\tme.drawingArea = opts.display ? (minSize / 2) - (tickFontSize / 2 + tickOpts.backdropPaddingY) : (minSize / 2);\n\t\t},\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tme.min = null;\n\t\t\tme.max = null;\n\n\n\t\t\thelpers.each(chart.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tif (chart.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\n\n\t\t\t\t\thelpers.each(dataset.data, function(rawValue, index) {\n\t\t\t\t\t\tvar value = +me.getRightValue(rawValue);\n\t\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (me.min === null) {\n\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t} else if (value < me.min) {\n\t\t\t\t\t\t\tme.min = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (me.max === null) {\n\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t} else if (value > me.max) {\n\t\t\t\t\t\t\tme.max = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\n\t\t\tme.handleTickRangeOptions();\n\t\t},\n\t\tgetTickLimit: function() {\n\t\t\tvar tickOpts = this.options.ticks;\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(tickOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\treturn Math.min(tickOpts.maxTicksLimit ? tickOpts.maxTicksLimit : 11, Math.ceil(this.drawingArea / (1.5 * tickFontSize)));\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\tChart.LinearScaleBase.prototype.convertTicksToLabels.call(me);\n\n\t\t\t// Point labels\n\t\t\tme.pointLabels = me.chart.data.labels.map(me.options.pointLabels.callback, me);\n\t\t},\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\treturn +this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);\n\t\t},\n\t\tfit: function() {\n\t\t\t/*\n\t\t\t * Right, this is really confusing and there is a lot of maths going on here\n\t\t\t * The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\n\t\t\t *\n\t\t\t * Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\n\t\t\t *\n\t\t\t * Solution:\n\t\t\t *\n\t\t\t * We assume the radius of the polygon is half the size of the canvas at first\n\t\t\t * at each index we check if the text overlaps.\n\t\t\t *\n\t\t\t * Where it does, we store that angle and that index.\n\t\t\t *\n\t\t\t * After finding the largest index and angle we calculate how much we need to remove\n\t\t\t * from the shape radius to move the point inwards by that x.\n\t\t\t *\n\t\t\t * We average the left and right distances to get the maximum shape radius that can fit in the box\n\t\t\t * along with labels.\n\t\t\t *\n\t\t\t * Once we have that, we can find the centre point for the chart, by taking the x text protrusion\n\t\t\t * on each side, removing that from the size, halving it and adding the left x protrusion width.\n\t\t\t *\n\t\t\t * This will mean we have a shape fitted to the canvas, as large as it can be with the labels\n\t\t\t * and position it in the most space efficient manner\n\t\t\t *\n\t\t\t * https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\n\t\t\t */\n\n\t\t\tvar pointLabels = this.options.pointLabels;\n\t\t\tvar pointLabelFontSize = helpers.getValueOrDefault(pointLabels.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar pointLabeFontStyle = helpers.getValueOrDefault(pointLabels.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar pointLabeFontFamily = helpers.getValueOrDefault(pointLabels.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar pointLabeFont = helpers.fontString(pointLabelFontSize, pointLabeFontStyle, pointLabeFontFamily);\n\n\t\t\t// Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\n\t\t\t// Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\n\t\t\tvar largestPossibleRadius = helpers.min([(this.height / 2 - pointLabelFontSize - 5), this.width / 2]),\n\t\t\t\tpointPosition,\n\t\t\t\ti,\n\t\t\t\ttextWidth,\n\t\t\t\thalfTextWidth,\n\t\t\t\tfurthestRight = this.width,\n\t\t\t\tfurthestRightIndex,\n\t\t\t\tfurthestRightAngle,\n\t\t\t\tfurthestLeft = 0,\n\t\t\t\tfurthestLeftIndex,\n\t\t\t\tfurthestLeftAngle,\n\t\t\t\txProtrusionLeft,\n\t\t\t\txProtrusionRight,\n\t\t\t\tradiusReductionRight,\n\t\t\t\tradiusReductionLeft;\n\t\t\tthis.ctx.font = pointLabeFont;\n\n\t\t\tfor (i = 0; i < this.getValueCount(); i++) {\n\t\t\t\t// 5px to space the text slightly out - similar to what we do in the draw function.\n\t\t\t\tpointPosition = this.getPointPosition(i, largestPossibleRadius);\n\t\t\t\ttextWidth = this.ctx.measureText(this.pointLabels[i] ? this.pointLabels[i] : '').width + 5;\n\n\t\t\t\t// Add quarter circle to make degree 0 mean top of circle\n\t\t\t\tvar angleRadians = this.getIndexAngle(i) + (Math.PI / 2);\n\t\t\t\tvar angle = (angleRadians * 360 / (2 * Math.PI)) % 360;\n\n\t\t\t\tif (angle === 0 || angle === 180) {\n\t\t\t\t\t// At angle 0 and 180, we're at exactly the top/bottom\n\t\t\t\t\t// of the radar chart, so text will be aligned centrally, so we'll half it and compare\n\t\t\t\t\t// w/left and right text sizes\n\t\t\t\t\thalfTextWidth = textWidth / 2;\n\t\t\t\t\tif (pointPosition.x + halfTextWidth > furthestRight) {\n\t\t\t\t\t\tfurthestRight = pointPosition.x + halfTextWidth;\n\t\t\t\t\t\tfurthestRightIndex = i;\n\t\t\t\t\t}\n\t\t\t\t\tif (pointPosition.x - halfTextWidth < furthestLeft) {\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - halfTextWidth;\n\t\t\t\t\t\tfurthestLeftIndex = i;\n\t\t\t\t\t}\n\t\t\t\t} else if (angle < 180) {\n\t\t\t\t\t// Less than half the values means we'll left align the text\n\t\t\t\t\tif (pointPosition.x + textWidth > furthestRight) {\n\t\t\t\t\t\tfurthestRight = pointPosition.x + textWidth;\n\t\t\t\t\t\tfurthestRightIndex = i;\n\t\t\t\t\t}\n\t\t\t\t// More than half the values means we'll right align the text\n\t\t\t\t} else if (pointPosition.x - textWidth < furthestLeft) {\n\t\t\t\t\tfurthestLeft = pointPosition.x - textWidth;\n\t\t\t\t\tfurthestLeftIndex = i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txProtrusionLeft = furthestLeft;\n\t\t\txProtrusionRight = Math.ceil(furthestRight - this.width);\n\n\t\t\tfurthestRightAngle = this.getIndexAngle(furthestRightIndex);\n\t\t\tfurthestLeftAngle = this.getIndexAngle(furthestLeftIndex);\n\n\t\t\tradiusReductionRight = xProtrusionRight / Math.sin(furthestRightAngle + Math.PI / 2);\n\t\t\tradiusReductionLeft = xProtrusionLeft / Math.sin(furthestLeftAngle + Math.PI / 2);\n\n\t\t\t// Ensure we actually need to reduce the size of the chart\n\t\t\tradiusReductionRight = (helpers.isNumber(radiusReductionRight)) ? radiusReductionRight : 0;\n\t\t\tradiusReductionLeft = (helpers.isNumber(radiusReductionLeft)) ? radiusReductionLeft : 0;\n\n\t\t\tthis.drawingArea = Math.round(largestPossibleRadius - (radiusReductionLeft + radiusReductionRight) / 2);\n\t\t\tthis.setCenterPoint(radiusReductionLeft, radiusReductionRight);\n\t\t},\n\t\tsetCenterPoint: function(leftMovement, rightMovement) {\n\t\t\tvar me = this;\n\t\t\tvar maxRight = me.width - rightMovement - me.drawingArea,\n\t\t\t\tmaxLeft = leftMovement + me.drawingArea;\n\n\t\t\tme.xCenter = Math.round(((maxLeft + maxRight) / 2) + me.left);\n\t\t\t// Always vertically in the centre as the text height doesn't change\n\t\t\tme.yCenter = Math.round((me.height / 2) + me.top);\n\t\t},\n\n\t\tgetIndexAngle: function(index) {\n\t\t\tvar angleMultiplier = (Math.PI * 2) / this.getValueCount();\n\t\t\tvar startAngle = this.chart.options && this.chart.options.startAngle ?\n\t\t\t\tthis.chart.options.startAngle :\n\t\t\t\t0;\n\n\t\t\tvar startAngleRadians = startAngle * Math.PI * 2 / 360;\n\n\t\t\t// Start from the top instead of right, so remove a quarter of the circle\n\t\t\treturn index * angleMultiplier - (Math.PI / 2) + startAngleRadians;\n\t\t},\n\t\tgetDistanceFromCenterForValue: function(value) {\n\t\t\tvar me = this;\n\n\t\t\tif (value === null) {\n\t\t\t\treturn 0; // null always in center\n\t\t\t}\n\n\t\t\t// Take into account half font size + the yPadding of the top value\n\t\t\tvar scalingFactor = me.drawingArea / (me.max - me.min);\n\t\t\tif (me.options.reverse) {\n\t\t\t\treturn (me.max - value) * scalingFactor;\n\t\t\t}\n\t\t\treturn (value - me.min) * scalingFactor;\n\t\t},\n\t\tgetPointPosition: function(index, distanceFromCenter) {\n\t\t\tvar me = this;\n\t\t\tvar thisAngle = me.getIndexAngle(index);\n\t\t\treturn {\n\t\t\t\tx: Math.round(Math.cos(thisAngle) * distanceFromCenter) + me.xCenter,\n\t\t\t\ty: Math.round(Math.sin(thisAngle) * distanceFromCenter) + me.yCenter\n\t\t\t};\n\t\t},\n\t\tgetPointPositionForValue: function(index, value) {\n\t\t\treturn this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n\t\t},\n\n\t\tgetBasePosition: function() {\n\t\t\tvar me = this;\n\t\t\tvar min = me.min;\n\t\t\tvar max = me.max;\n\n\t\t\treturn me.getPointPositionForValue(0,\n\t\t\t\tme.beginAtZero? 0:\n\t\t\t\tmin < 0 && max < 0? max :\n\t\t\t\tmin > 0 && max > 0? min :\n\t\t\t\t0);\n\t\t},\n\n\t\tdraw: function() {\n\t\t\tvar me = this;\n\t\t\tvar opts = me.options;\n\t\t\tvar gridLineOpts = opts.gridLines;\n\t\t\tvar tickOpts = opts.ticks;\n\t\t\tvar angleLineOpts = opts.angleLines;\n\t\t\tvar pointLabelOpts = opts.pointLabels;\n\t\t\tvar getValueOrDefault = helpers.getValueOrDefault;\n\n\t\t\tif (opts.display) {\n\t\t\t\tvar ctx = me.ctx;\n\n\t\t\t\t// Tick Font\n\t\t\t\tvar tickFontSize = getValueOrDefault(tickOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\t\tvar tickFontStyle = getValueOrDefault(tickOpts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\t\tvar tickFontFamily = getValueOrDefault(tickOpts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\n\t\t\t\thelpers.each(me.ticks, function(label, index) {\n\t\t\t\t\t// Don't draw a centre value (if it is minimum)\n\t\t\t\t\tif (index > 0 || opts.reverse) {\n\t\t\t\t\t\tvar yCenterOffset = me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]);\n\t\t\t\t\t\tvar yHeight = me.yCenter - yCenterOffset;\n\n\t\t\t\t\t\t// Draw circular lines around the scale\n\t\t\t\t\t\tif (gridLineOpts.display && index !== 0) {\n\t\t\t\t\t\t\tctx.strokeStyle = helpers.getValueAtIndexOrDefault(gridLineOpts.color, index - 1);\n\t\t\t\t\t\t\tctx.lineWidth = helpers.getValueAtIndexOrDefault(gridLineOpts.lineWidth, index - 1);\n\n\t\t\t\t\t\t\tif (opts.lineArc) {\n\t\t\t\t\t\t\t\t// Draw circular arcs between the points\n\t\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\tctx.arc(me.xCenter, me.yCenter, yCenterOffset, 0, Math.PI * 2);\n\t\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Draw straight lines connecting each index\n\t\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\tfor (var i = 0; i < me.getValueCount(); i++) {\n\t\t\t\t\t\t\t\t\tvar pointPosition = me.getPointPosition(i, yCenterOffset);\n\t\t\t\t\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\t\t\t\t\tctx.moveTo(pointPosition.x, pointPosition.y);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tctx.lineTo(pointPosition.x, pointPosition.y);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (tickOpts.display) {\n\t\t\t\t\t\t\tvar tickFontColor = getValueOrDefault(tickOpts.fontColor, globalDefaults.defaultFontColor);\n\t\t\t\t\t\t\tctx.font = tickLabelFont;\n\n\t\t\t\t\t\t\tif (tickOpts.showLabelBackdrop) {\n\t\t\t\t\t\t\t\tvar labelWidth = ctx.measureText(label).width;\n\t\t\t\t\t\t\t\tctx.fillStyle = tickOpts.backdropColor;\n\t\t\t\t\t\t\t\tctx.fillRect(\n\t\t\t\t\t\t\t\t\tme.xCenter - labelWidth / 2 - tickOpts.backdropPaddingX,\n\t\t\t\t\t\t\t\t\tyHeight - tickFontSize / 2 - tickOpts.backdropPaddingY,\n\t\t\t\t\t\t\t\t\tlabelWidth + tickOpts.backdropPaddingX * 2,\n\t\t\t\t\t\t\t\t\ttickFontSize + tickOpts.backdropPaddingY * 2\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\t\t\t\tctx.fillStyle = tickFontColor;\n\t\t\t\t\t\t\tctx.fillText(label, me.xCenter, yHeight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!opts.lineArc) {\n\t\t\t\t\tctx.lineWidth = angleLineOpts.lineWidth;\n\t\t\t\t\tctx.strokeStyle = angleLineOpts.color;\n\n\t\t\t\t\tvar outerDistance = me.getDistanceFromCenterForValue(opts.reverse ? me.min : me.max);\n\n\t\t\t\t\t// Point Label Font\n\t\t\t\t\tvar pointLabelFontSize = getValueOrDefault(pointLabelOpts.fontSize, globalDefaults.defaultFontSize);\n\t\t\t\t\tvar pointLabeFontStyle = getValueOrDefault(pointLabelOpts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\t\t\tvar pointLabeFontFamily = getValueOrDefault(pointLabelOpts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\t\t\tvar pointLabeFont = helpers.fontString(pointLabelFontSize, pointLabeFontStyle, pointLabeFontFamily);\n\n\t\t\t\t\tfor (var i = me.getValueCount() - 1; i >= 0; i--) {\n\t\t\t\t\t\tif (angleLineOpts.display) {\n\t\t\t\t\t\t\tvar outerPosition = me.getPointPosition(i, outerDistance);\n\t\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\t\tctx.moveTo(me.xCenter, me.yCenter);\n\t\t\t\t\t\t\tctx.lineTo(outerPosition.x, outerPosition.y);\n\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t\tctx.closePath();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Extra 3px out for some label spacing\n\t\t\t\t\t\tvar pointLabelPosition = me.getPointPosition(i, outerDistance + 5);\n\n\t\t\t\t\t\t// Keep this in loop since we may support array properties here\n\t\t\t\t\t\tvar pointLabelFontColor = getValueOrDefault(pointLabelOpts.fontColor, globalDefaults.defaultFontColor);\n\t\t\t\t\t\tctx.font = pointLabeFont;\n\t\t\t\t\t\tctx.fillStyle = pointLabelFontColor;\n\n\t\t\t\t\t\tvar pointLabels = me.pointLabels;\n\n\t\t\t\t\t\t// Add quarter circle to make degree 0 mean top of circle\n\t\t\t\t\t\tvar angleRadians = this.getIndexAngle(i) + (Math.PI / 2);\n\t\t\t\t\t\tvar angle = (angleRadians * 360 / (2 * Math.PI)) % 360;\n\n\t\t\t\t\t\tif (angle === 0 || angle === 180) {\n\t\t\t\t\t\t\tctx.textAlign = 'center';\n\t\t\t\t\t\t} else if (angle < 180) {\n\t\t\t\t\t\t\tctx.textAlign = 'left';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.textAlign = 'right';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set the correct text baseline based on outer positioning\n\t\t\t\t\t\tif (angle === 90 || angle === 270) {\n\t\t\t\t\t\t\tctx.textBaseline = 'middle';\n\t\t\t\t\t\t} else if (angle > 270 || angle < 90) {\n\t\t\t\t\t\t\tctx.textBaseline = 'bottom';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.textBaseline = 'top';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tctx.fillText(pointLabels[i] ? pointLabels[i] : '', pointLabelPosition.x, pointLabelPosition.y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('radialLinear', LinearRadialScale, defaultConfig);\n\n};\n","/* global window: false */\n'use strict';\n\nvar moment = require('moment');\nmoment = typeof(moment) === 'function' ? moment : window.moment;\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\tvar time = {\n\t\tunits: [{\n\t\t\tname: 'millisecond',\n\t\t\tsteps: [1, 2, 5, 10, 20, 50, 100, 250, 500]\n\t\t}, {\n\t\t\tname: 'second',\n\t\t\tsteps: [1, 2, 5, 10, 30]\n\t\t}, {\n\t\t\tname: 'minute',\n\t\t\tsteps: [1, 2, 5, 10, 30]\n\t\t}, {\n\t\t\tname: 'hour',\n\t\t\tsteps: [1, 2, 3, 6, 12]\n\t\t}, {\n\t\t\tname: 'day',\n\t\t\tsteps: [1, 2, 5]\n\t\t}, {\n\t\t\tname: 'week',\n\t\t\tmaxStep: 4\n\t\t}, {\n\t\t\tname: 'month',\n\t\t\tmaxStep: 3\n\t\t}, {\n\t\t\tname: 'quarter',\n\t\t\tmaxStep: 4\n\t\t}, {\n\t\t\tname: 'year',\n\t\t\tmaxStep: false\n\t\t}]\n\t};\n\n\tvar defaultConfig = {\n\t\tposition: 'bottom',\n\n\t\ttime: {\n\t\t\tparser: false, // false == a pattern string from http://momentjs.com/docs/#/parsing/string-format/ or a custom callback that converts its argument to a moment\n\t\t\tformat: false, // DEPRECATED false == date objects, moment object, callback or a pattern string from http://momentjs.com/docs/#/parsing/string-format/\n\t\t\tunit: false, // false == automatic or override with week, month, year, etc.\n\t\t\tround: false, // none, or override with week, month, year, etc.\n\t\t\tdisplayFormat: false, // DEPRECATED\n\t\t\tisoWeekday: false, // override week start day - see http://momentjs.com/docs/#/get-set/iso-weekday/\n\t\t\tminUnit: 'millisecond',\n\n\t\t\t// defaults to unit's corresponding unitFormat below or override using pattern string from http://momentjs.com/docs/#/displaying/format/\n\t\t\tdisplayFormats: {\n\t\t\t\tmillisecond: 'h:mm:ss.SSS a', // 11:20:01.123 AM,\n\t\t\t\tsecond: 'h:mm:ss a', // 11:20:01 AM\n\t\t\t\tminute: 'h:mm:ss a', // 11:20:01 AM\n\t\t\t\thour: 'MMM D, hA', // Sept 4, 5PM\n\t\t\t\tday: 'll', // Sep 4 2015\n\t\t\t\tweek: 'll', // Week 46, or maybe \"[W]WW - YYYY\" ?\n\t\t\t\tmonth: 'MMM YYYY', // Sept 2015\n\t\t\t\tquarter: '[Q]Q - YYYY', // Q3\n\t\t\t\tyear: 'YYYY' // 2015\n\t\t\t}\n\t\t},\n\t\tticks: {\n\t\t\tautoSkip: false\n\t\t}\n\t};\n\n\tvar TimeScale = Chart.Scale.extend({\n\t\tinitialize: function() {\n\t\t\tif (!moment) {\n\t\t\t\tthrow new Error('Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com');\n\t\t\t}\n\n\t\t\tChart.Scale.prototype.initialize.call(this);\n\t\t},\n\t\tgetLabelMoment: function(datasetIndex, index) {\n\t\t\tif (datasetIndex === null || index === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (typeof this.labelMoments[datasetIndex] !== 'undefined') {\n\t\t\t\treturn this.labelMoments[datasetIndex][index];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetLabelDiff: function(datasetIndex, index) {\n\t\t\tvar me = this;\n\t\t\tif (datasetIndex === null || index === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (me.labelDiffs === undefined) {\n\t\t\t\tme.buildLabelDiffs();\n\t\t\t}\n\n\t\t\tif (typeof me.labelDiffs[datasetIndex] !== 'undefined') {\n\t\t\t\treturn me.labelDiffs[datasetIndex][index];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetMomentStartOf: function(tick) {\n\t\t\tvar me = this;\n\t\t\tif (me.options.time.unit === 'week' && me.options.time.isoWeekday !== false) {\n\t\t\t\treturn tick.clone().startOf('isoWeek').isoWeekday(me.options.time.isoWeekday);\n\t\t\t}\n\t\t\treturn tick.clone().startOf(me.tickUnit);\n\t\t},\n\t\tdetermineDataLimits: function() {\n\t\t\tvar me = this;\n\t\t\tme.labelMoments = [];\n\n\t\t\t// Only parse these once. If the dataset does not have data as x,y pairs, we will use\n\t\t\t// these\n\t\t\tvar scaleLabelMoments = [];\n\t\t\tif (me.chart.data.labels && me.chart.data.labels.length > 0) {\n\t\t\t\thelpers.each(me.chart.data.labels, function(label) {\n\t\t\t\t\tvar labelMoment = me.parseTime(label);\n\n\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscaleLabelMoments.push(labelMoment);\n\t\t\t\t\t}\n\t\t\t\t}, me);\n\n\t\t\t\tme.firstTick = moment.min.call(me, scaleLabelMoments);\n\t\t\t\tme.lastTick = moment.max.call(me, scaleLabelMoments);\n\t\t\t} else {\n\t\t\t\tme.firstTick = null;\n\t\t\t\tme.lastTick = null;\n\t\t\t}\n\n\t\t\thelpers.each(me.chart.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tvar momentsForDataset = [];\n\t\t\t\tvar datasetVisible = me.chart.isDatasetVisible(datasetIndex);\n\n\t\t\t\tif (typeof dataset.data[0] === 'object' && dataset.data[0] !== null) {\n\t\t\t\t\thelpers.each(dataset.data, function(value) {\n\t\t\t\t\t\tvar labelMoment = me.parseTime(me.getRightValue(value));\n\n\t\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmomentsForDataset.push(labelMoment);\n\n\t\t\t\t\t\t\tif (datasetVisible) {\n\t\t\t\t\t\t\t\t// May have gone outside the scale ranges, make sure we keep the first and last ticks updated\n\t\t\t\t\t\t\t\tme.firstTick = me.firstTick !== null ? moment.min(me.firstTick, labelMoment) : labelMoment;\n\t\t\t\t\t\t\t\tme.lastTick = me.lastTick !== null ? moment.max(me.lastTick, labelMoment) : labelMoment;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, me);\n\t\t\t\t} else {\n\t\t\t\t\t// We have no labels. Use the ones from the scale\n\t\t\t\t\tmomentsForDataset = scaleLabelMoments;\n\t\t\t\t}\n\n\t\t\t\tme.labelMoments.push(momentsForDataset);\n\t\t\t}, me);\n\n\t\t\t// Set these after we've done all the data\n\t\t\tif (me.options.time.min) {\n\t\t\t\tme.firstTick = me.parseTime(me.options.time.min);\n\t\t\t}\n\n\t\t\tif (me.options.time.max) {\n\t\t\t\tme.lastTick = me.parseTime(me.options.time.max);\n\t\t\t}\n\n\t\t\t// We will modify these, so clone for later\n\t\t\tme.firstTick = (me.firstTick || moment()).clone();\n\t\t\tme.lastTick = (me.lastTick || moment()).clone();\n\t\t},\n\t\tbuildLabelDiffs: function() {\n\t\t\tvar me = this;\n\t\t\tme.labelDiffs = [];\n\t\t\tvar scaleLabelDiffs = [];\n\t\t\t// Parse common labels once\n\t\t\tif (me.chart.data.labels && me.chart.data.labels.length > 0) {\n\t\t\t\thelpers.each(me.chart.data.labels, function(label) {\n\t\t\t\t\tvar labelMoment = me.parseTime(label);\n\n\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscaleLabelDiffs.push(labelMoment.diff(me.firstTick, me.tickUnit, true));\n\t\t\t\t\t}\n\t\t\t\t}, me);\n\t\t\t}\n\n\t\t\thelpers.each(me.chart.data.datasets, function(dataset) {\n\t\t\t\tvar diffsForDataset = [];\n\n\t\t\t\tif (typeof dataset.data[0] === 'object' && dataset.data[0] !== null) {\n\t\t\t\t\thelpers.each(dataset.data, function(value) {\n\t\t\t\t\t\tvar labelMoment = me.parseTime(me.getRightValue(value));\n\n\t\t\t\t\t\tif (labelMoment.isValid()) {\n\t\t\t\t\t\t\tif (me.options.time.round) {\n\t\t\t\t\t\t\t\tlabelMoment.startOf(me.options.time.round);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdiffsForDataset.push(labelMoment.diff(me.firstTick, me.tickUnit, true));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, me);\n\t\t\t\t} else {\n\t\t\t\t\t// We have no labels. Use common ones\n\t\t\t\t\tdiffsForDataset = scaleLabelDiffs;\n\t\t\t\t}\n\n\t\t\t\tme.labelDiffs.push(diffsForDataset);\n\t\t\t}, me);\n\t\t},\n\t\tbuildTicks: function() {\n\t\t\tvar me = this;\n\n\t\t\tme.ctx.save();\n\t\t\tvar tickFontSize = helpers.getValueOrDefault(me.options.ticks.fontSize, Chart.defaults.global.defaultFontSize);\n\t\t\tvar tickFontStyle = helpers.getValueOrDefault(me.options.ticks.fontStyle, Chart.defaults.global.defaultFontStyle);\n\t\t\tvar tickFontFamily = helpers.getValueOrDefault(me.options.ticks.fontFamily, Chart.defaults.global.defaultFontFamily);\n\t\t\tvar tickLabelFont = helpers.fontString(tickFontSize, tickFontStyle, tickFontFamily);\n\t\t\tme.ctx.font = tickLabelFont;\n\n\t\t\tme.ticks = [];\n\t\t\tme.unitScale = 1; // How much we scale the unit by, ie 2 means 2x unit per step\n\t\t\tme.scaleSizeInUnits = 0; // How large the scale is in the base unit (seconds, minutes, etc)\n\n\t\t\t// Set unit override if applicable\n\t\t\tif (me.options.time.unit) {\n\t\t\t\tme.tickUnit = me.options.time.unit || 'day';\n\t\t\t\tme.displayFormat = me.options.time.displayFormats[me.tickUnit];\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, 1);\n\t\t\t} else {\n\t\t\t\t// Determine the smallest needed unit of the time\n\t\t\t\tvar innerWidth = me.isHorizontal() ? me.width - (me.paddingLeft + me.paddingRight) : me.height - (me.paddingTop + me.paddingBottom);\n\n\t\t\t\t// Crude approximation of what the label length might be\n\t\t\t\tvar tempFirstLabel = me.tickFormatFunction(me.firstTick, 0, []);\n\t\t\t\tvar tickLabelWidth = me.ctx.measureText(tempFirstLabel).width;\n\t\t\t\tvar cosRotation = Math.cos(helpers.toRadians(me.options.ticks.maxRotation));\n\t\t\t\tvar sinRotation = Math.sin(helpers.toRadians(me.options.ticks.maxRotation));\n\t\t\t\ttickLabelWidth = (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation);\n\t\t\t\tvar labelCapacity = innerWidth / (tickLabelWidth);\n\n\t\t\t\t// Start as small as possible\n\t\t\t\tme.tickUnit = me.options.time.minUnit;\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\tme.displayFormat = me.options.time.displayFormats[me.tickUnit];\n\n\t\t\t\tvar unitDefinitionIndex = 0;\n\t\t\t\tvar unitDefinition = time.units[unitDefinitionIndex];\n\n\t\t\t\t// While we aren't ideal and we don't have units left\n\t\t\t\twhile (unitDefinitionIndex < time.units.length) {\n\t\t\t\t\t// Can we scale this unit. If `false` we can scale infinitely\n\t\t\t\t\tme.unitScale = 1;\n\n\t\t\t\t\tif (helpers.isArray(unitDefinition.steps) && Math.ceil(me.scaleSizeInUnits / labelCapacity) < helpers.max(unitDefinition.steps)) {\n\t\t\t\t\t\t// Use one of the prefedined steps\n\t\t\t\t\t\tfor (var idx = 0; idx < unitDefinition.steps.length; ++idx) {\n\t\t\t\t\t\t\tif (unitDefinition.steps[idx] >= Math.ceil(me.scaleSizeInUnits / labelCapacity)) {\n\t\t\t\t\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, unitDefinition.steps[idx]);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if ((unitDefinition.maxStep === false) || (Math.ceil(me.scaleSizeInUnits / labelCapacity) < unitDefinition.maxStep)) {\n\t\t\t\t\t\t// We have a max step. Scale this unit\n\t\t\t\t\t\tme.unitScale = helpers.getValueOrDefault(me.options.time.unitStepSize, Math.ceil(me.scaleSizeInUnits / labelCapacity));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Move to the next unit up\n\t\t\t\t\t\t++unitDefinitionIndex;\n\t\t\t\t\t\tunitDefinition = time.units[unitDefinitionIndex];\n\n\t\t\t\t\t\tme.tickUnit = unitDefinition.name;\n\t\t\t\t\t\tvar leadingUnitBuffer = me.firstTick.diff(me.getMomentStartOf(me.firstTick), me.tickUnit, true);\n\t\t\t\t\t\tvar trailingUnitBuffer = me.getMomentStartOf(me.lastTick.clone().add(1, me.tickUnit)).diff(me.lastTick, me.tickUnit, true);\n\t\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true) + leadingUnitBuffer + trailingUnitBuffer;\n\t\t\t\t\t\tme.displayFormat = me.options.time.displayFormats[unitDefinition.name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar roundedStart;\n\n\t\t\t// Only round the first tick if we have no hard minimum\n\t\t\tif (!me.options.time.min) {\n\t\t\t\tme.firstTick = me.getMomentStartOf(me.firstTick);\n\t\t\t\troundedStart = me.firstTick;\n\t\t\t} else {\n\t\t\t\troundedStart = me.getMomentStartOf(me.firstTick);\n\t\t\t}\n\n\t\t\t// Only round the last tick if we have no hard maximum\n\t\t\tif (!me.options.time.max) {\n\t\t\t\tvar roundedEnd = me.getMomentStartOf(me.lastTick);\n\t\t\t\tvar delta = roundedEnd.diff(me.lastTick, me.tickUnit, true);\n\t\t\t\tif (delta < 0) {\n\t\t\t\t\t// Do not use end of because we need me to be in the next time unit\n\t\t\t\t\tme.lastTick = me.getMomentStartOf(me.lastTick.add(1, me.tickUnit));\n\t\t\t\t} else if (delta >= 0) {\n\t\t\t\t\tme.lastTick = roundedEnd;\n\t\t\t\t}\n\n\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t}\n\n\t\t\t// Tick displayFormat override\n\t\t\tif (me.options.time.displayFormat) {\n\t\t\t\tme.displayFormat = me.options.time.displayFormat;\n\t\t\t}\n\n\t\t\t// first tick. will have been rounded correctly if options.time.min is not specified\n\t\t\tme.ticks.push(me.firstTick.clone());\n\n\t\t\t// For every unit in between the first and last moment, create a moment and add it to the ticks tick\n\t\t\tfor (var i = 1; i <= me.scaleSizeInUnits; ++i) {\n\t\t\t\tvar newTick = roundedStart.clone().add(i, me.tickUnit);\n\n\t\t\t\t// Are we greater than the max time\n\t\t\t\tif (me.options.time.max && newTick.diff(me.lastTick, me.tickUnit, true) >= 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (i % me.unitScale === 0) {\n\t\t\t\t\tme.ticks.push(newTick);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Always show the right tick\n\t\t\tvar diff = me.ticks[me.ticks.length - 1].diff(me.lastTick, me.tickUnit);\n\t\t\tif (diff !== 0 || me.scaleSizeInUnits === 0) {\n\t\t\t\t// this is a weird case. If the <max> option is the same as the end option, we can't just diff the times because the tick was created from the roundedStart\n\t\t\t\t// but the last tick was not rounded.\n\t\t\t\tif (me.options.time.max) {\n\t\t\t\t\tme.ticks.push(me.lastTick.clone());\n\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.ticks[0], me.tickUnit, true);\n\t\t\t\t} else {\n\t\t\t\t\tme.ticks.push(me.lastTick.clone());\n\t\t\t\t\tme.scaleSizeInUnits = me.lastTick.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.ctx.restore();\n\n\t\t\t// Invalidate label diffs cache\n\t\t\tme.labelDiffs = undefined;\n\t\t},\n\t\t// Get tooltip label\n\t\tgetLabelForIndex: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar label = me.chart.data.labels && index < me.chart.data.labels.length ? me.chart.data.labels[index] : '';\n\n\t\t\tif (typeof me.chart.data.datasets[datasetIndex].data[0] === 'object') {\n\t\t\t\tlabel = me.getRightValue(me.chart.data.datasets[datasetIndex].data[index]);\n\t\t\t}\n\n\t\t\t// Format nicely\n\t\t\tif (me.options.time.tooltipFormat) {\n\t\t\t\tlabel = me.parseTime(label).format(me.options.time.tooltipFormat);\n\t\t\t}\n\n\t\t\treturn label;\n\t\t},\n\t\t// Function to format an individual tick mark\n\t\ttickFormatFunction: function(tick, index, ticks) {\n\t\t\tvar formattedTick = tick.format(this.displayFormat);\n\t\t\tvar tickOpts = this.options.ticks;\n\t\t\tvar callback = helpers.getValueOrDefault(tickOpts.callback, tickOpts.userCallback);\n\n\t\t\tif (callback) {\n\t\t\t\treturn callback(formattedTick, index, ticks);\n\t\t\t}\n\t\t\treturn formattedTick;\n\t\t},\n\t\tconvertTicksToLabels: function() {\n\t\t\tvar me = this;\n\t\t\tme.tickMoments = me.ticks;\n\t\t\tme.ticks = me.ticks.map(me.tickFormatFunction, me);\n\t\t},\n\t\tgetPixelForValue: function(value, index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar offset = null;\n\t\t\tif (index !== undefined && datasetIndex !== undefined) {\n\t\t\t\toffset = me.getLabelDiff(datasetIndex, index);\n\t\t\t}\n\n\t\t\tif (offset === null) {\n\t\t\t\tif (!value || !value.isValid) {\n\t\t\t\t\t// not already a moment object\n\t\t\t\t\tvalue = me.parseTime(me.getRightValue(value));\n\t\t\t\t}\n\t\t\t\tif (value && value.isValid && value.isValid()) {\n\t\t\t\t\toffset = value.diff(me.firstTick, me.tickUnit, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (offset !== null) {\n\t\t\t\tvar decimal = offset !== 0 ? offset / me.scaleSizeInUnits : offset;\n\n\t\t\t\tif (me.isHorizontal()) {\n\t\t\t\t\tvar innerWidth = me.width - (me.paddingLeft + me.paddingRight);\n\t\t\t\t\tvar valueOffset = (innerWidth * decimal) + me.paddingLeft;\n\n\t\t\t\t\treturn me.left + Math.round(valueOffset);\n\t\t\t\t}\n\t\t\t\tvar innerHeight = me.height - (me.paddingTop + me.paddingBottom);\n\t\t\t\tvar heightOffset = (innerHeight * decimal) + me.paddingTop;\n\n\t\t\t\treturn me.top + Math.round(heightOffset);\n\t\t\t}\n\t\t},\n\t\tgetPixelForTick: function(index) {\n\t\t\treturn this.getPixelForValue(this.tickMoments[index], null, null);\n\t\t},\n\t\tgetValueForPixel: function(pixel) {\n\t\t\tvar me = this;\n\t\t\tvar innerDimension = me.isHorizontal() ? me.width - (me.paddingLeft + me.paddingRight) : me.height - (me.paddingTop + me.paddingBottom);\n\t\t\tvar offset = (pixel - (me.isHorizontal() ? me.left + me.paddingLeft : me.top + me.paddingTop)) / innerDimension;\n\t\t\toffset *= me.scaleSizeInUnits;\n\t\t\treturn me.firstTick.clone().add(moment.duration(offset, me.tickUnit).asSeconds(), 'seconds');\n\t\t},\n\t\tparseTime: function(label) {\n\t\t\tvar me = this;\n\t\t\tif (typeof me.options.time.parser === 'string') {\n\t\t\t\treturn moment(label, me.options.time.parser);\n\t\t\t}\n\t\t\tif (typeof me.options.time.parser === 'function') {\n\t\t\t\treturn me.options.time.parser(label);\n\t\t\t}\n\t\t\t// Date objects\n\t\t\tif (typeof label.getMonth === 'function' || typeof label === 'number') {\n\t\t\t\treturn moment(label);\n\t\t\t}\n\t\t\t// Moment support\n\t\t\tif (label.isValid && label.isValid()) {\n\t\t\t\treturn label;\n\t\t\t}\n\t\t\t// Custom parsing (return an instance of moment)\n\t\t\tif (typeof me.options.time.format !== 'string' && me.options.time.format.call) {\n\t\t\t\tconsole.warn('options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale');\n\t\t\t\treturn me.options.time.format(label);\n\t\t\t}\n\t\t\t// Moment format parsing\n\t\t\treturn moment(label, me.options.time.format);\n\t\t}\n\t});\n\tChart.scaleService.registerScaleType('time', TimeScale, defaultConfig);\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.bar = {\n\t\thover: {\n\t\t\tmode: 'label'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'category',\n\n\t\t\t\t// Specific to Bar Controller\n\t\t\t\tcategoryPercentage: 0.8,\n\t\t\t\tbarPercentage: 0.9,\n\n\t\t\t\t// grid line settings\n\t\t\t\tgridLines: {\n\t\t\t\t\toffsetGridLines: true\n\t\t\t\t}\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear'\n\t\t\t}]\n\t\t}\n\t};\n\n\tChart.controllers.bar = Chart.DatasetController.extend({\n\n\t\tdataElementType: Chart.elements.Rectangle,\n\n\t\tinitialize: function(chart, datasetIndex) {\n\t\t\tChart.DatasetController.prototype.initialize.call(this, chart, datasetIndex);\n\n\t\t\t// Use this to indicate that this is a bar dataset.\n\t\t\tthis.getMeta().bar = true;\n\t\t},\n\n\t\t// Get the number of datasets that display bars. We use this to correctly calculate the bar width\n\t\tgetBarCount: function() {\n\t\t\tvar me = this;\n\t\t\tvar barCount = 0;\n\t\t\thelpers.each(me.chart.data.datasets, function(dataset, datasetIndex) {\n\t\t\t\tvar meta = me.chart.getDatasetMeta(datasetIndex);\n\t\t\t\tif (meta.bar && me.chart.isDatasetVisible(datasetIndex)) {\n\t\t\t\t\t++barCount;\n\t\t\t\t}\n\t\t\t}, me);\n\t\t\treturn barCount;\n\t\t},\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\thelpers.each(me.getMeta().data, function(rectangle, index) {\n\t\t\t\tme.updateElement(rectangle, index, reset);\n\t\t\t}, me);\n\t\t},\n\n\t\tupdateElement: function(rectangle, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar scaleBase = yScale.getBasePixel();\n\t\t\tvar rectangleElementOptions = me.chart.options.elements.rectangle;\n\t\t\tvar custom = rectangle.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\n\t\t\thelpers.extend(rectangle, {\n\t\t\t\t// Utility\n\t\t\t\t_xScale: xScale,\n\t\t\t\t_yScale: yScale,\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: me.calculateBarX(index, me.index),\n\t\t\t\t\ty: reset ? scaleBase : me.calculateBarY(index, me.index),\n\n\t\t\t\t\t// Tooltip\n\t\t\t\t\tlabel: me.chart.data.labels[index],\n\t\t\t\t\tdatasetLabel: dataset.label,\n\n\t\t\t\t\t// Appearance\n\t\t\t\t\tbase: reset ? scaleBase : me.calculateBarBase(me.index, index),\n\t\t\t\t\twidth: me.calculateBarWidth(index),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.backgroundColor, index, rectangleElementOptions.backgroundColor),\n\t\t\t\t\tborderSkipped: custom.borderSkipped ? custom.borderSkipped : rectangleElementOptions.borderSkipped,\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.borderColor, index, rectangleElementOptions.borderColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.borderWidth, index, rectangleElementOptions.borderWidth)\n\t\t\t\t}\n\t\t\t});\n\t\t\trectangle.pivot();\n\t\t},\n\n\t\tcalculateBarBase: function(datasetIndex, index) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar base = 0;\n\n\t\t\tif (yScale.options.stacked) {\n\t\t\t\tvar chart = me.chart;\n\t\t\t\tvar datasets = chart.data.datasets;\n\t\t\t\tvar value = Number(datasets[datasetIndex].data[index]);\n\n\t\t\t\tfor (var i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tvar currentDs = datasets[i];\n\t\t\t\t\tvar currentDsMeta = chart.getDatasetMeta(i);\n\t\t\t\t\tif (currentDsMeta.bar && currentDsMeta.yAxisID === yScale.id && chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar currentVal = Number(currentDs.data[index]);\n\t\t\t\t\t\tbase += value < 0 ? Math.min(currentVal, 0) : Math.max(currentVal, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn yScale.getPixelForValue(base);\n\t\t\t}\n\n\t\t\treturn yScale.getBasePixel();\n\t\t},\n\n\t\tgetRuler: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar datasetCount = me.getBarCount();\n\n\t\t\tvar tickWidth;\n\n\t\t\tif (xScale.options.type === 'category') {\n\t\t\t\ttickWidth = xScale.getPixelForTick(index + 1) - xScale.getPixelForTick(index);\n\t\t\t} else {\n\t\t\t\t// Average width\n\t\t\t\ttickWidth = xScale.width / xScale.ticks.length;\n\t\t\t}\n\t\t\tvar categoryWidth = tickWidth * xScale.options.categoryPercentage;\n\t\t\tvar categorySpacing = (tickWidth - (tickWidth * xScale.options.categoryPercentage)) / 2;\n\t\t\tvar fullBarWidth = categoryWidth / datasetCount;\n\n\t\t\tif (xScale.ticks.length !== me.chart.data.labels.length) {\n\t\t\t\tvar perc = xScale.ticks.length / me.chart.data.labels.length;\n\t\t\t\tfullBarWidth = fullBarWidth * perc;\n\t\t\t}\n\n\t\t\tvar barWidth = fullBarWidth * xScale.options.barPercentage;\n\t\t\tvar barSpacing = fullBarWidth - (fullBarWidth * xScale.options.barPercentage);\n\n\t\t\treturn {\n\t\t\t\tdatasetCount: datasetCount,\n\t\t\t\ttickWidth: tickWidth,\n\t\t\t\tcategoryWidth: categoryWidth,\n\t\t\t\tcategorySpacing: categorySpacing,\n\t\t\t\tfullBarWidth: fullBarWidth,\n\t\t\t\tbarWidth: barWidth,\n\t\t\t\tbarSpacing: barSpacing\n\t\t\t};\n\t\t},\n\n\t\tcalculateBarWidth: function(index) {\n\t\t\tvar xScale = this.getScaleForId(this.getMeta().xAxisID);\n\t\t\tif (xScale.options.barThickness) {\n\t\t\t\treturn xScale.options.barThickness;\n\t\t\t}\n\t\t\tvar ruler = this.getRuler(index);\n\t\t\treturn xScale.options.stacked ? ruler.categoryWidth : ruler.barWidth;\n\t\t},\n\n\t\t// Get bar index from the given dataset index accounting for the fact that not all bars are visible\n\t\tgetBarIndex: function(datasetIndex) {\n\t\t\tvar barIndex = 0;\n\t\t\tvar meta, j;\n\n\t\t\tfor (j = 0; j < datasetIndex; ++j) {\n\t\t\t\tmeta = this.chart.getDatasetMeta(j);\n\t\t\t\tif (meta.bar && this.chart.isDatasetVisible(j)) {\n\t\t\t\t\t++barIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn barIndex;\n\t\t},\n\n\t\tcalculateBarX: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar barIndex = me.getBarIndex(datasetIndex);\n\n\t\t\tvar ruler = me.getRuler(index);\n\t\t\tvar leftTick = xScale.getPixelForValue(null, index, datasetIndex, me.chart.isCombo);\n\t\t\tleftTick -= me.chart.isCombo ? (ruler.tickWidth / 2) : 0;\n\n\t\t\tif (xScale.options.stacked) {\n\t\t\t\treturn leftTick + (ruler.categoryWidth / 2) + ruler.categorySpacing;\n\t\t\t}\n\n\t\t\treturn leftTick +\n\t\t\t\t(ruler.barWidth / 2) +\n\t\t\t\truler.categorySpacing +\n\t\t\t\t(ruler.barWidth * barIndex) +\n\t\t\t\t(ruler.barSpacing / 2) +\n\t\t\t\t(ruler.barSpacing * barIndex);\n\t\t},\n\n\t\tcalculateBarY: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar value = Number(me.getDataset().data[index]);\n\n\t\t\tif (yScale.options.stacked) {\n\n\t\t\t\tvar sumPos = 0,\n\t\t\t\t\tsumNeg = 0;\n\n\t\t\t\tfor (var i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tvar ds = me.chart.data.datasets[i];\n\t\t\t\t\tvar dsMeta = me.chart.getDatasetMeta(i);\n\t\t\t\t\tif (dsMeta.bar && dsMeta.yAxisID === yScale.id && me.chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar stackedVal = Number(ds.data[index]);\n\t\t\t\t\t\tif (stackedVal < 0) {\n\t\t\t\t\t\t\tsumNeg += stackedVal || 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsumPos += stackedVal || 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value < 0) {\n\t\t\t\t\treturn yScale.getPixelForValue(sumNeg + value);\n\t\t\t\t}\n\t\t\t\treturn yScale.getPixelForValue(sumPos + value);\n\t\t\t}\n\n\t\t\treturn yScale.getPixelForValue(value);\n\t\t},\n\n\t\tdraw: function(ease) {\n\t\t\tvar me = this;\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\thelpers.each(me.getMeta().data, function(rectangle, index) {\n\t\t\t\tvar d = me.getDataset().data[index];\n\t\t\t\tif (d !== null && d !== undefined && !isNaN(d)) {\n\t\t\t\t\trectangle.transition(easingDecimal).draw();\n\t\t\t\t}\n\t\t\t}, me);\n\t\t},\n\n\t\tsetHoverStyle: function(rectangle) {\n\t\t\tvar dataset = this.chart.data.datasets[rectangle._datasetIndex];\n\t\t\tvar index = rectangle._index;\n\n\t\t\tvar custom = rectangle.custom || {};\n\t\t\tvar model = rectangle._model;\n\t\t\tmodel.backgroundColor = custom.hoverBackgroundColor ? custom.hoverBackgroundColor : helpers.getValueAtIndexOrDefault(dataset.hoverBackgroundColor, index, helpers.getHoverColor(model.backgroundColor));\n\t\t\tmodel.borderColor = custom.hoverBorderColor ? custom.hoverBorderColor : helpers.getValueAtIndexOrDefault(dataset.hoverBorderColor, index, helpers.getHoverColor(model.borderColor));\n\t\t\tmodel.borderWidth = custom.hoverBorderWidth ? custom.hoverBorderWidth : helpers.getValueAtIndexOrDefault(dataset.hoverBorderWidth, index, model.borderWidth);\n\t\t},\n\n\t\tremoveHoverStyle: function(rectangle) {\n\t\t\tvar dataset = this.chart.data.datasets[rectangle._datasetIndex];\n\t\t\tvar index = rectangle._index;\n\t\t\tvar custom = rectangle.custom || {};\n\t\t\tvar model = rectangle._model;\n\t\t\tvar rectangleElementOptions = this.chart.options.elements.rectangle;\n\n\t\t\tmodel.backgroundColor = custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.backgroundColor, index, rectangleElementOptions.backgroundColor);\n\t\t\tmodel.borderColor = custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.borderColor, index, rectangleElementOptions.borderColor);\n\t\t\tmodel.borderWidth = custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.borderWidth, index, rectangleElementOptions.borderWidth);\n\t\t}\n\n\t});\n\n\n\t// including horizontalBar in the bar file, instead of a file of its own\n\t// it extends bar (like pie extends doughnut)\n\tChart.defaults.horizontalBar = {\n\t\thover: {\n\t\t\tmode: 'label'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tposition: 'bottom'\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\tposition: 'left',\n\t\t\t\ttype: 'category',\n\n\t\t\t\t// Specific to Horizontal Bar Controller\n\t\t\t\tcategoryPercentage: 0.8,\n\t\t\t\tbarPercentage: 0.9,\n\n\t\t\t\t// grid line settings\n\t\t\t\tgridLines: {\n\t\t\t\t\toffsetGridLines: true\n\t\t\t\t}\n\t\t\t}]\n\t\t},\n\t\telements: {\n\t\t\trectangle: {\n\t\t\t\tborderSkipped: 'left'\n\t\t\t}\n\t\t},\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function(tooltipItems, data) {\n\t\t\t\t\t// Pick first xLabel for now\n\t\t\t\t\tvar title = '';\n\n\t\t\t\t\tif (tooltipItems.length > 0) {\n\t\t\t\t\t\tif (tooltipItems[0].yLabel) {\n\t\t\t\t\t\t\ttitle = tooltipItems[0].yLabel;\n\t\t\t\t\t\t} else if (data.labels.length > 0 && tooltipItems[0].index < data.labels.length) {\n\t\t\t\t\t\t\ttitle = data.labels[tooltipItems[0].index];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\tvar datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';\n\t\t\t\t\treturn datasetLabel + ': ' + tooltipItem.xLabel;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.controllers.horizontalBar = Chart.controllers.bar.extend({\n\t\tupdateElement: function(rectangle, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar scaleBase = xScale.getBasePixel();\n\t\t\tvar custom = rectangle.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar rectangleElementOptions = me.chart.options.elements.rectangle;\n\n\t\t\thelpers.extend(rectangle, {\n\t\t\t\t// Utility\n\t\t\t\t_xScale: xScale,\n\t\t\t\t_yScale: yScale,\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: reset ? scaleBase : me.calculateBarX(index, me.index),\n\t\t\t\t\ty: me.calculateBarY(index, me.index),\n\n\t\t\t\t\t// Tooltip\n\t\t\t\t\tlabel: me.chart.data.labels[index],\n\t\t\t\t\tdatasetLabel: dataset.label,\n\n\t\t\t\t\t// Appearance\n\t\t\t\t\tbase: reset ? scaleBase : me.calculateBarBase(me.index, index),\n\t\t\t\t\theight: me.calculateBarHeight(index),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.backgroundColor, index, rectangleElementOptions.backgroundColor),\n\t\t\t\t\tborderSkipped: custom.borderSkipped ? custom.borderSkipped : rectangleElementOptions.borderSkipped,\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.borderColor, index, rectangleElementOptions.borderColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.borderWidth, index, rectangleElementOptions.borderWidth)\n\t\t\t\t},\n\n\t\t\t\tdraw: function() {\n\t\t\t\t\tvar ctx = this._chart.ctx;\n\t\t\t\t\tvar vm = this._view;\n\n\t\t\t\t\tvar halfHeight = vm.height / 2,\n\t\t\t\t\t\ttopY = vm.y - halfHeight,\n\t\t\t\t\t\tbottomY = vm.y + halfHeight,\n\t\t\t\t\t\tright = vm.base - (vm.base - vm.x),\n\t\t\t\t\t\thalfStroke = vm.borderWidth / 2;\n\n\t\t\t\t\t// Canvas doesn't allow us to stroke inside the width so we can\n\t\t\t\t\t// adjust the sizes to fit if we're setting a stroke on the line\n\t\t\t\t\tif (vm.borderWidth) {\n\t\t\t\t\t\ttopY += halfStroke;\n\t\t\t\t\t\tbottomY -= halfStroke;\n\t\t\t\t\t\tright += halfStroke;\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.beginPath();\n\n\t\t\t\t\tctx.fillStyle = vm.backgroundColor;\n\t\t\t\t\tctx.strokeStyle = vm.borderColor;\n\t\t\t\t\tctx.lineWidth = vm.borderWidth;\n\n\t\t\t\t\t// Corner points, from bottom-left to bottom-right clockwise\n\t\t\t\t\t// | 1 2 |\n\t\t\t\t\t// | 0 3 |\n\t\t\t\t\tvar corners = [\n\t\t\t\t\t\t[vm.base, bottomY],\n\t\t\t\t\t\t[vm.base, topY],\n\t\t\t\t\t\t[right, topY],\n\t\t\t\t\t\t[right, bottomY]\n\t\t\t\t\t];\n\n\t\t\t\t\t// Find first (starting) corner with fallback to 'bottom'\n\t\t\t\t\tvar borders = ['bottom', 'left', 'top', 'right'];\n\t\t\t\t\tvar startCorner = borders.indexOf(vm.borderSkipped, 0);\n\t\t\t\t\tif (startCorner === -1) {\n\t\t\t\t\t\tstartCorner = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction cornerAt(cornerIndex) {\n\t\t\t\t\t\treturn corners[(startCorner + cornerIndex) % 4];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Draw rectangle from 'startCorner'\n\t\t\t\t\tctx.moveTo.apply(ctx, cornerAt(0));\n\t\t\t\t\tfor (var i = 1; i < 4; i++) {\n\t\t\t\t\t\tctx.lineTo.apply(ctx, cornerAt(i));\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tif (vm.borderWidth) {\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tinRange: function(mouseX, mouseY) {\n\t\t\t\t\tvar vm = this._view;\n\t\t\t\t\tvar inRange = false;\n\n\t\t\t\t\tif (vm) {\n\t\t\t\t\t\tif (vm.x < vm.base) {\n\t\t\t\t\t\t\tinRange = (mouseY >= vm.y - vm.height / 2 && mouseY <= vm.y + vm.height / 2) && (mouseX >= vm.x && mouseX <= vm.base);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinRange = (mouseY >= vm.y - vm.height / 2 && mouseY <= vm.y + vm.height / 2) && (mouseX >= vm.base && mouseX <= vm.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn inRange;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trectangle.pivot();\n\t\t},\n\n\t\tcalculateBarBase: function(datasetIndex, index) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar base = 0;\n\n\t\t\tif (xScale.options.stacked) {\n\t\t\t\tvar chart = me.chart;\n\t\t\t\tvar datasets = chart.data.datasets;\n\t\t\t\tvar value = Number(datasets[datasetIndex].data[index]);\n\n\t\t\t\tfor (var i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tvar currentDs = datasets[i];\n\t\t\t\t\tvar currentDsMeta = chart.getDatasetMeta(i);\n\t\t\t\t\tif (currentDsMeta.bar && currentDsMeta.xAxisID === xScale.id && chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar currentVal = Number(currentDs.data[index]);\n\t\t\t\t\t\tbase += value < 0 ? Math.min(currentVal, 0) : Math.max(currentVal, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn xScale.getPixelForValue(base);\n\t\t\t}\n\n\t\t\treturn xScale.getBasePixel();\n\t\t},\n\n\t\tgetRuler: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar datasetCount = me.getBarCount();\n\n\t\t\tvar tickHeight;\n\t\t\tif (yScale.options.type === 'category') {\n\t\t\t\ttickHeight = yScale.getPixelForTick(index + 1) - yScale.getPixelForTick(index);\n\t\t\t} else {\n\t\t\t\t// Average width\n\t\t\t\ttickHeight = yScale.width / yScale.ticks.length;\n\t\t\t}\n\t\t\tvar categoryHeight = tickHeight * yScale.options.categoryPercentage;\n\t\t\tvar categorySpacing = (tickHeight - (tickHeight * yScale.options.categoryPercentage)) / 2;\n\t\t\tvar fullBarHeight = categoryHeight / datasetCount;\n\n\t\t\tif (yScale.ticks.length !== me.chart.data.labels.length) {\n\t\t\t\tvar perc = yScale.ticks.length / me.chart.data.labels.length;\n\t\t\t\tfullBarHeight = fullBarHeight * perc;\n\t\t\t}\n\n\t\t\tvar barHeight = fullBarHeight * yScale.options.barPercentage;\n\t\t\tvar barSpacing = fullBarHeight - (fullBarHeight * yScale.options.barPercentage);\n\n\t\t\treturn {\n\t\t\t\tdatasetCount: datasetCount,\n\t\t\t\ttickHeight: tickHeight,\n\t\t\t\tcategoryHeight: categoryHeight,\n\t\t\t\tcategorySpacing: categorySpacing,\n\t\t\t\tfullBarHeight: fullBarHeight,\n\t\t\t\tbarHeight: barHeight,\n\t\t\t\tbarSpacing: barSpacing\n\t\t\t};\n\t\t},\n\n\t\tcalculateBarHeight: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar yScale = me.getScaleForId(me.getMeta().yAxisID);\n\t\t\tif (yScale.options.barThickness) {\n\t\t\t\treturn yScale.options.barThickness;\n\t\t\t}\n\t\t\tvar ruler = me.getRuler(index);\n\t\t\treturn yScale.options.stacked ? ruler.categoryHeight : ruler.barHeight;\n\t\t},\n\n\t\tcalculateBarX: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar value = Number(me.getDataset().data[index]);\n\n\t\t\tif (xScale.options.stacked) {\n\n\t\t\t\tvar sumPos = 0,\n\t\t\t\t\tsumNeg = 0;\n\n\t\t\t\tfor (var i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tvar ds = me.chart.data.datasets[i];\n\t\t\t\t\tvar dsMeta = me.chart.getDatasetMeta(i);\n\t\t\t\t\tif (dsMeta.bar && dsMeta.xAxisID === xScale.id && me.chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar stackedVal = Number(ds.data[index]);\n\t\t\t\t\t\tif (stackedVal < 0) {\n\t\t\t\t\t\t\tsumNeg += stackedVal || 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsumPos += stackedVal || 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value < 0) {\n\t\t\t\t\treturn xScale.getPixelForValue(sumNeg + value);\n\t\t\t\t}\n\t\t\t\treturn xScale.getPixelForValue(sumPos + value);\n\t\t\t}\n\n\t\t\treturn xScale.getPixelForValue(value);\n\t\t},\n\n\t\tcalculateBarY: function(index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar barIndex = me.getBarIndex(datasetIndex);\n\n\t\t\tvar ruler = me.getRuler(index);\n\t\t\tvar topTick = yScale.getPixelForValue(null, index, datasetIndex, me.chart.isCombo);\n\t\t\ttopTick -= me.chart.isCombo ? (ruler.tickHeight / 2) : 0;\n\n\t\t\tif (yScale.options.stacked) {\n\t\t\t\treturn topTick + (ruler.categoryHeight / 2) + ruler.categorySpacing;\n\t\t\t}\n\n\t\t\treturn topTick +\n\t\t\t\t(ruler.barHeight / 2) +\n\t\t\t\truler.categorySpacing +\n\t\t\t\t(ruler.barHeight * barIndex) +\n\t\t\t\t(ruler.barSpacing / 2) +\n\t\t\t\t(ruler.barSpacing * barIndex);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.bubble = {\n\t\thover: {\n\t\t\tmode: 'single'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'linear', // bubble should probably use a linear scale by default\n\t\t\t\tposition: 'bottom',\n\t\t\t\tid: 'x-axis-0' // need an ID so datasets can reference the scale\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tposition: 'left',\n\t\t\t\tid: 'y-axis-0'\n\t\t\t}]\n\t\t},\n\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\t// Title doesn't make sense for scatter since we format the data as a point\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\tvar datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';\n\t\t\t\t\tvar dataPoint = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\n\t\t\t\t\treturn datasetLabel + ': (' + dataPoint.x + ', ' + dataPoint.y + ', ' + dataPoint.r + ')';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.controllers.bubble = Chart.DatasetController.extend({\n\n\t\tdataElementType: Chart.elements.Point,\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar points = meta.data;\n\n\t\t\t// Update Points\n\t\t\thelpers.each(points, function(point, index) {\n\t\t\t\tme.updateElement(point, index, reset);\n\t\t\t});\n\t\t},\n\n\t\tupdateElement: function(point, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar data = dataset.data[index];\n\t\t\tvar pointElementOptions = me.chart.options.elements.point;\n\t\t\tvar dsIndex = me.index;\n\n\t\t\thelpers.extend(point, {\n\t\t\t\t// Utility\n\t\t\t\t_xScale: xScale,\n\t\t\t\t_yScale: yScale,\n\t\t\t\t_datasetIndex: dsIndex,\n\t\t\t\t_index: index,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: reset ? xScale.getPixelForDecimal(0.5) : xScale.getPixelForValue(typeof data === 'object' ? data : NaN, index, dsIndex, me.chart.isCombo),\n\t\t\t\t\ty: reset ? yScale.getBasePixel() : yScale.getPixelForValue(data, index, dsIndex),\n\t\t\t\t\t// Appearance\n\t\t\t\t\tradius: reset ? 0 : custom.radius ? custom.radius : me.getRadius(data),\n\n\t\t\t\t\t// Tooltip\n\t\t\t\t\thitRadius: custom.hitRadius ? custom.hitRadius : helpers.getValueAtIndexOrDefault(dataset.hitRadius, index, pointElementOptions.hitRadius)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Trick to reset the styles of the point\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(me, point, pointElementOptions);\n\n\t\t\tvar model = point._model;\n\t\t\tmodel.skip = custom.skip ? custom.skip : (isNaN(model.x) || isNaN(model.y));\n\n\t\t\tpoint.pivot();\n\t\t},\n\n\t\tgetRadius: function(value) {\n\t\t\treturn value.r || this.chart.options.elements.point.radius;\n\t\t},\n\n\t\tsetHoverStyle: function(point) {\n\t\t\tvar me = this;\n\t\t\tChart.DatasetController.prototype.setHoverStyle.call(me, point);\n\n\t\t\t// Radius\n\t\t\tvar dataset = me.chart.data.datasets[point._datasetIndex];\n\t\t\tvar index = point._index;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\t\t\tmodel.radius = custom.hoverRadius ? custom.hoverRadius : (helpers.getValueAtIndexOrDefault(dataset.hoverRadius, index, me.chart.options.elements.point.hoverRadius)) + me.getRadius(dataset.data[index]);\n\t\t},\n\n\t\tremoveHoverStyle: function(point) {\n\t\t\tvar me = this;\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(me, point, me.chart.options.elements.point);\n\n\t\t\tvar dataVal = me.chart.data.datasets[point._datasetIndex].data[point._index];\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\n\t\t\tmodel.radius = custom.radius ? custom.radius : me.getRadius(dataVal);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers,\n\t\tdefaults = Chart.defaults;\n\n\tdefaults.doughnut = {\n\t\tanimation: {\n\t\t\t// Boolean - Whether we animate the rotation of the Doughnut\n\t\t\tanimateRotate: true,\n\t\t\t// Boolean - Whether we animate scaling the Doughnut from the centre\n\t\t\tanimateScale: false\n\t\t},\n\t\taspectRatio: 1,\n\t\thover: {\n\t\t\tmode: 'single'\n\t\t},\n\t\tlegendCallback: function(chart) {\n\t\t\tvar text = [];\n\t\t\ttext.push('<ul class=\"' + chart.id + '-legend\">');\n\n\t\t\tvar data = chart.data;\n\t\t\tvar datasets = data.datasets;\n\t\t\tvar labels = data.labels;\n\n\t\t\tif (datasets.length) {\n\t\t\t\tfor (var i = 0; i < datasets[0].data.length; ++i) {\n\t\t\t\t\ttext.push('<li><span style=\"background-color:' + datasets[0].backgroundColor[i] + '\"></span>');\n\t\t\t\t\tif (labels[i]) {\n\t\t\t\t\t\ttext.push(labels[i]);\n\t\t\t\t\t}\n\t\t\t\t\ttext.push('</li>');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttext.push('</ul>');\n\t\t\treturn text.join('');\n\t\t},\n\t\tlegend: {\n\t\t\tlabels: {\n\t\t\t\tgenerateLabels: function(chart) {\n\t\t\t\t\tvar data = chart.data;\n\t\t\t\t\tif (data.labels.length && data.datasets.length) {\n\t\t\t\t\t\treturn data.labels.map(function(label, i) {\n\t\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\n\t\t\t\t\t\t\tvar ds = data.datasets[0];\n\t\t\t\t\t\t\tvar arc = meta.data[i];\n\t\t\t\t\t\t\tvar custom = arc && arc.custom || {};\n\t\t\t\t\t\t\tvar getValueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\n\t\t\t\t\t\t\tvar arcOpts = chart.options.elements.arc;\n\t\t\t\t\t\t\tvar fill = custom.backgroundColor ? custom.backgroundColor : getValueAtIndexOrDefault(ds.backgroundColor, i, arcOpts.backgroundColor);\n\t\t\t\t\t\t\tvar stroke = custom.borderColor ? custom.borderColor : getValueAtIndexOrDefault(ds.borderColor, i, arcOpts.borderColor);\n\t\t\t\t\t\t\tvar bw = custom.borderWidth ? custom.borderWidth : getValueAtIndexOrDefault(ds.borderWidth, i, arcOpts.borderWidth);\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttext: label,\n\t\t\t\t\t\t\t\tfillStyle: fill,\n\t\t\t\t\t\t\t\tstrokeStyle: stroke,\n\t\t\t\t\t\t\t\tlineWidth: bw,\n\t\t\t\t\t\t\t\thidden: isNaN(ds.data[i]) || meta.data[i].hidden,\n\n\t\t\t\t\t\t\t\t// Extra data used for toggling the correct item\n\t\t\t\t\t\t\t\tindex: i\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonClick: function(e, legendItem) {\n\t\t\t\tvar index = legendItem.index;\n\t\t\t\tvar chart = this.chart;\n\t\t\t\tvar i, ilen, meta;\n\n\t\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\n\t\t\t\t\tmeta = chart.getDatasetMeta(i);\n\t\t\t\t\t// toggle visibility of index if exists\n\t\t\t\t\tif (meta.data[index]) {\n\t\t\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tchart.update();\n\t\t\t}\n\t\t},\n\n\t\t// The percentage of the chart that we cut out of the middle.\n\t\tcutoutPercentage: 50,\n\n\t\t// The rotation of the chart, where the first data arc begins.\n\t\trotation: Math.PI * -0.5,\n\n\t\t// The total circumference of the chart.\n\t\tcircumference: Math.PI * 2.0,\n\n\t\t// Need to override these to give a nice default\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\treturn data.labels[tooltipItem.index] + ': ' + data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tdefaults.pie = helpers.clone(defaults.doughnut);\n\thelpers.extend(defaults.pie, {\n\t\tcutoutPercentage: 0\n\t});\n\n\n\tChart.controllers.doughnut = Chart.controllers.pie = Chart.DatasetController.extend({\n\n\t\tdataElementType: Chart.elements.Arc,\n\n\t\tlinkScales: helpers.noop,\n\n\t\t// Get index of the dataset in relation to the visible datasets. This allows determining the inner and outer radius correctly\n\t\tgetRingIndex: function(datasetIndex) {\n\t\t\tvar ringIndex = 0;\n\n\t\t\tfor (var j = 0; j < datasetIndex; ++j) {\n\t\t\t\tif (this.chart.isDatasetVisible(j)) {\n\t\t\t\t\t++ringIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ringIndex;\n\t\t},\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart,\n\t\t\t\tchartArea = chart.chartArea,\n\t\t\t\topts = chart.options,\n\t\t\t\tarcOpts = opts.elements.arc,\n\t\t\t\tavailableWidth = chartArea.right - chartArea.left - arcOpts.borderWidth,\n\t\t\t\tavailableHeight = chartArea.bottom - chartArea.top - arcOpts.borderWidth,\n\t\t\t\tminSize = Math.min(availableWidth, availableHeight),\n\t\t\t\toffset = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\tmeta = me.getMeta(),\n\t\t\t\tcutoutPercentage = opts.cutoutPercentage,\n\t\t\t\tcircumference = opts.circumference;\n\n\t\t\t// If the chart's circumference isn't a full circle, calculate minSize as a ratio of the width/height of the arc\n\t\t\tif (circumference < Math.PI * 2.0) {\n\t\t\t\tvar startAngle = opts.rotation % (Math.PI * 2.0);\n\t\t\t\tstartAngle += Math.PI * 2.0 * (startAngle >= Math.PI ? -1 : startAngle < -Math.PI ? 1 : 0);\n\t\t\t\tvar endAngle = startAngle + circumference;\n\t\t\t\tvar start = {x: Math.cos(startAngle), y: Math.sin(startAngle)};\n\t\t\t\tvar end = {x: Math.cos(endAngle), y: Math.sin(endAngle)};\n\t\t\t\tvar contains0 = (startAngle <= 0 && 0 <= endAngle) || (startAngle <= Math.PI * 2.0 && Math.PI * 2.0 <= endAngle);\n\t\t\t\tvar contains90 = (startAngle <= Math.PI * 0.5 && Math.PI * 0.5 <= endAngle) || (startAngle <= Math.PI * 2.5 && Math.PI * 2.5 <= endAngle);\n\t\t\t\tvar contains180 = (startAngle <= -Math.PI && -Math.PI <= endAngle) || (startAngle <= Math.PI && Math.PI <= endAngle);\n\t\t\t\tvar contains270 = (startAngle <= -Math.PI * 0.5 && -Math.PI * 0.5 <= endAngle) || (startAngle <= Math.PI * 1.5 && Math.PI * 1.5 <= endAngle);\n\t\t\t\tvar cutout = cutoutPercentage / 100.0;\n\t\t\t\tvar min = {x: contains180 ? -1 : Math.min(start.x * (start.x < 0 ? 1 : cutout), end.x * (end.x < 0 ? 1 : cutout)), y: contains270 ? -1 : Math.min(start.y * (start.y < 0 ? 1 : cutout), end.y * (end.y < 0 ? 1 : cutout))};\n\t\t\t\tvar max = {x: contains0 ? 1 : Math.max(start.x * (start.x > 0 ? 1 : cutout), end.x * (end.x > 0 ? 1 : cutout)), y: contains90 ? 1 : Math.max(start.y * (start.y > 0 ? 1 : cutout), end.y * (end.y > 0 ? 1 : cutout))};\n\t\t\t\tvar size = {width: (max.x - min.x) * 0.5, height: (max.y - min.y) * 0.5};\n\t\t\t\tminSize = Math.min(availableWidth / size.width, availableHeight / size.height);\n\t\t\t\toffset = {x: (max.x + min.x) * -0.5, y: (max.y + min.y) * -0.5};\n\t\t\t}\n\n\t\t\tchart.borderWidth = me.getMaxBorderWidth(meta.data);\n\t\t\tchart.outerRadius = Math.max((minSize - chart.borderWidth) / 2, 0);\n\t\t\tchart.innerRadius = Math.max(cutoutPercentage ? (chart.outerRadius / 100) * (cutoutPercentage) : 1, 0);\n\t\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / chart.getVisibleDatasetCount();\n\t\t\tchart.offsetX = offset.x * chart.outerRadius;\n\t\t\tchart.offsetY = offset.y * chart.outerRadius;\n\n\t\t\tmeta.total = me.calculateTotal();\n\n\t\t\tme.outerRadius = chart.outerRadius - (chart.radiusLength * me.getRingIndex(me.index));\n\t\t\tme.innerRadius = me.outerRadius - chart.radiusLength;\n\n\t\t\thelpers.each(meta.data, function(arc, index) {\n\t\t\t\tme.updateElement(arc, index, reset);\n\t\t\t});\n\t\t},\n\n\t\tupdateElement: function(arc, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart,\n\t\t\t\tchartArea = chart.chartArea,\n\t\t\t\topts = chart.options,\n\t\t\t\tanimationOpts = opts.animation,\n\t\t\t\tcenterX = (chartArea.left + chartArea.right) / 2,\n\t\t\t\tcenterY = (chartArea.top + chartArea.bottom) / 2,\n\t\t\t\tstartAngle = opts.rotation, // non reset case handled later\n\t\t\t\tendAngle = opts.rotation, // non reset case handled later\n\t\t\t\tdataset = me.getDataset(),\n\t\t\t\tcircumference = reset && animationOpts.animateRotate ? 0 : arc.hidden ? 0 : me.calculateCircumference(dataset.data[index]) * (opts.circumference / (2.0 * Math.PI)),\n\t\t\t\tinnerRadius = reset && animationOpts.animateScale ? 0 : me.innerRadius,\n\t\t\t\touterRadius = reset && animationOpts.animateScale ? 0 : me.outerRadius,\n\t\t\t\tvalueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\n\n\t\t\thelpers.extend(arc, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: centerX + chart.offsetX,\n\t\t\t\t\ty: centerY + chart.offsetY,\n\t\t\t\t\tstartAngle: startAngle,\n\t\t\t\t\tendAngle: endAngle,\n\t\t\t\t\tcircumference: circumference,\n\t\t\t\t\touterRadius: outerRadius,\n\t\t\t\t\tinnerRadius: innerRadius,\n\t\t\t\t\tlabel: valueAtIndexOrDefault(dataset.label, index, chart.data.labels[index])\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar model = arc._model;\n\t\t\t// Resets the visual styles\n\t\t\tthis.removeHoverStyle(arc);\n\n\t\t\t// Set correct angles if not resetting\n\t\t\tif (!reset || !animationOpts.animateRotate) {\n\t\t\t\tif (index === 0) {\n\t\t\t\t\tmodel.startAngle = opts.rotation;\n\t\t\t\t} else {\n\t\t\t\t\tmodel.startAngle = me.getMeta().data[index - 1]._model.endAngle;\n\t\t\t\t}\n\n\t\t\t\tmodel.endAngle = model.startAngle + model.circumference;\n\t\t\t}\n\n\t\t\tarc.pivot();\n\t\t},\n\n\t\tremoveHoverStyle: function(arc) {\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(this, arc, this.chart.options.elements.arc);\n\t\t},\n\n\t\tcalculateTotal: function() {\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar meta = this.getMeta();\n\t\t\tvar total = 0;\n\t\t\tvar value;\n\n\t\t\thelpers.each(meta.data, function(element, index) {\n\t\t\t\tvalue = dataset.data[index];\n\t\t\t\tif (!isNaN(value) && !element.hidden) {\n\t\t\t\t\ttotal += Math.abs(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/* if (total === 0) {\n\t\t\t\ttotal = NaN;\n\t\t\t}*/\n\n\t\t\treturn total;\n\t\t},\n\n\t\tcalculateCircumference: function(value) {\n\t\t\tvar total = this.getMeta().total;\n\t\t\tif (total > 0 && !isNaN(value)) {\n\t\t\t\treturn (Math.PI * 2.0) * (value / total);\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\n\t\t// gets the max border or hover width to properly scale pie charts\n\t\tgetMaxBorderWidth: function(elements) {\n\t\t\tvar max = 0,\n\t\t\t\tindex = this.index,\n\t\t\t\tlength = elements.length,\n\t\t\t\tborderWidth,\n\t\t\t\thoverWidth;\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tborderWidth = elements[i]._model ? elements[i]._model.borderWidth : 0;\n\t\t\t\thoverWidth = elements[i]._chart ? elements[i]._chart.config.data.datasets[index].hoverBorderWidth : 0;\n\n\t\t\t\tmax = borderWidth > max ? borderWidth : max;\n\t\t\t\tmax = hoverWidth > max ? hoverWidth : max;\n\t\t\t}\n\t\t\treturn max;\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.line = {\n\t\tshowLines: true,\n\t\tspanGaps: false,\n\n\t\thover: {\n\t\t\tmode: 'label'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'category',\n\t\t\t\tid: 'x-axis-0'\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tid: 'y-axis-0'\n\t\t\t}]\n\t\t}\n\t};\n\n\tfunction lineEnabled(dataset, options) {\n\t\treturn helpers.getValueOrDefault(dataset.showLine, options.showLines);\n\t}\n\n\tChart.controllers.line = Chart.DatasetController.extend({\n\n\t\tdatasetElementType: Chart.elements.Line,\n\n\t\tdataElementType: Chart.elements.Point,\n\n\t\taddElementAndReset: function(index) {\n\t\t\tvar me = this;\n\t\t\tvar options = me.chart.options;\n\t\t\tvar meta = me.getMeta();\n\n\t\t\tChart.DatasetController.prototype.addElementAndReset.call(me, index);\n\n\t\t\t// Make sure bezier control points are updated\n\t\t\tif (lineEnabled(me.getDataset(), options) && meta.dataset._model.tension !== 0) {\n\t\t\t\tme.updateBezierControlPoints();\n\t\t\t}\n\t\t},\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar line = meta.dataset;\n\t\t\tvar points = meta.data || [];\n\t\t\tvar options = me.chart.options;\n\t\t\tvar lineElementOptions = options.elements.line;\n\t\t\tvar scale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar i, ilen, custom;\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar showLine = lineEnabled(dataset, options);\n\n\t\t\t// Update Line\n\t\t\tif (showLine) {\n\t\t\t\tcustom = line.custom || {};\n\n\t\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\n\t\t\t\tif ((dataset.tension !== undefined) && (dataset.lineTension === undefined)) {\n\t\t\t\t\tdataset.lineTension = dataset.tension;\n\t\t\t\t}\n\n\t\t\t\t// Utility\n\t\t\t\tline._scale = scale;\n\t\t\t\tline._datasetIndex = me.index;\n\t\t\t\t// Data\n\t\t\t\tline._children = points;\n\t\t\t\t// Model\n\t\t\t\tline._model = {\n\t\t\t\t\t// Appearance\n\t\t\t\t\t// The default behavior of lines is to break at null values, according\n\t\t\t\t\t// to https://github.com/chartjs/Chart.js/issues/2435#issuecomment-216718158\n\t\t\t\t\t// This option gives linse the ability to span gaps\n\t\t\t\t\tspanGaps: dataset.spanGaps ? dataset.spanGaps : options.spanGaps,\n\t\t\t\t\ttension: custom.tension ? custom.tension : helpers.getValueOrDefault(dataset.lineTension, lineElementOptions.tension),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : (dataset.backgroundColor || lineElementOptions.backgroundColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : (dataset.borderWidth || lineElementOptions.borderWidth),\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : (dataset.borderColor || lineElementOptions.borderColor),\n\t\t\t\t\tborderCapStyle: custom.borderCapStyle ? custom.borderCapStyle : (dataset.borderCapStyle || lineElementOptions.borderCapStyle),\n\t\t\t\t\tborderDash: custom.borderDash ? custom.borderDash : (dataset.borderDash || lineElementOptions.borderDash),\n\t\t\t\t\tborderDashOffset: custom.borderDashOffset ? custom.borderDashOffset : (dataset.borderDashOffset || lineElementOptions.borderDashOffset),\n\t\t\t\t\tborderJoinStyle: custom.borderJoinStyle ? custom.borderJoinStyle : (dataset.borderJoinStyle || lineElementOptions.borderJoinStyle),\n\t\t\t\t\tfill: custom.fill ? custom.fill : (dataset.fill !== undefined ? dataset.fill : lineElementOptions.fill),\n\t\t\t\t\tsteppedLine: custom.steppedLine ? custom.steppedLine : helpers.getValueOrDefault(dataset.steppedLine, lineElementOptions.stepped),\n\t\t\t\t\tcubicInterpolationMode: custom.cubicInterpolationMode ? custom.cubicInterpolationMode : helpers.getValueOrDefault(dataset.cubicInterpolationMode, lineElementOptions.cubicInterpolationMode),\n\t\t\t\t\t// Scale\n\t\t\t\t\tscaleTop: scale.top,\n\t\t\t\t\tscaleBottom: scale.bottom,\n\t\t\t\t\tscaleZero: scale.getBasePixel()\n\t\t\t\t};\n\n\t\t\t\tline.pivot();\n\t\t\t}\n\n\t\t\t// Update Points\n\t\t\tfor (i=0, ilen=points.length; i<ilen; ++i) {\n\t\t\t\tme.updateElement(points[i], i, reset);\n\t\t\t}\n\n\t\t\tif (showLine && line._model.tension !== 0) {\n\t\t\t\tme.updateBezierControlPoints();\n\t\t\t}\n\n\t\t\t// Now pivot the point for animation\n\t\t\tfor (i=0, ilen=points.length; i<ilen; ++i) {\n\t\t\t\tpoints[i].pivot();\n\t\t\t}\n\t\t},\n\n\t\tgetPointBackgroundColor: function(point, index) {\n\t\t\tvar backgroundColor = this.chart.options.elements.point.backgroundColor;\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar custom = point.custom || {};\n\n\t\t\tif (custom.backgroundColor) {\n\t\t\t\tbackgroundColor = custom.backgroundColor;\n\t\t\t} else if (dataset.pointBackgroundColor) {\n\t\t\t\tbackgroundColor = helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor, index, backgroundColor);\n\t\t\t} else if (dataset.backgroundColor) {\n\t\t\t\tbackgroundColor = dataset.backgroundColor;\n\t\t\t}\n\n\t\t\treturn backgroundColor;\n\t\t},\n\n\t\tgetPointBorderColor: function(point, index) {\n\t\t\tvar borderColor = this.chart.options.elements.point.borderColor;\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar custom = point.custom || {};\n\n\t\t\tif (custom.borderColor) {\n\t\t\t\tborderColor = custom.borderColor;\n\t\t\t} else if (dataset.pointBorderColor) {\n\t\t\t\tborderColor = helpers.getValueAtIndexOrDefault(dataset.pointBorderColor, index, borderColor);\n\t\t\t} else if (dataset.borderColor) {\n\t\t\t\tborderColor = dataset.borderColor;\n\t\t\t}\n\n\t\t\treturn borderColor;\n\t\t},\n\n\t\tgetPointBorderWidth: function(point, index) {\n\t\t\tvar borderWidth = this.chart.options.elements.point.borderWidth;\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar custom = point.custom || {};\n\n\t\t\tif (custom.borderWidth) {\n\t\t\t\tborderWidth = custom.borderWidth;\n\t\t\t} else if (dataset.pointBorderWidth) {\n\t\t\t\tborderWidth = helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth, index, borderWidth);\n\t\t\t} else if (dataset.borderWidth) {\n\t\t\t\tborderWidth = dataset.borderWidth;\n\t\t\t}\n\n\t\t\treturn borderWidth;\n\t\t},\n\n\t\tupdateElement: function(point, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar datasetIndex = me.index;\n\t\t\tvar value = dataset.data[index];\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar xScale = me.getScaleForId(meta.xAxisID);\n\t\t\tvar pointOptions = me.chart.options.elements.point;\n\t\t\tvar x, y;\n\t\t\tvar labels = me.chart.data.labels || [];\n\t\t\tvar includeOffset = (labels.length === 1 || dataset.data.length === 1) || me.chart.isCombo;\n\n\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\n\t\t\tif ((dataset.radius !== undefined) && (dataset.pointRadius === undefined)) {\n\t\t\t\tdataset.pointRadius = dataset.radius;\n\t\t\t}\n\t\t\tif ((dataset.hitRadius !== undefined) && (dataset.pointHitRadius === undefined)) {\n\t\t\t\tdataset.pointHitRadius = dataset.hitRadius;\n\t\t\t}\n\n\t\t\tx = xScale.getPixelForValue(typeof value === 'object' ? value : NaN, index, datasetIndex, includeOffset);\n\t\t\ty = reset ? yScale.getBasePixel() : me.calculatePointY(value, index, datasetIndex);\n\n\t\t\t// Utility\n\t\t\tpoint._xScale = xScale;\n\t\t\tpoint._yScale = yScale;\n\t\t\tpoint._datasetIndex = datasetIndex;\n\t\t\tpoint._index = index;\n\n\t\t\t// Desired view properties\n\t\t\tpoint._model = {\n\t\t\t\tx: x,\n\t\t\t\ty: y,\n\t\t\t\tskip: custom.skip || isNaN(x) || isNaN(y),\n\t\t\t\t// Appearance\n\t\t\t\tradius: custom.radius || helpers.getValueAtIndexOrDefault(dataset.pointRadius, index, pointOptions.radius),\n\t\t\t\tpointStyle: custom.pointStyle || helpers.getValueAtIndexOrDefault(dataset.pointStyle, index, pointOptions.pointStyle),\n\t\t\t\tbackgroundColor: me.getPointBackgroundColor(point, index),\n\t\t\t\tborderColor: me.getPointBorderColor(point, index),\n\t\t\t\tborderWidth: me.getPointBorderWidth(point, index),\n\t\t\t\ttension: meta.dataset._model ? meta.dataset._model.tension : 0,\n\t\t\t\tsteppedLine: meta.dataset._model ? meta.dataset._model.steppedLine : false,\n\t\t\t\t// Tooltip\n\t\t\t\thitRadius: custom.hitRadius || helpers.getValueAtIndexOrDefault(dataset.pointHitRadius, index, pointOptions.hitRadius)\n\t\t\t};\n\t\t},\n\n\t\tcalculatePointY: function(value, index, datasetIndex) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar yScale = me.getScaleForId(meta.yAxisID);\n\t\t\tvar sumPos = 0;\n\t\t\tvar sumNeg = 0;\n\t\t\tvar i, ds, dsMeta;\n\n\t\t\tif (yScale.options.stacked) {\n\t\t\t\tfor (i = 0; i < datasetIndex; i++) {\n\t\t\t\t\tds = chart.data.datasets[i];\n\t\t\t\t\tdsMeta = chart.getDatasetMeta(i);\n\t\t\t\t\tif (dsMeta.type === 'line' && dsMeta.yAxisID === yScale.id && chart.isDatasetVisible(i)) {\n\t\t\t\t\t\tvar stackedRightValue = Number(yScale.getRightValue(ds.data[index]));\n\t\t\t\t\t\tif (stackedRightValue < 0) {\n\t\t\t\t\t\t\tsumNeg += stackedRightValue || 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsumPos += stackedRightValue || 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar rightValue = Number(yScale.getRightValue(value));\n\t\t\t\tif (rightValue < 0) {\n\t\t\t\t\treturn yScale.getPixelForValue(sumNeg + rightValue);\n\t\t\t\t}\n\t\t\t\treturn yScale.getPixelForValue(sumPos + rightValue);\n\t\t\t}\n\n\t\t\treturn yScale.getPixelForValue(value);\n\t\t},\n\n\t\tupdateBezierControlPoints: function() {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar area = me.chart.chartArea;\n\t\t\tvar points = (meta.data || []);\n\t\t\tvar i, ilen, point, model, controlPoints;\n\n\t\t\t// Only consider points that are drawn in case the spanGaps option is used\n\t\t\tif (meta.dataset._model.spanGaps) {\n\t\t\t\tpoints = points.filter(function(pt) {\n\t\t\t\t\treturn !pt._model.skip;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction capControlPoint(pt, min, max) {\n\t\t\t\treturn Math.max(Math.min(pt, max), min);\n\t\t\t}\n\n\t\t\tif (meta.dataset._model.cubicInterpolationMode === 'monotone') {\n\t\t\t\thelpers.splineCurveMonotone(points);\n\t\t\t} else {\n\t\t\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\n\t\t\t\t\tpoint = points[i];\n\t\t\t\t\tmodel = point._model;\n\t\t\t\t\tcontrolPoints = helpers.splineCurve(\n\t\t\t\t\t\thelpers.previousItem(points, i)._model,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\thelpers.nextItem(points, i)._model,\n\t\t\t\t\t\tmeta.dataset._model.tension\n\t\t\t\t\t);\n\t\t\t\t\tmodel.controlPointPreviousX = controlPoints.previous.x;\n\t\t\t\t\tmodel.controlPointPreviousY = controlPoints.previous.y;\n\t\t\t\t\tmodel.controlPointNextX = controlPoints.next.x;\n\t\t\t\t\tmodel.controlPointNextY = controlPoints.next.y;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (me.chart.options.elements.line.capBezierPoints) {\n\t\t\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\n\t\t\t\t\tmodel = points[i]._model;\n\t\t\t\t\tmodel.controlPointPreviousX = capControlPoint(model.controlPointPreviousX, area.left, area.right);\n\t\t\t\t\tmodel.controlPointPreviousY = capControlPoint(model.controlPointPreviousY, area.top, area.bottom);\n\t\t\t\t\tmodel.controlPointNextX = capControlPoint(model.controlPointNextX, area.left, area.right);\n\t\t\t\t\tmodel.controlPointNextY = capControlPoint(model.controlPointNextY, area.top, area.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdraw: function(ease) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar points = meta.data || [];\n\t\t\tvar easingDecimal = ease || 1;\n\t\t\tvar i, ilen;\n\n\t\t\t// Transition Point Locations\n\t\t\tfor (i=0, ilen=points.length; i<ilen; ++i) {\n\t\t\t\tpoints[i].transition(easingDecimal);\n\t\t\t}\n\n\t\t\t// Transition and Draw the line\n\t\t\tif (lineEnabled(me.getDataset(), me.chart.options)) {\n\t\t\t\tmeta.dataset.transition(easingDecimal).draw();\n\t\t\t}\n\n\t\t\t// Draw the points\n\t\t\tfor (i=0, ilen=points.length; i<ilen; ++i) {\n\t\t\t\tpoints[i].draw();\n\t\t\t}\n\t\t},\n\n\t\tsetHoverStyle: function(point) {\n\t\t\t// Point\n\t\t\tvar dataset = this.chart.data.datasets[point._datasetIndex];\n\t\t\tvar index = point._index;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\n\t\t\tmodel.radius = custom.hoverRadius || helpers.getValueAtIndexOrDefault(dataset.pointHoverRadius, index, this.chart.options.elements.point.hoverRadius);\n\t\t\tmodel.backgroundColor = custom.hoverBackgroundColor || helpers.getValueAtIndexOrDefault(dataset.pointHoverBackgroundColor, index, helpers.getHoverColor(model.backgroundColor));\n\t\t\tmodel.borderColor = custom.hoverBorderColor || helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderColor, index, helpers.getHoverColor(model.borderColor));\n\t\t\tmodel.borderWidth = custom.hoverBorderWidth || helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderWidth, index, model.borderWidth);\n\t\t},\n\n\t\tremoveHoverStyle: function(point) {\n\t\t\tvar me = this;\n\t\t\tvar dataset = me.chart.data.datasets[point._datasetIndex];\n\t\t\tvar index = point._index;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar model = point._model;\n\n\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\n\t\t\tif ((dataset.radius !== undefined) && (dataset.pointRadius === undefined)) {\n\t\t\t\tdataset.pointRadius = dataset.radius;\n\t\t\t}\n\n\t\t\tmodel.radius = custom.radius || helpers.getValueAtIndexOrDefault(dataset.pointRadius, index, me.chart.options.elements.point.radius);\n\t\t\tmodel.backgroundColor = me.getPointBackgroundColor(point, index);\n\t\t\tmodel.borderColor = me.getPointBorderColor(point, index);\n\t\t\tmodel.borderWidth = me.getPointBorderWidth(point, index);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.polarArea = {\n\n\t\tscale: {\n\t\t\ttype: 'radialLinear',\n\t\t\tlineArc: true, // so that lines are circular\n\t\t\tticks: {\n\t\t\t\tbeginAtZero: true\n\t\t\t}\n\t\t},\n\n\t\t// Boolean - Whether to animate the rotation of the chart\n\t\tanimation: {\n\t\t\tanimateRotate: true,\n\t\t\tanimateScale: true\n\t\t},\n\n\t\tstartAngle: -0.5 * Math.PI,\n\t\taspectRatio: 1,\n\t\tlegendCallback: function(chart) {\n\t\t\tvar text = [];\n\t\t\ttext.push('<ul class=\"' + chart.id + '-legend\">');\n\n\t\t\tvar data = chart.data;\n\t\t\tvar datasets = data.datasets;\n\t\t\tvar labels = data.labels;\n\n\t\t\tif (datasets.length) {\n\t\t\t\tfor (var i = 0; i < datasets[0].data.length; ++i) {\n\t\t\t\t\ttext.push('<li><span style=\"background-color:' + datasets[0].backgroundColor[i] + '\">');\n\t\t\t\t\tif (labels[i]) {\n\t\t\t\t\t\ttext.push(labels[i]);\n\t\t\t\t\t}\n\t\t\t\t\ttext.push('</span></li>');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttext.push('</ul>');\n\t\t\treturn text.join('');\n\t\t},\n\t\tlegend: {\n\t\t\tlabels: {\n\t\t\t\tgenerateLabels: function(chart) {\n\t\t\t\t\tvar data = chart.data;\n\t\t\t\t\tif (data.labels.length && data.datasets.length) {\n\t\t\t\t\t\treturn data.labels.map(function(label, i) {\n\t\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\n\t\t\t\t\t\t\tvar ds = data.datasets[0];\n\t\t\t\t\t\t\tvar arc = meta.data[i];\n\t\t\t\t\t\t\tvar custom = arc.custom || {};\n\t\t\t\t\t\t\tvar getValueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\n\t\t\t\t\t\t\tvar arcOpts = chart.options.elements.arc;\n\t\t\t\t\t\t\tvar fill = custom.backgroundColor ? custom.backgroundColor : getValueAtIndexOrDefault(ds.backgroundColor, i, arcOpts.backgroundColor);\n\t\t\t\t\t\t\tvar stroke = custom.borderColor ? custom.borderColor : getValueAtIndexOrDefault(ds.borderColor, i, arcOpts.borderColor);\n\t\t\t\t\t\t\tvar bw = custom.borderWidth ? custom.borderWidth : getValueAtIndexOrDefault(ds.borderWidth, i, arcOpts.borderWidth);\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttext: label,\n\t\t\t\t\t\t\t\tfillStyle: fill,\n\t\t\t\t\t\t\t\tstrokeStyle: stroke,\n\t\t\t\t\t\t\t\tlineWidth: bw,\n\t\t\t\t\t\t\t\thidden: isNaN(ds.data[i]) || meta.data[i].hidden,\n\n\t\t\t\t\t\t\t\t// Extra data used for toggling the correct item\n\t\t\t\t\t\t\t\tindex: i\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonClick: function(e, legendItem) {\n\t\t\t\tvar index = legendItem.index;\n\t\t\t\tvar chart = this.chart;\n\t\t\t\tvar i, ilen, meta;\n\n\t\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\n\t\t\t\t\tmeta = chart.getDatasetMeta(i);\n\t\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\n\t\t\t\t}\n\n\t\t\t\tchart.update();\n\t\t\t}\n\t\t},\n\n\t\t// Need to override these to give a nice default\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem, data) {\n\t\t\t\t\treturn data.labels[tooltipItem.index] + ': ' + tooltipItem.yLabel;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.controllers.polarArea = Chart.DatasetController.extend({\n\n\t\tdataElementType: Chart.elements.Arc,\n\n\t\tlinkScales: helpers.noop,\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar chartArea = chart.chartArea;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar opts = chart.options;\n\t\t\tvar arcOpts = opts.elements.arc;\n\t\t\tvar minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n\t\t\tchart.outerRadius = Math.max((minSize - arcOpts.borderWidth / 2) / 2, 0);\n\t\t\tchart.innerRadius = Math.max(opts.cutoutPercentage ? (chart.outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\n\t\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / chart.getVisibleDatasetCount();\n\n\t\t\tme.outerRadius = chart.outerRadius - (chart.radiusLength * me.index);\n\t\t\tme.innerRadius = me.outerRadius - chart.radiusLength;\n\n\t\t\tmeta.count = me.countVisibleElements();\n\n\t\t\thelpers.each(meta.data, function(arc, index) {\n\t\t\t\tme.updateElement(arc, index, reset);\n\t\t\t});\n\t\t},\n\n\t\tupdateElement: function(arc, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar opts = chart.options;\n\t\t\tvar animationOpts = opts.animation;\n\t\t\tvar scale = chart.scale;\n\t\t\tvar getValueAtIndexOrDefault = helpers.getValueAtIndexOrDefault;\n\t\t\tvar labels = chart.data.labels;\n\n\t\t\tvar circumference = me.calculateCircumference(dataset.data[index]);\n\t\t\tvar centerX = scale.xCenter;\n\t\t\tvar centerY = scale.yCenter;\n\n\t\t\t// If there is NaN data before us, we need to calculate the starting angle correctly.\n\t\t\t// We could be way more efficient here, but its unlikely that the polar area chart will have a lot of data\n\t\t\tvar visibleCount = 0;\n\t\t\tvar meta = me.getMeta();\n\t\t\tfor (var i = 0; i < index; ++i) {\n\t\t\t\tif (!isNaN(dataset.data[i]) && !meta.data[i].hidden) {\n\t\t\t\t\t++visibleCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// var negHalfPI = -0.5 * Math.PI;\n\t\t\tvar datasetStartAngle = opts.startAngle;\n\t\t\tvar distance = arc.hidden ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\n\t\t\tvar startAngle = datasetStartAngle + (circumference * visibleCount);\n\t\t\tvar endAngle = startAngle + (arc.hidden ? 0 : circumference);\n\n\t\t\tvar resetRadius = animationOpts.animateScale ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\n\n\t\t\thelpers.extend(arc, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\t\t\t\t_scale: scale,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: centerX,\n\t\t\t\t\ty: centerY,\n\t\t\t\t\tinnerRadius: 0,\n\t\t\t\t\touterRadius: reset ? resetRadius : distance,\n\t\t\t\t\tstartAngle: reset && animationOpts.animateRotate ? datasetStartAngle : startAngle,\n\t\t\t\t\tendAngle: reset && animationOpts.animateRotate ? datasetStartAngle : endAngle,\n\t\t\t\t\tlabel: getValueAtIndexOrDefault(labels, index, labels[index])\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Apply border and fill style\n\t\t\tme.removeHoverStyle(arc);\n\n\t\t\tarc.pivot();\n\t\t},\n\n\t\tremoveHoverStyle: function(arc) {\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(this, arc, this.chart.options.elements.arc);\n\t\t},\n\n\t\tcountVisibleElements: function() {\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar meta = this.getMeta();\n\t\t\tvar count = 0;\n\n\t\t\thelpers.each(meta.data, function(element, index) {\n\t\t\t\tif (!isNaN(dataset.data[index]) && !element.hidden) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn count;\n\t\t},\n\n\t\tcalculateCircumference: function(value) {\n\t\t\tvar count = this.getMeta().count;\n\t\t\tif (count > 0 && !isNaN(value)) {\n\t\t\t\treturn (2 * Math.PI) / count;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar helpers = Chart.helpers;\n\n\tChart.defaults.radar = {\n\t\tscale: {\n\t\t\ttype: 'radialLinear'\n\t\t},\n\t\telements: {\n\t\t\tline: {\n\t\t\t\ttension: 0 // no bezier in radar\n\t\t\t}\n\t\t}\n\t};\n\n\tChart.controllers.radar = Chart.DatasetController.extend({\n\n\t\tdatasetElementType: Chart.elements.Line,\n\n\t\tdataElementType: Chart.elements.Point,\n\n\t\tlinkScales: helpers.noop,\n\n\t\taddElementAndReset: function(index) {\n\t\t\tChart.DatasetController.prototype.addElementAndReset.call(this, index);\n\n\t\t\t// Make sure bezier control points are updated\n\t\t\tthis.updateBezierControlPoints();\n\t\t},\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar line = meta.dataset;\n\t\t\tvar points = meta.data;\n\t\t\tvar custom = line.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar lineElementOptions = me.chart.options.elements.line;\n\t\t\tvar scale = me.chart.scale;\n\n\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\n\t\t\tif ((dataset.tension !== undefined) && (dataset.lineTension === undefined)) {\n\t\t\t\tdataset.lineTension = dataset.tension;\n\t\t\t}\n\n\t\t\thelpers.extend(meta.dataset, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t// Data\n\t\t\t\t_children: points,\n\t\t\t\t_loop: true,\n\t\t\t\t// Model\n\t\t\t\t_model: {\n\t\t\t\t\t// Appearance\n\t\t\t\t\ttension: custom.tension ? custom.tension : helpers.getValueOrDefault(dataset.lineTension, lineElementOptions.tension),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : (dataset.backgroundColor || lineElementOptions.backgroundColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : (dataset.borderWidth || lineElementOptions.borderWidth),\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : (dataset.borderColor || lineElementOptions.borderColor),\n\t\t\t\t\tfill: custom.fill ? custom.fill : (dataset.fill !== undefined ? dataset.fill : lineElementOptions.fill),\n\t\t\t\t\tborderCapStyle: custom.borderCapStyle ? custom.borderCapStyle : (dataset.borderCapStyle || lineElementOptions.borderCapStyle),\n\t\t\t\t\tborderDash: custom.borderDash ? custom.borderDash : (dataset.borderDash || lineElementOptions.borderDash),\n\t\t\t\t\tborderDashOffset: custom.borderDashOffset ? custom.borderDashOffset : (dataset.borderDashOffset || lineElementOptions.borderDashOffset),\n\t\t\t\t\tborderJoinStyle: custom.borderJoinStyle ? custom.borderJoinStyle : (dataset.borderJoinStyle || lineElementOptions.borderJoinStyle),\n\n\t\t\t\t\t// Scale\n\t\t\t\t\tscaleTop: scale.top,\n\t\t\t\t\tscaleBottom: scale.bottom,\n\t\t\t\t\tscaleZero: scale.getBasePosition()\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmeta.dataset.pivot();\n\n\t\t\t// Update Points\n\t\t\thelpers.each(points, function(point, index) {\n\t\t\t\tme.updateElement(point, index, reset);\n\t\t\t}, me);\n\n\n\t\t\t// Update bezier control points\n\t\t\tme.updateBezierControlPoints();\n\t\t},\n\t\tupdateElement: function(point, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar scale = me.chart.scale;\n\t\t\tvar pointElementOptions = me.chart.options.elements.point;\n\t\t\tvar pointPosition = scale.getPointPositionForValue(index, dataset.data[index]);\n\n\t\t\thelpers.extend(point, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\t\t\t\t_scale: scale,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: reset ? scale.xCenter : pointPosition.x, // value not used in dataset scale, but we want a consistent API between scales\n\t\t\t\t\ty: reset ? scale.yCenter : pointPosition.y,\n\n\t\t\t\t\t// Appearance\n\t\t\t\t\ttension: custom.tension ? custom.tension : helpers.getValueOrDefault(dataset.tension, me.chart.options.elements.line.tension),\n\t\t\t\t\tradius: custom.radius ? custom.radius : helpers.getValueAtIndexOrDefault(dataset.pointRadius, index, pointElementOptions.radius),\n\t\t\t\t\tbackgroundColor: custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor, index, pointElementOptions.backgroundColor),\n\t\t\t\t\tborderColor: custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.pointBorderColor, index, pointElementOptions.borderColor),\n\t\t\t\t\tborderWidth: custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth, index, pointElementOptions.borderWidth),\n\t\t\t\t\tpointStyle: custom.pointStyle ? custom.pointStyle : helpers.getValueAtIndexOrDefault(dataset.pointStyle, index, pointElementOptions.pointStyle),\n\n\t\t\t\t\t// Tooltip\n\t\t\t\t\thitRadius: custom.hitRadius ? custom.hitRadius : helpers.getValueAtIndexOrDefault(dataset.hitRadius, index, pointElementOptions.hitRadius)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tpoint._model.skip = custom.skip ? custom.skip : (isNaN(point._model.x) || isNaN(point._model.y));\n\t\t},\n\t\tupdateBezierControlPoints: function() {\n\t\t\tvar chartArea = this.chart.chartArea;\n\t\t\tvar meta = this.getMeta();\n\n\t\t\thelpers.each(meta.data, function(point, index) {\n\t\t\t\tvar model = point._model;\n\t\t\t\tvar controlPoints = helpers.splineCurve(\n\t\t\t\t\thelpers.previousItem(meta.data, index, true)._model,\n\t\t\t\t\tmodel,\n\t\t\t\t\thelpers.nextItem(meta.data, index, true)._model,\n\t\t\t\t\tmodel.tension\n\t\t\t\t);\n\n\t\t\t\t// Prevent the bezier going outside of the bounds of the graph\n\t\t\t\tmodel.controlPointPreviousX = Math.max(Math.min(controlPoints.previous.x, chartArea.right), chartArea.left);\n\t\t\t\tmodel.controlPointPreviousY = Math.max(Math.min(controlPoints.previous.y, chartArea.bottom), chartArea.top);\n\n\t\t\t\tmodel.controlPointNextX = Math.max(Math.min(controlPoints.next.x, chartArea.right), chartArea.left);\n\t\t\t\tmodel.controlPointNextY = Math.max(Math.min(controlPoints.next.y, chartArea.bottom), chartArea.top);\n\n\t\t\t\t// Now pivot the point for animation\n\t\t\t\tpoint.pivot();\n\t\t\t});\n\t\t},\n\n\t\tdraw: function(ease) {\n\t\t\tvar meta = this.getMeta();\n\t\t\tvar easingDecimal = ease || 1;\n\n\t\t\t// Transition Point Locations\n\t\t\thelpers.each(meta.data, function(point) {\n\t\t\t\tpoint.transition(easingDecimal);\n\t\t\t});\n\n\t\t\t// Transition and Draw the line\n\t\t\tmeta.dataset.transition(easingDecimal).draw();\n\n\t\t\t// Draw the points\n\t\t\thelpers.each(meta.data, function(point) {\n\t\t\t\tpoint.draw();\n\t\t\t});\n\t\t},\n\n\t\tsetHoverStyle: function(point) {\n\t\t\t// Point\n\t\t\tvar dataset = this.chart.data.datasets[point._datasetIndex];\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar index = point._index;\n\t\t\tvar model = point._model;\n\n\t\t\tmodel.radius = custom.hoverRadius ? custom.hoverRadius : helpers.getValueAtIndexOrDefault(dataset.pointHoverRadius, index, this.chart.options.elements.point.hoverRadius);\n\t\t\tmodel.backgroundColor = custom.hoverBackgroundColor ? custom.hoverBackgroundColor : helpers.getValueAtIndexOrDefault(dataset.pointHoverBackgroundColor, index, helpers.getHoverColor(model.backgroundColor));\n\t\t\tmodel.borderColor = custom.hoverBorderColor ? custom.hoverBorderColor : helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderColor, index, helpers.getHoverColor(model.borderColor));\n\t\t\tmodel.borderWidth = custom.hoverBorderWidth ? custom.hoverBorderWidth : helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderWidth, index, model.borderWidth);\n\t\t},\n\n\t\tremoveHoverStyle: function(point) {\n\t\t\tvar dataset = this.chart.data.datasets[point._datasetIndex];\n\t\t\tvar custom = point.custom || {};\n\t\t\tvar index = point._index;\n\t\t\tvar model = point._model;\n\t\t\tvar pointElementOptions = this.chart.options.elements.point;\n\n\t\t\tmodel.radius = custom.radius ? custom.radius : helpers.getValueAtIndexOrDefault(dataset.radius, index, pointElementOptions.radius);\n\t\t\tmodel.backgroundColor = custom.backgroundColor ? custom.backgroundColor : helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor, index, pointElementOptions.backgroundColor);\n\t\t\tmodel.borderColor = custom.borderColor ? custom.borderColor : helpers.getValueAtIndexOrDefault(dataset.pointBorderColor, index, pointElementOptions.borderColor);\n\t\t\tmodel.borderWidth = custom.borderWidth ? custom.borderWidth : helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth, index, pointElementOptions.borderWidth);\n\t\t}\n\t});\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Bar = function(context, config) {\n\t\tconfig.type = 'bar';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Bubble = function(context, config) {\n\t\tconfig.type = 'bubble';\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Doughnut = function(context, config) {\n\t\tconfig.type = 'doughnut';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Line = function(context, config) {\n\t\tconfig.type = 'line';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.PolarArea = function(context, config) {\n\t\tconfig.type = 'polarArea';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tChart.Radar = function(context, config) {\n\t\tconfig.options = Chart.helpers.configMerge({aspectRatio: 1}, config.options);\n\t\tconfig.type = 'radar';\n\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","'use strict';\n\nmodule.exports = function(Chart) {\n\n\tvar defaultConfig = {\n\t\thover: {\n\t\t\tmode: 'single'\n\t\t},\n\n\t\tscales: {\n\t\t\txAxes: [{\n\t\t\t\ttype: 'linear', // scatter should not use a category axis\n\t\t\t\tposition: 'bottom',\n\t\t\t\tid: 'x-axis-1' // need an ID so datasets can reference the scale\n\t\t\t}],\n\t\t\tyAxes: [{\n\t\t\t\ttype: 'linear',\n\t\t\t\tposition: 'left',\n\t\t\t\tid: 'y-axis-1'\n\t\t\t}]\n\t\t},\n\n\t\ttooltips: {\n\t\t\tcallbacks: {\n\t\t\t\ttitle: function() {\n\t\t\t\t\t// Title doesn't make sense for scatter since we format the data as a point\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tlabel: function(tooltipItem) {\n\t\t\t\t\treturn '(' + tooltipItem.xLabel + ', ' + tooltipItem.yLabel + ')';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t// Register the default config for this type\n\tChart.defaults.scatter = defaultConfig;\n\n\t// Scatter charts use line controllers\n\tChart.controllers.scatter = Chart.controllers.line;\n\n\tChart.Scatter = function(context, config) {\n\t\tconfig.type = 'scatter';\n\t\treturn new Chart(context, config);\n\t};\n\n};\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nmodule.exports = keyBy;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  operations: PropTypes.array.isRequired,\n  translateOperations: PropTypes.func.isRequired\n};\n\nclass OpMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'op');\n    this.props.onMenuItemClick(operation);\n  }\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  render() {\n    const { operations, translateOperations } = this.props;\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle fa fa-ellipsis-v\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <DropdownMenu className=\"my-1 mr-2\">\n          {operations.map((item, index )=> {\n            return (<DropdownItem key={index} data-op={item} onClick={this.onMenuItemClick}>{translateOperations(item)}</DropdownItem>);\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nOpMenu.propTypes = propTypes;\n\nexport default OpMenu;\n"],"sourceRoot":""}