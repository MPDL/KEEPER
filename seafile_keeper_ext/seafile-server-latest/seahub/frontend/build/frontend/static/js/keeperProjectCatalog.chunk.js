(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[12],{1769:function(e,t,a){a(48),e.exports=a(1790)},1770:function(e,t,a){},1790:function(e,t,a){"use strict";a.r(t);var c=a(85),r=a(234),s=a(28),n=a(6),i=a(7),o=a(9),l=a(8),h=a(2),d=a.n(h),g=a(4),j=a(20),m=a.n(j),p=a(15),u=a(5),b=a(1),O=a(10),f=a(14),x=a(31),v=a(46),k=a(47),C=a(0),F=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var c;Object(n.a)(this,a),(c=t.call(this,e)).getTerms=function(){var e=c.state.termsChecked,t=c.props.values.termEntries,a=Object.keys(t).sort((function(e,a){var c=t[e].length,r=t[a].length;return c==r?e.localeCompare(a):r-c}));return a.length>0&&e.length>0&&(a=a.filter((function(t){return!e.includes(t)}))),a},c.toggle=function(){c.props.toggleDialog()},c.setOrder=function(e){c.setState({order:e.target.value,isSubmitBtnActive:!0})},c.inputSearchTerm=function(e){c.setState({searchTerm:e.target.value})},c.handleCheckboxChange=function(e){var t=e.target.name;-1==c.state.termsChecked.indexOf(t)?c.addToTermsChecked(t):c.addToTerms(t),c.setState({isSubmitBtnActive:!0,searchTerm:""})},c.handleApply=function(){c.props.applyFacet(c.props.name,c.state.termsChecked,c.state.order),c.toggle()},c.handleCleanAll=function(){c.props.applyFacet(c.props.name,[],"asc"),c.toggle()},c.isTermInScope=function(e){var t=c.props.catalogScope||[];return 0==t.length||c.props.values.termEntries[e].some((function(e){return t.includes(e)}))},c.getTermFragment=function(e,t){var a=c.props.values.termEntries;return Object(C.jsx)(h.Fragment,{children:Object(C.jsx)(g.n,{className:"ml-5 mb-0",children:Object(C.jsxs)(g.t,{children:[Object(C.jsx)(g.p,{type:"checkbox",name:e,checked:c.isChecked(e),onChange:c.handleCheckboxChange}),e+" ("+a[e].length+")"]})})},"".concat(e,"~").concat(t))},c.getOrderFragment=function(e,t){return Object(C.jsx)(g.n,{check:!0,children:Object(C.jsxs)(g.t,{check:!0,children:[Object(C.jsx)(g.p,{type:"radio",name:"order",value:e,checked:c.state.order==e,onChange:c.setOrder,className:"mr-1"}),Object(b.nb)(t)]})})};var r=c.props.values;return c.state={errorMsg:"",searchTerm:"",isSubmitBtnActive:!1,order:r.order||"asc",termsChecked:Object(k.a)(r.termsChecked)||[]},c.state.terms=c.getTerms(),c}return Object(i.a)(a,[{key:"addToTermsChecked",value:function(e){var t=this;this.state.termsChecked.unshift(e),this.setState({termsChecked:this.state.termsChecked},(function(){t.setState({terms:t.getTerms()})}))}},{key:"addToTerms",value:function(e){var t=this,a=this.state.termsChecked;a=a.filter((function(t){return t!==e})),this.setState({termsChecked:a},(function(){t.setState({terms:t.getTerms()})}))}},{key:"isChecked",value:function(e){return-1!=this.state.termsChecked.indexOf(e)}},{key:"render",value:function(){var e=this,t=this.props,a=(t.dialogTitle,t.name),c=t.hasCatalogSearchTerm,r=this.state,s=r.errorMsg,n=r.searchTerm,i=r.termsChecked,o=r.terms,l=r.isSubmitBtnActive,h=c?o.filter((function(t){return e.isTermInScope(t)})):o;return Object(C.jsxs)(g.u,{isOpen:!0,toggle:this.toggle,children:[Object(C.jsx)(g.x,{toggle:this.toggle,children:Object(b.nb)("Select "+a.charAt(0).toUpperCase()+a.slice(1)+"(s)")}),Object(C.jsxs)(g.v,{children:[Object(C.jsxs)(g.m,{children:[this.getOrderFragment("asc","Ascending"),this.getOrderFragment("desc","Descending"),Object(C.jsx)(g.n,{className:"mt-3",children:Object(C.jsx)(g.p,{style:{width:"60%",height:"60%"},placeholder:Object(b.nb)("Search"),value:n,onChange:this.inputSearchTerm})}),i.map((function(t,a){return e.getTermFragment(t,a)})),h.filter((function(e){return"undefined"===typeof n||null===n||e&&e.toLowerCase().includes(n.toLowerCase())})).map((function(t,a){return a+i.length<30&&e.getTermFragment(t,a)})),h.length+i.length>=30&&Object(C.jsx)("div",{className:"ml-1",children:"..."})]}),s&&Object(C.jsx)(g.a,{color:"danger",children:s})]}),Object(C.jsxs)(g.w,{children:[Object(C.jsx)(g.c,{color:"primary",className:"w-9",onClick:this.handleApply,disabled:!l,children:Object(b.nb)("Apply")}),Object(C.jsx)(g.c,{className:"ml-4",color:"primary",onClick:this.handleCleanAll,children:Object(b.nb)("Reset")}),Object(C.jsx)(g.c,{className:"ml-4",color:"secondary",onClick:this.toggle,children:Object(b.nb)("Cancel")})]})]})}}]),a}(d.a.Component),y=(a(99),a(112),a(1770),window.app.pageOptions),S=(y.repoID,y.repoName,y.userPerm,{order:"asc",termEntries:{},termsChecked:[]}),D=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).doResetFacets=function(){i.state.facets={author:Object(s.a)({},S),year:Object(s.a)({},S),institute:Object(s.a)({},S),director:Object(s.a)({},S)}},i.calculateScopeFromFacets=function(){for(var e=i.state.facets,t=new Set,a=0,c=Object.keys(e);a<c.length;a++){var s=e[c[a]];if("termsChecked"in s&&s.termsChecked.length>0){var n,o=Object(r.a)(s.termsChecked);try{for(o.s();!(n=o.n()).done;){var l,h=n.value,d=Object(r.a)(s.termEntries[h]);try{for(d.s();!(l=d.n()).done;){var g=l.value;t.add(g)}}catch(j){d.e(j)}finally{d.f()}}}catch(j){o.e(j)}finally{o.f()}}}return Array.from(t)},i.updateFacets=function(e,t){for(var a={},c=0,r=Object.keys(e);c<r.length;c++){var n=r[c],o=i.state.facets[n].termEntries;a[n]=Object(s.a)(Object(s.a)({},i.state.facets[n]),{},{termEntries:0==Object.keys(o).length?e[n].termEntries:o,termsChecked:e[n].termsChecked})}return a},i.getItems=function(e,t){i.setHasTermsChecked();var a=i.state,c=i.state.facets,r=t?[]:i.calculateScopeFromFacets();O.a.getProjectCatalog(e,a.perPage,c.author,c.year,c.institute,c.director,r,a.searchTerm).then((function(t){var a=t.data;i.setState({isLoading:!1,currentPage:e,items:a.items,hasNextPage:a.more,catalogScope:a.scope,facets:i.updateFacets(a.facets),isAccessDenied:"is_access_denied"in a&&a.is_access_denied})})).catch((function(e){i.setState({isLoading:!1,errorMsg:u.a.getErrorMsg(e,!0)})}))},i.resetPerPage=function(e){i.setState({perPage:e},(function(){i.getItems(1,!1)}))},i._chk=function(e){return e&&"termsChecked"in e&&e.termsChecked.length>0},i.setHasTermsChecked=function(){var e=i.state.facets;i.setState({hasTermsChecked:i._chk(e.author)||i._chk(e.year)||i._chk(e.director)||i._chk(e.institute)})},i.applyFacet=function(e,t,a){i.setState({facets:Object(s.a)(Object(s.a)({},i.state.facets),{},Object(c.a)({},e,Object(s.a)(Object(s.a)({},i.state.facets[e]),{},{termsChecked:t,order:a})))},(function(){i.getItems(1,t&&0==t.length)}))},i.cleanAllFacets=function(){i.doResetFacets(),i.getItems(1,!0)},i.onSearchedClick=function(e){if(!0===e.is_dir){var t=b.mc+"library/"+e.repo_id+"/"+e.repo_name+e.path;Object(p.c)(t,{repalce:!0})}else{var a=b.mc+"lib/"+e.repo_id+"/file"+u.a.encodePath(e.path);window.open("about:blank").location.href=a}},i.toggleAuthorFacetDialog=function(){i.setState({isAuthorFacetDialogOpen:!i.state.isAuthorFacetDialogOpen})},i.toggleYearFacetDialog=function(){i.setState({isYearFacetDialogOpen:!i.state.isYearFacetDialogOpen})},i.toggleInstituteFacetDialog=function(){i.setState({isInstituteFacetDialogOpen:!i.state.isInstituteFacetDialogOpen})},i.toggleDirectorFacetDialog=function(){i.setState({isDirectorFacetDialogOpen:!i.state.isDirectorFacetDialogOpen})},i.inputSearchTerm=function(e){i.setState({searchTerm:e.target.value},(function(){i.getItems(1,!0)}))},i.getFacetFragment=function(e){var t=i.state.facets[e];return Object(C.jsxs)(h.Fragment,{children:[Object(C.jsx)("a",{href:"#",style:{color:"#575859",fontWeight:"lighter"},children:Object(b.nb)(e.charAt(0).toUpperCase()+e.slice(1))}),t.termsChecked.length>0&&Object(C.jsx)("i",{className:"ml-1 fa fa-arrow-"+("desc"==t.order?"up":"down")}),Object(C.jsx)("ul",{children:t.termsChecked.map((function(e,a){return e in t.termEntries&&Object(C.jsx)(h.Fragment,{children:Object(C.jsx)("li",{className:"ml-5 mb-0",children:e+(e in t.termEntries?" ("+t.termEntries[e].length+")":"")})},"".concat(e,"~").concat(a))}))})]})},i.state={isLoading:!0,errorMsg:"",currentPage:1,perPage:25,hasNextPage:!1,items:[],catalogScope:[],searchTerm:"",isAuthorFacetDialogOpen:!1,isYearFacetDialogOpen:!1,isInstituteFacetDialogOpen:!1,isDirectorFacetDialogOpen:!1,hasTermsChecked:!1},i.doResetFacets(),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,c=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||c)},(function(){e.getItems(e.state.currentPage,!0)}));var s=document.createElement("script");s.src="https://static.zdassets.com/ekr/snippet.js?key=32977f9b-455d-428b-8dd5-f4c65aad0daa",s.id="ze-snippet",s.async=!0,document.body.appendChild(s)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isAuthorFacetDialogOpen,c=t.isYearFacetDialogOpen,r=t.isInstituteFacetDialogOpen,s=t.isDirectorFacetDialogOpen,n=t.facets,i=t.searchTerm,o=Boolean(i&&""!=i.trim());return Object(C.jsxs)(h.Fragment,{children:[Object(C.jsxs)("div",{className:"h-100 d-flex flex-column",children:[Object(C.jsxs)("div",{className:"top-header d-flex justify-content-between",children:[Object(C.jsx)("a",{href:b.mc,children:Object(C.jsx)("img",{src:b.Lb+b.Gb,height:b.Fb,width:b.Hb,title:b.nc,alt:"logo"})}),Object(C.jsx)(v.a,{onSearchedClick:this.onSearchedClick})]}),Object(C.jsx)("div",{className:"flex-auto container-fluid pt-4 pb-6 o-auto",children:Object(C.jsx)("div",{className:"row",children:this.state.isAccessDenied?Object(C.jsx)("h3",{className:"offset-md-2 col-md-8 mt-9 text-center error",children:Object(b.nb)("Sie sind leider nicht berechtigt den Projektkatalog zu \xf6ffnen. Bitte wenden Sie sich an den Keeper Support.")}):Object(C.jsxs)("div",{className:"col-md-8 offset-md-2",children:[Object(C.jsx)("h3",{className:"d-flex offset-md-3",id:"header",children:Object(b.nb)("The KEEPER Project Catalog of the Max Planck Society")}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{id:"facet",className:"col-md-3",children:[Object(C.jsxs)("h3",{style:{color:"#57a5b8",fontSize:"1.75em",fontWeight:500},children:[Object(b.nb)("Show Projects")," (",this.state.catalogScope.length,")"]}),Object(C.jsx)("div",{onClick:this.toggleAuthorFacetDialog,children:this.getFacetFragment("author")}),Object(C.jsx)("div",{onClick:this.toggleYearFacetDialog,children:this.getFacetFragment("year")}),Object(C.jsx)("div",{onClick:this.toggleInstituteFacetDialog,children:this.getFacetFragment("institute")}),Object(C.jsx)("div",{onClick:this.toggleDirectorFacetDialog,children:this.getFacetFragment("director")}),this.state.hasTermsChecked&&Object(C.jsx)("div",{className:"mt-1",children:Object(C.jsx)("a",{href:"#",onClick:this.cleanAllFacets,children:Object(b.nb)("Reset all")})})]}),Object(C.jsxs)("div",{className:"col-md-9",children:[Object(C.jsx)(g.m,{children:Object(C.jsx)(g.n,{children:Object(C.jsx)(g.p,{type:"search",style:{height:"60%"},placeholder:Object(b.nb)("Search")+"...",value:this.state.searchTerm,onChange:this.inputSearchTerm})})}),Object(C.jsx)(T,{isLoading:this.state.isLoading,errorMsg:this.state.errorMsg,items:this.state.items})]})]}),Object(C.jsx)("div",{className:"row justify-content-center",children:Object(C.jsx)(x.a,{gotoPreviousPage:function(){e.getItems(e.state.currentPage-1,!1)},gotoNextPage:function(){e.getItems(e.state.currentPage+1,!1)},currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage})}),Object(C.jsx)(w,{})]})})})]}),a&&Object(C.jsx)(F,{name:"author",values:n.author,hasCatalogSearchTerm:o,catalogScope:this.state.catalogScope,toggleDialog:this.toggleAuthorFacetDialog,applyFacet:this.applyFacet}),c&&Object(C.jsx)(F,{name:"year",values:n.year,hasCatalogSearchTerm:o,catalogScope:this.state.catalogScope,toggleDialog:this.toggleYearFacetDialog,applyFacet:this.applyFacet}),r&&Object(C.jsx)(F,{name:"institute",values:n.institute,hasCatalogSearchTerm:o,catalogScope:this.state.catalogScope,toggleDialog:this.toggleInstituteFacetDialog,applyFacet:this.applyFacet}),s&&Object(C.jsx)(F,{name:"director",values:n.director,hasCatalogSearchTerm:o,catalogScope:this.state.catalogScope,toggleDialog:this.toggleDirectorFacetDialog,applyFacet:this.applyFacet})]})}}]),a}(d.a.Component),T=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.errorMsg,c=e.items;return t?Object(C.jsx)(f.a,{}):a?Object(C.jsx)("p",{className:"error mt-6 text-center",children:a}):Object(C.jsx)(h.Fragment,{children:c.map((function(e,t){return Object(C.jsx)(P,{item:e},t)}))})}}]),a}(d.a.Component),P=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var c;return Object(n.a)(this,a),(c=t.call(this,e)).toggleDescription=function(){c.setState({descExpanded:!c.state.descExpanded})},c.toTitleCase=function(e){return e.replace(/([^\W_]+[^\s-]*) */g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},c.getAuthors=function(e){var t=[];if("authors"in e&&e.authors.length>0)for(var a=e.authors,r=0;r<a.length;r++){for(var s="",n=c.toTitleCase(a[r].name).split(", "),i=0;i<n.length;i++)0==i&&n[i].trim().length?s+=n[i]+", ":n[i].trim().length>1&&(s+=n[i].trim().charAt(0)+"., ");if(s=s.trim().slice(0,-1),r>=5&&(s="et al."),t.push(s),r>=5)break;"affs"in a[r]&&t.push(c.toTitleCase(a[r].affs.join(", ")))}return t.join("; ")},c.getDirectors=function(e){var t=e.split("|").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));return t.length>0?t.join("; "):null},c.instituteFragment=function(e){var t=e.split(";").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));if(t&&t.length&&t.length>0){t.length>=3&&c.getDirectors(t[2]);return Object(C.jsxs)(h.Fragment,{children:[t[0]&&Object(C.jsx)("p",{children:Object(b.nb)("Institute")+": "+t[0]}),t[1]&&Object(C.jsx)("p",{children:Object(b.nb)("Department")+": "+t[1]})]})}},c.state={descExpanded:!1},c}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.item,t=e.description&&e.description.length>500;return Object(C.jsx)(h.Fragment,{children:Object(C.jsx)("div",{className:"item-block",id:e.repo_id,children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-1",children:e.is_certified&&Object(C.jsx)("img",{src:"/media/custom/certified.png"})}),Object(C.jsxs)("div",{className:"col-md-11",children:[Object(C.jsx)("h3",{children:e.landing_page_url?Object(C.jsx)("a",{href:"/landing-page/libs/"+e.repo_id+"/",children:e.title}):e.title||Object(b.nb)("Project archive no.")+": "+e.catalog_id}),e.description&&Object(C.jsxs)("p",{children:[t?this.state.descExpanded?e.description:e.description.substring(0,496)+"...":e.description,t&&Object(C.jsx)("i",{onClick:this.toggleDescription,className:"keeper-icon-triangle-"+(this.state.descExpanded?"up":"down")})]}),e.authors&&Object(C.jsx)("p",{children:this.getAuthors(e)}),e.year&&Object(C.jsx)("p",{children:Object(b.nb)("Year")+": "+e.year}),e.institute&&this.instituteFragment(e.institute),e.owner&&Object(C.jsx)("p",{children:Object(b.nb)("Contact")+": "+e.owner.toLowerCase()}),e.landing_page_url&&Object(C.jsx)("p",{children:Object(C.jsx)("a",{href:"/landing-page/libs/"+e.repo_id+"/",children:Object(b.nb)("Landing Page")})})]})]})})})}}]),a}(d.a.Component),w=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(C.jsx)(h.Fragment,{children:Object(C.jsx)("div",{id:"lg_footer",children:Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{id:"keeper-links",className:"row",children:[Object(C.jsxs)("div",{className:"col-md-3",children:[Object(C.jsx)("h4",{children:"Be informed"}),Object(C.jsx)("a",{href:"https://keeper.mpdl.mpg.de/f/d17ecbb967/",target:"_blank",children:"About Keeper"}),Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"https://keeper.mpdl.mpg.de/f/1b0bfceac2/",target:"_blank",children:"Cared Data Commitment"}),Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"/project-catalog",target:"_blank",children:"Project Catalog"}),Object(C.jsx)("br",{})]}),Object(C.jsxs)("div",{className:"col-md-3",children:[Object(C.jsx)("h4",{children:"Get the desktop sync client"}),Object(C.jsx)("a",{href:"/download_client_program/",target:"_blank",children:"Download the Keeper client for Windows, Linux and Mac"})]}),Object(C.jsxs)("div",{className:"col-md-3",children:[Object(C.jsx)("h4",{children:"Find help"}),Object(C.jsx)("a",{href:"mailto:keeper@mpdl.mpg.de",children:"Contact Keeper Support"})," ",Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"https://mpdl.zendesk.com/hc/en-us/categories/360001234340-Keeper",target:"_blank",children:"Help / Knowledge Base"})]}),Object(C.jsxs)("div",{className:"col-md-3",children:[Object(C.jsx)("h4",{children:"Check terms"}),Object(C.jsx)("a",{href:"https://keeper.mpdl.mpg.de/f/f62758e53c/",target:"_blank",children:"Terms of Services"})," ",Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"https://keeper.mpdl.mpg.de/f/17e4e9d648/",target:"_blank",children:"Disclaimer"}),Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"https://keeper.mpdl.mpg.de/f/bf2c8a977f70428587eb/",target:"_blank",children:"Privacy Policy"})]})]}),Object(C.jsx)("div",{id:"seafile-credits",className:"row",children:Object(C.jsx)("div",{className:"col-md-12 text-center",children:Object(C.jsx)("div",{children:Object(C.jsxs)("a",{href:"https://www.seafile.com/en/home/",target:"_blank",children:["The software behind Keeper"," ",Object(C.jsx)("img",{id:"seafile-logo",src:"/media/custom/seafile_logo_footer.png",height:"35"}),"\xa9 2023 Seafile"]})})})})]})})})}}]),a}(d.a.Component);m.a.render(Object(C.jsx)(D,{}),document.getElementById("wrapper"))}},[[1769,1,0]]]);
//# sourceMappingURL=keeperProjectCatalog.chunk.js.map