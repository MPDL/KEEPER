{"version":3,"sources":["components/user-settings/side-nav.js","components/user-settings/user-avatar-form.js","components/user-settings/user-basic-info-form.js","components/user-settings/web-api-auth-token.js","components/dialog/update-webdav-password.js","components/user-settings/webdav-password.js","components/user-settings/language-setting.js","components/user-settings/list-in-address-book.js","components/user-settings/email-notice.js","components/user-settings/two-factor-auth.js","components/dialog/confirm-disconnect-wechat.js","components/user-settings/social-login.js","components/dialog/confirm-disconnect-dingtalk.js","components/user-settings/social-login-dingtalk.js","components/dialog/confirm-delete-account.js","components/user-settings/delete-account.js","settings.js"],"names":["SideNav","_React$Component","_inherits","_super","_createSuper","props","_classCallCheck","call","_createClass","key","value","_this","_jsx","className","children","this","data","map","item","index","show","concat","curItemID","href","substr","text","React","Component","_window$app$pageOptio","window","app","pageOptions","avatarURL","csrfToken","UserAvatarForm","fileInputChange","fileInput","current","files","length","file","fileName","name","lastIndexOf","toaster","danger","gettext","duration","fileExt","toLowerCase","allowedExt","indexOf","errorMsg","replace","join","size","seafileAPI","updateUserAvatar","then","res","setState","avatarSrc","avatar_url","success","catch","error","Utils","getErrorMsg","openFileInput","click","handleMouseOver","isEditShown","handleMouseOut","onEditIconKeyDown","e","target","createRef","form","state","_jsxs","ref","encType","method","action","siteRoot","type","onMouseOver","onMouseOut","onFocus","tabIndex","src","width","height","alt","onChange","onClick","role","onKeyDown","nameLabel","enableUpdateUserInfo","enableUserSetContactEmail","UserBasicInfoForm","handleNameInputChange","handleContactEmailInputChange","contactEmail","handleSubmit","preventDefault","contact_email","updateUserInfo","_this$props$userInfo","userInfo","login_id","loginID","_this$state","onSubmit","htmlFor","id","disabled","readOnly","WebAPIAuthToken","getAuthToken","getAuthTokenBySession","authToken","token","errMessage","createAuthToken","createAuthTokenBySession","isAuthTokenVisible","deleteAuthToken","deleteAuthTokenBySession","toggleAuthTokenVisible","onIconKeyDown","Fragment","Math","max","webdavSecretMinLength","webdavSecretStrengthLevel","UpdateWebdavPassword","_Component","submit","password","errMsg","getStrengthLevel","btnDisabled","updatePassword","trim","handleInputChange","togglePasswordVisible","isPasswordVisible","generatePassword","randomPassword","toggle","passwordTip","Modal","centered","isOpen","ModalHeader","ModalBody","InputGroup","Input","autoComplete","InputGroupAddon","addonType","Button","Alert","color","ModalFooter","webdavPasswd","WebdavPassword","updateWebdavSecret","toggleDialog","isDialogOpen","ModalPortal","currentLang","langList","LanguageSetting","onSelectChange","selectedItem","location","options","langCode","label","langName","Select","defaultValue","ListInAddressBook","checked","inputChecked","list_in_address_book","toString","fileUpdatesEmailInterval","collaborateEmailInterval","EmailNotice","inputFileUpdatesEmailIntervalChange","parseInt","inputCollaborateEmailIntervalChange","formSubmit","updateEmailNotificationInterval","fileUpdatesOptions","interval","collaborateOptions","_this2","_this$state2","defaultDevice","backupTokens","TwoFactorAuthentication","renderEnabled","renderDisabled","ConfirmDisconnectWechat","disconnect","_this$props","formActionURL","socialConnected","socialNextPage","SocialLogin","confirmDisconnect","isConfirmDialogOpen","encodeURIComponent","ConfirmDisconnectDingtalk","socialConnectedDingtalk","SocialLoginDintalk","ConfirmDeleteAccount","DeleteAccount","confirmDelete","canUpdatePassword","passwordOperationText","enableGetAuthToken","enableWebdavSecret","enableAddressBook","twoFactorAuthEnabled","enableWechatWork","enableDingtalk","enableDeleteAccount","Settings","onSearchedClick","is_dir","url","repo_id","repo_name","path","navigate","repalce","encodePath","open","handleContentScroll","scrollTop","scrolled","sideNavItems","filter","document","getElementById","offsetTop","isPro","getUserInfo","mediaUrl","logoPath","logoHeight","logoWidth","title","siteTitle","CommonToolbar","onScroll","SocialLoginDingtalk","ReactDOM","render"],"mappings":"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","file":"static/js/settings.chunk.js","sourcesContent":["import React from 'react';\n\nclass SideNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <ul className=\"nav flex-column user-setting-nav\">\n        {this.props.data.map((item, index) => {\n          return item.show ?\n            <li key={index} className={`nav-item ${this.props.curItemID == item.href.substr(1) && 'active'}`}><a className=\"nav-link\" href={item.href}>{item.text}</a></li> : null;\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default SideNav;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport { Utils } from '../../utils/utils';\n\nconst { avatarURL, csrfToken } = window.app.pageOptions;\n\nclass UserAvatarForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n    this.form = React.createRef();\n    this.state = {\n      avatarSrc: avatarURL,\n      isEditShown: false\n    };\n  }\n\n  fileInputChange = () => {\n\n    // no file selected\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n\n    const file = this.fileInput.current.files[0];\n    const fileName = file.name;\n\n    // no file extension\n    if (fileName.lastIndexOf('.') == -1) {\n      toaster.danger(gettext('Please choose an image file.'), {\n        duration: 5\n      });\n      return false;\n    }\n\n    const fileExt = fileName.substr((fileName.lastIndexOf('.') + 1)).toLowerCase();\n    const allowedExt = ['jpg','jpeg', 'png', 'gif'];\n    if (allowedExt.indexOf(fileExt) == -1) {\n      const errorMsg = gettext('File extensions can only be {placeholder}.')\n        .replace('{placeholder}', allowedExt.join(', '));\n      toaster.danger(errorMsg, {duration: 5});\n      return false;\n    }\n\n    // file size should be less than 1MB\n    if (file.size > 1024*1024) {\n      const errorMsg = gettext('The file is too large. Allowed maximum size is 1MB.');\n      toaster.danger(errorMsg, {duration: 5});\n      return false;\n    }\n\n    //this.form.current.submit();\n    seafileAPI.updateUserAvatar(file, 160).then((res) => {\n      this.setState({\n        avatarSrc: res.data.avatar_url\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isEditShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isEditShown: false\n    });\n  }\n\n  onEditIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  }\n\n  render() {\n    return (\n      <form ref={this.form} className=\"form-group row\" encType=\"multipart/form-data\" method=\"post\" action={`${siteRoot}avatar/add/`}>\n        <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n        <label className=\"col-sm-1 col-form-label\">{gettext('Avatar:')}</label>\n        <div className=\"col-auto position-relative\" onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver} tabIndex=\"0\">\n          <img src={this.state.avatarSrc} width=\"80\" height=\"80\" alt=\"\" className=\"user-avatar\" />\n          <input type=\"file\" name=\"avatar\" className=\"d-none\" onChange={this.fileInputChange} ref={this.fileInput} />\n          <span className={`avatar-edit fas fa-edit ${!this.state.isEditShown && 'd-none'}`} onClick={this.openFileInput} role=\"button\" aria-label={gettext('Edit')} tabIndex=\"0\" onKeyDown={this.onEditIconKeyDown}></span>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default UserAvatarForm;\n","import React from 'react';\nimport { gettext } from '../../utils/constants';\n\nconst {\n  nameLabel,\n  enableUpdateUserInfo,\n  enableUserSetContactEmail\n} = window.app.pageOptions;\n\nclass UserBasicInfoForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const {\n      contact_email,\n      login_id,\n      name\n    } = this.props.userInfo;\n    this.state = {\n      contactEmail: contact_email,\n      loginID: login_id,\n      name: name\n    };\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  handleContactEmailInputChange = (e) => {\n    this.setState({\n      contactEmail: e.target.value\n    });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    let data = {\n      name: this.state.name\n    };\n    if (enableUserSetContactEmail) {\n      data.contact_email = this.state.contactEmail;\n    }\n    this.props.updateUserInfo(data);\n  }\n\n  render() {\n    const {\n      contactEmail,\n      loginID,\n      name\n    } = this.state;\n\n    return (\n      <form action=\"\" method=\"post\" onSubmit={this.handleSubmit}>\n\n        <div className=\"form-group row\">\n          <label className=\"col-sm-1 col-form-label\" htmlFor=\"name\">{nameLabel}</label>\n          <div className=\"col-sm-5\">\n            <input className=\"form-control\" id=\"name\" type=\"text\" name=\"nickname\" value={name} disabled={!enableUpdateUserInfo} onChange={this.handleNameInputChange} />\n          </div>\n        </div>\n\n        {loginID && (\n          <div className=\"form-group row\">\n            <label className=\"col-sm-1 col-form-label\" htmlFor=\"user-name\">{gettext('Username:')}</label>\n            <div className=\"col-sm-5\">\n              <input className=\"form-control\" id=\"user-name\" type=\"text\" name=\"username\" value={loginID} disabled={true} readOnly={true} />\n            </div>\n            <p className=\"col-sm-5 m-0 input-tip\">{gettext('You can use this field at login.')}</p>\n          </div>\n        )}\n\n        {(contactEmail || enableUserSetContactEmail) && (\n          <div className=\"form-group row\">\n            <label className=\"col-sm-1 col-form-label\" htmlFor=\"contact-email\">{gettext('Contact Email:')}</label>\n            <div className=\"col-sm-5\">\n              <input className=\"form-control\" id=\"contact-email\" type=\"text\" name=\"contact_email\" value={contactEmail} disabled={!enableUserSetContactEmail} readOnly={!enableUserSetContactEmail} onChange={this.handleContactEmailInputChange} />\n            </div>\n            <p className=\"col-sm-5 m-0 input-tip\">{gettext('Your notifications will be sent to this email.')}</p>\n          </div>\n        )}\n\n        <button type=\"submit\" className=\"btn btn-outline-primary offset-sm-1\" disabled={!enableUpdateUserInfo}>{gettext('Submit')}</button>\n      </form>\n    );\n  }\n}\n\nexport default UserBasicInfoForm;\n","import React from 'react';\nimport ModalPortal from '../modal-portal';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass WebAPIAuthToken extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      authToken: '',\n      isAuthTokenVisible: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getAuthToken();\n  }\n\n  getAuthToken = () => {\n    seafileAPI.getAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: res.data.token\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  createAuthToken = () => {\n    seafileAPI.createAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: res.data.token,\n        isAuthTokenVisible: false\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  }\n\n  deleteAuthToken = () => {\n    seafileAPI.deleteAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: '',\n        isAuthTokenVisible: false\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  }\n\n  toggleAuthTokenVisible = () => {\n    this.setState({\n      isAuthTokenVisible: !this.state.isAuthTokenVisible\n    });\n  }\n\n  onIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  }\n\n  render() {\n    const { authToken, isAuthTokenVisible } = this.state;\n    return (\n      <React.Fragment>\n        <div id=\"get-auth-token\" className=\"setting-item\">\n          <h3 className=\"setting-item-heading\">{gettext('Web API Auth Token')}</h3>\n          {authToken ? (\n            <React.Fragment>\n              <div className=\"d-flex align-items-center\">\n                <label className=\"m-0 mr-2\" htmlFor=\"token\">{gettext('Token:')}</label>\n                <input id=\"token\" className=\"border-0 mr-1\" type=\"text\" value={isAuthTokenVisible ? authToken : '****************************************'} readOnly={true} size={Math.max(authToken.length, 10)} />\n                <span tabIndex=\"0\" role=\"button\" aria-label={isAuthTokenVisible ? gettext('Hide') : gettext('Show')} onKeyDown={this.onIconKeyDown} onClick={this.toggleAuthTokenVisible} className={`eye-icon fas ${this.state.isAuthTokenVisible ? 'fa-eye': 'fa-eye-slash'}`}></span>\n              </div>\n              <button className=\"btn btn-outline-primary mt-2\" onClick={this.deleteAuthToken}>{gettext('Delete')}</button>\n            </React.Fragment>\n          ) : (\n            <button className=\"btn btn-outline-primary\" onClick={this.createAuthToken}>{gettext('Generate')}</button>\n          )}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WebAPIAuthToken;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert, Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  password: PropTypes.string.isRequired,\n  updatePassword: PropTypes.func.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nconst { webdavSecretMinLength, webdavSecretStrengthLevel } = window.app.pageOptions;\n\nclass UpdateWebdavPassword extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: this.props.password,\n      isPasswordVisible: false,\n      btnDisabled: false,\n      errMsg: ''\n    };\n  }\n\n  submit = () => {\n\n    if (this.state.password.length === 0) {\n      this.setState({errMsg: gettext('Please enter a password.')});\n      return false;\n    }\n    if (this.state.password.length < webdavSecretMinLength) {\n      this.setState({errMsg: gettext('The password is too short.')});\n      return false;\n    }\n\n    if (Utils.getStrengthLevel(this.state.password) < webdavSecretStrengthLevel) {\n      this.setState({errMsg: gettext('The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.').replace('{passwordStrengthLevel}', webdavSecretStrengthLevel)});\n      return false;\n    }\n\n    this.setState({\n      btnDisabled: true\n    });\n\n    this.props.updatePassword(this.state.password.trim());\n  }\n\n  handleInputChange = (e) => {\n    this.setState({password: e.target.value});\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({\n      isPasswordVisible: !this.state.isPasswordVisible\n    });\n  }\n\n  generatePassword = () => {\n    let randomPassword = Utils.generatePassword(webdavSecretMinLength);\n    this.setState({\n      password: randomPassword,\n      isPasswordVisible: true\n    });\n  }\n\n  render() {\n    const { toggle } = this.props;\n    const passwordTip = gettext('(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)').replace('{passwordMinLength}', webdavSecretMinLength).replace('{passwordStrengthLevel}', webdavSecretStrengthLevel);\n\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('WebDav Password')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input type={this.state.isPasswordVisible ? 'text' : 'password'} value={this.state.password} onChange={this.handleInputChange} autoComplete=\"new-password\"/>\n            <InputGroupAddon addonType=\"append\">\n              <Button onClick={this.togglePasswordVisible}><i className={`fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n              <Button onClick={this.generatePassword}><i className=\"fas fa-magic\"></i></Button>\n            </InputGroupAddon>\n          </InputGroup>\n          <p className=\"form-text text-muted m-0\">{passwordTip}</p>\n          {this.state.errMsg && <Alert color=\"danger\" className=\"m-0 mt-2\">{gettext(this.state.errMsg)}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={this.state.btnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUpdateWebdavPassword.propTypes = propTypes;\n\nexport default UpdateWebdavPassword;\n","import React from 'react';\nimport ModalPortal from '../modal-portal';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport UpdateWebdavPassword from '../dialog/update-webdav-password';\n\nconst { webdavPasswd } = window.app.pageOptions;\n\nclass WebdavPassword extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: webdavPasswd,\n      isPasswordVisible: false,\n      isDialogOpen: false\n    };\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({\n      isPasswordVisible: !this.state.isPasswordVisible\n    });\n  }\n\n  updatePassword = (password) => {\n    seafileAPI.updateWebdavSecret(password).then((res) => {\n      this.toggleDialog();\n      this.setState({\n        password: password\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleDialog();\n      toaster.danger(errorMsg);\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isDialogOpen: !this.state.isDialogOpen\n    });\n  }\n\n  onIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  }\n\n  render() {\n    const { password, isPasswordVisible } = this.state;\n    return (\n      <React.Fragment>\n        <div id=\"update-webdav-passwd\" className=\"setting-item\">\n          <h3 className=\"setting-item-heading\">{gettext('WebDav Password')}</h3>\n          {password ? (\n            <React.Fragment>\n              <div className=\"d-flex align-items-center\">\n                <label className=\"m-0 mr-2\" htmlFor=\"passwd\">{gettext('Password:')}</label>\n                <input id=\"passwd\" className=\"border-0 mr-1\" type=\"text\" value={isPasswordVisible ? password : '**********'} readOnly={true} size={Math.max(password.length, 10)} />\n                <span tabIndex=\"0\" role=\"button\" aria-label={isPasswordVisible? gettext('Hide') : gettext('Show')} onClick={this.togglePasswordVisible} onKeyDown={this.onIconKeyDown} className={`eye-icon fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></span>\n              </div>\n              <button className=\"btn btn-outline-primary mt-2\" onClick={this.toggleDialog}>{gettext('Update')}</button>\n            </React.Fragment>\n          ) : (\n            <button className=\"btn btn-outline-primary\" onClick={this.toggleDialog}>{gettext('Set Password')}</button>\n          )}\n        </div>\n        {this.state.isDialogOpen && (\n          <ModalPortal>\n            <UpdateWebdavPassword\n              password={this.state.password}\n              updatePassword={this.updatePassword}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WebdavPassword;\n","import React from 'react';\nimport Select from 'react-select';\nimport { gettext, siteRoot } from '../../utils/constants';\n\nconst {\n  currentLang, langList\n} = window.app.pageOptions;\n\nclass LanguageSetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  onSelectChange = (selectedItem) => {\n    // selectedItem: {value: '...', label: '...'}\n    location.href = `${siteRoot}i18n/?lang=${selectedItem.value}`;\n  }\n\n  render() {\n    const options = langList.map((item, index) => {\n      return {\n        value: item.langCode,\n        label: item.langName\n      };\n    });\n\n    return (\n      <div className=\"setting-item\" id=\"lang-setting\">\n        <h3 className=\"setting-item-heading\">{gettext('Language Setting')}</h3>\n        <Select\n          className='language-selector'\n          defaultValue={{value: currentLang.langCode, label: currentLang.langName}}\n          options={options}\n          onChange={this.onSelectChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default LanguageSetting;\n","import React from 'react';\nimport { gettext } from '../../utils/constants';\n\nclass ListInAddressBook extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const { list_in_address_book } = this.props.userInfo;\n    this.state = {\n      inputChecked: list_in_address_book\n    };\n  }\n\n  handleInputChange = (e) => {\n    const checked = e.target.checked;\n    this.setState({\n      inputChecked: checked\n    });\n    this.props.updateUserInfo({\n      list_in_address_book: checked.toString()\n    });\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n\n    return (\n      <div className=\"setting-item\" id=\"list-in-address-book\">\n        <h3 className=\"setting-item-heading\">{gettext('Global Address Book')}</h3>\n        <div className=\"d-flex align-items-center\">\n          <input type=\"checkbox\" id=\"list-in-address-book\" name=\"list_in_address_book\" className=\"mr-1\" checked={inputChecked} onChange={this.handleInputChange} />\n          <label htmlFor=\"list-in-address-book\" className=\"m-0\">{gettext('List your account in global address book, so that others can find you by typing your name.')}</label>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ListInAddressBook;\n","import React from 'react';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst {\n  fileUpdatesEmailInterval,\n  collaborateEmailInterval\n} = window.app.pageOptions;\n\nclass EmailNotice extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // interval: in seconds\n    this.fileUpdatesOptions = [\n      {interval: 0, text: gettext('Don\\'t send emails')},\n      {interval: 3600, text: gettext('Per hour')},\n      {interval: 14400, text: gettext('Per 4 hours')},\n      {interval: 86400, text: gettext('Per day')},\n      {interval: 604800, text: gettext('Per week')}\n    ];\n\n    this.collaborateOptions = [\n      {interval: 0, text: gettext('Don\\'t send emails')},\n      {interval: 3600, text: gettext('Per hour') + ' (' + gettext('If notifications have not been read within one hour, they will be sent to your mailbox.') + ')'}\n    ];\n\n    this.state = {\n      fileUpdatesEmailInterval: fileUpdatesEmailInterval,\n      collaborateEmailInterval: collaborateEmailInterval\n    };\n  }\n\n  inputFileUpdatesEmailIntervalChange = (e) => {\n    if (e.target.checked) {\n      this.setState({\n        fileUpdatesEmailInterval: parseInt(e.target.value)\n      });\n    }\n  }\n\n  inputCollaborateEmailIntervalChange = (e) => {\n    if (e.target.checked) {\n      this.setState({\n        collaborateEmailInterval: parseInt(e.target.value)\n      });\n    }\n  }\n\n  formSubmit = (e) => {\n    e.preventDefault();\n    let { fileUpdatesEmailInterval, collaborateEmailInterval } = this.state;\n    seafileAPI.updateEmailNotificationInterval(fileUpdatesEmailInterval, collaborateEmailInterval).then((res) => {\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  }\n\n  render() {\n    const { fileUpdatesEmailInterval, collaborateEmailInterval } = this.state;\n    return (\n      <div className=\"setting-item\" id=\"email-notice\">\n        <h3 className=\"setting-item-heading\">{gettext('Email Notification')}</h3>\n        <h6 className=\"\">{gettext('Notifications of file changes')}</h6>\n        <p className=\"mb-1\">{gettext('The list of added, deleted and modified files will be sent to your mailbox.')}</p>\n        <form method=\"post\" action=\"\" id=\"set-email-notice-interval-form\" onSubmit={this.formSubmit}>\n          {this.fileUpdatesOptions.map((item, index) => {\n            return (\n              <React.Fragment key={`file-updates-${index}`}>\n                <input type=\"radio\" name=\"interval\" value={item.interval} className=\"align-middle\" id={`file-updates-interval-option${index + 1}`} checked={fileUpdatesEmailInterval == item.interval} onChange={this.inputFileUpdatesEmailIntervalChange} />\n                <label className=\"align-middle m-0 ml-2\" htmlFor={`interval-option${index + 1}`}>{item.text}</label>\n                <br />\n              </React.Fragment>\n            );\n          })}\n        </form>\n\n        <h6 className=\"mt-4\">{gettext('Notifications of collaboration')}</h6>\n        <p className=\"mb-1\">{gettext('Whether the notifications of collaboration such as sharing library or joining group should be sent to your mailbox.')}</p>\n        <form method=\"post\" action=\"\" id=\"set-email-notice-interval-form\" onSubmit={this.formSubmit}>\n          {this.collaborateOptions.map((item, index) => {\n            return (\n              <React.Fragment key={`collaborate-${index}`}>\n                <input type=\"radio\" name=\"interval\" value={item.interval} className=\"align-middle\" id={`collaborate-interval-option${index + 1}`} checked={collaborateEmailInterval == item.interval} onChange={this.inputCollaborateEmailIntervalChange} />\n                <label className=\"align-middle m-0 ml-2\" htmlFor={`interval-option${index + 1}`}>{item.text}</label>\n                <br />\n              </React.Fragment>\n            );\n          })}\n        </form>\n        <button type=\"submit\" className=\"btn btn-outline-primary mt-2\" onClick={this.formSubmit}>{gettext('Submit')}</button>\n      </div>\n    );\n  }\n}\n\nexport default EmailNotice;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\n\nconst {\n  defaultDevice,\n  backupTokens\n} = window.app.pageOptions;\n\nclass TwoFactorAuthentication extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderEnabled = () => {\n    return (\n      <React.Fragment>\n        <p className=\"mb-2\">{gettext('Status: enabled')}</p>\n        <a className=\"btn btn-outline-primary mb-4\" href={`${siteRoot}profile/two_factor_authentication/disable/`}>\n          {gettext('Disable Two-Factor Authentication')}</a>\n        <p className=\"mb-2\">\n          {gettext('If you don\\'t have any device with you, you can access your account using backup codes.')}\n          {backupTokens == 1 ? gettext('You have only one backup code remaining.') :\n            gettext('You have {num} backup codes remaining.').replace('{num}', backupTokens)}\n        </p>\n        <a href={`${siteRoot}profile/two_factor_authentication/backup/tokens/`}\n          className=\"btn btn-outline-primary\">{gettext('Show Codes')}</a>\n      </React.Fragment>\n    );\n  }\n\n  renderDisabled = () => {\n    return (\n      <React.Fragment>\n        <p className=\"mb-2\">{gettext('Two-factor authentication is not enabled for your account. Enable two-factor authentication for enhanced account security.')}</p>\n        <a href={`${siteRoot}profile/two_factor_authentication/setup/`} className=\"btn btn-outline-primary\">\n          {gettext('Enable Two-Factor Authentication')}</a>\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"setting-item\" id=\"two-factor-auth\">\n        <h3 className=\"setting-item-heading\">{gettext('Two-Factor Authentication')}</h3>\n        {defaultDevice ? this.renderEnabled() : this.renderDisabled()}\n      </div>\n    );\n  }\n}\n\nexport default TwoFactorAuthentication;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  formActionURL: PropTypes.string.isRequired,\n  csrfToken: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nclass ConfirmDisconnectWechat extends Component {\n\n  constructor(props) {\n    super(props);\n    this.form = React.createRef();\n  }\n\n  disconnect = () => {\n    this.form.current.submit();\n  }\n\n  render() {\n    const {formActionURL, csrfToken, toggle} = this.props;\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Disconnect')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to disconnect?')}</p>\n          <form ref={this.form} className=\"d-none\" method=\"post\" action={formActionURL}>\n            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.disconnect}>{gettext('Disconnect')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmDisconnectWechat.propTypes = propTypes;\n\nexport default ConfirmDisconnectWechat;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport ConfirmDisconnectWechat from '../dialog/confirm-disconnect-wechat';\n\nconst {\n  csrfToken,\n  langCode,\n  socialConnected,\n  socialNextPage\n} = window.app.pageOptions;\n\nclass SocialLogin extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isConfirmDialogOpen: false\n    };\n  }\n\n  confirmDisconnect = () => {\n    this.setState({\n      isConfirmDialogOpen: true\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"setting-item\" id=\"social-auth\">\n          <h3 className=\"setting-item-heading\">{gettext('Social Login')}</h3>\n          <p className=\"mb-2\">{langCode == 'zh-cn' ? '企业微信': 'WeChat Work'}</p>\n          {socialConnected ?\n            <button className=\"btn btn-outline-primary\" onClick={this.confirmDisconnect}>{gettext('Disconnect')}</button> :\n            <a href={`${siteRoot}work-weixin/oauth-connect/?next=${encodeURIComponent(socialNextPage)}`} className=\"btn btn-outline-primary\">{gettext('Connect')}</a>\n          }\n        </div>\n        {this.state.isConfirmDialogOpen && (\n          <ModalPortal>\n            <ConfirmDisconnectWechat\n              formActionURL={`${siteRoot}work-weixin/oauth-disconnect/?next=${encodeURIComponent(socialNextPage)}`}\n              csrfToken={csrfToken}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SocialLogin;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  formActionURL: PropTypes.string.isRequired,\n  csrfToken: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nclass ConfirmDisconnectDingtalk extends Component {\n\n  constructor(props) {\n    super(props);\n    this.form = React.createRef();\n  }\n\n  disconnect = () => {\n    this.form.current.submit();\n  }\n\n  render() {\n    const {formActionURL, csrfToken, toggle} = this.props;\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Disconnect')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to disconnect?')}</p>\n          <form ref={this.form} className=\"d-none\" method=\"post\" action={formActionURL}>\n            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.disconnect}>{gettext('Disconnect')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmDisconnectDingtalk.propTypes = propTypes;\n\nexport default ConfirmDisconnectDingtalk;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport ConfirmDisconnectDingtalk from '../dialog/confirm-disconnect-dingtalk';\n\nconst {\n  csrfToken,\n  langCode,\n  socialConnectedDingtalk,\n  socialNextPage\n} = window.app.pageOptions;\n\nclass SocialLoginDintalk extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isConfirmDialogOpen: false\n    };\n  }\n\n  confirmDisconnect = () => {\n    this.setState({\n      isConfirmDialogOpen: true\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"setting-item\" id=\"social-auth\">\n          <h3 className=\"setting-item-heading\">{gettext('Social Login')}</h3>\n          <p className=\"mb-2\">{langCode == 'zh-cn' ? '钉钉': 'Dingtalk'}</p>\n          {socialConnectedDingtalk ?\n            <button className=\"btn btn-outline-primary\" onClick={this.confirmDisconnect}>{gettext('Disconnect')}</button> :\n            <a href={`${siteRoot}dingtalk/connect/?next=${encodeURIComponent(socialNextPage)}`} className=\"btn btn-outline-primary\">{gettext('Connect')}</a>\n          }\n        </div>\n        {this.state.isConfirmDialogOpen && (\n          <ModalPortal>\n            <ConfirmDisconnectDingtalk\n              formActionURL={`${siteRoot}dingtalk/disconnect/?next=${encodeURIComponent(socialNextPage)}`}\n              csrfToken={csrfToken}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SocialLoginDintalk;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  formActionURL: PropTypes.string.isRequired,\n  csrfToken: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nclass ConfirmDeleteAccount extends Component {\n\n  constructor(props) {\n    super(props);\n    this.form = React.createRef();\n  }\n\n  action = () => {\n    this.form.current.submit();\n  }\n\n  render() {\n    const {formActionURL, csrfToken, toggle} = this.props;\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Delete Account')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to delete your account?')}</p>\n          <form ref={this.form} className=\"d-none\" method=\"post\" action={formActionURL}>\n            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.action}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmDeleteAccount.propTypes = propTypes;\n\nexport default ConfirmDeleteAccount;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport ConfirmDeleteAccount from '../dialog/confirm-delete-account';\n\nconst {\n  csrfToken\n} = window.app.pageOptions;\n\nclass DeleteAccount extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isConfirmDialogOpen: false\n    };\n  }\n\n  confirmDelete = (e) => {\n    e.preventDefault();\n    this.setState({\n      isConfirmDialogOpen: true\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"setting-item\" id=\"del-account\">\n          <h3 className=\"setting-item-heading\">{gettext('Delete Account')}</h3>\n          <p className=\"mb-2\">{gettext('This operation will not be reverted. Please think twice!')}</p>\n          <button type=\"button\" className=\"btn btn-outline-primary\" onClick={this.confirmDelete}>{gettext('Delete')}</button>\n        </div>\n        {this.state.isConfirmDialogOpen && (\n          <ModalPortal>\n            <ConfirmDeleteAccount\n              formActionURL={`${siteRoot}profile/delete/`}\n              csrfToken={csrfToken}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default DeleteAccount;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { navigate } from '@reach/router';\nimport { Utils } from './utils/utils';\nimport { isPro, gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from './utils/constants';\nimport { seafileAPI } from './utils/seafile-api';\nimport toaster from './components/toast';\nimport CommonToolbar from './components/toolbar/common-toolbar';\nimport SideNav from './components/user-settings/side-nav';\nimport UserAvatarForm from './components/user-settings/user-avatar-form';\nimport UserBasicInfoForm from './components/user-settings/user-basic-info-form';\nimport WebAPIAuthToken from './components/user-settings/web-api-auth-token';\nimport WebdavPassword from './components/user-settings/webdav-password';\nimport LanguageSetting from './components/user-settings/language-setting';\nimport ListInAddressBook from './components/user-settings/list-in-address-book';\nimport EmailNotice from './components/user-settings/email-notice';\nimport TwoFactorAuthentication from './components/user-settings/two-factor-auth';\nimport SocialLogin from './components/user-settings/social-login';\nimport SocialLoginDingtalk from './components/user-settings/social-login-dingtalk';\nimport DeleteAccount from './components/user-settings/delete-account';\n\nimport './css/toolbar.css';\nimport './css/search.css';\n\nimport './css/user-settings.css';\n\nconst {\n  canUpdatePassword, passwordOperationText,\n  enableGetAuthToken,\n  enableWebdavSecret,\n  enableAddressBook,\n  twoFactorAuthEnabled,\n  enableWechatWork,\n  enableDingtalk,\n  enableDeleteAccount\n} = window.app.pageOptions;\n\nclass Settings extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sideNavItems = [\n      {show: true, href: '#user-basic-info', text: gettext('Profile')},\n      {show: canUpdatePassword, href: '#update-user-passwd', text: gettext('Password')},\n      {show: enableGetAuthToken, href: '#get-auth-token', text: gettext('Web API Auth Token')},\n      {show: enableWebdavSecret, href: '#update-webdav-passwd', text: gettext('WebDav Password')},\n      {show: enableAddressBook, href: '#list-in-address-book', text: gettext('Global Address Book')},\n      {show: true, href: '#lang-setting', text: gettext('Language')},\n      {show: isPro, href: '#email-notice', text: gettext('Email Notification')},\n      {show: twoFactorAuthEnabled, href: '#two-factor-auth', text: gettext('Two-Factor Authentication')},\n      {show: enableWechatWork, href: '#social-auth', text: gettext('Social Login')},\n      {show: enableDingtalk, href: '#social-auth', text: gettext('Social Login')},\n      {show: enableDeleteAccount, href: '#del-account', text: gettext('Delete Account')},\n    ];\n\n    this.state = {\n      curItemID: this.sideNavItems[0].href.substr(1)\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getUserInfo().then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateUserInfo = (data) => {\n    seafileAPI.updateUserInfo(data).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let newWindow = window.open('about:blank');\n      newWindow.location.href = url;\n    }\n  }\n\n  handleContentScroll = (e) => {\n    const scrollTop = e.target.scrollTop;\n    const scrolled = this.sideNavItems.filter((item, index) => {\n      return item.show && document.getElementById(item.href.substr(1)).offsetTop - 45 < scrollTop;\n    });\n    if (scrolled.length) {\n      this.setState({\n        curItemID: scrolled[scrolled.length -1].href.substr(1)\n      });\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n            <CommonToolbar onSearchedClick={this.onSearchedClick} />\n          </div>\n          <div className=\"flex-auto d-flex o-hidden\">\n            <div className=\"side-panel o-auto\">\n              <SideNav data={this.sideNavItems} curItemID={this.state.curItemID} />\n            </div>\n            <div className=\"main-panel d-flex flex-column\">\n              <h2 className=\"heading\">{gettext('Settings')}</h2>\n              <div className=\"content position-relative\" onScroll={this.handleContentScroll}>\n                <div id=\"user-basic-info\" className=\"setting-item\">\n                  <h3 className=\"setting-item-heading\">{gettext('Profile Setting')}</h3>\n                  <UserAvatarForm  />\n                  {this.state.userInfo && <UserBasicInfoForm userInfo={this.state.userInfo} updateUserInfo={this.updateUserInfo} />}\n                </div>\n                {canUpdatePassword &&\n                <div id=\"update-user-passwd\" className=\"setting-item\">\n                  <h3 className=\"setting-item-heading\">{gettext('Password')}</h3>\n                  <a href={`${siteRoot}accounts/password/change/`} className=\"btn btn-outline-primary\">{passwordOperationText}</a>\n                </div>\n                }\n\n                {enableGetAuthToken && <WebAPIAuthToken />}\n                {enableWebdavSecret && <WebdavPassword />}\n                {enableAddressBook && this.state.userInfo &&\n                  <ListInAddressBook userInfo={this.state.userInfo} updateUserInfo={this.updateUserInfo} />}\n                <LanguageSetting />\n                {isPro && <EmailNotice />}\n                {twoFactorAuthEnabled && <TwoFactorAuthentication />}\n                {enableWechatWork && <SocialLogin />}\n                {enableDingtalk && <SocialLoginDingtalk />}\n                {enableDeleteAccount && <DeleteAccount />}\n              </div>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDOM.render(\n  <Settings />,\n  document.getElementById('wrapper')\n);\n"],"sourceRoot":""}