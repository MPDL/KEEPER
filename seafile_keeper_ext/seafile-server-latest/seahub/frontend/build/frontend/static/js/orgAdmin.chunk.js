(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[15],{1589:function(e,t,s){s(52),e.exports=s(1703)},1590:function(e,t,s){},1703:function(e,t,s){"use strict";s.r(t);var n=s(6),r=s(7),a=s(9),i=s(8),c=s(2),o=s.n(c),l=s(23),d=s.n(l),j=s(17),h=s(1),b=s(96),u=s(0),p=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).getActiveClass=function(t){return e.props.currentTab==t?"active":""},e.tabItemClick=function(t){e.props.tabItemClick(t)},e}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"side-panel ".concat(this.props.isSidePanelClosed?"":"left-zero"),children:[Object(u.jsx)("div",{className:"side-panel-north",children:Object(u.jsx)(b.a,{onCloseSidePanel:this.props.onCloseSidePanel})}),Object(u.jsx)("div",{className:"side-panel-center",children:Object(u.jsx)("div",{className:"side-nav",children:Object(u.jsxs)("div",{className:"side-nav-con",children:[Object(u.jsx)("h3",{className:"sf-heading",style:{color:"#f7941d"},children:Object(h.jb)("Admin")}),Object(u.jsxs)("ul",{className:"nav nav-pills flex-column nav-container",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(j.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("orgmanage")),to:h.hc+"org/orgmanage/",onClick:function(){return e.tabItemClick("orgmanage")},children:[Object(u.jsx)("span",{className:"sf2-icon-info"}),Object(u.jsx)("span",{className:"nav-text",children:Object(h.jb)("Info")})]})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(j.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("repoadmin")),to:h.hc+"org/repoadmin/",onClick:function(){return e.tabItemClick("repoadmin")},children:[Object(u.jsx)("span",{className:"sf2-icon-library"}),Object(u.jsx)("span",{className:"nav-text",children:Object(h.jb)("Libraries")})]})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(j.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("users")||this.getActiveClass("admins")),to:h.hc+"org/useradmin/",onClick:function(){return e.tabItemClick("users")},children:[Object(u.jsx)("span",{className:"sf2-icon-user"}),Object(u.jsx)("span",{className:"nav-text",children:Object(h.jb)("Users")})]})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(j.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("groupadmin")),to:h.hc+"org/groupadmin/",onClick:function(){return e.tabItemClick("groupadmin")},children:[Object(u.jsx)("span",{className:"sf2-icon-group"}),Object(u.jsx)("span",{className:"nav-text",children:Object(h.jb)("Groups")})]})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(j.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("departmentadmin")),to:h.hc+"org/departmentadmin/",onClick:function(){return e.tabItemClick("departmentadmin")},children:[Object(u.jsx)("span",{className:"sf2-icon-organization"}),Object(u.jsx)("span",{className:"nav-text",children:Object(h.jb)("Departments")})]})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(j.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("publinkadmin")),to:h.hc+"org/publinkadmin/",onClick:function(){return e.tabItemClick("publinkadmin")},children:[Object(u.jsx)("span",{className:"sf2-icon-link"}),Object(u.jsx)("span",{className:"nav-text",children:Object(h.jb)("Links")})]})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(j.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("logadmin")||this.getActiveClass("file-update")||this.getActiveClass("perm-audit")),to:h.hc+"org/logadmin/",onClick:function(){return e.tabItemClick("logadmin")},children:[Object(u.jsx)("span",{className:"sf2-icon-clock"}),Object(u.jsx)("span",{className:"nav-text",children:Object(h.jb)("Logs")})]})})]})]})})})]})}}]),s}(o.a.Component),g=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).navItems=[{name:"all",urlPart:"useradmin",text:Object(h.jb)("All")},{name:"admins",urlPart:"useradmin/admins",text:Object(h.jb)("Admin")}],r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.currentItem;return Object(u.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(u.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,s){return Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(j.a,{to:"".concat(h.hc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},s)}))})})}}]),s}(o.a.Component),m=s(4),O=s(10),f=s(5),x=s(11),v=s(92),w=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).translateStatus=function(e){return"active"===e?Object(h.jb)("Active"):"inactive"===e?Object(h.jb)("Inactive"):void 0},e}return Object(r.a)(s,[{key:"render",value:function(){return Object(u.jsx)(v.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.statusArray,currentOption:this.props.currentStatus,onOptionChanged:this.props.onStatusChanged,translateOption:this.translateStatus})}}]),s}(o.a.Component),D=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.toggleDelete=function(){var e=r.props.user.email;r.props.toggleDelete(e)},r.toggleResetPW=function(){var e=r.props.user,t=e.email,s=e.name;x.a.success(Object(h.jb)("Resetting user's password, please wait for a moment.")),O.b.orgAdminResetOrgUserPassword(h.Mb,t).then((function(e){var t;t=(t=(t=Object(h.jb)("Successfully reset password to %(passwd)s for user %(user)s.")).replace("%(passwd)s",e.data.new_password)).replace("%(user)s",s),x.a.success(t,{duration:15})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.toggleRevokeAdmin=function(){var e=r.props.user.email;r.props.toggleRevokeAdmin(e)},r.changeStatus=function(e){var t;t="active"==e?"true":"false",O.b.orgAdminChangeOrgUserStatus(h.Mb,r.props.user.email,t).then((function(e){r.setState({currentStatus:"true"==t?"active":"inactive",highlight:!1,showMenu:!1}),x.a.success(Object(h.jb)("Edit succeeded."))})).catch((function(e){var t=f.a.getErrorMsg(e);t===Object(h.jb)("Error")&&(t=Object(h.jb)("Edit failed.")),x.a.danger(t)}))},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.getQuotaTotal=function(e){switch(e){case-1:return Object(h.jb)("Failed");case-2:return"--";default:return f.a.formatSize({bytes:e})}},r.state={highlight:!1,showMenu:!1,currentStatus:r.props.user.is_active?"active":"inactive",isItemMenuShow:!1},r.statusArray=["active","inactive"],r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props,t=e.user,s=e.currentTab,n=h.hc+"org/useradmin/info/"+encodeURIComponent(t.email)+"/",r=t.email!==h.sc&&this.state.showMenu,a=r;return Object(u.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:n,children:t.name})}),Object(u.jsx)("td",{children:Object(u.jsx)(w,{isTextMode:!0,isEditIconShow:a,currentStatus:this.state.currentStatus,statusArray:this.statusArray,onStatusChanged:this.changeStatus})}),Object(u.jsx)("td",{children:"".concat(f.a.formatSize({bytes:t.quota_usage})," / ").concat(this.getQuotaTotal(t.quota_total))}),Object(u.jsxs)("td",{children:[t.ctime," /",Object(u.jsx)("br",{}),t.last_login?t.last_login:"--"]}),Object(u.jsx)("td",{className:"text-center cursor-pointer",children:r&&Object(u.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(u.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(h.jb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(u.jsxs)(m.n,{children:[Object(u.jsx)(m.m,{onClick:this.toggleDelete,children:Object(h.jb)("Delete")}),Object(u.jsx)(m.m,{onClick:this.toggleResetPW,children:Object(h.jb)("ResetPwd")}),"admins"==s&&Object(u.jsx)(m.m,{onClick:this.toggleRevokeAdmin,children:Object(h.jb)("Revoke Admin")})]})]})})]})}}]),s}(o.a.Component),S=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.onChangePageNum=function(e,t){e.preventDefault();var s=r.props.page;1==t?s+=1:s-=1,r.props.initOrgUsersData(s)},r.sortByQuotaUsage=function(e){e.preventDefault(),r.props.sortByQuotaUsage()},r.state={isItemFreezed:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e,t=this,s=this.props,n=s.sortBy,r=s.sortOrder;e=""==n?Object(u.jsx)("span",{className:"fas fa-sort"}):Object(u.jsx)("span",{className:"fas ".concat("asc"==r?"fa-caret-up":"fa-caret-down")});var a=this.props,i=a.orgUsers,c=a.page,o=a.pageNext;return Object(u.jsxs)("div",{className:"cur-view-content",children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"30%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Status")}),Object(u.jsxs)("th",{width:"20%",children:[Object(u.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage,children:[Object(h.jb)("Space Used")," ",e]})," / ",Object(h.jb)("Quota")]}),Object(u.jsxs)("th",{width:"25%",children:[Object(h.jb)("Created At")," / ",Object(h.jb)("Last Login")]}),Object(u.jsx)("th",{width:"10%"})]})}),Object(u.jsx)("tbody",{children:i.map((function(e,s){return Object(u.jsx)(D,{user:e,currentTab:"users",isItemFreezed:t.state.isItemFreezed,toggleDelete:t.props.toggleDelete,onFreezedItem:t.onFreezedItem,onUnfreezedItem:t.onUnfreezedItem},s)}))})]}),Object(u.jsxs)("div",{className:"paginator",children:[1!=c&&Object(u.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,-1)},children:Object(h.jb)("Previous")}),1!=c&&o&&Object(u.jsx)("span",{children:" | "}),o&&Object(u.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,1)},children:Object(h.jb)("Next")})]})]})}}]),s}(o.a.Component),N=s(68),M=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"main-panel-north ".concat(this.props.children?"border-left-show":""),children:[Object(u.jsxs)("div",{className:"cur-view-toolbar",children:[Object(u.jsx)("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),Object(u.jsx)("div",{className:"operation",children:this.props.children})]}),Object(u.jsxs)("div",{className:"common-toolbar",children:[this.props.search&&this.props.search,Object(u.jsx)(N.a,{isAdminPanel:!0})]})]})}}]),s}(c.Component),I=s(20),C=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleSubmit=function(){if(r.validateInputParams()){var e=r.state,t=e.email,s=e.name,n=e.password;r.setState({isAddingUser:!0}),r.props.handleSubmit(t,s.trim(),n)}},r.handleKeyPress=function(e){e.preventDefault(),"Enter"==e.key&&r.handleSubmit(e)},r.togglePasswordVisible=function(){r.setState({isPasswordVisible:!r.state.isPasswordVisible},(function(){r.state.isPasswordVisible?(r.passwdInput.type="password",r.passwdNewInput.type="password"):(r.passwdInput.type="text",r.passwdNewInput.type="text")}))},r.generatePassword=function(){var e=Math.random().toString(36).substr(5);r.setState({password:e,passwdnew:e,isPasswordVisible:!1},(function(){r.passwdInput.type="text",r.passwdNewInput.type="text"}))},r.inputEmail=function(e){var t=e.target.value.trim();r.setState({email:t})},r.inputName=function(e){var t=e.target.value;r.setState({name:t})},r.inputPassword=function(e){var t=e.target.value.trim();r.setState({password:t},(function(){r.state.isPasswordVisible&&(r.passwdInput.type="password",r.passwdNewInput.type="password")}))},r.inputPasswordNew=function(e){var t=e.target.value.trim();r.setState({passwdnew:t},(function(){r.state.isPasswordVisible&&(r.passwdInput.type="password",r.passwdNewInput.type="password")}))},r.toggle=function(){r.props.toggle()},r.state={isPasswordVisible:!0,email:"",name:"",password:"",passwdnew:"",errMessage:"",isAddingUser:!1},r.passwdInput=o.a.createRef(),r.passwdNewInput=o.a.createRef(),r}return Object(r.a)(s,[{key:"validateInputParams",value:function(){var e;if(!this.state.email.length)return e=Object(h.jb)("email is required"),this.setState({errMessage:e}),!1;if(!this.state.name.trim().length)return e=Object(h.jb)("Name is required"),this.setState({errMessage:e}),!1;var t=this.state.password,s=this.state.passwdnew;return t.length?s.length?t===s||(e=Object(h.jb)("Passwords don't match"),this.setState({errMessage:e}),!1):(e=Object(h.jb)("Please enter the password again"),this.setState({errMessage:e}),!1):(e=Object(h.jb)("Please enter password"),this.setState({errMessage:e}),!1)}},{key:"render",value:function(){var e=this;return Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.toggle,children:[Object(u.jsx)(m.A,{toggle:this.toggle,children:Object(h.jb)("Add User")}),Object(u.jsxs)(m.y,{children:[Object(u.jsxs)(m.p,{children:[Object(u.jsxs)(m.q,{children:[Object(u.jsx)(m.w,{for:"userEmail",children:Object(h.jb)("Email")}),Object(u.jsx)(m.s,{id:"userEmail",value:this.state.email||"",onChange:this.inputEmail})]}),Object(u.jsxs)(m.q,{children:[Object(u.jsx)(m.w,{for:"userName",children:Object(h.jb)("Name")}),Object(u.jsx)(m.s,{id:"userName",value:this.state.name||"",onChange:this.inputName})]}),Object(u.jsxs)(m.q,{children:[Object(u.jsx)(m.w,{for:"userPwd",children:Object(h.jb)("Password")}),Object(u.jsxs)(m.t,{className:"passwd",children:[Object(u.jsx)(m.s,{id:"userPwd",innerRef:function(t){e.passwdInput=t},value:this.state.password||"",onChange:this.inputPassword}),Object(u.jsxs)(m.u,{addonType:"append",children:[Object(u.jsx)(m.c,{onClick:this.togglePasswordVisible,children:Object(u.jsx)("i",{className:"link-operation-icon fas ".concat(this.state.isPasswordVisible?"fa-eye-slash":"fa-eye")})}),Object(u.jsx)(m.c,{onClick:this.generatePassword,children:Object(u.jsx)("i",{className:"link-operation-icon fas fa-magic"})})]})]})]}),Object(u.jsxs)(m.q,{children:[Object(u.jsx)(m.w,{for:"userPwdNew",children:Object(h.jb)("Confirm Password")}),Object(u.jsx)(m.s,{id:"userPwdNew",innerRef:function(t){e.passwdNewInput=t},className:"passwd",value:this.state.passwdnew||"",onChange:this.inputPasswordNew})]})]}),this.state.errMessage&&Object(u.jsx)(m.w,{className:"err-message",children:this.state.errMessage})]}),Object(u.jsx)(m.z,{children:Object(u.jsx)(m.c,{color:"primary",disabled:this.state.isAddingUser,onClick:this.handleSubmit,className:this.state.isAddingUser?"btn-loading":"",children:Object(h.jb)("Submit")})})]})}}]),s}(o.a.Component),y=s(136),k=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).copyLink=function(){Object(y.a)(r.props.invitationLink),r.props.toggle();var e=Object(h.jb)("Internal link has been copied to clipboard");x.a.success(e)},r}return Object(r.a)(s,[{key:"render",value:function(){return Object(u.jsxs)(m.x,{isOpen:!0,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:Object(h.jb)("Invite user")}),Object(u.jsxs)(m.y,{children:[Object(u.jsx)("p",{children:Object(h.jb)("Send the invitation link to the others, and they will be able to join the organization via scanning the QR code.")}),Object(u.jsx)("p",{children:this.props.invitationLink})]}),Object(u.jsx)(m.z,{children:Object(u.jsx)(m.c,{color:"primary",onClick:this.copyLink,children:Object(h.jb)("Copy")})})]})}}]),s}(o.a.Component),_=s(13),A=s.n(_);A.a.locale(h.xb);var U=function e(t){Object(n.a)(this,e),this.id=t.id,this.name=t.name,this.email=t.email,this.contact_email=t.owner_contact_email,this.is_active=t.is_active,this.quota_usage=t.quota_usage,this.quota_total=t.quota_total,this.last_login=t.last_login?A()(t.last_login).fromNow():"--",this.ctime=A()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},z=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleInputChange=function(e){r.setState({value:e.target.value})},r.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),r.handleSubmit())},r.handleSubmit=function(){var e=r.state.value.trim();if(!e)return!1;r.props.submit(e)},r.state={value:""},r}return Object(r.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"input-icon",children:[Object(u.jsx)("i",{className:"d-flex input-icon-addon fas fa-search"}),Object(u.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"})]})}}]),s}(o.a.Component),R=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).sortByQuotaUsage=function(){r.setState({sortBy:"quota_usage",sortOrder:"asc"==r.state.sortOrder?"desc":"asc",page:1},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),s=r.state,n=s.page,a=s.sortBy,i=s.sortOrder;t.set("page",n),t.set("order_by",a),t.set("direction",i),e.search=t.toString(),Object(j.c)(e.toString()),r.initOrgUsersData(n)}))},r.toggleAddOrgUser=function(){r.setState({isShowAddOrgUserDialog:!r.state.isShowAddOrgUserDialog})},r.toggleInviteUserDialog=function(){r.setState({isInviteUserDialogOpen:!r.state.isInviteUserDialogOpen})},r.initOrgUsersData=function(e){var t=r.state,s=t.sortBy,n=t.sortOrder;O.b.orgAdminListOrgUsers(h.Mb,"",e,s,n).then((function(e){var t=e.data.user_list.map((function(e){return new U(e)}));r.setState({orgUsers:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.addOrgUser=function(e,t,s){O.b.orgAdminAddOrgUser(h.Mb,e,t,s).then((function(t){var s=new U(t.data);r.state.orgUsers.unshift(s),r.setState({orgUsers:r.state.orgUsers}),r.toggleAddOrgUser();var n=Object(h.jb)("successfully added user %s.");n=n.replace("%s",e),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),r.toggleAddOrgUser()}))},r.toggleOrgUsersDelete=function(e){O.b.orgAdminDeleteOrgUser(h.Mb,e).then((function(t){var s=r.state.orgUsers.filter((function(t){return t.email!=e}));r.setState({orgUsers:s});var n=Object(h.jb)("Successfully deleted %s");n=n.replace("%s",e),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.searchItems=function(e){Object(j.c)("".concat(h.hc,"org/useradmin/search-users/?query=").concat(encodeURIComponent(e)))},r.getSearch=function(){return Object(u.jsx)(z,{placeholder:Object(h.jb)("Search users"),submit:r.searchItems})},r.state={orgUsers:[],page:1,pageNext:!1,sortBy:"",sortOrder:"asc",isShowAddOrgUserDialog:!1,isInviteUserDialogOpen:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,s=this.state,n=s.page,r=s.sortBy,a=s.sortOrder;this.setState({page:parseInt(t.get("page")||n),sortBy:t.get("order_by")||r,sortOrder:t.get("direction")||a},(function(){e.initOrgUsersData(e.state.page)}))}},{key:"render",value:function(){var e,t="btn btn-secondary operation-item";return e=Object(u.jsxs)(c.Fragment,{children:[Object(u.jsxs)("button",{className:t,title:Object(h.jb)("Add user"),onClick:this.toggleAddOrgUser,children:[Object(u.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(h.jb)("Add user")]}),h.pb&&Object(u.jsxs)("button",{className:t,title:Object(h.jb)("Invite user"),onClick:this.toggleInviteUserDialog,children:[Object(u.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(h.jb)("Invite user")]}),this.state.isShowAddOrgUserDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(C,{handleSubmit:this.addOrgUser,toggle:this.toggleAddOrgUser})}),this.state.isInviteUserDialogOpen&&Object(u.jsx)(I.a,{children:Object(u.jsx)(k,{invitationLink:h.pb,toggle:this.toggleInviteUserDialog})})]}),Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{children:e,search:this.getSearch()}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)(g,{currentItem:"all"}),Object(u.jsx)(S,{initOrgUsersData:this.initOrgUsersData,toggleDelete:this.toggleOrgUsersDelete,orgUsers:this.state.orgUsers,page:this.state.page,pageNext:this.state.pageNext,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage})]})})]})}}]),s}(c.Component),L=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this,t=this.props.orgUsers;return Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"30%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Status")}),Object(u.jsxs)("th",{width:"20%",children:[Object(u.jsx)("a",{className:"d-inline-block table-sort-op",href:"#",children:Object(h.jb)("Space Used")})," / ",Object(h.jb)("Quota")]}),Object(u.jsxs)("th",{width:"25%",children:[Object(h.jb)("Created At")," / ",Object(h.jb)("Last Login")]}),Object(u.jsx)("th",{width:"10%"})]})}),Object(u.jsx)("tbody",{children:t.map((function(t,s){return Object(u.jsx)(D,{user:t,currentTab:"users",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem},s)}))})]})})}}]),s}(o.a.Component),F=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).getItems=function(){O.b.orgAdminSearchUser(h.Mb,r.state.query.trim()).then((function(e){var t=e.data.user_list.map((function(e){return new U(e)}));r.setState({orgUsers:t,loading:!1})})).catch((function(e){r.setState({loading:!1,errorMsg:f.a.getErrorMsg(e,!0)})}))},r.deleteUser=function(e){O.b.orgAdminDeleteOrgUser(h.Mb,e).then((function(t){var s=r.state.orgUsers.filter((function(t){return t.email!=e}));r.setState({orgUsers:s}),x.a.success(Object(h.jb)("Successfully deleted 1 item."))})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.updateUser=function(e,t,s){O.b.sysAdminUpdateUser(e,t,s).then((function(n){var a=r.state.orgUsers.map((function(s){return s.email==e&&(s[t]=n.data[t]),s}));r.setState({orgUsers:a});var i="is_active"==t&&s?n.data.update_status_tip:Object(h.jb)("Edit succeeded");x.a.success(i)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.handleInputChange=function(e){r.setState({query:e.target.value},r.checkSubmitBtnActive)},r.checkSubmitBtnActive=function(){var e=r.state.query;r.setState({isSubmitBtnActive:e.trim()})},r.state={query:"",orgUsers:[],org_id:"",isSubmitBtnActive:!1,loading:!0,errorMsg:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,s=e.isSubmitBtnActive;return Object(u.jsx)(c.Fragment,{children:Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("Users")})}),Object(u.jsxs)("div",{className:"cur-view-content",children:[Object(u.jsxs)("div",{className:"mt-4 mb-6",children:[Object(u.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(h.jb)("Search Users")}),Object(u.jsxs)(m.p,{children:[Object(u.jsx)(m.q,{row:!0,children:Object(u.jsx)(m.i,{sm:5,children:Object(u.jsx)(m.s,{type:"text",name:"query",value:t,placeholder:Object(h.jb)("Search users"),onChange:this.handleInputChange})})}),Object(u.jsx)(m.q,{row:!0,children:Object(u.jsx)(m.i,{sm:{size:5},children:Object(u.jsx)("button",{className:"btn btn-outline-primary",disabled:!s,onClick:this.getItems,children:Object(h.jb)("Submit")})})})]})]}),Object(u.jsxs)("div",{className:"mt-4 mb-6",children:[Object(u.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(h.jb)("Result")}),Object(u.jsx)(L,{toggleDelete:this.deleteUser,orgUsers:this.state.orgUsers})]})]})]})})})}}]),s}(c.Component),E=(s(1590),function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.props.initOrgAdmin()}},{key:"render",value:function(){var e=this,t=this.props.orgAdminUsers;return Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"30%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Status")}),Object(u.jsxs)("th",{width:"20%",children:[Object(h.jb)("Space Used")," / ",Object(h.jb)("Quota")]}),Object(u.jsxs)("th",{width:"25%",children:[Object(h.jb)("Created At")," / ",Object(h.jb)("Last Login")]}),Object(u.jsx)("th",{width:"10%"})]})}),Object(u.jsx)("tbody",{children:t.map((function(t){return Object(u.jsx)(D,{user:t,currentTab:"admins",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,toggleRevokeAdmin:e.props.toggleRevokeAdmin,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem},t.index)}))})]})})}}]),s}(o.a.Component)),P=s(54),G=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e,errMessage:""}),r.options=[]},r.addOrgAdmin=function(){if(r.state.selectedOption){var e=r.state.selectedOption.email;O.b.orgAdminSetOrgAdmin(h.Mb,e,!0).then((function(e){var t=new U(e.data);r.props.onAddedOrgAdmin(t)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},r.toggle=function(){r.props.toggle()},r.state={selectedOption:null,errMessage:""},r.options=[],r}return Object(r.a)(s,[{key:"render",value:function(){return Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.toggle,children:[Object(u.jsx)(m.A,{toggle:this.toggle,children:Object(h.jb)("Add Admins")}),Object(u.jsxs)(m.y,{children:[Object(u.jsx)(P.a,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:Object(h.jb)("Select a user as admin..."),onSelectChange:this.handleSelectChange}),this.state.errMessage&&Object(u.jsx)(m.a,{color:"danger",className:"mt-2",children:this.state.errMessage})]}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)(m.c,{color:"secondary",onClick:this.toggle,children:Object(h.jb)("Close")}),Object(u.jsx)(m.c,{color:"primary",onClick:this.addOrgAdmin,children:Object(h.jb)("Submit")})]})]})}}]),s}(o.a.Component),T=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).toggleAddOrgAdmin=function(){r.setState({isShowAddOrgAdminDialog:!r.state.isShowAddOrgAdminDialog})},r.initOrgAdmin=function(){O.b.orgAdminListOrgUsers(h.Mb,!0).then((function(e){var t=e.data.user_list.map((function(e){return new U(e)}));r.setState({orgAdminUsers:t})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.toggleOrgAdminDelete=function(e){O.b.orgAdminDeleteOrgUser(h.Mb,e).then((function(t){r.setState({orgAdminUsers:r.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var s=Object(h.jb)("Successfully deleted %s");s=s.replace("%s",e),x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.toggleRevokeAdmin=function(e){O.b.orgAdminSetOrgAdmin(h.Mb,e,!1).then((function(t){r.setState({orgAdminUsers:r.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var s=Object(h.jb)("Successfully revoke the admin permission of %s");s=s.replace("%s",t.data.name),x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.onAddedOrgAdmin=function(e){r.state.orgAdminUsers.unshift(e),r.setState({orgAdminUsers:r.state.orgAdminUsers});var t=Object(h.jb)("Successfully set %s as admin.");t=t.replace("%s",e.email),x.a.success(t),r.toggleAddOrgAdmin()},r.state={orgAdminUsers:[],isShowAddOrgAdminDialog:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e;return e=Object(u.jsxs)(c.Fragment,{children:[Object(u.jsxs)("button",{className:"btn btn-secondary operation-item",title:Object(h.jb)("Add admin"),onClick:this.toggleAddOrgAdmin,children:[Object(u.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(h.jb)("Add admin")]}),this.state.isShowAddOrgAdminDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(G,{toggle:this.toggleAddOrgAdmin,onAddedOrgAdmin:this.onAddedOrgAdmin})})]}),Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{children:e}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)(g,{currentItem:"admins"}),Object(u.jsx)(E,{currentTab:"admins",toggleDelete:this.toggleOrgAdminDelete,toggleRevokeAdmin:this.toggleRevokeAdmin,orgAdminUsers:this.state.orgAdminUsers,initOrgAdmin:this.initOrgAdmin})]})})]})}}]),s}(c.Component),q=s(15),B=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props,t=e.email,s=e.currentItem,n="".concat(h.hc,"org/useradmin/info/").concat(encodeURIComponent(t),"/");return Object(u.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:Object(u.jsxs)("ul",{className:"nav",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(j.a,{to:n,className:"nav-link".concat("profile"==s?" active":""),children:Object(h.jb)("Profile")})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(j.a,{to:"".concat(n,"repos/"),className:"nav-link".concat("owned-repos"==s?" active":""),children:Object(h.jb)("Owned Libraries")})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(j.a,{to:"".concat(n,"shared-repos/"),className:"nav-link".concat("shared-repos"==s?" active":""),children:Object(h.jb)("Shared Libraries")})})]})})}}]),s}(o.a.Component),Q=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleInputChange=function(e){r.setState({inputValue:e.target.value})},r.formSubmit=function(){var e=r.props,t=e.orgID,s=e.email,n=r.state.inputValue.trim();r.setState({submitBtnDisabled:!0}),O.b.orgAdminSetOrgUserName(t,s,n).then((function(e){var t=n?e.data.name:"";r.props.updateName(t),r.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);r.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},r.state={inputValue:r.props.name,submitBtnDisabled:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.state,t=e.inputValue,s=e.formErrorMsg,n=e.submitBtnDisabled;return Object(u.jsxs)(m.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(u.jsx)(m.A,{toggle:this.props.toggleDialog,children:Object(h.jb)("Set user name")}),Object(u.jsx)(m.y,{children:Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),s&&Object(u.jsx)("p",{className:"error m-0 mt-2",children:s})]})}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(h.jb)("Cancel")}),Object(u.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:Object(h.jb)("Submit")})]})]})}}]),s}(o.a.Component),H=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleInputChange=function(e){r.setState({inputValue:e.target.value})},r.formSubmit=function(){var e=r.props,t=e.orgID,s=e.email,n=r.state.inputValue.trim();r.setState({submitBtnDisabled:!0}),O.b.orgAdminSetOrgUserContactEmail(t,s,n).then((function(e){var t=n?e.data.contact_email:"";r.props.updateContactEmail(t),r.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);r.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},r.state={inputValue:r.props.contactEmail,submitBtnDisabled:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.state,t=e.inputValue,s=e.formErrorMsg,n=e.submitBtnDisabled;return Object(u.jsxs)(m.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(u.jsx)(m.A,{toggle:this.props.toggleDialog,children:Object(h.jb)("Set user contact email")}),Object(u.jsx)(m.y,{children:Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),s&&Object(u.jsx)("p",{className:"error m-0 mt-2",children:s})]})}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(h.jb)("Cancel")}),Object(u.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:Object(h.jb)("Submit")})]})]})}}]),s}(o.a.Component),Y=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;Object(n.a)(this,s),(r=t.call(this,e)).handleInputChange=function(e){r.setState({inputValue:e.target.value})},r.formSubmit=function(){var e=r.props,t=e.orgID,s=e.email,n=r.state.inputValue.trim();if(!n)return r.setState({formErrorMsg:Object(h.jb)("It is required.")}),!1;r.setState({submitBtnDisabled:!0}),O.b.orgAdminSetOrgUserQuota(t,s,n).then((function(e){r.props.updateQuota(e.data.quota_total),r.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);r.setState({formErrorMsg:t,submitBtnDisabled:!1})}))};var a=r.props.quotaTotal<0?"":r.props.quotaTotal/1e6;return r.state={inputValue:a,submitBtnDisabled:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.state,t=e.inputValue,s=e.formErrorMsg,n=e.submitBtnDisabled;return Object(u.jsxs)(m.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(u.jsx)(m.A,{toggle:this.props.toggleDialog,children:Object(h.jb)("Set user quota")}),Object(u.jsx)(m.y,{children:Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsxs)(m.t,{children:[Object(u.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),Object(u.jsx)(m.u,{addonType:"append",children:Object(u.jsx)(m.v,{children:"MB"})})]}),Object(u.jsx)("p",{className:"small text-secondary mt-2 mb-2",children:Object(h.jb)("Tip: 0 means default limit")}),s&&Object(u.jsx)("p",{className:"error m-0 mt-2",children:s})]})}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(h.jb)("Cancel")}),Object(u.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:Object(h.jb)("Submit")})]})]})}}]),s}(o.a.Component),V=(s(241),window.org.pageOptions),K=V.orgID,W=V.orgName,X=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).updateName=function(e){r.setState({name:e})},r.updateContactEmail=function(e){r.setState({contact_email:e})},r.updateQuota=function(e){r.setState({quota_total:e})},r.state={loading:!0,errorMsg:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.b.orgAdminGetOrgUserInfo(K,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)(B,{email:this.props.email,currentItem:"profile"}),Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsx)(J,{data:this.state,updateName:this.updateName,updateContactEmail:this.updateContactEmail,updateQuota:this.updateQuota})})]})})]})}}]),s}(c.Component),J=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).toggleSetNameDialog=function(){r.setState({isSetNameDialogOpen:!r.state.isSetNameDialogOpen})},r.toggleSetContactEmailDialog=function(){r.setState({isSetContactEmailDialogOpen:!r.state.isSetContactEmailDialogOpen})},r.toggleSetQuotaDialog=function(){r.setState({isSetQuotaDialogOpen:!r.state.isSetQuotaDialogOpen})},r.state={isSetNameDialogOpen:!1,isSetContactEmailDialogOpen:!1,isSetQuotaDialogOpen:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.data,t=e.loading,s=e.errorMsg,n=e.avatar_url,r=e.email,a=e.contact_email,i=e.name,o=e.quota_total,l=e.quota_usage,d=this.state,j=d.isSetNameDialogOpen,b=d.isSetContactEmailDialogOpen,p=d.isSetQuotaDialogOpen;return t?Object(u.jsx)(q.a,{}):s?Object(u.jsx)("p",{className:"error text-center",children:s}):Object(u.jsxs)(c.Fragment,{children:[Object(u.jsxs)("dl",{children:[Object(u.jsx)("dt",{children:Object(h.jb)("Avatar")}),Object(u.jsx)("dd",{children:Object(u.jsx)("img",{src:n,width:"48",height:"48",className:"rounded",alt:""})}),Object(u.jsx)("dt",{children:"ID"}),Object(u.jsx)("dd",{children:r}),Object(u.jsx)("dt",{children:Object(h.jb)("Name")}),Object(u.jsxs)("dd",{children:[i||"--",Object(u.jsx)("span",{title:Object(h.jb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetNameDialog})]}),Object(u.jsx)("dt",{children:Object(h.jb)("Contact Email")}),Object(u.jsxs)("dd",{children:[a||"--",Object(u.jsx)("span",{title:Object(h.jb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetContactEmailDialog})]}),Object(u.jsx)("dt",{children:Object(h.jb)("Organization")}),Object(u.jsx)("dd",{children:W}),Object(u.jsx)("dt",{children:Object(h.jb)("Space Used / Quota")}),Object(u.jsxs)("dd",{children:["".concat(f.a.bytesToSize(l)).concat(o>0?" / "+f.a.bytesToSize(o):""),Object(u.jsx)("span",{title:Object(h.jb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetQuotaDialog})]})]}),j&&Object(u.jsx)(Q,{orgID:K,email:r,name:i,updateName:this.props.updateName,toggleDialog:this.toggleSetNameDialog}),b&&Object(u.jsx)(H,{orgID:K,email:r,contactEmail:a,updateContactEmail:this.props.updateContactEmail,toggleDialog:this.toggleSetContactEmailDialog}),p&&Object(u.jsx)(Y,{orgID:K,email:r,quotaTotal:o,updateQuota:this.props.updateQuota,toggleDialog:this.toggleSetQuotaDialog})]})}}]),s}(c.Component),$=X,Z=s(154),ee=window.org.pageOptions.orgID,te=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.b.orgAdminGetOrgUserOwnedRepos(ee,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)(B,{email:this.props.email,currentItem:"owned-repos"}),Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsx)(se,{data:this.state})})]})})]})}}]),s}(c.Component),se=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(n.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.data,t=e.loading,s=e.errorMsg,n=e.repo_list;return t?Object(u.jsx)(q.a,{}):s?Object(u.jsx)("p",{className:"error text-center",children:s}):Object(u.jsx)(c.Fragment,{children:Object(u.jsxs)("table",{className:"table-hover",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"4%"}),Object(u.jsx)("th",{width:"35%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"16%",children:Object(h.jb)("Size")}),Object(u.jsx)("th",{width:"25%",children:Object(h.jb)("Last Update")}),Object(u.jsx)("th",{width:"20%"})]})}),Object(u.jsx)("tbody",{children:n.map((function(e,t){return Object(u.jsx)(ne,{data:e},t)}))})]})})}}]),s}(c.Component),ne=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.handleDeleteIconClick=function(e){e.preventDefault(),r.toggleDeleteRepoDialog()},r.toggleDeleteRepoDialog=function(){r.setState({isDeleteRepoDialogOpen:!r.state.isDeleteRepoDialogOpen})},r.deleteRepo=function(){var e=r.props.data;O.b.orgAdminDeleteOrgRepo(ee,e.repo_id).then((function(t){r.setState({deleted:!0,isRepoDeleted:!0});var s=Object(h.jb)("Successfully deleted {name}.").replace("{name}",e.repo_name);x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),r.setState({isRepoDeleted:!1})}))},r.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.state,t=e.deleted,s=e.isOpIconShown,n=e.isDeleteRepoDialogOpen,r=this.props.data;return t?null:Object(u.jsxs)(c.Fragment,{children:[Object(u.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(u.jsx)("td",{children:Object(u.jsx)("img",{src:f.a.getLibIconUrl(r,!1),alt:f.a.getLibIconTitle(r),title:f.a.getLibIconTitle(r),width:"24"})}),Object(u.jsx)("td",{children:r.repo_name}),Object(u.jsx)("td",{children:f.a.bytesToSize(r.size)}),Object(u.jsx)("td",{title:A()(r.last_modified).format("LLLL"),children:A()(r.last_modified).format("YYYY-MM-DD")}),Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete".concat(s?"":" invisible"),title:Object(h.jb)("Delete"),onClick:this.handleDeleteIconClick})})]}),n&&Object(u.jsx)(Z.a,{repo:r,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog})]})}}]),s}(c.Component),re=te,ae=window.org.pageOptions.orgID,ie=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.b.orgAdminGetOrgUserBesharedRepos(ae,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)(B,{email:this.props.email,currentItem:"shared-repos"}),Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsx)(ce,{data:this.state})})]})})]})}}]),s}(c.Component),ce=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(n.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.data,t=e.loading,s=e.errorMsg,n=e.repo_list;return t?Object(u.jsx)(q.a,{}):s?Object(u.jsx)("p",{className:"error text-center",children:s}):Object(u.jsxs)("table",{className:"table-hover",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"4%"}),Object(u.jsx)("th",{width:"30%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"26%",children:Object(h.jb)("Owner")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Size")}),Object(u.jsx)("th",{width:"25%",children:Object(h.jb)("Last Update")})]})}),Object(u.jsx)("tbody",{children:n.map((function(e,t){return Object(u.jsx)(oe,{data:e},t)}))})]})}}]),s}(c.Component),oe=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(n.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.data;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("img",{src:f.a.getLibIconUrl(e,!1),alt:f.a.getLibIconTitle(e),title:f.a.getLibIconTitle(e),width:"24"})}),Object(u.jsx)("td",{children:e.repo_name}),Object(u.jsx)("td",{children:e.owner_name}),Object(u.jsx)("td",{children:f.a.bytesToSize(e.size)}),Object(u.jsx)("td",{title:A()(e.last_modified).format("LLLL"),children:A()(e.last_modified).format("YYYY-MM-DD")})]})}}]),s}(c.Component),le=ie;A.a.locale(h.xb);var de=function e(t){Object(n.a)(this,e),this.id=t.id,this.groupName=t.group_name,this.creatorName=t.creator_name,this.creatorEmail=t.creator_email,this.creatorContactEmail=t.creator_contact_email,this.ctime=A()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},je=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleInputChange=function(e){r.setState({value:e.target.value})},r.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),r.handleSubmit())},r.handleSubmit=function(){var e=r.state.value.trim();if(!e)return!1;r.props.submit(e)},r.state={value:""},r}return Object(r.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"input-icon",children:[Object(u.jsx)("i",{className:"d-flex input-icon-addon fas fa-search"}),Object(u.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"})]})}}]),s}(o.a.Component),he=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).initData=function(e){O.b.orgAdminListOrgGroups(h.Mb,e).then((function(e){var t=e.data.groups.map((function(e){return new de(e)}));r.setState({orgGroups:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var s=r.state.page;1==t?s+=1:s-=1,r.initData(s)},r.onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.deleteGroupItem=function(e){O.b.orgAdminDeleteOrgGroup(h.Mb,e.id).then((function(t){r.setState({orgGroups:r.state.orgGroups.filter((function(t){return t.id!=e.id}))});var s=Object(h.jb)("Successfully deleted {name}");s=s.replace("{name}",e.groupName),x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.searchItems=function(e){Object(j.c)("".concat(h.hc,"org/groupadmin/search-groups/?query=").concat(encodeURIComponent(e)))},r.getSearch=function(){return Object(u.jsx)(je,{placeholder:Object(h.jb)("Search groups by name"),submit:r.searchItems})},r.state={page:1,pageNext:!1,orgGroups:[],isItemFreezed:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this.state.page;this.initData(e)}},{key:"render",value:function(){var e=this,t=this.state.orgGroups;return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{search:this.getSearch()}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("All Groups")})}),Object(u.jsxs)("div",{className:"cur-view-content",children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"30%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"35%",children:Object(h.jb)("Creator")}),Object(u.jsx)("th",{width:"23%",children:Object(h.jb)("Created At")}),Object(u.jsx)("th",{width:"12%",className:"text-center",children:Object(h.jb)("Operations")})]})}),Object(u.jsx)("tbody",{children:t.map((function(t){return Object(u.jsx)(be,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.deleteGroupItem},t.id)}))})]}),Object(u.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(h.jb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(u.jsx)("span",{children:" | "}),this.state.pageNext&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(h.jb)("Next")})]})]})]})})]})}}]),s}(c.Component),be=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.toggleDelete=function(){r.props.deleteGroupItem(r.props.group)},r.renderGroupHref=function(e){return"system admin"==e.creatorName?h.hc+"org/departmentadmin/groups/"+e.id+"/":h.hc+"org/groupadmin/"+e.id+"/"},r.renderGroupCreator=function(e){var t=h.hc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?Object(u.jsx)("td",{children:" -- "}):Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return Object(u.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),Object(u.jsx)("td",{children:e.ctime}),Object(u.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(u.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(u.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(h.jb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(u.jsx)(m.n,{children:Object(u.jsx)(m.m,{onClick:this.toggleDelete,children:Object(h.jb)("Delete")})})]})})]})}}]),s}(o.a.Component),ue=he,pe=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.toggleDelete=function(){r.props.deleteGroupItem(r.props.group)},r.renderGroupHref=function(e){return"system admin"==e.creatorName?h.hc+"org/departmentadmin/groups/"+e.id+"/":h.hc+"org/groupadmin/"+e.id+"/"},r.renderGroupCreator=function(e){var t=h.hc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?Object(u.jsx)("td",{children:" -- "}):Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return Object(u.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),Object(u.jsx)("td",{children:e.ctime}),Object(u.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(u.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(u.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(h.jb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(u.jsx)(m.n,{children:Object(u.jsx)(m.m,{onClick:this.toggleDelete,children:Object(h.jb)("Delete")})})]})})]})}}]),s}(o.a.Component),ge=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this,t=this.props.orgGroups;return Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"30%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"35%",children:Object(h.jb)("Creator")}),Object(u.jsx)("th",{width:"23%",children:Object(h.jb)("Created At")}),Object(u.jsx)("th",{width:"12%",className:"text-center",children:Object(h.jb)("Operations")})]})}),Object(u.jsx)("tbody",{children:t.map((function(t){return Object(u.jsx)(pe,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.props.toggleDelete},t.id)}))})]})})}}]),s}(o.a.Component),me=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).getItems=function(){O.b.orgAdminSearchGroup(h.Mb,r.state.query.trim()).then((function(e){var t=e.data.group_list.map((function(e){return new de(e)}));r.setState({orgGroups:t,loading:!1})})).catch((function(e){r.setState({loading:!1,errorMsg:f.a.getErrorMsg(e,!0)})}))},r.deleteGroupItem=function(e){O.b.orgAdminDeleteOrgGroup(h.Mb,e.id).then((function(t){r.setState({orgGroups:r.state.orgGroups.filter((function(t){return t.id!=e.id}))});var s=Object(h.jb)("Successfully deleted {name}");s=s.replace("{name}",e.groupName),x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.handleInputChange=function(e){r.setState({query:e.target.value},r.checkSubmitBtnActive)},r.checkSubmitBtnActive=function(){var e=r.state.query;r.setState({isSubmitBtnActive:e.trim()})},r.state={query:"",orgGroups:[],isSubmitBtnActive:!1,loading:!0,errorMsg:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,s=e.isSubmitBtnActive;return Object(u.jsx)(c.Fragment,{children:Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("Groups")})}),Object(u.jsxs)("div",{className:"cur-view-content",children:[Object(u.jsxs)("div",{className:"mt-4 mb-6",children:[Object(u.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(h.jb)("Search Groups")}),Object(u.jsxs)(m.p,{children:[Object(u.jsx)(m.q,{row:!0,children:Object(u.jsx)(m.i,{sm:5,children:Object(u.jsx)(m.s,{type:"text",name:"query",value:t,placeholder:Object(h.jb)("Search groups"),onChange:this.handleInputChange})})}),Object(u.jsx)(m.q,{row:!0,children:Object(u.jsx)(m.i,{sm:{size:5},children:Object(u.jsx)("button",{className:"btn btn-outline-primary",disabled:!s,onClick:this.getItems,children:Object(h.jb)("Submit")})})})]})]}),Object(u.jsxs)("div",{className:"mt-4 mb-6",children:[Object(u.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(h.jb)("Result")}),Object(u.jsx)(ge,{toggleDelete:this.deleteGroupItem,orgGroups:this.state.orgGroups})]})]})]})})})}}]),s}(c.Component),Oe=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props,t=e.groupID,s=e.currentItem,n="".concat(h.hc,"org/groupadmin/").concat(t,"/");return Object(u.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:Object(u.jsxs)("ul",{className:"nav",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(j.a,{to:n,className:"nav-link".concat("info"==s?" active":""),children:Object(h.jb)("Group Info")})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(j.a,{to:"".concat(n,"repos/"),className:"nav-link".concat("repos"==s?" active":""),children:Object(h.jb)("Libraries")})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(j.a,{to:"".concat(n,"members/"),className:"nav-link".concat("members"==s?" active":""),children:Object(h.jb)("Members")})})]})})}}]),s}(o.a.Component),fe=window.org.pageOptions.orgID,xe=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.b.orgAdminGetGroup(fe,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)(Oe,{groupID:this.props.groupID,currentItem:"info"}),Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsx)(ve,{data:this.state})})]})})]})}}]),s}(c.Component),ve=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).state={},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.data,t=e.loading,s=e.errorMsg,n=e.group_name,r=e.creator_email,a=e.creator_name;return t?Object(u.jsx)(q.a,{}):s?Object(u.jsx)("p",{className:"error text-center mt-2",children:s}):Object(u.jsxs)("dl",{children:[Object(u.jsx)("dt",{children:Object(h.jb)("Name")}),Object(u.jsx)("dd",{children:n}),Object(u.jsx)("dt",{children:Object(h.jb)("Creator")}),Object(u.jsx)("dd",{children:Object(u.jsx)(j.a,{to:"".concat(h.hc,"org/useradmin/info/").concat(encodeURIComponent(r),"/"),children:a})})]})}}]),s}(c.Component),we=xe,De=window.org.pageOptions.orgID,Se=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.b.orgAdminListGroupRepos(De,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)(Oe,{groupID:this.props.groupID,currentItem:"repos"}),Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsx)(Ne,{data:this.state})})]})})]})}}]),s}(c.Component),Ne=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(n.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.data,t=e.loading,s=e.errorMsg,n=e.libraries;return t?Object(u.jsx)(q.a,{}):s?Object(u.jsx)("p",{className:"error text-center mt-2",children:s}):Object(u.jsx)(c.Fragment,{children:Object(u.jsxs)("table",{className:"table-hover",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"4%"}),Object(u.jsx)("th",{width:"35%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"20%",children:Object(h.jb)("Size")}),Object(u.jsx)("th",{width:"26%",children:Object(h.jb)("Shared By")}),Object(u.jsx)("th",{width:"15%"})]})}),Object(u.jsx)("tbody",{children:n.map((function(e,t){return Object(u.jsx)(Me,{data:e},t)}))})]})})}}]),s}(c.Component),Me=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.handleDeleteIconClick=function(e){e.preventDefault(),r.toggleDeleteRepoDialog()},r.toggleDeleteRepoDialog=function(){r.setState({isDeleteRepoDialogOpen:!r.state.isDeleteRepoDialogOpen})},r.deleteRepo=function(){var e=r.props.data;O.b.orgAdminDeleteOrgRepo(De,e.repo_id).then((function(t){r.setState({deleted:!0,isRepoDeleted:!0});var s=Object(h.jb)("Successfully deleted {name}.").replace("{name}",e.name);x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),r.setState({isRepoDeleted:!1})}))},r.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.state,t=e.deleted,s=e.isOpIconShown,n=e.isDeleteRepoDialogOpen,r=this.props.data;return t?null:Object(u.jsxs)(c.Fragment,{children:[Object(u.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(u.jsx)("td",{children:Object(u.jsx)("img",{src:f.a.getLibIconUrl(r,!1),alt:f.a.getLibIconTitle(r),title:f.a.getLibIconTitle(r),width:"24"})}),Object(u.jsx)("td",{children:r.name}),Object(u.jsx)("td",{children:f.a.bytesToSize(r.size)}),Object(u.jsx)("td",{children:Object(u.jsx)(j.a,{to:"".concat(h.hc,"org/useradmin/info/").concat(encodeURIComponent(r.shared_by),"/"),children:r.shared_by_name})}),Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete".concat(s?"":" invisible"),title:Object(h.jb)("Delete"),onClick:this.handleDeleteIconClick})})]}),n&&Object(u.jsx)(Z.a,{repo:r,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog})]})}}]),s}(c.Component),Ie=Se,Ce=window.org.pageOptions.orgID,ye=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.b.orgAdminListGroupMembers(Ce,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)(Oe,{groupID:this.props.groupID,currentItem:"members"}),Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsx)(ke,{data:this.state})})]})})]})}}]),s}(c.Component),ke=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(n.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.data,t=e.loading,s=e.errorMsg,n=e.members;return t?Object(u.jsx)(q.a,{}):s?Object(u.jsx)("p",{className:"error text-center mt-2",children:s}):Object(u.jsx)(c.Fragment,{children:Object(u.jsxs)("table",{className:"table-hover",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"10%"}),Object(u.jsx)("th",{width:"50%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"40%",children:Object(h.jb)("Role")})]})}),Object(u.jsx)("tbody",{children:n.map((function(e,t){return Object(u.jsx)(_e,{data:e},t)}))})]})})}}]),s}(c.Component),_e=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(n.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"getRoleText",value:function(){switch(this.props.data.role){case"Owner":return Object(h.jb)("Owner");case"Admin":return Object(h.jb)("Admin");case"Member":return Object(h.jb)("Member")}}},{key:"render",value:function(){var e=this.props.data;return Object(u.jsx)(c.Fragment,{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"text-center",children:Object(u.jsx)("img",{src:e.avatar_url,alt:"",className:"avatar",width:"32"})}),Object(u.jsx)("td",{children:Object(u.jsx)(j.a,{to:"".concat(h.hc,"org/useradmin/info/").concat(encodeURIComponent(e.email),"/"),children:e.name})}),Object(u.jsx)("td",{children:this.getRoleText()})]})})}}]),s}(c.Component),Ae=ye,Ue=function e(t){Object(n.a)(this,e),this.repoID=t.repo_id,this.repoName=t.repo_name,this.ownerName=t.owner_name,this.ownerEmail=t.owner_email,this.size=t.size,this.file_count=t.file_count,this.encrypted=t.encrypted,this.isDepartmentRepo=t.is_department_repo,this.groupID=t.group_id},ze=s(189),Re=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).listRepos=function(e){O.b.orgAdminListOrgRepos(h.Mb,e,r.state.sortBy).then((function(e){var t=e.data.repo_list.map((function(e){return new Ue(e)}));r.setState({orgRepos:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var s=r.state.page;1==t?s+=1:s-=1,r.listRepos(s)},r.onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.deleteRepoItem=function(e){O.b.orgAdminDeleteOrgRepo(h.Mb,e.repoID).then((function(t){r.setState({orgRepos:r.state.orgRepos.filter((function(t){return t.repoID!=e.repoID}))});var s=Object(h.jb)("Successfully deleted {name}");s=s.replace("{name}",e.repoName),x.a.success(s)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.transferRepoItem=function(e,t){r.setState({orgRepos:r.state.orgRepos.map((function(s){return s.repoID==e&&(s.ownerEmail=t.email,s.ownerName=t.value),s}))})},r.sortItems=function(e){r.setState({page:1,sortBy:e},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),s=r.state,n=s.page,a=s.sortBy;t.set("page",n),t.set("order_by",a),e.search=t.toString(),Object(j.c)(e.toString()),r.listRepos(n)}))},r.sortByFileCount=function(e){e.preventDefault(),r.sortItems("file_count")},r.sortBySize=function(e){e.preventDefault(),r.sortItems("size")},r.state={page:1,pageNext:!1,orgRepos:[],sortBy:"",isItemFreezed:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,s=this.state,n=s.page,r=s.sortBy;this.setState({sortBy:t.get("order_by")||r,page:parseInt(t.get("page")||n)},(function(){e.listRepos(e.state.page)}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.orgRepos,n=t.sortBy,r=Object(u.jsx)("span",{className:"fas fa-sort"}),a=Object(u.jsx)("span",{className:"fas fa-caret-down"});return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("All Libraries")})}),Object(u.jsxs)("div",{className:"cur-view-content",children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"5%"}),Object(u.jsx)("th",{width:"25%",children:Object(h.jb)("Name")}),Object(u.jsxs)("th",{width:"15%",children:[Object(u.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount,children:[Object(h.jb)("Files")," ","file_count"==n?a:r]})," / ",Object(u.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize,children:[Object(h.jb)("Size")," ","size"==n?a:r]})]}),Object(u.jsx)("th",{width:"32%",children:"ID"}),Object(u.jsx)("th",{width:"18%",children:Object(h.jb)("Owner")}),Object(u.jsx)("th",{width:"5%"})]})}),Object(u.jsx)("tbody",{children:s.map((function(t){return Object(u.jsx)(Le,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteRepoItem:e.deleteRepoItem,transferRepoItem:e.transferRepoItem},t.repoID)}))})]}),Object(u.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(h.jb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(u.jsx)("span",{children:" | "}),this.state.pageNext&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(h.jb)("Next")})]})]})]})})]})}}]),s}(c.Component),Le=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.toggleDelete=function(){r.props.deleteRepoItem(r.props.repo)},r.toggleTransfer=function(){r.props.transferRepoItem(r.props.repo)},r.renderLibIcon=function(e){var t,s;return e.encrypted?(t=h.Hb+"img/lib/48/lib-encrypted.png",s=Object(h.jb)("Encrypted library")):(t=h.Hb+"img/lib/48/lib.png",s=Object(h.jb)("Read-Write library")),Object(u.jsx)("img",{src:t,title:s,alt:s,width:"24"})},r.renderRepoOwnerHref=function(e){return e.isDepartmentRepo?h.hc+"org/admin/#address-book/groups/"+e.groupID+"/":h.hc+"org/useradmin/info/"+e.ownerEmail+"/"},r.toggleTransfer=function(){r.setState({isTransferDialogShow:!r.state.isTransferDialogShow})},r.onTransferRepo=function(e){var t=r.props.repo;O.b.orgAdminTransferOrgRepo(h.Mb,t.repoID,e.email).then((function(s){r.props.transferRepoItem(t.repoID,e);var n=Object(h.jb)("Successfully transferred the library.");x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)})),r.toggleTransfer()},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,isTransferDialogShow:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.repo,t=this.state.showMenu&&!e.isDepartmentRepo;return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:this.renderLibIcon(e)}),Object(u.jsx)("td",{children:e.repoName}),Object(u.jsx)("td",{children:"".concat(e.file_count," / ").concat(f.a.bytesToSize(e.size))}),Object(u.jsx)("td",{children:e.repoID}),Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:this.renderRepoOwnerHref(e),children:e.ownerName})}),Object(u.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(u.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(u.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(h.jb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(u.jsxs)(m.n,{children:[Object(u.jsx)(m.m,{onClick:this.toggleDelete,children:Object(h.jb)("Delete")}),Object(u.jsx)(m.m,{onClick:this.toggleTransfer,children:Object(h.jb)("Transfer")})]})]})})]}),this.state.isTransferDialogShow&&Object(u.jsx)(I.a,{children:Object(u.jsx)(ze.a,{itemName:e.repoName,submit:this.onTransferRepo,toggleDialog:this.toggleTransfer})})]})}}]),s}(o.a.Component),Fe=Re,Ee=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).state={storage_quota:0,storage_usage:0,member_quota:0,member_usage:0,active_members:0},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.b.orgAdminGetOrgInfo().then((function(t){e.setState({storage_quota:t.data.storage_quota,storage_usage:t.data.storage_usage,member_quota:t.data.member_quota,member_usage:t.data.member_usage,active_members:t.data.active_members})}))}},{key:"render",value:function(){return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("Info")})}),Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsxs)("dl",{children:[Object(u.jsx)("dt",{children:Object(h.jb)("Space Used")}),this.state.storage_quota>0?Object(u.jsxs)("dd",{children:[f.a.bytesToSize(this.state.storage_usage)," / ",f.a.bytesToSize(this.state.storage_quota)]}):Object(u.jsx)("dd",{children:f.a.bytesToSize(this.state.storage_usage)}),h.Nb?Object(u.jsxs)("dt",{children:[Object(h.jb)("Active Users")," / ",Object(h.jb)("Total Users")," / ",Object(h.jb)("Limits")]}):Object(u.jsxs)("dt",{children:[Object(h.jb)("Active Users")," / ",Object(h.jb)("Total Users")]}),h.Nb?Object(u.jsxs)("dd",{children:[this.state.active_members>0?this.state.active_members:"--"," / ",this.state.member_usage>0?this.state.member_usage:"--"," / ",this.state.member_quota>0?this.state.member_quota:"--"]}):Object(u.jsxs)("dd",{children:[this.state.active_members>0?this.state.active_members:"--"," / ",this.state.member_usage>0?this.state.member_usage:"--"]})]})})]})})]})}}]),s}(c.Component),Pe=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).copyToClipBoard=function(){Object(y.a)(r.props.currentLinkHref);var e=Object(h.jb)("Link has been copied to clipboard");x.a.success(e),r.props.toggle()},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.currentLinkHref;return Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:Object(h.jb)("Link")}),Object(u.jsx)(m.y,{children:Object(u.jsx)("p",{children:Object(u.jsx)("a",{target:"_blank",href:e,children:e})})}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(h.jb)("Cancel")})," ",Object(u.jsx)(m.c,{color:"primary",onClick:this.copyToClipBoard,children:Object(h.jb)("Copy")})]})]})}}]),s}(o.a.Component),Ge=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).listOrgLinks=function(e){O.b.orgAdminListOrgLinks(r.state.page).then((function(e){var t=e.data;r.setState({linkList:t.link_list,page:t.page,pageNext:t.page_next})}))},r.onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.onChangePageNum=function(e,t){e.preventDefault();var s=r.state.page;1==t?s+=1:s-=1,r.listOrgLinks(s)},r.deleteOrgLink=function(e){O.b.orgAdminDeleteOrgLink(e).then((function(e){!0===e.data.success&&r.listOrgLinks(r.state.page)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.openLinkDialog=function(e){var t;t=e.name.indexOf("/")>-1?h.Xb+"/d/"+e.token+"/":h.Xb+"/f/"+e.token+"/",r.setState({currentLinkHref:t}),r.toggleLinkDialog()},r.toggleLinkDialog=function(){r.setState({isShowLinkDialog:!r.state.isShowLinkDialog})},r.state={linkList:null,page:1,pageNext:!1,isItemFreezed:!1,isShowLinkDialog:!1,currentLinkHref:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.listOrgLinks(this.state.page)}},{key:"render",value:function(){var e=this,t=this.state.linkList;return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("All Public Links")})}),Object(u.jsxs)("div",{className:"cur-view-content",children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"50%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Owner")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Created At")}),Object(u.jsx)("th",{width:"10%",children:Object(h.jb)("Count")}),Object(u.jsx)("th",{width:"10%"})]})}),Object(u.jsx)("tbody",{children:t&&t.map((function(t,s){return Object(u.jsx)(o.a.Fragment,{children:Object(u.jsx)(Te,{link:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteOrgLink:e.deleteOrgLink,openLinkDialog:e.openLinkDialog})},s)}))})]}),Object(u.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(h.jb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(u.jsx)("span",{children:" | "}),this.state.pageNext&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(h.jb)("Next")})]})]})]})}),this.state.isShowLinkDialog&&Object(u.jsx)(Pe,{currentLinkHref:this.state.currentLinkHref,toggle:this.toggleLinkDialog})]})}}]),s}(o.a.Component),Te=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props,t=e.link,s=e.deleteOrgLink,n=h.hc+"org/useradmin/info/"+encodeURIComponent(t.owner_email)+"/";return Object(u.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:n,children:t.owner_name})}),Object(u.jsx)("td",{children:A()(t.created_time).fromNow()}),Object(u.jsx)("td",{children:t.view_count}),Object(u.jsx)("td",{className:"cursor-pointer text-center",children:this.state.showMenu&&Object(u.jsxs)(m.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(u.jsx)(m.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(h.jb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(u.jsxs)(m.n,{children:[Object(u.jsx)(m.m,{onClick:s.bind(this,t.token),children:Object(h.jb)("Delete")}),Object(u.jsx)(m.m,{onClick:this.props.openLinkDialog.bind(this,t),children:Object(h.jb)("View Link")})]})]})})]})}}]),s}(o.a.Component),qe=Ge,Be=(s(210),function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){return Object(n.a)(this,s),t.call(this,e)}return Object(r.a)(s,[{key:"render",value:function(){return Object(u.jsx)("div",{className:"h-100 org-departments",children:this.props.children})}}]),s}(o.a.Component)),Qe=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleSubmit=function(){if(r.validateName()){var e=-1;r.props.parentGroupID&&(e=r.props.parentGroupID),O.b.orgAdminAddDepartGroup(h.Mb,e,r.state.departName.trim()).then((function(e){r.props.toggle(),r.props.onDepartChanged()})).catch((function(e){var t=Object(h.jb)(e.response.data.error_msg);r.setState({errMessage:t})}))}},r.validateName=function(){var e="";return!!r.state.departName.trim().length||(e=Object(h.jb)("Name is required"),r.setState({errMessage:e}),!1)},r.handleChange=function(e){r.setState({departName:e.target.value})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.state={departName:"",errMessage:""},r.newInput=o.a.createRef(),r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this,t=this.props.parentGroupID?Object(h.jb)("New Sub-department"):Object(h.jb)("New Department");return Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:t}),Object(u.jsxs)(m.y,{children:[Object(u.jsx)(m.p,{children:Object(u.jsxs)(m.q,{children:[Object(u.jsx)(m.w,{for:"departName",children:Object(h.jb)("Name")}),Object(u.jsx)(m.s,{id:"departName",onKeyPress:this.handleKeyPress,value:this.state.departName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}})]})}),this.state.errMessage&&Object(u.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(u.jsx)(m.z,{children:Object(u.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(h.jb)("Submit")})})]})}}]),s}(o.a.Component),He=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).deleteDepart=function(){r.props.toggle(),O.b.orgAdminDeleteDepartGroup(h.Mb,r.props.groupID).then((function(e){r.props.onDepartChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r}return Object(r.a)(s,[{key:"render",value:function(){var e=Object(h.jb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.groupName)+"</span>"),Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:Object(h.jb)("Delete Department")}),Object(u.jsx)(m.y,{children:Object(u.jsx)("p",{dangerouslySetInnerHTML:{__html:e}})}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(h.jb)("Cancel")}),Object(u.jsx)(m.c,{color:"primary",onClick:this.deleteDepart,children:Object(h.jb)("Delete")})]})]})}}]),s}(o.a.Component),Ye=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).setGroupQuota=function(){var e=r.state.quota;if(e.length&&/^[1-9]\d*$/im.test(e)||-2==e){r.setState({errMessage:""});var t=-2==r.state.quota?r.state.quota:1e6*r.state.quota;O.b.orgAdminSetGroupQuota(h.Mb,r.props.groupID,t).then((function(e){r.props.toggle(),r.props.onDepartChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}else{var s=Object(h.jb)("Quota is invalid.");r.setState({errMessage:s})}},r.handleChange=function(e){var t=e.target.value.trim();r.setState({quota:t})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.setGroupQuota(),e.preventDefault())},r.state={quota:"",errMessage:""},r.newInput=o.a.createRef(),r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:Object(h.jb)("Set Quota")}),Object(u.jsxs)(m.y,{children:[Object(u.jsxs)(m.t,{children:[Object(u.jsx)(m.s,{onKeyPress:this.handleKeyPress,value:this.state.quota,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}),Object(u.jsx)(m.u,{addonType:"append",children:"MB"})]}),Object(u.jsxs)("p",{className:"tip",children:[Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:Object(h.jb)("An integer that is greater than 0 or equal to -2.")}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:Object(h.jb)("Tip: -2 means no limit.")})]}),this.state.errMessage&&Object(u.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(u.jsx)(m.z,{children:Object(u.jsx)(m.c,{color:"primary",onClick:this.setGroupQuota,children:Object(h.jb)("Submit")})})]})}}]),s}(o.a.Component);A.a.locale(h.xb);var Ve=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).listDepartGroups=function(){O.b.orgAdminListDepartGroups(h.Mb).then((function(e){r.setState({groups:e.data.data})}))},r.showDeleteDepartDialog=function(e){r.setState({showDeleteDepartDialog:!0,groupID:e.id,groupName:e.name})},r.showSetGroupQuotaDialog=function(e){r.setState({showSetGroupQuotaDialog:!0,groupID:e})},r.toggleAddDepartDialog=function(){r.setState({isShowAddDepartDialog:!r.state.isShowAddDepartDialog})},r.toggleCancel=function(){r.setState({showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},r.onDepartChanged=function(){r.listDepartGroups()},r.state={groups:null,groupID:"",groupName:"",showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1,isShowAddDepartDialog:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.listDepartGroups()}},{key:"render",value:function(){var e=this,t=this.state.groups,s=Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)("button",{className:"btn btn-secondary operation-item",title:Object(h.jb)("New Department"),onClick:this.toggleAddDepartDialog,children:Object(h.jb)("New Department")}),this.state.isShowAddDepartDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(Qe,{onDepartChanged:this.onDepartChanged,groupID:this.state.groupID,toggle:this.toggleAddDepartDialog})})]});return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{children:s}),Object(u.jsx)("div",{className:"main-panel-center flex-row h-100",children:Object(u.jsxs)("div",{className:"cur-view-container o-auto",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("div",{className:"fleft",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("Departments")})})}),Object(u.jsx)("div",{className:"cur-view-content",children:t&&t.length>0?Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"40%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"25%",children:Object(h.jb)("Created At")}),Object(u.jsx)("th",{width:"20%",children:Object(h.jb)("Quota")}),Object(u.jsx)("th",{width:"15%"})]})}),Object(u.jsx)("tbody",{children:t.map((function(t,s){return Object(u.jsx)(o.a.Fragment,{children:Object(u.jsx)(Ke,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog})},t.id)}))})]}):Object(u.jsx)("p",{className:"no-group",children:Object(h.jb)("No departments")})}),Object(u.jsxs)(o.a.Fragment,{children:[this.state.showDeleteDepartDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(He,{toggle:this.toggleCancel,groupID:this.state.groupID,groupName:this.state.groupName,onDepartChanged:this.onDepartChanged})}),this.state.showSetGroupQuotaDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(Ye,{toggle:this.toggleCancel,groupID:this.state.groupID,onDepartChanged:this.onDepartChanged})})]})]})})]})}}]),s}(o.a.Component),Ke=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.state={highlight:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.group,t=this.state.highlight,s=h.hc+"org/departmentadmin/groups/"+e.id+"/";return Object(u.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:Object(u.jsx)(j.a,{to:s,children:e.name})}),Object(u.jsx)("td",{children:A()(e.created_at).fromNow()}),Object(u.jsxs)("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id),children:[f.a.bytesToSize(e.quota)," ",Object(u.jsx)("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(t?"":"vh")})]}),Object(u.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteDepartDialog.bind(this,e),children:Object(u.jsx)("span",{className:"sf2-icon-delete action-icon  ".concat(t?"":"vh"),title:"Delete"})})]})}}]),s}(o.a.Component),We=Ve,Xe=s(252),Je=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e}),r.Options=[]},r.handleSubmit=function(){if(r.state.selectedOption){var e=r.state.selectedOption.email;r.refs.orgSelect.clearSelect(),r.setState({errMessage:[]}),O.b.orgAdminAddGroupMember(h.Mb,r.props.groupID,e).then((function(e){r.setState({selectedOption:null}),e.data.failed.length>0&&r.setState({errMessage:e.data.failed[0].error_msg}),e.data.success.length>0&&(r.props.onMemberChanged(),r.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},r.state={selectedOption:null,errMessage:""},r.Options=[],r}return Object(r.a)(s,[{key:"render",value:function(){return Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:Object(h.jb)("Add Member")}),Object(u.jsxs)(m.y,{children:[Object(u.jsx)(P.a,{placeholder:Object(h.jb)("Search users..."),onSelectChange:this.handleSelectChange,ref:"orgSelect",isMulti:!1,className:"org-add-member-select"}),this.state.errMessage&&Object(u.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(h.jb)("Submit")}),Object(u.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(h.jb)("Cancel")})]})]})}}]),s}(o.a.Component),$e=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).deleteMember=function(){var e=r.props.member.email;O.b.orgAdminDeleteGroupMember(h.Mb,r.props.groupID,e).then((function(e){e.data.success&&(r.props.onMemberChanged(),r.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r}return Object(r.a)(s,[{key:"render",value:function(){var e=Object(h.jb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.member.name)+"</span>"),Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:Object(h.jb)("Delete Member")}),Object(u.jsx)(m.y,{children:Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)(m.c,{color:"primary",onClick:this.deleteMember,children:Object(h.jb)("Delete")}),Object(u.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(h.jb)("Cancel")})]})]})}}]),s}(o.a.Component),Ze=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleSubmit=function(){r.validateName()&&O.b.orgAdminAddDepartmentRepo(h.Mb,r.props.groupID,r.state.repoName.trim()).then((function(e){r.props.toggle(),r.props.onRepoChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);r.setState({errMessage:t})}))},r.validateName=function(){var e="";return!!r.state.repoName.trim().length||(e=Object(h.jb)("Name is required"),r.setState({errMessage:e}),!1)},r.handleChange=function(e){r.setState({repoName:e.target.value})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.state={repoName:"",errMessage:""},r.newInput=o.a.createRef(),r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:Object(h.jb)("New Library")}),Object(u.jsxs)(m.y,{children:[Object(u.jsx)(m.p,{children:Object(u.jsxs)(m.q,{children:[Object(u.jsx)(m.w,{for:"repoName",children:Object(h.jb)("Name")}),Object(u.jsx)(m.s,{id:"repoName",onKeyPress:this.handleKeyPress,value:this.state.repoName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}})]})}),this.state.errMessage&&Object(u.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(u.jsx)(m.z,{children:Object(u.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(h.jb)("Submit")})})]})}}]),s}(o.a.Component),et=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).deleteRepo=function(){O.b.orgAdminDeleteDepartmentRepo(h.Mb,r.props.groupID,r.props.repo.repo_id).then((function(e){e.data.success&&(r.props.onRepoChanged(),r.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r}return Object(r.a)(s,[{key:"render",value:function(){var e=Object(h.jb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.repo.name)+"</span>"),Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggle,children:[Object(u.jsx)(m.A,{toggle:this.props.toggle,children:Object(h.jb)("Delete Library")}),Object(u.jsx)(m.y,{children:Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),Object(u.jsxs)(m.z,{children:[Object(u.jsx)(m.c,{color:"primary",onClick:this.deleteRepo,children:Object(h.jb)("Delete")}),Object(u.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(h.jb)("Cancel")})]})]})}}]),s}(o.a.Component);A.a.locale(h.xb);var tt=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).listOrgGroupRepo=function(e){O.b.orgAdminListGroupRepos(h.Mb,e).then((function(e){r.setState({repos:e.data.libraries})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.listOrgMembers=function(e){O.b.orgAdminListGroupInfo(h.Mb,e,!0).then((function(e){r.setState({members:e.data.members,groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.listSubDepartGroups=function(e){O.b.orgAdminListGroupInfo(h.Mb,e,!0).then((function(e){r.setState({groups:e.data.groups})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.toggleCancel=function(){r.setState({showDeleteMemberDialog:!1,showDeleteRepoDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},r.onSubDepartChanged=function(){r.listSubDepartGroups(r.props.groupID)},r.onRepoChanged=function(){r.listOrgGroupRepo(r.props.groupID)},r.onMemberChanged=function(){r.listOrgMembers(r.props.groupID)},r.toggleItemFreezed=function(e){r.setState({isItemFreezed:e})},r.showDeleteMemberDialog=function(e){r.setState({showDeleteMemberDialog:!0,deletedMember:e})},r.showDeleteRepoDialog=function(e){r.setState({showDeleteRepoDialog:!0,deletedRepo:e})},r.toggleAddRepoDialog=function(){r.setState({isShowAddRepoDialog:!r.state.isShowAddRepoDialog})},r.toggleAddMemberDialog=function(){r.setState({isShowAddMemberDialog:!r.state.isShowAddMemberDialog})},r.toggleAddDepartDialog=function(){r.setState({isShowAddDepartDialog:!r.state.isShowAddDepartDialog})},r.showDeleteDepartDialog=function(e){r.setState({showDeleteDepartDialog:!0,subGroupID:e.id,subGroupName:e.name})},r.showSetGroupQuotaDialog=function(e){r.setState({showSetGroupQuotaDialog:!0,subGroupID:e})},r.state={groupName:"",isItemFreezed:!1,ancestorGroups:[],members:[],deletedMember:{},isShowAddMemberDialog:!1,showDeleteMemberDialog:!1,repos:[],deletedRepo:{},isShowAddRepoDialog:!1,showDeleteRepoDialog:!1,groups:[],subGroupID:"",subGroupName:"",isShowAddDepartDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listOrgGroupRepo(e),this.listOrgMembers(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&(this.listOrgGroupRepo(e.groupID),this.listOrgMembers(e.groupID))}},{key:"render",value:function(){var e=this,t=this.state,s=t.members,n=t.repos,r=t.groups,a=this.props.groupID,i="btn btn-secondary operation-item",l=Object(u.jsxs)(c.Fragment,{children:[a&&Object(u.jsx)("button",{className:i,title:Object(h.jb)("New Sub-department"),onClick:this.toggleAddDepartDialog,children:Object(h.jb)("New Sub-department")}),a&&Object(u.jsx)("button",{className:i,title:Object(h.jb)("Add Member"),onClick:this.toggleAddMemberDialog,children:Object(h.jb)("Add Member")}),a&&Object(u.jsx)("button",{className:i,onClick:this.toggleAddRepoDialog,title:Object(h.jb)("New Library"),children:Object(h.jb)("New Library")}),this.state.isShowAddMemberDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(Je,{toggle:this.toggleAddMemberDialog,onMemberChanged:this.onMemberChanged,groupID:a})}),this.state.isShowAddRepoDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(Ze,{toggle:this.toggleAddRepoDialog,onRepoChanged:this.onRepoChanged,groupID:a})}),this.state.isShowAddDepartDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(Qe,{onDepartChanged:this.onSubDepartChanged,parentGroupID:a,toggle:this.toggleAddDepartDialog})})]});return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{children:l}),Object(u.jsxs)("div",{className:"main-panel-center flex-row h-100",children:[Object(u.jsxs)("div",{className:"cur-view-container o-auto",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("div",{className:"fleft",children:Object(u.jsxs)("h3",{className:"sf-heading",children:[a?Object(u.jsx)(j.a,{to:h.hc+"org/departmentadmin/",children:Object(h.jb)("Departments")}):Object(u.jsx)("span",{children:Object(h.jb)("Departments")}),this.state.ancestorGroups.map((function(e){var t=h.hc+"org/departmentadmin/groups/"+e.id+"/";return Object(u.jsxs)("span",{children:[" / ",Object(u.jsx)(j.a,{to:t,children:e.name})]},e.id)})),a&&Object(u.jsxs)("span",{children:[" / ",this.state.groupName]})]})})}),Object(u.jsxs)("div",{className:"cur-view-subcontainer org-groups",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("div",{className:"fleft",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("Sub-departments")})})}),Object(u.jsx)("div",{className:"cur-view-content",children:r&&r.length>0?Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"40%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"25%",children:Object(h.jb)("Created At")}),Object(u.jsx)("th",{width:"20%",children:Object(h.jb)("Quota")}),Object(u.jsx)("th",{width:"15%"})]})}),Object(u.jsx)("tbody",{children:r.map((function(t,s){return Object(u.jsx)(o.a.Fragment,{children:Object(u.jsx)(rt,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog})},t.id)}))})]}):Object(u.jsx)("p",{className:"no-group",children:Object(h.jb)("No sub-departments")})})]}),Object(u.jsxs)("div",{className:"cur-view-subcontainer org-members",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("div",{className:"fleft",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("Members")})})}),Object(u.jsx)("div",{className:"cur-view-content",children:s&&0!==s.length?Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"5%"}),Object(u.jsx)("th",{width:"50%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Role")}),Object(u.jsx)("th",{width:"30%"})]})}),Object(u.jsx)("tbody",{children:s.map((function(t,s){return Object(u.jsx)(o.a.Fragment,{children:Object(u.jsx)(st,{member:t,showDeleteMemberDialog:e.showDeleteMemberDialog,isItemFreezed:e.state.isItemFreezed,onMemberChanged:e.onMemberChanged,toggleItemFreezed:e.toggleItemFreezed,groupID:a})},s)}))})]}):Object(u.jsx)("p",{className:"no-member",children:Object(h.jb)("No members")})})]}),Object(u.jsxs)("div",{className:"cur-view-subcontainer org-libriries",children:[Object(u.jsx)("div",{className:"cur-view-path",children:Object(u.jsx)("div",{className:"fleft",children:Object(u.jsx)("h3",{className:"sf-heading",children:Object(h.jb)("Libraries")})})}),n.length>0?Object(u.jsx)("div",{className:"cur-view-content",children:Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"5%"}),Object(u.jsx)("th",{width:"50%",children:Object(h.jb)("Name")}),Object(u.jsx)("th",{width:"30%",children:Object(h.jb)("Size")}),Object(u.jsx)("th",{width:"15%"})]})}),Object(u.jsx)("tbody",{children:n.map((function(t,s){return Object(u.jsx)(o.a.Fragment,{children:Object(u.jsx)(nt,{repo:t,showDeleteRepoDialog:e.showDeleteRepoDialog})},s)}))})]})}):Object(u.jsx)("p",{className:"no-libraty",children:Object(h.jb)("No libraries")})]})]}),Object(u.jsxs)(o.a.Fragment,{children:[this.state.showDeleteMemberDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)($e,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:a})}),this.state.showDeleteRepoDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(et,{toggle:this.toggleCancel,onRepoChanged:this.onRepoChanged,repo:this.state.deletedRepo,groupID:a})}),this.state.showDeleteDepartDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(He,{toggle:this.toggleCancel,groupID:this.state.subGroupID,groupName:this.state.subGroupName,onDepartChanged:this.onSubDepartChanged})}),this.state.showSetGroupQuotaDialog&&Object(u.jsx)(I.a,{children:Object(u.jsx)(Ye,{toggle:this.toggleCancel,groupID:this.state.subGroupID,onDepartChanged:this.onSubDepartChanged})})]})]})]})}}]),s}(o.a.Component),st=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({highlight:!1})},r.toggleMemberRoleMenu=function(){r.setState({showRoleMenu:!r.state.showRoleMenu})},r.onChangeUserRole=function(e){var t="Admin"===e;O.b.orgAdminSetGroupMemberRole(h.Mb,r.props.groupID,r.props.member.email,t).then((function(e){r.props.onMemberChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)})),r.setState({highlight:!1})},r.state={highlight:!1,showRoleMenu:!1},r.roles=["Admin","Member"],r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.member,t=this.state.highlight,s=h.Xb+"/org/useradmin/info/"+e.email+"/";return"Owner"===e.role?null:Object(u.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:Object(u.jsx)("img",{src:e.avatar_url,alt:"member-header",width:"24",className:"avatar"})}),Object(u.jsx)("td",{children:Object(u.jsx)("a",{href:s,children:e.name})}),Object(u.jsx)("td",{children:Object(u.jsx)(Xe.a,{isTextMode:!0,isEditIconShow:t,currentRole:e.role,roles:this.roles,onRoleChanged:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})}),this.props.isItemFreezed?Object(u.jsx)("td",{}):Object(u.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteMemberDialog.bind(this,e),children:Object(u.jsx)("span",{className:"sf2-icon-x3 action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),s}(o.a.Component),nt=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.state={highlight:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.repo,t=this.state.highlight,s=f.a.getLibIconUrl(e);return Object(u.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:Object(u.jsx)("img",{src:s,width:"24",alt:Object(h.jb)("icon")})}),Object(u.jsx)("td",{children:e.name}),Object(u.jsxs)("td",{children:[f.a.bytesToSize(e.size)," "]}),Object(u.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteRepoDialog.bind(this,e),children:Object(u.jsx)("span",{className:"sf2-icon-delete action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),s}(o.a.Component),rt=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.state={highlight:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.group,t=this.state.highlight,s=h.hc+"org/departmentadmin/groups/"+e.id+"/";return Object(u.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:Object(u.jsx)(j.a,{to:s,children:e.name})}),Object(u.jsx)("td",{children:A()(e.created_at).fromNow()}),Object(u.jsxs)("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id),children:[f.a.bytesToSize(e.quota)," ",Object(u.jsx)("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(t?"":"vh")})]}),Object(u.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteDepartDialog.bind(this,e),children:Object(u.jsx)("span",{className:"sf2-icon-delete action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),s}(o.a.Component),at=tt,it=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).tabItemClick=function(e){r.props.tabItemClick(e)},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(M,{}),Object(u.jsx)("div",{className:"main-panel-center flex-row",children:Object(u.jsxs)("div",{className:"cur-view-container",children:[Object(u.jsx)("div",{className:"cur-view-path org-user-nav",children:Object(u.jsxs)("ul",{className:"nav",children:[Object(u.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("logadmin")},children:Object(u.jsx)(j.a,{className:"nav-link ".concat("logadmin"===this.props.currentTab?"active":""),to:h.hc+"org/logadmin/",title:Object(h.jb)("File Access"),children:Object(h.jb)("File Access")})}),Object(u.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("file-update")},children:Object(u.jsx)(j.a,{className:"nav-link ".concat("file-update"===this.props.currentTab?"active":""),to:h.hc+"org/logadmin/file-update/",title:Object(h.jb)("File Update"),children:Object(h.jb)("File Update")})}),Object(u.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("perm-audit")},children:Object(u.jsx)(j.a,{className:"nav-link ".concat("perm-audit"===this.props.currentTab?"active":""),to:h.hc+"org/logadmin/perm-audit/",title:Object(h.jb)("Permission"),children:Object(h.jb)("Permission")})})]})}),this.props.children]})})]})}}]),s}(c.Component),ct=s(27);A.a.locale(h.xb);var ot=function e(t){Object(n.a)(this,e),this.ip=t.ip,this.type=t.type,this.device=t.device,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.file_name=t.file_name,this.file_path=t.file_path,this.user_name=t.user_name,this.user_email=t.user_email,this.user_contact_email=t.user_contact_email,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss")};s(531);A.a.locale(h.xb);var lt=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).initData=function(e,t,s){O.b.orgAdminListFileAudit(e,t,s).then((function(e){var t=e.data.log_list.map((function(e){return new ot(e)}));r.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page,userSelected:e.data.user_selected,repoSelected:e.data.repo_selected})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var s=r.state.page;1==t?s+=1:s-=1;var n=r.state.userSelected,a=r.state.repoSelected;r.initData(n,a,s)},r.filterUser=function(e){r.setState({userSelected:e})},r.filterRepo=function(e){r.setState({repoSelected:e})},r.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,s=this.state.repoSelected;this.initData(t,s,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(u.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&Object(u.jsxs)(o.a.Fragment,{children:[this.state.userSelected&&Object(u.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(u.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&Object(u.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[Object(u.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"24%",children:Object(h.jb)("User")}),Object(u.jsx)("th",{width:"10%",children:Object(h.jb)("Type")}),Object(u.jsx)("th",{width:"13%",children:Object(h.jb)("IP")}),Object(u.jsx)("th",{width:"17%",children:Object(h.jb)("Date")}),Object(u.jsx)("th",{width:"18%",children:Object(h.jb)("Library")}),Object(u.jsx)("th",{width:"18%",children:Object(h.jb)("File")})]})}),Object(u.jsx)("tbody",{children:t.map((function(t,s){return Object(u.jsx)(dt,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},s)}))})]}),Object(u.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(h.jb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(u.jsx)("span",{children:" | "}),this.state.pageNext&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(h.jb)("Next")})]})]})}}]),s}(o.a.Component),dt=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.toggleUserDropdown=function(){r.setState({userDropdownOpen:!r.state.userDropdownOpen})},r.renderUser=function(e){return e.user_email?Object(u.jsxs)("span",{children:[Object(u.jsx)("a",{href:h.hc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",Object(u.jsxs)(m.l,{size:"sm",isOpen:r.state.userDropdownOpen,toggle:r.toggleUserDropdown,className:r.state.highlight?"":"vh",tag:"span",children:[Object(u.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(u.jsx)(m.n,{children:Object(u.jsxs)(m.m,{onClick:r.props.filterUser.bind(Object(ct.a)(r),e.user_email),children:[Object(h.jb)("Only Show")," ",Object(u.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):Object(h.jb)("Anonymous User")},r.renderType=function(e){return-1!=e.indexOf("web")&&(e="web"),-1!=e.indexOf("api")&&(e="api"),-1!=e.indexOf("share-link")&&(e="share link"),e},r.toggleRepoDropdown=function(){r.setState({repoDropdownOpen:!r.state.repoDropdownOpen})},r.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),Object(u.jsxs)("span",{children:[Object(u.jsx)("span",{children:t}),e.repo_name&&Object(u.jsxs)(m.l,{size:"sm",isOpen:r.state.repoDropdownOpen,toggle:r.toggleRepoDropdown,className:r.state.highlight?"":"vh",children:[Object(u.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(u.jsx)(m.n,{children:Object(u.jsxs)(m.m,{size:"sm",onClick:r.props.filterRepo.bind(Object(ct.a)(r),e.repo_name),children:[Object(h.jb)("Only Show")," ",Object(u.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:Object(u.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:this.renderUser(e)}),Object(u.jsx)("td",{children:this.renderType(e.type)}),Object(u.jsx)("td",{children:e.ip}),Object(u.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")}),Object(u.jsx)("td",{children:this.renderRepo(e)}),Object(u.jsx)("td",{children:Object(u.jsx)("span",{title:e.file_path,children:e.file_name})})]})}}]),s}(o.a.Component),jt=lt;A.a.locale(h.xb);var ht=function e(t){Object(n.a)(this,e),this.repo_id=t.repo_id,this.description=t.description,this.repo_name=t.repo_name,this.user_name=t.user_name,this.user_email=t.user_email,this.repo_encrypted=t.repo_encrypted,this.repo_commit_id=t.repo_commit_id,this.user_contact_email=t.user_contact_email,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss")},bt=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).renderContentItem=function(e){var t="";t+='<ul class="list-group list-group-flush">';for(var s=0,n=e.length;s<n;s++)t+='<li class="list-group-item">'+e[s]+"</li>";return{__html:t+="</ul>"}},r.renderContent=function(){return r.state.newfile.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:Object(h.jb)("New files")}),Object(u.jsx)("p",{children:r.state.time}),Object(u.jsx)("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.newfile)})]}):r.state.removed.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:Object(h.jb)("Deleted files")}),Object(u.jsx)("p",{children:r.state.time}),Object(u.jsx)("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.removed)})]}):r.state.renamed.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:Object(h.jb)("Renamed or Moved files")}),Object(u.jsx)("p",{children:r.state.time}),Object(u.jsx)("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.renamed)})]}):r.state.modified.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:Object(h.jb)("Modified files")}),Object(u.jsx)("p",{children:r.state.time}),Object(u.jsx)("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.modified)})]}):r.state.newdir.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:Object(h.jb)("New directories")}),Object(u.jsx)("p",{children:r.state.time}),Object(u.jsx)("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.newdir)})]}):r.state.deldir.length>0?Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:Object(h.jb)("Deleted directories")}),Object(u.jsx)("p",{children:r.state.time}),Object(u.jsx)("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.deldir)})]}):void 0},r.state={time:"",renamed:[],deldir:[],modified:[],newdir:[],newfile:[],removed:[]},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;O.b.orgAdminGetFileUpdateDetail(this.props.repoID,this.props.commitID).then((function(t){e.setState({time:t.data.date_time,renamed:e.state.renamed.concat(t.data.renamed),deldir:e.state.deldir.concat(t.data.deldir),modified:e.state.modified.concat(t.data.modified),newdir:e.state.newdir.concat(t.data.newdir),newfile:e.state.newfile.concat(t.data.new),removed:e.state.removed.concat(t.data.removed)})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},{key:"render",value:function(){return Object(u.jsxs)(m.x,{isOpen:!0,toggle:this.props.toggleCancel,children:[Object(u.jsx)(m.A,{toggle:this.props.toggleCancel,children:Object(h.jb)("Modification Details")}),Object(u.jsx)(m.y,{children:this.renderContent()})]})}}]),s}(o.a.Component);A.a.locale(h.xb);var ut=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).initData=function(e,t,s){O.b.orgAdminListFileUpdate(e,t,s).then((function(e){var t=e.data.log_list.map((function(e){return new ht(e)}));r.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var s=r.state.page;1==t?s+=1:s-=1;var n=r.state.userSelected,a=r.state.repoSelected;r.initData(n,a,s)},r.toggleCancelDetail=function(){r.setState({showDetails:!r.state.showDetails})},r.onDetails=function(e,t){e.preventDefault(),r.setState({showDetails:!r.state.showDetails,repoID:t.repo_id,commitID:t.repo_commit_id})},r.filterUser=function(e){r.setState({userSelected:e})},r.filterRepo=function(e){r.setState({repoSelected:e})},r.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1,showDetails:!1,repoID:"",commitID:""},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,s=this.state.repoSelected;this.initData(t,s,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(u.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&Object(u.jsxs)(o.a.Fragment,{children:[this.state.userSelected&&Object(u.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(u.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&Object(u.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[Object(u.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"25%",children:Object(h.jb)("User")}),Object(u.jsx)("th",{width:"17%",children:Object(h.jb)("Date")}),Object(u.jsx)("th",{width:"25%",children:Object(h.jb)("Library")}),Object(u.jsx)("th",{width:"33%",children:Object(h.jb)("Action")})]})}),Object(u.jsx)("tbody",{children:t.map((function(t,s){return Object(u.jsx)(pt,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,onDetails:e.onDetails,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},s)}))})]}),Object(u.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(h.jb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(u.jsx)("span",{children:" | "}),this.state.pageNext&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(h.jb)("Next")})]}),this.state.showDetails&&Object(u.jsx)(I.a,{children:Object(u.jsx)(bt,{repoID:this.state.repoID,commitID:this.state.commitID,toggleCancel:this.toggleCancelDetail})})]})}}]),s}(c.Component),pt=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.toggleUserDropdown=function(){r.setState({userDropdownOpen:!r.state.userDropdownOpen})},r.renderUser=function(e){return e.user_email?Object(u.jsxs)("span",{children:[Object(u.jsx)("a",{href:h.hc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",Object(u.jsxs)(m.l,{size:"sm",isOpen:r.state.userDropdownOpen,toggle:r.toggleUserDropdown,className:r.state.highlight?"":"vh",tag:"span",children:[Object(u.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(u.jsx)(m.n,{children:Object(u.jsxs)(m.m,{onClick:r.props.filterUser.bind(Object(ct.a)(r),e.user_email),children:[Object(h.jb)("Only Show")," ",Object(u.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):Object(h.jb)("Anonymous User")},r.toggleRepoDropdown=function(){r.setState({repoDropdownOpen:!r.state.repoDropdownOpen})},r.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),Object(u.jsxs)("span",{children:[Object(u.jsx)("span",{children:t}),e.repo_name&&Object(u.jsxs)(m.l,{size:"sm",isOpen:r.state.repoDropdownOpen,toggle:r.toggleRepoDropdown,className:r.state.highlight?"":"vh",children:[Object(u.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(u.jsx)(m.n,{children:Object(u.jsxs)(m.m,{size:"sm",onClick:r.props.filterRepo.bind(Object(ct.a)(r),e.repo_name),children:[Object(h.jb)("Only Show")," ",Object(u.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},r.renderAction=function(e){return e.repo_encrypted||!e.repo_id?Object(u.jsx)("td",{children:e.description}):Object(u.jsxs)("td",{children:[e.description,Object(u.jsx)("a",{className:"font-weight-normal text-muted ml-1",href:"#",onClick:function(t){return r.props.onDetails(t,e)},children:Object(h.jb)("Details")})]})},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:Object(u.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:this.renderUser(e)}),Object(u.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")}),Object(u.jsx)("td",{children:this.renderRepo(e)}),this.renderAction(e)]})}}]),s}(o.a.Component),gt=ut;A.a.locale(h.xb);var mt=function e(t){Object(n.a)(this,e),this.from_user_name=t.from_user_name,this.from_user_email=t.from_user_email,this.from_user_contact_email=t.from_user_contact_email,this.to_user_email=t.to_user_email,this.to_user_name=t.to_user_name,this.to_user_contact_email=t.to_user_contact_email,this.to_group_name=t.to_group_name,this.to_group_id=t.to_group_id,this.type=t.type,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.folder_name=t.folder_name,this.folder_path=t.folder_path,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss"),this.permission=t.permission};A.a.locale(h.xb);var Ot=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).initData=function(e,t,s){O.b.orgAdminListPermAudit(e,t,s).then((function(e){var t=e.data.log_list.map((function(e){return new mt(e)}));r.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var s=r.state.page;1==t?s+=1:s-=1,r.initData(s)},r.filterUser=function(e){r.setState({userSelected:e})},r.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,s=this.state.repoSelected;this.initData(t,s,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(u.jsxs)("div",{className:"cur-view-content",children:[this.state.userSelected&&Object(u.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(u.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"18%",children:Object(h.jb)("Share From")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Share To")}),Object(u.jsx)("th",{width:"8%",children:Object(h.jb)("Actions")}),Object(u.jsx)("th",{width:"13%",children:Object(h.jb)("Permission")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Library")}),Object(u.jsx)("th",{width:"15%",children:Object(h.jb)("Folder")}),Object(u.jsx)("th",{width:"16%",children:Object(h.jb)("Date")})]})}),Object(u.jsx)("tbody",{children:t.map((function(t,s){return Object(u.jsx)(ft,{permEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,userSelected:e.state.userSelected},s)}))})]}),Object(u.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(h.jb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(u.jsx)("span",{children:" | "}),this.state.pageNext&&Object(u.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(h.jb)("Next")})]})]})}}]),s}(c.Component),ft=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.renderFromUser=function(e){return e.from_user_email?Object(u.jsxs)("span",{children:[Object(u.jsx)("a",{href:h.hc+"org/useradmin/info/"+e.from_user_email+"/",children:e.from_user_name})," ",Object(u.jsxs)(m.l,{size:"sm",isOpen:r.state.userDropdownOpen,toggle:r.toggleUserDropdown,className:r.state.highlight?"":"vh",tag:"span",children:[Object(u.jsx)(m.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(u.jsx)(m.n,{children:Object(u.jsxs)(m.m,{onClick:r.props.filterUser.bind(Object(ct.a)(r),e.from_user_email),children:[Object(h.jb)("Only Show")," ",Object(u.jsx)("span",{className:"font-weight-bold",children:e.from_user_name})]})})]})]}):Object(h.jb)("Anonymous User")},r.toggleUserDropdown=function(){r.setState({userDropdownOpen:!r.state.userDropdownOpen})},r.renderToUser=function(e){return-1!=e.type.indexOf("public")?Object(u.jsx)("a",{href:h.hc+"org/",children:Object(h.jb)("Organization")}):-1!=e.type.indexOf("group")?e.to_group_name?Object(u.jsx)("a",{href:h.hc+"org/groupadmin/"+e.to_group_id+"/",children:e.to_group_name}):"Deleted":-1!=e.type.indexOf("user")?Object(u.jsx)("a",{href:h.hc+"org/useradmin/info/"+e.to_user_email+"/",children:e.to_user_name}):void 0},r.renderType=function(e){return-1!=e.indexOf("add")&&(e="Add"),-1!=e.indexOf("modify")&&(e="Modify"),-1!=e.indexOf("delete")&&(e="Delete"),e},r.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),t},r.renderFolder=function(e){var t="/";return e&&(t=e),t},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1},r}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props.permEvent;return this.props.userSelected&&e.from_user_email!==this.props.userSelected?null:Object(u.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(u.jsx)("td",{children:this.renderFromUser(e)}),Object(u.jsx)("td",{children:this.renderToUser(e)}),Object(u.jsx)("td",{children:this.renderType(e.type)}),Object(u.jsx)("td",{children:f.a.sharePerms(e.permission)}),Object(u.jsx)("td",{children:this.renderRepo(e)}),Object(u.jsx)("td",{children:this.renderFolder(e.folder_name)}),Object(u.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")})]})}}]),s}(o.a.Component),xt=Ot,vt=(s(185),s(107),function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).onCloseSidePanel=function(){r.setState({isSidePanelClosed:!r.state.isSidePanelClosed})},r.tabItemClick=function(e){r.setState({currentTab:e})},r.state={isSidePanelClosed:!1,currentTab:"users"},r}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2];-1!=location.href.indexOf("".concat(h.hc,"org/useradmin"))&&(t="users"),-1!=location.href.indexOf("".concat(h.hc,"org/groupadmin"))&&(t="groupadmin"),-1!=location.href.indexOf("".concat(h.hc,"org/departmentadmin"))&&(t="departmentadmin"),this.setState({currentTab:t})}},{key:"render",value:function(){var e=this.state,t=e.isSidePanelClosed,s=e.currentTab;return Object(u.jsxs)("div",{id:"main",children:[Object(u.jsx)(p,{isSidePanelClosed:t,onCloseSidePanel:this.onCloseSidePanel,currentTab:s,tabItemClick:this.tabItemClick}),Object(u.jsx)("div",{className:"main-panel o-hidden",children:Object(u.jsxs)(j.b,{className:"reach-router",children:[Object(u.jsx)(Ee,{path:h.hc+"org/orgmanage"}),Object(u.jsx)(R,{path:h.hc+"org/useradmin"}),Object(u.jsx)(F,{path:h.hc+"org/useradmin/search-users"}),Object(u.jsx)(T,{path:h.hc+"org/useradmin/admins/"}),Object(u.jsx)($,{path:h.hc+"org/useradmin/info/:email/"}),Object(u.jsx)(re,{path:h.hc+"org/useradmin/info/:email/repos/"}),Object(u.jsx)(le,{path:h.hc+"org/useradmin/info/:email/shared-repos/"}),Object(u.jsx)(ue,{path:h.hc+"org/groupadmin"}),Object(u.jsx)(me,{path:h.hc+"org/groupadmin/search-groups"}),Object(u.jsx)(we,{path:h.hc+"org/groupadmin/:groupID/"}),Object(u.jsx)(Ie,{path:h.hc+"org/groupadmin/:groupID/repos/"}),Object(u.jsx)(Ae,{path:h.hc+"org/groupadmin/:groupID/members/"}),Object(u.jsx)(Fe,{path:h.hc+"org/repoadmin"}),Object(u.jsx)(qe,{path:h.hc+"org/publinkadmin"}),Object(u.jsxs)(Be,{path:h.hc+"org/departmentadmin",children:[Object(u.jsx)(We,{path:"/"}),Object(u.jsx)(at,{path:"groups/:groupID"})]}),Object(u.jsxs)(it,{path:h.hc+"org/logadmin",currentTab:s,tabItemClick:this.tabItemClick,children:[Object(u.jsx)(jt,{path:"/"}),Object(u.jsx)(gt,{path:"file-update"}),Object(u.jsx)(xt,{path:"perm-audit"})]})]})})]})}}]),s}(o.a.Component));d.a.render(Object(u.jsx)(vt,{}),document.getElementById("wrapper"))},210:function(e,t,s){},241:function(e,t,s){},531:function(e,t,s){}},[[1589,1,0]]]);
//# sourceMappingURL=orgAdmin.chunk.js.map