{"version":3,"sources":["library-details-page.js","components/expand-text.js","../node_modules/react-show-more/lib/ShowMore.js","../node_modules/react-truncate/lib/Truncate.js"],"names":["_window$libraryDetail","window","libraryDetails","pageOptions","repoName","repoDesc","institute","authors","year","doi_repos","archive_repos","bloxberg_certs","owner_contact_email","LibraryDetailsPage","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","console","log","call","archiveTheadData","width","text","gettext","doiTheadData","certTheadData","state","showArchives","JSON","parse","length","showDoi","showCerts","_createClass","key","value","_jsxs","className","children","_jsx","href","siteRoot","src","mediaUrl","logoPath","height","logoHeight","logoWidth","title","siteTitle","alt","ExpandText","maxLength","ShowMore","lines","more","less","anchorClass","this","Content","theadData","data","type","React","Component","_React$Component2","_super2","_this2","renderTbody","map","item","index","version","created","concat","repo_id","doi","content_name","path","transaction_id","checksum","_this$props","ReactDOM","render","document","getElementById","_Component","showFull","visibleText","firstHalf","substring","secondHalf","self","onClick","setState","defaultProps","Object","defineProperty","exports","defineProperties","target","i","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_propTypes2","_reactTruncate2","obj","__esModule","default","_possibleConstructorReturn","ReferenceError","_ref","_temp","instance","TypeError","_len","arguments","args","Array","_key","__proto__","getPrototypeOf","apply","expanded","truncated","handleTruncate","toggleLines","event","preventDefault","subClass","superClass","create","constructor","setPrototypeOf","_props","_state","createElement","ellipsis","onTruncate","propTypes","node","number","string","module","_extends","assign","source","hasOwnProperty","Truncate","styles","position","visibility","top","left","elements","onResize","bind","calcTargetWidth","measureWidth","getLines","renderLine","canvas","canvasContext","getContext","parentNode","removeChild","addEventListener","prevProps","forceUpdate","timeout","removeEventListener","cancelAnimationFrame","div","contentKey","HTMLElement","innerHTML","replace","test","didTruncate","requestAnimationFrame","callback","targetWidth","Math","floor","getBoundingClientRect","style","getComputedStyle","font","join","measureText","offsetWidth","numLines","trimWhitespace","innerText","trimRight","textLines","split","line","ellipsisWidth","textWords","resultLine","push","textRest","lower","upper","middle","slice","lastLineText","pop","_lower","_upper","_middle","splice","shift","arr","br","_props2","spanProps","keys","indexOf","_objectWithoutProperties","ref","targetEl","textEl","ellipsisEl","PropTypes","oneOfType","oneOf","bool","func"],"mappings":"oSAOAA,EAGIC,OAAOC,eAAeC,YAFxBC,EAAQJ,EAARI,SAAUC,EAAQL,EAARK,SAAUC,EAASN,EAATM,UAAWC,EAAOP,EAAPO,QAASC,EAAIR,EAAJQ,KACxCC,EAAST,EAATS,UAAWC,EAAaV,EAAbU,cAAeC,EAAcX,EAAdW,eAAgBC,EAAmBZ,EAAnBY,oBAItCC,EAAkB,SAAAC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,YAAAJ,GAEtB,SAAAA,EAAYK,GAAQ,IAADC,EAwBhB,OAxBgBC,YAAA,KAAAP,GACjBQ,QAAQC,IAAIX,IACZQ,EAAAH,EAAAO,KAAA,KAAML,IACDM,iBAAmB,CACtB,CAACC,MAAO,MAAOC,KAAMC,aAAQ,YAC7B,CAACF,MAAO,MAAOC,KAAMC,aAAQ,SAC7B,CAACF,MAAO,MAAOC,KAAMC,aAAQ,qBAG/BR,EAAKS,aAAe,CAClB,CAACH,MAAO,MAAOC,KAAMC,aAAQ,SAC7B,CAACF,MAAO,MAAOC,KAAMC,aAAQ,SAG/BR,EAAKU,cAAgB,CACnB,CAACJ,MAAO,MAAOC,KAAMC,aAAQ,SAC7B,CAACF,MAAO,MAAOC,KAAMC,aAAQ,SAC7B,CAACF,MAAO,MAAOC,KAAMC,aAAQ,UAG/BR,EAAKW,MAAQ,CACXC,aAAeC,KAAKC,MAAMvB,GAAewB,OAAS,EAClDC,QAAUH,KAAKC,MAAMxB,GAAWyB,OAAS,EACzCE,UAAYJ,KAAKC,MAAMtB,GAAgBuB,OAAS,GACjDf,CACH,CAgFC,OAhFAkB,YAAAxB,EAAA,EAAAyB,IAAA,SAAAC,MAED,WACE,OACGC,eAAA,OAAKC,UAAU,2BAA0BC,SAAA,CACtCC,cAAA,OAAKF,UAAU,4CAA2CC,SACxDC,cAAA,KAAGC,KAAMC,KAASH,SAChBC,cAAA,OAAKG,IAAKC,KAAWC,KAAUC,OAAQC,KAAYzB,MAAO0B,KAAWC,MAAOC,KAAWC,IAAI,aAI/FX,cAAA,OAAKF,UAAU,6CAA4CC,SACvDC,cAAA,OAAKF,UAAU,MAAKC,SAClBF,eAAA,OAAKC,UAAU,uBAAsBC,SAAA,CACnCC,cAAA,MAAAD,SAAIC,cAACY,IAAU,CACbC,UAAW,GACXf,UAAU,aACVf,KAAMtB,MAGRuC,cAACc,IAAQ,CACLC,MAAO,EACPC,KAAK,YACLC,KAAK,YACLC,YAAY,GAAEnB,SAEbrC,IAELsC,cAAA,SACAH,eAAA,OAAKC,UAAU,YAAWC,SAAA,CAACF,eAAA,KAAAE,SAAA,CAAIf,aAAQ,aAAa,QAAOpB,KAC1DD,GAAakC,eAAA,OAAKC,UAAU,iBAAgBC,SAAA,CAACF,eAAA,KAAAE,SAAA,CAAIf,aAAQ,aAAa,QAAOrB,KAC7EE,GAAQgC,eAAA,OAAKC,UAAU,iBAAgBC,SAAA,CAACF,eAAA,KAAAE,SAAA,CAAIf,aAAQ,QAAQ,QAAOnB,KACpEmC,cAAA,SACCmB,KAAKhC,MAAMC,cACVY,cAAA,OAAKF,UAAU,2DAA0DC,SACvEC,cAAA,KAAGF,UAAU,MAAKC,SAAEf,aAAQ,gBAG/BmC,KAAKhC,MAAMC,cACVY,cAACoB,EAAO,CACNC,UAAWF,KAAKtC,iBAChByC,KAAMjC,KAAKC,MAAMvB,GACjBwD,KAAK,YAGRJ,KAAKhC,MAAMC,cAAgBY,cAAA,SAE3BmB,KAAKhC,MAAMK,SACVQ,cAAA,OAAKF,UAAU,2DAA0DC,SACvEC,cAAA,KAAGF,UAAU,MAAKC,SAAEf,aAAQ,sCAG/BmC,KAAKhC,MAAMK,SACVQ,cAACoB,EAAO,CACNC,UAAWF,KAAKlC,aAChBqC,KAAMjC,KAAKC,MAAMxB,GACjByD,KAAK,QAGRJ,KAAKhC,MAAMK,SAAWQ,cAAA,SACtBmB,KAAKhC,MAAMM,WACVO,cAAA,OAAKF,UAAU,2DAA0DC,SACvEC,cAAA,KAAGF,UAAU,MAAKC,SAAEf,aAAQ,6BAG/BmC,KAAKhC,MAAMM,WACVO,cAACoB,EAAO,CACNC,UAAWF,KAAKjC,cAChBoC,KAAMjC,KAAKC,MAAMtB,GACjBuD,KAAK,SAGRJ,KAAKhC,MAAMM,WAAaO,cAAA,SAEzBH,eAAA,OAAKC,UAAU,YAAWC,SAAA,CAACF,eAAA,KAAAE,SAAA,CAAIf,aAAQ,WAAW,QAAMgB,cAAA,KAAGC,KAAM,UAAYhC,EAAoB8B,SAAE9B,gBAMnH,KAACC,CAAA,CA3GqB,CAASsD,IAAMC,WA8GjCL,EAAO,SAAAM,GAAAtD,YAAAgD,EAAAM,GAAA,IAAAC,EAAArD,YAAA8C,GAEX,SAAAA,EAAY7C,GAAQ,IAADqD,EAsClB,OAtCkBnD,YAAA,KAAA2C,IACjBQ,EAAAD,EAAA/C,KAAA,KAAML,IAGRsD,YAAc,SAACP,EAAMC,GACnB,OAAOA,GACL,IAAK,UACH,OAAOD,EAAKQ,KAAI,SAACC,EAAMC,GAAK,OACzBnC,eAAA,MAAAE,SAAA,CACCF,eAAA,MAAAE,SAAA,CAAKgC,EAAKE,QAAQ,OAClBpC,eAAA,MAAAE,SAAA,CAAKgC,EAAKG,QAAQ,OAClBlC,cAAA,MAAAD,SACEC,cAAA,KAAGC,KAAI,GAAAkC,OAAKjC,KAAQ,iBAAAiC,OAAgBJ,EAAKK,QAAO,KAAAD,OAAIJ,EAAKE,QAAO,OAAOxB,MAAOzB,aAAQ,QAAQe,SAAEf,aAAQ,cAJlGgD,EAML,IACT,IAAK,MACH,OAAOV,EAAKQ,KAAI,SAACC,EAAMC,GAAK,OACzBnC,eAAA,MAAAE,SAAA,CACCF,eAAA,MAAAE,SAAA,CAAKgC,EAAKG,QAAQ,OAClBlC,cAAA,MAAAD,SACEC,cAAA,KAAGC,KAAM8B,EAAKM,IAAItC,SAAEgC,EAAKM,UAHnBL,EAKL,IACT,IAAK,OACH,OAAOV,EAAKQ,KAAI,SAACC,EAAMC,GAAK,OAC3BnC,eAAA,MAAAE,SAAA,CACCF,eAAA,MAAAE,SAAA,CAAKgC,EAAKO,aAAa,OACvBzC,eAAA,MAAAE,SAAA,CAAKgC,EAAKG,QAAQ,OACJ,KAAbH,EAAKQ,KACJvC,cAAA,MAAAD,SACEC,cAAA,KAAGC,KAAI,GAAAkC,OAAKjC,KAAQ,8BAAAiC,OAA6BJ,EAAKS,eAAc,KAAIzC,SAAEf,aAAQ,4BAEpFgB,cAAA,MAAAD,SACEC,cAAA,KAAGC,KAAI,GAAAkC,OAAKjC,KAAQ,8BAAAiC,OAA6BJ,EAAKS,eAAc,KAAAL,OAAIJ,EAAKU,SAAQ,KAAI1C,SAAEf,aAAQ,6BAR/FgD,EAWL,IAEX,EAACJ,CApCD,CAsDC,OAtDAlC,YAAA0B,EAAA,EAAAzB,IAAA,SAAAC,MAsCD,WACE,IAAA8C,EAAkCvB,KAAK5C,MAA/B8C,EAASqB,EAATrB,UAAWC,EAAIoB,EAAJpB,KAAMC,EAAImB,EAAJnB,KACzB,OACE1B,eAAA,SAAOC,UAAU,cAAaC,SAAA,CAC5BC,cAAA,SAAAD,SACEC,cAAA,MAAAD,SACGsB,EAAUS,KAAI,SAACC,EAAMC,GACpB,OAAOhC,cAAA,MAAgBlB,MAAOiD,EAAKjD,MAAMiB,SAAEgC,EAAKhD,MAAhCiD,EAClB,QAGJhC,cAAA,SAAAD,SACGoB,KAAKU,YAAYP,EAAMC,OAIhC,KAACH,CAAA,CA1DU,CAASI,IAAMC,WA8D5BkB,IAASC,OACP5C,cAAC9B,EAAkB,IACnB2E,SAASC,eAAe,W,iFClLpBlC,EAAU,SAAAmC,GAAA3E,YAAAwC,EAAAmC,GAAA,IAAA1E,EAAAC,YAAAsC,GACZ,SAAAA,EAAYrC,GAAQ,IAADC,EAIb,OAJaC,YAAA,KAAAmC,IACfpC,EAAAH,EAAAO,KAAA,KAAML,IACDY,MAAQ,CACT6D,UAAU,GACZxE,CACN,CAgBD,OAhBEkB,YAAAkB,EAAA,EAAAjB,IAAA,SAAAC,MAED,WACI,IAAIqD,EAAc,KAClB,GAAI9B,KAAKhC,MAAM6D,UAAY7B,KAAK5C,MAAMQ,KAAKQ,QAAU4B,KAAK5C,MAAMsC,UAC5DoC,EAAc9B,KAAK5C,MAAMQ,SACtB,CACH,IAAMmE,EAAY/B,KAAK5C,MAAMQ,KAAKoE,UAAU,EAAGhC,KAAK5C,MAAMsC,UAAY,GAChEuC,EAAajC,KAAK5C,MAAMQ,KAAKoE,UAAUhC,KAAK5C,MAAMQ,KAAKQ,OAAU4B,KAAK5C,MAAMsC,UAAY,EAAIM,KAAK5C,MAAMQ,KAAKQ,QAClH0D,EAAW,GAAAd,OAAMe,EAAS,OAAAf,OAAMiB,EACpC,CACA,IAAMC,EAAOlC,KAIb,OAAOnB,cAAA,QAAMsD,QAHQ,WACjBD,EAAKE,SAAS,CAACP,UAAWK,EAAKlE,MAAM6D,UACzC,EACoClD,UAAWqB,KAAK5C,MAAMuB,UAAUC,SAAEkD,GAC5E,KAACrC,CAAA,CAtBa,CAASa,aAyBzBb,EAAW4C,aAAe,CACxB1D,UAAW,IAKEc,K,mCCtCf6C,OAAOC,eAAeC,EAAS,aAAc,CACzC/D,OAAO,IAGX,IAAIF,EAAe,WAAc,SAASkE,EAAiBC,EAAQtF,GAAS,IAAK,IAAIuF,EAAI,EAAGA,EAAIvF,EAAMgB,OAAQuE,IAAK,CAAE,IAAIC,EAAaxF,EAAMuF,GAAIC,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMT,OAAOC,eAAeG,EAAQE,EAAWpE,IAAKoE,EAAa,CAAE,CAAE,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBO,EAAYG,UAAWF,GAAiBC,GAAaT,EAAiBO,EAAaE,GAAqBF,CAAa,CAAG,CAA7hB,GAEfI,EAASC,EAAQ,GAEjBC,EAAUC,EAAuBH,GAIjCI,EAAcD,EAFDF,EAAQ,IAMrBI,EAAkBF,EAFDF,EAAQ,MAI7B,SAASE,EAAuBG,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAEE,QAASF,EAAO,CAI9F,SAASG,EAA2B3B,EAAMzE,GAAQ,IAAKyE,EAAQ,MAAM,IAAI4B,eAAe,6DAAgE,OAAOrG,GAAyB,kBAATA,GAAqC,oBAATA,EAA8ByE,EAAPzE,CAAa,CAI/O,IAAIkC,EAAW,SAAUiC,GAGrB,SAASjC,IACL,IAAIoE,EAEAC,EAAO3G,GAZnB,SAAyB4G,EAAUjB,GAAe,KAAMiB,aAAoBjB,GAAgB,MAAM,IAAIkB,UAAU,oCAAwC,CAchJ5G,CAAgB0C,KAAML,GAEtB,IAAK,IAAIwE,EAAOC,UAAUhG,OAAQiG,EAAOC,MAAMH,GAAOI,EAAO,EAAGA,EAAOJ,EAAMI,IACzEF,EAAKE,GAAQH,UAAUG,GAG3B,OAAeP,EAAS3G,EAAQwG,EAA2B7D,MAAO+D,EAAOpE,EAAS6E,WAAalC,OAAOmC,eAAe9E,IAAWlC,KAAKiH,MAAMX,EAAM,CAAC/D,MAAMgB,OAAOqD,KAAiBhH,EAAMW,MAAQ,CAC1L2G,UAAU,EACVC,WAAW,GACZvH,EAAMwH,eAAiB,SAAUD,GAC5BA,IAAcvH,EAAMW,MAAM4G,WAC1BvH,EAAM+E,SAAS,CACXwC,UAAWA,GAGvB,EAAGvH,EAAMyH,YAAc,SAAUC,GAC7BA,EAAMC,iBAEN3H,EAAM+E,SAAS,CACXuC,UAAWtH,EAAMW,MAAM2G,UAE/B,EAAWd,EAA2BxG,EAAnC2G,EACP,CAmDA,OAnFJ,SAAmBiB,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIhB,UAAU,kEAAoEgB,GAAeD,EAAS9B,UAAYb,OAAO6C,OAAOD,GAAcA,EAAW/B,UAAW,CAAEiC,YAAa,CAAE3G,MAAOwG,EAAUpC,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAeoC,IAAY5C,OAAO+C,eAAiB/C,OAAO+C,eAAeJ,EAAUC,GAAcD,EAAST,UAAYU,EAAY,CAGzejI,CAAU0C,EAAUiC,GA+BpBrD,EAAaoB,EAAU,CAAC,CACpBnB,IAAK,SACLC,MAAO,WACH,IAAI6G,EAAStF,KAAK5C,MACdwB,EAAW0G,EAAO1G,SAClBiB,EAAOyF,EAAOzF,KACdC,EAAOwF,EAAOxF,KACdF,EAAQ0F,EAAO1F,MACfG,EAAcuF,EAAOvF,YACrBwF,EAASvF,KAAKhC,MACd2G,EAAWY,EAAOZ,SAClBC,EAAYW,EAAOX,UAGvB,OAAOtB,EAAQM,QAAQ4B,cACnB,MACA,KACAlC,EAAQM,QAAQ4B,cACZ/B,EAAgBG,QAChB,CACIhE,OAAQ+E,GAAY/E,EACpB6F,SAAUnC,EAAQM,QAAQ4B,cACtB,OACA,KACA,OACAlC,EAAQM,QAAQ4B,cACZ,IACA,CAAE1G,KAAM,IAAKH,UAAWoB,EAAaoC,QAASnC,KAAK8E,aACnDjF,IAGR6F,WAAY1F,KAAK6E,gBAErBjG,IAEHgG,GAAaD,GAAYrB,EAAQM,QAAQ4B,cACtC,OACA,KACA,IACAlC,EAAQM,QAAQ4B,cACZ,IACA,CAAE1G,KAAM,IAAKH,UAAWoB,EAAaoC,QAASnC,KAAK8E,aACnDhF,IAIhB,KAGGH,CACX,CAlFe,CAkFbyD,EAAO9C,WAETX,EAAS0C,aAAe,CACpBzC,MAAO,EACPC,KAAM,YACNC,KAAM,YACNC,YAAa,IAEjBJ,EAASgG,UAAY,CACjB/G,SAAU4E,EAAYI,QAAQgC,KAC9BhG,MAAO4D,EAAYI,QAAQiC,OAC3BhG,KAAM2D,EAAYI,QAAQgC,KAC1B9F,KAAM0D,EAAYI,QAAQgC,KAC1B7F,YAAayD,EAAYI,QAAQkC,QAErCtD,EAAQoB,QAAUjE,EAClBoG,EAAOvD,QAAUA,EAAiB,O,mCC9HlC,2CAAIwD,EAAW1D,OAAO2D,QAAU,SAAUvD,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIyB,UAAUhG,OAAQuE,IAAK,CAAE,IAAIuD,EAAS9B,UAAUzB,GAAI,IAAK,IAAInE,KAAO0H,EAAc5D,OAAOa,UAAUgD,eAAe1I,KAAKyI,EAAQ1H,KAAQkE,EAAOlE,GAAO0H,EAAO1H,GAAU,CAAE,OAAOkE,CAAQ,EAE3PnE,EAAe,WAAc,SAASkE,EAAiBC,EAAQtF,GAAS,IAAK,IAAIuF,EAAI,EAAGA,EAAIvF,EAAMgB,OAAQuE,IAAK,CAAE,IAAIC,EAAaxF,EAAMuF,GAAIC,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMT,OAAOC,eAAeG,EAAQE,EAAWpE,IAAKoE,EAAa,CAAE,CAAE,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBO,EAAYG,UAAWF,GAAiBC,GAAaT,EAAiBO,EAAaE,GAAqBF,CAAa,CAAG,CAA7hB,GAanB,IAAIoD,EAAW,SAAUxE,GAGrB,SAASwE,IACL,IAAIrC,GAbZ,SAAyBE,EAAUjB,GAAe,KAAMiB,aAAoBjB,GAAgB,MAAM,IAAIkB,UAAU,oCAAwC,CAehJ5G,CAAgB0C,KAAMoG,GAEtB,IAAK,IAAIjC,EAAOC,UAAUhG,OAAQiG,EAAOC,MAAMH,GAAOI,EAAO,EAAGA,EAAOJ,EAAMI,IACzEF,EAAKE,GAAQH,UAAUG,GAG3B,IAAIlH,EAnBZ,SAAoC6E,EAAMzE,GAAQ,IAAKyE,EAAQ,MAAM,IAAI4B,eAAe,6DAAgE,OAAOrG,GAAyB,kBAATA,GAAqC,oBAATA,EAA8ByE,EAAPzE,CAAa,CAmB3NoG,CAA2B7D,MAAO+D,EAAOqC,EAAS5B,WAAalC,OAAOmC,eAAe2B,IAAW3I,KAAKiH,MAAMX,EAAM,CAAC/D,MAAMgB,OAAOqD,KAqB3I,OAnBAhH,EAAMW,MAAQ,CAAC,EACfX,EAAMgJ,OAAS,CACXZ,SAAU,CACNa,SAAU,QACVC,WAAY,SACZC,IAAK,EACLC,KAAM,IAKdpJ,EAAMqJ,SAAW,CAAC,EAElBrJ,EAAMsJ,SAAWtJ,EAAMsJ,SAASC,KAAKvJ,GACrCA,EAAMqI,WAAarI,EAAMqI,WAAWkB,KAAKvJ,GACzCA,EAAMwJ,gBAAkBxJ,EAAMwJ,gBAAgBD,KAAKvJ,GACnDA,EAAMyJ,aAAezJ,EAAMyJ,aAAaF,KAAKvJ,GAC7CA,EAAM0J,SAAW1J,EAAM0J,SAASH,KAAKvJ,GACrCA,EAAM2J,WAAa3J,EAAM2J,WAAWJ,KAAKvJ,GAClCA,CACX,CAuVA,OA9XJ,SAAmB4H,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIhB,UAAU,kEAAoEgB,GAAeD,EAAS9B,UAAYb,OAAO6C,OAAOD,GAAcA,EAAW/B,UAAW,CAAEiC,YAAa,CAAE3G,MAAOwG,EAAUpC,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAeoC,IAAY5C,OAAO+C,eAAiB/C,OAAO+C,eAAeJ,EAAUC,GAAcD,EAAST,UAAYU,EAAY,CAMzejI,CAAUmJ,EAAUxE,GAmCpBrD,EAAa6H,EAAU,CAAC,CACpB5H,IAAK,oBACLC,MAAO,WACH,IAAIb,EAAOoC,KAAK0G,SAAS9I,KACrBiJ,EAAkB7G,KAAK6G,gBACvBF,EAAW3G,KAAK2G,SAGhBM,EAASvF,SAAS8D,cAAc,UACpCxF,KAAKkH,cAAgBD,EAAOE,WAAW,MAEvCN,GAAgB,WAERjJ,GACAA,EAAKwJ,WAAWC,YAAYzJ,EAEpC,IAEAzB,OAAOmL,iBAAiB,SAAUX,EACtC,GACD,CACCnI,IAAK,qBACLC,MAAO,SAA4B8I,GAE3BvH,KAAK5C,MAAMwB,WAAa2I,EAAU3I,UAClCoB,KAAKwH,cAILxH,KAAK5C,MAAMO,QAAU4J,EAAU5J,OAC/BqC,KAAK6G,iBAEb,GACD,CACCrI,IAAK,uBACLC,MAAO,WACH,IAAIgH,EAAWzF,KAAK0G,SAASjB,SACzBkB,EAAW3G,KAAK2G,SAChBc,EAAUzH,KAAKyH,QAGnBhC,EAAS2B,WAAWC,YAAY5B,GAEhCtJ,OAAOuL,oBAAoB,SAAUf,GAErCxK,OAAOwL,qBAAqBF,EAChC,GAID,CACCjJ,IAAK,YACLC,MAAO,SAAmBmH,GACtB,IAAIgC,EAAMlG,SAAS8D,cAAc,OAC7BqC,EAAa,cAAe1L,OAAO2L,YAAY3E,UAAY,YAAc,cAE7EyE,EAAIG,UAAYnC,EAAKmC,UAAUC,QAAQ,cAAe,KAEtD,IAAIpK,EAAOgK,EAAIC,GAEXI,EAAOvG,SAAS8D,cAAc,OAQlC,OAPAyC,EAAKF,UAAY,cAEkC,aAA/CE,EAAKJ,GAAYG,QAAQ,WAAY,QACrCJ,EAAIG,UAAYH,EAAIG,UAAUC,QAAQ,iBAAkB,MACxDpK,EAAOgK,EAAIC,IAGRjK,CACX,GACD,CACCY,IAAK,WACLC,MAAO,WACHuB,KAAK6G,iBACT,GACD,CACCrI,IAAK,aACLC,MAAO,SAAoByJ,GACvB,IAAIxC,EAAa1F,KAAK5C,MAAMsI,WAGF,oBAAfA,IACP1F,KAAKyH,QAAUtL,OAAOgM,uBAAsB,WACxCzC,EAAWwC,EACf,IAER,GACD,CACC1J,IAAK,kBACLC,MAAO,SAAyB2J,GAC5B,IAAI1F,EAAS1C,KAAK0G,SAAShE,OACvBmE,EAAkB7G,KAAK6G,gBACvBK,EAAgBlH,KAAKkH,cACrBvJ,EAAQqC,KAAK5C,MAAMO,MAIvB,GAAK+E,EAAL,CAIA,IAAI2F,EAAc1K,GAElB2K,KAAKC,MAAM7F,EAAO0E,WAAWoB,wBAAwB7K,OAIrD,IAAK0K,EACD,OAAOlM,OAAOgM,uBAAsB,WAChC,OAAOtB,EAAgBuB,EAC3B,IAGJ,IAAIK,EAAQtM,OAAOuM,iBAAiBhG,GAEhCiG,EAAO,CAACF,EAAM,eAAgBA,EAAM,cAAeA,EAAM,aAAcA,EAAM,gBAAgBG,KAAK,KAEtG1B,EAAcyB,KAAOA,EAErB3I,KAAKoC,SAAS,CACViG,YAAaA,GACdD,EAtBH,CAuBJ,GACD,CACC5J,IAAK,eACLC,MAAO,SAAsBb,GACzB,OAAOoC,KAAKkH,cAAc2B,YAAYjL,GAAMD,KAChD,GACD,CACCa,IAAK,gBACLC,MAAO,SAAuBmH,GAC1B,OAAOA,EAAKkD,WAChB,GACD,CACCtK,IAAK,YACLC,MAAO,SAAmBb,GACtB,OAAOA,EAAKoK,QAAQ,OAAQ,GAChC,GACD,CACCxJ,IAAK,WACLC,MAAO,WAqBH,IApBA,IAAIiI,EAAW1G,KAAK0G,SAChBpB,EAAStF,KAAK5C,MACd2L,EAAWzD,EAAO1F,MAClB6F,EAAWH,EAAOG,SAClBuD,EAAiB1D,EAAO0D,eACxBX,EAAcrI,KAAKhC,MAAMqK,YACzBY,EAAYjJ,KAAKiJ,UACjBnC,EAAe9G,KAAK8G,aACpBpB,EAAa1F,KAAK0F,WAClBwD,EAAYlJ,KAAKkJ,UAGjBtJ,EAAQ,GAERuJ,EADOF,EAAUvC,EAAS9I,MACTwL,MAAM,MAAMzI,KAAI,SAAU0I,GAC3C,OAAOA,EAAKD,MAAM,IACtB,IACIlB,GAAc,EACdoB,EAAgBtJ,KAAKsJ,cAActJ,KAAK0G,SAASjB,UAE5C4D,EAAO,EAAGA,GAAQN,EAAUM,IAAQ,CACzC,IAAIE,EAAYJ,EAAU,GAG1B,GAAyB,IAArBI,EAAUnL,OAAd,CAOA,IAAIoL,EAAaD,EAAUX,KAAK,KAEhC,GAAI9B,EAAa0C,IAAenB,GACH,IAArBc,EAAU/K,OAAc,CAExB8J,GAAc,EAEdtI,EAAM6J,KAAKD,GACX,KACJ,CAGJ,GAAIH,IAASN,EAAU,CAOnB,IALA,IAAIW,EAAWH,EAAUX,KAAK,KAE1Be,EAAQ,EACRC,EAAQF,EAAStL,OAAS,EAEvBuL,GAASC,GAAO,CACnB,IAAIC,EAASvB,KAAKC,OAAOoB,EAAQC,GAAS,GAItC9C,EAFW4C,EAASI,MAAM,EAAGD,EAAS,IAEbP,GAAiBjB,EAC1CsB,EAAQE,EAAS,EAEjBD,EAAQC,EAAS,CAEzB,CAEA,IAAIE,EAAeL,EAASI,MAAM,EAAGH,GAErC,GAAIX,EAIA,IAHAe,EAAeb,EAAUa,IAGjBA,EAAa3L,QAAUwB,EAAMxB,QAAQ,CAGzC2L,EAAeb,EAFAtJ,EAAMoK,MAGzB,CAGJR,EAAanJ,IAAMmF,cACf,OACA,KACAuE,EACAtE,EAER,KAAO,CAKH,IAHA,IAAIwE,EAAS,EACTC,EAASX,EAAUnL,OAAS,EAEzB6L,GAAUC,GAAQ,CACrB,IAAIC,EAAU7B,KAAKC,OAAO0B,EAASC,GAAU,GAIzCpD,EAFYyC,EAAUO,MAAM,EAAGK,EAAU,GAAGvB,KAAK,OAEtBP,EAC3B4B,EAASE,EAAU,EAEnBD,EAASC,EAAU,CAE3B,CAGA,GAAe,IAAXF,EAAc,CAEdZ,EAAON,EAAW,EAClB,QACJ,CAEAS,EAAaD,EAAUO,MAAM,EAAGG,GAAQrB,KAAK,KAC7CO,EAAU,GAAGiB,OAAO,EAAGH,EAC3B,CAEArK,EAAM6J,KAAKD,EAhFX,MAJI5J,EAAM6J,OACNN,EAAUkB,QACVhB,GAmFR,CAIA,OAFA3D,EAAWwC,GAEJtI,CACX,GACD,CACCpB,IAAK,aACLC,MAAO,SAAoB4K,EAAM1G,EAAG2H,GAChC,GAAI3H,IAAM2H,EAAIlM,OAAS,EACnB,OAAOiC,IAAMmF,cACT,OACA,CAAEhH,IAAKmE,GACP0G,GAGJ,IAAIkB,EAAKlK,IAAMmF,cAAc,KAAM,CAAEhH,IAAKmE,EAAI,OAE9C,OAAI0G,EACO,CAAChJ,IAAMmF,cACV,OACA,CAAEhH,IAAKmE,GACP0G,GACDkB,GAEIA,CAGnB,GACD,CACC/L,IAAK,SACLC,MAAO,WACH,IAAIgC,EAAST,KAET0C,EAAS1C,KAAK0G,SAAShE,OACvB8H,EAAUxK,KAAK5C,MACfwB,EAAW4L,EAAQ5L,SACnB6G,EAAW+E,EAAQ/E,SACnB7F,EAAQ4K,EAAQ5K,MAChB6K,EAjVhB,SAAkC/G,EAAKgH,GAAQ,IAAIhI,EAAS,CAAC,EAAG,IAAK,IAAIC,KAAKe,EAAWgH,EAAKC,QAAQhI,IAAM,GAAkBL,OAAOa,UAAUgD,eAAe1I,KAAKiG,EAAKf,KAAcD,EAAOC,GAAKe,EAAIf,IAAM,OAAOD,CAAQ,CAiV/LkI,CAAyBJ,EAAS,CAAC,WAAY,WAAY,UACvEnC,EAAcrI,KAAKhC,MAAMqK,YACzBtB,EAAW/G,KAAK+G,SAChBC,EAAahH,KAAKgH,WAClBtB,EAAa1F,KAAK0F,WAElB9H,OAAO,EAiBX,MAbsB,qBAAXzB,WAFMuG,IAAU2F,KAGnBzI,EAAQ,EACRhC,EAAOmJ,IAAWpG,IAAIqG,IAEtBpJ,EAAOgB,EAEP8G,GAAW,YAIZ+E,EAAU/E,kBACV+E,EAAUzB,eAEV3I,IAAMmF,cACT,OACAQ,EAAS,CAAC,EAAGyE,EAAW,CAAEI,IAAK,SAAaC,GACpCrK,EAAOiG,SAAShE,OAASoI,CAC7B,IACJzK,IAAMmF,cACF,OACA,KACA5H,GAEJyC,IAAMmF,cACF,OACA,CAAEqF,IAAK,SAAaE,GACZtK,EAAOiG,SAAS9I,KAAOmN,CAC3B,GACJnM,GAEJyB,IAAMmF,cACF,OACA,CAAEqF,IAAK,SAAaG,GACZvK,EAAOiG,SAASjB,SAAWuF,CAC/B,EAAGvC,MAAOzI,KAAKqG,OAAOZ,UAC1BA,GAGZ,KAGGW,CACX,CA1Xe,CA0Xb9F,aAEF8F,EAAST,UAAY,CACjB/G,SAAUqM,IAAUrF,KACpBH,SAAUwF,IAAUrF,KACpBhG,MAAOqL,IAAUC,UAAU,CAACD,IAAUE,MAAM,EAAC,IAASF,IAAUpF,SAChEmD,eAAgBiC,IAAUG,KAC1BzN,MAAOsN,IAAUpF,OACjBH,WAAYuF,IAAUI,MAE1BjF,EAAS/D,aAAe,CACpBzD,SAAU,GACV6G,SAAU,SACV7F,MAAO,EACPoJ,gBAAgB,EAChBrL,MAAO,GAEIyI,W","file":"static/js/libraryDetails.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from './utils/constants';\nimport ExpandText from './components/expand-text';\nimport ShowMore from 'react-show-more';\n\nimport './css/bloxberg-certificate.css';\nconst {\n  repoName, repoDesc, institute, authors, year, \n  doi_repos, archive_repos, bloxberg_certs, owner_contact_email\n} = window.libraryDetails.pageOptions;\n\n\nclass LibraryDetailsPage extends React.Component {\n\n  constructor(props) {\n    console.log(bloxberg_certs)\n    super(props);\n    this.archiveTheadData = [\n      {width: '20%', text: gettext('Version')},\n      {width: '50%', text: gettext('Date')},\n      {width: '30%', text: gettext('Link to Archive')},\n    ];\n\n    this.doiTheadData = [\n      {width: '50%', text: gettext('Date')},\n      {width: '50%', text: gettext('DOI')},\n    ]\n\n    this.certTheadData = [\n      {width: '20%', text: gettext('Name')},\n      {width: '50%', text: gettext('Date')},\n      {width: '30%', text: gettext('Link')},\n    ]\n\n    this.state = {\n      showArchives: (JSON.parse(archive_repos).length > 0) ? true : false,\n      showDoi: (JSON.parse(doi_repos).length > 0) ? true : false,\n      showCerts: (JSON.parse(bloxberg_certs).length > 0) ? true : false,\n    }\n  }\n\n  render() {\n    return(\n       <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n          </div>\n\n          <div className=\"flex-auto container-fluid pt-4 pb-6 o-auto\">\n              <div className=\"row\">\n                <div className=\"col-md-6 offset-md-1\">\n                  <h1><ExpandText\n                    maxLength={40}\n                    className='cert_title'\n                    text={repoName}\n                  />\n                  </h1>\n                  <ShowMore\n                      lines={3}\n                      more='Show more'\n                      less='Show less'\n                      anchorClass=''\n                  >\n                      {repoDesc}\n                  </ShowMore>\n                  <br/>\n                  <div className=\"table_row\"><b>{gettext('Author(s)')}: </b>{authors}</div>\n                  {institute && <div className=\"cert_table_row\"><b>{gettext('Institute')}: </b>{institute}</div>}\n                  {year && <div className=\"cert_table_row\"><b>{gettext('Year')}: </b>{year}</div>}\n                  <br/>\n                  {this.state.showArchives && \n                    <div className=\"d-flex justify-content-between align-items-center op-bar\">\n                      <p className=\"m-0\">{gettext('Archives')}</p>\n                    </div>\n                  }\n                  {this.state.showArchives &&\n                    <Content\n                      theadData={this.archiveTheadData}\n                      data={JSON.parse(archive_repos)}\n                      type=\"archive\"\n                    />\n                  }\n                  {this.state.showArchives && <br/>}\n\n                  {this.state.showDoi && \n                    <div className=\"d-flex justify-content-between align-items-center op-bar\">\n                      <p className=\"m-0\">{gettext('Digital Object Identifier(DOI)')}</p>\n                    </div>\n                  }\n                  {this.state.showDoi &&\n                    <Content\n                      theadData={this.doiTheadData}\n                      data={JSON.parse(doi_repos)}\n                      type=\"doi\"\n                    />\n                  }\n                  {this.state.showDoi && <br/>}\n                  {this.state.showCerts && \n                    <div className=\"d-flex justify-content-between align-items-center op-bar\">\n                      <p className=\"m-0\">{gettext('bloxberg Transactions')}</p>\n                    </div>\n                  }\n                  {this.state.showCerts &&\n                    <Content\n                      theadData={this.certTheadData}\n                      data={JSON.parse(bloxberg_certs)}\n                      type=\"cert\"\n                    />\n                  }\n                  {this.state.showCerts && <br/>}\n\n                  <div className=\"table_row\"><b>{gettext('Contact')}: </b><a href={\"mailto:\" + owner_contact_email}>{owner_contact_email}</a></div>\n                </div>\n              </div>\n          </div>\n        </div>\n    )\n  }\n}\n\nclass Content extends React.Component {\n\n  constructor(props) {\n    super(props);\n  } \n\n  renderTbody = (data, type) => {\n    switch(type) {\n      case \"archive\":\n        return data.map((item, index) =>\n          (<tr key={index}>\n            <td>{item.version} </td>\n            <td>{item.created} </td>\n            <td>\n              <a href={`${siteRoot}archive/libs/${item.repo_id}/${item.version}/0/`} title={gettext('Link')}>{gettext('Link')}</a>\n            </td>\n          </tr>))\n      case \"doi\":\n        return data.map((item, index) =>\n          (<tr key={index}>\n            <td>{item.created} </td>\n            <td>\n              <a href={item.doi}>{item.doi}</a>\n            </td>\n          </tr>))\n      case \"cert\":\n        return data.map((item, index) =>\n        (<tr key={index}>\n          <td>{item.content_name} </td>\n          <td>{item.created} </td>\n          {item.path == '/' ? \n            <td>\n              <a href={`${siteRoot}bloxberg-cert/transaction/${item.transaction_id}/`}>{gettext('Link to certificates')}</a>\n            </td> : \n            <td>\n              <a href={`${siteRoot}bloxberg-cert/transaction/${item.transaction_id}/${item.checksum}/`}>{gettext('Link to certificate')}</a>\n            </td>\n          }\n        </tr>))\n    }\n  }\n\n  render() {\n    const { theadData, data, type } = this.props;\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            {theadData.map((item, index) => {\n              return <th key={index} width={item.width}>{item.text}</th>;\n            })}\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderTbody(data, type)}\n        </tbody>\n      </table>\n    );\n  }\n}\n\n\nReactDOM.render(\n  <LibraryDetailsPage />,\n  document.getElementById('wrapper')\n);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  text: PropTypes.string.isRequired,\n  maxLength: PropTypes.number.isRequired,\n  className: PropTypes.string\n};\n\nclass ExpandText extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showFull: false\n        };\n    }\n\n    render() {\n        let visibleText = null;\n        if (this.state.showFull || this.props.text.length <= this.props.maxLength) {\n            visibleText = this.props.text;\n        } else {\n            const firstHalf = this.props.text.substring(0, this.props.maxLength / 2);\n            const secondHalf = this.props.text.substring(this.props.text.length - (this.props.maxLength / 2), this.props.text.length)\n            visibleText = `${firstHalf}...${secondHalf}`;\n        }\n        const self = this;\n        const clickHandler = () => {\n            self.setState({showFull: !self.state.showFull});\n        }\n        return <span onClick={clickHandler} className={this.props.className}>{visibleText}</span>;\n  }\n}\n\nExpandText.defaultProps = {\n  className: \"\"\n};\n\nExpandText.propTypes = propTypes;\n\nexport default ExpandText;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactTruncate = require('react-truncate');\n\nvar _reactTruncate2 = _interopRequireDefault(_reactTruncate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ShowMore = function (_Component) {\n    _inherits(ShowMore, _Component);\n\n    function ShowMore() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, ShowMore);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ShowMore.__proto__ || Object.getPrototypeOf(ShowMore)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n            expanded: false,\n            truncated: false\n        }, _this.handleTruncate = function (truncated) {\n            if (truncated !== _this.state.truncated) {\n                _this.setState({\n                    truncated: truncated\n                });\n            }\n        }, _this.toggleLines = function (event) {\n            event.preventDefault();\n\n            _this.setState({\n                expanded: !_this.state.expanded\n            });\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(ShowMore, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                children = _props.children,\n                more = _props.more,\n                less = _props.less,\n                lines = _props.lines,\n                anchorClass = _props.anchorClass;\n            var _state = this.state,\n                expanded = _state.expanded,\n                truncated = _state.truncated;\n\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    _reactTruncate2.default,\n                    {\n                        lines: !expanded && lines,\n                        ellipsis: _react2.default.createElement(\n                            'span',\n                            null,\n                            '... ',\n                            _react2.default.createElement(\n                                'a',\n                                { href: '#', className: anchorClass, onClick: this.toggleLines },\n                                more\n                            )\n                        ),\n                        onTruncate: this.handleTruncate\n                    },\n                    children\n                ),\n                !truncated && expanded && _react2.default.createElement(\n                    'span',\n                    null,\n                    ' ',\n                    _react2.default.createElement(\n                        'a',\n                        { href: '#', className: anchorClass, onClick: this.toggleLines },\n                        less\n                    )\n                )\n            );\n        }\n    }]);\n\n    return ShowMore;\n}(_react.Component);\n\nShowMore.defaultProps = {\n    lines: 3,\n    more: 'Show more',\n    less: 'Show less',\n    anchorClass: ''\n};\nShowMore.propTypes = {\n    children: _propTypes2.default.node,\n    lines: _propTypes2.default.number,\n    more: _propTypes2.default.node,\n    less: _propTypes2.default.node,\n    anchorClass: _propTypes2.default.string\n};\nexports.default = ShowMore;\nmodule.exports = exports['default'];","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nvar Truncate = function (_Component) {\n    _inherits(Truncate, _Component);\n\n    function Truncate() {\n        var _ref;\n\n        _classCallCheck(this, Truncate);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = Truncate.__proto__ || Object.getPrototypeOf(Truncate)).call.apply(_ref, [this].concat(args)));\n\n        _this.state = {};\n        _this.styles = {\n            ellipsis: {\n                position: 'fixed',\n                visibility: 'hidden',\n                top: 0,\n                left: 0\n            }\n        };\n\n\n        _this.elements = {};\n\n        _this.onResize = _this.onResize.bind(_this);\n        _this.onTruncate = _this.onTruncate.bind(_this);\n        _this.calcTargetWidth = _this.calcTargetWidth.bind(_this);\n        _this.measureWidth = _this.measureWidth.bind(_this);\n        _this.getLines = _this.getLines.bind(_this);\n        _this.renderLine = _this.renderLine.bind(_this);\n        return _this;\n    }\n\n    _createClass(Truncate, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var text = this.elements.text,\n                calcTargetWidth = this.calcTargetWidth,\n                onResize = this.onResize;\n\n\n            var canvas = document.createElement('canvas');\n            this.canvasContext = canvas.getContext('2d');\n\n            calcTargetWidth(function () {\n                // Node not needed in document tree to read its content\n                if (text) {\n                    text.parentNode.removeChild(text);\n                }\n            });\n\n            window.addEventListener('resize', onResize);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            // Render was based on outdated refs and needs to be rerun\n            if (this.props.children !== prevProps.children) {\n                this.forceUpdate();\n            }\n\n            // If the width prop has changed, recalculate size of contents\n            if (this.props.width !== prevProps.width) {\n                this.calcTargetWidth();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            var ellipsis = this.elements.ellipsis,\n                onResize = this.onResize,\n                timeout = this.timeout;\n\n\n            ellipsis.parentNode.removeChild(ellipsis);\n\n            window.removeEventListener('resize', onResize);\n\n            window.cancelAnimationFrame(timeout);\n        }\n\n        // Shim innerText to consistently break lines at <br/> but not at \\n\n\n    }, {\n        key: 'innerText',\n        value: function innerText(node) {\n            var div = document.createElement('div');\n            var contentKey = 'innerText' in window.HTMLElement.prototype ? 'innerText' : 'textContent';\n\n            div.innerHTML = node.innerHTML.replace(/\\r\\n|\\r|\\n/g, ' ');\n\n            var text = div[contentKey];\n\n            var test = document.createElement('div');\n            test.innerHTML = 'foo<br/>bar';\n\n            if (test[contentKey].replace(/\\r\\n|\\r/g, '\\n') !== 'foo\\nbar') {\n                div.innerHTML = div.innerHTML.replace(/<br.*?[\\/]?>/gi, '\\n');\n                text = div[contentKey];\n            }\n\n            return text;\n        }\n    }, {\n        key: 'onResize',\n        value: function onResize() {\n            this.calcTargetWidth();\n        }\n    }, {\n        key: 'onTruncate',\n        value: function onTruncate(didTruncate) {\n            var onTruncate = this.props.onTruncate;\n\n\n            if (typeof onTruncate === 'function') {\n                this.timeout = window.requestAnimationFrame(function () {\n                    onTruncate(didTruncate);\n                });\n            }\n        }\n    }, {\n        key: 'calcTargetWidth',\n        value: function calcTargetWidth(callback) {\n            var target = this.elements.target,\n                calcTargetWidth = this.calcTargetWidth,\n                canvasContext = this.canvasContext,\n                width = this.props.width;\n\n            // Calculation is no longer relevant, since node has been removed\n\n            if (!target) {\n                return;\n            }\n\n            var targetWidth = width ||\n            // Floor the result to deal with browser subpixel precision\n            Math.floor(target.parentNode.getBoundingClientRect().width);\n\n            // Delay calculation until parent node is inserted to the document\n            // Mounting order in React is ChildComponent, ParentComponent\n            if (!targetWidth) {\n                return window.requestAnimationFrame(function () {\n                    return calcTargetWidth(callback);\n                });\n            }\n\n            var style = window.getComputedStyle(target);\n\n            var font = [style['font-weight'], style['font-style'], style['font-size'], style['font-family']].join(' ');\n\n            canvasContext.font = font;\n\n            this.setState({\n                targetWidth: targetWidth\n            }, callback);\n        }\n    }, {\n        key: 'measureWidth',\n        value: function measureWidth(text) {\n            return this.canvasContext.measureText(text).width;\n        }\n    }, {\n        key: 'ellipsisWidth',\n        value: function ellipsisWidth(node) {\n            return node.offsetWidth;\n        }\n    }, {\n        key: 'trimRight',\n        value: function trimRight(text) {\n            return text.replace(/\\s+$/, '');\n        }\n    }, {\n        key: 'getLines',\n        value: function getLines() {\n            var elements = this.elements,\n                _props = this.props,\n                numLines = _props.lines,\n                ellipsis = _props.ellipsis,\n                trimWhitespace = _props.trimWhitespace,\n                targetWidth = this.state.targetWidth,\n                innerText = this.innerText,\n                measureWidth = this.measureWidth,\n                onTruncate = this.onTruncate,\n                trimRight = this.trimRight;\n\n\n            var lines = [];\n            var text = innerText(elements.text);\n            var textLines = text.split('\\n').map(function (line) {\n                return line.split(' ');\n            });\n            var didTruncate = true;\n            var ellipsisWidth = this.ellipsisWidth(this.elements.ellipsis);\n\n            for (var line = 1; line <= numLines; line++) {\n                var textWords = textLines[0];\n\n                // Handle newline\n                if (textWords.length === 0) {\n                    lines.push();\n                    textLines.shift();\n                    line--;\n                    continue;\n                }\n\n                var resultLine = textWords.join(' ');\n\n                if (measureWidth(resultLine) <= targetWidth) {\n                    if (textLines.length === 1) {\n                        // Line is end of text and fits without truncating\n                        didTruncate = false;\n\n                        lines.push(resultLine);\n                        break;\n                    }\n                }\n\n                if (line === numLines) {\n                    // Binary search determining the longest possible line inluding truncate string\n                    var textRest = textWords.join(' ');\n\n                    var lower = 0;\n                    var upper = textRest.length - 1;\n\n                    while (lower <= upper) {\n                        var middle = Math.floor((lower + upper) / 2);\n\n                        var testLine = textRest.slice(0, middle + 1);\n\n                        if (measureWidth(testLine) + ellipsisWidth <= targetWidth) {\n                            lower = middle + 1;\n                        } else {\n                            upper = middle - 1;\n                        }\n                    }\n\n                    var lastLineText = textRest.slice(0, lower);\n\n                    if (trimWhitespace) {\n                        lastLineText = trimRight(lastLineText);\n\n                        // Remove blank lines from the end of text\n                        while (!lastLineText.length && lines.length) {\n                            var prevLine = lines.pop();\n\n                            lastLineText = trimRight(prevLine);\n                        }\n                    }\n\n                    resultLine = React.createElement(\n                        'span',\n                        null,\n                        lastLineText,\n                        ellipsis\n                    );\n                } else {\n                    // Binary search determining when the line breaks\n                    var _lower = 0;\n                    var _upper = textWords.length - 1;\n\n                    while (_lower <= _upper) {\n                        var _middle = Math.floor((_lower + _upper) / 2);\n\n                        var _testLine = textWords.slice(0, _middle + 1).join(' ');\n\n                        if (measureWidth(_testLine) <= targetWidth) {\n                            _lower = _middle + 1;\n                        } else {\n                            _upper = _middle - 1;\n                        }\n                    }\n\n                    // The first word of this line is too long to fit it\n                    if (_lower === 0) {\n                        // Jump to processing of last line\n                        line = numLines - 1;\n                        continue;\n                    }\n\n                    resultLine = textWords.slice(0, _lower).join(' ');\n                    textLines[0].splice(0, _lower);\n                }\n\n                lines.push(resultLine);\n            }\n\n            onTruncate(didTruncate);\n\n            return lines;\n        }\n    }, {\n        key: 'renderLine',\n        value: function renderLine(line, i, arr) {\n            if (i === arr.length - 1) {\n                return React.createElement(\n                    'span',\n                    { key: i },\n                    line\n                );\n            } else {\n                var br = React.createElement('br', { key: i + 'br' });\n\n                if (line) {\n                    return [React.createElement(\n                        'span',\n                        { key: i },\n                        line\n                    ), br];\n                } else {\n                    return br;\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var target = this.elements.target,\n                _props2 = this.props,\n                children = _props2.children,\n                ellipsis = _props2.ellipsis,\n                lines = _props2.lines,\n                spanProps = _objectWithoutProperties(_props2, ['children', 'ellipsis', 'lines']),\n                targetWidth = this.state.targetWidth,\n                getLines = this.getLines,\n                renderLine = this.renderLine,\n                onTruncate = this.onTruncate;\n\n            var text = void 0;\n\n            var mounted = !!(target && targetWidth);\n\n            if (typeof window !== 'undefined' && mounted) {\n                if (lines > 0) {\n                    text = getLines().map(renderLine);\n                } else {\n                    text = children;\n\n                    onTruncate(false);\n                }\n            }\n\n            delete spanProps.onTruncate;\n            delete spanProps.trimWhitespace;\n\n            return React.createElement(\n                'span',\n                _extends({}, spanProps, { ref: function ref(targetEl) {\n                        _this2.elements.target = targetEl;\n                    } }),\n                React.createElement(\n                    'span',\n                    null,\n                    text\n                ),\n                React.createElement(\n                    'span',\n                    { ref: function ref(textEl) {\n                            _this2.elements.text = textEl;\n                        } },\n                    children\n                ),\n                React.createElement(\n                    'span',\n                    { ref: function ref(ellipsisEl) {\n                            _this2.elements.ellipsis = ellipsisEl;\n                        }, style: this.styles.ellipsis },\n                    ellipsis\n                )\n            );\n        }\n    }]);\n\n    return Truncate;\n}(Component);\n\nTruncate.propTypes = {\n    children: PropTypes.node,\n    ellipsis: PropTypes.node,\n    lines: PropTypes.oneOfType([PropTypes.oneOf([false]), PropTypes.number]),\n    trimWhitespace: PropTypes.bool,\n    width: PropTypes.number,\n    onTruncate: PropTypes.func\n};\nTruncate.defaultProps = {\n    children: '',\n    ellipsis: 'â€¦',\n    lines: 1,\n    trimWhitespace: false,\n    width: 0\n};\nexport default Truncate;\n;\n"],"sourceRoot":""}