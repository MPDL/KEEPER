{"version":3,"sources":["pages/search/search-results.js","pages/search/advanced-search.js","pages/search/main-panel.js","pages/search/index.js"],"names":["ResultsItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handlerFileURL","item","is_dir","siteRoot","repo_id","repo_name","fullpath","Utils","encodePath","handlerParentDirPath","index","length","name","substring","handlerParentDirURL","_createClass","key","value","this","linkContent","decodeURI","folderIconUrl","getFolderIconUrl","getDefaultLibIconUrl","fileIconUrl","getFileIconUrl","thumbnail_url","_jsxs","className","children","_jsx","src","alt","href","target","title","rel","bytesToSize","size","moment","last_modified","format","dangerouslySetInnerHTML","__html","content_highlight","React","Component","SearchResults","_React$Component2","_super2","_this$props","resultItems","total","gettext","map","_window$search$pageOp","window","search","pageOptions","search_repo","AdvancedSearch","getFileTypesList","fileTypes","fileTypeItems","ftype","i","len","push","disabledStartDate","startValue","isAfterToday","isAfter","endValue","stateAndValues","time_to","disabledEndDate","time_from","isBefore","_this2","errorDateMsg","errorSizeMsg","isShowSearchFilter","size_from","size_to","fileTypeItemsStatus","typesLength","type","Collapse","isOpen","isCollapseOpen","Row","Col","md","lg","FormGroup","check","Label","Input","checked","isAllRepoCheck","onChange","handlerRepo","isFileTypeCollapseOpen","closeFileTypeCollapse","openFileTypeCollapse","Fragment","CustomInput","id","label","inline","handlerFileTypes","autoComplete","placeholder","handlerFileTypesInput","input_fexts","onKeyDown","handleKeyDown","sm","xs","DateTimePicker","inputWidth","disabledDate","handleTimeFromInput","showHourAndMinute","handleTimeToInput","InputGroup","handleSizeFromInput","InputGroupAddon","addonType","MediaQuery","query","Button","color","onClick","handleSubmit","handleReset","handleSizeToInput","_","require","q","search_ftypes","SearchViewPanel","handleSearchParams","page","params","state","trim","per_page","_this$state","parseInt","valueOf","compareNumber","setState","getValueLength","errorMsg","isLoading","getSearchResults","num1","num2","replace","showSearchFilter","hideSearchFilter","handlePrevious","e","preventDefault","stateHistory","toaster","danger","duration","handleNext","hasMore","toggleCollapse","Array","fill","handleSearchInput","event","keyCode","isAll","newFileTypeItemsStatus","hours","minutes","seconds","isResultGot","cloneDeep","seafileAPI","searchFiles","then","res","_res$data","data","results","has_more","catch","error","response","detail","error_msg","str","code","charCodeAt","concat","Loading","SearchView","onSearchedClick","selectedItem","url","path","open","location","Logo","CommonToolbar","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/search.chunk.js","sourcesContent":["import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { siteRoot, gettext } from '../../utils/constants';\n\nclass ResultsItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  handlerFileURL= (item) => {\n    return item.is_dir ? siteRoot + 'library/' + item.repo_id + '/' + item.repo_name + item.fullpath :\n      siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(item.fullpath);\n  };\n\n  handlerParentDirPath= (item) => {\n    let index = item.is_dir ? item.fullpath.length - item.name.length - 1 : item.fullpath.length - item.name.length;\n    return item.fullpath.substring(0, index);\n  };\n\n  handlerParentDirURL= (item) => {\n    return siteRoot + 'library/' + item.repo_id + '/' + item.repo_name + this.handlerParentDirPath(item);\n  };\n\n  render() {\n    let item = this.props.item;\n    let linkContent = decodeURI(item.fullpath).substring(1);\n    let folderIconUrl = linkContent ? Utils.getFolderIconUrl(false, 192) : Utils.getDefaultLibIconUrl(true);\n    let fileIconUrl = item.is_dir ? folderIconUrl : Utils.getFileIconUrl(item.name, 192);\n\n    if (item.thumbnail_url !== '') {\n      fileIconUrl = item.thumbnail_url;\n    }\n\n    return (\n      <li className=\"search-result-item\">\n        <img className={linkContent ? 'item-img' : 'lib-item-img'} src={fileIconUrl} alt=\"\"/>\n        <div className=\"item-content\">\n          <div className=\"item-name ellipsis\">\n            <a href={this.handlerFileURL(item)} target=\"_blank\" title={item.name} rel=\"noreferrer\">{item.name}</a>\n          </div>\n          <div className=\"item-link ellipsis\">\n            <a href={this.handlerParentDirURL(item)} target=\"_blank\" rel=\"noreferrer\" >{item.repo_name}{this.handlerParentDirPath(item)}</a>\n          </div>\n          <div className=\"item-link ellipsis\">\n            {Utils.bytesToSize(item.size) + ' ' + moment(item.last_modified * 1000).format('YYYY-MM-DD')}\n          </div>\n          <div className=\"item-text ellipsis\" dangerouslySetInnerHTML={{__html: item.content_highlight}}></div>\n        </div>\n      </li>\n    );\n  }\n}\n\nconst resultsItemPropTypes = {\n  item: PropTypes.object.isRequired,\n};\n\nResultsItem.propTypes = resultsItemPropTypes;\n\nclass SearchResults extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { resultItems, total } = this.props;\n    return (\n      <div className=\"search-result-container position-static\">\n        <p className=\"tip\">{total > 0 ? (total + ' ' + (total === 1 ? gettext('result') : gettext('results'))) : gettext('No result')}</p>\n        <ul className=\"search-result-list\">\n          {resultItems.map((item, index) => {\n            return <ResultsItem key={index} item={item}/>;\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nconst searchResultsPropTypes = {\n  resultItems: PropTypes.array.isRequired,\n  total: PropTypes.number.isRequired\n};\n\nSearchResults.propTypes = searchResultsPropTypes;\n\nexport default SearchResults;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Button, Col, Collapse, CustomInput, FormGroup, Input, Label, Row, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport DateTimePicker from '../../components/date-and-time-picker';\n\nconst { repo_name, search_repo } = window.search.pageOptions;\n\nclass AdvancedSearch extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getFileTypesList = (fileTypes) => {\n    const fileTypeItems = [gettext('Text'), gettext('Document'), gettext('Image'), gettext('Video'), gettext('Audio'), 'PDF', 'Markdown'];\n    let ftype = [];\n    for (let i = 0, len = fileTypes.length; i < len; i++) {\n      if (fileTypes[i]) {\n        ftype.push(fileTypeItems[i]);\n      }\n    }\n    return ftype;\n  };\n\n  disabledStartDate = (startValue) => {\n    if (!startValue) {\n      return false;\n    }\n\n    const isAfterToday = startValue.isAfter(moment(), 'day');\n    const { time_to } = this.props.stateAndValues;\n    const endValue = time_to;\n    if (!endValue) {\n      return isAfterToday;\n    }\n    return startValue.isAfter(endValue) || isAfterToday;\n  }\n\n  disabledEndDate = (endValue) => {\n    if (!endValue) {\n      return false;\n    }\n\n    const isAfterToday = endValue.isAfter(moment(), 'day');\n    const { time_from } = this.props.stateAndValues;\n    const startValue = time_from;\n    if (!startValue) {\n      return isAfterToday;\n    }\n    return endValue.isBefore(startValue) || isAfterToday;\n  }\n\n  render() {\n    const { stateAndValues } = this.props;\n    const { errorDateMsg, errorSizeMsg } = stateAndValues;\n\n    if (stateAndValues.isShowSearchFilter) {\n      const { size_from, size_to, time_from, time_to, search_repo, fileTypeItemsStatus } = stateAndValues;\n      const fileTypes = this.getFileTypesList(fileTypeItemsStatus);\n      const typesLength = fileTypes.length;\n      return (\n        <div className=\"search-filters\">\n          {search_repo && <span className=\"mr-4\">{gettext('Libraries')}{': '}{search_repo == 'all'? gettext('All') : repo_name}</span>}\n          {typesLength > 0 &&\n            <span className=\"mr-4\">{gettext('File Types')}{': '}\n              {fileTypes.map((type, index) => {\n                return <span key={index}>{type}{index !== (typesLength - 1) && ','}{' '}</span>;\n              })}\n            </span>\n          }\n          {(time_from && time_to ) &&\n            <span className=\"mr-4\">{gettext('Last Update')}{': '}{time_from.format('YYYY-MM-DD')}{' '}{gettext('to')}{' '}{time_to.format('YYYY-MM-DD')}</span>\n          }\n          {(size_from && size_to) &&\n            <span className=\"mr-4\">{gettext('Size')}{': '}{size_from}{'MB - '}{size_to}{'MB'}</span>\n          }\n        </div>\n      );\n    }\n    else {\n      return (\n        <div className=\"advanced-search\">\n          <Collapse isOpen={stateAndValues.isCollapseOpen}>\n\n            {search_repo !== 'all' &&\n              <div className='search-repo search-catalog'>\n                <Row>\n                  <Col md=\"2\" lg=\"2\">{gettext('Libraries')}{': '}</Col>\n                  <Col md=\"4\" lg=\"4\">\n                    <FormGroup check>\n                      <Label check>\n                        <Input\n                          type=\"radio\" name=\"repo\"\n                          checked={stateAndValues.isAllRepoCheck}\n                          onChange={() => this.props.handlerRepo(true)}\n                        />{gettext('In all libraries')}\n                      </Label>\n                    </FormGroup>\n                  </Col>\n                  <Col md=\"4\" lg=\"4\">\n                    <FormGroup check>\n                      <Label check>\n                        <Input\n                          type=\"radio\" name=\"repo\"\n                          checked={!stateAndValues.isAllRepoCheck}\n                          onChange={() => this.props.handlerRepo(false)}\n                        />{repo_name}\n                      </Label>\n                    </FormGroup>\n                  </Col>\n                </Row>\n              </div>\n            }\n\n            <div className='search-file-types search-catalog'>\n              <Row>\n                <Col md=\"2\" lg=\"2\">{gettext('File Types')}{': '}</Col>\n                <Col md=\"4\" lg=\"4\">\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"radio\" name=\"types\"\n                        checked={!stateAndValues.isFileTypeCollapseOpen}\n                        onChange={this.props.closeFileTypeCollapse}\n                      />{gettext('All file types')}\n                    </Label>\n                  </FormGroup>\n                </Col>\n                <Col md=\"4\" lg=\"4\">\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"radio\" name=\"types\"\n                        checked={stateAndValues.isFileTypeCollapseOpen}\n                        onChange={this.props.openFileTypeCollapse}\n                      />{gettext('Custom file types')}\n                    </Label>\n                  </FormGroup>\n                </Col>\n              </Row>\n\n              <Row>\n                <Col md=\"2\" lg=\"2\"></Col>\n                <Col md=\"10\" lg=\"10\">\n                  <Collapse isOpen={stateAndValues.isFileTypeCollapseOpen}>\n                    <FormGroup className=\"search-file-types-form\">\n                      <Fragment>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkTextFiles\" label={gettext('Text files')} inline\n                          onChange={() => this.props.handlerFileTypes(0)}\n                          checked={stateAndValues.fileTypeItemsStatus[0]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkDocuments\" label={gettext('Documents')} inline\n                          onChange={() => this.props.handlerFileTypes(1)}\n                          checked={stateAndValues.fileTypeItemsStatus[1]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkImages\" label={gettext('Images')} inline\n                          onChange={() => this.props.handlerFileTypes(2)}\n                          checked={stateAndValues.fileTypeItemsStatus[2]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkVideo\" label={gettext('Video')} inline\n                          onChange={() => this.props.handlerFileTypes(3)}\n                          checked={stateAndValues.fileTypeItemsStatus[3]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkAudio\" label={gettext('Audio')} inline\n                          onChange={() => this.props.handlerFileTypes(4)}\n                          checked={stateAndValues.fileTypeItemsStatus[4]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkPdf\" label=\"PDF\" inline\n                          onChange={() => this.props.handlerFileTypes(5)}\n                          checked={stateAndValues.fileTypeItemsStatus[5]}/>\n                        <CustomInput\n                          type=\"checkbox\" id=\"checkMarkdown\" label=\"Markdown\" inline\n                          onChange={() => this.props.handlerFileTypes(6)}\n                          checked={stateAndValues.fileTypeItemsStatus[6]}/>\n                      </Fragment>\n                    </FormGroup>\n                    <input\n                      type=\"text\"\n                      className=\"form-control search-input\"\n                      name=\"query\"\n                      autoComplete=\"off\"\n                      placeholder={gettext('Input file extensions here, separate with \\',\\'')}\n                      onChange={this.props.handlerFileTypesInput}\n                      value={stateAndValues.input_fexts}\n                      onKeyDown={this.props.handleKeyDown}\n                    />\n                  </Collapse>\n                </Col>\n              </Row>\n            </div>\n\n            <div className='search-date search-catalog'>\n              <Row>\n                <Col md=\"2\" lg=\"2\" className=\"mt-2\">{gettext('Last Update')}{': '}</Col>\n                <Col md=\"4\" lg=\"4\" sm=\"4\" xs=\"5\" className=\"position-relative\">\n                  <DateTimePicker\n                    inputWidth={'100%'}\n                    disabledDate={this.disabledStartDate}\n                    value={stateAndValues.time_from}\n                    onChange={this.props.handleTimeFromInput}\n                    showHourAndMinute={false}\n                  />\n                  <span className=\"select-data-icon\"><i className=\"fa fa-calendar-alt\"></i></span>\n                </Col>\n                <div className=\"mt-2\">-</div>\n                <Col md=\"4\" lg=\"4\" sm=\"4\" xs=\"5\" className=\"position-relative\">\n                  <DateTimePicker\n                    inputWidth={'100%'}\n                    disabledDate={this.disabledEndDate}\n                    value={stateAndValues.time_to}\n                    onChange={this.props.handleTimeToInput}\n                    showHourAndMinute={false}\n                  />\n                  <span className=\"select-data-icon\"><i className=\"fa fa-calendar-alt\"></i></span>\n                </Col>\n              </Row>\n              {errorDateMsg && <Row><Col md=\"2\" lg=\"2\"></Col><Col md=\"8\" className=\"error mt-2\">{errorDateMsg}</Col></Row>}\n            </div>\n\n            <div className='search-size search-catalog'>\n              <Row>\n                <Col md=\"2\" lg=\"2\" className=\"mt-2\">{gettext('Size')}{': '}</Col>\n                <Col md=\"4\" lg=\"4\" sm=\"4\" xs=\"5\">\n                  <FormGroup>\n                    <InputGroup>\n                      <Input\n                        type=\"tel\" name=\"size_from\"\n                        onKeyDown={this.props.handleKeyDown}\n                        onChange={this.props.handleSizeFromInput}\n                        value={stateAndValues.size_from}\n                      />\n                      <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n                    </InputGroup>\n                  </FormGroup>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    {errorSizeMsg && <div className=\"error mb-4\">{errorSizeMsg}</div>}\n                    <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Submit')}</Button>\n                    <Button className=\"ml-2\" onClick={this.props.handleReset}>{gettext('Reset')}</Button>\n                  </MediaQuery>\n                </Col>\n                <div className=\"mt-2\">-</div>\n                <Col md=\"4\" lg=\"4\" sm=\"4\" xs=\"5\">\n                  <FormGroup>\n                    <InputGroup>\n                      <Input\n                        type=\"tel\" name=\"size_to\"\n                        onKeyDown={this.props.handleKeyDown}\n                        onChange={this.props.handleSizeToInput}\n                        value={stateAndValues.size_to}\n                      />\n                      <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n                    </InputGroup>\n                  </FormGroup>\n                </Col>\n              </Row>\n            </div>\n            <MediaQuery query=\"(max-width: 767.8px)\">\n              {errorSizeMsg && <div className=\"error mb-4\">{errorSizeMsg}</div>}\n              <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Submit')}</Button>\n              <Button className=\"ml-2\" onClick={this.props.handleReset}>{gettext('Reset')}</Button>\n            </MediaQuery>\n          </Collapse>\n        </div>\n      );\n    }\n  }\n}\n\nconst advancedSearchPropTypes = {\n  openFileTypeCollapse: PropTypes.func.isRequired,\n  closeFileTypeCollapse: PropTypes.func.isRequired,\n  handlerFileTypes: PropTypes.func.isRequired,\n  handlerFileTypesInput: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n  handleReset: PropTypes.func.isRequired,\n  handlerRepo: PropTypes.func.isRequired,\n  handleKeyDown: PropTypes.func.isRequired,\n  handleTimeFromInput: PropTypes.func.isRequired,\n  handleTimeToInput: PropTypes.func.isRequired,\n  handleSizeFromInput: PropTypes.func.isRequired,\n  handleSizeToInput: PropTypes.func.isRequired,\n  stateAndValues: PropTypes.object.isRequired,\n};\n\nAdvancedSearch.propTypes = advancedSearchPropTypes;\n\nexport default AdvancedSearch;\n","import React from 'react';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport SearchResults from './search-results';\nimport AdvancedSearch from './advanced-search';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\n\nimport '../../css/search.css';\n\nconst _ = require('lodash');\nconst { q, search_repo, search_ftypes } = window.search.pageOptions;\n\nclass SearchViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.stateHistory = null;\n    this.state = {\n      isCollapseOpen: search_repo !== 'all',\n      isFileTypeCollapseOpen: false,\n      isResultGot: false,\n      isLoading: true,\n      isAllRepoCheck: search_repo === 'all',\n      isShowSearchFilter: false,\n      // advanced search index\n      q: q.trim(),\n      search_repo: search_repo,\n      search_ftypes: search_ftypes,\n      fileTypeItemsStatus: [false, false, false, false, false, false, false],\n      input_fexts: '',\n      time_from: null,\n      time_to: null,\n      size_from: '',\n      size_to: '',\n      // search result\n      hasMore: false,\n      resultItems: [],\n      page: 1,\n      per_page: 20,\n      errorMsg: '',\n      errorDateMsg: '',\n      errorSizeMsg: '',\n    };\n  }\n\n  getSearchResults(params) {\n    this.setState({\n      isLoading: true,\n      isResultGot: false,\n    });\n    const stateHistory = _.cloneDeep(this.state);\n    seafileAPI.searchFiles(params, null).then(res => {\n      const { results, has_more, total } = res.data;\n      this.setState({\n        isLoading: false,\n        isResultGot: true,\n        resultItems: results,\n        hasMore: has_more,\n        total: total,\n        page: params.page,\n        isShowSearchFilter: true,\n      });\n      this.stateHistory = stateHistory;\n      this.stateHistory.resultItems = results;\n      this.stateHistory.hasMore = has_more;\n      this.stateHistory.page = params.page;\n    }).catch((error) => {\n      this.setState({ isLoading: false });\n      if (error.response) {\n        toaster.danger(error.response.data.detail || error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Please check the network.'), {duration: 3});\n      }\n    });\n  }\n\n  handleSearchParams = (page) => {\n    let params = { q: this.state.q.trim(), page: page };\n    const ftype = this.getFileTypesList();\n    if (this.state.search_repo) {params.search_repo = this.state.search_repo;}\n    if (this.state.search_ftypes) {params.search_ftypes = this.state.search_ftypes;}\n    if (this.state.per_page) {params.per_page = this.state.per_page;}\n    if (this.state.input_fexts) {params.input_fexts = this.state.input_fexts;}\n    const { time_from, time_to } = this.state;\n    if (time_from) {params.time_from = parseInt(time_from.valueOf() / 1000);}\n    if (time_to) {params.time_to = parseInt(time_to.valueOf() / 1000);}\n    if (this.state.size_from) {params.size_from = this.state.size_from * 1000 *1000;}\n    if (this.state.size_to) {params.size_to = this.state.size_to * 1000 * 1000;}\n    if (ftype.length !== 0) {params.ftype = ftype;}\n    return params;\n  };\n\n  handleSubmit = () => {\n    if (this.compareNumber(this.state.size_from, this.state.size_to)) {\n      this.setState({ errorSizeMsg: gettext('Invalid file size range.') });\n      return;\n    }\n    if (this.getValueLength(this.state.q.trim()) < 3) {\n      if (this.state.q.trim().length === 0) {\n        this.setState({ errorMsg: gettext('It is required.') });\n      } else {\n        this.setState({ errorMsg: gettext('Required at least three letters.') });\n      }\n      if (this.state.isLoading) {\n        this.setState({ isLoading: false });\n      }\n    } else {\n      const params = this.handleSearchParams(1);\n      this.getSearchResults(params);\n    }\n    if (this.state.isCollapseOpen) this.setState({ isCollapseOpen: false });\n  };\n\n  compareNumber = (num1, num2) => {\n    if (!num1 || !num2) return false;\n    if (parseInt(num1.replace(/\\-/g, '')) >= parseInt(num2.replace(/\\-/g, ''))) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  showSearchFilter = () => {\n    this.setState({ isShowSearchFilter: true });\n  }\n\n  hideSearchFilter = () => {\n    this.setState({ isShowSearchFilter: false });\n  }\n\n  handleReset = () => {\n    this.setState({\n      q: q.trim(),\n      search_repo: search_repo,\n      search_ftypes: search_ftypes,\n      fileTypeItemsStatus: [false, false, false, false, false, false, false],\n      input_fexts: '',\n      time_from: null,\n      time_to: null,\n      size_from: '',\n      size_to: '',\n      errorMsg: '',\n      errorDateMsg: '',\n      errorSizeMsg: '',\n    });\n  }\n\n  handlePrevious = (e) => {\n    e.preventDefault();\n    if (this.stateHistory && this.state.page > 1) {\n      this.setState(this.stateHistory,() => {\n        const params = this.handleSearchParams(this.state.page - 1);\n        this.getSearchResults(params);\n      });\n    } else {\n      toaster.danger(gettext('Error'), {duration: 3});\n    }\n  };\n\n  handleNext = (e) => {\n    e.preventDefault();\n    if (this.stateHistory && this.state.hasMore) {\n      this.setState(this.stateHistory,() => {\n        const params = this.handleSearchParams(this.state.page + 1);\n        this.getSearchResults(params);\n      });\n    } else {\n      toaster.danger(gettext('Error'), {duration: 3});\n    }\n  };\n\n  getValueLength(str) {\n    let code, len = 0;\n    for (let i = 0, length = str.length; i < length; i++) {\n      code = str.charCodeAt(i);\n      if (code === 10) { //solve enter problem\n        len += 2;\n      } else if (code < 0x007f) {\n        len += 1;\n      } else if (code >= 0x0080 && code <= 0x07ff) {\n        len += 2;\n      } else if (code >= 0x0800 && code <= 0xffff) {\n        len += 3;\n      }\n    }\n    return len;\n  }\n\n  toggleCollapse = () => {\n    this.setState({isCollapseOpen: !this.state.isCollapseOpen});\n    this.hideSearchFilter();\n  };\n\n  openFileTypeCollapse = () => {\n    this.setState({\n      isFileTypeCollapseOpen: true,\n      search_ftypes: 'custom',\n    });\n  };\n\n  closeFileTypeCollapse = () => {\n    this.setState({\n      isFileTypeCollapseOpen: false,\n      fileTypeItemsStatus: Array(7).fill(false),\n      search_ftypes: 'all',\n      input_fexts: '',\n    });\n  };\n\n  handleSearchInput = (event) => {\n    this.setState({ q: event.target.value });\n    if (this.state.errorMsg) this.setState({ errorMsg: ''});\n    if (this.state.errorSizeMsg) this.setState({ errorSizeMsg: '' });\n    if (this.state.errorDateMsg) this.setState({ errorDateMsg: '' });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmit();\n    }\n  };\n\n  handlerRepo = (isAll) => {\n    if (isAll) {\n      this.setState({\n        isAllRepoCheck: true,\n        search_repo: 'all',\n      });\n    } else {\n      this.setState({\n        isAllRepoCheck: false,\n        search_repo: search_repo !== 'all' ? search_repo : '',\n      });\n    }\n  };\n\n  handlerFileTypes = (i) => {\n    let newFileTypeItemsStatus = this.state.fileTypeItemsStatus;\n    newFileTypeItemsStatus[i] = !this.state.fileTypeItemsStatus[i];\n    this.setState({ fileTypeItemsStatus: newFileTypeItemsStatus });\n  };\n\n  getFileTypesList = () => {\n    const fileTypeItems = ['Text', 'Document', 'Image', 'Video', 'Audio', 'PDF', 'Markdown'];\n    let ftype = [];\n    for (let i = 0, len = this.state.fileTypeItemsStatus.length; i < len; i++){\n      if (this.state.fileTypeItemsStatus[i]) {\n        ftype.push(fileTypeItems[i]);\n      }\n    }\n    return ftype;\n  };\n\n  handlerFileTypesInput = (event) => {\n    this.setState({ input_fexts: event.target.value.trim() });\n  };\n\n  handleTimeFromInput = (value) => {\n    // set the time to be '00:00:00'\n    this.setState({time_from: value ? value.hours(0).minutes(0).seconds(0) : value});\n    if (this.state.errorDateMsg) this.setState({ errorDateMsg: '' });\n  };\n\n  handleTimeToInput = (value) => {\n    // set the time to be '23:59:59'\n    this.setState({time_to: value ? value.hours(23).minutes(59).seconds(59) : value});\n    if (this.state.errorDateMsg) this.setState({ errorDateMsg: '' });\n  };\n\n  handleSizeFromInput = (event) => {\n    this.setState({ size_from: event.target.value >= 0 ? event.target.value : 0 });\n    if (this.state.errorSizeMsg) this.setState({ errorSizeMsg: '' });\n  };\n\n  handleSizeToInput = (event) => {\n    this.setState({ size_to: event.target.value >= 0 ? event.target.value : 0 });\n    if (this.state.errorSizeMsg) this.setState({ errorSizeMsg: '' });\n  };\n\n  componentDidMount() {\n    if (this.state.q) {\n      this.handleSubmit();\n    } else {\n      this.setState({ isLoading: false });\n    }\n  }\n\n  render() {\n    let { isCollapseOpen } = this.state;\n    return (\n      <div className=\"search-page\">\n        <div className=\"search-page-container\">\n          <div className=\"input-icon align-items-center d-flex\">\n            <input\n              type=\"text\"\n              className=\"form-control search-input\"\n              name=\"query\"\n              autoComplete=\"off\"\n              value={this.state.q}\n              placeholder={gettext('Search Files')}\n              onChange={this.handleSearchInput}\n              onKeyDown={this.handleKeyDown}\n            />\n            <i className=\"search-icon-right input-icon-addon fas fa-search\" onClick={this.handleSubmit}></i>\n            <i className={`fas action-icon fa-angle-double-${isCollapseOpen ? 'up' : 'down'}`} onClick={this.toggleCollapse}></i>\n          </div>\n          {this.state.errorMsg && <div className=\"error\">{this.state.errorMsg}</div>}\n          <AdvancedSearch\n            openFileTypeCollapse={this.openFileTypeCollapse}\n            closeFileTypeCollapse={this.closeFileTypeCollapse}\n            handlerFileTypes={this.handlerFileTypes}\n            handlerFileTypesInput={this.handlerFileTypesInput}\n            handleSubmit={this.handleSubmit}\n            handleReset={this.handleReset}\n            handlerRepo={this.handlerRepo}\n            handleKeyDown={this.handleKeyDown}\n            handleTimeFromInput={this.handleTimeFromInput}\n            handleTimeToInput={this.handleTimeToInput}\n            handleSizeFromInput={this.handleSizeFromInput}\n            handleSizeToInput={this.handleSizeToInput}\n            stateAndValues={this.state}\n          />\n        </div>\n        {this.state.isLoading && <Loading/>}\n        {(!this.state.isLoading && this.state.isResultGot) &&\n        <SearchResults\n          resultItems={this.state.resultItems}\n          total={this.state.total}\n        />\n        }\n        {(!this.state.isLoading && this.state.isResultGot) &&\n          <div className=\"paginator\">\n            {this.state.page !== 1 && <a href=\"#\" onClick={this.handlePrevious}>{gettext('Previous')}</a>}\n            {(this.state.page !== 1 && this.state.hasMore) && <span> | </span>}\n            {this.state.hasMore && <a href=\"#\" onClick={this.handleNext}>{gettext('Next')}</a>}\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default SearchViewPanel;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport Logo from '../../components/logo';\nimport SearchViewPanel from './main-panel';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\nimport '../../css/search.css';\n\nclass SearchView extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  onSearchedClick = (selectedItem) => {\n    let url = selectedItem.is_dir ?\n      siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path :\n      siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n    let newWindow = window.open('about:blank');\n    newWindow.location.href = url;\n  };\n\n  render() {\n    return (\n      <div className=\"w-100 h-100\">\n        <div className=\"main-panel-north border-left-show\">\n          <Logo/>\n          <CommonToolbar onSearchedClick={this.onSearchedClick}/>\n        </div>\n        <div className=\"main-panel-south\">\n          <SearchViewPanel/>\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(\n  <SearchView/>,\n  document.getElementById('wrapper')\n);\n"],"sourceRoot":""}