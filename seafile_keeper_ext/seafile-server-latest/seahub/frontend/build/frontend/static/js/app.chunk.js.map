{"version":3,"sources":["../node_modules/component-emitter/index.js","../node_modules/engine.io-parser/lib/browser.js","components/dialog/edit-filetag-dialog.js","components/context-menu/globalEventListener.js","components/context-menu/context-menu.js","components/dialog/create-folder-dialog.js","components/dialog/zip-download-dialog.js","../node_modules/babel-preset-react-app/node_modules/regenerator-runtime/runtime.js","components/dropdown-menu/item-dropdown-menu.js","../node_modules/parseqs/index.js","../node_modules/component-inherit/index.js","models/repo-tag.js","components/dialog/image-dialog.js","components/dialog/add-related-file-dialog.js","components/dialog/list-related-file-dialog.js","components/dialog/related-file-dialogs.js","components/system-notification.js","models/group.js","models/library-details.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/dialog/sort-options.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","components/rename.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-upload-links-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","components/dialog/assign-doi-dialog.js","components/keeper-archive-metadata-form.js","components/dialog/archive-library-dialog.js","components/dialog/certify-library-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/dialog/keeper-edit-metadata-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/list-tag-dialog.js","components/dialog/update-tag-dialog.js","components/dialog/list-taggedfiles-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","components/dirent-list-view/dirent-list-item.js","assets/berg_icon.png","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","components/dialog/copy-move-dirent-progress-dialog.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/op-icon.js","components/group-members.js","components/list-and-add-group-members.js","components/search-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/socket.io-parser/index.js","../node_modules/engine.io-client/lib/xmlhttprequest.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/transport.js","../node_modules/react-modal/lib/helpers/safeHTMLElement.js","components/dialog/create-tag-dialog.js","components/dialog/share-admin-link.js","components/empty-tip.js","../node_modules/parseuri/index.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/has-binary2/index.js","../node_modules/yeast/index.js","../node_modules/indexof/index.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/on.js","../node_modules/component-bind/index.js","../node_modules/react-modal/lib/helpers/tabbable.js","../node_modules/react-modal/lib/helpers/ariaAppHider.js","../node_modules/react-modal/lib/helpers/portalOpenInstances.js","../node_modules/socket.io-client/lib/index.js","components/wiki-markdown-viewer.js","../node_modules/@seafile/react-image-lightbox/dist/index.es.js","../node_modules/react-modal/lib/index.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","../node_modules/socket.io-client/lib/url.js","../node_modules/debug/src/debug.js","../node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/after/index.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/to-array/index.js","../node_modules/backo2/index.js","../node_modules/react-modal/lib/components/Modal.js","../node_modules/react-modal/lib/components/ModalPortal.js","../node_modules/react-modal/lib/helpers/focusManager.js","../node_modules/react-modal/lib/helpers/scopeTab.js","../node_modules/warning/warning.js","../node_modules/exenv/index.js","../node_modules/react-modal/lib/helpers/classList.js","../node_modules/react-modal/lib/helpers/bodyTrap.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","components/context-menu/actions.js","../node_modules/react-select/lib/AsyncCreatable.js","../../src/constant.js","../../src/decorators/staticMethods.js","../../src/decorators/customEvent.js","../../src/decorators/bodyMode.js","../../src/utils/getPosition.js","../../src/utils/getTipContent.js","../../src/utils/aria.js","../../src/utils/nodeListToArray.js","../../src/decorators/defaultStyles.js","../../src/decorators/styler.js","../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/to-object.js","../../node_modules/core-js/internals/has.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/set-global.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/native-weak-map.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/engine-v8-version.js","../../node_modules/core-js/internals/redefine.js","../../node_modules/core-js/internals/path.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/to-integer.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/a-function.js","../../node_modules/core-js/internals/is-array.js","../../node_modules/core-js/internals/engine-user-agent.js","../../node_modules/core-js/internals/object-create.js","../../node_modules/core-js/internals/native-symbol.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/array-species-create.js","../../node_modules/core-js/internals/array-iteration.js","../../node_modules/core-js/internals/object-keys.js","../../node_modules/core-js/internals/object-define-properties.js","../../node_modules/core-js/internals/html.js","../../node_modules/core-js/internals/add-to-unscopables.js","../../node_modules/core-js/modules/es.array.find.js","../../src/decorators/trackRemoval.js","../../src/index.js","../../src/decorators/windowListener.js","../../src/decorators/isCapture.js","../../src/decorators/getEffect.js","../../src/utils/uuid.js","components/context-menu/helpers.js","../node_modules/debug/src/browser.js"],"names":["Emitter","obj","key","prototype","mixin","module","exports","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","length","cb","callbacks","i","splice","emit","args","Array","len","slice","listeners","hasListeners","base64encoder","keys","require","hasBinary","sliceBuffer","after","utf8","ArrayBuffer","isAndroid","navigator","test","userAgent","isPhantomJS","dontSendBlobs","protocol","packets","open","close","ping","pong","message","upgrade","noop","packetslist","err","type","data","Blob","map","ary","each","done","result","next","eachWithIndex","el","error","msg","encodePacket","packet","supportsBinary","utf8encode","callback","undefined","buffer","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","byteLength","encodeArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","base64","encodeBase64Object","encoded","encode","String","strict","b64data","b64","split","readAsDataURL","fromCharCode","e","typed","basic","btoa","decodePacket","binaryType","utf8decode","charAt","decodeBase64Packet","substr","decode","tryDecode","Number","substring","rest","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","results","join","decodePayload","decodePayloadAsBinary","n","l","chr","encodedPackets","totalLength","reduce","acc","p","toString","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","parseInt","binaryIdentifier","size","lengthAry","bufferTail","buffers","tailArray","msgLength","total","TagItem","props","onMouseEnter","setState","showSelectedTag","onMouseLeave","getRepoTagIdList","repoTagIdList","fileTagList","fileTag","repo_tag_id","onEditFileTag","repoID","repoTag","filePath","indexOf","id","seafileAPI","addFileTag","then","onFileTagChanged","catch","errMessage","Utils","getErrorMsg","toaster","danger","deleteFileTag","state","drakColor","getDarkColor","color","className","onClick","style","backgroundColor","name","React","Component","TagList","getRepoTagList","listRepoTags","res","repotagList","repo_tags","item","RepoTag","toggle","toggleCancel","gettext","href","createNewTag","EditFileTagDialog","isCreateRepoTagShow","isListRepoTagShow","onRepoTagCreated","repoTagID","isOpen","onClose","handleShowEvent","hasOwnProp","show","handleHideEvent","hide","register","showCallback","hideCallback","uniqueId","unregister","canUseDOM","window","MENU_SHOW","MENU_HIDE","ContextMenu","registerHandlers","document","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","detail","isVisible","position","x","y","currentObject","menuList","callIfExists","onShowMenu","onHideMenu","menu","contains","target","hideMenu","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","onMenuItemClick","stopPropagation","operation","getEventData","onContextMenu","listenId","listener","wrapper","requestAnimationFrame","setTimeout","rtl","opacity","pointerEvents","role","display","ref","menuItem","index","data-operation","value","CreateForder","handleChange","trim","isSubmitBtnActive","childName","handleSubmit","newName","checkDuplicatedName","replace","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","addFolderCancel","newInput","createRef","focus","setSelectionRange","for","innerRef","input","onKeyPress","onChange","disabled","interval","ZipDownloadDialog","queryZipProgress","zipToken","failed","clearInterval","isLoading","errorMsg","failed_reason","zipProgress","zipped","toFixed","toggleDialog","location","fileServerRoot","cancelZipTask","token","getShareLinkDirentsZipTask","getShareLinkZipTask","zipDownload","setInterval","Content","runtime","Op","Object","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","object","reverse","pop","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","ItemDropdownMenu","isItemMenuShow","unfreezeItem","onDropdownToggleClick","toggleOperationMenu","freezeItem","isHandleContextMenuEvent","listenerId","getMenuList","nextProps","toggleClass","tagName","title","data-toggle","aria-expanded","divider","tag","defaultProps","str","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","a","b","fileCount","files_count","tag_name","tag_color","ImageDialog","imageItems","imageIndex","imageItemsLength","imageCaption","url","mainSrc","src","imageTitle","nextSrc","prevSrc","onCloseRequest","closeImagePopup","onMovePrevRequest","moveToPrevImage","onMoveNextRequest","moveToNextImage","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","AddRelatedFileDialog","onAddRelatedFile","repo","selectedPath","oRepoID","rRepoID","repo_id","oFilePath","rFilePath","addRelatedFile","onRelatedFileChange","onDirentItemClick","dirent","onRepoItemClick","isShowFile","subtitle","aria-label","dangerouslySetInnerHTML","__html","mode","ListRelatedFileDialog","onDeleteRelatedFile","relatedID","related_id","deleteRelatedFile","getDirentList","relatedFiles","direntList","getFileInfo","Dirent","repo_name","siteRoot","encodePath","hover","relatedFile","Fragment","addRelatedFileToggle","RelatedFile","active","link","mtime_relative","bind","RelatedFileDialogs","onAddRelatedFileToggle","showListRelatedFileDialog","onCloseAddRelatedFileDialog","viewMode","SystemNotification","isClosed","cookieEnabled","date","Date","cookies","cookie","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","curNoteMsg","Group","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","LibraryDetails","MainSideNav","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","_this","listGroups","groupList","groupsHeight","listHeight","groupItems","sort","toLowerCase","tabItemClick","param","uploader","isUploadProgressDialogShow","totalProgress","confirm","onDTableClick","dtableWebServer","getActiveClass","tab","currentTab","libdtExtend","libraryDetailsExtended","loadLibraryDetails","keeperAPI","listLibraryDetails","libraryDetailsList","libraryDetailsHeight","libraryDetailItems","closeSideBar","adminHeight","to","aria-hidden","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","desc","icon","showActivity","isDocs","isPro","canViewOrg","renderSharedGroups","enableOCM","renderLibraryDetails","canPublishRepo","draftCounts","pill","canInvitePeople","renderSharedAdmin","renderCustomNavItems","AboutDialog","onCloseAboutDialog","mediaUrl","logoPath","logoHeight","logoWidth","siteTitle","alt","seafileVersion","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","onFooterExpandedToggle","collapsed","elementBodyStyle","maxHeight","borderBottomWidth","SidePanel","isSidePanelClosed","onCloseSidePanel","MainPanel","script","createElement","body","appendChild","children","DraftsView","moment","locale","lang","DraftListItem","isItemFreezed","isMenuIconShow","highlight","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","origin_repo_id","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","localTime","utc","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","success","publishDraft","getDrafts","isLoadingDraft","Acticity","json","obj_type","commit_id","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","fileURL","serviceURL","fileLink","app","config","FileActivitiesContent","isDesktop","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","onListCreatedFilesToggle","isListCreatedFiles","op","details","moreDetails","userProfileURL","libURL","libLink","smallLibLink","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FilesActivities","mergePublishEvents","events","curPathList","oldPathList","actuallyEvents","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","hasMore","clientHeight","scrollHeight","scrollTop","getMore","isFirstLoading","currentPage","avatarSize","listActivities","onScroll","loading","emptyTip","TableBody","getThumbnails","filter","imageCheck","obj_name","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","desktopItem","onMouseOver","onMouseOut","mobileItem","Starred","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","check","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","device_name","last_login_ip","last_accessed","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","switchOption","currentOption","changePerm","currentPerm","options","permissions","htmlFor","sharePerms","sharePermsExplanation","sortByName","sortOrder","sortItems","sortBy","sortIcon","table","togglePermSelectDialog","isPermSelectDialogOpen","permission","user","updateRepoSharePerm","unshare","unshareRepo","unshared","showAdmin","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","isTextMode","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","JSON","stringify","objUrl","view_cnt","ShareAdminShareLinks","deleteShareLink","uploadItem","listUserShareLinks","ShareLink","ShareAdminUploadLinks","deleteUploadLink","listUserUploadLinks","UploadLink","Repo","size_original","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","storage_name","doi","LibsMobileThead","_slicedToArray","arr","isArray","_arr","_n","_d","_e","_s","_i","unsupportedIterableToArray","SortOptions","sortOptions","sortBySize","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","save","toggleSortOptionsDialog","isSortOptionsDialogOpen","load","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","MainPanelTopbar","isAdminPanel","DirPath","onPathClick","turnPathToLink","pathList","nodePath","data-path","currentPath","pathElem","onTabNavClick","DirentItem","openFolder","downloadDirent","getDirentIcon","is_file","DirContent","deleteDirent","fromSystemRepo","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","openFileInput","fileInput","current","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","CreateRepoDialog","handleRepoNameChange","handlePassword1Change","password1","handlePassword2Change","password2","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","password","passwd","storages","libraryTemplates","repoPasswordMinLength","defaultValue","label","enableEncryptedLibrary","autoComplete","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","onShowSidePanel","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","onKeyDown","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","isMulti","placeholder","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","userFolderPermItems","concat","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","listDepartmentRepoUserFolderPerm","listUserFolderPerm","thead","onSelectChange","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","pills","tabId","folderName","maxWidth","Rename","nativeEvent","stopImmediatePropagation","onRenameConfirm","validateInput","isValid","onRenameCancel","renameInput","hasSuffix","endIndex","lastIndexOf","MylibRepoMenu","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","showAssignDoiMenuItem","showArchiveLibraryMenuItem","showCertifyLibraryMenuItem","showEditMetadatayMenuItem","operations","folderPermEnabled","isPC","enableRepoSnapshotLabel","translateOperations","translateResult","unshift","RepoAPITokenPermissionEditor","onHideSelect","isEditing","onEditPermission","onSelectHandler","optionTranslation","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","addAPIToken","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","duration","renderAPITokenList","minHeight","onRepoAPITokenToggle","RepoShareUploadLinkItem","onDeleteLink","deleteItem","creator_name","RepoShareUploadLinksDialog","getItems","listRepoShareLinks","listRepoUploadLinks","repoShareUploadLinkList","deleteRepoShareLink","deleteRepoUploadLink","forDialog","LibOldFilesAutoDelDialog","daysNeedTobeSet","autoDelDays","isAutoDel","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","AssignDoiDialog","addDoi","mpgInstituteOptions","defaultResourceType","resourceTypes","defaultAuthors","firstName","lastName","affs","defaultDirectors","defaultPublisher","defaultMd","authors","publisher","description","year","institute","department","directors","resourceType","license","errors","defaultValidMd","InfoArea","toggleHelp","helpTooltipOpen","toggleError","errorTooltipOpen","fontWeight","delay","placement","helpText","KeeperArchiveMetadataForm","isFieldValid","RegExp","Boolean","isFormValid","validMd","outer","setButtons","isButton1Disabled","isSaved","isButton2Disabled","getValidMd","md","k","onButton1","onButton2","handleAuthorAddFields","setAuthorInputFields","handleAuthorRemoveFields","handleAuthorInputChange","handleAuthorAffInputChange","aidx","handleAuthorAffAddFields","handleAuthorAffRemoveFields","handleDirectorAddFields","setDirectorInputFields","handleDirectorRemoveFields","handleDirectorInputChange","onResourceSelectChange","resourceOptions","filterInstitutes","promiseOptions","handleInstituteChange","insName","validationProps","valid","invalid","validationInSelects","validationInAuthors","nidx","validationInDirectors","getArchiveMetadata","newState","getMpgInstitutes","res2","v","hideDialog","header","paddingBottom","row","sm","inputField","_","isClearable","cacheOptions","form","button1Label","button2Label","ArchiveLibraryDialog","onUpdateArchiveMetadata","updateArchiveMetadata","onArchiveClick","archiveLibrary","resp","quota","CertifyLibraryDialog","canCertify","certifyLibrary","certifyOnBloxberg","handleCanArchiveResponse","d","default_error","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareUploadLinksDialog","toggleOldFilesAutoDelDialog","onAssignDoiToggle","onArchiveLibraryToggle","onCertifyLibraryToggle","onEditMetadataToggle","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareUploadLinksDialogOpen","isOldFilesAutoDelDialogOpen","isAssignDoiDialogShow","onArchiveLibraryHide","isArchiveLibraryDialogShow","canArchive","onCertifyLibraryHide","isCertifyLibraryDialogShow","onEditMetadataHide","isEditMetadataDialogShow","renameRepo","onRenameRepo","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","renderMobileUI","query","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","onSearchedClick","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","isStaff","username","isRepoOwner","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","asyncGeneratorStep","gen","_next","_throw","socket","seafileCollabServer","io","collabServer","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","CreateFile","isDuplicated","onAddFile","handleCheck","pos","fileType","isdraft","addFileCancel","KeeperEditMetadataDialog","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","dirPath","getFolderName","isArchiveBtnShow","isEditMetadataBtnShow","isCertifyBtnShow","content","showShareBtn","isSupportUploadFolder","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","onRename","changeState","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","openRelatedFilesDialog","onHistory","onAccessLog","onOpenViaClient","getDirentPath","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","listRelatedFiles","related_files","showRelatedFileDialog","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onListRelatedFileToggle","isRelatedFileDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","searchPlaceholder","isDirentSelected","tabName","tagTitle","pathPrefix","showName","zIndex","TagListItem","onTagUpdate","onListTaggedFiles","fileTranslation","ListTagDialog","onListTagCancel","onCreateRepoTag","repo_tag","onUpdateRepoTag","UpdateTagDialog","inputNewName","selectNewcolor","newColor","updateTag","tag_id","currentTag","updateRepoTag","updateUsedRepoTags","deleteTagClick","deleteRepoTag","onDeleteTag","onDeleteRepoTag","colorList","defaultChecked","ListTaggedFilesDialog","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","listTaggedFiles","taggedFileList","tagged_files","unix","DirTool","onShowListRepoTag","isRepoTagDialogShow","isUpdateRepoTagShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onUpdateRepoTagToggle","onListTaggedFileToggle","isFile","isMarkdownFile","trashUrl","CurDirPath","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","search","highlightedDisplay","focused","oldTime","participants","showIconTip","defaultStyle","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","CommentItem","convertComment","mdFile","processor","process","html","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","DetailListView","getDirentPostion","repoInfo","isEditFileTagShow","direntType","direntDetail","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","parent_dir","file_tag","FileTag","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","classnames","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","Draft","created","createdStr","ownerNickname","owner_nickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","draftItem","DraftItem","ReadmeDialog","readmeContent","getFileDownloadLink","getFileContent","markdownContent","showTOC","scriptSource","RepoInfoBar","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","usedRepoTags","readmeMarkdown","usedRepoTag","DirentListItem","isDragTipShow","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","showImagePopup","onItemCertify","certifyFile","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","lockName","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","getData","parse","draggedItem","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","isHasPermissionToShare","isSelected","getDirentItemMenuList","data-tip","data-for","delayHide","effect","activeDirent","dirHref","fileHref","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","data-op","DirentsDraggedPreview","handleDragEnd","element","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","documentElement","overflow","DirentListView","prepareImageItem","useThumbnail","isGIF","thumbnailSizeForOriginal","fullDirentList","isImagePopupOpen","prevState","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","isContextmenu","onTableDragEnter","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","onAllItemSelected","isAllItemSelected","dragStartPosition","DirListView","isRepoInfoBarShow","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","onAddFileNode","newUrl","parentNode","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","repoPermission","onNodeExpanded","onNodeCollapse","onUnFreezedItem","DirColumnFile","goDraftPage","hash","isFileLoadedErr","isTOCShow","isFileLoading","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","c","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","progress","Math","round","newFileName","isUploading","aria-valuenow","aria-valuemin","aria-valuemax","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","upload","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","offset","floor","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","bootstrap","firedRetry","resumableObj","getUpdateLink","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","CopyMoveDirentProgressDialog","asyncOperationProgress","asyncOperatedFilesLength","progressStyle","lineHeight","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updataColumnMarkdownData","dirMetaData","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","draftID","loadDirData","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","onDeleteItems","deleteMutipleDirents","deleteDirents","createDir","addDirent","createFile","paths","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","onToolbarRelatedFileChange","deletedTagID","buildTree","oldonpopstate","RepoInfo","lib_need_decrypt","unwatchRepo","queryAsyncOperationProgress","successful","deleteDir","deleteItemAjaxCallback","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","OpIcon","tabIndex","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","onChangeUserRole","setGroupAdmin","deleteGroupMember","translateRole","roles","deleteAuthority","onFocus","scope","currentRole","onRoleChanged","PureComponent","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","changeMode","SearchGroupMembers","q","searchGroupMember","onInputKeyDown","MANAGEMENT_MODE","toggleManageMembersDialog","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","hideArrow","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","GeneralToolbar","MainContentWrapper","WrapperedComponent","FilesActivitiesWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","ShareAdminShareLinksWrapper","ShareAdminUploadLinksWrapper","App","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","contentClassName","ReactDOM","render","getElementById","getRandomValues","crypto","msCrypto","rnds8","rng","byteToHex","bytesToUuid","buf","bth","v4","rnds","random","ii","debug","binary","isBuf","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","bloblessData","deconstruction","deconstructPacket","pack","removeBlobs","encodeAsBinary","add","start","tryParse","decodeString","takeBinaryData","destroy","finishedReconstruction","binData","reconstructPacket","hasCORS","globalThis","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","parser","Transport","hostname","port","secure","timestampParam","timestampRequests","readyState","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","doOpen","doClose","send","write","onOpen","onData","onPacket","_exenv","EE","__esModule","default","SafeHTMLElement","HTMLElement","CreateTagDialog","selectTagcolor","tagColor","createTag","createRepoTag","newTag","canSave","ShareAdminLink","copyToClipboard","EmptyTip","re","parts","m","exec","uri","source","host","authority","ipv6uri","pathNames","regx","queryKey","$0","$1","$2","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","isView","eio","Socket","Backoff","has","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","max","jitter","timeout","connecting","lastPing","encoding","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","cleanup","timer","clearTimeout","onping","onpong","ondata","ondecoded","onerror","onConnecting","processPacketQueue","shift","subsLength","disconnect","onclose","reason","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","poll","pause","doPoll","callbackfn","doWrite","schema","sid","withNativeBlob","withNativeFile","File","toJSON","alphabet","seed","decoded","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","ev","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","emitBuffered","querySelectorAll","tabbable","tabbableNode","hidesContents","zeroSize","offsetWidth","offsetHeight","innerHTML","getComputedStyle","getPropertyValue","scrollWidth","focusable","isTabIndexNotNaN","parentElement","visible","isTabIndexNaN","assertNodeList","setElement","useElement","_safeHTMLElement","globalElement","validateElement","appElement","documentNotReadyOrSSRTesting","resetForTesting","_warning","_warning2","selector","portalOpenInstances","PortalOpenInstances","instance","Constructor","_classCallCheck","openInstance","openInstances","deregister","subscribe","subscribers","eventType","subscriber","lookup","cache","managers","parsed","forceNew","multiplex","contentClass","WikiMarkdownViewer","onContentRendered","markdownViewer","titlesInfo","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","index2","originalPath","pathNormalize","isInternalFileLink","match","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","renderRelatedFiles","links","MarkdownViewer","_defineProperties","descriptor","_createClass","protoProps","staticProps","_defineProperty","_extends","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","_getPrototypeOf","o","_setPrototypeOf","_assertThisInitialized","ReferenceError","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_toConsumableArray","arr2","_arrayWithoutHoles","from","_iterableToArray","_nonIterableSpread","translate","replaceStrings","translated","getWindowWidth","global","getHighestSafeWindowContext","referrer","getOrigin","parent","MAX_ZOOM_LEVEL","KEYS","ReactImageLightbox","_Component","_possibleConstructorReturn","isClosing","animationDisabled","shouldAnimate","zoomLevel","offsetX","offsetY","loadErrorStatus","outerEl","zoomInBtn","zoomOutBtn","caption","closeIfClickInner","handleImageDoubleClick","handleImageMouseWheel","handleKeyInput","handleMouseUp","handleMouseDown","handleMouseMove","handleOuterMousewheel","handleTouchStart","handleTouchMove","handleTouchEnd","handlePointerEvent","handleCaptionMousewheel","handleWindowResize","handleZoomInButtonClick","handleZoomOutButtonClick","requestClose","requestMoveNext","requestMovePrev","subClass","superClass","_inherits","mouseEvent","touchPointer","identifier","pointerEvent","pointerId","_ref","_ref$x","_ref$y","_ref$zoom","zoom","targetWidth","nextX","windowWidth","scaleFactor","transform","timeouts","currentAction","eventsSource","pointerList","preventInnerClose","preventInnerCloseTimeout","keyPressed","imageCache","lastKeyDownTime","resizeTimeout","wheelActionTimeout","resetScrollTimeout","scrollX","scrollY","moveStartX","moveStartY","moveStartOffsetX","moveStartOffsetY","swipeStartX","swipeStartY","swipeEndX","swipeEndY","pinchTouchList","pinchDistance","keyCounter","moveRequested","_this2","windowContext","resize","mouseup","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","handleWheel","passive","loadAllImages","_this3","sourcesChanged","prevSrcDict","nextSrcDict","getSrcTypes","srcType","_this4","didUnmount","tid","_setTimeout","_x","_x2","func","_this5","_this6","imageSrc","fitSizes","isImageLoaded","getFitSizes","targetHeight","stretch","boxSize","getLightboxRect","currentImageInfo","getBestImageForType","maxX","minX","maxY","minY","zoomMultiplier","getZoomMultiplier","keyEnding","pow","right","_clearTimeout","_x3","enableZoom","nextZoomLevel","imageBaseSize","currentZoomMultiplier","nextZoomMultiplier","boxRect","pointerX","pointerY","currentImageOffsetX","currentImageOffsetY","nextImageRealOffsetX","nextImageRealOffsetY","nextOffsetX","nextOffsetY","maxOffsets","getMaxOffsets","isAnimating","which","keyRepeatLimit","keyRepeatKeyupBonus","_this7","deltaY","abs","deltaX","changeZoom","newOffsetY","newOffsetX","filterPointersBySource","pointer","_ref2","_this8","_ref3","shouldHandleEvent","isTargetMatchImage","addPointer","parseMouseEvent","multiPointerStart","multiPointerMove","removePointer","multiPointerEnd","parsePointerEvent","_this9","changedTouches","eventTouch","parseTouchPointer","_this10","touch","handleSwipeStart","handleMoveStart","handleEnd","decideMoveOrSwipe","handlePinchStart","handleMove","handleSwipe","handlePinch","setPreventInnerClose","handleMoveEnd","handleSwipeEnd","handlePinchEnd","_ref4","_ref5","_this11","animationDuration","_ref6","_ref7","xDiff","xDiffAbs","yDiffAbs","_ref8","_ref9","sqrt","_ref10","_ref11","_ref12","calculatePinchDistance","oldPointer","newDistance","_this$calculatePinchC","calculatePinchCenter","forceUpdate","_this$caption$current2","_this12","inMemoryImage","Image","imageCrossOrigin","crossOrigin","errorEvent","onImageLoadError","onImageLoad","_this13","generateLoadDoneCallback","loadImage","_this14","closeLightbox","animationOnKeyInput","direction","_this15","requestMove","_this16","_this$props","clickOutsideToClose","discourageDownloads","toolbarButtons","reactModalStyle","_onAfterOpen","onAfterOpen","reactModalProps","_this$state","transitionStyle","transition","keyEndings","_ref13","images","addImage","imageClass","transforms","bestImageInfo","imageStyle","getTransform","cursor","backgroundImage","onDoubleClick","onWheel","loadingIcon","modalStyle","overlay","border","borderRadius","Modal","onRequestClose","contentLabel","wrapperClassName","animationDirection","onTouchStart","onTouchMove","onKeyUp","propTypes","PropTypes","string","isRequired","mainSrcThumbnail","prevSrcThumbnail","nextSrcThumbnail","bool","number","arrayOf","shape","_Modal","_Modal2","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","renderChildren","paddingLeft","hasChildren","RENAME","OPEN_VIA_CLIENT","hlClass","caculateMenuList","TreeView","dragStartNodeData","isTreeViewDropTipShow","dropNodeData","parseuri","createDebug","namespace","prevTime","enabled","curr","ms","diff","coerce","formatter","formatters","val","formatArgs","logFn","log","console","useColors","colors","selectColor","init","instances","stack","disable","enable","namespaces","skips","humanize","s","h","plural","ceil","long","fmtShort","_deconstructPacket","_placeholder","newData","_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","onDrain","probe","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","code","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","j","empty","Request","req","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","fromError","abort","attachEvent","unloadHandler","arraybuffer","end","bytes","abv","count","err_cb","bail","proxy","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","removeChild","iframe","insertAt","getElementsByTagName","insertBefore","head","area","iframeId","initIframe","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","addEventListeners","onmessage","factor","rand","deviation","bodyOpenClassName","portalClassName","_react","_react2","_interopRequireDefault","_reactDom2","_propTypes2","_ModalPortal2","ariaAppHider","newObj","_interopRequireWildcard","_safeHTMLElement2","_reactLifecyclesCompat","isReact16","createPortal","getCreatePortal","unstable_renderSubtreeIntoContainer","getParentElement","parentSelector","_temp","_len","_key","removePortal","unmountComponentAtNode","warn","portalRef","portal","renderPortal","defaultStyles","prevProps","prevParent","nextParent","snapshot","_props","closesAt","closeTimeoutMS","beforeClose","closeWithTimeout","htmlOpenClassName","oneOfType","base","afterOpen","overlayClassName","instanceOf","ariaHideApp","shouldFocusAfterRender","shouldCloseOnOverlayClick","shouldReturnFocusAfterClose","preventScroll","aria","shouldCloseOnEsc","overlayRef","contentRef","overlayElement","contentElement","contentEl","background","WebkitOverflowScrolling","outline","polyfill","_typeof","focusManager","_scopeTab2","classList","_portalOpenInstances2","CLASS_NAMES","ariaHiddenInstances","ModalPortal","setOverlayRef","setContentRef","afterClose","remove","returnFocus","teardownScopedFocus","popWithoutFocus","onAfterClose","beforeOpen","closeTimer","setupScopedFocus","markForFocusLater","overlayEl","closeWithoutTimeout","focusContent","contentHasFocus","handleOverlayOnClick","shouldClose","ownerHandlesClose","handleContentOnMouseUp","handleOverlayOnMouseDown","handleContentOnClick","handleContentOnMouseDown","shouldBeClosed","activeElement","buildClassName","additional","classNames","attributesFromObject","prefix","moveFromContentToOverlay","_props2","contentStyles","overlayStyles","overlayProps","contentProps","modal","testId","handleBlur","handleFocus","focusLaterElements","toFocus","modalElement","detachEvent","_tabbable","_tabbable2","needToFocus","shiftKey","tail","checkSafari","warning","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","canUseViewport","screen","dumpClassLists","htmlClassList","docBodyClassList","classString","classListRef","incrementReference","decrementReference","_portalOpenInstances","before","cloneNode","firstChild","lastChild","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","store","_Async","_Creatable","_stateManager","_Select","SelectCreatable","makeCreatableSelect","SelectCreatableState","_default","makeAsyncSelect","HIDE","REBUILD","SHOW","checkStatus","isCapture","currentItem","hideTooltip","setUntargetItems","getTargetArray","targetArray","currentTarget","customListeners","get","bodyListener","respectEffect","customEvent","tip","forId","isCustomEvent","isTargetBelongsToTooltip","getEffect","makeProxy","findCustomEvents","dataAttribute","getBody","getDimensions","tipWidth","tipHeight","getCurrentOffset","mouseX","mouseY","defaultOffset","getDefaultPosition","calculateOffset","extraOffsetX","extraOffsetY","windowHeight","getParent","parentTop","parentLeft","getTipOffsetLeft","place","getTipOffsetTop","outsideRight","getTipOffsetRight","outsideBottom","getTipOffsetBottom","outside","outsideLeft","outsideTop","inside","placesList","insideList","isNewState","shouldUpdatePlace","desiredPlace","newPlace","boundingClientRect","targetTop","targetLeft","r","t","disToMouse","currentParent","computedStyle","getContent","regexp","multiline","parseAria","ariaObj","prop","fill","defaultColors","dark","arrow","light","generateTooltipStyle","uuid","customColors","hasBorder","textColor","borderColor","arrowColor","generateStyle","getDefaultPopupColors","getPopupColors","it","fails","$propertyIsEnumerable","propertyIsEnumerable","1","V","bitmap","classof","IndexedObject","requireObjectCoercible","PREFERRED_STRING","isObject","valueOf","argument","toObject","EXISTS","DESCRIPTORS","$getOwnPropertyDescriptor","O","P","toIndexedObject","toPrimitive","IE8_DOM_DEFINE","createPropertyDescriptor","propertyIsEnumerableModule","f","$defineProperty","Attributes","anObject","definePropertyModule","createNonEnumerableProperty","SHARED","setGlobal","functionToString","inspectSource","WeakMap","copyright","postfix","shared","uid","OBJECT_ALREADY_INITIALIZED","NATIVE_WEAK_MAP","wmget","wmhas","wmset","metadata","facade","STATE","sharedKey","hiddenKeys","objectHas","enforce","getterFor","TYPE","getInternalState","InternalStateModule","enforceInternalState","TEMPLATE","unsafe","simple","noTargetGet","aFunction","variable","toInteger","createMethod","IS_INCLUDES","$this","fromIndex","toLength","integer","toAbsoluteIndex","enumBugKeys","getOwnPropertyNames","internalObjectKeys","getBuiltIn","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","normalize","POLYFILL","NATIVE","require$$0","versions","v8","activeXDocument","sham","V8_VERSION","NATIVE_SYMBOL","WellKnownSymbolsStore","createWellKnownSymbol","USE_SYMBOL_AS_UID","withoutSetter","SPECIES","wellKnownSymbol","originalArray","C","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_OUT","NO_HOLES","specificCreate","boundFunction","arraySpeciesCreate","every","find","findIndex","filterOut","Properties","objectKeys","IE_PROTO","EmptyConstructor","scriptTag","LT","domain","ActiveXObject","temp","parentWindow","NullProtoObjectViaActiveX","iframeDocument","documentCreateElement","contentWindow","F","NullProtoObjectViaIFrame","UNSCOPABLES","ArrayPrototype","$find","FIND","SKIPS_HOLES","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","forced","copyConstructorProperties","redefine","$","proto","ReactTooltip","CONSTANT","hasTarget","staticMethods","windowListener","ele","eventOff","dataEvent","dataEventOff","customListener","dataEffect","possibleCustomEvents","possibleCustomEventsOff","customEvents","customEventsOff","bodyModeListeners","targetEventOff","bodyMode","trackRemoval","extraClass","delayShow","currentEvent","ariaProps","isEmptyTip","originTooltip","isMultiline","insecure","class","delayUpdate","globalEventOff","afterShow","afterHide","overridePosition","scrollHide","resizeHide","clickable","methodArray","tooltipRef","domRoot","matches","escaped","nodeListToArray","isCaptureMode","getTipContent","isGlobalCall","switchToSolid","getPosition","reshowDelay","updateState","eventTarget","delayTime","isInvisible","isScroll","isMyElement","resetState","tooltipClass","hasCustomColors","Wrapper","htmlContent","data-id","newAriaProps","MutationObserver","observer","mutations","m1","mutation","m2","childList","subtree","storage","DEBUG","lastC","removeItem","WebkitAppearance","firebug","chrome","local","localStorage","localstorage"],"mappings":"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","file":"static/js/app.chunk.js","sourcesContent":["\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSelectedTag: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      showSelectedTag: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      showSelectedTag: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    fileTagList.map((fileTag) => {\n      repoTagIdList.push(fileTag.repo_tag_id);\n    });\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    let repoTag = this.props.repoTag;\n    let repoTagIdList = this.getRepoTagIdList();\n    let drakColor = Utils.getDarkColor(repoTag.color);\n    return (\n      <li key={repoTag.id} className=\"tag-list-item\" onClick={this.onEditFileTag} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <div className=\"tag-demo\" style={{backgroundColor:repoTag.color}}>\n          <span className={`${this.state.showSelectedTag ? 'show-tag-selected': ''}`} style={{backgroundColor: drakColor}}></span>\n          <span className=\"tag-name\">{repoTag.name}</span>\n          {repoTagIdList.indexOf(repoTag.id) > -1 &&\n            <i className=\"fas fa-check tag-operation\"></i>\n          }\n        </div>\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody>\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a href=\"#\" className=\"add-tag-link\" onClick={this.props.createNewTag}>{gettext('Create a new tag')}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id || this.state.isVisible) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                innerRef={input => {this.newInput = input;}}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} title={gettext('More Operations')}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n        <DropdownToggle\n          tag={tagName || 'i'}\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","class RepoTag {\n  constructor(object) {\n    this.id = object.repo_tag_id;\n    this.fileCount = object.files_count;\n    this.name = object.tag_name;\n    this.color = object.tag_color;\n  }\n}\n\nexport default RepoTag;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const imageCaption = imageItemsLength && (\n      <Fragment>\n        <span>{gettext('%curr% of %total%').replace('%curr%', imageIndex + 1).replace('%total%', imageItemsLength)}</span>\n        <br />\n        <a href={imageItems[imageIndex].url} target=\"_blank\">{gettext('Open in New Tab')}</a>\n      </Fragment>\n    );\n\n    return (\n      <Lightbox\n        mainSrc={imageItems[imageIndex].src}\n        imageTitle={imageItems[imageIndex].name}\n        imageCaption={imageCaption}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","import React ,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onClose: PropTypes.func,\n};\n\nclass AddRelatedFileDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null,\n      selectedPath: '',\n      isShowFile: true,\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    this.onAddRelatedFile();\n  }\n\n  onAddRelatedFile = () => {\n    let { repo, selectedPath } = this.state;\n    let oRepoID = this.props.repoID;\n    let rRepoID = repo.repo_id;\n    let oFilePath = this.props.filePath;\n    let rFilePath = selectedPath;\n\n    if (oRepoID === rRepoID && oFilePath === rFilePath) {\n      let message = gettext('Can not select self as a related file.');\n      this.setState({errMessage: message});\n      return;\n    }\n\n    seafileAPI.addRelatedFile(oRepoID, rRepoID, oFilePath, rFilePath).then((res) => {\n      this.props.onRelatedFileChange();\n      this.toggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({errMessage: errMessage});\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  onDirentItemClick = (repo, selectedPath, dirent) => {\n    if (dirent.type === 'file') {\n      this.setState({\n        repo: repo,\n        selectedPath: selectedPath,\n      });\n    }\n    else {\n      this.setState({\n        repo: null,\n        selectedPath: '',\n      });\n    }\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: null,\n      selectedPath: '',\n    });\n  }\n\n  render() {\n    let subtitle = gettext('Select related file for {placeholder}');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    return (\n      <div className=\"sf-add-related-file\">\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.toggle} aria-label={gettext('Back')}></span>\n          {gettext('Select File')}\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"related-file-subtitle\" dangerouslySetInnerHTML={{__html: subtitle}}></div>\n          <FileChooser\n            isShowFile={this.state.isShowFile}\n            repoID={this.props.repoID}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode=\"current_repo_and_other_repos\"\n          />\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          { this.state.selectedPath ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n            :\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </div>\n    );\n  }\n}\n\nAddRelatedFileDialog.propTypes = propTypes;\n\nexport default AddRelatedFileDialog;\n","import React ,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport Dirent from '../../models/dirent';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport '../../css/list-related-file-dialog.css';\n\nconst propTypes = {\n  relatedFiles: PropTypes.array.isRequired,\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  addRelatedFileToggle: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n};\n\nclass ListRelatedFileDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      direntList: [],\n    });\n  }\n\n  onDeleteRelatedFile = (item) => {\n    let filePath = this.props.filePath;\n    let repoID = this.props.repoID;\n    let relatedID = item.related_id;\n    seafileAPI.deleteRelatedFile(repoID, filePath, relatedID).then((res) => {\n      this.props.onRelatedFileChange();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  getDirentList = (relatedFiles) => {\n    if (relatedFiles.length === 0) {\n      this.setState({\n        direntList: [],\n      });\n      return;\n    }\n    let direntList = [];\n    relatedFiles.map((item) => {\n      seafileAPI.getFileInfo(item.repo_id, item.path).then(res => {\n        let dirent = new Dirent(res.data);\n        dirent['repo_name'] = item.repo_name;\n        dirent['related_id'] = item.related_id;\n        dirent['link'] = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(item.path);\n        direntList.push(dirent);\n      });\n    });\n    this.setState({direntList: direntList});\n  }\n\n  componentWillMount() {\n    this.getDirentList(this.props.relatedFiles);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.relatedFiles.length !== this.props.relatedFiles.length) {\n      this.getDirentList(nextProps.relatedFiles);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Related Files')}</ModalHeader>\n        <ModalBody className={this.state.direntList.length > 0 ? 'list-related-file-body' : ''}>\n          <Table hover size=\"sm\" className=\"list-related-file-table\">\n            <thead>\n              <tr>\n                <th width='40%'>{gettext('Name')}</th>\n                <th width='20%'>{gettext('Library Name')}</th>\n                <th width='13%'>{gettext('Size')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='5%'></th>\n                <th width='2%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.state.direntList.map((relatedFile, index) => {\n                  return (\n                    <React.Fragment key={index}>\n                      <RelatedFile relatedFile={relatedFile} onDeleteRelatedFile={this.onDeleteRelatedFile}/>\n                    </React.Fragment>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n          <a href=\"#\" className=\"add-related-file-link\" onClick={this.props.addRelatedFileToggle}>{gettext('Add File')}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListRelatedFileDialog.propTypes = propTypes;\n\nconst RelatedFilePropTypes = {\n  relatedFile: PropTypes.object,\n  onDeleteRelatedFile: PropTypes.func.isRequired,\n};\n\nclass RelatedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    const relatedFile = this.props.relatedFile;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><a href={relatedFile.link} target='_blank'>{relatedFile.name}</a></td>\n        <td>{relatedFile.repo_name}</td>\n        <td>{relatedFile.size}</td>\n        <td>{relatedFile.mtime_relative}</td>\n        <td><i className={className} onClick={this.props.onDeleteRelatedFile.bind(this, relatedFile)}></i></td>\n        <td></td>\n      </tr>\n    );\n  }\n}\n\nRelatedFile.propTypes = RelatedFilePropTypes;\n\nexport default ListRelatedFileDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal } from 'reactstrap';\nimport AddRelatedFileDialog from './add-related-file-dialog';\nimport ListRelatedFileDialog from './list-related-file-dialog';\nimport ModalPortal from '../modal-portal';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  dirent: PropTypes.object.isRequired,\n  relatedFiles: PropTypes.array,\n  viewMode: PropTypes.oneOf(['list_related_file','add_related_file']).isRequired,\n};\n\nclass RelatedFileDialogs extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showListRelatedFileDialog: props.viewMode === 'list_related_file',\n    };\n  }\n\n  onAddRelatedFileToggle = () => {\n    this.setState({\n      showListRelatedFileDialog: false,\n    });\n  }\n\n  onCloseAddRelatedFileDialog = () => {\n    this.setState({\n      showListRelatedFileDialog: true,\n    });\n  }\n\n  render() {\n    return (\n      <ModalPortal>\n        <Modal isOpen={true} toggle={this.props.toggleCancel} size='lg' style={{width:'650px'}}>\n          {this.state.showListRelatedFileDialog &&\n            <ListRelatedFileDialog\n              filePath={this.props.filePath}\n              relatedFiles={this.props.relatedFiles}\n              repoID={this.props.repoID}\n              toggleCancel={this.props.toggleCancel}\n              addRelatedFileToggle={this.onAddRelatedFileToggle}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n            />\n          }\n          {!this.state.showListRelatedFileDialog &&\n            <AddRelatedFileDialog\n              filePath={this.props.filePath}\n              repoID={this.props.repoID}\n              toggleCancel={this.onCloseAddRelatedFileDialog}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n              dirent={this.props.dirent}\n              onClose={this.props.toggleCancel}\n            />\n          }\n        </Modal>\n      </ModalPortal>\n    );\n  }\n}\n\nRelatedFileDialogs.propTypes = propTypes;\n\nexport default RelatedFileDialogs;","import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\">\n        <p id=\"info-bar-info\"><span dangerouslySetInnerHTML={{__html: curNoteMsg}}></span></p>\n        <span className=\"close sf2-icon-x1\" title={gettext('Close')} onClick={this.close}></span>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","class LibraryDetails {\n  constructor(object) {\n    this.repo_id= object.repo_id;\n    this.repo_name = object.repo_name;\n  }\n}\n\nexport default LibraryDetails;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { Badge } from 'reactstrap';\nimport { gettext, siteRoot, canPublishRepo, canAddRepo, canGenerateShareLink, canGenerateUploadLink, canInvitePeople, dtableWebServer, enableOCM } from '../utils/constants';\nimport { seafileAPI, keeperAPI } from '../utils/seafile-api';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport Group from '../models/group';\nimport LibraryDetails from '../models/library-details';\n\nimport { canViewOrg, isDocs, isPro, customNavItems } from '../utils/constants';\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar:false,\n      groupItems: [],\n      libraryDetailsExtended: false,\n      libraryDetailItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n    this.libraryDetailsHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  }\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  }\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI.listGroups().then(res =>{\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n\n      this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n      _this.setState({\n        groupItems: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  tabItemClick = (e, param, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  }\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  }\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? 'active' : '';\n  }\n\n  renderSharedGroups() {\n    let style = {height: 0};\n    if (this.state.groupsExtended) {\n      style = {height: this.groupsHeight};\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column grp-list ${this.state.groupsExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style}>\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'groups/'}  className={`nav-link ellipsis ${this.getActiveClass('groups')}`} onClick={(e) => this.tabItemClick(e, 'groups')}>\n            <span className=\"sharp\" aria-hidden=\"true\">#</span>\n            <span className=\"nav-text\">{gettext('All Groups')}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map(item => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link to={siteRoot + 'group/' + item.id + '/'} className={`nav-link ellipsis ${this.getActiveClass(item.name)}`} onClick={(e) => this.tabItemClick(e, item.name, item.id)}>\n                <span className=\"sharp\" aria-hidden=\"true\">#</span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = {height: height};\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-share-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-share-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-share-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-upload-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-upload-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-upload-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column ${this.state.sharedExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style} >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link to={siteRoot + 'share-admin-libs/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-libs')}`} title={gettext('Libraries')} onClick={(e) => this.tabItemClick(e, 'share-admin-libs')}>\n              <span aria-hidden=\"true\" className=\"sharp\">#</span>\n              <span className=\"nav-text\">{gettext('Libraries')}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-folders/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-folders')}`} title={gettext('Folders')} onClick={(e) => this.tabItemClick(e, 'share-admin-folders')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Folders')}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return (\n      customNavItems.map((item, idx) => {\n        return (\n          <li key={idx} className=\"nav-item\">\n            <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n              <span className={item.icon} aria-hidden=\"true\"></span>\n              <span className=\"nav-text\">{item.desc}</span>\n            </a>\n          </li>\n        );\n      })\n    );\n  }\n\n  render() {\n    let showActivity = isDocs || isPro;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext('Files')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link to={ siteRoot + 'my-libs/' } className={`nav-link ellipsis ${this.getActiveClass('my-libs') || this.getActiveClass('deleted') }`} title={gettext('My Libraries')} onClick={(e) => this.tabItemClick(e, 'my-libs')}>\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('My Libraries')}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link to={siteRoot + 'shared-libs/'} className={`nav-link ellipsis ${this.getActiveClass('shared-libs')}`} title={gettext('Shared with me')} onClick={(e) => this.tabItemClick(e, 'shared-libs')}>\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with me')}</span>\n              </Link>\n            </li>\n            { canViewOrg &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'org')}>\n                <Link to={ siteRoot + 'org/' } className={`nav-link ellipsis ${this.getActiveClass('org')}`} title={gettext('Shared with all')}>\n                  <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared with all')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Shared with groups')} onClick={this.grpsExtend}>\n                <span className={`toggle-icon float-right fas ${this.state.groupsExtended ?'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with groups')}</span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'shared-with-ocm/'} className={`nav-link ellipsis ${this.getActiveClass('shared-with-ocm')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'shared-with-ocm')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Library Details')} onClick={this.libdtExtend}>\n                <span className={`toggle-icon float-right fas ${this.state.libraryDetailsExtended ?'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n                <span className=\"sf2-icon-list-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Library Details')}</span>\n              </a>\n              {this.renderLibraryDetails()}\n            </li>\n          </ul>\n\n\n          <h3 className=\"sf-heading\">{gettext('Tools')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('starred')}`} to={siteRoot + 'starred/'} title={gettext('Favorites')} onClick={(e) => this.tabItemClick(e, 'starred')}>\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Favorites')}</span>\n              </Link>\n            </li>\n            {showActivity &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('dashboard')}`} to={siteRoot + 'dashboard/'} title={gettext('Activities')} onClick={(e) => this.tabItemClick(e, 'dashboard')}>\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Activities')}</span>\n                </Link>\n              </li>\n            }\n            {canPublishRepo &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('published')}`} to={siteRoot + 'published/'} title={gettext('Published Libraries')} onClick={(e) => this.tabItemClick(e, 'published')}>\n                  <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Published Libraries')}</span>\n                </Link>\n              </li>\n            }\n            {isDocs &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'drafts')}>\n                <Link className={`nav-link ellipsis ${this.getActiveClass('drafts')}`} to={siteRoot + 'drafts/'} title={gettext('Drafts')}>\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"draft-info nav-text\">\n                    {gettext('Drafts')}\n                    {this.props.draftCounts === 0 ? '' : <Badge color=\"info\" pill>{this.props.draftCounts}</Badge>}\n                  </span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('linked-devices')}`} to={siteRoot + 'linked-devices/'} title={gettext('Linked Devices')} onClick={(e) => this.tabItemClick(e, 'linked-devices')}>\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Linked Devices')}</span>\n              </Link>\n            </li>\n            {canInvitePeople &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('invitations')}`} to={siteRoot + 'invitations/'} title={gettext('Invite People')} onClick={(e) => this.tabItemClick(e, 'invitations')}>\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Invite People')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Share Admin')} onClick={this.shExtend}>\n                <span className={`toggle-icon float-right fas ${this.state.sharedExtended ? 'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Share Admin')}</span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer &&\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\" aria-hidden=\"true\"></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        }\n      </div>\n    );\n  }\n\n  // KEEPER\n  libdtExtend = () => {\n    this.setState({\n      libraryDetailsExtended: !this.state.libraryDetailsExtended,\n    });\n    this.loadLibraryDetails();\n  }\n\n  loadLibraryDetails = () => {\n    let _this = this;\n    keeperAPI.listLibraryDetails().then(res =>{\n      let libraryDetailsList = res.data.map(item => {\n        let libraryDetailsItem = new LibraryDetails(item);\n        return libraryDetailsItem;\n      });\n\n      this.libraryDetailsHeight = (libraryDetailsList.length + 1) * _this.listHeight;\n      _this.setState({\n        libraryDetailItems: libraryDetailsList.sort((a, b) => {\n          return a.repo_name.toLowerCase() < b.repo_name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  renderLibraryDetails() {\n    let style = {height: 0};\n    if (this.state.libraryDetailsExtended) {\n      style = {height: this.libraryDetailsHeight};\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column grp-list ${this.state.groupsExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style}>\n        {this.state.libraryDetailItems.map(item => {\n          return (\n            <li key={item.repo_id} className=\"nav-item\">\n              <a href={siteRoot + 'landing-page/libs/' + item.repo_id + '/'} className={`nav-link ellipsis ${this.getActiveClass(item.repo_name)}`}>\n                <span className=\"sharp\" aria-hidden=\"true\">#</span>\n                <span className=\"nav-text\">{item.repo_name}</span>\n              </a>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle, seafileVersion } from '../../utils/constants';\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n\n  toggle = () => {\n    this.props.onCloseAboutDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <div className=\"about-content\">\n            <p><img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" /></p>\n            <p>{gettext('Server Version: ')}{seafileVersion}<br />© 2022 {gettext('KEEPER')}</p>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n      collapsed: true\n    };\n  }\n\n  onAboutDialogToggle = () => {\n    this.setState({isAboutDialogShow: !this.state.isAboutDialogShow});\n  }\n\n  onFooterExpandedToggle = () => {\n    this.setState({collapsed: !this.state.collapsed});\n  }\n\n  render() {\n    const elementBodyStyle = {\n      maxHeight: this.state.collapsed ? '0' : '30rem',\n      borderBottomWidth: this.state.collapsed ? '0' : '1px',\n    };\n    return (\n        <Fragment>\n        <div className=\"side-nav-footer\">\n          <div id=\"footer-header\">\n            <span aria-hidden=\"true\"\n              className={(this.state.collapsed ? 'keeper-icon-triangle-up' : 'keeper-icon-triangle-down') + ' vam'}\n              onClick={this.onFooterExpandedToggle}/>&nbsp;\n            <a href={siteRoot + 'project-catalog/'} target=\"_blank\" className=\"item\">{gettext('Project Catalog')}</a>\n            <a href=\"https://mpdl.zendesk.com/hc/en-us/categories/360001234340-Keeper\" target=\"_blank\"\n              className=\"item\">{gettext('Help / Knowledge Base')}</a>\n            <a className=\"item cursor-pointer last-item\" onClick={this.onAboutDialogToggle}>{gettext('About')}</a>\n          </div>\n\n          <div id=\"footer-body\" style={elementBodyStyle}>\n            <br/>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>What you need to know</h4>\n                <a href=\"https://keeper.mpdl.mpg.de/f/d17ecbb967/\" target=\"_blank\">About Keeper</a><br/>\n                <a href=\"https://keeper.mpdl.mpg.de/f/1b0bfceac2/\" target=\"_blank\">Cared Data\n                                Commitment</a><br/>\n                <a href=\"https://keeper.mpdl.mpg.de/f/f62758e53c/\" target=\"_blank\">Terms of Service</a>\n              </div>\n              <div className=\"right\">\n                <h4>Client</h4>\n                <a href=\"/download_client_program/\" target=\"_blank\">Download the Keeper client for Windows, Linux, Mac, Android and iPhone</a>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>The software behind Keeper</h4>\n                <a href=\"https://seafile.com/en/home/\" target=\"_blank\">\n                  <img className=\"logo\" id=\"seafile-logo\" src=\"/media/custom/seafile_logo_footer.png\"/>&nbsp;© 2022 Seafile\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>A service by</h4>\n                <a href=\"https://www.mpdl.mpg.de/\" target=\"_blank\">\n                  <img className=\"logo\" id=\"MPDL-logo\" src=\"/media/custom/mpdl.png\"/>\n                </a><br/><br/>\n                <a href=\"mailto:keeper@mpdl.mpg.de\" target=\"_blank\">Contact Keeper Support</a><br/>\n                <a href=\"https://keeper.mpdl.mpg.de/f/17e4e9d648/\" target=\"_blank\">Impressum</a><br/>\n                <a href=\"https://keeper.mpdl.mpg.de/f/bf2c8a977f70428587eb/\" target=\"_blank\">Privacy Policy</a>\n              </div>\n            </div>\n          </div>\n          {this.state.isAboutDialogShow &&\n            <ModalPortal>\n              <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle}/>\n            </ModalPortal>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n  componentDidMount() {\n    const script = document.createElement('script');\n    script.src =\n      'https://static.zdassets.com/ekr/snippet.js?key=32977f9b-455d-428b-8dd5-f4c65aad0daa';\n    script.id = 'ze-snippet';\n    script.async = true;\n    document.body.appendChild(script);\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel o-hidden\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <span onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2\">{gettext('details')}</span>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return Utils.imageCheck(item.obj_name) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.sharePerms(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {Utils.sharePermsExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, is_admin, isOpIconShown, isPermSelectDialogOpen } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <PermSelect\n          currentPerm={share_permission}\n          permissions={this.permissions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, isOpIconShown, isPermSelectDialogOpen } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <PermSelect\n          currentPerm={share_permission}\n          permissions={this.permissions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n          }\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n            <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n              </li>\n              {canGenerateUploadLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n              )}\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n          <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              {canGenerateShareLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n              )}\n              <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n    if (object.doi != undefined) {\n      this.doi = object.doi;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@reach/router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onStarRepo = () => {\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n    const desktopItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td className=\"text-center\">\n            {!this.state.isStarred && <i className=\"far fa-star star-empty cursor-pointer\" onClick={this.onStarRepo}></i>}\n            {this.state.isStarred && <i className=\"fas fa-star cursor-pointer\" onClick={this.onStarRepo}></i>}\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td><Link to={shareRepoUrl}>{data.repo_name}</Link></td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} onClick={this.leaveShare}></a>\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link><br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) &&\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>\n                  }\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { post } from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item'>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\">\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}}></span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you don’t receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport makeAnimated from 'react-select/lib/animated';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    let activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem>\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem>\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span dangerouslySetInnerHTML={{__html: repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}}></span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n  }\n\n  componentDidMount() {\n    this.refs.renameInput.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.refs.renameInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.refs.renameInput.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.onRenameConfirm(e);\n    }\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref=\"renameInput\"\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyPress={this.onKeyPress}\n          onClick={this.onClick}\n        />\n        <button className=\"btn btn-secondary sf2-icon-confirm confirm\" onClick={this.onRenameConfirm}></button>\n        <button className=\"btn btn-secondary sf2-icon-cancel cancel\" onClick={this.onRenameCancel}></button>\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, isPro, folderPermEnabled, enableRepoSnapshotLabel, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'toggle');\n    this.props.onMenuItemClick(operation);\n  }\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem = isPro && repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured;\n    let showAssignDoiMenuItem = repo.doi && !repo.encrypted;\n    let showArchiveLibraryMenuItem = !repo.encrypted;\n    let showCertifyLibraryMenuItem = !repo.encrypted;\n    let showEditMetadatayMenuItem = !repo.encrypted;\n    let operations = ['Rename', 'Transfer'];\n    if (folderPermEnabled) {\n      operations.push('Folder Permission');\n    }\n    operations.push('Share Links Admin', 'Divider');\n    if (repo.encrypted) {\n      operations.push('Change Password');\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push('Reset Password');\n    }\n    operations.push('History Setting', 'API Token');\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push('Label Current State');\n    }\n    if (isPro) {\n      operations.push('Old Files Auto Delete');\n    }\n    //KEEPER\n    operations.push('Divider');\n    if (showAssignDoiMenuItem) {\n      operations.push('Assign DOI to current state');\n    }\n    if (showArchiveLibraryMenuItem) {\n      operations.push('Archive Library');\n    }\n    if (showCertifyLibraryMenuItem) {\n      operations.push('Certify Library');\n    }\n    if (showEditMetadatayMenuItem) {\n      operations.push('Edit Metadata');\n    }\n    return operations;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Star':\n        translateResult = gettext('Star');\n        break;\n      case 'Unstar':\n        translateResult = gettext('Unstar');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Label Current State':\n        translateResult = gettext('Label Current State');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto deletion');\n        break;\n      //KEEPER\n      case 'Assign DOI to current state':\n        translateResult = gettext('Assign DOI to current state');\n        break;\n      case 'Archive Library':\n        translateResult = gettext('Archive Library');\n        break;\n      case 'Certify Library':\n          translateResult = gettext('Certify Library');\n        break;\n      case 'Edit Metadata':\n        translateResult = gettext('Edit Metadata');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n          <DropdownToggle\n            tag=\"i\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext('More Operations')}\n            // onClick={this.clickOperationMenuToggle}\n            data-toggle=\"dropdown\"\n            aria-expanded={this.state.isItemMenuShow}\n          />\n          <DropdownMenu>\n            {operations.map((item, index)=> {\n              if (item == 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift('Delete');\n    operations.unshift('Share');\n    this.props.isStarred ? operations.unshift('Unstar') : operations.unshift('Star');\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div className={`${this.state.isItemMenuShow ? '' : 'd-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != 'Divider') {\n                return (<DropdownItem key={index} className=\"mobile-menu-item\" data-toggle={item} onClick={this.onMenuItemClick}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <span title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" onClick={this.onEditPermission}/>\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n          <span className=\"far fa-copy action-icon\" onClick={this.onCopyAPIToken} />\n          }\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, NavLink } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport EmptyTip from '../empty-tip';\n\nconst repoShareUploadLinkItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  activeTab: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item.token);\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (this.props.activeTab === 'shareLinks') {\n      if (item.is_dir) {\n        objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n      } else {\n        objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      }\n    }\n\n    if (this.props.activeTab === 'uploadLinks') {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <a href={objUrl} target=\"_blank\" className=\"text-inherit\">{item.obj_name}</a>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" className=\"text-inherit\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoShareUploadLinkItem.propTypes = repoShareUploadLinkItemPropTypes;\n\nconst RepoShareUploadLinksDialogPropTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinksDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 'shareLinks',\n      repoShareUploadLinkList: [],\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems('share-link');\n  }\n\n  getItems = (itemType) => {\n    const repoID = this.props.repo.repo_id;\n    const request = itemType == 'share-link' ?\n      seafileAPI.listRepoShareLinks(repoID) :\n      seafileAPI.listRepoUploadLinks(repoID);\n    request.then((res) => {\n      this.setState({\n        loading: false,\n        repoShareUploadLinkList: res.data,\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  }\n\n  deleteItem = (token) => {\n    const repoID = this.props.repo.repo_id;\n    const request = this.state.activeTab == 'shareLinks' ?\n      seafileAPI.deleteRepoShareLink(repoID, token) :\n      seafileAPI.deleteRepoUploadLink(repoID, token);\n    request.then((res) => {\n      const repoShareUploadLinkList = this.state.repoShareUploadLinkList.filter(item => {\n        return item.token !== token;\n      });\n      this.setState({\n        repoShareUploadLinkList: repoShareUploadLinkList\n      });\n    }).catch(error => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n    if (tab == 'shareLinks') {\n      this.getItems('share-link');\n    }\n    if (tab == 'uploadLinks') {\n      this.getItems('upload-link');\n    }\n  };\n\n  render() {\n\n    const { loading, errorMsg, activeTab, repoShareUploadLinkList } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} Share/Upload Links').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '800px'}}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}}></span>\n        </ModalHeader>\n        <ModalBody className=\"p-0 pb-4\">\n          <div className=\"main-panel-center\">\n            <div className=\"cur-view-container\">\n              <div className=\"cur-view-path share-upload-nav\">\n                <ul className=\"nav\">\n                  <li className=\"nav-item\">\n                    <NavLink className={activeTab === 'shareLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLinks')}>{gettext('Share Links')}</NavLink>\n                  </li>\n                  <li className=\"nav-item\">\n                    <NavLink className={activeTab === 'uploadLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLinks')}>{gettext('Upload Links')}</NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"cur-view-content\" style={{minHeight: '20rem', maxHeight: '20rem'}}>\n                {loading && <Loading />}\n                {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n                {!loading && !errorMsg && !repoShareUploadLinkList.length &&\n                  <EmptyTip forDialog={true}>\n                    <p className=\"text-secondary\">{activeTab == 'shareLinks' ? gettext('No share links') : gettext('No upload links')}</p>\n                  </EmptyTip>\n                }\n                {!loading && !errorMsg && repoShareUploadLinkList.length > 0 &&\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"22%\">{gettext('Creator')}</th>\n                      <th width=\"20%\">{gettext('Name')}</th>\n                      <th width=\"48%\">{gettext('Link')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.repoShareUploadLinkList.map((item, index) => {\n                      return (\n                        <RepoShareUploadLinkItem\n                          key={index}\n                          item={item}\n                          activeTab={this.state.activeTab}\n                          deleteItem={this.deleteItem}\n                        />\n                      );\n                    })}\n                  </tbody>\n                </table>\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoShareUploadLinksDialog.propTypes = RepoShareUploadLinksDialogPropTypes;\n\nexport default RepoShareUploadLinksDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet = this.state.autoDelDays;\n\n    let reg = /^-?\\d+$/;\n    let isvalid_days = reg.test(daysNeedTobeSet);\n    if (!isvalid_days || daysNeedTobeSet <= 0) {\n      this.setState({\n        errorInfo: gettext('Please enter a positive integer'),\n      });\n      return;\n    }\n\n    if (!this.state.isAutoDel) {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap'; \nimport { gettext } from '../../utils/constants';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass AssignDoiDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  formSubmit = () => {\n    const {repoID, repoName} = this.props;\n    this.props.toggleDialog();\n    keeperAPI.addDoi(repoID).then((res) => {\n      if (res.data && res.data['msg']) {\n        toaster.success(res.data['msg'], {duration: 3});\n      }\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg, {duration: 3});\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}> <span>{gettext('Assign DOI to {library_name}').replace('{library_name}','')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n        <ModalBody>\n          {gettext(\"Please note: a DOI identifier will be assigned to the current state of the selected library (snapshot). The DOI will persistently reference to the snapshot and not the latest state of the library. A DOI can only be created once per library.\")}\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Assign DOI')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAssignDoiDialog.propTypes = propTypes;\n\nexport default AssignDoiDialog;\n","import React, {Fragment} from 'react';\nimport Select from 'react-select';\nimport AsyncCreatableSelect from 'react-select/lib/AsyncCreatable';\nimport {Utils} from '../utils/utils';\nimport {gettext,} from '../utils/constants';\nimport {keeperAPI} from '../utils/seafile-api';\nimport toaster from './toast';\nimport {Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Input, Label, Row, Tooltip} from 'reactstrap';\nimport PropTypes from 'prop-types';\n\nimport '../css/toolbar.css';\nimport '../css/search.css';\n\nimport '../css/user-settings.css';\nimport '../css/keeper-archive-metadata-form.css';\n\nlet mpgInstituteOptions = [];\n\nconst defaultResourceType = \"Library\";\nconst resourceTypes = [\"Library\", \"Project\"];\n\nconst defaultAuthors = [{firstName: \"\", lastName: \"\", affs: [\"\"]}];\nconst defaultDirectors = [{firstName: \"\", lastName: \"\"}];\nconst defaultPublisher = gettext(\"MPDL Keeper Service, Max-Planck-Gesellschaft zur Förderung der Wissenschaften e. V.\");\n\nconst defaultMd = {\n  title: \"\",\n  authors: defaultAuthors,\n  publisher: defaultPublisher,\n  description: \"\",\n  year: \"\",\n  institute: \"\",\n  department: \"\",\n  directors: defaultDirectors,\n  resourceType: defaultResourceType,\n  license: \"\",\n  errors: \"\",\n};\n\nconst defaultValidMd = {\n  title: true,\n  authors: [[true, true]],\n  publisher: true,\n  description: true,\n  year: true,\n  institute: true,\n  department: true,\n  directors: [[true, true]],\n  resourceType: true,\n};\n\nconst infoAreaPropTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nclass InfoArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      helpTooltipOpen: false,\n      errorTooltipOpen: false,\n    };\n  }\n\n  toggleHelp = () => {\n    this.setState({\n      helpTooltipOpen: !this.state.helpTooltipOpen,\n    });\n  };\n\n  toggleError = () => {\n    this.setState({\n      errorTooltipOpen: !this.state.errorTooltipOpen,\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"input-tip pt-0\">\n          {this.props.id != \"license\" &&\n          <span style={{color: \"red\", fontWeight: \"900\"}}>*&nbsp;&nbsp;</span>\n          }\n          <i className=\"fas fa-question-circle\" id={this.props.id + \"-help\"}/>\n          <Tooltip\n            toggle={this.toggleHelp}\n            delay={{show: 0, hide: 0}}\n            target={this.props.id + \"-help\"}\n            placement=\"right\"\n            isOpen={this.state.helpTooltipOpen}\n          >\n            {this.props.helpText}\n          </Tooltip>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nInfoArea.propTypes = infoAreaPropTypes;\n\n\nconst keeperArchiveMetadataFormPropTypes = {\n  repoID: PropTypes.string.isRequired,\n};\n\nclass KeeperArchiveMetadataForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...defaultMd,\n      validMd: defaultValidMd,\n      isSaved: true,\n      isButton1Disabled: false,\n      isButton2Disabled: true,\n    };\n\n  }\n\n  componentDidMount() {\n    keeperAPI\n      .getArchiveMetadata(this.props.repoID)\n      .then((res) => {\n        let newState = this.state;\n        if ('data' in res) {\n          Object.keys(defaultMd).map((k) => {\n            newState[k] = k in res.data ? res.data[k] : \"\";\n          });\n          if (!(\"authors\" in newState && newState.authors.length > 0)) {\n            newState.authors = defaultAuthors;\n          }\n          if (!(\"directors\" in newState && newState.directors.length > 0)) {\n            newState.directors = defaultDirectors;\n          }\n          if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n            newState.publisher = defaultPublisher;\n          }\n          if (\n            !(\"resourceType\" in newState && newState.resourceType && newState.resourceType.trim())\n          ) {\n            newState.resourceType = defaultResourceType;\n          }\n        } else {\n          newState = defaultMd;\n        }\n\n        newState.validMd = this.getValidMd(newState);\n\n        this.setState(newState, () => this.setButtons());\n\n        keeperAPI.getMpgInstitutes().then((res2) => {\n          res2.data.map((v) => {\n            mpgInstituteOptions.push({value: v, label: v});\n          });\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  }\n\n  isFieldValid = (key, value) => {\n    if (!key || !value)\n      return false;\n    let isValid = true;\n    if (key == \"title\" || key == \"description\" || key == \"publisher\" || key == \"department\" || key == \"institute\") {\n      isValid = value.trim() != \"\";\n    } else if (key == \"year\") {\n      const reg = new RegExp(\"^\\\\d{4}$\");\n      //const parsed = parseInt(value, 10);\n      //isValid = !isNaN(parsed) && parsed > 0;\n      isValid = reg.test(value);\n    } else if (key == \"author\" || key == \"director\") {\n      isValid = [Boolean(value.firstName && value.firstName.trim()), Boolean(value.lastName && value.lastName.trim())];\n    }\n    return isValid;\n  }\n\n  isFormValid = (validMd) => {\n    let isValid = true;\n    outer: for (let key in validMd) {\n      if (key == \"authors\" || key == \"directors\") {\n        for (let a of validMd[key])\n          if (!a[0] || !a[1]) {\n            isValid = false;\n            break outer;\n          }\n      } else if (!validMd[key]) {\n        isValid = false;\n        break outer;\n      }\n    }\n    return isValid;\n  }\n\n  setButtons = () => {\n    const isValid = this.isFormValid(this.state.validMd);\n    this.setState({\n      isButton1Disabled: this.state.isSaved && isValid,\n      isButton2Disabled: !this.state.isSaved || !isValid,\n    });\n  }\n\n  getValidMd = (md) => {\n    Object.keys(defaultValidMd).map(k => {\n      if (k == \"authors\" || k == \"directors\") {\n        for (let idx in md[k]) {\n          this.state.validMd[k][idx] = this.isFieldValid(k.slice(0, -1), md[k][idx]);\n        }\n      } else {\n        this.state.validMd[k] = this.isFieldValid(k, md[k]);\n      }\n    });\n    return this.state.validMd;\n  }\n\n  onButton1 = e => {\n    e.preventDefault();\n    this.props.onButton1(defaultMd, this.state)\n      .then(res => {\n        res.validMd = this.getValidMd(res);\n        res.isSaved = true;\n        this.setState(res, () => this.setButtons());\n        toaster.success(\n          gettext(\"Success.\") + (this.state.isButton2Disabled ? \"\" : \" \" + gettext(\"Now you can archive.\")),\n          {duration: 3}\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onButton2 = e => {\n    this.props.onButton2()\n      .then(msg => {\n        toaster.success(gettext(msg), {duration: 3});\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  handleInputChange(e, key) {\n    this.state.validMd[key] = this.isFieldValid(key, e.target.value);\n    this.setState({\n      [key]: e.target.value,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  setAuthorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.authors[idx] = this.isFieldValid(\"author\", values[idx]);\n    }\n    this.setState({\n      authors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => {\n      this.setButtons();\n    }\n    );\n  }\n\n  handleAuthorAddFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\", affs: [\"\"]});\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorRemoveFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorInputChange = (idx, e) => {\n    const values = [...this.state.authors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffInputChange = (idx, aidx, e) => {\n    const values = [...this.state.authors];\n    values[idx].affs[aidx] = e.target.value;\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffAddFields = (idx, aidx) => {\n    const values = [...this.state.authors];\n    values[idx].affs.splice(aidx + 1, 0, \"\");\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffRemoveFields = (index, aidx) => {\n    const values = [...this.state.authors];\n    values[index].affs.splice(aidx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  setDirectorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.directors[idx] = this.isFieldValid(\"director\", values[idx]);\n    }\n    this.setState({\n      directors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  handleDirectorAddFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\"});\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorRemoveFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx, 1);\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorInputChange = (idx, e) => {\n    const values = [...this.state.directors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setDirectorInputFields(values);\n  };\n\n  onResourceSelectChange = selectedItem => {\n    this.setState({\n      resourceType: selectedItem.value,\n    });\n  };\n\n  resourceOptions = resourceTypes.map((item) => {\n    return {value: item, label: gettext(item)};\n  });\n\n  filterInstitutes = input => {\n    return mpgInstituteOptions.filter((i) =>\n      i.label.toLowerCase().includes(input.toLowerCase())\n    );\n  };\n\n  promiseOptions = input =>\n    new Promise((resolve) => {\n      resolve(this.filterInstitutes(input));\n    });\n\n  handleInstituteChange = option => {\n    let insName =\n      option == null\n        ? \"\"\n        : !(\"value\" in option) || option.value.trim() === \"\"\n          ? \"\"\n          : option.value;\n    this.state.validMd.institute = this.isFieldValid(\"institute\", insName);\n    this.setState({\n      institute: insName,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  };\n\n  validationProps = key => {\n    return (this.state.validMd[key] ? {valid: true} : {invalid: true});\n  }\n\n  validationInSelects = key => {\n    return (this.state.validMd[key] ? \"is-valid\" : \"is-invalid\");\n  }\n\n  validationInAuthors = (idx, nidx) => {\n    return (this.state.validMd.authors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  validationInDirectors = (idx, nidx) => {\n    return (this.state.validMd.directors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  render() {\n\n    return (\n\n      <Fragment>\n        <Modal isOpen={true}>\n\n          <form method=\"post\">\n\n            <ModalHeader toggle={this.props.hideDialog}>\n              {this.props.header}\n            </ModalHeader>\n            <ModalBody>\n              {this.props.body}\n\n              <div className=\"h-100 d-flex flex-column\">\n                <div className=\"flex-auto d-flex o-hidden\">\n                  <div className=\"main-panel d-flex flex-column\">\n                    <div className=\"content position-relative\" style={{paddingBottom: \"0rem\"}}>\n\n                      {/*Title*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-title\"\n                            sm={1}\n                          >\n                            {gettext(\"Title\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                type=\"textarea\"\n                                className=\"form-control\"\n                                placeholder={gettext(\"Title of your research project\") + \"...\"}\n                                value={this.state.title}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"title\");\n                                }}\n                                {...this.validationProps(\"title\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea id=\"title\"\n                                helpText={gettext(\"Please enter the title of your research project.\")}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Authors*/}\n                      <FormGroup row className=\"md-item\">\n                        {this.state.authors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-authors\"\n                              sm={1}\n                              className=\"pt-3\"\n                              for=\"lbl-authors\"\n                            >\n                              {gettext(\"Author\") +\n                              (this.state.authors.length > 1\n                                ? \" #\" + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <Col sm={4} className=\"form-group md-item\">\n                              <Label for=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 0)}\n                              />\n                            </Col>\n                            <div className=\"form-group col-sm-5 md-item\">\n                              <label htmlFor=\"lastName\">\n                                {gettext('Last Name')}:\n                              </label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 1)}\n                              />\n                            </div>\n                            <div className=\"form-group col-sm-1\">\n                              {this.state.authors.length > 1 && (\n                                <button\n                                  className=\"author-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleAuthorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"author-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleAuthorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </div>\n                            {index == 0 &&\n                            <span className=\"info-area-names\">\n                              <InfoArea\n                                id=\"author\"\n                                className=\"info-area-names\"\n                                helpText={gettext(\"Please enter the authors and affiliation of your research project.\")}\n                              />\n                            </span>\n                            }\n\n                            {inputField.affs.map((_, aidx) => (\n                              <React.Fragment\n                                key={`${inputField}~${index}~${aidx}`}\n                              >\n                                <div className=\"form-group col-sm-11 ml-2\">\n                                  <label\n                                    className=\"offset-sm-1\"\n                                    htmlFor=\"lbl-affiliation\"\n                                  >\n                                    {gettext('Affiliation') +\n                                    (inputField.affs.length > 1\n                                      ? ' #' + (aidx + 1)\n                                      : \"\")}\n                                    :\n                                  </label>\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control  offset-sm-1 col-sm-11\"\n                                    value={inputField.affs[aidx]}\n                                    onChange={(e) =>\n                                      this.handleAuthorAffInputChange(\n                                        index,\n                                        aidx,\n                                        e\n                                      )\n                                    }\n                                  />\n                                </div>\n                                <div className=\"form-group\">\n                                  {inputField.affs.length > 1 && (\n                                    <button\n                                      className=\"affiliation-control btn btn-link\"\n                                      type=\"button\"\n                                      onClick={() =>\n                                        this.handleAuthorAffRemoveFields(\n                                          index,\n                                          aidx\n                                        )\n                                      }\n                                    >\n                                      -\n                                    </button>\n                                  )}\n                                  <button\n                                    className=\"affiliation-control btn btn-link\"\n                                    type=\"button\"\n                                    onClick={() =>\n                                      this.handleAuthorAffAddFields(index, aidx)\n                                    }\n                                  >\n                                    +\n                                  </button>\n                                </div>\n                              </React.Fragment>\n                            ))}\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Publisher*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-publisher\"\n                            sm={1}\n                            htmlFor=\"publisher\"\n                          >\n                            {gettext('Publisher')}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"publisher\"\n                                type=\"textarea\"\n                                style={{height: \"4em\"}}\n                                placeholder={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.publisher}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"publisher\");\n                                }}\n                                {...this.validationProps(\"publisher\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"publisher\"\n                                helpText={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Description*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-description\"\n                            sm={1}\n                            htmlFor=\"description\"\n                          >\n                            {gettext(\"Description\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"description\"\n                                type=\"textarea\"\n                                style={{height: \"6em\"}}\n                                placeholder={gettext(\"Please enter the description of your research project\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.description}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"description\");\n                                }}\n                                {...this.validationProps(\"description\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"description\"\n                                helpText={gettext(\"Please enter the description of your research project\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n\n                      </FormGroup>\n\n                      {/*Year*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-year\"\n                          sm={1}\n                          className=\"pt-0\"\n                          for=\"lbl-year\"\n                        >\n                          {gettext(\"Year\")}:\n                        </Label>\n                        <Col sm={4}>\n                          <Input\n                            className=\"form-control\"\n                            placeholder={gettext(\"Year of project start...\")}\n                            value={this.state.year}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"year\");\n                            }}\n                            {...this.validationProps(\"year\")}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"year\"\n                          helpText={gettext(\"Please enter year of project start.\")}\n                        />\n                      </FormGroup>\n\n                      {/*Institute*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-institute\"\n                          className=\"pt-3\"\n                          sm={1}\n                          for=\"institute\"\n                        >\n                          {gettext('Institute')}:\n                        </Label>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label>{gettext('Institute name')}:</Label>\n                          <AsyncCreatableSelect\n                            id=\"institute\"\n                            className={this.state.validMd.institute ? \"is-valid\" : \"is-invalid\"}\n                            isClearable\n                            cacheOptions\n                            value={{\n                              value: this.state.institute,\n                              label: this.state.institute,\n                            }}\n                            onChange={this.handleInstituteChange}\n                            loadOptions={this.promiseOptions}\n                            {...this.validationProps(\"institute\")}\n                          />\n                        </Col>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label for=\"department\">\n                            {gettext('Department')}:\n                          </Label>\n                          <Input\n                            value={this.state.department}\n                            onChange={(e) =>\n                              this.handleInputChange(e, \"department\")\n                            }\n                            {...this.validationProps(\"department\")}\n                          />\n                        </Col>\n                        <span className=\"info-area-names\">\n                          <InfoArea\n                            id=\"institute\"\n                            helpText={gettext(\"Please enter the related Max Planck Institute for this research project.\")}\n                          />\n                        </span>\n                        {this.state.directors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-directors\"\n                              sm={2}\n                              className=\"form-group offset-sm-1 pt-3\"\n                              for=\"directors\"\n                            >\n                              {gettext('Director or PI') +\n                              (this.state.directors.length > 1\n                                ? ' #' + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label form=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 0)}\n\n                              />\n                            </FormGroup>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label for=\"lastName\">\n                                {gettext('Last Name')}:\n                              </Label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 1)}\n                              />\n                            </FormGroup>\n                            <FormGroup>\n                              {this.state.directors.length > 1 && (\n                                <button\n                                  className=\"director-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleDirectorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"director-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleDirectorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </FormGroup>\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Resource Type*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-resource-type\"\n                          sm={2}\n                          className=\"pt-0\"\n                          for=\"resource-type\"\n                        >\n                          {gettext('Resource Type')}:\n                        </Label>\n                        <Col sm={3}>\n                          <Select\n                            id=\"resource-type\"\n                            value={{\n                              value: this.state.resourceType,\n                              label: gettext(this.state.resourceType)\n                            }}\n                            options={this.resourceOptions}\n                            onChange={this.onResourceSelectChange}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"resource-type\"\n                          helpText={gettext(\"Please enter the resource type of the entity. Allowed values for this field: Library (default), Project.\")}\n                        />\n                      </Row>\n\n                      {/*License*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-license\"\n                          className=\"pt-0\"\n                          sm={1}\n                          for=\"license\"\n                        >\n                          {gettext(\"License\")}:\n                        </Label>\n                        <Col sm={7}>\n                          <Input\n                            id=\"license\"\n                            placeholder={gettext(\"Please enter the license\") + \"...\"}\n                            className=\"form-control\"\n                            value={this.state.license}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"license\");\n                            }}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"license\" helpText={gettext(\"Please enter the license\") + \".\"}\n                        />\n                      </Row>\n                      {/*<br />*/}\n                      {/*<pre>{JSON.stringify(this.state, null, 2)}</pre>*/}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ModalBody>\n            <ModalFooter>\n              {this.props.onButton1 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-1 col-sm-3\"\n                disabled={this.state.isButton1Disabled}\n                onClick={(e) => this.onButton1(e)}>\n                {this.props.button1Label}\n              </button>\n              }\n              {this.props.onButton2 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-9 col-sm-3\"\n                disabled={this.state.isButton2Disabled}\n                onClick={(e) => this.onButton2(e)}>\n                {this.props.button2Label}\n              </button>\n              }\n            </ModalFooter>\n          </form>\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nKeeperArchiveMetadataForm.propTypes = keeperArchiveMetadataFormPropTypes;\n\nexport default KeeperArchiveMetadataForm;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\nimport KeeperArchiveMetadataForm from '../keeper-archive-metadata-form';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass ArchiveLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onUpdateArchiveMetadata = (defaultMd, state) => {\n        let newState = {};\n        Object.keys(defaultMd).map(k => {\n            newState[k] = state[k];\n        });\n        //return promise, not run!\n        return keeperAPI\n            .updateArchiveMetadata(this.props.repoID, newState)\n            .then((res) => {\n                newState = res.data;\n\n                newState.validMd = state.validMd;\n\n                //if publisher is empty, apply defaultPublisher\n                if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n                    newState.publisher = defaultMd.publisher;\n                    newState.validMd.publisher = true;\n                }\n\n                return newState;\n            })\n            .catch((error) => {\n                let errMessage = Utils.getErrorMsg(error);\n                toaster.danger(errMessage);\n            });\n    }\n\n    onArchiveClick = (a, b) => {\n        this.props.hideDialog();\n        //return promise, not run!\n        return keeperAPI.archiveLibrary(this.props.repoID)\n            .then((resp) => {\n                return resp.data.msg;\n        });\n    }\n\n    render() {\n        const archive_info = gettext(\"By archiving this library, the current state of everything contained within \" +\n            \"it will be archived on a dedicated archiving system. For more information, please follow the link: \" +\n            \"{archive_info_link} This library can be archived {quota} more times. Please, fill out the following archive metadata form.\").replace(\"{quota}\",\n            this.props.quota);\n        const split = archive_info.split('{archive_info_link}')\n        return (\n                <KeeperArchiveMetadataForm\n                    hideDialog={this.props.hideDialog}\n                    repoID={this.props.repoID}\n                    header={\n                        <Fragment>\n                            <span>{gettext('Archive {library_name}').replace('{library_name}', '')}</span>\n                            <span style={{color: '#57a5b8'}}>{this.props.repoName}</span>\n                            <span> {gettext('library')}</span>\n                        </Fragment>\n                    }\n                    body={\n                        <Fragment>\n                            {split[0]}\n                            <a href=\"https://mpdl.zendesk.com/hc/en-us/articles/360011432700-Archiving\"\n                                target=\"_blank\">{gettext(\"Information on Archiving\")}</a>.\n                            {split[1]}\n                        </Fragment>\n                    }\n                    onButton1={this.onUpdateArchiveMetadata}\n                    button1Label={gettext(\"Save metadata\")}\n                    onButton2={this.onArchiveClick}\n                    button2Label={gettext(\"Archive\")}\n                />\n        )\n    }\n}\n\nArchiveLibraryDialog.propTypes = propTypes;\n\nexport default ArchiveLibraryDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalHeader, ModalBody, ModalFooter} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass CertifyLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\n    formSubmit = () => {\n        this.props.hideDialog();\n        const {repoID} = this.props;\n        keeperAPI.canCertify(repoID, 'dir', '/').then(() => {\n            this.certifyLibrary()\n        }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        })\n    }\n\n    certifyLibrary = () => {\n        const {repoID, repoName} = this.props;\n        toaster.success(gettext('Your files with the library {repoName} are currently being certified. We will inform you once the task has successfully finished. This may take a while.').replace('{repoName}', repoName), {duration: 3});\n        keeperAPI.certifyOnBloxberg(repoID, '/', 'dir', repoName).then(() => {\n            }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        });\n    }\n\n    render() {\n        return (\n            <Modal isOpen={true} toggle={this.props.hideDialog}>\n                <ModalHeader toggle={this.props.hideDialog}>\n                    <span>{gettext('Certify')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n                <ModalBody>\n                    <span>{gettext('Certify all files within the library via the bloxberg blockchain. A new entry under “Library Details” on the left sidebar will be created, where you can access the certified version and the file and a proof of certification. Certifying may take some time, depending on the size of the library. Adding metadata is optional, but recommended.')}</span>\n                </ModalBody>\n                <ModalFooter>\n                    <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Certify')}</button>\n                </ModalFooter>\n            </Modal>\n        )\n    }\n}\n\nCertifyLibraryDialog.propTypes = propTypes;\n\nexport default CertifyLibraryDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@reach/router';\nimport { Utils } from '../../utils/utils';\nimport {keeperAPI, seafileAPI} from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../../components/dialog/repo-share-upload-links-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport AssignDoiDialog from '../../components/dialog/assign-doi-dialog';\nimport ArchiveLibraryDialog from '../../components/dialog/archive-library-dialog';\nimport CertifyLibraryDialog from '../../components/dialog/certify-library-dialog';\n\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nvar handleCanArchiveResponse = (obj, resp) => {\n  const d = resp.data;\n  //alert(JSON.stringify(d));\n  let msg, error;\n  const default_error = 'Can not archive library due to unknown reason, please contact support.';\n  if (d.status === 'success')\n    obj.setState({quota: d.quota});\n  else if (d.status === 'in_processing')\n    msg = d.msg;\n  else if (d.status === 'quota_expired')\n    error = gettext('Cannot archive, since the maximum number of archives for this library has been reached. Please contact Keeper support.');\n  else if (d.status === 'snapshot_archived')\n    error = gettext('Cannot archive, since the library snapshot has already been archived.');\n  else if (d.status === 'is_too_big')\n    error = gettext('Cannot archive, since the library is too large.');\n  else if (d.status === 'metadata_error') {\n   //pass, error will be handled via archive metadata form\n  } else if (d.status === 'system_error')\n    error = d.msg || default_error;\n  else\n    error = default_error;\n  if (error)\n    toaster.danger(error);\n  else if (msg)\n    toaster.success(msg);\n};\n\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isAssignDoiDialogShow: false,\n      isArchiveLibraryDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  }\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case 'Assign DOI to current state':\n        this.onAssignDoiToggle();\n        break;\n      case 'Archive Library':\n        this.onArchiveLibraryToggle();\n        break;\n      case 'Certify Library':\n        this.onCertifyLibraryToggle();\n        break;\n      case 'Edit Metadata':\n        this.onEditMetadataToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  }\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  }\n\n  onStarRepo = () => {\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onDeleteToggle = () => {\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  }\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  }\n\n  onAssignDoiToggle = () => {\n    this.setState({isAssignDoiDialogShow: !this.state.isAssignDoiDialogShow});\n  }\n\n  onArchiveLibraryHide = () => {\n    this.setState({isArchiveLibraryDialogShow: false});\n  }\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI.canArchive(this.props.repo.repo_id).then((resp) => {\n      const d = resp.data;\n      handleCanArchiveResponse(this, resp);\n      if (d.status === 'success')\n        this.setState({isArchiveLibraryDialogShow: true});\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      handleCanArchiveResponse(this,{data: {status: 'system_error', msg: errorMsg}});\n    });\n  }\n\n  onCertifyLibraryHide = () => {\n    this.setState({isCertifyLibraryDialogShow: false});\n  }\n\n  onCertifyLibraryToggle = () => {\n    this.setState({isCertifyLibraryDialogShow: true});\n  }\n\n  onEditMetadataHide = () => {\n    this.setState({isEditMetadataDialogShow: false});\n  }\n\n  onEditMetadataToggle = () => {\n    keeperAPI.canArchive(this.props.repo.repo_id).then((resp) => {\n      const d = resp.data;\n      \n      handleCanArchiveResponse(this, resp);\n      if (d.status === 'success')\n        this.setState({isEditMetadataDialogShow: true});\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      handleCanArchiveResponse(this,{data: {status: 'system_error', msg: errorMsg}});\n    });\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td className=\"text-center\">\n          {!this.state.isStarred && <i className=\"far fa-star star-empty cursor-pointer\" onClick={this.onStarRepo}></i>}\n          {this.state.isStarred && <i className=\"fas fa-star cursor-pointer\" onClick={this.onStarRepo}></i>}\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Link to={repoURL}>{repo.repo_name}</Link>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  }\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div><Link to={repoURL}>{repo.repo_name}</Link></div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAssignDoiDialogShow && (\n          <ModalPortal>\n            <AssignDoiDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onAssignDoiToggle}/>\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}/>\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}/>\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}/>\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\nexport { handleCanArchiveResponse };\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = () => {\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <span onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../dialog/repo-share-upload-links-dialog';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = () => {\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = () => {\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = () => {\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Links Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      // scene one: (Share, Delete, itemToggle and other operations);\n      // scene two: (Share, Unshare), (Share), (Unshare)\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              onClick={this.clickOperationMenuToggle}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      if (operations.length == 2) {\n        return (\n          <Fragment>\n            {shareOperation}\n            {unshareOperation}\n          </Fragment>\n        );\n      }\n      if (operations.length == 1 && operations[0] === 'Share') {\n        return shareOperation;\n      }\n\n      if (operations.length == 1 && operations[0] === 'Unshare') {\n        return unshareOperation;\n      }\n    }\n    return null;\n  }\n\n  onStarRepo = () => {\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td className=\"text-center\">\n            {!this.state.isStarred && <i className=\"far fa-star star-empty cursor-pointer\" onClick={this.onStarRepo}></i>}\n            {this.state.isStarred && <i className=\"fas fa-star cursor-pointer\" onClick={this.onStarRepo}></i>}\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename  name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n  \n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        <div className=\"detail-btn btn-group\">\n          <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Detail')} onClick={this.switchViewMode}></button>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFileCancel: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      let isDraft = this.state.isDraft;\n      this.props.onAddFile(path, isDraft);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isDraft: !this.state.isDraft\n        });\n      }\n    }\n\n    if (!this.state.isDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isDraft: !this.state.isdraft\n        });\n      } else {\n        this.setState({\n          isDraft: !this.state.isdraft\n        });\n      }\n    }\n  }\n\n  toggle = () => {\n    this.props.addFileCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { Utils } from \"../../utils/utils\";\nimport toaster from \"../toast\";\nimport KeeperArchiveMetadataForm from \"../keeper-archive-metadata-form\";\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n};\n\nclass KeeperEditMetadataDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onUpdateArchiveMetadata = (defaultMd, state) => {\n    this.props.hideDialog();\n    let newState = {};\n    Object.keys(defaultMd).map((k) => {\n      newState[k] = state[k];\n    });\n    //return promise, not run!\n    return keeperAPI\n      .updateArchiveMetadata(this.props.repoID, newState)\n      .then((res) => {\n        newState = res.data;\n        newState.validMd = state.validMd;\n        //if publisher is empty, apply defaultPublisher\n        if (\n          !(\n            \"publisher\" in newState &&\n            newState.publisher &&\n            newState.publisher.trim()\n          )\n        ) {\n          newState.publisher = defaultMd.publisher;\n          newState.validMd.publisher = true;\n        }\n        return newState;\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  render() {\n    const title = gettext(\"Edit Metadata for {library_name} library\") \n    const split = title.split(\"{library_name}\")\n\n    return (\n      <KeeperArchiveMetadataForm\n        hideDialog={this.props.hideDialog}\n        repoID={this.props.repoID}\n        header={\n          <Fragment>\n            {split[0]}\n            <span style={{ color: \"#57a5b8\" }}> {this.props.repoName}</span>\n            {split.length>1 && split[1]}\n          </Fragment>\n        }\n        onButton1={this.onUpdateArchiveMetadata}\n        button1Label={gettext(\"Save metadata\")}\n      />\n    );\n  }\n}\n\nKeeperEditMetadataDialog.propTypes = propTypes;\n\nexport default KeeperEditMetadataDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\nimport ArchiveLibraryDialog from '../dialog/archive-library-dialog';\nimport CertifyLibraryDialog from '../dialog/certify-library-dialog';\nimport KeeperEditMetadataDialog from '../dialog/keeper-edit-metadata-dialog';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { handleCanArchiveResponse } from '../../pages/my-libs/mylib-repo-list-item';\n\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false,\n      isArchiveLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  }\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  }\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  }\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: true,\n      isCreateMenuShow: false,\n    });\n  }\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  }\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  }\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: true,\n      isUploadMenuShow: false,\n    });\n  }\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '',\n    });\n  }\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  }\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  }\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  }\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  // KEEPER\n  onArchiveLibraryHide = () => {\n    this.setState({isArchiveLibraryDialogShow: false});\n  }\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI.canArchive(this.props.repoID).then((resp) => {\n      const d = resp.data;\n      handleCanArchiveResponse(this, resp);\n      if (d.status === 'success' || d.status === 'metadata_error')\n        this.setState({\n          isArchiveLibraryDialogShow: true,\n          quota: d.quota,\n        });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      handleCanArchiveResponse(this, {data: {status: 'system_error', msg: errorMsg}});\n    });\n  }\n\n  onEditMetadataHide = () => {\n    this.setState({isEditMetadataDialogShow: false});\n  }\n\n  onEditMetadataToggle = () => {\n    this.setState({isEditMetadataDialogShow: true});\n  }\n\n  onCertifyLibraryHide = () => {\n    this.setState({isCertifyLibraryDialogShow: false});\n  }\n\n  onCertifyLibraryToggle = () => {\n    this.setState({isCertifyLibraryDialogShow: true})\n  }\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n    \n    //Vlad: seafile bug?\n    //if (userPerm !== 'rw' && userPerm !== 'admin') {\n    //  return '';\n    //\n    //}\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path === '/' ? repoName : Utils.getFolderName(path);\n\n    let isArchiveBtnShow = ! this.props.repoEncrypted && this.props.isRepoOwner;\n    let isEditMetadataBtnShow = ! this.props.repoEncrypted && this.props.isRepoOwner;\n    let isCertifyBtnShow = ! this.props.repoEncrypted && this.props.isRepoOwner;\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {Utils.isSupportUploadFolder() ?\n            <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadClick}>{gettext('Upload')}</button> :\n            <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n          <button className=\"btn btn-secondary operation-item\" title={gettext('New')} onClick={this.onCreateClick}>{gettext('New')}</button>\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n          {isArchiveBtnShow &&\n            <button className=\"btn btn-secondary operation-item\" title={gettext('Archive')} onClick={this.onArchiveLibraryToggle}>{gettext('Archive')}</button>\n          }\n          {isCertifyBtnShow &&\n            <button className=\"btn btn-secondary operation-item\" title={gettext('Certify')} onClick={this.onCertifyLibraryToggle}>{gettext('Certify')}</button>\n          }\n          {isEditMetadataBtnShow &&\n            <button className=\"btn btn-secondary operation-item\" title={gettext('Metadata')} onClick={this.onEditMetadataToggle}>{gettext('Metadata')}</button>\n          }\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n            <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin') && (\n          <div className=\"dir-operation\">\n            <div className=\"operation\">\n              {content}\n            </div>\n            {this.state.isUploadMenuShow && (\n              <ul className=\"menu dropdown-menu\" style={this.state.operationMenuStyle}>\n                <li className=\"dropdown-item\" onClick={this.onUploadFile}>{gettext('Upload Files')}</li>\n                <li className=\"dropdown-item\" onClick={this.onUploadFolder}>{gettext('Upload Folder')}</li>\n              </ul>\n            )}\n            {this.state.isCreateMenuShow && (\n              <ul className=\"menu dropdown-menu\" style={this.state.operationMenuStyle}>\n                <li className=\"dropdown-item\" onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</li>\n                <li className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</li>\n                <li className=\"dropdown-divider\"></li>\n                <li className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle}>{gettext('New Markdown File')}</li>\n                <li className=\"dropdown-item\" onClick={this.onCreateExcelToggle}>{gettext('New Excel File')}</li>\n                <li className=\"dropdown-item\" onClick={this.onCreatePPTToggle}>{gettext('New PowerPoint File')}</li>\n                <li className=\"dropdown-item\" onClick={this.onCreateWordToggle}>{gettext('New Word File')}</li>\n              </ul>\n            )}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}/>\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <KeeperEditMetadataDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}/>\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}/>\n          </ModalPortal>\n        )}\n\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null,\n      selectedPath: '',\n      errMessage: '',\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: '',\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" style={{margin: '0.5rem'}}>{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null,\n      selectedPath: '',\n      errMessage: '',\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = 'Invalid destination path';\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: '',\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" style={{margin: '0.5rem'}}>{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let {dirent} = this.props;\n    this.changeState(dirent);\n    this.newInput.focus();\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isPro, fileAuditEnabled, name } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport RelatedFileDialogs from '../dialog/related-file-dialogs';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      showRelatedFileDialog: false,\n      viewMode: 'list_related_file',\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      this.setState({\n        isZipDialogOpen: true\n      });\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'Related Files':\n        this.openRelatedFilesDialog(dirent);\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  openRelatedFilesDialog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listRelatedFiles(this.props.repoID, filePath).then(res => {\n      let relatedFiles = res.data.related_files;\n      if (relatedFiles.length > 0) {\n        this.setState({\n          relatedFiles: relatedFiles,\n          showLibContentViewDialogs: true,\n          showRelatedFileDialog: true,\n          viewMode: 'list_related_file',\n        });\n      } else {\n        this.setState({\n          relatedFiles: relatedFiles,\n          showLibContentViewDialogs: true,\n          showRelatedFileDialog: true,\n          viewMode: 'add_related_file',\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      showRelatedFileDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  listRelatedFiles = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listRelatedFiles(this.props.repoID, filePath).then(res => {\n      this.setState({\n        relatedFiles: res.data.related_files\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRelatedFileChange = () => {\n    this.listRelatedFiles(this.props.selectedDirentList[0]);\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n\n    let direntPath = this.getDirentPath(dirent);\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin') && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} onClick={this.onMoveToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onItemsDelete}></Button>\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n              )}\n              {(userPerm === 'rw' || userPerm === 'admin' || userPerm === 'r') && (\n                <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} onClick={this.onItemsDownload}></Button>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n            {this.state.showRelatedFileDialog &&\n              <ModalPortal>\n                <RelatedFileDialogs\n                  repoID={repoID}\n                  filePath={direntPath}\n                  relatedFiles={this.state.relatedFiles}\n                  toggleCancel={this.toggleCancel}\n                  onRelatedFileChange={this.onRelatedFileChange}\n                  dirent={this.props.selectedDirentList[0]}\n                  viewMode={this.state.viewMode}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport RelatedFileDialogs from '../dialog/related-file-dialogs';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  relatedFiles: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n      isRelatedFileDialogShow: false,\n      showRelatedFileDialog: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onListRelatedFileToggle = () => {\n    this.setState({\n      isRelatedFileDialogShow: true,\n      showRelatedFileDialog: true,\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      isRelatedFileDialogShow: false,\n      showRelatedFileDialog: false,\n    });\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onListRelatedFileToggle}>{gettext('Related Files')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n        {this.state.showRelatedFileDialog &&\n          <ModalPotal>\n            <RelatedFileDialogs\n              repoID={this.props.repoID}\n              filePath={this.props.path}\n              relatedFiles={this.props.relatedFiles}\n              toggleCancel={this.toggleCancel}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n              dirent={dirent}\n              viewMode=\"list_related_file\"\n            />\n          </ModalPotal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport ViewModeToolbar from '../../components/toolbar/view-mode-toolbar';\nimport DirOperationToolBar from '../../components/toolbar/dir-operation-toolbar';\nimport MultipleDirOperationToolbar from '../../components/toolbar/multiple-dir-operation-toolbar';\nimport ViewFileToolbar from '../../components/toolbar/view-file-toolbar';\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  relatedFiles: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,  // for file-view-toolbar\n  onRelatedFileChange: PropTypes.func.isRequired,\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n\n  render() {\n\n    //KEEPER\n    //if (!this.props.userPerm) {\n    //  return <div className=\"cur-view-toolbar\"></div>\n    //}\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              relatedFiles={this.props.relatedFiles}\n              onFileTagChanged={this.props.onFileTagChanged}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode}/>\n          </div>\n          <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n          {this.props.isDirentSelected ?\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              relatedFiles={this.props.relatedFiles}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            /> :\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isRepoOwner={this.props.isRepoOwner}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          }\n        </div>\n        <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport InternalLinkDialog from '../dialog/internal-link-dialog';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile &&\n          <InternalLinkDialog\n            repoID={this.props.repoID}\n            path={this.props.currentPath}\n          />\n        }\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  onTagUpdate: PropTypes.func.isRequired,\n  onListTaggedFiles: PropTypes.func.isRequired,\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSelectedTag: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      showSelectedTag: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      showSelectedTag: false\n    });\n  }\n\n  onTagUpdate = () => {\n    this.props.onTagUpdate(this.props.item);\n  }\n\n  onListTaggedFiles = () => {\n    this.props.onListTaggedFiles(this.props.item);\n  }\n\n  render() {\n    let color = this.props.item.color;\n    let drakColor = Utils.getDarkColor(color);\n    const fileCount = this.props.item.fileCount;\n    let fileTranslation = (fileCount === 1 || fileCount === 0) ? gettext('file') : gettext('files');\n    return (\n      <li className=\"tag-list-item\">\n        <div className=\"tag-demo\" style={{backgroundColor:color}} onMouseOver={this.onMouseOver} onMouseOut={this.onMouseOut}>\n          <span className={`${this.state.showSelectedTag ? 'show-tag-selected': ''}`} style={{backgroundColor: drakColor}}></span>\n          <span className=\"tag-name\">{this.props.item.name}</span>\n          <span className=\"tag-files\" onClick={this.onListTaggedFiles}>\n            {fileCount}{' '}{fileTranslation}\n          </span>\n        </div>\n        <i className=\"tag-edit fa fa-pencil-alt\" onClick={this.onTagUpdate}></i>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired,\n  onUpdateRepoTag: PropTypes.func.isRequired,\n  onListTaggedFiles: PropTypes.func.isRequired,\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody>\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  onTagUpdate={this.props.onUpdateRepoTag}\n                  onListTaggedFiles={this.props.onListTaggedFiles}\n                />\n              );\n            })}\n          </ul>\n          <a href=\"#\" className=\"add-tag-link\" onClick={this.createNewTag}>{gettext('Create a new tag')}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  currentTag: PropTypes.object,\n  repoID: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass UpdateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteRepoTag: false,\n      newName: this.props.currentTag.name,\n      newColor: this.props.currentTag.color,\n      colorList: ['#FFA8A8', '#FFA94D', '#FFD43B', '#A0EC50', '#A9E34B', '#63E6BE', '#4FD2C9', '#72C3FC', '#91A7FF', '#E599F7', '#B197FC', '#F783AC', '#CED4DA'],\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, -1);\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      newName: e.target.value,\n    });\n  }\n\n  selectNewcolor = (e) => {\n    this.setState({\n      newColor: e.target.value,\n    });\n  }\n\n  updateTag = () => {\n    let tag_id = this.props.currentTag.id;\n    let name = this.state.newName;\n    let color = this.state.newColor;\n    let repoID = this.props.repoID;\n    seafileAPI.updateRepoTag(repoID, tag_id, name, color).then(() => {\n      this.props.toggleCancel();\n      this.props.updateUsedRepoTags();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.updateTag();\n    }\n  }\n\n  deleteTagClick = (item) => {\n    this.setState({\n      deleteRepoTag: !this.state.deleteRepoTag,\n    });\n  }\n\n  onDeleteTag = () => {\n    let tag = this.props.currentTag;\n    let repoID = this.props.repoID;\n    seafileAPI.deleteRepoTag(repoID, tag.id).then((res) => {\n      this.props.toggleCancel();\n      if (res.data.success === 'true') {\n        this.props.onDeleteRepoTag(tag.id);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    if (colorList.indexOf(this.props.currentTag.color)===-1) {\n      colorList.push(this.props.currentTag.color);\n    }\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('Edit Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"tag-edit\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.newName} onChange={this.inputNewName}/>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"row gutters-xs\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"col-auto\" onChange={this.selectNewcolor}>\n                      <label className=\"colorinput\">\n                        {item===this.props.currentTag.color ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onChange={this.selectNewcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onChange={this.selectNewcolor}></input>}\n                        <span className=\"colorinput-color\" style={{backgroundColor:item}}></span>\n                      </label>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"danger\" onClick={this.onDeleteTag}>{gettext('Delete')}</Button>\n          <Button color=\"primary\" onClick={this.updateTag}>{gettext('Save')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nUpdateTagDialog.propTypes = propTypes;\n\nexport default UpdateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag } = this.props;\n    seafileAPI.listTaggedFiles(repoID, currentTag.id).then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='45%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='27%'>{gettext('Size')}</th>\n                <th width='18%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const taggedFile = this.props.taggedFile;\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n    return ( taggedFile.file_deleted ?\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n          <span style={{color:'red'}}>{gettext('deleted')}</span>\n        </td>\n        <td><i className={className} onClick={this.props.onDeleteTaggedFile.bind(this, taggedFile)}></i></td>\n      </tr>\n      :\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\"><a href={href} target='_blank'>{taggedFile.filename}</a></td>\n        <td>{Utils.bytesToSize(taggedFile.size)}</td>\n        <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n        <td><i className={className} onClick={this.props.onDeleteTaggedFile.bind(this, taggedFile)}></i></td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport UpdateTagDialog from '../dialog/update-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  permission: PropTypes.bool.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isUpdateRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = () => {\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isUpdateRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isUpdateRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onUpdateRepoTagToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isUpdateRepoTagShow: !this.state.isUpdateRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, repoName, permission, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (permission) {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                        onUpdateRepoTag={this.onUpdateRepoTagToggle}\n                        onListTaggedFiles={this.onListTaggedFileToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isUpdateRepoTagShow && (\n                      <UpdateTagDialog\n                        repoID={repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onUpdateRepoTagToggle}\n                        onDeleteRepoTag={this.props.onDeleteRepoTag}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  permission: PropTypes.bool.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          permission={this.props.permission}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor/dist/utils/seafile-markdown2html';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ParticipantsList from '../file-view/participants-list';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath, fileParticipantList } = this.props;\n    return (\n      <div className=\"seafile-comment detail-comments h-100 w-100\">\n        <ul className=\"seafile-comment-list\">\n          {this.state.commentsList.length > 0 &&\n            this.state.commentsList.map((item, index = 0, arr) => {\n              let oldTime = (new Date(item.created_at)).getTime();\n              let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n              return (\n                <React.Fragment key={item.id}>\n                  <CommentItem\n                    item={item} time={time} deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment} editComment={this.editComment}\n                  />\n                </React.Fragment>\n              );\n            })\n          }\n          {(this.state.commentsList.length == 0 ) &&\n            <li className=\"comment-vacant\">{gettext('No comment yet.')}</li>}\n        </ul>\n        <div className=\"seafile-comment-footer\">\n          {fileParticipantList &&\n            <ParticipantsList\n              onParticipantsChange={this.props.onParticipantsChange}\n              participants={fileParticipantList}\n              repoID={repoID}\n              filePath={filePath}\n              showIconTip={true}\n            />\n          }\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment.')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport RelatedFileDialogs from '../dialog/related-file-dialogs';\nimport ParticipantsList from '../file-view/participants-list';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  relatedFiles: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false,\n      showRelatedFileDialog: false,\n    };\n  }\n\n  getDirentPostion = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  onRelatedFileChange = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onRelatedFileChange(this.props.dirent, direntPath);\n  }\n\n  onListRelatedFileToggle = () => {\n    this.setState({\n      showRelatedFileDialog: true,\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showRelatedFileDialog: false,\n    });\n  }\n\n  render() {\n    let { direntType, direntDetail, fileTagList, relatedFiles, fileParticipantList } = this.props;\n    let position = this.getDirentPostion();\n    let direntPath = this.getDirentPath();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n          </tbody>\n        </table>\n      );\n    } else {\n      return (\n        <Fragment>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <ul className=\"file-tag-list\">\n                    {fileTagList.map((fileTag) => {\n                      return (\n                        <li key={fileTag.id} className=\"file-tag-item\">\n                          <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                          <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-related-files\">\n                <th>{gettext('Related Files')}</th>\n                <td>\n                  <ul>\n                    {relatedFiles.map((relatedFile, index) => {\n                      let href = siteRoot + 'lib/' + relatedFile.repo_id + '/file' + Utils.encodePath(relatedFile.path);\n                      return (\n                        <li key={index}>\n                          <a href={href} target='_blank'>{relatedFile.name}</a>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onListRelatedFileToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-participants\">\n                <th>{gettext('Participants')}</th>\n                <td>\n                  {fileParticipantList &&\n                    <ParticipantsList\n                      onParticipantsChange={this.props.onParticipantsChange}\n                      participants={fileParticipantList}\n                      repoID={this.props.repoID}\n                      filePath={direntPath}\n                      showIconTip={false}\n                    />\n                  }\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {this.state.showRelatedFileDialog &&\n            <ModalPortal>\n              <RelatedFileDialogs\n                repoID={this.props.repoID}\n                filePath={direntPath}\n                relatedFiles={relatedFiles}\n                toggleCancel={this.toggleCancel}\n                onRelatedFileChange={this.onRelatedFileChange}\n                dirent={this.props.dirent}\n                viewMode=\"list_related_file\"\n              />\n            </ModalPortal>\n          }\n          {this.state.isEditFileTagShow &&\n            <ModalPortal>\n              <EditFileTagDialog\n                repoID={this.props.repoID}\n                fileTagList={fileTagList}\n                filePath={direntPath}\n                toggleCancel={this.onEditFileTagToggle}\n                onFileTagChanged={this.onFileTagChanged}\n              />\n            </ModalPortal>\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\nimport FileTag from '../../models/file-tag';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      fileTagList: [],\n      relatedFiles: [],\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      seafileAPI.listFileTags(repoID, direntPath).then(res => {\n        let fileTagList = [];\n        res.data.file_tags.forEach(item => {\n          let file_tag = new FileTag(item);\n          fileTagList.push(file_tag);\n        });\n        this.setState({fileTagList: fileTagList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      seafileAPI.listRelatedFiles(repoID, direntPath).then(res => {\n        let relatedFiles = [];\n        res.data.related_files.map((relatedFile) => {\n          relatedFiles.push(relatedFile);\n        });\n        this.setState({\n          relatedFiles: relatedFiles,\n        });\n      }).catch((error) => {\n        if (error.response.status === 500) {\n          this.setState({\n            relatedFiles: []\n          });\n        }\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  onRelatedFileChange = (dirent, direntPath) => {\n    this.updateDetailView(dirent, direntPath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={this.state.fileTagList}\n                relatedFiles={this.state.relatedFiles}\n                onFileTagChanged={this.props.onFileTagChanged}\n                onRelatedFileChange={this.onRelatedFileChange}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    if (isImg) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file text-center\">\n          <p className=\"text-secondary\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              addFileCancel={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport MarkdownViewer from '@seafile/seafile-editor/dist/viewer/markdown-viewer';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let {repoID, currentPath, usedRepoTags, readmeMarkdown} = this.props;\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className=\"repo-info-bar\">\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <span className=\"used-tag-files\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </span>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank'>{readmeMarkdown.name}</a>\n            </span>\n          }\n          {this.props.draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <span className=\"used-tag-files\" onClick={this.toggleDrafts}>\n                {this.props.draftCounts > 1 ? this.props.draftCounts + ' files' : this.props.draftCounts + ' file'}\n              </span>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport ReactTooltip from 'react-tooltip';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl, username } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI, keeperAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport Rename from '../rename';\nimport ModalPortal from '../modal-portal';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\n\nimport '../../css/dirent-list-item.css';\nimport toaster from '../toast';\nimport bergImage from '../../assets/berg_icon.png';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.isItemFreezed !== this.props.isItemFreezed && !nextProps.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      }, () => {\n        if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n          this.setState({isOperationShow: true});\n        }\n      });\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    this.setState({isDragTipShow: true});\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    this.setState({isDragTipShow: true});\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({isDragTipShow: false});\n  }\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  }\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  }\n\n  onItemStarred = () => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    if (dirent.starred) {\n      seafileAPI.unstarItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', false);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', true);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == 'TD') {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onItemDelete = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  }\n\n  onItemCertify = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    const {dirent, repoID} = this.props;\n    let filePath = this.getDirentPath(dirent);\n    keeperAPI.canCertify(repoID, dirent.type, filePath).then(() => {\n        this.certifyFile()\n    }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n    })\n  }\n\n  certifyFile = () => {\n    const {dirent, repoID} = this.props;\n    let filePath = this.getDirentPath(dirent);\n    toaster.success(gettext('Certify the file through bloxberg...'), {duration: 3});\n    keeperAPI.certifyOnBloxberg(repoID, filePath, dirent.type, dirent.name).then(() => {\n      toaster.success(gettext('Transaction succeeded'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute('data-op');\n    this.onMenuItemClick(operation, e);\n  }\n\n  onMenuItemClick = (operation, event) => {\n    switch(operation) {\n      case 'Download': \n        this.onItemDownload(event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete': \n        this.onItemDelete(event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem();\n        break;\n      case 'Lock':\n        this.onLockItem();\n        break;\n      case 'Comment':\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail('comments');\n        break;\n      case 'History':\n        this.onHistory();\n        break;\n      case 'Access Log':\n        this.onAccessLog();\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n    });\n  }\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.setState({isRenameing: false});\n    this.unfreezeItem();\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', true);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n  \n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', false);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', false);\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemDownload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({isShowTagTooltip: !this.state.isShowTagTooltip});\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = 'move';\n    let { selectedDirentList } = this.props;\n    if (selectedDirentList.length > 0 && selectedDirentList.includes(this.props.dirent)) { // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList =  selectedDirentList.map(item => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {nodeDirent: item, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData('applicaiton/drag-item-info', selectedList);\n      return ;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n      this.setState({isDropTipshow: true});\n    }\n  }\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    }\n    this.setState({isDropTipshow: false});\n  }\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    this.setState({isDropTipshow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) { //move items\n      let direntPaths =  dragStartItemData.map(draggedItem => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n\n      if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) { //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return ;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === 'dir' && nodeDirent.type === 'dir') {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  }\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  }\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, dirent.permission, dirent);\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ?\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected &&\n              <div className=\"operations\">\n                <ul className=\"operation-group\">\n                  {(dirent.permission === 'rw' || dirent.permission === 'r') && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.onItemDownload}></i>\n                    </li>\n                  )}\n                  {showShareBtn && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-share\" title={gettext('Share')} onClick={this.onItemShare}></i>\n                    </li>\n                  )}\n                  {dirent.permission === 'rw' && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onItemDelete}></i>\n                    </li>\n                  )}\n                  <li className=\"operation-group-item\">\n                    <ItemDropdownMenu\n                      item={this.props.dirent}\n                      toggleClass={'sf2-icon-caret-down'}\n                      isHandleContextMenuEvent={true}\n                      getMenuList={this.props.getDirentItemMenuList}\n                      onMenuItemClick={this.onMenuItemClick}\n                      unfreezeItem={this.unfreezeItem}\n                      freezeItem={this.props.freezeItem}\n                    />\n                  </li>\n                </ul>\n              </div>\n            }\n          </Fragment> :\n          <Fragment>\n            {this.state.isOperationShow &&\n              <div className=\"operations\">\n                <ul className=\"operation-group\">\n                  {(dirent.permission === 'rw' || dirent.permission === 'r') && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.onItemDownload}></i>\n                    </li>\n                  )}\n                  {showShareBtn && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-share\" title={gettext('Share')} onClick={this.onItemShare}></i>\n                    </li>\n                  )}\n                  {dirent.permission === 'rw' && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onItemDelete}></i>\n                    </li>\n                  )}\n                  {this.props.isRepoOwner && dirent.permission === 'rw' && dirent.type === 'file' && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon\" data-tip data-for=\"bloxberg\"><img className=\"small-icon\" src={bergImage} onClick={this.onItemCertify} /></i>\n                      <ReactTooltip className='hover-keep' id=\"bloxberg\" delayHide={1000} effect=\"solid\">\n                        <span className=\"tooltip-bold\">{gettext('Certify your file via the bloxberg blockchain.')}</span>\n                      </ReactTooltip>\n                    </li>\n                  )}\n                  <li className=\"operation-group-item\">\n                    <ItemDropdownMenu\n                      item={this.props.dirent}\n                      toggleClass={'sf2-icon-caret-down'}\n                      isHandleContextMenuEvent={true}\n                      getMenuList={this.props.getDirentItemMenuList}\n                      onMenuItemClick={this.onMenuItemClick}\n                      unfreezeItem={this.unfreezeItem}\n                      freezeItem={this.props.freezeItem}\n                    />\n                  </li>\n                </ul>\n              </div>\n            }\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? 'tr-highlight ' : '';\n    trClass += this.state.isDropTipshow ? 'tr-drop-effect' : '';\n    trClass += (activeDirent && activeDirent.name === dirent.name)  ? 'tr-active' : '';\n    trClass += dirent.isSelected? 'tr-active' : '';\n\n    let lockedInfo = gettext('locked by {name}').replace('{name}', dirent.lock_owner_name);\n\n    const isDesktop = Utils.isDesktop();\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable=\"true\"\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td className={`pl10 ${this.state.isDragTipShow ? 'tr-drag-effect' : ''}`}>\n          <input type=\"checkbox\" className=\"vam\" onChange={this.onItemSelected} checked={dirent.isSelected}/>\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined && !dirent.starred && <i className=\"far fa-star star-empty cursor-pointer\" onClick={this.onItemStarred}></i>}\n          {dirent.starred !== undefined && dirent.starred && <i className=\"fas fa-star cursor-pointer\" onClick={this.onItemStarred}></i>}\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {dirent.encoded_thumbnail_src ?\n              <img ref='drag_icon' src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" onClick={this.onItemClick} alt=\"\" /> :\n              <img ref='drag_icon' src={iconUrl} width=\"24\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n            <div ref=\"empty_content\" style={{position: 'absolute', width: '1px', height: '1px'}}></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing ?\n            <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n            <a href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemClick}>{dirent.name}</a>\n          }\n        </td>\n        <td className=\"tag-list-title\">\n          {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n            <Fragment>\n              <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked\">\n                {dirent.file_tags.map((fileTag, index) => {\n                  let length = dirent.file_tags.length;\n                  return (\n                    <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                  );\n                })}\n              </div>\n              <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                {tagTitle}\n              </UncontrolledTooltip>\n            </Fragment>\n          )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td className=\"last-update\">{dirent.mtime_relative}</td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {dirent.encoded_thumbnail_src ?\n              <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing ?\n            <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n            <a href={dirent.type === 'dir' ? dirHref : fileHref}>{dirent.name}</a>\n          }\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined &&\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onItemStarred}>{dirent.starred ? gettext('Unstar') : gettext('Star')}</DropdownItem>}\n                {this.props.getDirentItemMenuList(dirent, true).map((item, index) => {\n                  if (item != 'Divider' && item.key != 'Open via Client') {\n                    return (\n                      <DropdownItem className=\"mobile-menu-item\" key={index} data-op={item.key} onClick={this.onMobileMenuItemClick}>{item.value}</DropdownItem>\n                    );\n                  }\n                })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow &&\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAFECAMAAAFqkvmEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIyQzlCRTQzMzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIyQzlCRTQ0MzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjJDOUJFNDEzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjJDOUJFNDIzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zgL64AAABgFBMVEWt0daNvsTL4ua01dphpa1xrrXd7O7F3+NSm6bP5eiJvMKlzdG52N0xhZzG4OShytCdyM5EkqN2sbh+tby82t1VnaeFusGYxcqaxszW6OuDub9qqrGoz9RdoqnS5uk4ip7h7vDO5OeTwsjZ6uzZ6u3V6OrN4+c1iJ6RwMdZoKmy1Nl4srlyq7vU5+qSwceBt76Mu8jA3OBLl6Rkp6/Y6exYnK9ko7Tb6+2DtsN9s8HK4uY9jZ9Mlamdx9CRv8q21tuHucWx0tlAj6N5sb/K4OXc6+6VwsyIu8LX6Ou319trqLiu0dfD3uK+29+KvMar0NWmzNTC3eHC3eJNmKXA2uBfoLJoprZdoa7H3uSYw82jytKbxs/S5Oily9Nbn7CYxM1uq7fJ4eXK4uXT5+rI4OTR5el8tLt7tLuVw8l0sLbI4eTI4eWgyc9vrbRtrLNsq7Joqa9nqa+v09dfpKvf7e9RmKt2r73M4edgo658s7yjy9BnqLFrqbSfyNFXn6cAAAA2nrm/AAAAgHRSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ADgFS2cAABqTSURBVHjarNU/SwNBEIbxDYZ4KQYJylkIYiEeBuxuC4lNmpRaBCzsjGnsU4Y3Xz2Z9bzcTXb2jzjdwvx4ii3G7HLH/JOgKlcAmYKASZ4AAhHjTwBFjgBCEaMkdGK0BGBTxexXIFW0AMTPOiqWR8ERiosO4Mio/ooI9GZHUWH7gu4OYhwUfYAXJ2xAkBDlM4tVQAiwLQdOkCpk4rIcvLI4V4UA3wdx7QQpgnxiwWKtCAFunLhwovIKkVg24oPFyitEYtiINyfePUIkZq2Ys3jwCJF4bMXZJ4vpiRAJ6ogrFuMTAb3xI26FqEQiLhBvPPXERCaiAimNuiMK8ReKsEeBtMZ9K8RyoQpqhEVqY9QIpAtygjLExgnkiOoP13kvAKv1roMgDAVgWEzQQTEydHCxXoIOmkBcMDExxs3JODk4GfUBvI7w6nJABEqh5xj3fjlNm/Rv5U85J9ecHHNObjk55Sa55OSQM3LHHSzgP1fcxAEz0/D8nZc1HBa7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\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs。\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${this.state.isListDropTipShow ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected}/>\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFileCancel={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const dirent = this.props.dirent;\n    if (this.props.dirent === this.props.activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return(\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable=\"true\"\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {dirent.encoded_thumbnail_src ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable=\"true\" >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle(currentObject);\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    let currentNode = this.props.currentNode;\n    this.changeState(currentNode);\n    this.newInput.focus();\n    let type = currentNode.object.type;\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  repoPermission: PropTypes.bool.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onAddFileNode = (filePath, isDraft) => {\n    this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    this.props.onAddFileNode(filePath, isDraft);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              repoPermission={this.props.repoPermission}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoPermission: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          repoPermission={this.props.repoPermission}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoPermission: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              permission={this.props.repoPermission}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    repoPermission={this.props.repoPermission}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    repoPermission={this.props.repoPermission}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\">{resumableFile.newFileName}</div>\n        </td>\n        <td>\n          <span className=\"file-size\">{this.formatFileSize(resumableFile.size)}</span>\n        </td>\n        <td className=\"upload-progress\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\">{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '%' + ' (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('name')}</th>\n                <th width=\"15%\">{gettext('size')}</th>\n                <th width=\"35%\">{gettext('progress')}</th>\n                <th width=\"15%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td className=\"text-right\" colSpan={3}>\n                  {retryFileList.length > 0 ?\n                    <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n                    :\n                    <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n                  }\n                </td>\n                <td className=\"text-right\" colSpan={1}>\n                  {!allFilesUploaded ?\n                    <span className=\"cursor-pointer\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n                    :\n                    <span className=\"cursor-pointer disabled-link\" >{gettext('Cancel All')}</span>\n                  }\n                </td>\n              </tr>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n\n    let title = gettext('Replace file {filename}?');\n    title = title.replace('{filename}', '<span class=\"a-simaulte\">' + this.props.currentResumableFile.fileName + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle} ><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n};\n\nclass FileUploader extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      let direntList = this.props.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n          hasRepetition = true;\n          break;\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    }\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file；\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { gettext, siteRoot, username, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoPermission: true,\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      relatedFiles: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    seafileAPI.getRepoInfo(repoID).then(res => {\n      let repoInfo = new RepoInfo(res.data);\n      let isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n      this.setState({\n        currentRepoInfo: repoInfo,\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        repoPermission: repoInfo.permission === 'rw',\n        isGroupOwnedRepo: isGroupOwnedRepo,\n      });\n\n      let repoID = repoInfo.repo_id;\n      let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n      path = path.slice(path.indexOf('/')); // get current path\n\n      this.isNeedUpdateHistoryState = false;\n\n      this.setState({path: path});\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    }).catch(error => {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updataColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updataColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and revierw counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        let tree = this.state.treeData;\n        this.addResponseListToNode(res.data.dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n      seafileAPI.listRelatedFiles(repoID, filePath).then(res => {\n        let relatedFiles = res.data.related_files.map((relatedFile) => {\n          return relatedFile;\n        });\n        this.setState({relatedFiles: relatedFiles});\n      }).catch((error) => {\n        if (error.response.status === 500) {\n          this.setState({relatedFiles: []});\n        }\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return Utils.imageCheck(item.name) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and other {n} items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and other {n} items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.deleteDir(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n      this.updateDirent(dirent, 'file_tags', fileTags);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      direntObject.permission = 'rw';\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      let direntList = res.data.dirent_list;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    let mtime = new Date().getTime()/1000;\n    let dirent = new Dirent({name, type, mtime, size});\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onToolbarRelatedFileChange = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n\n    seafileAPI.listRelatedFiles(repoID, filePath).then(res => {\n      let relatedFiles = res.data.related_files.map((relatedFile) => {\n        return relatedFile;\n      });\n      this.setState({relatedFiles: relatedFiles});\n    }).catch((error) => {\n      if (error.response.status === 500) {\n        this.setState({relatedFiles: []});\n      }\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    return (\n      <Fragment>\n        <div className=\"main-panel o-hidden\">\n          <div className=\"main-panel-north border-left-show\">\n            <LibContentToolbar\n              isViewFile={this.state.isViewFile}\n              filePermission={this.state.filePermission}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              relatedFiles={this.state.relatedFiles}\n              onFileTagChanged={this.onToolbarFileTagChanged}\n              onRelatedFileChange={this.onToolbarRelatedFileChange}\n              onSideNavMenuClick={this.props.onMenuClick}\n              repoID={this.props.repoID}\n              path={this.state.path}\n              isDirentSelected={this.state.isDirentSelected}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              onItemRename={this.onMainPanelItemRename}\n              direntList={this.state.direntList}\n              repoName={this.state.repoName}\n              repoEncrypted={this.state.repoEncrypted}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              userPerm={this.state.userPerm}\n              showShareBtn={showShareBtn}\n              enableDirPrivateShare={enableDirPrivateShare}\n              onAddFile={this.onAddFile}\n              onAddFolder={this.onAddFolder}\n              onUploadFile={this.onUploadFile}\n              onUploadFolder={this.onUploadFolder}\n              currentMode={this.state.currentMode}\n              switchViewMode={this.switchViewMode}\n              onSearchedClick={this.onSearchedClick}\n              isRepoOwner={isRepoOwner}\n              currentRepoInfo={this.state.currentRepoInfo}\n              updateDirent={this.updateDirent}\n              onDirentSelected={this.onDirentSelected}\n              showDirentDetail={this.showDirentDetail}\n              listRelatedFiles={this.listRelatedFiles}\n              unSelectDirent={this.unSelectDirent}\n              onFilesTagChanged={this.onFileTagChanged}\n            />\n          </div>\n          <div className=\"main-panel-center flex-row\">\n            <LibContentContainer\n              pathPrefix={this.props.pathPrefix}\n              currentMode={this.state.currentMode}\n              path={this.state.path}\n              pathExist={this.state.pathExist}\n              currentRepoInfo={this.state.currentRepoInfo}\n              repoID={this.props.repoID}\n              repoPermission={this.state.repoPermission}\n              enableDirPrivateShare={enableDirPrivateShare}\n              userPerm={userPerm}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              onTabNavClick={this.props.onTabNavClick}\n              onMainNavBarClick={this.onMainNavBarClick}\n              isViewFile={this.state.isViewFile}\n              hash={this.state.hash}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              relatedFiles={this.state.relatedFiles}\n              goDraftPage={this.goDraftPage}\n              isFileLoading={this.state.isFileLoading}\n              isFileLoadedErr={this.state.isFileLoadedErr}\n              filePermission={this.state.filePermission}\n              content={this.state.content}\n              lastModified={this.state.lastModified}\n              latestContributor={this.state.latestContributor}\n              onLinkClick={this.onLinkClick}\n              isTreeDataLoading={this.state.isTreeDataLoading}\n              treeData={this.state.treeData}\n              currentNode={this.state.currentNode}\n              onNodeClick={this.onTreeNodeClick}\n              onNodeCollapse={this.onTreeNodeCollapse}\n              onNodeExpanded={this.onTreeNodeExpanded}\n              onAddFolderNode={this.onAddFolder}\n              onAddFileNode={this.onAddFile}\n              onRenameNode={this.onRenameTreeNode}\n              onDeleteNode={this.onDeleteTreeNode}\n              draftCounts={this.state.draftCounts}\n              usedRepoTags={this.state.usedRepoTags}\n              readmeMarkdown={this.state.readmeMarkdown}\n              updateUsedRepoTags={this.updateUsedRepoTags}\n              isDirentListLoading={this.state.isDirentListLoading}\n              direntList={direntItemsList}\n              fullDirentList={this.state.direntList}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              updateDirent={this.updateDirent}\n              onDirentClick={this.onDirentClick}\n              onItemClick={this.onItemClick}\n              onItemSelected={this.onDirentSelected}\n              onItemDelete={this.onMainPanelItemDelete}\n              onItemRename={this.onMainPanelItemRename}\n              onItemMove={this.onMoveItem}\n              onItemCopy={this.onCopyItem}\n              onAddFolder={this.onAddFolder}\n              onAddFile={this.onAddFile}\n              onFileTagChanged={this.onFileTagChanged}\n              isDirentSelected={this.state.isDirentSelected}\n              isAllDirentSelected={this.state.isAllDirentSelected}\n              onAllDirentSelected={this.onAllDirentSelected}\n              isDirentDetailShow={this.state.isDirentDetailShow}\n              selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              closeDirentDetail={this.closeDirentDetail}\n              showDirentDetail={this.showDirentDetail}\n              direntDetailPanelTab={this.state.direntDetailPanelTab}\n              onDeleteRepoTag={this.onDeleteRepoTag}\n              onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n              updateDetail={this.state.updateDetail}\n              onListContainerScroll={this.onListContainerScroll}\n            />\n            {this.state.pathExist && !this.state.isViewFile && (\n              <FileUploader\n                ref={uploader => this.uploader = uploader}\n                dragAndDrop={true}\n                path={this.state.path}\n                repoID={this.props.repoID}\n                direntList={this.state.direntList}\n                onFileUploadSuccess={this.onFileUploadSuccess}\n              />\n            )}\n          </div>\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount = () => {\n    this.newInput.focus();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fileInputRef = React.createRef();\n    this.state = {\n      errorMsg: ''\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  className: PropTypes.string.isRequired,\n  op: PropTypes.func,\n  title: PropTypes.string.isRequired\n};\n\nclass OpIcon extends React.Component {\n\n  render() {\n    const { className, op, title } = this.props;\n    return (<span\n      tabIndex=\"0\"\n      role=\"button\"\n      className={className}\n      title={title}\n      aria-label={title}\n      onClick={op}\n      onKeyDown={Utils.onKeyDown}\n    ></span>);\n  }\n}\n\nOpIcon.propTypes = propTypes;\n\nexport default OpIcon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  changeMode: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  render() {\n    const { isLoading, hasNextPage, groupMembers } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <button className=\"btn btn-secondary btn-block search-group-members-btn text-left border-0\" onClick={this.props.changeMode}>\n            <i className=\"fas fa-search mr-1\" aria-hidden={true}></i>\n            {gettext('Search group members')}\n          </button>\n        }\n        <div className=\"manage-members\" onScroll={this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {hasNextPage && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass SearchGroupMembers extends React.Component {\n\n  // pagination is not needed\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      q: '', // query\n      groupMembers: [],\n      errMessage: [],\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  submit = () => {\n    let { q } = this.state;\n    q = q.trim();\n    if (!q) {\n      return;\n    }\n    this.setState({\n      isLoading: true\n    });\n    seafileAPI.searchGroupMember(this.props.groupID, q).then((res) => {\n      this.setState({\n        isLoading: false,\n        groupMembers: res.data,\n        errorMsg: ''\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errMessage\n      });\n    });\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      q: e.target.value\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.submit();\n    }\n  }\n\n  render() {\n    const { isLoading, q, errorMsg, groupMembers } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex justifiy-content-between\">\n          <Input\n            type=\"text\"\n            id=\"search-member\"\n            className=\"form-control search-members-input mr-2\"\n            value={q}\n            onChange={this.onInputChange}\n            onKeyDown={this.onInputKeyDown}\n          />\n          <Button type=\"button\" color=\"secondary\" className=\"flex-shrink-0\" onClick={this.submit} disabled={!q.trim()}>{gettext('Submit')}</Button>\n        </div>\n        {errorMsg && <p className=\"error\">{errorMsg}</p>}\n        <div className=\"manage-members\">\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              {groupMembers.length > 0 && (\n                <GroupMembers\n                  groupMembers={groupMembers}\n                  changeMember={this.changeMember}\n                  deleteMember={this.deleteMember}\n                  groupID={this.props.groupID}\n                  isOwner={this.props.isOwner}\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                />\n              )}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSearchGroupMembers.propTypes = propTypes;\n\nexport default SearchGroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\nimport SearchGroupMembers from '../search-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nconst MANAGEMENT_MODE= {\n  LIST_AND_ADD: 'list_and_add',\n  SEARCH: 'search'\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: MANAGEMENT_MODE.LIST_AND_ADD\n    };\n  }\n\n  changeMode = () => {\n    this.setState({\n      currentMode: this.state.currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n        MANAGEMENT_MODE.SEARCH : MANAGEMENT_MODE.LIST_AND_ADD\n    });\n  }\n\n  render() {\n    const { currentMode } = this.state;\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>\n          {currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n            gettext('Manage group members') : (\n              <Fragment>\n                <button className=\"fa fa-arrow-left back-icon border-0 bg-transparent mr-2 p-0\" onClick={this.changeMode} title={gettext('Back')} aria-label={gettext('Back')}></button>\n                <span>{gettext('Search group members')}</span>\n              </Fragment>\n            )\n          }\n        </ModalHeader>\n        <ModalBody>\n          {currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n            <ListAndAddGroupMembers\n              groupID={groupID}\n              isOwner={isOwner}\n              changeMode={this.changeMode}\n            /> :\n            <SearchGroupMembers groupID={groupID} isOwner={isOwner} />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport { Popover } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 50,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <a href=\"#\" className=\"sf2-icon-cog1 action-icon group-top-action-icon\" title=\"Settings\" id=\"settings\"\n                        onClick={this.toggleGroupDropdown}></a>\n                      <Popover placement=\"bottom\" isOpen={this.state.showGroupDropdown} target=\"settings\"\n                        toggle={this.toggleGroupDropdown} hideArrow={true} className=\"sf-popover\">\n                        <div className=\"sf-popover-hd sf-popover-title\">\n                          <span>{gettext('Settings')}</span>\n                          <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                            onClick={this.toggleGroupDropdown}></a>\n                        </div>\n                        <div className=\"sf-popover-con\">\n                          {(this.state.isStaff || this.state.isOwner) &&\n                          <ul className=\"sf-popover-list\">\n                            <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog} >{gettext('Rename')}</a></li>\n                            {\n                              this.state.isOwner &&\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                            }\n                          </ul>\n                          }\n                          {(this.state.isStaff || this.state.isOwner) &&\n                          <ul className=\"sf-popover-list\">\n                            <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                            <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                          </ul>\n                          }\n                          {\n                            this.state.isOwner &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                            </ul>\n                          }\n                          {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                          {(!this.state.isOwner && !isDepartmentGroup) &&\n                          <ul className=\"sf-popover-list\">\n                            <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                          </ul>\n                          }\n                        </div>\n                      </Popover>\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    <Popover placement=\"bottom\" isOpen={this.state.showGroupMembersPopover} target=\"groupMembers\"\n                      toggle={this.toggleGroupMembersPopover} hideArrow={true} className=\"sf-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </Popover>\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            innerRef={input => {this.newInput = input;}}\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = () => {\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = () => {\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <i\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </i> :\n              <i\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </i>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n    this.newName = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newName.focus();\n    this.newName.setSelectionRange(0, -1);\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newName = input;}} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <span className={deleteIcon} onClick={this.onDeleteToggle}></span>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, navigate } from '@reach/router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\nconst ShareAdminShareLinksWrapper = MainContentWrapper(ShareAdminShareLinks);\nconst ShareAdminUploadLinksWrapper = MainContentWrapper(ShareAdminUploadLinks);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinksWrapper path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinksWrapper path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('wrapper')\n);\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('./globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canUseDOM = undefined;\n\nvar _exenv = require(\"exenv\");\n\nvar _exenv2 = _interopRequireDefault(_exenv);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EE = _exenv2.default;\n\nvar SafeHTMLElement = EE.canUseDOM ? window.HTMLElement : {};\n\nvar canUseDOM = exports.canUseDOM = EE.canUseDOM;\n\nexports.default = SafeHTMLElement;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FFA8A8', '#FFA94D', '#FFD43B', '#A0EC50', '#A9E34B', '#63E6BE', '#4FD2C9', '#72C3FC', '#91A7FF', '#E599F7', '#B197FC', '#F783AC', '#CED4DA'],\n    };\n    this.newInput = React.createRef();\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"row gutters-xs\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"col-auto\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color\" style={{backgroundColor:item}}></span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { mediaUrl } from '../utils/constants';\n\nconst propTypes = {\n  forDialog: PropTypes.bool\n};\n\nclass EmptyTip extends React.Component {\n\n  render() {\n    return (\n      <div className={this.props.forDialog ? 'text-center mt-8' : 'empty-tip'}>\n        <img src={`${mediaUrl}img/no-items-tip.png`} alt=\"\" width=\"100\" height=\"100\" className=\"no-items-img-tip\" />\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nEmptyTip.propTypes = propTypes;\n\nexport default EmptyTip;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = findTabbableDescendants;\n/*!\n * Adapted from jQuery UI core\n *\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\nvar tabbableNode = /input|select|textarea|button|object/;\n\nfunction hidesContents(element) {\n  var zeroSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n\n  // If the node is empty, this is good enough\n  if (zeroSize && !element.innerHTML) return true;\n\n  // Otherwise we need to check some styles\n  var style = window.getComputedStyle(element);\n  return zeroSize ? style.getPropertyValue(\"overflow\") !== \"visible\" ||\n  // if 'overflow: visible' set, check if there is actually any overflow\n  element.scrollWidth <= 0 && element.scrollHeight <= 0 : style.getPropertyValue(\"display\") == \"none\";\n}\n\nfunction visible(element) {\n  var parentElement = element;\n  while (parentElement) {\n    if (parentElement === document.body) break;\n    if (hidesContents(parentElement)) return false;\n    parentElement = parentElement.parentNode;\n  }\n  return true;\n}\n\nfunction focusable(element, isTabIndexNotNaN) {\n  var nodeName = element.nodeName.toLowerCase();\n  var res = tabbableNode.test(nodeName) && !element.disabled || (nodeName === \"a\" ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n  return res && visible(element);\n}\n\nfunction tabbable(element) {\n  var tabIndex = element.getAttribute(\"tabindex\");\n  if (tabIndex === null) tabIndex = undefined;\n  var isTabIndexNaN = isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n}\n\nfunction findTabbableDescendants(element) {\n  return [].slice.call(element.querySelectorAll(\"*\"), 0).filter(tabbable);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.assertNodeList = assertNodeList;\nexports.setElement = setElement;\nexports.validateElement = validateElement;\nexports.hide = hide;\nexports.show = show;\nexports.documentNotReadyOrSSRTesting = documentNotReadyOrSSRTesting;\nexports.resetForTesting = resetForTesting;\n\nvar _warning = require(\"warning\");\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _safeHTMLElement = require(\"./safeHTMLElement\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar globalElement = null;\n\nfunction assertNodeList(nodeList, selector) {\n  if (!nodeList || !nodeList.length) {\n    throw new Error(\"react-modal: No elements were found for selector \" + selector + \".\");\n  }\n}\n\nfunction setElement(element) {\n  var useElement = element;\n  if (typeof useElement === \"string\" && _safeHTMLElement.canUseDOM) {\n    var el = document.querySelectorAll(useElement);\n    assertNodeList(el, useElement);\n    useElement = \"length\" in el ? el[0] : el;\n  }\n  globalElement = useElement || globalElement;\n  return globalElement;\n}\n\nfunction validateElement(appElement) {\n  if (!appElement && !globalElement) {\n    (0, _warning2.default)(false, [\"react-modal: App element is not defined.\", \"Please use `Modal.setAppElement(el)` or set `appElement={el}`.\", \"This is needed so screen readers don't see main content\", \"when modal is opened. It is not recommended, but you can opt-out\", \"by setting `ariaHideApp={false}`.\"].join(\" \"));\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction hide(appElement) {\n  if (validateElement(appElement)) {\n    (appElement || globalElement).setAttribute(\"aria-hidden\", \"true\");\n  }\n}\n\nfunction show(appElement) {\n  if (validateElement(appElement)) {\n    (appElement || globalElement).removeAttribute(\"aria-hidden\");\n  }\n}\n\nfunction documentNotReadyOrSSRTesting() {\n  globalElement = null;\n}\n\nfunction resetForTesting() {\n  globalElement = null;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Tracks portals that are open and emits events to subscribers\n\nvar PortalOpenInstances = function PortalOpenInstances() {\n  var _this = this;\n\n  _classCallCheck(this, PortalOpenInstances);\n\n  this.register = function (openInstance) {\n    if (_this.openInstances.indexOf(openInstance) !== -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Cannot register modal instance that's already open\");\n      }\n      return;\n    }\n    _this.openInstances.push(openInstance);\n    _this.emit(\"register\");\n  };\n\n  this.deregister = function (openInstance) {\n    var index = _this.openInstances.indexOf(openInstance);\n    if (index === -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Unable to deregister \" + openInstance + \" as \" + \"it was never registered\");\n      }\n      return;\n    }\n    _this.openInstances.splice(index, 1);\n    _this.emit(\"deregister\");\n  };\n\n  this.subscribe = function (callback) {\n    _this.subscribers.push(callback);\n  };\n\n  this.emit = function (eventType) {\n    _this.subscribers.forEach(function (subscriber) {\n      return subscriber(eventType,\n      // shallow copy to avoid accidental mutation\n      _this.openInstances.slice());\n    });\n  };\n\n  this.openInstances = [];\n  this.subscribers = [];\n};\n\nvar portalOpenInstances = new PortalOpenInstances();\n\nexports.default = portalOpenInstances;\nmodule.exports = exports[\"default\"];","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MarkdownViewer from '@seafile/seafile-editor/dist/viewer/markdown-viewer';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, siteRoot, sharedToken, mediaUrl } from '../utils/constants';\nimport { Card, CardTitle, CardText } from 'reactstrap';\nimport Loading from './loading';\nimport { seafileAPI } from '../utils/seafile-api';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport '../css/related-files-list.css';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n      relatedFiles: [],\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    this.listRelatedFiles();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n    this.listRelatedFiles();\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  onContentRendered = (markdownViewer) => {\n    this.titlesInfo = markdownViewer.titlesInfo;\n  }\n\n  listRelatedFiles = () => {\n    // for dir-column-file component(import repoID is undefined)\n    if (this.props.repoID && this.props.path) {\n      seafileAPI.listRelatedFiles(this.props.repoID, this.props.path).then(res => {\n        this.setState({\n          relatedFiles: res.data.related_files\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          onContentRendered={this.onContentRendered}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n        onContentRendered={this.onContentRendered}\n      />\n    );\n  }\n\n  renderRelatedFiles = () => {\n    const relatedFiles = this.state.relatedFiles;\n    if (relatedFiles.length > 0) {\n      return (\n        <div className=\"sf-releted-files\" id=\"sf-releted-files\">\n          <div className=\"sf-releted-files-header\">\n            <h4>{gettext('related files')}</h4>\n          </div>\n          {\n            relatedFiles.map((relatedFile, index) => {\n              let href = siteRoot + 'lib/' + relatedFile.repo_id + '/file' + Utils.encodePath(relatedFile.path);\n              return(\n                <div className=\"sf-releted-file\" key={index}>\n                  <a href={href} target=\"_blank\">\n                    <Card body size=\"sm\">\n                      <CardTitle>{relatedFile.name}</CardTitle>\n                      <CardText>{relatedFile.repo_name}</CardText>\n                      <span className=\"sf-releted-file-arrow\"></span>\n                    </Card>\n                  </a>\n                </div>\n              );\n            })\n          }\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          {this.props.isWiki && this.renderRelatedFiles()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'react-modal';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n/**\n * Placeholder for future translate functionality\n */\nfunction translate(str) {\n  var replaceStrings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!str) {\n    return '';\n  }\n\n  var translated = str;\n\n  if (replaceStrings) {\n    Object.keys(replaceStrings).forEach(function (placeholder) {\n      translated = translated.replace(placeholder, replaceStrings[placeholder]);\n    });\n  }\n\n  return translated;\n}\nfunction getWindowWidth() {\n  return typeof global.window !== 'undefined' ? global.window.innerWidth : 0;\n}\nfunction getWindowHeight() {\n  return typeof global.window !== 'undefined' ? global.window.innerHeight : 0;\n} // Get the highest window context that isn't cross-origin\n// (When in an iframe)\n\nfunction getHighestSafeWindowContext() {\n  var self = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : global.window.self;\n  var referrer = self.document.referrer; // If we reached the top level, return self\n\n  if (self === global.window.top || !referrer) {\n    return self;\n  }\n\n  var getOrigin = function getOrigin(href) {\n    return href.match(/(.*\\/\\/.*?)(\\/|$)/)[1];\n  }; // If parent is the same origin, we can move up one context\n  // Reference: https://stackoverflow.com/a/21965342/1601953\n\n\n  if (getOrigin(self.location.href) === getOrigin(referrer)) {\n    return getHighestSafeWindowContext(self.parent);\n  } // If a different origin, we consider the current level\n  // as the top reachable one\n\n\n  return self;\n}\n\n// Min image zoom level\nvar MIN_ZOOM_LEVEL = 0; // Max image zoom level\n\nvar MAX_ZOOM_LEVEL = 300; // Size ratio between previous and next zoom levels\n\nvar ZOOM_RATIO = 1.007; // How much to increase/decrease the zoom level when the zoom buttons are clicked\n\nvar ZOOM_BUTTON_INCREMENT_SIZE = 100; // Used to judge the amount of horizontal scroll needed to initiate a image move\n\nvar WHEEL_MOVE_Y_THRESHOLD = 1;\nvar KEYS = {\n  ESC: 27,\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39\n}; // Actions\n\nvar ACTION_NONE = 0;\nvar ACTION_MOVE = 1;\nvar ACTION_SWIPE = 2;\nvar ACTION_PINCH = 3;\n\nvar SOURCE_ANY = 0;\nvar SOURCE_MOUSE = 1;\nvar SOURCE_TOUCH = 2;\nvar SOURCE_POINTER = 3; // Minimal swipe distance\n\nvar MIN_SWIPE_DISTANCE = 200;\n\nvar ReactImageLightbox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ReactImageLightbox, _Component);\n\n  _createClass(ReactImageLightbox, null, [{\n    key: \"isTargetMatchImage\",\n    value: function isTargetMatchImage(target) {\n      return target && /ril-image-current/.test(target.className);\n    }\n  }, {\n    key: \"parseMouseEvent\",\n    value: function parseMouseEvent(mouseEvent) {\n      return {\n        id: 'mouse',\n        source: SOURCE_MOUSE,\n        x: parseInt(mouseEvent.clientX, 10),\n        y: parseInt(mouseEvent.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parseTouchPointer\",\n    value: function parseTouchPointer(touchPointer) {\n      return {\n        id: touchPointer.identifier,\n        source: SOURCE_TOUCH,\n        x: parseInt(touchPointer.clientX, 10),\n        y: parseInt(touchPointer.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parsePointerEvent\",\n    value: function parsePointerEvent(pointerEvent) {\n      return {\n        id: pointerEvent.pointerId,\n        source: SOURCE_POINTER,\n        x: parseInt(pointerEvent.clientX, 10),\n        y: parseInt(pointerEvent.clientY, 10)\n      };\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"getTransform\",\n    value: function getTransform(_ref) {\n      var _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$zoom = _ref.zoom,\n          zoom = _ref$zoom === void 0 ? 1 : _ref$zoom,\n          width = _ref.width,\n          targetWidth = _ref.targetWidth;\n      var nextX = x;\n      var windowWidth = getWindowWidth();\n\n      if (width > windowWidth) {\n        nextX += (windowWidth - width) / 2;\n      }\n\n      var scaleFactor = zoom * (targetWidth / width);\n      return {\n        transform: \"translate3d(\".concat(nextX, \"px,\").concat(y, \"px,0) scale3d(\").concat(scaleFactor, \",\").concat(scaleFactor, \",1)\")\n      };\n    }\n  }]);\n\n  function ReactImageLightbox(props) {\n    var _this;\n\n    _classCallCheck(this, ReactImageLightbox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactImageLightbox).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheel\", function (event) {\n      event.preventDefault();\n    });\n\n    _this.state = {\n      //-----------------------------\n      // Animation\n      //-----------------------------\n      // Lightbox is closing\n      // When Lightbox is mounted, if animation is enabled it will open with the reverse of the closing animation\n      isClosing: !props.animationDisabled,\n      // Component parts should animate (e.g., when images are moving, or image is being zoomed)\n      shouldAnimate: false,\n      //-----------------------------\n      // Zoom settings\n      //-----------------------------\n      // Zoom level of image\n      zoomLevel: MIN_ZOOM_LEVEL,\n      //-----------------------------\n      // Image position settings\n      //-----------------------------\n      // Horizontal offset from center\n      offsetX: 0,\n      // Vertical offset from center\n      offsetY: 0,\n      // image load error for srcType\n      loadErrorStatus: {}\n    }; // Refs\n\n    _this.outerEl = React.createRef();\n    _this.zoomInBtn = React.createRef();\n    _this.zoomOutBtn = React.createRef();\n    _this.caption = React.createRef();\n    _this.closeIfClickInner = _this.closeIfClickInner.bind(_assertThisInitialized(_this));\n    _this.handleImageDoubleClick = _this.handleImageDoubleClick.bind(_assertThisInitialized(_this));\n    _this.handleImageMouseWheel = _this.handleImageMouseWheel.bind(_assertThisInitialized(_this));\n    _this.handleKeyInput = _this.handleKeyInput.bind(_assertThisInitialized(_this));\n    _this.handleMouseUp = _this.handleMouseUp.bind(_assertThisInitialized(_this));\n    _this.handleMouseDown = _this.handleMouseDown.bind(_assertThisInitialized(_this));\n    _this.handleMouseMove = _this.handleMouseMove.bind(_assertThisInitialized(_this));\n    _this.handleOuterMousewheel = _this.handleOuterMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleTouchStart = _this.handleTouchStart.bind(_assertThisInitialized(_this));\n    _this.handleTouchMove = _this.handleTouchMove.bind(_assertThisInitialized(_this));\n    _this.handleTouchEnd = _this.handleTouchEnd.bind(_assertThisInitialized(_this));\n    _this.handlePointerEvent = _this.handlePointerEvent.bind(_assertThisInitialized(_this));\n    _this.handleCaptionMousewheel = _this.handleCaptionMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleWindowResize = _this.handleWindowResize.bind(_assertThisInitialized(_this));\n    _this.handleZoomInButtonClick = _this.handleZoomInButtonClick.bind(_assertThisInitialized(_this));\n    _this.handleZoomOutButtonClick = _this.handleZoomOutButtonClick.bind(_assertThisInitialized(_this));\n    _this.requestClose = _this.requestClose.bind(_assertThisInitialized(_this));\n    _this.requestMoveNext = _this.requestMoveNext.bind(_assertThisInitialized(_this));\n    _this.requestMovePrev = _this.requestMovePrev.bind(_assertThisInitialized(_this));\n    return _this;\n  } // eslint-disable-next-line camelcase\n\n\n  _createClass(ReactImageLightbox, [{\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      // Timeouts - always clear it before umount\n      this.timeouts = []; // Current action\n\n      this.currentAction = ACTION_NONE; // Events source\n\n      this.eventsSource = SOURCE_ANY; // Empty pointers list\n\n      this.pointerList = []; // Prevent inner close\n\n      this.preventInnerClose = false;\n      this.preventInnerCloseTimeout = null; // Used to disable animation when changing props.mainSrc|nextSrc|prevSrc\n\n      this.keyPressed = false; // Used to store load state / dimensions of images\n\n      this.imageCache = {}; // Time the last keydown event was called (used in keyboard action rate limiting)\n\n      this.lastKeyDownTime = 0; // Used for debouncing window resize event\n\n      this.resizeTimeout = null; // Used to determine when actions are triggered by the scroll wheel\n\n      this.wheelActionTimeout = null;\n      this.resetScrollTimeout = null;\n      this.scrollX = 0;\n      this.scrollY = 0; // Used in panning zoomed images\n\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Used to swipe\n\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0; // Used to pinch\n\n      this.pinchTouchList = null;\n      this.pinchDistance = 0; // Used to differentiate between images with identical src\n\n      this.keyCounter = 0; // Used to detect a move when all src's remain unchanged (four or more of the same image in a row)\n\n      this.moveRequested = false;\n\n      if (!this.props.animationDisabled) {\n        // Make opening animation play\n        this.setState({\n          isClosing: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Prevents cross-origin errors when using a cross-origin iframe\n      this.windowContext = getHighestSafeWindowContext();\n      this.listeners = {\n        resize: this.handleWindowResize,\n        mouseup: this.handleMouseUp,\n        touchend: this.handleTouchEnd,\n        touchcancel: this.handleTouchEnd,\n        pointerdown: this.handlePointerEvent,\n        pointermove: this.handlePointerEvent,\n        pointerup: this.handlePointerEvent,\n        pointercancel: this.handlePointerEvent\n      };\n      Object.keys(this.listeners).forEach(function (type) {\n        _this2.windowContext.addEventListener(type, _this2.listeners[type]);\n      });\n      document.addEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.loadAllImages();\n    } // eslint-disable-next-line camelcase\n\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n\n      // Iterate through the source types for prevProps and nextProps to\n      //  determine if any of the sources changed\n      var sourcesChanged = false;\n      var prevSrcDict = {};\n      var nextSrcDict = {};\n      this.getSrcTypes().forEach(function (srcType) {\n        if (_this3.props[srcType.name] !== nextProps[srcType.name]) {\n          sourcesChanged = true;\n          prevSrcDict[_this3.props[srcType.name]] = true;\n          nextSrcDict[nextProps[srcType.name]] = true;\n        }\n      });\n\n      if (sourcesChanged || this.moveRequested) {\n        // Reset the loaded state for images not rendered next\n        Object.keys(prevSrcDict).forEach(function (prevSrc) {\n          if (!(prevSrc in nextSrcDict) && prevSrc in _this3.imageCache) {\n            _this3.imageCache[prevSrc].loaded = false;\n          }\n        });\n        this.moveRequested = false; // Load any new images\n\n        this.loadAllImages(nextProps);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate() {\n      // Wait for move...\n      return !this.moveRequested;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this4 = this;\n\n      this.didUnmount = true;\n      Object.keys(this.listeners).forEach(function (type) {\n        _this4.windowContext.removeEventListener(type, _this4.listeners[type]);\n      });\n      document.removeEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.timeouts.forEach(function (tid) {\n        return clearTimeout(tid);\n      });\n    }\n  }, {\n    key: \"setTimeout\",\n    value: function (_setTimeout) {\n      function setTimeout(_x, _x2) {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function (func, time) {\n      var _this5 = this;\n\n      var id = setTimeout(function () {\n        _this5.timeouts = _this5.timeouts.filter(function (tid) {\n          return tid !== id;\n        });\n        func();\n      }, time);\n      this.timeouts.push(id);\n      return id;\n    })\n  }, {\n    key: \"setPreventInnerClose\",\n    value: function setPreventInnerClose() {\n      var _this6 = this;\n\n      if (this.preventInnerCloseTimeout) {\n        this.clearTimeout(this.preventInnerCloseTimeout);\n      }\n\n      this.preventInnerClose = true;\n      this.preventInnerCloseTimeout = this.setTimeout(function () {\n        _this6.preventInnerClose = false;\n        _this6.preventInnerCloseTimeout = null;\n      }, 100);\n    } // Get info for the best suited image to display with the given srcType\n\n  }, {\n    key: \"getBestImageForType\",\n    value: function getBestImageForType(srcType) {\n      var imageSrc = this.props[srcType];\n      var fitSizes = {};\n\n      if (this.isImageLoaded(imageSrc)) {\n        // Use full-size image if available\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height);\n      } else if (this.isImageLoaded(this.props[\"\".concat(srcType, \"Thumbnail\")])) {\n        // Fall back to using thumbnail if the image has not been loaded\n        imageSrc = this.props[\"\".concat(srcType, \"Thumbnail\")];\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height, true);\n      } else {\n        return null;\n      }\n\n      return {\n        src: imageSrc,\n        height: this.imageCache[imageSrc].height,\n        width: this.imageCache[imageSrc].width,\n        targetHeight: fitSizes.height,\n        targetWidth: fitSizes.width\n      };\n    } // Get sizing for when an image is larger than the window\n\n  }, {\n    key: \"getFitSizes\",\n    value: function getFitSizes(width, height, stretch) {\n      var boxSize = this.getLightboxRect();\n      var maxHeight = boxSize.height - this.props.imagePadding * 2;\n      var maxWidth = boxSize.width - this.props.imagePadding * 2;\n\n      if (!stretch) {\n        maxHeight = Math.min(maxHeight, height);\n        maxWidth = Math.min(maxWidth, width);\n      }\n\n      var maxRatio = maxWidth / maxHeight;\n      var srcRatio = width / height;\n\n      if (maxRatio > srcRatio) {\n        // height is the constraining dimension of the photo\n        return {\n          width: width * maxHeight / height,\n          height: maxHeight\n        };\n      }\n\n      return {\n        width: maxWidth,\n        height: height * maxWidth / width\n      };\n    }\n  }, {\n    key: \"getMaxOffsets\",\n    value: function getMaxOffsets() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      var currentImageInfo = this.getBestImageForType('mainSrc');\n\n      if (currentImageInfo === null) {\n        return {\n          maxX: 0,\n          minX: 0,\n          maxY: 0,\n          minY: 0\n        };\n      }\n\n      var boxSize = this.getLightboxRect();\n      var zoomMultiplier = this.getZoomMultiplier(zoomLevel);\n      var maxX = 0;\n\n      if (zoomMultiplier * currentImageInfo.width - boxSize.width < 0) {\n        // if there is still blank space in the X dimension, don't limit except to the opposite edge\n        maxX = (boxSize.width - zoomMultiplier * currentImageInfo.width) / 2;\n      } else {\n        maxX = (zoomMultiplier * currentImageInfo.width - boxSize.width) / 2;\n      }\n\n      var maxY = 0;\n\n      if (zoomMultiplier * currentImageInfo.height - boxSize.height < 0) {\n        // if there is still blank space in the Y dimension, don't limit except to the opposite edge\n        maxY = (boxSize.height - zoomMultiplier * currentImageInfo.height) / 2;\n      } else {\n        maxY = (zoomMultiplier * currentImageInfo.height - boxSize.height) / 2;\n      }\n\n      return {\n        maxX: maxX,\n        maxY: maxY,\n        minX: -1 * maxX,\n        minY: -1 * maxY\n      };\n    } // Get image src types\n\n  }, {\n    key: \"getSrcTypes\",\n    value: function getSrcTypes() {\n      return [{\n        name: 'mainSrc',\n        keyEnding: \"i\".concat(this.keyCounter)\n      }, {\n        name: 'mainSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter)\n      }, {\n        name: 'nextSrc',\n        keyEnding: \"i\".concat(this.keyCounter + 1)\n      }, {\n        name: 'nextSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter + 1)\n      }, {\n        name: 'prevSrc',\n        keyEnding: \"i\".concat(this.keyCounter - 1)\n      }, {\n        name: 'prevSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter - 1)\n      }];\n    }\n    /**\n     * Get sizing when the image is scaled\n     */\n\n  }, {\n    key: \"getZoomMultiplier\",\n    value: function getZoomMultiplier() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      return Math.pow(ZOOM_RATIO, zoomLevel);\n    }\n    /**\n     * Get the size of the lightbox in pixels\n     */\n\n  }, {\n    key: \"getLightboxRect\",\n    value: function getLightboxRect() {\n      if (this.outerEl.current) {\n        return this.outerEl.current.getBoundingClientRect();\n      }\n\n      return {\n        width: getWindowWidth(),\n        height: getWindowHeight(),\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n    }\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x3) {\n        return _clearTimeout.apply(this, arguments);\n      }\n\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n\n      return clearTimeout;\n    }(function (id) {\n      this.timeouts = this.timeouts.filter(function (tid) {\n        return tid !== id;\n      });\n      clearTimeout(id);\n    }) // Change zoom level\n\n  }, {\n    key: \"changeZoom\",\n    value: function changeZoom(zoomLevel, clientX, clientY) {\n      // Ignore if zoom disabled\n      if (!this.props.enableZoom) {\n        return;\n      } // Constrain zoom level to the set bounds\n\n\n      var nextZoomLevel = Math.max(MIN_ZOOM_LEVEL, Math.min(MAX_ZOOM_LEVEL, zoomLevel)); // Ignore requests that don't change the zoom level\n\n      if (nextZoomLevel === this.state.zoomLevel) {\n        return;\n      }\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        // Snap back to center if zoomed all the way out\n        this.setState({\n          zoomLevel: nextZoomLevel,\n          offsetX: 0,\n          offsetY: 0\n        });\n        return;\n      }\n\n      var imageBaseSize = this.getBestImageForType('mainSrc');\n\n      if (imageBaseSize === null) {\n        return;\n      }\n\n      var currentZoomMultiplier = this.getZoomMultiplier();\n      var nextZoomMultiplier = this.getZoomMultiplier(nextZoomLevel); // Default to the center of the image to zoom when no mouse position specified\n\n      var boxRect = this.getLightboxRect();\n      var pointerX = typeof clientX !== 'undefined' ? clientX - boxRect.left : boxRect.width / 2;\n      var pointerY = typeof clientY !== 'undefined' ? clientY - boxRect.top : boxRect.height / 2;\n      var currentImageOffsetX = (boxRect.width - imageBaseSize.width * currentZoomMultiplier) / 2;\n      var currentImageOffsetY = (boxRect.height - imageBaseSize.height * currentZoomMultiplier) / 2;\n      var currentImageRealOffsetX = currentImageOffsetX - this.state.offsetX;\n      var currentImageRealOffsetY = currentImageOffsetY - this.state.offsetY;\n      var currentPointerXRelativeToImage = (pointerX - currentImageRealOffsetX) / currentZoomMultiplier;\n      var currentPointerYRelativeToImage = (pointerY - currentImageRealOffsetY) / currentZoomMultiplier;\n      var nextImageRealOffsetX = pointerX - currentPointerXRelativeToImage * nextZoomMultiplier;\n      var nextImageRealOffsetY = pointerY - currentPointerYRelativeToImage * nextZoomMultiplier;\n      var nextImageOffsetX = (boxRect.width - imageBaseSize.width * nextZoomMultiplier) / 2;\n      var nextImageOffsetY = (boxRect.height - imageBaseSize.height * nextZoomMultiplier) / 2;\n      var nextOffsetX = nextImageOffsetX - nextImageRealOffsetX;\n      var nextOffsetY = nextImageOffsetY - nextImageRealOffsetY; // When zooming out, limit the offset so things don't get left askew\n\n      if (this.currentAction !== ACTION_PINCH) {\n        var maxOffsets = this.getMaxOffsets();\n\n        if (this.state.zoomLevel > nextZoomLevel) {\n          nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, nextOffsetX));\n          nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, nextOffsetY));\n        }\n      }\n\n      this.setState({\n        zoomLevel: nextZoomLevel,\n        offsetX: nextOffsetX,\n        offsetY: nextOffsetY\n      });\n    }\n  }, {\n    key: \"closeIfClickInner\",\n    value: function closeIfClickInner(event) {\n      if (!this.preventInnerClose && event.target.className.search(/\\bril-inner\\b/) > -1) {\n        this.requestClose(event);\n      }\n    }\n    /**\n     * Handle user keyboard actions\n     */\n\n  }, {\n    key: \"handleKeyInput\",\n    value: function handleKeyInput(event) {\n      event.stopPropagation(); // Ignore key input during animations\n\n      if (this.isAnimating()) {\n        return;\n      } // Allow slightly faster navigation through the images when user presses keys repeatedly\n\n\n      if (event.type === 'keyup') {\n        this.lastKeyDownTime -= this.props.keyRepeatKeyupBonus;\n        return;\n      }\n\n      var keyCode = event.which || event.keyCode; // Ignore key presses that happen too close to each other (when rapid fire key pressing or holding down the key)\n      // But allow it if it's a lightbox closing action\n\n      var currentTime = new Date();\n\n      if (currentTime.getTime() - this.lastKeyDownTime < this.props.keyRepeatLimit && keyCode !== KEYS.ESC) {\n        return;\n      }\n\n      this.lastKeyDownTime = currentTime.getTime();\n\n      switch (keyCode) {\n        // ESC key closes the lightbox\n        case KEYS.ESC:\n          event.preventDefault();\n          this.requestClose(event);\n          break;\n        // Left arrow key moves to previous image\n\n        case KEYS.LEFT_ARROW:\n          if (!this.props.prevSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMovePrev(event);\n          break;\n        // Right arrow key moves to next image\n\n        case KEYS.RIGHT_ARROW:\n          if (!this.props.nextSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMoveNext(event);\n          break;\n      }\n    }\n    /**\n     * Handle a mouse wheel event over the lightbox container\n     */\n\n  }, {\n    key: \"handleOuterMousewheel\",\n    value: function handleOuterMousewheel(event) {\n      var _this7 = this;\n\n      // Prevent scrolling of the background\n      event.stopPropagation();\n      this.clearTimeout(this.resetScrollTimeout);\n      this.resetScrollTimeout = this.setTimeout(function () {\n        _this7.scrollX = 0;\n        _this7.scrollY = 0;\n      }, 300);\n    }\n  }, {\n    key: \"handleImageMouseWheel\",\n    value: function handleImageMouseWheel(event) {\n      // when gesture move up/down/left/right, event.deltaY is integer, move image\n      if (parseInt(event.deltaY) === parseFloat(event.deltaY)) {\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n          var newOffsetY = this.state.offsetY + event.deltaY;\n          this.setState({\n            offsetY: newOffsetY\n          });\n        } else {\n          var newOffsetX = this.state.offsetX + event.deltaX;\n          this.setState({\n            offsetX: newOffsetX\n          });\n        }\n\n        return;\n      } // when gesture zoom in or zoom out, event.deltaY is decimal, zoom image\n\n\n      var yThreshold = WHEEL_MOVE_Y_THRESHOLD;\n\n      if (Math.abs(event.deltaY) >= Math.abs(event.deltaX)) {\n        event.stopPropagation(); // If the vertical scroll amount was large enough, perform a zoom\n\n        if (Math.abs(event.deltaY) < yThreshold) {\n          return;\n        }\n\n        this.scrollX = 0;\n        this.scrollY += event.deltaY;\n        this.changeZoom(this.state.zoomLevel - event.deltaY, event.clientX, event.clientY);\n      }\n    }\n    /**\n     * Handle a double click on the current image\n     */\n\n  }, {\n    key: \"handleImageDoubleClick\",\n    value: function handleImageDoubleClick(event) {\n      if (this.state.zoomLevel > MIN_ZOOM_LEVEL) {\n        // A double click when zoomed in zooms all the way out\n        this.changeZoom(MIN_ZOOM_LEVEL, event.clientX, event.clientY);\n      } else {\n        // A double click when zoomed all the way out zooms in\n        this.changeZoom(this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE, event.clientX, event.clientY);\n      }\n    }\n  }, {\n    key: \"shouldHandleEvent\",\n    value: function shouldHandleEvent(source) {\n      if (this.eventsSource === source) {\n        return true;\n      }\n\n      if (this.eventsSource === SOURCE_ANY) {\n        this.eventsSource = source;\n        return true;\n      }\n\n      switch (source) {\n        case SOURCE_MOUSE:\n          return false;\n\n        case SOURCE_TOUCH:\n          this.eventsSource = SOURCE_TOUCH;\n          this.filterPointersBySource();\n          return true;\n\n        case SOURCE_POINTER:\n          if (this.eventsSource === SOURCE_MOUSE) {\n            this.eventsSource = SOURCE_POINTER;\n            this.filterPointersBySource();\n            return true;\n          }\n\n          return false;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"addPointer\",\n    value: function addPointer(pointer) {\n      this.pointerList.push(pointer);\n    }\n  }, {\n    key: \"removePointer\",\n    value: function removePointer(pointer) {\n      this.pointerList = this.pointerList.filter(function (_ref2) {\n        var id = _ref2.id;\n        return id !== pointer.id;\n      });\n    }\n  }, {\n    key: \"filterPointersBySource\",\n    value: function filterPointersBySource() {\n      var _this8 = this;\n\n      this.pointerList = this.pointerList.filter(function (_ref3) {\n        var source = _ref3.source;\n        return source === _this8.eventsSource;\n      });\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        this.addPointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.multiPointerMove(event, [ReactImageLightbox.parseMouseEvent(event)]);\n      }\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.removePointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"handlePointerEvent\",\n    value: function handlePointerEvent(event) {\n      if (this.shouldHandleEvent(SOURCE_POINTER)) {\n        switch (event.type) {\n          case 'pointerdown':\n            if (ReactImageLightbox.isTargetMatchImage(event.target)) {\n              this.addPointer(ReactImageLightbox.parsePointerEvent(event));\n              this.multiPointerStart(event);\n            }\n\n            break;\n\n          case 'pointermove':\n            this.multiPointerMove(event, [ReactImageLightbox.parsePointerEvent(event)]);\n            break;\n\n          case 'pointerup':\n          case 'pointercancel':\n            this.removePointer(ReactImageLightbox.parsePointerEvent(event));\n            this.multiPointerEnd(event);\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"handleTouchStart\",\n    value: function handleTouchStart(event) {\n      var _this9 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        [].forEach.call(event.changedTouches, function (eventTouch) {\n          return _this9.addPointer(ReactImageLightbox.parseTouchPointer(eventTouch));\n        });\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleTouchMove\",\n    value: function handleTouchMove(event) {\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        this.multiPointerMove(event, [].map.call(event.changedTouches, function (eventTouch) {\n          return ReactImageLightbox.parseTouchPointer(eventTouch);\n        }));\n      }\n    }\n  }, {\n    key: \"handleTouchEnd\",\n    value: function handleTouchEnd(event) {\n      var _this10 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        [].map.call(event.changedTouches, function (touch) {\n          return _this10.removePointer(ReactImageLightbox.parseTouchPointer(touch));\n        });\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"decideMoveOrSwipe\",\n    value: function decideMoveOrSwipe(pointer) {\n      if (this.state.zoomLevel <= MIN_ZOOM_LEVEL) {\n        this.handleSwipeStart(pointer);\n      } else {\n        this.handleMoveStart(pointer);\n      }\n    }\n  }, {\n    key: \"multiPointerStart\",\n    value: function multiPointerStart(event) {\n      this.handleEnd(null);\n\n      switch (this.pointerList.length) {\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerMove\",\n    value: function multiPointerMove(event, pointerList) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          {\n            event.preventDefault();\n            this.handleMove(pointerList[0]);\n            break;\n          }\n\n        case ACTION_SWIPE:\n          {\n            event.preventDefault();\n            this.handleSwipe(pointerList[0]);\n            break;\n          }\n\n        case ACTION_PINCH:\n          {\n            event.preventDefault();\n            this.handlePinch(pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerEnd\",\n    value: function multiPointerEnd(event) {\n      if (this.currentAction !== ACTION_NONE) {\n        this.setPreventInnerClose();\n        this.handleEnd(event);\n      }\n\n      switch (this.pointerList.length) {\n        case 0:\n          {\n            this.eventsSource = SOURCE_ANY;\n            break;\n          }\n\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(event) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          this.handleMoveEnd(event);\n          break;\n\n        case ACTION_SWIPE:\n          this.handleSwipeEnd(event);\n          break;\n\n        case ACTION_PINCH:\n          this.handlePinchEnd(event);\n          break;\n      }\n    } // Handle move start over the lightbox container\n    // This happens:\n    // - On a mouseDown event\n    // - On a touchstart event\n\n  }, {\n    key: \"handleMoveStart\",\n    value: function handleMoveStart(_ref4) {\n      var clientX = _ref4.x,\n          clientY = _ref4.y;\n\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_MOVE;\n      this.moveStartX = clientX;\n      this.moveStartY = clientY;\n      this.moveStartOffsetX = this.state.offsetX;\n      this.moveStartOffsetY = this.state.offsetY;\n    } // Handle dragging over the lightbox container\n    // This happens:\n    // - After a mouseDown and before a mouseUp event\n    // - After a touchstart and before a touchend event\n\n  }, {\n    key: \"handleMove\",\n    value: function handleMove(_ref5) {\n      var clientX = _ref5.x,\n          clientY = _ref5.y;\n      var newOffsetX = this.moveStartX - clientX + this.moveStartOffsetX;\n      var newOffsetY = this.moveStartY - clientY + this.moveStartOffsetY;\n\n      if (this.state.offsetX !== newOffsetX || this.state.offsetY !== newOffsetY) {\n        this.setState({\n          offsetX: newOffsetX,\n          offsetY: newOffsetY\n        });\n      }\n    }\n  }, {\n    key: \"handleMoveEnd\",\n    value: function handleMoveEnd() {\n      var _this11 = this;\n\n      this.currentAction = ACTION_NONE;\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Snap image back into frame if outside max offset range\n\n      var maxOffsets = this.getMaxOffsets();\n      var nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, this.state.offsetX));\n      var nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, this.state.offsetY));\n\n      if (nextOffsetX !== this.state.offsetX || nextOffsetY !== this.state.offsetY) {\n        this.setState({\n          offsetX: nextOffsetX,\n          offsetY: nextOffsetY,\n          shouldAnimate: true\n        });\n        this.setTimeout(function () {\n          _this11.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n    }\n  }, {\n    key: \"handleSwipeStart\",\n    value: function handleSwipeStart(_ref6) {\n      var clientX = _ref6.x,\n          clientY = _ref6.y;\n      this.currentAction = ACTION_SWIPE;\n      this.swipeStartX = clientX;\n      this.swipeStartY = clientY;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipe\",\n    value: function handleSwipe(_ref7) {\n      var clientX = _ref7.x,\n          clientY = _ref7.y;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipeEnd\",\n    value: function handleSwipeEnd(event) {\n      var xDiff = this.swipeEndX - this.swipeStartX;\n      var xDiffAbs = Math.abs(xDiff);\n      var yDiffAbs = Math.abs(this.swipeEndY - this.swipeStartY);\n      this.currentAction = ACTION_NONE;\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0;\n\n      if (!event || this.isAnimating() || xDiffAbs < yDiffAbs * 1.5) {\n        return;\n      }\n\n      if (xDiffAbs < MIN_SWIPE_DISTANCE) {\n        var boxRect = this.getLightboxRect();\n\n        if (xDiffAbs < boxRect.width / 4) {\n          return;\n        }\n      }\n\n      if (xDiff > 0 && this.props.prevSrc) {\n        event.preventDefault();\n        this.requestMovePrev();\n      } else if (xDiff < 0 && this.props.nextSrc) {\n        event.preventDefault();\n        this.requestMoveNext();\n      }\n    }\n  }, {\n    key: \"calculatePinchDistance\",\n    value: function calculatePinchDistance() {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref9 = _slicedToArray(_ref8, 2),\n          a = _ref9[0],\n          b = _ref9[1];\n\n      return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n    }\n  }, {\n    key: \"calculatePinchCenter\",\n    value: function calculatePinchCenter() {\n      var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref11 = _slicedToArray(_ref10, 2),\n          a = _ref11[0],\n          b = _ref11[1];\n\n      return {\n        x: a.x - (a.x - b.x) / 2,\n        y: a.y - (a.y - b.y) / 2\n      };\n    }\n  }, {\n    key: \"handlePinchStart\",\n    value: function handlePinchStart(pointerList) {\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_PINCH;\n      this.pinchTouchList = pointerList.map(function (_ref12) {\n        var id = _ref12.id,\n            x = _ref12.x,\n            y = _ref12.y;\n        return {\n          id: id,\n          x: x,\n          y: y\n        };\n      });\n      this.pinchDistance = this.calculatePinchDistance();\n    }\n  }, {\n    key: \"handlePinch\",\n    value: function handlePinch(pointerList) {\n      this.pinchTouchList = this.pinchTouchList.map(function (oldPointer) {\n        for (var i = 0; i < pointerList.length; i += 1) {\n          if (pointerList[i].id === oldPointer.id) {\n            return pointerList[i];\n          }\n        }\n\n        return oldPointer;\n      });\n      var newDistance = this.calculatePinchDistance();\n      var zoomLevel = this.state.zoomLevel + newDistance - this.pinchDistance;\n      this.pinchDistance = newDistance;\n\n      var _this$calculatePinchC = this.calculatePinchCenter(this.pinchTouchList),\n          clientX = _this$calculatePinchC.x,\n          clientY = _this$calculatePinchC.y;\n\n      this.changeZoom(zoomLevel, clientX, clientY);\n    }\n  }, {\n    key: \"handlePinchEnd\",\n    value: function handlePinchEnd() {\n      this.currentAction = ACTION_NONE;\n      this.pinchTouchList = null;\n      this.pinchDistance = 0;\n    } // Handle the window resize event\n\n  }, {\n    key: \"handleWindowResize\",\n    value: function handleWindowResize() {\n      this.clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = this.setTimeout(this.forceUpdate.bind(this), 100);\n    }\n  }, {\n    key: \"handleZoomInButtonClick\",\n    value: function handleZoomInButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MAX_ZOOM_LEVEL) {\n        this.zoomOutBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleZoomOutButtonClick\",\n    value: function handleZoomOutButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel - ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        this.zoomInBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleCaptionMousewheel\",\n    value: function handleCaptionMousewheel(event) {\n      event.stopPropagation();\n\n      if (!this.caption.current) {\n        return;\n      }\n\n      var _this$caption$current = this.caption.current.getBoundingClientRect(),\n          height = _this$caption$current.height;\n\n      var _this$caption$current2 = this.caption.current,\n          scrollHeight = _this$caption$current2.scrollHeight,\n          scrollTop = _this$caption$current2.scrollTop;\n\n      if (event.deltaY > 0 && height + scrollTop >= scrollHeight || event.deltaY < 0 && scrollTop <= 0) {\n        event.preventDefault();\n      }\n    } // Detach key and mouse input events\n\n  }, {\n    key: \"isAnimating\",\n    value: function isAnimating() {\n      return this.state.shouldAnimate || this.state.isClosing;\n    } // Check if image is loaded\n\n  }, {\n    key: \"isImageLoaded\",\n    value: function isImageLoaded(imageSrc) {\n      return imageSrc && imageSrc in this.imageCache && this.imageCache[imageSrc].loaded;\n    } // Load image from src and call callback with image width and height on load\n\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(srcType, imageSrc, done) {\n      var _this12 = this;\n\n      // Return the image info if it is already cached\n      if (this.isImageLoaded(imageSrc)) {\n        this.setTimeout(function () {\n          done();\n        }, 1);\n        return;\n      }\n\n      var inMemoryImage = new global.Image();\n\n      if (this.props.imageCrossOrigin) {\n        inMemoryImage.crossOrigin = this.props.imageCrossOrigin;\n      }\n\n      inMemoryImage.onerror = function (errorEvent) {\n        _this12.props.onImageLoadError(imageSrc, srcType, errorEvent); // failed to load so set the state loadErrorStatus\n\n\n        _this12.setState(function (prevState) {\n          return {\n            loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, srcType, true))\n          };\n        });\n\n        done(errorEvent);\n      };\n\n      inMemoryImage.onload = function () {\n        _this12.props.onImageLoad(imageSrc, srcType, inMemoryImage);\n\n        _this12.imageCache[imageSrc] = {\n          loaded: true,\n          width: inMemoryImage.width,\n          height: inMemoryImage.height\n        };\n        done();\n      };\n\n      inMemoryImage.src = imageSrc;\n    } // Load all images and their thumbnails\n\n  }, {\n    key: \"loadAllImages\",\n    value: function loadAllImages() {\n      var _this13 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n\n      var generateLoadDoneCallback = function generateLoadDoneCallback(srcType, imageSrc) {\n        return function (err) {\n          // Give up showing image on error\n          if (err) {\n            return;\n          } // Don't rerender if the src is not the same as when the load started\n          // or if the component has unmounted\n\n\n          if (_this13.props[srcType] !== imageSrc || _this13.didUnmount) {\n            return;\n          } // Force rerender with the new image\n\n\n          _this13.forceUpdate();\n        };\n      }; // Load the images\n\n\n      this.getSrcTypes().forEach(function (srcType) {\n        var type = srcType.name; // there is no error when we try to load it initially\n\n        if (props[type] && _this13.state.loadErrorStatus[type]) {\n          _this13.setState(function (prevState) {\n            return {\n              loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, type, false))\n            };\n          });\n        } // Load unloaded images\n\n\n        if (props[type] && !_this13.isImageLoaded(props[type])) {\n          _this13.loadImage(type, props[type], generateLoadDoneCallback(type, props[type]));\n        }\n      });\n    } // Request that the lightbox be closed\n\n  }, {\n    key: \"requestClose\",\n    value: function requestClose(event) {\n      var _this14 = this;\n\n      // Call the parent close request\n      var closeLightbox = function closeLightbox() {\n        return _this14.props.onCloseRequest(event);\n      };\n\n      if (this.props.animationDisabled || event.type === 'keydown' && !this.props.animationOnKeyInput) {\n        // No animation\n        closeLightbox();\n        return;\n      } // With animation\n      // Start closing animation\n\n\n      this.setState({\n        isClosing: true\n      }); // Perform the actual closing at the end of the animation\n\n      this.setTimeout(closeLightbox, this.props.animationDuration);\n    }\n  }, {\n    key: \"requestMove\",\n    value: function requestMove(direction, event) {\n      var _this15 = this;\n\n      // Reset the zoom level on image move\n      var nextState = {\n        zoomLevel: MIN_ZOOM_LEVEL,\n        offsetX: 0,\n        offsetY: 0\n      }; // Enable animated states\n\n      if (!this.props.animationDisabled && (!this.keyPressed || this.props.animationOnKeyInput)) {\n        nextState.shouldAnimate = true;\n        this.setTimeout(function () {\n          return _this15.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n\n      this.keyPressed = false;\n      this.moveRequested = true;\n\n      if (direction === 'prev') {\n        this.keyCounter -= 1;\n        this.setState(nextState);\n        this.props.onMovePrevRequest(event);\n      } else {\n        this.keyCounter += 1;\n        this.setState(nextState);\n        this.props.onMoveNextRequest(event);\n      }\n    } // Request to transition to the next image\n\n  }, {\n    key: \"requestMoveNext\",\n    value: function requestMoveNext(event) {\n      this.requestMove('next', event);\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"requestMovePrev\",\n    value: function requestMovePrev(event) {\n      this.requestMove('prev', event);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this16 = this;\n\n      var _this$props = this.props,\n          animationDisabled = _this$props.animationDisabled,\n          animationDuration = _this$props.animationDuration,\n          clickOutsideToClose = _this$props.clickOutsideToClose,\n          discourageDownloads = _this$props.discourageDownloads,\n          enableZoom = _this$props.enableZoom,\n          imageTitle = _this$props.imageTitle,\n          nextSrc = _this$props.nextSrc,\n          prevSrc = _this$props.prevSrc,\n          toolbarButtons = _this$props.toolbarButtons,\n          reactModalStyle = _this$props.reactModalStyle,\n          _onAfterOpen = _this$props.onAfterOpen,\n          imageCrossOrigin = _this$props.imageCrossOrigin,\n          reactModalProps = _this$props.reactModalProps;\n      var _this$state = this.state,\n          zoomLevel = _this$state.zoomLevel,\n          offsetX = _this$state.offsetX,\n          offsetY = _this$state.offsetY,\n          isClosing = _this$state.isClosing,\n          loadErrorStatus = _this$state.loadErrorStatus;\n      var boxSize = this.getLightboxRect();\n      var transitionStyle = {}; // Transition settings for sliding animations\n\n      if (!animationDisabled && this.isAnimating()) {\n        transitionStyle = _objectSpread2({}, transitionStyle, {\n          transition: \"transform \".concat(animationDuration, \"ms\")\n        });\n      } // Key endings to differentiate between images with the same src\n\n\n      var keyEndings = {};\n      this.getSrcTypes().forEach(function (_ref13) {\n        var name = _ref13.name,\n            keyEnding = _ref13.keyEnding;\n        keyEndings[name] = keyEnding;\n      }); // Images to be displayed\n\n      var images = [];\n\n      var addImage = function addImage(srcType, imageClass, transforms) {\n        // Ignore types that have no source defined for their full size image\n        if (!_this16.props[srcType]) {\n          return;\n        }\n\n        var bestImageInfo = _this16.getBestImageForType(srcType);\n\n        var imageStyle = _objectSpread2({}, transitionStyle, {}, ReactImageLightbox.getTransform(_objectSpread2({}, transforms, {}, bestImageInfo)));\n\n        if (zoomLevel > MIN_ZOOM_LEVEL) {\n          imageStyle.cursor = 'move';\n        } // support IE 9 and 11\n\n\n        var hasTrueValue = function hasTrueValue(object) {\n          return Object.keys(object).some(function (key) {\n            return object[key];\n          });\n        }; // when error on one of the loads then push custom error stuff\n\n\n        if (bestImageInfo === null && hasTrueValue(loadErrorStatus)) {\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-errored\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__errorContainer\"\n          }, _this16.props.imageLoadErrorMessage)));\n          return;\n        }\n\n        if (bestImageInfo === null) {\n          var loadingIcon = React.createElement(\"div\", {\n            className: \"ril-loading-circle ril__loadingCircle ril__loadingContainer__icon\"\n          }, _toConsumableArray(new Array(12)).map(function (_, index) {\n            return React.createElement(\"div\", {\n              // eslint-disable-next-line react/no-array-index-key\n              key: index,\n              className: \"ril-loading-circle-point ril__loadingCirclePoint\"\n            });\n          })); // Fall back to loading icon if the thumbnail has not been loaded\n\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-not-loaded\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__loadingContainer\"\n          }, loadingIcon)));\n          return;\n        }\n\n        var imageSrc = bestImageInfo.src;\n\n        if (discourageDownloads) {\n          imageStyle.backgroundImage = \"url('\".concat(imageSrc, \"')\");\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril__imageDiscourager\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            style: imageStyle,\n            key: imageSrc + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril-download-blocker ril__downloadBlocker\"\n          })));\n        } else {\n          images.push(React.createElement(\"img\", _extends({}, imageCrossOrigin ? {\n            crossOrigin: imageCrossOrigin\n          } : {}, {\n            className: \"\".concat(imageClass, \" ril__image\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            onDragStart: function onDragStart(e) {\n              return e.preventDefault();\n            },\n            style: imageStyle,\n            src: imageSrc,\n            key: imageSrc + keyEndings[srcType],\n            alt: typeof imageTitle === 'string' ? imageTitle : translate('Image'),\n            draggable: false\n          })));\n        }\n      };\n\n      var zoomMultiplier = this.getZoomMultiplier(); // Next Image (displayed on the right)\n\n      addImage('nextSrc', 'ril-image-next ril__imageNext', {\n        x: boxSize.width\n      }); // Main Image\n\n      addImage('mainSrc', 'ril-image-current', {\n        x: -1 * offsetX,\n        y: -1 * offsetY,\n        zoom: zoomMultiplier\n      }); // Previous Image (displayed on the left)\n\n      addImage('prevSrc', 'ril-image-prev ril__imagePrev', {\n        x: -1 * boxSize.width\n      });\n      var modalStyle = {\n        overlay: _objectSpread2({\n          zIndex: 1000,\n          backgroundColor: 'transparent'\n        }, reactModalStyle.overlay),\n        content: _objectSpread2({\n          backgroundColor: 'transparent',\n          overflow: 'hidden',\n          // Needed, otherwise keyboard shortcuts scroll the page\n          border: 'none',\n          borderRadius: 0,\n          padding: 0,\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }, reactModalStyle.content)\n      };\n      return React.createElement(Modal, _extends({\n        isOpen: true,\n        onRequestClose: clickOutsideToClose ? this.requestClose : undefined,\n        onAfterOpen: function onAfterOpen() {\n          // Focus on the div with key handlers\n          if (_this16.outerEl.current) {\n            _this16.outerEl.current.focus();\n          }\n\n          _onAfterOpen();\n        },\n        style: modalStyle,\n        contentLabel: translate('Lightbox'),\n        appElement: typeof global.window !== 'undefined' ? global.window.document.body : undefined\n      }, reactModalProps), React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions\n        // Floating modal with closing animations\n        className: \"ril-outer ril__outer ril__outerAnimating \".concat(this.props.wrapperClassName, \" \").concat(isClosing ? 'ril-closing ril__outerClosing' : ''),\n        style: {\n          transition: \"opacity \".concat(animationDuration, \"ms\"),\n          animationDuration: \"\".concat(animationDuration, \"ms\"),\n          animationDirection: isClosing ? 'normal' : 'reverse'\n        },\n        ref: this.outerEl,\n        onWheel: this.handleOuterMousewheel,\n        onMouseMove: this.handleMouseMove,\n        onMouseDown: this.handleMouseDown,\n        onTouchStart: this.handleTouchStart,\n        onTouchMove: this.handleTouchMove,\n        tabIndex: \"-1\" // Enables key handlers on div\n        ,\n        onKeyDown: this.handleKeyInput,\n        onKeyUp: this.handleKeyInput\n      }, React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events\n        // Image holder\n        className: \"ril-inner ril__inner\",\n        onClick: clickOutsideToClose ? this.closeIfClickInner : undefined\n      }, images), prevSrc && React.createElement(\"button\", {\n        // Move to previous image button\n        type: \"button\",\n        className: \"ril-prev-button ril__navButtons ril__navButtonPrev\",\n        key: \"prev\",\n        \"aria-label\": this.props.prevLabel,\n        onClick: !this.isAnimating() ? this.requestMovePrev : undefined // Ignore clicks during animation\n\n      }), nextSrc && React.createElement(\"button\", {\n        // Move to next image button\n        type: \"button\",\n        className: \"ril-next-button ril__navButtons ril__navButtonNext\",\n        key: \"next\",\n        \"aria-label\": this.props.nextLabel,\n        onClick: !this.isAnimating() ? this.requestMoveNext : undefined // Ignore clicks during animation\n\n      }), React.createElement(\"div\", {\n        // Lightbox toolbar\n        className: \"ril-toolbar ril__toolbar\"\n      }, React.createElement(\"ul\", {\n        className: \"ril-toolbar-left ril__toolbarSide ril__toolbarLeftSide\"\n      }, React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"span\", {\n        className: \"ril-toolbar__item__child ril__toolbarItemChild\"\n      }, imageTitle))), React.createElement(\"ul\", {\n        className: \"ril-toolbar-right ril__toolbarSide ril__toolbarRightSide\"\n      }, toolbarButtons && toolbarButtons.map(function (button, i) {\n        return React.createElement(\"li\", {\n          key: \"button_\".concat(i + 1),\n          className: \"ril-toolbar__item ril__toolbarItem\"\n        }, button);\n      }), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom in button\n        type: \"button\",\n        key: \"zoom-in\",\n        \"aria-label\": this.props.zoomInLabel,\n        className: ['ril-zoom-in', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomInButton'].concat(_toConsumableArray(zoomLevel === MAX_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomInBtn,\n        disabled: this.isAnimating() || zoomLevel === MAX_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MAX_ZOOM_LEVEL ? this.handleZoomInButtonClick : undefined\n      })), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom out button\n        type: \"button\",\n        key: \"zoom-out\",\n        \"aria-label\": this.props.zoomOutLabel,\n        className: ['ril-zoom-out', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomOutButton'].concat(_toConsumableArray(zoomLevel === MIN_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomOutBtn,\n        disabled: this.isAnimating() || zoomLevel === MIN_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MIN_ZOOM_LEVEL ? this.handleZoomOutButtonClick : undefined\n      })), React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox close button\n        type: \"button\",\n        key: \"close\",\n        \"aria-label\": this.props.closeLabel,\n        className: \"ril-close ril-toolbar__item__child ril__toolbarItemChild ril__builtinButton ril__closeButton\",\n        onClick: !this.isAnimating() ? this.requestClose : undefined // Ignore clicks during animation\n\n      })))), this.props.imageCaption && // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      React.createElement(\"div\", {\n        // Image caption\n        onWheel: this.handleCaptionMousewheel,\n        onMouseDown: function onMouseDown(event) {\n          return event.stopPropagation();\n        },\n        className: \"ril-caption ril__caption\",\n        ref: this.caption\n      }, React.createElement(\"div\", {\n        className: \"ril-caption-content ril__captionContent\"\n      }, this.props.imageCaption))));\n    }\n  }]);\n\n  return ReactImageLightbox;\n}(Component);\n\nReactImageLightbox.propTypes = {\n  //-----------------------------\n  // Image sources\n  //-----------------------------\n  // Main display image url\n  mainSrc: PropTypes.string.isRequired,\n  // eslint-disable-line react/no-unused-prop-types\n  // Previous display image url (displayed to the left)\n  // If left undefined, movePrev actions will not be performed, and the button not displayed\n  prevSrc: PropTypes.string,\n  // Next display image url (displayed to the right)\n  // If left undefined, moveNext actions will not be performed, and the button not displayed\n  nextSrc: PropTypes.string,\n  //-----------------------------\n  // Image thumbnail sources\n  //-----------------------------\n  // Thumbnail image url corresponding to props.mainSrc\n  mainSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.prevSrc\n  prevSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.nextSrc\n  nextSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  //-----------------------------\n  // Event Handlers\n  //-----------------------------\n  // Close window event\n  // Should change the parent state such that the lightbox is not rendered\n  onCloseRequest: PropTypes.func.isRequired,\n  // Move to previous image event\n  // Should change the parent state such that props.prevSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.nextSrc, etc.\n  onMovePrevRequest: PropTypes.func,\n  // Move to next image event\n  // Should change the parent state such that props.nextSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.prevSrc, etc.\n  onMoveNextRequest: PropTypes.func,\n  // Called when an image fails to load\n  // (imageSrc: string, srcType: string, errorEvent: object): void\n  onImageLoadError: PropTypes.func,\n  // Called when image successfully loads\n  onImageLoad: PropTypes.func,\n  // Open window event\n  onAfterOpen: PropTypes.func,\n  //-----------------------------\n  // Download discouragement settings\n  //-----------------------------\n  // Enable download discouragement (prevents [right-click -> Save Image As...])\n  discourageDownloads: PropTypes.bool,\n  //-----------------------------\n  // Animation settings\n  //-----------------------------\n  // Disable all animation\n  animationDisabled: PropTypes.bool,\n  // Disable animation on actions performed with keyboard shortcuts\n  animationOnKeyInput: PropTypes.bool,\n  // Animation duration (ms)\n  animationDuration: PropTypes.number,\n  //-----------------------------\n  // Keyboard shortcut settings\n  //-----------------------------\n  // Required interval of time (ms) between key actions\n  // (prevents excessively fast navigation of images)\n  keyRepeatLimit: PropTypes.number,\n  // Amount of time (ms) restored after each keyup\n  // (makes rapid key presses slightly faster than holding down the key to navigate images)\n  keyRepeatKeyupBonus: PropTypes.number,\n  //-----------------------------\n  // Image info\n  //-----------------------------\n  // Image title\n  imageTitle: PropTypes.node,\n  // Image caption\n  imageCaption: PropTypes.node,\n  // Optional crossOrigin attribute\n  imageCrossOrigin: PropTypes.string,\n  //-----------------------------\n  // Lightbox style\n  //-----------------------------\n  // Set z-index style, etc., for the parent react-modal (format: https://github.com/reactjs/react-modal#styles )\n  reactModalStyle: PropTypes.object,\n  // Padding (px) between the edge of the window and the lightbox\n  imagePadding: PropTypes.number,\n  wrapperClassName: PropTypes.string,\n  //-----------------------------\n  // Other\n  //-----------------------------\n  // Array of custom toolbar buttons\n  toolbarButtons: PropTypes.arrayOf(PropTypes.node),\n  // When true, clicks outside of the image close the lightbox\n  clickOutsideToClose: PropTypes.bool,\n  // Set to false to disable zoom functionality and hide zoom buttons\n  enableZoom: PropTypes.bool,\n  // Override props set on react-modal (https://github.com/reactjs/react-modal)\n  reactModalProps: PropTypes.shape({}),\n  // Aria-labels\n  nextLabel: PropTypes.string,\n  prevLabel: PropTypes.string,\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  closeLabel: PropTypes.string,\n  imageLoadErrorMessage: PropTypes.node\n};\nReactImageLightbox.defaultProps = {\n  imageTitle: null,\n  imageCaption: null,\n  toolbarButtons: null,\n  reactModalProps: {},\n  animationDisabled: false,\n  animationDuration: 300,\n  animationOnKeyInput: false,\n  clickOutsideToClose: true,\n  closeLabel: 'Close lightbox',\n  discourageDownloads: false,\n  enableZoom: true,\n  imagePadding: 10,\n  imageCrossOrigin: null,\n  keyRepeatKeyupBonus: 40,\n  keyRepeatLimit: 180,\n  mainSrcThumbnail: null,\n  nextLabel: 'Next image',\n  nextSrc: null,\n  nextSrcThumbnail: null,\n  onAfterOpen: function onAfterOpen() {},\n  onImageLoadError: function onImageLoadError() {},\n  onImageLoad: function onImageLoad() {},\n  onMoveNextRequest: function onMoveNextRequest() {},\n  onMovePrevRequest: function onMovePrevRequest() {},\n  prevLabel: 'Previous image',\n  prevSrc: null,\n  prevSrcThumbnail: null,\n  reactModalStyle: {},\n  wrapperClassName: '',\n  zoomInLabel: 'Zoom in',\n  zoomOutLabel: 'Zoom out',\n  imageLoadErrorMessage: 'This image failed to load'\n};\n\nexport default ReactImageLightbox;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require(\"./components/Modal\");\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;\nmodule.exports = exports[\"default\"];","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\n\nconst propTypes = {\n  repoPermission: PropTypes.bool,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  caculateMenuList(node) {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    if (node.object.type === 'dir') {\n      return [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    return [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              repoPermission={this.props.repoPermission}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable=\"true\" onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((this.props.repoPermission || permission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.caculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoPermission: PropTypes.bool,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${this.state.isTreeViewDropTipShow ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n      >\n        <TreeNodeView\n          repoPermission={this.props.repoPermission}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.props.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, it’s not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bodyOpenClassName = exports.portalClassName = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ModalPortal = require(\"./ModalPortal\");\n\nvar _ModalPortal2 = _interopRequireDefault(_ModalPortal);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar portalClassName = exports.portalClassName = \"ReactModalPortal\";\nvar bodyOpenClassName = exports.bodyOpenClassName = \"ReactModal__Body--open\";\n\nvar isReact16 = _safeHTMLElement.canUseDOM && _reactDom2.default.createPortal !== undefined;\n\nvar getCreatePortal = function getCreatePortal() {\n  return isReact16 ? _reactDom2.default.createPortal : _reactDom2.default.unstable_renderSubtreeIntoContainer;\n};\n\nfunction getParentElement(parentSelector) {\n  return parentSelector();\n}\n\nvar Modal = function (_Component) {\n  _inherits(Modal, _Component);\n\n  function Modal() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Modal.__proto__ || Object.getPrototypeOf(Modal)).call.apply(_ref, [this].concat(args))), _this), _this.removePortal = function () {\n      !isReact16 && _reactDom2.default.unmountComponentAtNode(_this.node);\n      var parent = getParentElement(_this.props.parentSelector);\n      if (parent && parent.contains(_this.node)) {\n        parent.removeChild(_this.node);\n      } else {\n        // eslint-disable-next-line no-console\n        console.warn('React-Modal: \"parentSelector\" prop did not returned any DOM ' + \"element. Make sure that the parent element is unmounted to \" + \"avoid any memory leaks.\");\n      }\n    }, _this.portalRef = function (ref) {\n      _this.portal = ref;\n    }, _this.renderPortal = function (props) {\n      var createPortal = getCreatePortal();\n      var portal = createPortal(_this, _react2.default.createElement(_ModalPortal2.default, _extends({ defaultStyles: Modal.defaultStyles }, props)), _this.node);\n      _this.portalRef(portal);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!_safeHTMLElement.canUseDOM) return;\n\n      if (!isReact16) {\n        this.node = document.createElement(\"div\");\n      }\n      this.node.className = this.props.portalClassName;\n\n      var parent = getParentElement(this.props.parentSelector);\n      parent.appendChild(this.node);\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate(prevProps) {\n      var prevParent = getParentElement(prevProps.parentSelector);\n      var nextParent = getParentElement(this.props.parentSelector);\n      return { prevParent: prevParent, nextParent: nextParent };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, _, snapshot) {\n      if (!_safeHTMLElement.canUseDOM) return;\n      var _props = this.props,\n          isOpen = _props.isOpen,\n          portalClassName = _props.portalClassName;\n\n\n      if (prevProps.portalClassName !== portalClassName) {\n        this.node.className = portalClassName;\n      }\n\n      var prevParent = snapshot.prevParent,\n          nextParent = snapshot.nextParent;\n\n      if (nextParent !== prevParent) {\n        prevParent.removeChild(this.node);\n        nextParent.appendChild(this.node);\n      }\n\n      // Stop unnecessary renders if modal is remaining closed\n      if (!prevProps.isOpen && !isOpen) return;\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (!_safeHTMLElement.canUseDOM || !this.node || !this.portal) return;\n\n      var state = this.portal.state;\n      var now = Date.now();\n      var closesAt = state.isOpen && this.props.closeTimeoutMS && (state.closesAt || now + this.props.closeTimeoutMS);\n\n      if (closesAt) {\n        if (!state.beforeClose) {\n          this.portal.closeWithTimeout();\n        }\n\n        setTimeout(this.removePortal, closesAt - now);\n      } else {\n        this.removePortal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!_safeHTMLElement.canUseDOM || !isReact16) {\n        return null;\n      }\n\n      if (!this.node && isReact16) {\n        this.node = document.createElement(\"div\");\n      }\n\n      var createPortal = getCreatePortal();\n      return createPortal(_react2.default.createElement(_ModalPortal2.default, _extends({\n        ref: this.portalRef,\n        defaultStyles: Modal.defaultStyles\n      }, this.props)), this.node);\n    }\n  }], [{\n    key: \"setAppElement\",\n    value: function setAppElement(element) {\n      ariaAppHider.setElement(element);\n    }\n\n    /* eslint-disable react/no-unused-prop-types */\n\n    /* eslint-enable react/no-unused-prop-types */\n\n  }]);\n\n  return Modal;\n}(_react.Component);\n\nModal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  portalClassName: _propTypes2.default.string,\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  appElement: _propTypes2.default.instanceOf(_safeHTMLElement2.default),\n  onAfterOpen: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  ariaHideApp: _propTypes2.default.bool,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  parentSelector: _propTypes2.default.func,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func\n};\nModal.defaultProps = {\n  isOpen: false,\n  portalClassName: portalClassName,\n  bodyOpenClassName: bodyOpenClassName,\n  role: \"dialog\",\n  ariaHideApp: true,\n  closeTimeoutMS: 0,\n  shouldFocusAfterRender: true,\n  shouldCloseOnEsc: true,\n  shouldCloseOnOverlayClick: true,\n  shouldReturnFocusAfterClose: true,\n  preventScroll: false,\n  parentSelector: function parentSelector() {\n    return document.body;\n  },\n  overlayElement: function overlayElement(props, contentEl) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      contentEl\n    );\n  },\n  contentElement: function contentElement(props, children) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      children\n    );\n  }\n};\nModal.defaultStyles = {\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(255, 255, 255, 0.75)\"\n  },\n  content: {\n    position: \"absolute\",\n    top: \"40px\",\n    left: \"40px\",\n    right: \"40px\",\n    bottom: \"40px\",\n    border: \"1px solid #ccc\",\n    background: \"#fff\",\n    overflow: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    borderRadius: \"4px\",\n    outline: \"none\",\n    padding: \"20px\"\n  }\n};\n\n\n(0, _reactLifecyclesCompat.polyfill)(Modal);\n\nexports.default = Modal;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _focusManager = require(\"../helpers/focusManager\");\n\nvar focusManager = _interopRequireWildcard(_focusManager);\n\nvar _scopeTab = require(\"../helpers/scopeTab\");\n\nvar _scopeTab2 = _interopRequireDefault(_scopeTab);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _classList = require(\"../helpers/classList\");\n\nvar classList = _interopRequireWildcard(_classList);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _portalOpenInstances = require(\"../helpers/portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nrequire(\"../helpers/bodyTrap\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// so that our CSS is statically analyzable\nvar CLASS_NAMES = {\n  overlay: \"ReactModal__Overlay\",\n  content: \"ReactModal__Content\"\n};\n\nvar TAB_KEY = 9;\nvar ESC_KEY = 27;\n\nvar ariaHiddenInstances = 0;\n\nvar ModalPortal = function (_Component) {\n  _inherits(ModalPortal, _Component);\n\n  function ModalPortal(props) {\n    _classCallCheck(this, ModalPortal);\n\n    var _this = _possibleConstructorReturn(this, (ModalPortal.__proto__ || Object.getPrototypeOf(ModalPortal)).call(this, props));\n\n    _this.setOverlayRef = function (overlay) {\n      _this.overlay = overlay;\n      _this.props.overlayRef && _this.props.overlayRef(overlay);\n    };\n\n    _this.setContentRef = function (content) {\n      _this.content = content;\n      _this.props.contentRef && _this.props.contentRef(content);\n    };\n\n    _this.afterClose = function () {\n      var _this$props = _this.props,\n          appElement = _this$props.appElement,\n          ariaHideApp = _this$props.ariaHideApp,\n          htmlOpenClassName = _this$props.htmlOpenClassName,\n          bodyOpenClassName = _this$props.bodyOpenClassName;\n\n      // Remove classes.\n\n      bodyOpenClassName && classList.remove(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.remove(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      // Reset aria-hidden attribute if all modals have been removed\n      if (ariaHideApp && ariaHiddenInstances > 0) {\n        ariaHiddenInstances -= 1;\n\n        if (ariaHiddenInstances === 0) {\n          ariaAppHider.show(appElement);\n        }\n      }\n\n      if (_this.props.shouldFocusAfterRender) {\n        if (_this.props.shouldReturnFocusAfterClose) {\n          focusManager.returnFocus(_this.props.preventScroll);\n          focusManager.teardownScopedFocus();\n        } else {\n          focusManager.popWithoutFocus();\n        }\n      }\n\n      if (_this.props.onAfterClose) {\n        _this.props.onAfterClose();\n      }\n\n      _portalOpenInstances2.default.deregister(_this);\n    };\n\n    _this.open = function () {\n      _this.beforeOpen();\n      if (_this.state.afterOpen && _this.state.beforeClose) {\n        clearTimeout(_this.closeTimer);\n        _this.setState({ beforeClose: false });\n      } else {\n        if (_this.props.shouldFocusAfterRender) {\n          focusManager.setupScopedFocus(_this.node);\n          focusManager.markForFocusLater();\n        }\n\n        _this.setState({ isOpen: true }, function () {\n          _this.setState({ afterOpen: true });\n\n          if (_this.props.isOpen && _this.props.onAfterOpen) {\n            _this.props.onAfterOpen({\n              overlayEl: _this.overlay,\n              contentEl: _this.content\n            });\n          }\n        });\n      }\n    };\n\n    _this.close = function () {\n      if (_this.props.closeTimeoutMS > 0) {\n        _this.closeWithTimeout();\n      } else {\n        _this.closeWithoutTimeout();\n      }\n    };\n\n    _this.focusContent = function () {\n      return _this.content && !_this.contentHasFocus() && _this.content.focus({ preventScroll: true });\n    };\n\n    _this.closeWithTimeout = function () {\n      var closesAt = Date.now() + _this.props.closeTimeoutMS;\n      _this.setState({ beforeClose: true, closesAt: closesAt }, function () {\n        _this.closeTimer = setTimeout(_this.closeWithoutTimeout, _this.state.closesAt - Date.now());\n      });\n    };\n\n    _this.closeWithoutTimeout = function () {\n      _this.setState({\n        beforeClose: false,\n        isOpen: false,\n        afterOpen: false,\n        closesAt: null\n      }, _this.afterClose);\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (event.keyCode === TAB_KEY) {\n        (0, _scopeTab2.default)(_this.content, event);\n      }\n\n      if (_this.props.shouldCloseOnEsc && event.keyCode === ESC_KEY) {\n        event.stopPropagation();\n        _this.requestClose(event);\n      }\n    };\n\n    _this.handleOverlayOnClick = function (event) {\n      if (_this.shouldClose === null) {\n        _this.shouldClose = true;\n      }\n\n      if (_this.shouldClose && _this.props.shouldCloseOnOverlayClick) {\n        if (_this.ownerHandlesClose()) {\n          _this.requestClose(event);\n        } else {\n          _this.focusContent();\n        }\n      }\n      _this.shouldClose = null;\n    };\n\n    _this.handleContentOnMouseUp = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleOverlayOnMouseDown = function (event) {\n      if (!_this.props.shouldCloseOnOverlayClick && event.target == _this.overlay) {\n        event.preventDefault();\n      }\n    };\n\n    _this.handleContentOnClick = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleContentOnMouseDown = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.requestClose = function (event) {\n      return _this.ownerHandlesClose() && _this.props.onRequestClose(event);\n    };\n\n    _this.ownerHandlesClose = function () {\n      return _this.props.onRequestClose;\n    };\n\n    _this.shouldBeClosed = function () {\n      return !_this.state.isOpen && !_this.state.beforeClose;\n    };\n\n    _this.contentHasFocus = function () {\n      return document.activeElement === _this.content || _this.content.contains(document.activeElement);\n    };\n\n    _this.buildClassName = function (which, additional) {\n      var classNames = (typeof additional === \"undefined\" ? \"undefined\" : _typeof(additional)) === \"object\" ? additional : {\n        base: CLASS_NAMES[which],\n        afterOpen: CLASS_NAMES[which] + \"--after-open\",\n        beforeClose: CLASS_NAMES[which] + \"--before-close\"\n      };\n      var className = classNames.base;\n      if (_this.state.afterOpen) {\n        className = className + \" \" + classNames.afterOpen;\n      }\n      if (_this.state.beforeClose) {\n        className = className + \" \" + classNames.beforeClose;\n      }\n      return typeof additional === \"string\" && additional ? className + \" \" + additional : className;\n    };\n\n    _this.attributesFromObject = function (prefix, items) {\n      return Object.keys(items).reduce(function (acc, name) {\n        acc[prefix + \"-\" + name] = items[name];\n        return acc;\n      }, {});\n    };\n\n    _this.state = {\n      afterOpen: false,\n      beforeClose: false\n    };\n\n    _this.shouldClose = null;\n    _this.moveFromContentToOverlay = null;\n    return _this;\n  }\n\n  _createClass(ModalPortal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isOpen) {\n        this.open();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (prevProps.bodyOpenClassName !== this.props.bodyOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"bodyOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n        if (prevProps.htmlOpenClassName !== this.props.htmlOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"htmlOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n      }\n\n      if (this.props.isOpen && !prevProps.isOpen) {\n        this.open();\n      } else if (!this.props.isOpen && prevProps.isOpen) {\n        this.close();\n      }\n\n      // Focus only needs to be set once when the modal is being opened\n      if (this.props.shouldFocusAfterRender && this.state.isOpen && !prevState.isOpen) {\n        this.focusContent();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.state.isOpen) {\n        this.afterClose();\n      }\n      clearTimeout(this.closeTimer);\n    }\n  }, {\n    key: \"beforeOpen\",\n    value: function beforeOpen() {\n      var _props = this.props,\n          appElement = _props.appElement,\n          ariaHideApp = _props.ariaHideApp,\n          htmlOpenClassName = _props.htmlOpenClassName,\n          bodyOpenClassName = _props.bodyOpenClassName;\n\n      // Add classes.\n\n      bodyOpenClassName && classList.add(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.add(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      if (ariaHideApp) {\n        ariaHiddenInstances += 1;\n        ariaAppHider.hide(appElement);\n      }\n\n      _portalOpenInstances2.default.register(this);\n    }\n\n    // Don't steal focus from inner elements\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          id = _props2.id,\n          className = _props2.className,\n          overlayClassName = _props2.overlayClassName,\n          defaultStyles = _props2.defaultStyles,\n          children = _props2.children;\n\n      var contentStyles = className ? {} : defaultStyles.content;\n      var overlayStyles = overlayClassName ? {} : defaultStyles.overlay;\n\n      if (this.shouldBeClosed()) {\n        return null;\n      }\n\n      var overlayProps = {\n        ref: this.setOverlayRef,\n        className: this.buildClassName(\"overlay\", overlayClassName),\n        style: _extends({}, overlayStyles, this.props.style.overlay),\n        onClick: this.handleOverlayOnClick,\n        onMouseDown: this.handleOverlayOnMouseDown\n      };\n\n      var contentProps = _extends({\n        id: id,\n        ref: this.setContentRef,\n        style: _extends({}, contentStyles, this.props.style.content),\n        className: this.buildClassName(\"content\", className),\n        tabIndex: \"-1\",\n        onKeyDown: this.handleKeyDown,\n        onMouseDown: this.handleContentOnMouseDown,\n        onMouseUp: this.handleContentOnMouseUp,\n        onClick: this.handleContentOnClick,\n        role: this.props.role,\n        \"aria-label\": this.props.contentLabel\n      }, this.attributesFromObject(\"aria\", _extends({ modal: true }, this.props.aria)), this.attributesFromObject(\"data\", this.props.data || {}), {\n        \"data-testid\": this.props.testId\n      });\n\n      var contentElement = this.props.contentElement(contentProps, children);\n      return this.props.overlayElement(overlayProps, contentElement);\n    }\n  }]);\n\n  return ModalPortal;\n}(_react.Component);\n\nModalPortal.defaultProps = {\n  style: {\n    overlay: {},\n    content: {}\n  },\n  defaultStyles: {}\n};\nModalPortal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  defaultStyles: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  ariaHideApp: _propTypes2.default.bool,\n  appElement: _propTypes2.default.instanceOf(_safeHTMLElement2.default),\n  onAfterOpen: _propTypes2.default.func,\n  onAfterClose: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  children: _propTypes2.default.node,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func,\n  testId: _propTypes2.default.string\n};\nexports.default = ModalPortal;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleBlur = handleBlur;\nexports.handleFocus = handleFocus;\nexports.markForFocusLater = markForFocusLater;\nexports.returnFocus = returnFocus;\nexports.popWithoutFocus = popWithoutFocus;\nexports.setupScopedFocus = setupScopedFocus;\nexports.teardownScopedFocus = teardownScopedFocus;\n\nvar _tabbable = require(\"../helpers/tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar focusLaterElements = [];\nvar modalElement = null;\nvar needToFocus = false;\n\nfunction handleBlur() {\n  needToFocus = true;\n}\n\nfunction handleFocus() {\n  if (needToFocus) {\n    needToFocus = false;\n    if (!modalElement) {\n      return;\n    }\n    // need to see how jQuery shims document.on('focusin') so we don't need the\n    // setTimeout, firefox doesn't support focusin, if it did, we could focus\n    // the element outside of a setTimeout. Side-effect of this implementation\n    // is that the document.body gets focus, and then we focus our element right\n    // after, seems fine.\n    setTimeout(function () {\n      if (modalElement.contains(document.activeElement)) {\n        return;\n      }\n      var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;\n      el.focus();\n    }, 0);\n  }\n}\n\nfunction markForFocusLater() {\n  focusLaterElements.push(document.activeElement);\n}\n\n/* eslint-disable no-console */\nfunction returnFocus() {\n  var preventScroll = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  var toFocus = null;\n  try {\n    if (focusLaterElements.length !== 0) {\n      toFocus = focusLaterElements.pop();\n      toFocus.focus({ preventScroll: preventScroll });\n    }\n    return;\n  } catch (e) {\n    console.warn([\"You tried to return focus to\", toFocus, \"but it is not in the DOM anymore\"].join(\" \"));\n  }\n}\n/* eslint-enable no-console */\n\nfunction popWithoutFocus() {\n  focusLaterElements.length > 0 && focusLaterElements.pop();\n}\n\nfunction setupScopedFocus(element) {\n  modalElement = element;\n\n  if (window.addEventListener) {\n    window.addEventListener(\"blur\", handleBlur, false);\n    document.addEventListener(\"focus\", handleFocus, true);\n  } else {\n    window.attachEvent(\"onBlur\", handleBlur);\n    document.attachEvent(\"onFocus\", handleFocus);\n  }\n}\n\nfunction teardownScopedFocus() {\n  modalElement = null;\n\n  if (window.addEventListener) {\n    window.removeEventListener(\"blur\", handleBlur);\n    document.removeEventListener(\"focus\", handleFocus);\n  } else {\n    window.detachEvent(\"onBlur\", handleBlur);\n    document.detachEvent(\"onFocus\", handleFocus);\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = scopeTab;\n\nvar _tabbable = require(\"./tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction scopeTab(node, event) {\n  var tabbable = (0, _tabbable2.default)(node);\n\n  if (!tabbable.length) {\n    // Do nothing, since there are no elements that can receive focus.\n    event.preventDefault();\n    return;\n  }\n\n  var target = void 0;\n\n  var shiftKey = event.shiftKey;\n  var head = tabbable[0];\n  var tail = tabbable[tabbable.length - 1];\n\n  // proceed with default browser behavior on tab.\n  // Focus on last element on shift + tab.\n  if (node === document.activeElement) {\n    if (!shiftKey) return;\n    target = tail;\n  }\n\n  if (tail === document.activeElement && !shiftKey) {\n    target = head;\n  }\n\n  if (head === document.activeElement && shiftKey) {\n    target = tail;\n  }\n\n  if (target) {\n    event.preventDefault();\n    target.focus();\n    return;\n  }\n\n  // Safari radio issue.\n  //\n  // Safari does not move the focus to the radio button,\n  // so we need to force it to really walk through all elements.\n  //\n  // This is very error prone, since we are trying to guess\n  // if it is a safari browser from the first occurence between\n  // chrome or safari.\n  //\n  // The chrome user agent contains the first ocurrence\n  // as the 'chrome/version' and later the 'safari/version'.\n  var checkSafari = /(\\bChrome\\b|\\bSafari\\b)\\//.exec(navigator.userAgent);\n  var isSafariDesktop = checkSafari != null && checkSafari[1] != \"Chrome\" && /\\biPod\\b|\\biPad\\b/g.exec(navigator.userAgent) == null;\n\n  // If we are not in safari desktop, let the browser control\n  // the focus\n  if (!isSafariDesktop) return;\n\n  var x = tabbable.indexOf(document.activeElement);\n\n  if (x > -1) {\n    x += shiftKey ? -1 : 1;\n  }\n\n  target = tabbable[x];\n\n  // If the tabbable element does not exist,\n  // focus head/tail based on shiftKey\n  if (typeof target === \"undefined\") {\n    event.preventDefault();\n    target = shiftKey ? tail : head;\n    target.focus();\n    return;\n  }\n\n  event.preventDefault();\n\n  target.focus();\n}\nmodule.exports = exports[\"default\"];","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dumpClassLists = dumpClassLists;\nvar htmlClassList = {};\nvar docBodyClassList = {};\n\nfunction dumpClassLists() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var classes = document.getElementsByTagName(\"html\")[0].className;\n    var buffer = \"Show tracked classes:\\n\\n\";\n\n    buffer += \"<html /> (\" + classes + \"):\\n\";\n    for (var x in htmlClassList) {\n      buffer += \"  \" + x + \" \" + htmlClassList[x] + \"\\n\";\n    }\n\n    classes = document.body.className;\n\n    // eslint-disable-next-line max-len\n    buffer += \"\\n\\ndoc.body (\" + classes + \"):\\n\";\n    for (var _x in docBodyClassList) {\n      buffer += \"  \" + _x + \" \" + docBodyClassList[_x] + \"\\n\";\n    }\n\n    buffer += \"\\n\";\n\n    // eslint-disable-next-line no-console\n    console.log(buffer);\n  }\n}\n\n/**\n * Track the number of reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar incrementReference = function incrementReference(poll, className) {\n  if (!poll[className]) {\n    poll[className] = 0;\n  }\n  poll[className] += 1;\n  return className;\n};\n\n/**\n * Drop the reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar decrementReference = function decrementReference(poll, className) {\n  if (poll[className]) {\n    poll[className] -= 1;\n  }\n  return className;\n};\n\n/**\n * Track a class and add to the given class list.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be tracked.\n */\nvar trackClass = function trackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    incrementReference(poll, className);\n    classListRef.add(className);\n  });\n};\n\n/**\n * Untrack a class and remove from the given class list if the reference\n * reaches 0.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be untracked.\n */\nvar untrackClass = function untrackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    decrementReference(poll, className);\n    poll[className] === 0 && classListRef.remove(className);\n  });\n};\n\n/**\n * Public inferface to add classes to the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar add = exports.add = function add(element, classString) {\n  return trackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};\n\n/**\n * Public inferface to remove classes from the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar remove = exports.remove = function remove(element, classString) {\n  return untrackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};","\"use strict\";\n\nvar _portalOpenInstances = require(\"./portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Body focus trap see Issue #742\n\nvar before = void 0,\n    after = void 0,\n    instances = [];\n\nfunction focusContent() {\n  if (instances.length === 0) {\n    if (process.env.NODE_ENV !== \"production\") {\n      // eslint-disable-next-line no-console\n      console.warn(\"React-Modal: Open instances > 0 expected\");\n    }\n    return;\n  }\n  instances[instances.length - 1].focusContent();\n}\n\nfunction bodyTrap(eventType, openInstances) {\n  if (!before || !after) {\n    before = document.createElement(\"div\");\n    before.setAttribute(\"data-react-modal-body-trap\", \"\");\n    before.style.position = \"absolute\";\n    before.style.opacity = \"0\";\n    before.setAttribute(\"tabindex\", \"0\");\n    before.addEventListener(\"focus\", focusContent);\n    after = before.cloneNode();\n    after.addEventListener(\"focus\", focusContent);\n  }\n\n  instances = openInstances;\n\n  if (instances.length > 0) {\n    // Add focus trap\n    if (document.body.firstChild !== before) {\n      document.body.insertBefore(before, document.body.firstChild);\n    }\n    if (document.body.lastChild !== after) {\n      document.body.appendChild(after);\n    }\n  } else {\n    // Remove focus trap\n    if (before.parentElement) {\n      before.parentElement.removeChild(before);\n    }\n    if (after.parentElement) {\n      after.parentElement.removeChild(after);\n    }\n  }\n}\n\n_portalOpenInstances2.default.subscribe(bodyTrap);","module.exports = require(\"regenerator-runtime\");\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Async = require(\"./Async\");\n\nvar _Creatable = require(\"./Creatable\");\n\nvar _stateManager = _interopRequireDefault(require(\"./stateManager\"));\n\nvar _Select = _interopRequireDefault(require(\"./Select\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SelectCreatable = (0, _Creatable.makeCreatableSelect)(_Select.default);\nvar SelectCreatableState = (0, _stateManager.default)(SelectCreatable);\n\nvar _default = (0, _Async.makeAsyncSelect)(SelectCreatableState);\n\nexports.default = _default;","export default {\n  GLOBAL: {\n    HIDE: '__react_tooltip_hide_event',\n    REBUILD: '__react_tooltip_rebuild_event',\n    SHOW: '__react_tooltip_show_event'\n  }\n};\n","/**\n * Static methods for react-tooltip\n */\nimport CONSTANT from '../constant';\n\nconst dispatchGlobalEvent = (eventName, opts) => {\n  // Compatible with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent(eventName, false, true, opts);\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport default function(target) {\n  /**\n   * Hide all tooltip\n   * @trigger ReactTooltip.hide()\n   */\n  target.hide = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.HIDE, { target });\n  };\n\n  /**\n   * Rebuild all tooltip\n   * @trigger ReactTooltip.rebuild()\n   */\n  target.rebuild = () => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.REBUILD);\n  };\n\n  /**\n   * Show specific tooltip\n   * @trigger ReactTooltip.show()\n   */\n  target.show = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.SHOW, { target });\n  };\n\n  target.prototype.globalRebuild = function() {\n    if (this.mount) {\n      this.unbindListener();\n      this.bindListener();\n    }\n  };\n\n  target.prototype.globalShow = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      // Create a fake event, specific show will limit the type to `solid`\n      // only `float` type cares e.clientX e.clientY\n      this.showTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        true\n      );\n    }\n  };\n\n  target.prototype.globalHide = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      this.hideTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        hasTarget\n      );\n    }\n  };\n}\n","/**\n * Custom events to control showing and hiding of tooltip\n *\n * @attributes\n * - `event` {String}\n * - `eventOff` {String}\n */\n\nexport const checkStatus = function(dataEventOff, e) {\n  const { show } = this.state;\n  const { id } = this.props;\n  const isCapture = this.isCapture(e.currentTarget);\n  const currentItem = e.currentTarget.getAttribute('currentItem');\n\n  if (!isCapture) e.stopPropagation();\n  if (show && currentItem === 'true') {\n    if (!dataEventOff) this.hideTooltip(e);\n  } else {\n    e.currentTarget.setAttribute('currentItem', 'true');\n    setUntargetItems(e.currentTarget, this.getTargetArray(id));\n    this.showTooltip(e);\n  }\n};\n\nconst setUntargetItems = function(currentTarget, targetArray) {\n  for (let i = 0; i < targetArray.length; i++) {\n    if (currentTarget !== targetArray[i]) {\n      targetArray[i].setAttribute('currentItem', 'false');\n    } else {\n      targetArray[i].setAttribute('currentItem', 'true');\n    }\n  }\n};\n\nconst customListeners = {\n  id: '9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf',\n  set(target, event, listener) {\n    if (this.id in target) {\n      const map = target[this.id];\n      map[event] = listener;\n    } else {\n      // this is workaround for WeakMap, which is not supported in older browsers, such as IE\n      Object.defineProperty(target, this.id, {\n        configurable: true,\n        value: { [event]: listener }\n      });\n    }\n  },\n  get(target, event) {\n    const map = target[this.id];\n    if (map !== undefined) {\n      return map[event];\n    }\n  }\n};\n\nexport default function(target) {\n  target.prototype.isCustomEvent = function(ele) {\n    const { event } = this.state;\n    return event || !!ele.getAttribute('data-event');\n  };\n\n  /* Bind listener for custom event */\n  target.prototype.customBindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = ele.getAttribute('data-event') || event;\n    const dataEventOff = ele.getAttribute('data-event-off') || eventOff;\n\n    dataEvent.split(' ').forEach(event => {\n      ele.removeEventListener(event, customListeners.get(ele, event));\n      const customListener = checkStatus.bind(this, dataEventOff);\n      customListeners.set(ele, event, customListener);\n      ele.addEventListener(event, customListener, false);\n    });\n    if (dataEventOff) {\n      dataEventOff.split(' ').forEach(event => {\n        ele.removeEventListener(event, this.hideTooltip);\n        ele.addEventListener(event, this.hideTooltip, false);\n      });\n    }\n  };\n\n  /* Unbind listener for custom event */\n  target.prototype.customUnbindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = event || ele.getAttribute('data-event');\n    const dataEventOff = eventOff || ele.getAttribute('data-event-off');\n\n    ele.removeEventListener(dataEvent, customListeners.get(ele, event));\n    if (dataEventOff) ele.removeEventListener(dataEventOff, this.hideTooltip);\n  };\n}\n","/**\n * Util method to get effect\n */\nimport { checkStatus } from './customEvent';\n\nconst makeProxy = e => {\n  const proxy = {};\n  for (const key in e) {\n    if (typeof e[key] === 'function') {\n      proxy[key] = e[key].bind(e);\n    } else {\n      proxy[key] = e[key];\n    }\n  }\n  return proxy;\n};\n\nconst bodyListener = function(callback, options, e) {\n  const { respectEffect = false, customEvent = false } = options;\n  const { id } = this.props;\n\n  const tip = e.target.getAttribute('data-tip') || null;\n  const forId = e.target.getAttribute('data-for') || null;\n\n  const target = e.target;\n  if (this.isCustomEvent(target) && !customEvent) {\n    return;\n  }\n\n  const isTargetBelongsToTooltip =\n    (id == null && forId == null) || forId === id;\n\n  if (\n    tip != null &&\n    (!respectEffect || this.getEffect(target) === 'float') &&\n    isTargetBelongsToTooltip\n  ) {\n    const proxy = makeProxy(e);\n    proxy.currentTarget = target;\n    callback(proxy);\n  }\n};\n\nconst findCustomEvents = (targetArray, dataAttribute) => {\n  const events = {};\n  targetArray.forEach(target => {\n    const event = target.getAttribute(dataAttribute);\n    if (event) event.split(' ').forEach(event => (events[event] = true));\n  });\n\n  return events;\n};\n\nconst getBody = () => document.getElementsByTagName('body')[0];\n\nexport default function(target) {\n  target.prototype.isBodyMode = function() {\n    return !!this.props.bodyMode;\n  };\n\n  target.prototype.bindBodyListener = function(targetArray) {\n    const {\n      event,\n      eventOff,\n      possibleCustomEvents,\n      possibleCustomEventsOff\n    } = this.state;\n    const body = getBody();\n\n    const customEvents = findCustomEvents(targetArray, 'data-event');\n    const customEventsOff = findCustomEvents(targetArray, 'data-event-off');\n\n    if (event != null) customEvents[event] = true;\n    if (eventOff != null) customEventsOff[eventOff] = true;\n    possibleCustomEvents\n      .split(' ')\n      .forEach(event => (customEvents[event] = true));\n    possibleCustomEventsOff\n      .split(' ')\n      .forEach(event => (customEventsOff[event] = true));\n\n    this.unbindBodyListener(body);\n\n    const listeners = (this.bodyModeListeners = {});\n    if (event == null) {\n      listeners.mouseover = bodyListener.bind(this, this.showTooltip, {});\n      listeners.mousemove = bodyListener.bind(this, this.updateTooltip, {\n        respectEffect: true\n      });\n      listeners.mouseout = bodyListener.bind(this, this.hideTooltip, {});\n    }\n\n    for (const event in customEvents) {\n      listeners[event] = bodyListener.bind(\n        this,\n        e => {\n          const targetEventOff =\n            e.currentTarget.getAttribute('data-event-off') || eventOff;\n          checkStatus.call(this, targetEventOff, e);\n        },\n        { customEvent: true }\n      );\n    }\n    for (const event in customEventsOff) {\n      listeners[event] = bodyListener.bind(this, this.hideTooltip, {\n        customEvent: true\n      });\n    }\n    for (const event in listeners) {\n      body.addEventListener(event, listeners[event]);\n    }\n  };\n\n  target.prototype.unbindBodyListener = function(body) {\n    body = body || getBody();\n\n    const listeners = this.bodyModeListeners;\n    for (const event in listeners) {\n      body.removeEventListener(event, listeners[event]);\n    }\n  };\n}\n","/**\n * Calculate the position of tooltip\n *\n * @params\n * - `e` {Event} the event of current mouse\n * - `target` {Element} the currentTarget of the event\n * - `node` {DOM} the react-tooltip object\n * - `place` {String} top / right / bottom / left\n * - `effect` {String} float / solid\n * - `offset` {Object} the offset to default position\n *\n * @return {Object}\n * - `isNewState` {Bool} required\n * - `newState` {Object}\n * - `position` {Object} {left: {Number}, top: {Number}}\n */\nexport default function(e, target, node, place, desiredPlace, effect, offset) {\n  const { width: tipWidth, height: tipHeight } = getDimensions(node);\n\n  const { width: targetWidth, height: targetHeight } = getDimensions(target);\n\n  const { mouseX, mouseY } = getCurrentOffset(e, target, effect);\n  const defaultOffset = getDefaultPosition(\n    effect,\n    targetWidth,\n    targetHeight,\n    tipWidth,\n    tipHeight\n  );\n  const { extraOffsetX, extraOffsetY } = calculateOffset(offset);\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  const { parentTop, parentLeft } = getParent(node);\n\n  // Get the edge offset of the tooltip\n  const getTipOffsetLeft = place => {\n    const offsetX = defaultOffset[place].l;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetRight = place => {\n    const offsetX = defaultOffset[place].r;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetTop = place => {\n    const offsetY = defaultOffset[place].t;\n    return mouseY + offsetY + extraOffsetY;\n  };\n  const getTipOffsetBottom = place => {\n    const offsetY = defaultOffset[place].b;\n    return mouseY + offsetY + extraOffsetY;\n  };\n\n  //\n  // Functions to test whether the tooltip's sides are inside\n  // the client window for a given orientation p\n  //\n  //  _____________\n  // |             | <-- Right side\n  // | p = 'left'  |\\\n  // |             |/  |\\\n  // |_____________|   |_\\  <-- Mouse\n  //      / \\           |\n  //       |\n  //       |\n  //  Bottom side\n  //\n  const outsideLeft = p => getTipOffsetLeft(p) < 0;\n  const outsideRight = p => getTipOffsetRight(p) > windowWidth;\n  const outsideTop = p => getTipOffsetTop(p) < 0;\n  const outsideBottom = p => getTipOffsetBottom(p) > windowHeight;\n\n  // Check whether the tooltip with orientation p is completely inside the client window\n  const outside = p =>\n    outsideLeft(p) || outsideRight(p) || outsideTop(p) || outsideBottom(p);\n  const inside = p => !outside(p);\n\n  const placesList = ['top', 'bottom', 'left', 'right'];\n  const insideList = [];\n  for (let i = 0; i < 4; i++) {\n    const p = placesList[i];\n    if (inside(p)) {\n      insideList.push(p);\n    }\n  }\n\n  let isNewState = false;\n  let newPlace;\n  const shouldUpdatePlace = desiredPlace !== place;\n  if (inside(desiredPlace) && shouldUpdatePlace) {\n    isNewState = true;\n    newPlace = desiredPlace;\n  } else if (insideList.length > 0 && outside(desiredPlace) && outside(place)) {\n    isNewState = true;\n    newPlace = insideList[0];\n  }\n\n  if (isNewState) {\n    return {\n      isNewState: true,\n      newState: { place: newPlace }\n    };\n  }\n\n  return {\n    isNewState: false,\n    position: {\n      left: parseInt(getTipOffsetLeft(place) - parentLeft, 10),\n      top: parseInt(getTipOffsetTop(place) - parentTop, 10)\n    }\n  };\n}\n\nconst getDimensions = node => {\n  const { height, width } = node.getBoundingClientRect();\n  return {\n    height: parseInt(height, 10),\n    width: parseInt(width, 10)\n  };\n};\n\n// Get current mouse offset\nconst getCurrentOffset = (e, currentTarget, effect) => {\n  const boundingClientRect = currentTarget.getBoundingClientRect();\n  const targetTop = boundingClientRect.top;\n  const targetLeft = boundingClientRect.left;\n  const { width: targetWidth, height: targetHeight } = getDimensions(\n    currentTarget\n  );\n\n  if (effect === 'float') {\n    return {\n      mouseX: e.clientX,\n      mouseY: e.clientY\n    };\n  }\n  return {\n    mouseX: targetLeft + targetWidth / 2,\n    mouseY: targetTop + targetHeight / 2\n  };\n};\n\n// List all possibility of tooltip final offset\n// This is useful in judging if it is necessary for tooltip to switch position when out of window\nconst getDefaultPosition = (\n  effect,\n  targetWidth,\n  targetHeight,\n  tipWidth,\n  tipHeight\n) => {\n  let top;\n  let right;\n  let bottom;\n  let left;\n  const disToMouse = 3;\n  const triangleHeight = 2;\n  const cursorHeight = 12; // Optimize for float bottom only, cause the cursor will hide the tooltip\n\n  if (effect === 'float') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(tipHeight + disToMouse + triangleHeight),\n      b: -disToMouse\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: disToMouse + cursorHeight,\n      b: tipHeight + disToMouse + triangleHeight + cursorHeight\n    };\n    left = {\n      l: -(tipWidth + disToMouse + triangleHeight),\n      r: -disToMouse,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: disToMouse,\n      r: tipWidth + disToMouse + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  } else if (effect === 'solid') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(targetHeight / 2 + tipHeight + triangleHeight),\n      b: -(targetHeight / 2)\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: targetHeight / 2,\n      b: targetHeight / 2 + tipHeight + triangleHeight\n    };\n    left = {\n      l: -(tipWidth + targetWidth / 2 + triangleHeight),\n      r: -(targetWidth / 2),\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: targetWidth / 2,\n      r: tipWidth + targetWidth / 2 + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  }\n\n  return { top, bottom, left, right };\n};\n\n// Consider additional offset into position calculation\nconst calculateOffset = offset => {\n  let extraOffsetX = 0;\n  let extraOffsetY = 0;\n\n  if (Object.prototype.toString.apply(offset) === '[object String]') {\n    offset = JSON.parse(offset.toString().replace(/'/g, '\"'));\n  }\n  for (const key in offset) {\n    if (key === 'top') {\n      extraOffsetY -= parseInt(offset[key], 10);\n    } else if (key === 'bottom') {\n      extraOffsetY += parseInt(offset[key], 10);\n    } else if (key === 'left') {\n      extraOffsetX -= parseInt(offset[key], 10);\n    } else if (key === 'right') {\n      extraOffsetX += parseInt(offset[key], 10);\n    }\n  }\n\n  return { extraOffsetX, extraOffsetY };\n};\n\n// Get the offset of the parent elements\nconst getParent = currentTarget => {\n  let currentParent = currentTarget;\n  while (currentParent) {\n    const computedStyle = window.getComputedStyle(currentParent);\n    // transform and will-change: transform change the containing block\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_Block\n    if (\n      computedStyle.getPropertyValue('transform') !== 'none' ||\n      computedStyle.getPropertyValue('will-change') === 'transform'\n    )\n      break;\n    currentParent = currentParent.parentElement;\n  }\n\n  const parentTop =\n    (currentParent && currentParent.getBoundingClientRect().top) || 0;\n  const parentLeft =\n    (currentParent && currentParent.getBoundingClientRect().left) || 0;\n\n  return { parentTop, parentLeft };\n};\n","/**\n * To get the tooltip content\n * it may comes from data-tip or this.props.children\n * it should support multiline\n *\n * @params\n * - `tip` {String} value of data-tip\n * - `children` {ReactElement} this.props.children\n * - `multiline` {Any} could be Bool(true/false) or String('true'/'false')\n *\n * @return\n * - String or react component\n */\nimport React from 'react';\n\nexport default function(tip, children, getContent, multiline) {\n  if (children) return children;\n  if (getContent !== undefined && getContent !== null) return getContent; // getContent can be 0, '', etc.\n  if (getContent === null) return null; // Tip not exist and children is null or undefined\n\n  const regexp = /<br\\s*\\/?>/;\n  if (!multiline || multiline === 'false' || !regexp.test(tip)) {\n    // No trim(), so that user can keep their input\n    return tip;\n  }\n\n  // Multiline tooltip content\n  return tip.split(regexp).map((d, i) => {\n    return (\n      <span key={i} className=\"multi-line\">\n        {d}\n      </span>\n    );\n  });\n}\n","/**\n * Support aria- and role in ReactTooltip\n *\n * @params props {Object}\n * @return {Object}\n */\nexport function parseAria(props) {\n  const ariaObj = {};\n  Object.keys(props)\n    .filter(prop => {\n      // aria-xxx and role is acceptable\n      return /(^aria-\\w+$|^role$)/.test(prop);\n    })\n    .forEach(prop => {\n      ariaObj[prop] = props[prop];\n    });\n\n  return ariaObj;\n}\n","/**\n * Convert nodelist to array\n * @see https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/core/createArrayFromMixed.js#L24\n * NodeLists are functions in Safari\n */\n\nexport default function(nodeList) {\n  const length = nodeList.length;\n  if (nodeList.hasOwnProperty) {\n    return Array.prototype.slice.call(nodeList);\n  }\n  return new Array(length).fill().map(index => nodeList[index]);\n}\n","/**\n * Default pop-up style values (text color, background color).\n */\nconst defaultColors = {\n  dark: {\n    text: '#fff',\n    background: '#222',\n    border: 'transparent',\n    arrow: '#222'\n  },\n  success: {\n    text: '#fff',\n    background: '#8DC572',\n    border: 'transparent',\n    arrow: '#8DC572'\n  },\n  warning: {\n    text: '#fff',\n    background: '#F0AD4E',\n    border: 'transparent',\n    arrow: '#F0AD4E'\n  },\n  error: {\n    text: '#fff',\n    background: '#BE6464',\n    border: 'transparent',\n    arrow: '#BE6464'\n  },\n  info: {\n    text: '#fff',\n    background: '#337AB7',\n    border: 'transparent',\n    arrow: '#337AB7'\n  },\n  light: {\n    text: '#222',\n    background: '#fff',\n    border: 'transparent',\n    arrow: '#fff'\n  }\n};\n\nexport function getDefaultPopupColors(type) {\n  return defaultColors[type] ? { ...defaultColors[type] } : undefined;\n}\n","import { getDefaultPopupColors } from './defaultStyles';\n\n/**\n * Generates the specific tooltip style for use on render.\n */\nexport function generateTooltipStyle(uuid, customColors, type, hasBorder) {\n  return generateStyle(uuid, getPopupColors(customColors, type, hasBorder));\n}\n\n/**\n * Generates the tooltip style rules based on the element-specified \"data-type\" property.\n */\nfunction generateStyle(uuid, colors) {\n  const textColor = colors.text;\n  const backgroundColor = colors.background;\n  const borderColor = colors.border;\n  const arrowColor = colors.arrow;\n\n  return `\n  \t.${uuid} {\n\t    color: ${textColor};\n\t    background: ${backgroundColor};\n\t    border: 1px solid ${borderColor};\n  \t}\n\n  \t.${uuid}.place-top {\n        margin-top: -10px;\n    }\n    .${uuid}.place-top::before {\n        border-top: 8px solid ${borderColor};\n    }\n    .${uuid}.place-top::after {\n        border-left: 8px solid transparent;\n        border-right: 8px solid transparent;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -8px;\n        border-top-color: ${arrowColor};\n        border-top-style: solid;\n        border-top-width: 6px;\n    }\n\n    .${uuid}.place-bottom {\n        margin-top: 10px;\n    }\n    .${uuid}.place-bottom::before {\n        border-bottom: 8px solid ${borderColor};\n    }\n    .${uuid}.place-bottom::after {\n        border-left: 8px solid transparent;\n        border-right: 8px solid transparent;\n        top: -6px;\n        left: 50%;\n        margin-left: -8px;\n        border-bottom-color: ${arrowColor};\n        border-bottom-style: solid;\n        border-bottom-width: 6px;\n    }\n\n    .${uuid}.place-left {\n        margin-left: -10px;\n    }\n    .${uuid}.place-left::before {\n        border-left: 8px solid ${borderColor};\n    }\n    .${uuid}.place-left::after {\n        border-top: 5px solid transparent;\n        border-bottom: 5px solid transparent;\n        right: -6px;\n        top: 50%;\n        margin-top: -4px;\n        border-left-color: ${arrowColor};\n        border-left-style: solid;\n        border-left-width: 6px;\n    }\n\n    .${uuid}.place-right {\n        margin-left: 10px;\n    }\n    .${uuid}.place-right::before {\n        border-right: 8px solid ${borderColor};\n    }\n    .${uuid}.place-right::after {\n        border-top: 5px solid transparent;\n        border-bottom: 5px solid transparent;\n        left: -6px;\n        top: 50%;\n        margin-top: -4px;\n        border-right-color: ${arrowColor};\n        border-right-style: solid;\n        border-right-width: 6px;\n    }\n  `;\n}\n\nfunction getPopupColors(customColors, type, hasBorder) {\n  const textColor = customColors.text;\n  const backgroundColor = customColors.background;\n  const borderColor = customColors.border;\n  const arrowColor = customColors.arrow\n    ? customColors.arrow\n    : customColors.background;\n\n  const colors = getDefaultPopupColors(type);\n\n  if (textColor) {\n    colors.text = textColor;\n  }\n\n  if (backgroundColor) {\n    colors.background = backgroundColor;\n  }\n\n  if (hasBorder) {\n    if (borderColor) {\n      colors.border = borderColor;\n    } else {\n      colors.border = type === 'light' ? 'black' : 'white';\n    }\n  }\n\n  if (arrowColor) {\n    colors.arrow = arrowColor;\n  }\n\n  return colors;\n}\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var toObject = require('../internals/to-object');\n\nvar hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function hasOwn(it, key) {\n  return hasOwnProperty.call(toObject(it), key);\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- requied for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    if (wmhas.call(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (objectHas(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.12.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2021 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] < 4 ? 1 : match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject -- old IE */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  return !String(Symbol()) ||\n    // Chrome 38 Symbol has incorrect toString conversion\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_OUT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterOut\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterOut` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterOut: createMethod(7)\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","/**\n * Tracking target removing from DOM.\n * It's necessary to hide tooltip when it's target disappears.\n * Otherwise, the tooltip would be shown forever until another target\n * is triggered.\n *\n * If MutationObserver is not available, this feature just doesn't work.\n */\n\n// https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\nconst getMutationObserverClass = () => {\n  return (\n    window.MutationObserver ||\n    window.WebKitMutationObserver ||\n    window.MozMutationObserver\n  );\n};\n\nexport default function(target) {\n  target.prototype.bindRemovalTracker = function() {\n    const MutationObserver = getMutationObserverClass();\n    if (MutationObserver == null) return;\n\n    const observer = new MutationObserver(mutations => {\n      for (let m1 = 0; m1 < mutations.length; m1++) {\n        const mutation = mutations[m1];\n        for (let m2 = 0; m2 < mutation.removedNodes.length; m2++) {\n          const element = mutation.removedNodes[m2];\n          if (element === this.state.currentTarget) {\n            this.hideTooltip();\n            return;\n          }\n        }\n      }\n    });\n\n    observer.observe(window.document, { childList: true, subtree: true });\n\n    this.removalTracker = observer;\n  };\n\n  target.prototype.unbindRemovalTracker = function() {\n    if (this.removalTracker) {\n      this.removalTracker.disconnect();\n      this.removalTracker = null;\n    }\n  };\n}\n","/* eslint-disable no-unused-vars, dot-notation */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/* Decorators */\nimport staticMethods from './decorators/staticMethods';\nimport windowListener from './decorators/windowListener';\nimport customEvent from './decorators/customEvent';\nimport isCapture from './decorators/isCapture';\nimport getEffect from './decorators/getEffect';\nimport bodyMode from './decorators/bodyMode';\nimport trackRemoval from './decorators/trackRemoval';\n\n/* Utils */\nimport getPosition from './utils/getPosition';\nimport getTipContent from './utils/getTipContent';\nimport { parseAria } from './utils/aria';\nimport nodeListToArray from './utils/nodeListToArray';\nimport { generateUUID } from './utils/uuid';\n\n/* CSS */\nimport baseCss from './index.scss';\nimport { generateTooltipStyle } from './decorators/styler';\n\n/* Polyfill */\nimport 'core-js/modules/es.array.find';\n\n@staticMethods\n@windowListener\n@customEvent\n@isCapture\n@getEffect\n@bodyMode\n@trackRemoval\nclass ReactTooltip extends React.Component {\n  static get propTypes() {\n    return {\n      uuid: PropTypes.string,\n      children: PropTypes.any,\n      place: PropTypes.string,\n      type: PropTypes.string,\n      effect: PropTypes.string,\n      offset: PropTypes.object,\n      multiline: PropTypes.bool,\n      border: PropTypes.bool,\n      textColor: PropTypes.string,\n      backgroundColor: PropTypes.string,\n      borderColor: PropTypes.string,\n      arrowColor: PropTypes.string,\n      insecure: PropTypes.bool,\n      class: PropTypes.string,\n      className: PropTypes.string,\n      id: PropTypes.string,\n      html: PropTypes.bool,\n      delayHide: PropTypes.number,\n      delayUpdate: PropTypes.number,\n      delayShow: PropTypes.number,\n      event: PropTypes.string,\n      eventOff: PropTypes.string,\n      isCapture: PropTypes.bool,\n      globalEventOff: PropTypes.string,\n      getContent: PropTypes.any,\n      afterShow: PropTypes.func,\n      afterHide: PropTypes.func,\n      overridePosition: PropTypes.func,\n      disable: PropTypes.bool,\n      scrollHide: PropTypes.bool,\n      resizeHide: PropTypes.bool,\n      wrapper: PropTypes.string,\n      bodyMode: PropTypes.bool,\n      possibleCustomEvents: PropTypes.string,\n      possibleCustomEventsOff: PropTypes.string,\n      clickable: PropTypes.bool\n    };\n  }\n\n  static defaultProps = {\n    insecure: true,\n    resizeHide: true,\n    wrapper: 'div',\n    clickable: false\n  };\n\n  static supportedWrappers = ['div', 'span'];\n\n  static displayName = 'ReactTooltip';\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uuid: props.uuid || generateUUID(),\n      place: props.place || 'top', // Direction of tooltip\n      desiredPlace: props.place || 'top',\n      type: 'dark', // Color theme of tooltip\n      effect: 'float', // float or fixed\n      show: false,\n      border: false,\n      customColors: {},\n      offset: {},\n      extraClass: '',\n      html: false,\n      delayHide: 0,\n      delayShow: 0,\n      event: props.event || null,\n      eventOff: props.eventOff || null,\n      currentEvent: null, // Current mouse event\n      currentTarget: null, // Current target of mouse event\n      ariaProps: parseAria(props), // aria- and role attributes\n      isEmptyTip: false,\n      disable: false,\n      possibleCustomEvents: props.possibleCustomEvents || '',\n      possibleCustomEventsOff: props.possibleCustomEventsOff || '',\n      originTooltip: null,\n      isMultiline: false\n    };\n\n    this.bind([\n      'showTooltip',\n      'updateTooltip',\n      'hideTooltip',\n      'hideTooltipOnScroll',\n      'getTooltipContent',\n      'globalRebuild',\n      'globalShow',\n      'globalHide',\n      'onWindowResize',\n      'mouseOnToolTip'\n    ]);\n\n    this.mount = true;\n    this.delayShowLoop = null;\n    this.delayHideLoop = null;\n    this.delayReshow = null;\n    this.intervalUpdateContent = null;\n  }\n\n  /**\n   * For unify the bind and unbind listener\n   */\n  bind(methodArray) {\n    methodArray.forEach(method => {\n      this[method] = this[method].bind(this);\n    });\n  }\n\n  componentDidMount() {\n    const { insecure, resizeHide } = this.props;\n\n    this.bindListener(); // Bind listener for tooltip\n    this.bindWindowEvents(resizeHide); // Bind global event for static method\n    this.injectStyles(); // Inject styles for each DOM root having tooltip.\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { ariaProps } = prevState;\n    const newAriaProps = parseAria(nextProps);\n    const isChanged = Object.keys(newAriaProps).some(props => {\n      return newAriaProps[props] !== ariaProps[props];\n    });\n    if (!isChanged) {\n      return null;\n    }\n    return {\n      ...prevState,\n      ariaProps: newAriaProps\n    };\n  }\n\n  componentWillUnmount() {\n    this.mount = false;\n\n    this.clearTimer();\n\n    this.unbindListener();\n    this.removeScrollListener(this.state.currentTarget);\n    this.unbindWindowEvents();\n  }\n\n  /* Look for the closest DOM root having tooltip and inject styles. */\n  injectStyles() {\n    const { tooltipRef } = this;\n    if (!tooltipRef) {\n      return;\n    }\n\n    let parentNode = tooltipRef.parentNode;\n    while (parentNode.parentNode) {\n      parentNode = parentNode.parentNode;\n    }\n\n    let domRoot;\n\n    switch (parentNode.constructor.name) {\n      case 'Document':\n      case 'HTMLDocument':\n      case undefined:\n        domRoot = parentNode.head;\n        break;\n      case 'ShadowRoot':\n      default:\n        domRoot = parentNode;\n        break;\n    }\n\n    // Prevent styles duplication.\n    if (!domRoot.querySelector('style[data-react-tooltip]')) {\n      const style = document.createElement('style');\n      style.textContent = baseCss;\n      style.setAttribute('data-react-tooltip', 'true');\n\n      domRoot.appendChild(style);\n    }\n  }\n\n  /**\n   * Return if the mouse is on the tooltip.\n   * @returns {boolean} true - mouse is on the tooltip\n   */\n  mouseOnToolTip() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      /* old IE or Firefox work around */\n      if (!this.tooltipRef.matches) {\n        /* old IE work around */\n        if (this.tooltipRef.msMatchesSelector) {\n          this.tooltipRef.matches = this.tooltipRef.msMatchesSelector;\n        } else {\n          /* old Firefox work around */\n          this.tooltipRef.matches = this.tooltipRef.mozMatchesSelector;\n        }\n      }\n      return this.tooltipRef.matches(':hover');\n    }\n    return false;\n  }\n\n  /**\n   * Pick out corresponded target elements\n   */\n  getTargetArray(id) {\n    let targetArray = [];\n    let selector;\n    if (!id) {\n      selector = '[data-tip]:not([data-for])';\n    } else {\n      const escaped = id.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"');\n      selector = `[data-tip][data-for=\"${escaped}\"]`;\n    }\n\n    // Scan document for shadow DOM elements\n    nodeListToArray(document.getElementsByTagName('*'))\n      .filter(element => element.shadowRoot)\n      .forEach(element => {\n        targetArray = targetArray.concat(\n          nodeListToArray(element.shadowRoot.querySelectorAll(selector))\n        );\n      });\n    return targetArray.concat(\n      nodeListToArray(document.querySelectorAll(selector))\n    );\n  }\n\n  /**\n   * Bind listener to the target elements\n   * These listeners used to trigger showing or hiding the tooltip\n   */\n  bindListener() {\n    const { id, globalEventOff, isCapture } = this.props;\n    const targetArray = this.getTargetArray(id);\n\n    targetArray.forEach(target => {\n      if (target.getAttribute('currentItem') === null) {\n        target.setAttribute('currentItem', 'false');\n      }\n      this.unbindBasicListener(target);\n      if (this.isCustomEvent(target)) {\n        this.customUnbindListener(target);\n      }\n    });\n\n    if (this.isBodyMode()) {\n      this.bindBodyListener(targetArray);\n    } else {\n      targetArray.forEach(target => {\n        const isCaptureMode = this.isCapture(target);\n        const effect = this.getEffect(target);\n        if (this.isCustomEvent(target)) {\n          this.customBindListener(target);\n          return;\n        }\n\n        target.addEventListener('mouseenter', this.showTooltip, isCaptureMode);\n        target.addEventListener('focus', this.showTooltip, isCaptureMode);\n        if (effect === 'float') {\n          target.addEventListener(\n            'mousemove',\n            this.updateTooltip,\n            isCaptureMode\n          );\n        }\n        target.addEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n        target.addEventListener('blur', this.hideTooltip, isCaptureMode);\n      });\n    }\n\n    // Global event to hide tooltip\n    if (globalEventOff) {\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n      window.addEventListener(globalEventOff, this.hideTooltip, isCapture);\n    }\n\n    // Track removal of targetArray elements from DOM\n    this.bindRemovalTracker();\n  }\n\n  /**\n   * Unbind listeners on target elements\n   */\n  unbindListener() {\n    const { id, globalEventOff } = this.props;\n    if (this.isBodyMode()) {\n      this.unbindBodyListener();\n    } else {\n      const targetArray = this.getTargetArray(id);\n      targetArray.forEach(target => {\n        this.unbindBasicListener(target);\n        if (this.isCustomEvent(target)) this.customUnbindListener(target);\n      });\n    }\n\n    if (globalEventOff)\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n    this.unbindRemovalTracker();\n  }\n\n  /**\n   * Invoke this before bind listener and unmount the component\n   * it is necessary to invoke this even when binding custom event\n   * so that the tooltip can switch between custom and default listener\n   */\n  unbindBasicListener(target) {\n    const isCaptureMode = this.isCapture(target);\n    target.removeEventListener('mouseenter', this.showTooltip, isCaptureMode);\n    target.removeEventListener('mousemove', this.updateTooltip, isCaptureMode);\n    target.removeEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n  }\n\n  getTooltipContent() {\n    const { getContent, children } = this.props;\n\n    // Generate tooltip content\n    let content;\n    if (getContent) {\n      if (Array.isArray(getContent)) {\n        content = getContent[0] && getContent[0](this.state.originTooltip);\n      } else {\n        content = getContent(this.state.originTooltip);\n      }\n    }\n\n    return getTipContent(\n      this.state.originTooltip,\n      children,\n      content,\n      this.state.isMultiline\n    );\n  }\n\n  isEmptyTip(placeholder) {\n    return (\n      (typeof placeholder === 'string' && placeholder === '') ||\n      placeholder === null\n    );\n  }\n\n  /**\n   * When mouse enter, show the tooltip\n   */\n  showTooltip(e, isGlobalCall) {\n    if (!this.tooltipRef) {\n      return;\n    }\n\n    if (isGlobalCall) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some(ele => ele === e.currentTarget);\n      if (!isMyElement) return;\n    }\n    // Get the tooltip content\n    // calculate in this phrase so that tip width height can be detected\n    const { multiline, getContent } = this.props;\n    const originTooltip = e.currentTarget.getAttribute('data-tip');\n    const isMultiline =\n      e.currentTarget.getAttribute('data-multiline') || multiline || false;\n\n    // If it is focus event or called by ReactTooltip.show, switch to `solid` effect\n    const switchToSolid = e instanceof window.FocusEvent || isGlobalCall;\n\n    // if it needs to skip adding hide listener to scroll\n    let scrollHide = true;\n    if (e.currentTarget.getAttribute('data-scroll-hide')) {\n      scrollHide = e.currentTarget.getAttribute('data-scroll-hide') === 'true';\n    } else if (this.props.scrollHide != null) {\n      scrollHide = this.props.scrollHide;\n    }\n\n    // adding aria-describedby to target to make tooltips read by screen readers\n    if (e && e.currentTarget && e.currentTarget.setAttribute) {\n      e.currentTarget.setAttribute('aria-describedby', this.state.uuid);\n    }\n\n    // Make sure the correct place is set\n    const desiredPlace =\n      e.currentTarget.getAttribute('data-place') || this.props.place || 'top';\n    const effect =\n      (switchToSolid && 'solid') || this.getEffect(e.currentTarget);\n    const offset =\n      e.currentTarget.getAttribute('data-offset') || this.props.offset || {};\n    const result = getPosition(\n      e,\n      e.currentTarget,\n      this.tooltipRef,\n      desiredPlace,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        e,\n        e.currentTarget,\n        this.tooltipRef,\n        desiredPlace,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    const place = result.isNewState ? result.newState.place : desiredPlace;\n\n    // To prevent previously created timers from triggering\n    this.clearTimer();\n\n    const target = e.currentTarget;\n\n    const reshowDelay = this.state.show\n      ? target.getAttribute('data-delay-update') || this.props.delayUpdate\n      : 0;\n\n    const self = this;\n\n    const updateState = function updateState() {\n      self.setState(\n        {\n          originTooltip: originTooltip,\n          isMultiline: isMultiline,\n          desiredPlace: desiredPlace,\n          place: place,\n          type: target.getAttribute('data-type') || self.props.type || 'dark',\n          customColors: {\n            text:\n              target.getAttribute('data-text-color') ||\n              self.props.textColor ||\n              null,\n            background:\n              target.getAttribute('data-background-color') ||\n              self.props.backgroundColor ||\n              null,\n            border:\n              target.getAttribute('data-border-color') ||\n              self.props.borderColor ||\n              null,\n            arrow:\n              target.getAttribute('data-arrow-color') ||\n              self.props.arrowColor ||\n              null\n          },\n          effect: effect,\n          offset: offset,\n          html:\n            (target.getAttribute('data-html')\n              ? target.getAttribute('data-html') === 'true'\n              : self.props.html) || false,\n          delayShow:\n            target.getAttribute('data-delay-show') || self.props.delayShow || 0,\n          delayHide:\n            target.getAttribute('data-delay-hide') || self.props.delayHide || 0,\n          delayUpdate:\n            target.getAttribute('data-delay-update') ||\n            self.props.delayUpdate ||\n            0,\n          border:\n            (target.getAttribute('data-border')\n              ? target.getAttribute('data-border') === 'true'\n              : self.props.border) || false,\n          extraClass:\n            target.getAttribute('data-class') ||\n            self.props.class ||\n            self.props.className ||\n            '',\n          disable:\n            (target.getAttribute('data-tip-disable')\n              ? target.getAttribute('data-tip-disable') === 'true'\n              : self.props.disable) || false,\n          currentTarget: target\n        },\n        () => {\n          if (scrollHide) {\n            self.addScrollListener(self.state.currentTarget);\n          }\n\n          self.updateTooltip(e);\n\n          if (getContent && Array.isArray(getContent)) {\n            self.intervalUpdateContent = setInterval(() => {\n              if (self.mount) {\n                const { getContent } = self.props;\n                const placeholder = getTipContent(\n                  originTooltip,\n                  '',\n                  getContent[0](),\n                  isMultiline\n                );\n                const isEmptyTip = self.isEmptyTip(placeholder);\n                self.setState({ isEmptyTip });\n                self.updatePosition();\n              }\n            }, getContent[1]);\n          }\n        }\n      );\n    };\n\n    // If there is no delay call immediately, don't allow events to get in first.\n    if (reshowDelay) {\n      this.delayReshow = setTimeout(updateState, reshowDelay);\n    } else {\n      updateState();\n    }\n  }\n\n  /**\n   * When mouse hover, update tool tip\n   */\n  updateTooltip(e) {\n    const { delayShow, disable } = this.state;\n    const { afterShow } = this.props;\n    const placeholder = this.getTooltipContent();\n    const eventTarget = e.currentTarget || e.target;\n\n    // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n    if (this.mouseOnToolTip()) {\n      return;\n    }\n\n    // if the tooltip is empty, disable the tooltip\n    if (this.isEmptyTip(placeholder) || disable) {\n      return;\n    }\n\n    const delayTime = !this.state.show ? parseInt(delayShow, 10) : 0;\n\n    const updateState = () => {\n      if (\n        (Array.isArray(placeholder) && placeholder.length > 0) ||\n        placeholder\n      ) {\n        const isInvisible = !this.state.show;\n        this.setState(\n          {\n            currentEvent: e,\n            currentTarget: eventTarget,\n            show: true\n          },\n          () => {\n            this.updatePosition();\n            if (isInvisible && afterShow) {\n              afterShow(e);\n            }\n          }\n        );\n      }\n    };\n\n    clearTimeout(this.delayShowLoop);\n    if (delayTime) {\n      this.delayShowLoop = setTimeout(updateState, delayTime);\n    } else {\n      updateState();\n    }\n  }\n\n  /*\n   * If we're mousing over the tooltip remove it when we leave.\n   */\n  listenForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.addEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  removeListenerForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.removeEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  /**\n   * When mouse leave, hide tooltip\n   */\n  hideTooltip(e, hasTarget, options = { isScroll: false }) {\n    const { disable } = this.state;\n    const { isScroll } = options;\n    const delayHide = isScroll ? 0 : this.state.delayHide;\n    const { afterHide } = this.props;\n    const placeholder = this.getTooltipContent();\n    if (!this.mount) return;\n    if (this.isEmptyTip(placeholder) || disable) return; // if the tooltip is empty, disable the tooltip\n    if (hasTarget) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some(ele => ele === e.currentTarget);\n      if (!isMyElement || !this.state.show) return;\n    }\n\n    // clean up aria-describedby when hiding tooltip\n    if (e && e.currentTarget && e.currentTarget.removeAttribute) {\n      e.currentTarget.removeAttribute('aria-describedby');\n    }\n\n    const resetState = () => {\n      const isVisible = this.state.show;\n      // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n      if (this.mouseOnToolTip()) {\n        this.listenForTooltipExit();\n        return;\n      }\n\n      this.removeListenerForTooltipExit();\n\n      this.setState({ show: false }, () => {\n        this.removeScrollListener(this.state.currentTarget);\n        if (isVisible && afterHide) {\n          afterHide(e);\n        }\n      });\n    };\n\n    this.clearTimer();\n    if (delayHide) {\n      this.delayHideLoop = setTimeout(resetState, parseInt(delayHide, 10));\n    } else {\n      resetState();\n    }\n  }\n\n  /**\n   * When scroll, hide tooltip\n   */\n  hideTooltipOnScroll(event, hasTarget) {\n    this.hideTooltip(event, hasTarget, { isScroll: true });\n  }\n\n  /**\n   * Add scroll event listener when tooltip show\n   * automatically hide the tooltip when scrolling\n   */\n  addScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.addEventListener('scroll', this.hideTooltipOnScroll, isCaptureMode);\n  }\n\n  removeScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.removeEventListener(\n      'scroll',\n      this.hideTooltipOnScroll,\n      isCaptureMode\n    );\n  }\n\n  // Calculation the position\n  updatePosition() {\n    const {\n      currentEvent,\n      currentTarget,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    } = this.state;\n    const node = this.tooltipRef;\n    const result = getPosition(\n      currentEvent,\n      currentTarget,\n      node,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        currentEvent,\n        currentTarget,\n        node,\n        place,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    if (result.isNewState) {\n      // Switch to reverse placement\n      return this.setState(result.newState, () => {\n        this.updatePosition();\n      });\n    }\n\n    // Set tooltip position\n    node.style.left = result.position.left + 'px';\n    node.style.top = result.position.top + 'px';\n  }\n\n  /**\n   * CLear all kinds of timeout of interval\n   */\n  clearTimer() {\n    clearTimeout(this.delayShowLoop);\n    clearTimeout(this.delayHideLoop);\n    clearTimeout(this.delayReshow);\n    clearInterval(this.intervalUpdateContent);\n  }\n\n  hasCustomColors() {\n    return Boolean(\n      Object.keys(this.state.customColors).find(\n        color => color !== 'border' && this.state.customColors[color]\n      ) ||\n        (this.state.border && this.state.customColors['border'])\n    );\n  }\n\n  render() {\n    const { extraClass, html, ariaProps, disable, uuid } = this.state;\n    const content = this.getTooltipContent();\n    const isEmptyTip = this.isEmptyTip(content);\n    const style = generateTooltipStyle(\n      this.state.uuid,\n      this.state.customColors,\n      this.state.type,\n      this.state.border\n    );\n\n    const tooltipClass =\n      '__react_component_tooltip' +\n      ` ${this.state.uuid}` +\n      (this.state.show && !disable && !isEmptyTip ? ' show' : '') +\n      (this.state.border ? ' border' : '') +\n      ` place-${this.state.place}` + // top, bottom, left, right\n      ` type-${this.hasCustomColors() ? 'custom' : this.state.type}` + // dark, success, warning, error, info, light, custom\n      (this.props.delayUpdate ? ' allow_hover' : '') +\n      (this.props.clickable ? ' allow_click' : '');\n\n    let Wrapper = this.props.wrapper;\n\n    if (ReactTooltip.supportedWrappers.indexOf(Wrapper) < 0) {\n      Wrapper = ReactTooltip.defaultProps.wrapper;\n    }\n\n    const wrapperClassName = [tooltipClass, extraClass]\n      .filter(Boolean)\n      .join(' ');\n\n    if (html) {\n      const htmlContent = `${content}\\n<style aria-hidden=\"true\">${style}</style>`;\n\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          ref={ref => (this.tooltipRef = ref)}\n          {...ariaProps}\n          data-id=\"tooltip\"\n          dangerouslySetInnerHTML={{ __html: htmlContent }}\n        />\n      );\n    } else {\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          {...ariaProps}\n          ref={ref => (this.tooltipRef = ref)}\n          data-id=\"tooltip\"\n        >\n          <style\n            dangerouslySetInnerHTML={{ __html: style }}\n            aria-hidden=\"true\"\n          />\n          {content}\n        </Wrapper>\n      );\n    }\n  }\n}\n\nexport default ReactTooltip;\n","/**\n * Events that should be bound to the window\n */\nimport CONSTANT from '../constant';\n\nexport default function(target) {\n  target.prototype.bindWindowEvents = function(resizeHide) {\n    // ReactTooltip.hide\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.addEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide, false);\n\n    // ReactTooltip.rebuild\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.addEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild, false);\n\n    // ReactTooltip.show\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.addEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow, false);\n\n    // Resize\n    if (resizeHide) {\n      window.removeEventListener('resize', this.onWindowResize);\n      window.addEventListener('resize', this.onWindowResize, false);\n    }\n  };\n\n  target.prototype.unbindWindowEvents = function() {\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  /**\n   * invoked by resize event of window\n   */\n  target.prototype.onWindowResize = function() {\n    if (!this.mount) return;\n    this.hideTooltip();\n  };\n}\n","/**\n * Util method to judge if it should follow capture model\n */\n\nexport default function(target) {\n  target.prototype.isCapture = function(currentTarget) {\n    return (\n      (currentTarget &&\n        currentTarget.getAttribute('data-iscapture') === 'true') ||\n      this.props.isCapture ||\n      false\n    );\n  };\n}\n","/**\n * Util method to get effect\n */\n\nexport default function(target) {\n  target.prototype.getEffect = function(currentTarget) {\n    const dataEffect = currentTarget.getAttribute('data-effect');\n    return dataEffect || this.props.effect || 'float';\n  };\n}\n","import { v4 as uuid } from 'uuid';\n\nexport function generateUUID() {\n  return 't' + uuid();\n}\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n"],"sourceRoot":""}