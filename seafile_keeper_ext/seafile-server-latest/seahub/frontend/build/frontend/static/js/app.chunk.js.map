{"version":3,"sources":["components/context-menu/helpers.js","../node_modules/debug/src/browser.js","../node_modules/component-emitter/index.js","../node_modules/engine.io-parser/lib/browser.js","components/dialog/edit-filetag-dialog.js","components/context-menu/globalEventListener.js","components/context-menu/context-menu.js","../node_modules/reactstrap/es/Table.js","assets/icons sync //.svg$","assets/icons/monitor.svg","../node_modules/reactstrap/es/UncontrolledTooltip.js","../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/function-bind-native.js","../../node_modules/core-js/internals/function-call.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/engine-v8-version.js","../../node_modules/core-js/internals/function-uncurry-this-raw.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/function-uncurry-this.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/is-null-or-undefined.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/document-all.js","../../node_modules/core-js/internals/is-callable.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/object-is-prototype-of.js","../../node_modules/core-js/internals/engine-user-agent.js","../../node_modules/core-js/internals/symbol-constructor-detection.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/is-symbol.js","../../node_modules/core-js/internals/try-to-string.js","../../node_modules/core-js/internals/a-callable.js","../../node_modules/core-js/internals/get-method.js","../../node_modules/core-js/internals/ordinary-to-primitive.js","../../node_modules/core-js/internals/define-global-property.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/to-object.js","../../node_modules/core-js/internals/has-own-property.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/to-property-key.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/v8-prototype-define-bug.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/function-name.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/weak-map-basic-detection.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/make-built-in.js","../../node_modules/core-js/internals/define-built-in.js","../../node_modules/core-js/internals/math-trunc.js","../../node_modules/core-js/internals/to-integer-or-infinity.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/length-of-array-like.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/is-array.js","../../node_modules/core-js/internals/to-string-tag-support.js","../../node_modules/core-js/internals/classof.js","../../node_modules/core-js/internals/is-constructor.js","../../node_modules/core-js/internals/array-species-constructor.js","../../node_modules/core-js/internals/array-species-create.js","../../node_modules/core-js/internals/array-iteration.js","../../node_modules/core-js/internals/object-keys.js","../../node_modules/core-js/internals/object-define-properties.js","../../node_modules/core-js/internals/html.js","../../node_modules/core-js/internals/object-create.js","../../node_modules/core-js/internals/add-to-unscopables.js","../../node_modules/core-js/modules/es.array.find.js","../../src/constant.js","../../src/decorators/staticMethods.js","../../src/decorators/customEvent.js","../../src/decorators/bodyMode.js","../../src/utils/getPosition.js","../../src/utils/getTipContent.js","../../src/utils/aria.js","../../src/utils/nodeListToArray.js","../../src/decorators/defaultStyles.js","../../src/decorators/styler.js","../../src/index.js","../../src/decorators/trackRemoval.js","../../src/decorators/windowListener.js","../../src/decorators/isCapture.js","../../src/decorators/getEffect.js","../../src/utils/uuid.js","components/dialog/create-folder-dialog.js","components/dialog/zip-download-dialog.js","components/system-notification.js","models/group.js","models/library-details.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","components/dialog/sort-options.js","components/toolbar/top-toolbar.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","components/icon.js","components/repo-monitored-icon.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","components/rename.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-upload-links-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","components/dialog/assign-doi-dialog.js","../node_modules/react-select/async-creatable/dist/react-select-async-creatable.esm.js","components/keeper-archive-metadata-form.js","components/dialog/archive-library-dialog.js","components/dialog/certify-library-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/dialog/keeper-edit-metadata-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/dialog/list-tag-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/dirent-list-item.js","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","components/dialog/delete-folder-dialog.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/v4.js","components/dropdown-menu/item-dropdown-menu.js","../node_modules/parseqs/index.js","../node_modules/component-inherit/index.js","components/dialog/image-dialog.js","../node_modules/socket.io-parser/index.js","../node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/transport.js","components/dialog/create-tag-dialog.js","components/dialog/share-admin-link.js","components/dialog/list-taggedfiles-dialog.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","../node_modules/parseuri/index.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/has-binary2/index.js","../node_modules/yeast/index.js","../node_modules/indexof/index.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/on.js","../node_modules/component-bind/index.js","../node_modules/socket.io-client/lib/index.js","components/wiki-markdown-viewer.js","components/dialog/copy-move-dirent-progress-dialog.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","../node_modules/socket.io-client/lib/url.js","../node_modules/debug/src/debug.js","../node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/after/index.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/to-array/index.js","../node_modules/backo2/index.js","components/context-menu/actions.js","../node_modules/svg-baker-runtime/browser-symbol.js","../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js"],"names":["callIfExists","func","_len","arguments","length","args","Array","_key","apply","hasOwnProp","obj","prop","Object","prototype","hasOwnProperty","call","uniqueId","Math","random","toString","substring","store","canUseDOM","Boolean","window","document","createElement","load","r","exports","storage","debug","e","process","DEBUG","module","require","log","console","Function","formatArgs","useColors","this","namespace","humanize","diff","c","color","splice","index","lastC","replace","match","save","namespaces","removeItem","type","navigator","userAgent","toLowerCase","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","chrome","local","localStorage","localstorage","colors","formatters","j","v","JSON","stringify","err","message","enable","Emitter","key","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","removeListener","removeAllListeners","removeEventListener","cb","callbacks","i","emit","len","slice","listeners","hasListeners","base64encoder","keys","hasBinary","sliceBuffer","after","utf8","ArrayBuffer","isAndroid","test","isPhantomJS","dontSendBlobs","protocol","packets","open","close","ping","pong","upgrade","noop","packetslist","data","Blob","map","ary","each","done","result","next","eachWithIndex","el","error","msg","encodePacket","packet","supportsBinary","utf8encode","callback","undefined","buffer","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","byteLength","encodeArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","base64","encodeBase64Object","encoded","encode","String","strict","b64data","b64","split","readAsDataURL","fromCharCode","typed","basic","btoa","decodePacket","binaryType","utf8decode","charAt","decodeBase64Packet","substr","decode","tryDecode","Number","rest","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","results","join","decodePayload","decodePayloadAsBinary","n","l","chr","encodedPackets","totalLength","reduce","acc","p","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","binaryIdentifier","size","lengthAry","bufferTail","buffers","tailArray","msgLength","total","TagItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","onMouseEnter","setState","isTagHighlighted","onMouseLeave","getRepoTagIdList","fileTagList","fileTag","repo_tag_id","onEditFileTag","_this$props","repoID","repoTag","filePath","repoTagIdList","indexOf","id","seafileAPI","addFileTag","then","onFileTagChanged","catch","errMessage","Utils","getErrorMsg","toaster","danger","deleteFileTag","state","_createClass","value","isTagSelected","_jsxs","className","concat","onClick","children","_jsx","backgroundColor","name","React","Component","TagList","_React$Component2","_super2","_this2","getRepoTagList","listRepoTags","res","repotagList","repo_tags","item","RepoTag","_this3","Fragment","ModalHeader","toggle","toggleCancel","gettext","ModalBody","href","createNewTag","ModalFooter","Button","EditFileTagDialog","_React$Component3","_super3","_this4","isCreateRepoTagShow","isListRepoTagShow","onRepoTagCreated","repoTagID","_this4$props","Modal","isOpen","autoFocus","CreateTagDialog","onClose","GlobalEventListener","handleShowEvent","show","handleHideEvent","hide","register","showCallback","hideCallback","unregister","MENU_SHOW","MENU_HIDE","ContextMenu","registerHandlers","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","detail","_e$detail$position","position","x","y","_e$detail","currentObject","menuList","isVisible","onShowMenu","onHideMenu","menu","contains","target","hideMenu","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","_window","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","_window2","onMenuItemClick","stopPropagation","operation","getEventData","onContextMenu","listenId","listener","wrapper","requestAnimationFrame","setTimeout","_this2$state","_ref","rtl","opacity","pointerEvents","role","display","ref","menuItem","propTypes","PropTypes","string","cssModule","object","bordered","bool","borderless","striped","dark","hover","responsive","oneOfType","tag","tagPropType","responsiveTag","innerRef","Table","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","_extends","responsiveClassName","defaultProps","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","symbol","add","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","omitKeys","UncontrolledTooltip","_Component","defaultOpen","bind","_assertThisInitialized","_inheritsLoose","_proto","render","Tooltip","omit","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectSpread","check","it","global","globalThis","self","fails","exec","require$$0","get","NATIVE_BIND","$propertyIsEnumerable","propertyIsEnumerable","NASHORN_BUG","V","descriptor","version","bitmap","configurable","writable","FunctionPrototype","uncurryThisWithBind","uncurryThisRaw","stringSlice","classofRaw","require$$1","classof","require$$2","$Object","isNullOrUndefined","$TypeError","TypeError","requireObjectCoercible","IndexedObject","toIndexedObject","documentAll","all","IS_HTMLDDA","argument","isCallable","aFunction","method","isPrototypeOf","Deno","versions","v8","V8_VERSION","Symbol","sham","iterator","getBuiltIn","require$$3","$Symbol","$String","tryToString","aCallable","isObject","defineGlobalProperty","SHARED","sharedModule","mode","copyright","license","toObject","hasOwn","uncurryThis","postfix","uid","shared","NATIVE_SYMBOL","require$$4","USE_SYMBOL_AS_UID","require$$5","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","wellKnownSymbol","description","isSymbol","getMethod","P","ordinaryToPrimitive","input","pref","val","valueOf","TO_PRIMITIVE","toPrimitive","exoticToPrim","toPropertyKey","EXISTS","documentCreateElement","a","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","require$$6","IE8_DOM_DEFINE","require$$7","$getOwnPropertyDescriptor","O","f","anObject","V8_PROTOTYPE_DEFINE_BUG","$defineProperty","ENUMERABLE","CONFIGURABLE","WRITABLE","Attributes","current","definePropertyModule","createNonEnumerableProperty","getDescriptor","PROPER","functionToString","inspectSource","set","has","WeakMap","sharedKey","NATIVE_WEAK_MAP","hiddenKeys","OBJECT_ALREADY_INITIALIZED","metadata","facade","STATE","enforce","getterFor","TYPE","CONFIGURABLE_FUNCTION_NAME","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","makeBuiltIn","makeBuiltInModule","options","getter","setter","arity","constructor","ceil","floor","trunc","toIntegerOrInfinity","number","max","min","toLength","lengthOfArrayLike","toAbsoluteIndex","integer","createMethod","IS_INCLUDES","$this","fromIndex","includes","names","internalObjectKeys","getOwnPropertyNames","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","normalize","POLYFILL","NATIVE","defineBuiltIn","simple","unsafe","nonConfigurable","nonWritable","copyConstructorProperties","exceptions","isArray","TO_STRING_TAG_SUPPORT","TO_STRING_TAG","CORRECT_ARGUMENTS","tryGet","callee","empty","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","isConstructor","SPECIES","$Array","arraySpeciesConstructor","originalArray","C","that","arraySpeciesCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","callbackfn","specificCreate","boundFunction","create","some","every","find","findIndex","filterReject","enumBugKeys","objectKeys","Properties","activeXDocument","definePropertiesModule","html","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","content","LT","NullProtoObjectViaActiveX","write","temp","parentWindow","ActiveXObject","domain","iframeDocument","iframe","JS","appendChild","src","contentWindow","F","NullProtoObjectViaIFrame","UNSCOPABLES","ArrayPrototype","$","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","$find","addToUnscopables","FIND","SKIPS_HOLES","proto","HIDE","REBUILD","SHOW","dispatchGlobalEvent","eventName","opts","CustomEvent","createEvent","initEvent","dispatchEvent","checkStatus","dataEventOff","isCapture","currentTarget","currentItem","getAttribute","hideTooltip","setAttribute","setUntargetItems","getTargetArray","showTooltip","targetArray","customListeners","bodyListener","forId","lastTarget","respectEffect","customEvent","tip","parentElement","isCustomEvent","isTargetBelongsToTooltip","getEffect","proxy","makeProxy","findCustomEvents","dataAttribute","events","getBody","getElementsByTagName","node","place","desiredPlace","effect","offset","getDimensions","tipWidth","tipHeight","targetWidth","targetHeight","getCurrentOffset","mouseX","mouseY","defaultOffset","getDefaultPosition","calculateOffset","extraOffsetX","extraOffsetY","windowWidth","windowHeight","getParent","parentTop","parentLeft","getTipOffsetLeft","offsetX","getTipOffsetTop","offsetY","t","outsideRight","getTipOffsetRight","outsideBottom","b","getTipOffsetBottom","outside","outsideLeft","outsideTop","inside","placeIsInside","bottom","right","newPlace","chosen","d","choose","isNewState","newState","boundingClientRect","targetTop","targetLeft","clientX","clientY","disToMouse","parse","currentParent","computedStyle","getComputedStyle","getPropertyValue","TipContent","getContent","multiline","regexp","parseAria","ariaObj","nodeList","fill","defaultColors","text","background","border","arrow","success","warning","info","light","DEFAULT_PADDING","DEFAULT_RADIUS","tooltip","generateTooltipStyle","uuid","customColors","hasBorder","padding","radius","textColor","borderColor","arrowColor","arrowRadius","tooltipRadius","generateStyle","getDefaultPopupColors","getPopupColors","CONSTANT","rebuild","globalRebuild","mount","unbindListener","bindListener","globalShow","hasTarget","globalHide","staticMethods","bindWindowEvents","resizeHide","onWindowResize","unbindWindowEvents","windowListener","ele","customBindListener","eventOff","dataEvent","customListener","customUnbindListener","bodyMode","isBodyMode","bindBodyListener","possibleCustomEvents","possibleCustomEventsOff","body","customEvents","customEventsOff","unbindBodyListener","bodyModeListeners","mouseover","mousemove","updateTooltip","mouseout","targetEventOff","borderClass","customRadius","extraClass","delayHide","delayShow","currentEvent","ariaProps","isEmptyTip","disable","originTooltip","isMultiline","delayShowLoop","delayHideLoop","delayReshow","intervalUpdateContent","methodArray","insecure","disableInternalStyle","injectStyles","clearTimer","removeScrollListener","tooltipRef","domRoot","parentNode","head","querySelector","textContent","matches","msMatchesSelector","mozMatchesSelector","selector","escaped","nodeListToArray","element","shadowRoot","querySelectorAll","globalEventOff","unbindBasicListener","isCaptureMode","bindRemovalTracker","unbindRemovalTracker","getTipContent","placeholder","isGlobalCall","switchToSolid","FocusEvent","scrollHide","getPosition","overridePosition","reshowDelay","delayUpdate","updateState","addScrollListener","setInterval","updatePosition","afterShow","disableProp","getTooltipContent","eventTarget","mouseOnToolTip","delayTime","isInvisible","clearTimeout","isScroll","afterHide","isMyElement","removeAttribute","resetState","listenForTooltipExit","removeListenerForTooltipExit","hideTooltipOnScroll","callbackAfter","clearInterval","tooltipClass","hasCustomColors","clickable","Wrapper","ReactTooltip","supportedWrappers","wrapperClassName","htmlContent","dangerouslySetInnerHTML","__html","any","class","nextProps","prevState","newAriaProps","MutationObserver","WebKitMutationObserver","MozMutationObserver","observer","mutations","m1","mutation","m2","removedNodes","observe","childList","subtree","removalTracker","disconnect","CreateForder","handleChange","trim","isSubmitBtnActive","childName","handleSubmit","newName","checkDuplicatedName","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","addFolderCancel","Form","FormGroup","Label","for","Input","onKeyPress","onChange","Alert","disabled","interval","ZipDownloadDialog","queryZipProgress","zipToken","failed","isLoading","errorMsg","failed_reason","zipProgress","zipped","toFixed","toggleDialog","location","fileServerRoot","cancelZipTask","token","getShareLinkDirentsZipTask","getShareLinkZipTask","zipDownload","Content","_this$props$data","Loading","SystemNotification","isClosed","cookieEnabled","date","Date","cookies","cookie","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","curNoteMsg","title","Group","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","LibraryDetails","repo_id","repo_name","MainSideNav","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","listGroups","groupList","groupsHeight","listHeight","groupItems","sort","tabItemClick","param","uploader","isUploadProgressDialogShow","totalProgress","confirm","onDTableClick","url","dtableWebServer","getActiveClass","tab","currentTab","libdtExtend","libraryDetailsExtended","loadLibraryDetails","keeperAPI","listLibraryDetails","libraryDetailsList","libraryDetailsHeight","libraryDetailItems","closeSideBar","adminHeight","Link","to","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","link","desc","icon","_this5","showActivity","isDocs","isPro","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","renderLibraryDetails","draftCounts","canInvitePeople","renderSharedAdmin","renderCustomNavItems","_this6","AboutDialog","onCloseAboutDialog","mediaUrl","logoPath","logoHeight","logoWidth","siteTitle","alt","seafileVersion","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","onFooterExpandedToggle","collapsed","elementBodyStyle","maxHeight","borderBottomWidth","ModalPortal","SidePanel","isSidePanelClosed","Logo","onCloseSidePanel","MainPanel","script","async","DraftsView","moment","locale","lang","DraftListItem","isItemFreezed","isMenuIconShow","highlight","onDropdownToggleClick","toggleOperationMenu","isItemMenuShow","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","origin_repo_id","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","encodeURIComponent","localTime","utc","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","publishDraft","getDrafts","isLoadingDraft","EmptyTip","Acticity","json","obj_type","commit_id","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","fileURL","encodePath","serviceURL","fileLink","app","config","FileActivitiesContent","isDesktop","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","_Component2","onListCreatedFilesToggle","isListCreatedFiles","op","details","_this$props2","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FilesActivities","_Component3","mergePublishEvents","curPathList","oldPathList","actuallyEvents","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","hasMore","clientHeight","scrollHeight","scrollTop","getMore","isFirstLoading","currentPage","avatarSize","listActivities","_toConsumableArray","onScroll","loading","emptyTip","TableBody","getThumbnails","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","linkUrl","desktopItem","onMouseOver","onMouseOut","onFocus","mobileItem","Starred","_Component4","_super4","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","device_name","last_login_ip","last_accessed","ConfirmUnlinkDeviceDialog","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","share_permission_name","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","translateExplanation","explanation","sharePermsExplanation","getPermissions","newPermissions","permissions","currentPerm","_this$state","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","togglePermSelectDialog","isPermSelectDialogOpen","user","updateRepoSharePerm","unshare","unshareRepo","unshared","onEditPermission","nativeEvent","stopImmediatePropagation","isShowPermEditor","showAdmin","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","SharePermissionEditor","isTextMode","isEditing","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","SortOptions","_e$target$value$split","_e$target$value$split2","_slicedToArray","sortOptions","TopToolbar","onShowSidePanel","onSearchedClick","CommonToolbar","searchPlaceholder","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","objUrl","deletedTip","obj_id","rel","ShareLinkPermissionEditor","view_cnt","ShareAdminLink","ShareAdminShareLinks","deleteShareLink","uploadItem","toggleSortOptionsDialog","isSortOptionsDialogOpen","toggleCleanInvalidShareLinksDialog","isCleanInvalidShareLinksDialogOpen","cleanInvalidShareLinks","newItems","listUserShareLinks","ShareLink","SortOptionsDialog","CommonOperationConfirmationDialog","confirmBtnText","ShareAdminUploadLinks","deleteUploadLink","toggleCleanInvalidUploadLinksDialog","isCleanInvalidUploadLinksDialogOpen","cleanInvalidUploadLinks","listUserUploadLinks","UploadLink","Repo","size_original","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","monitored","storage_name","doi","LibsMobileThead","requireContext","Icon","iconClass","xlinkHref","RepoMonitoredIcon","placement","freezeItem","freezed","sortBySize","onMonitorRepo","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","watchFileChanges","repo","monitorRepo","unwatchFileChanges","unMonitorRepo","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","enableMonitorRepo","tabIndex","ModalPotal","ShareDialog","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","server","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","DirPath","currentPath","downloadFile","downloadUrl","shared_by","turnPathToLink","pathList","nodePath","pathElem","MainPanelTopbar","Account","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","DirContent","direntList","deleteDirent","fromSystemRepo","Dirent","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","_res$data","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","openFileInput","fileInput","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","axios","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","createRef","DirPathBar","CreateRepoDialog","handleRepoNameChange","handlePassword1Change","password1","handlePassword2Change","password2","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","password","passwd","storages","libraryTemplates","repoPasswordMinLength","Select","defaultValue","label","enableEncryptedLibrary","autoComplete","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","onDropdownToggleKeyDown","visitDeletedviaKey","onKeyDown","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","CreatableSelect","isMulti","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","userFolderPermItems","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","FileChooser","onDirentItemClick","thead","UserSelect","onSelectChange","InputGroup","InputGroupAddon","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","_this2$props","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","Nav","pills","NavItem","NavLink","TabContent","TabPane","tabId","LibSubFolderSetGroupPermissionDialog","folderName","maxWidth","Rename","onRenameConfirm","_this$validateInput","validateInput","isValid","onRenameCancel","renameInput","focus","hasSuffix","endIndex","lastIndexOf","setSelectionRange","MylibRepoMenu","onMenuItemKeyDown","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","operations","showAssignDoiMenuItem","showArchiveLibraryMenuItem","showCertifyLibraryMenuItem","showEditMetadatayMenuItem","folderPermEnabled","monitorOp","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","translateOperations","translateResult","divider","unshift","RepoAPITokenPermissionEditor","onHideSelect","onSelectHandler","optionTranslation","OpIcon","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","addAPIToken","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","duration","renderAPITokenList","minHeight","onRepoAPITokenToggle","RepoShareUploadLinkItem","onDeleteLink","deleteItem","creator_name","RepoShareUploadLinksDialog","getItems","listRepoShareLinks","listRepoUploadLinks","repoShareUploadLinkList","deleteRepoShareLink","deleteRepoUploadLink","forDialog","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","AssignDoiDialog","addDoi","AsyncCreatableSelect","forwardRef","stateManagerProps","useAsync","creatableProps","useStateManager","selectProps","useCreatable","mpgInstituteOptions","defaultResourceType","resourceTypes","defaultAuthors","firstName","lastName","affs","defaultDirectors","defaultPublisher","defaultMd","authors","publisher","year","institute","department","directors","resourceType","errors","defaultValidMd","InfoArea","toggleHelp","helpTooltipOpen","toggleError","errorTooltipOpen","fontWeight","delay","helpText","KeeperArchiveMetadataForm","isFieldValid","isFormValid","validMd","outer","_step","_iterator","_createForOfIteratorHelper","s","setButtons","isButton1Disabled","isSaved","isButton2Disabled","getValidMd","md","k","onButton1","onButton2","handleAuthorAddFields","values","setAuthorInputFields","handleAuthorRemoveFields","handleAuthorInputChange","handleAuthorAffInputChange","aidx","handleAuthorAffAddFields","handleAuthorAffRemoveFields","handleDirectorAddFields","setDirectorInputFields","handleDirectorRemoveFields","handleDirectorInputChange","onResourceSelectChange","resourceOptions","filterInstitutes","promiseOptions","Promise","handleInstituteChange","insName","validationProps","valid","invalid","validationInSelects","validationInAuthors","nidx","validationInDirectors","getArchiveMetadata","getMpgInstitutes","res2","_this$setState","_this7","hideDialog","header","paddingBottom","row","Col","sm","Row","inputField","_","isClearable","cacheOptions","form","button1Label","button2Label","ArchiveLibraryDialog","onUpdateArchiveMetadata","updateArchiveMetadata","onArchiveClick","archiveLibrary","resp","quota","CertifyLibraryDialog","canCertify","certifyLibrary","certifyOnBloxberg","handleCanArchiveResponse","default_error","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareUploadLinksDialog","toggleOldFilesAutoDelDialog","onAssignDoiToggle","onArchiveLibraryToggle","onCertifyLibraryToggle","onEditMetadataToggle","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareUploadLinksDialogOpen","isOldFilesAutoDelDialogOpen","isAssignDoiDialogShow","onArchiveLibraryHide","isArchiveLibraryDialogShow","canArchive","onCertifyLibraryHide","isCertifyLibraryDialogShow","onEditMetadataHide","isEditMetadataDialogShow","renameRepo","onRenameRepo","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","renderMobileUI","MediaQuery","query","DeleteRepoDialog","TransferDialog","LibHistorySettingDialog","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","isStaff","username","isRepoOwner","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","_this$getRepoComputeP","_this$getRepoComputeP2","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","isShowTableThread","_this$getSortMetaData","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","collabServer","CollabServer","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","CreateFile","isDuplicated","onAddFile","handleCheck","pos","fileType","isdraft","addFileCancel","onAfterModelOpened","newInput","onOpened","KeeperEditMetadataDialog","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","dirPath","getFolderName","_Utils$getUserPermiss","getUserPermission","customPermission","canUpload","canCreate","upload","showShareBtn","isSupportUploadFolder","CreateFolder","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","_this$state2","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","onRename","changeState","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","onOpenViaClient","getDirentPath","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ButtonGroup","ItemDropdownMenu","tagName","toggleClass","getMenuList","MoveDirentDialog","CopyDirentDialog","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","isDirentSelected","DirOperationToolBar","tabName","tagTitle","pathPrefix","showName","InternalLinkOperation","zIndex","TagColor","togglePopover","isPopoverOpen","selectTagColor","newColor","updateRepoTag","tagColor","colorList","Popover","PopoverBody","defaultChecked","TagName","toggleMode","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","deleteTag","onDeleteTag","ListTagDialog","onListTagCancel","onCreateRepoTag","targetTagID","deleteRepoTag","repo_tag","DirTool","onShowListRepoTag","isRepoTagDialogShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onListTaggedFileToggle","currentTag","isFile","isMarkdownFile","trashUrl","ListTaggedFilesDialog","updateUsedRepoTags","CurDirPath","onDeleteRepoTag","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","entry","search","highlightedDisplay","focused","_this$props3","oldTime","CommentItem","ParticipantsList","participants","showIconTip","MentionsInput","defaultStyle","Mention","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","convertComment","mdFile","processor","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","DetailListView","getDirentPostion","repoInfo","isEditFileTagShow","direntType","direntDetail","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","classnames","active","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","isImg","isVideo","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","DirentListItem","canDrag","isDragTipShow","unfreezeItem","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","onItemCertify","certifyFile","closeSharedDialog","onMobileMenuItemClick","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onConvertWithONLYOFFICE","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","getData","draggedItem","_dragStartItemData","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","_assertThisInitialize","isHasPermissionToShare","isSelected","isHandleContextMenuEvent","getDirentItemMenuList","_customPermission$per","preview","activeDirent","_this$props4","dirHref","fileHref","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","unix","DirentsDraggedPreview","handleDragEnd","onHideDirentsDraggablePreview","handleDragOver","handleDrop","inlineStyle","DirentListView","prepareImageItem","useThumbnail","isGIF","thumbnailSizeForOriginal","fullDirentList","imageItems","isImagePopupOpen","imageIndex","moveToPrevImage","imageItemsLength","moveToNextImage","closeImagePopup","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","_Utils$getUserPermiss2","onAllItemSelected","isAllItemSelected","dragStartPosition","ImageDialog","DirListView","DirentNoneView","isRepoInfoBarShow","RepoInfoBar","readmeMarkdown","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","onAddFileNode","newUrl","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","TreeView","onNodeExpanded","onNodeCollapse","onUnFreezedItem","Copy","Move","DirColumnFile","goDraftPage","hash","isFileLoadedErr","WikiMarkdownViewer","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","progress","round","newFileName","isUploading","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","onFolderUpload","uploadingItem","cancel","retryUploadFile","_this$props5","bootstrap","firedRetry","resumableObj","_this$props6","getUpdateLink","_this$props7","pop","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","DeleteFolderDialog","deleteFolder","sharedToUserCount","sharedToGroupCount","getRepoFolderShareInfo","opTarget","alert_message","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","getFileDownloadLink","getFileContent","draftID","loadDirData","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","_res$data2","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","FileTag","_res$data3","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","restoreDeletedDirents","commitID","paths","closeAll","restoreDirents","_res$data4","addDirent","onDeleteItems","deleteMutipleDirents","deleteDirents","successTipWithUndo","_Fragment","createDir","createFile","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","toggleDeleteFolderDialog","isDeleteFolderDialogOpen","folderToDelete","deleteDir","deleteItemAjaxCallback","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","_res$data5","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","TreeNode","addChildren","selectedDirent","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","buildTree","oldonpopstate","_componentDidMount","_asyncToGenerator","_regeneratorRuntime","mark","_callee","repoRes","permissionID","permissionRes","wrap","_context","prev","decodeURIComponent","sent","RepoInfo","getCustomPermission","custom_permission","lib_need_decrypt","t0","stop","unwatchRepo","_getAsyncCopyMoveProgress","_callee2","_message","_context2","queryAsyncOperationProgress","abrupt","successful","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","CopyMoveDirentProgressDialog","DismissGroupDialog","dismissGroup","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","_React$PureComponent","onChangeUserRole","setGroupAdmin","deleteGroupMember","translateRole","roles","deleteAuthority","scope","RoleEditor","currentRole","onRoleChanged","PureComponent","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","searchMembers","keyword","membersFound","clearSearch","onSearchInputFocus","searchActive","onSearchInputBlur","_this$state3","InputGroupText","toggleManageMembersDialog","ListAndAddGroupMembers","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","inputNewName","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","canPublishRepo","GeneralToolbar","MainContentWrapper","WrapperedComponent","GeneralToolBar","FilesActivitiesWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","App","_event$state","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","Router","MyLibDeleted","OCMRepoDir","Groups","contentClassName","ReactDom","getElementById","getRandomValues","crypto","msCrypto","rnds8","rng","byteToHex","bytesToUuid","buf","bth","v4","rnds","ii","listenerId","ButtonDropdown","str","qs","qry","pairs","pair","imageTitle","Lightbox","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","binary","isBuf","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","bloblessData","deconstruction","deconstructPacket","pack","removeBlobs","encodeAsBinary","start","tryParse","decodeString","takeBinaryData","destroy","finishedReconstruction","binData","reconstructPacket","hasCORS","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","parser","Transport","hostname","port","secure","timestampParam","timestampRequests","readyState","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","doOpen","doClose","send","onOpen","onData","onPacket","selectTagcolor","createTag","createRepoTag","newTag","canSave","copyToClipboard","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","DraftItem","draftItem","ReadmeDialog","readmeContent","MarkdownViewer","showTOC","scriptSource","onListTaggedFiles","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","re","parts","m","uri","host","authority","ipv6uri","pathNames","regx","queryKey","$0","$2","arr","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","isView","eio","Socket","Backoff","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","jitter","timeout","connecting","lastPing","encoding","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","cleanup","timer","onping","onpong","ondata","ondecoded","onerror","onConnecting","processPacketQueue","shift","subsLength","reset","onclose","reason","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","poll","pause","doPoll","doWrite","schema","sid","withNativeBlob","withNativeFile","File","toJSON","alphabet","seed","decoded","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","ev","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","emitBuffered","lookup","cache","managers","parsed","forceNew","multiplex","contentClass","getTitlesInfo","titlesInfo","titleDom","updateTabTitle","headingList","offsetTop","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","index2","originalPath","pathNormalize","isInternalFileLink","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","links","progressStyle","lineHeight","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","_customPermission$per2","renderChildren","paddingLeft","hasChildren","_Utils$getUserPermiss3","_this$getNodeTypeAndI","hlClass","dragStartNodeData","isTreeViewDropTipShow","_dragStartNodeData","dropNodeData","parseuri","loc","createDebug","prevTime","enabled","curr","ms","coerce","formatter","logFn","abs","selectColor","init","instances","stack","skips","instance","h","plural","isNaN","long","fmtShort","_deconstructPacket","_placeholder","newData","_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","onDrain","probe","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","Request","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","fromError","abort","attachEvent","unloadHandler","arraybuffer","end","bytes","abv","count","err_cb","bail","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","codePoints","byteString","tmp","array","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","chunk","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","removeChild","insertAt","insertBefore","area","iframeId","complete","initIframe","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","addEventListeners","onmessage","factor","pow","rand","deviation","initCustomEvent","factory","SpriteSymbol","viewBox","createCommonjsModule","this$1","deepmerge","isMergeableObject","emptyTarget","cloneIfNecessary","optionsArgument","defaultArrayMerge","destination","mergeObject","arrayMerge","namespaces_1","default","svg","xlink","defaultAttrs","wrapInSvgString","attrsRendered","attrs","attr","objectToAttrsString","BrowserSpriteSymbol","SpriteSymbol$$1","__proto__","prototypeAccessors","isMounted","createFromExistingNode","outerHTML","unmount","mountTarget","hasImportNode","importNode","doc","DOMParser","parseFromString","childNodes","svg$1","xlink$1","defaultConfig","Sprite","existing","remove","stringifiedSymbols","defaultConfig$1","autoConfigure","mountTo","syncUrlsWithBaseTag","listenLocationChangeEvent","locationChangeEvent","locationChangeAngularEmitter","usagesToUpdate","moveGradientsOutsideSymbol","arrayFrom","arrayLike","browser","getUrlWithoutFragment","angular","run","$rootScope","$on","oldUrl","xLinkNS","xLinkAttrName","specialUrlCharsPattern","sprite","attList","attSelector","updateUrls","references","replaceWith","startsWithEncoded","replaceWithEncoded","nodes","matcher","arrayfied","matched","selectAttributes","localName","setAttributeNS","updateReferences","Events","BrowserSprite","Sprite$$1","cfg","emitter","handler","evt","_emitter","_autoConfigure","baseUrl","handleLocationChange","_handleLocationChange","spriteNode","symbolNode","updatedNodes","evalStylesIEWorkaround","isNewSymbol","attach","prepend","mountNode","usages","ready$1","fns","hack","doScroll","domContentLoaded","definition","spriteNodeId","spriteGlobalVarName","loadSprite"],"mappings":"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","file":"static/js/app.chunk.js","sourcesContent":["export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} autoFocus={false}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","var map = {\n\t\"./monitor.svg\": 1671\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1670;","import SpriteSymbol from \"../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"monitor\",\n  \"use\": \"monitor-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"monitor\\\"><g><g transform=\\\"translate(1.000000, 1.000000)\\\"><path class=\\\"st0\\\" fill=\\\"currentColor\\\" d=\\\"M25.1,20.8c-0.5-0.2-0.8-0.6-0.9-1.1v-4.7c0-4.4-4.2-7.3-6-8.3c-0.1-0.5-0.4-1.4-1-2\\n\\t\\t\\tc-0.6-0.6-1.4-0.9-2.3-0.8h-0.1c-0.8,0-1.6,0.3-2.3,0.8c-0.7,0.6-0.9,1.5-1,2c-1.8,0.9-6,3.8-6,8.3v4.6c0,0.5-0.4,0.9-0.9,1.1\\n\\t\\t\\tc-1.6,0.7-1.8,2.1-1.4,3.1c0.2,0.5,0.6,1,3.6,1h2.5c0.2,2.6,2.5,4.6,5.4,4.6s5.3-2.1,5.4-4.6h2.6c3,0,3.4-0.5,3.6-1\\n\\t\\t\\tC26.9,22.9,26.7,21.5,25.1,20.8L25.1,20.8z M14.9,27.8c-1.9,0-3.4-1.3-3.6-2.9h7.1C18.3,26.5,16.8,27.8,14.9,27.8L14.9,27.8z\\n\\t\\t\\t M22.9,23.1H7c-0.6,0-1.3,0-1.9-0.1c0-0.3,0.1-0.4,0.5-0.6c1.1-0.5,1.9-1.5,1.9-2.7v-4.7c0-3.9,4.5-6.5,5.3-6.9L13.4,8V7.4\\n\\t\\t\\tc0-0.2,0.1-1.7,1.5-1.7H15c1.4,0,1.5,1.5,1.5,1.7V8L17,8.2c0.8,0.3,5.3,2.9,5.3,6.9v4.7c0,1.2,0.8,2.2,1.9,2.7\\n\\t\\t\\tc0.4,0.2,0.5,0.3,0.5,0.6C24.2,23.1,23.5,23.1,22.9,23.1L22.9,23.1z\\\" /><path class=\\\"st0\\\" d=\\\"M23.9,0.2c0.4,0.3,0.6,0.9,0.3,1.3l-2.1,3.2c-0.3,0.4-0.9,0.6-1.3,0.3s-0.6-0.9-0.3-1.3l2.1-3.2\\n\\t\\t\\tC22.8,0,23.4-0.1,23.9,0.2z M29.9,7.1c0.2,0.5,0,1.1-0.5,1.3L25.9,10c-0.5,0.2-1,0-1.3-0.5c-0.2-0.5,0-1,0.5-1.3l3.5-1.6\\n\\t\\t\\tC29.1,6.4,29.7,6.6,29.9,7.1L29.9,7.1z M0.1,7.1c0.1-0.2,0.3-0.4,0.5-0.5c0.2-0.1,0.5-0.1,0.7,0l3.5,1.6c0.3,0.1,0.5,0.5,0.5,0.8\\n\\t\\t\\tc0,0.3-0.1,0.7-0.4,0.9c-0.3,0.2-0.6,0.2-1,0.1L0.6,8.4C0.1,8.2-0.1,7.6,0.1,7.1L0.1,7.1z M6.1,0.2C6.3,0,6.6,0,6.8,0\\n\\t\\t\\ts0.5,0.2,0.6,0.4l2.1,3.2c0.2,0.3,0.2,0.7,0.1,1S9.1,5.2,8.8,5.2C8.4,5.2,8.1,5,7.9,4.7L5.8,1.5C5.7,1.3,5.6,1,5.7,0.8\\n\\t\\t\\tC5.8,0.5,5.9,0.3,6.1,0.2L6.1,0.2L6.1,0.2z\\\" /></g></g></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from './Tooltip';\nimport { omit } from './utils';\nvar omitKeys = ['defaultOpen'];\n\nvar UncontrolledTooltip = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(UncontrolledTooltip, _Component);\n\n  function UncontrolledTooltip(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this.state = {\n      isOpen: props.defaultOpen || false\n    };\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = UncontrolledTooltip.prototype;\n\n  _proto.toggle = function toggle() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(Tooltip, _extends({\n      isOpen: this.state.isOpen,\n      toggle: this.toggle\n    }, omit(this.props, omitKeys)));\n  };\n\n  return UncontrolledTooltip;\n}(Component);\n\nexport { UncontrolledTooltip as default };\nUncontrolledTooltip.propTypes = _objectSpread({\n  defaultOpen: PropTypes.bool\n}, Tooltip.propTypes);","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = function (fn) {\n  return NATIVE_BIND ? uncurryThisWithBind(fn) : function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nvar toString = uncurryThisRaw({}.toString);\nvar stringSlice = uncurryThisRaw(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var classofRaw = require('../internals/classof-raw');\nvar uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThisRaw(fn);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.25.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","var isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export default {\n  GLOBAL: {\n    HIDE: '__react_tooltip_hide_event',\n    REBUILD: '__react_tooltip_rebuild_event',\n    SHOW: '__react_tooltip_show_event'\n  }\n};\n","/**\n * Static methods for react-tooltip\n */\nimport CONSTANT from '../constant';\n\nconst dispatchGlobalEvent = (eventName, opts) => {\n  // Compatible with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent(eventName, false, true, opts);\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport default function(target) {\n  /**\n   * Hide all tooltip\n   * @trigger ReactTooltip.hide()\n   */\n  target.hide = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.HIDE, { target });\n  };\n\n  /**\n   * Rebuild all tooltip\n   * @trigger ReactTooltip.rebuild()\n   */\n  target.rebuild = () => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.REBUILD);\n  };\n\n  /**\n   * Show specific tooltip\n   * @trigger ReactTooltip.show()\n   */\n  target.show = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.SHOW, { target });\n  };\n\n  target.prototype.globalRebuild = function() {\n    if (this.mount) {\n      this.unbindListener();\n      this.bindListener();\n    }\n  };\n\n  target.prototype.globalShow = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      // Create a fake event, specific show will limit the type to `solid`\n      // only `float` type cares e.clientX e.clientY\n      this.showTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        true\n      );\n    }\n  };\n\n  target.prototype.globalHide = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      this.hideTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        hasTarget\n      );\n    }\n  };\n}\n","/**\n * Custom events to control showing and hiding of tooltip\n *\n * @attributes\n * - `event` {String}\n * - `eventOff` {String}\n */\n\nexport const checkStatus = function(dataEventOff, e) {\n  const { show } = this.state;\n  const { id } = this.props;\n  const isCapture = this.isCapture(e.currentTarget);\n  const currentItem = e.currentTarget.getAttribute('currentItem');\n\n  if (!isCapture) e.stopPropagation();\n  if (show && currentItem === 'true') {\n    if (!dataEventOff) this.hideTooltip(e);\n  } else {\n    e.currentTarget.setAttribute('currentItem', 'true');\n    setUntargetItems(e.currentTarget, this.getTargetArray(id));\n    this.showTooltip(e);\n  }\n};\n\nconst setUntargetItems = function(currentTarget, targetArray) {\n  for (let i = 0; i < targetArray.length; i++) {\n    if (currentTarget !== targetArray[i]) {\n      targetArray[i].setAttribute('currentItem', 'false');\n    } else {\n      targetArray[i].setAttribute('currentItem', 'true');\n    }\n  }\n};\n\nconst customListeners = {\n  id: '9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf',\n  set(target, event, listener) {\n    if (this.id in target) {\n      const map = target[this.id];\n      map[event] = listener;\n    } else {\n      // this is workaround for WeakMap, which is not supported in older browsers, such as IE\n      Object.defineProperty(target, this.id, {\n        configurable: true,\n        value: { [event]: listener }\n      });\n    }\n  },\n  get(target, event) {\n    const map = target[this.id];\n    if (map !== undefined) {\n      return map[event];\n    }\n  }\n};\n\nexport default function(target) {\n  target.prototype.isCustomEvent = function(ele) {\n    const { event } = this.state;\n    return event || !!ele.getAttribute('data-event');\n  };\n\n  /* Bind listener for custom event */\n  target.prototype.customBindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = ele.getAttribute('data-event') || event;\n    const dataEventOff = ele.getAttribute('data-event-off') || eventOff;\n\n    dataEvent.split(' ').forEach(event => {\n      ele.removeEventListener(event, customListeners.get(ele, event));\n      const customListener = checkStatus.bind(this, dataEventOff);\n      customListeners.set(ele, event, customListener);\n      ele.addEventListener(event, customListener, false);\n    });\n    if (dataEventOff) {\n      dataEventOff.split(' ').forEach(event => {\n        ele.removeEventListener(event, this.hideTooltip);\n        ele.addEventListener(event, this.hideTooltip, false);\n      });\n    }\n  };\n\n  /* Unbind listener for custom event */\n  target.prototype.customUnbindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = event || ele.getAttribute('data-event');\n    const dataEventOff = eventOff || ele.getAttribute('data-event-off');\n\n    ele.removeEventListener(dataEvent, customListeners.get(ele, event));\n    if (dataEventOff) ele.removeEventListener(dataEventOff, this.hideTooltip);\n  };\n}\n","/**\n * Util method to get effect\n */\nimport { checkStatus } from './customEvent';\n\nconst makeProxy = (e) => {\n  const proxy = {};\n  for (const key in e) {\n    if (typeof e[key] === 'function') {\n      proxy[key] = e[key].bind(e);\n    } else {\n      proxy[key] = e[key];\n    }\n  }\n  return proxy;\n};\n\nconst bodyListener = function (callback, options, e) {\n  const { respectEffect = false, customEvent = false } = options;\n  const { id } = this.props;\n\n  let tip = null;\n  let forId;\n  let target = e.target;\n  let lastTarget;\n  // walk up parent chain until tip is found\n  // there is no match if parent visible area is matched by mouse position, so some corner cases might not work as expected\n  while (tip === null && target !== null) {\n    lastTarget = target;\n    tip = target.getAttribute('data-tip') || null;\n    forId = target.getAttribute('data-for') || null;\n    target = target.parentElement;\n  }\n\n  target = lastTarget || e.target;\n\n  if (this.isCustomEvent(target) && !customEvent) {\n    return;\n  }\n\n  const isTargetBelongsToTooltip =\n    (id == null && forId == null) || forId === id;\n\n  if (\n    tip != null &&\n    (!respectEffect || this.getEffect(target) === 'float') &&\n    isTargetBelongsToTooltip\n  ) {\n    const proxy = makeProxy(e);\n    proxy.currentTarget = target;\n    callback(proxy);\n  }\n};\n\nconst findCustomEvents = (targetArray, dataAttribute) => {\n  const events = {};\n  targetArray.forEach((target) => {\n    const event = target.getAttribute(dataAttribute);\n    if (event) event.split(' ').forEach((event) => (events[event] = true));\n  });\n\n  return events;\n};\n\nconst getBody = () => document.getElementsByTagName('body')[0];\n\nexport default function (target) {\n  target.prototype.isBodyMode = function () {\n    return !!this.props.bodyMode;\n  };\n\n  target.prototype.bindBodyListener = function (targetArray) {\n    const { event, eventOff, possibleCustomEvents, possibleCustomEventsOff } =\n      this.state;\n    const body = getBody();\n\n    const customEvents = findCustomEvents(targetArray, 'data-event');\n    const customEventsOff = findCustomEvents(targetArray, 'data-event-off');\n\n    if (event != null) customEvents[event] = true;\n    if (eventOff != null) customEventsOff[eventOff] = true;\n    possibleCustomEvents\n      .split(' ')\n      .forEach((event) => (customEvents[event] = true));\n    possibleCustomEventsOff\n      .split(' ')\n      .forEach((event) => (customEventsOff[event] = true));\n\n    this.unbindBodyListener(body);\n\n    const listeners = (this.bodyModeListeners = {});\n    if (event == null) {\n      listeners.mouseover = bodyListener.bind(this, this.showTooltip, {});\n      listeners.mousemove = bodyListener.bind(this, this.updateTooltip, {\n        respectEffect: true\n      });\n      listeners.mouseout = bodyListener.bind(this, this.hideTooltip, {});\n    }\n\n    for (const event in customEvents) {\n      listeners[event] = bodyListener.bind(\n        this,\n        (e) => {\n          const targetEventOff =\n            e.currentTarget.getAttribute('data-event-off') || eventOff;\n          checkStatus.call(this, targetEventOff, e);\n        },\n        { customEvent: true }\n      );\n    }\n    for (const event in customEventsOff) {\n      listeners[event] = bodyListener.bind(this, this.hideTooltip, {\n        customEvent: true\n      });\n    }\n    for (const event in listeners) {\n      body.addEventListener(event, listeners[event]);\n    }\n  };\n\n  target.prototype.unbindBodyListener = function (body) {\n    body = body || getBody();\n\n    const listeners = this.bodyModeListeners;\n    for (const event in listeners) {\n      body.removeEventListener(event, listeners[event]);\n    }\n  };\n}\n","/**\n * Calculate the position of tooltip\n *\n * @params\n * - `e` {Event} the event of current mouse\n * - `target` {Element} the currentTarget of the event\n * - `node` {DOM} the react-tooltip object\n * - `place` {String} top / right / bottom / left\n * - `effect` {String} float / solid\n * - `offset` {Object} the offset to default position\n *\n * @return {Object}\n * - `isNewState` {Bool} required\n * - `newState` {Object}\n * - `position` {Object} {left: {Number}, top: {Number}}\n */\nexport default function (e, target, node, place, desiredPlace, effect, offset) {\n  const { width: tipWidth, height: tipHeight } = getDimensions(node);\n\n  const { width: targetWidth, height: targetHeight } = getDimensions(target);\n\n  const { mouseX, mouseY } = getCurrentOffset(e, target, effect);\n  const defaultOffset = getDefaultPosition(\n    effect,\n    targetWidth,\n    targetHeight,\n    tipWidth,\n    tipHeight\n  );\n  const { extraOffsetX, extraOffsetY } = calculateOffset(offset);\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  const { parentTop, parentLeft } = getParent(node);\n\n  // Get the edge offset of the tooltip\n  const getTipOffsetLeft = (place) => {\n    const offsetX = defaultOffset[place].l;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetRight = (place) => {\n    const offsetX = defaultOffset[place].r;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetTop = (place) => {\n    const offsetY = defaultOffset[place].t;\n    return mouseY + offsetY + extraOffsetY;\n  };\n  const getTipOffsetBottom = (place) => {\n    const offsetY = defaultOffset[place].b;\n    return mouseY + offsetY + extraOffsetY;\n  };\n\n  //\n  // Functions to test whether the tooltip's sides are inside\n  // the client window for a given orientation p\n  //\n  //  _____________\n  // |             | <-- Right side\n  // | p = 'left'  |\\\n  // |             |/  |\\\n  // |_____________|   |_\\  <-- Mouse\n  //      / \\           |\n  //       |\n  //       |\n  //  Bottom side\n  //\n  const outsideLeft = (p) => getTipOffsetLeft(p) < 0;\n  const outsideRight = (p) => getTipOffsetRight(p) > windowWidth;\n  const outsideTop = (p) => getTipOffsetTop(p) < 0;\n  const outsideBottom = (p) => getTipOffsetBottom(p) > windowHeight;\n\n  // Check whether the tooltip with orientation p is completely inside the client window\n  const outside = (p) =>\n    outsideLeft(p) || outsideRight(p) || outsideTop(p) || outsideBottom(p);\n  const inside = (p) => !outside(p);\n\n  const placeIsInside = {\n    top: inside('top'),\n    bottom: inside('bottom'),\n    left: inside('left'),\n    right: inside('right')\n  };\n\n  function choose() {\n    const allPlaces = desiredPlace\n      .split(',')\n      .concat(place, ['top', 'bottom', 'left', 'right']);\n    for (const d of allPlaces) {\n      if (placeIsInside[d]) return d;\n    }\n    // if nothing is inside, just use the old place.\n    return place;\n  }\n\n  const chosen = choose();\n\n  let isNewState = false;\n  let newPlace;\n  if (chosen && chosen !== place) {\n    isNewState = true;\n    newPlace = chosen;\n  }\n\n  if (isNewState) {\n    return {\n      isNewState: true,\n      newState: { place: newPlace }\n    };\n  }\n\n  return {\n    isNewState: false,\n    position: {\n      left: parseInt(getTipOffsetLeft(place) - parentLeft, 10),\n      top: parseInt(getTipOffsetTop(place) - parentTop, 10)\n    }\n  };\n}\n\nconst getDimensions = (node) => {\n  const { height, width } = node.getBoundingClientRect();\n  return {\n    height: parseInt(height, 10),\n    width: parseInt(width, 10)\n  };\n};\n\n// Get current mouse offset\nconst getCurrentOffset = (e, currentTarget, effect) => {\n  const boundingClientRect = currentTarget.getBoundingClientRect();\n  const targetTop = boundingClientRect.top;\n  const targetLeft = boundingClientRect.left;\n  const { width: targetWidth, height: targetHeight } =\n    getDimensions(currentTarget);\n\n  if (effect === 'float') {\n    return {\n      mouseX: e.clientX,\n      mouseY: e.clientY\n    };\n  }\n  return {\n    mouseX: targetLeft + targetWidth / 2,\n    mouseY: targetTop + targetHeight / 2\n  };\n};\n\n// List all possibility of tooltip final offset\n// This is useful in judging if it is necessary for tooltip to switch position when out of window\nconst getDefaultPosition = (\n  effect,\n  targetWidth,\n  targetHeight,\n  tipWidth,\n  tipHeight\n) => {\n  let top;\n  let right;\n  let bottom;\n  let left;\n  const disToMouse = 3;\n  const triangleHeight = 2;\n  const cursorHeight = 12; // Optimize for float bottom only, cause the cursor will hide the tooltip\n\n  if (effect === 'float') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(tipHeight + disToMouse + triangleHeight),\n      b: -disToMouse\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: disToMouse + cursorHeight,\n      b: tipHeight + disToMouse + triangleHeight + cursorHeight\n    };\n    left = {\n      l: -(tipWidth + disToMouse + triangleHeight),\n      r: -disToMouse,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: disToMouse,\n      r: tipWidth + disToMouse + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  } else if (effect === 'solid') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(targetHeight / 2 + tipHeight + triangleHeight),\n      b: -(targetHeight / 2)\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: targetHeight / 2,\n      b: targetHeight / 2 + tipHeight + triangleHeight\n    };\n    left = {\n      l: -(tipWidth + targetWidth / 2 + triangleHeight),\n      r: -(targetWidth / 2),\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: targetWidth / 2,\n      r: tipWidth + targetWidth / 2 + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  }\n\n  return { top, bottom, left, right };\n};\n\n// Consider additional offset into position calculation\nconst calculateOffset = (offset) => {\n  let extraOffsetX = 0;\n  let extraOffsetY = 0;\n\n  if (Object.prototype.toString.apply(offset) === '[object String]') {\n    offset = JSON.parse(offset.toString().replace(/'/g, '\"'));\n  }\n  for (const key in offset) {\n    if (key === 'top') {\n      extraOffsetY -= parseInt(offset[key], 10);\n    } else if (key === 'bottom') {\n      extraOffsetY += parseInt(offset[key], 10);\n    } else if (key === 'left') {\n      extraOffsetX -= parseInt(offset[key], 10);\n    } else if (key === 'right') {\n      extraOffsetX += parseInt(offset[key], 10);\n    }\n  }\n\n  return { extraOffsetX, extraOffsetY };\n};\n\n// Get the offset of the parent elements\nconst getParent = (currentTarget) => {\n  let currentParent = currentTarget;\n  while (currentParent) {\n    const computedStyle = window.getComputedStyle(currentParent);\n    // transform and will-change: transform change the containing block\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_Block\n    if (\n      computedStyle.getPropertyValue('transform') !== 'none' ||\n      computedStyle.getPropertyValue('will-change') === 'transform'\n    )\n      break;\n    currentParent = currentParent.parentElement;\n  }\n\n  const parentTop =\n    (currentParent && currentParent.getBoundingClientRect().top) || 0;\n  const parentLeft =\n    (currentParent && currentParent.getBoundingClientRect().left) || 0;\n\n  return { parentTop, parentLeft };\n};\n","/**\n * To get the tooltip content\n * it may comes from data-tip or this.props.children\n * it should support multiline\n *\n * @params\n * - `tip` {String} value of data-tip\n * - `children` {ReactElement} this.props.children\n * - `multiline` {Any} could be Bool(true/false) or String('true'/'false')\n *\n * @return\n * - String or react component\n */\nimport React from 'react';\n\nexport default function TipContent(tip, children, getContent, multiline) {\n  if (children) return children;\n  if (getContent !== undefined && getContent !== null) return getContent; // getContent can be 0, '', etc.\n  if (getContent === null) return null; // Tip not exist and children is null or undefined\n\n  const regexp = /<br\\s*\\/?>/;\n  if (!multiline || multiline === 'false' || !regexp.test(tip)) {\n    // No trim(), so that user can keep their input\n    return tip;\n  }\n\n  // Multiline tooltip content\n  return tip.split(regexp).map((d, i) => {\n    return (\n      <span key={i} className=\"multi-line\">\n        {d}\n      </span>\n    );\n  });\n}\n","/**\n * Support aria- and role in ReactTooltip\n *\n * @params props {Object}\n * @return {Object}\n */\nexport function parseAria(props) {\n  const ariaObj = {};\n  Object.keys(props)\n    .filter(prop => {\n      // aria-xxx and role is acceptable\n      return /(^aria-\\w+$|^role$)/.test(prop);\n    })\n    .forEach(prop => {\n      ariaObj[prop] = props[prop];\n    });\n\n  return ariaObj;\n}\n","/**\n * Convert nodelist to array\n * @see https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/core/createArrayFromMixed.js#L24\n * NodeLists are functions in Safari\n */\n\nexport default function(nodeList) {\n  const length = nodeList.length;\n  if (nodeList.hasOwnProperty) {\n    return Array.prototype.slice.call(nodeList);\n  }\n  return new Array(length).fill().map(index => nodeList[index]);\n}\n","/**\n * Default pop-up style values (text color, background color).\n */\nconst defaultColors = {\n  dark: {\n    text: '#fff',\n    background: '#222',\n    border: 'transparent',\n    arrow: '#222'\n  },\n  success: {\n    text: '#fff',\n    background: '#8DC572',\n    border: 'transparent',\n    arrow: '#8DC572'\n  },\n  warning: {\n    text: '#fff',\n    background: '#F0AD4E',\n    border: 'transparent',\n    arrow: '#F0AD4E'\n  },\n  error: {\n    text: '#fff',\n    background: '#BE6464',\n    border: 'transparent',\n    arrow: '#BE6464'\n  },\n  info: {\n    text: '#fff',\n    background: '#337AB7',\n    border: 'transparent',\n    arrow: '#337AB7'\n  },\n  light: {\n    text: '#222',\n    background: '#fff',\n    border: 'transparent',\n    arrow: '#fff'\n  }\n};\n\nexport function getDefaultPopupColors(type) {\n  return defaultColors[type] ? { ...defaultColors[type] } : undefined;\n}\n\nexport const DEFAULT_PADDING = '8px 21px';\n\nexport const DEFAULT_RADIUS = {\n  tooltip: 3,\n  arrow: 0\n};\n","import {\n  getDefaultPopupColors,\n  DEFAULT_PADDING,\n  DEFAULT_RADIUS\n} from './defaultStyles';\n\n/**\n * Generates the specific tooltip style for use on render.\n */\nexport function generateTooltipStyle(\n  uuid,\n  customColors,\n  type,\n  hasBorder,\n  padding,\n  radius\n) {\n  return generateStyle(\n    uuid,\n    getPopupColors(customColors, type, hasBorder),\n    padding,\n    radius\n  );\n}\n\n/**\n * Generates the tooltip style rules based on the element-specified \"data-type\" property.\n */\nfunction generateStyle(\n  uuid,\n  colors,\n  padding = DEFAULT_PADDING,\n  radius = DEFAULT_RADIUS\n) {\n  const textColor = colors.text;\n  const backgroundColor = colors.background;\n  const borderColor = colors.border;\n  const arrowColor = colors.arrow;\n  const arrowRadius = radius.arrow;\n  const tooltipRadius = radius.tooltip;\n\n  return `\n  \t.${uuid} {\n\t    color: ${textColor};\n\t    background: ${backgroundColor};\n\t    border: 1px solid ${borderColor};\n\t    border-radius: ${tooltipRadius}px;\n\t    padding: ${padding};\n  \t}\n\n  \t.${uuid}.place-top {\n        margin-top: -10px;\n    }\n    .${uuid}.place-top::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: 2;\n        width: 20px;\n        height: 12px;\n    }\n    .${uuid}.place-top::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(135deg);\n    }\n\n    .${uuid}.place-bottom {\n        margin-top: 10px;\n    }\n    .${uuid}.place-bottom::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 18px;\n        height: 10px;\n    }\n    .${uuid}.place-bottom::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        top: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-left {\n        margin-left: -10px;\n    }\n    .${uuid}.place-left::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-left::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        right: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-right {\n        margin-left: 10px;\n    }\n    .${uuid}.place-right::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-right::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        left: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(-135deg);\n    }\n  `;\n}\n\nfunction getPopupColors(customColors, type, hasBorder) {\n  const textColor = customColors.text;\n  const backgroundColor = customColors.background;\n  const borderColor = customColors.border;\n  const arrowColor = customColors.arrow\n    ? customColors.arrow\n    : customColors.background;\n\n  const colors = getDefaultPopupColors(type);\n\n  if (textColor) {\n    colors.text = textColor;\n  }\n\n  if (backgroundColor) {\n    colors.background = backgroundColor;\n  }\n\n  if (hasBorder) {\n    if (borderColor) {\n      colors.border = borderColor;\n    } else {\n      colors.border = type === 'light' ? 'black' : 'white';\n    }\n  }\n\n  if (arrowColor) {\n    colors.arrow = arrowColor;\n  }\n\n  return colors;\n}\n","/* eslint-disable no-unused-vars, dot-notation */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/* Decorators */\nimport staticMethods from './decorators/staticMethods';\nimport windowListener from './decorators/windowListener';\nimport customEvent from './decorators/customEvent';\nimport isCapture from './decorators/isCapture';\nimport getEffect from './decorators/getEffect';\nimport bodyMode from './decorators/bodyMode';\nimport trackRemoval from './decorators/trackRemoval';\n\n/* Utils */\nimport getPosition from './utils/getPosition';\nimport getTipContent from './utils/getTipContent';\nimport { parseAria } from './utils/aria';\nimport nodeListToArray from './utils/nodeListToArray';\nimport { generateUUID } from './utils/uuid';\n\n/* CSS */\nimport baseCss from './index.scss';\nimport { generateTooltipStyle } from './decorators/styler';\n\n/* Polyfill */\nimport 'core-js/modules/es.array.find';\n\n@staticMethods\n@windowListener\n@customEvent\n@isCapture\n@getEffect\n@bodyMode\n@trackRemoval\nclass ReactTooltip extends React.Component {\n  static get propTypes() {\n    return {\n      uuid: PropTypes.string,\n      children: PropTypes.any,\n      place: PropTypes.string,\n      type: PropTypes.string,\n      effect: PropTypes.string,\n      offset: PropTypes.object,\n      padding: PropTypes.string,\n      multiline: PropTypes.bool,\n      border: PropTypes.bool,\n      borderClass: PropTypes.string,\n      textColor: PropTypes.string,\n      backgroundColor: PropTypes.string,\n      borderColor: PropTypes.string,\n      arrowColor: PropTypes.string,\n      arrowRadius: PropTypes.string,\n      tooltipRadius: PropTypes.string,\n      insecure: PropTypes.bool,\n      class: PropTypes.string,\n      className: PropTypes.string,\n      id: PropTypes.string,\n      html: PropTypes.bool,\n      delayHide: PropTypes.number,\n      delayUpdate: PropTypes.number,\n      delayShow: PropTypes.number,\n      event: PropTypes.string,\n      eventOff: PropTypes.string,\n      isCapture: PropTypes.bool,\n      globalEventOff: PropTypes.string,\n      getContent: PropTypes.any,\n      afterShow: PropTypes.func,\n      afterHide: PropTypes.func,\n      overridePosition: PropTypes.func,\n      disable: PropTypes.bool,\n      scrollHide: PropTypes.bool,\n      resizeHide: PropTypes.bool,\n      wrapper: PropTypes.string,\n      bodyMode: PropTypes.bool,\n      possibleCustomEvents: PropTypes.string,\n      possibleCustomEventsOff: PropTypes.string,\n      clickable: PropTypes.bool,\n      disableInternalStyle: PropTypes.bool\n    };\n  }\n\n  static defaultProps = {\n    insecure: true,\n    resizeHide: true,\n    wrapper: 'div',\n    clickable: false\n  };\n\n  static supportedWrappers = ['div', 'span'];\n\n  static displayName = 'ReactTooltip';\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uuid: props.uuid || generateUUID(),\n      place: props.place || 'top', // Direction of tooltip\n      desiredPlace: props.place || 'top',\n      type: props.type || 'dark', // Color theme of tooltip\n      effect: props.effect || 'float', // float or fixed\n      show: false,\n      border: false,\n      borderClass: 'border',\n      customColors: {},\n      customRadius: {},\n      offset: {},\n      padding: props.padding,\n      extraClass: '',\n      html: false,\n      delayHide: 0,\n      delayShow: 0,\n      event: props.event || null,\n      eventOff: props.eventOff || null,\n      currentEvent: null, // Current mouse event\n      currentTarget: null, // Current target of mouse event\n      ariaProps: parseAria(props), // aria- and role attributes\n      isEmptyTip: false,\n      disable: false,\n      possibleCustomEvents: props.possibleCustomEvents || '',\n      possibleCustomEventsOff: props.possibleCustomEventsOff || '',\n      originTooltip: null,\n      isMultiline: false\n    };\n\n    this.bind([\n      'showTooltip',\n      'updateTooltip',\n      'hideTooltip',\n      'hideTooltipOnScroll',\n      'getTooltipContent',\n      'globalRebuild',\n      'globalShow',\n      'globalHide',\n      'onWindowResize',\n      'mouseOnToolTip'\n    ]);\n\n    this.mount = true;\n    this.delayShowLoop = null;\n    this.delayHideLoop = null;\n    this.delayReshow = null;\n    this.intervalUpdateContent = null;\n  }\n\n  /**\n   * For unify the bind and unbind listener\n   */\n  bind(methodArray) {\n    methodArray.forEach((method) => {\n      this[method] = this[method].bind(this);\n    });\n  }\n\n  componentDidMount() {\n    const { insecure, resizeHide, disableInternalStyle } = this.props;\n    this.mount = true;\n\n    this.bindListener(); // Bind listener for tooltip\n    this.bindWindowEvents(resizeHide); // Bind global event for static method\n\n    if (!disableInternalStyle) {\n      this.injectStyles(); // Inject styles for each DOM root having tooltip.\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { ariaProps } = prevState;\n    const newAriaProps = parseAria(nextProps);\n    const isChanged = Object.keys(newAriaProps).some((props) => {\n      return newAriaProps[props] !== ariaProps[props];\n    });\n    if (!isChanged) {\n      return null;\n    }\n    return {\n      ...prevState,\n      ariaProps: newAriaProps\n    };\n  }\n\n  componentWillUnmount() {\n    this.mount = false;\n\n    this.clearTimer();\n\n    this.unbindListener();\n    this.removeScrollListener(this.state.currentTarget);\n    this.unbindWindowEvents();\n  }\n\n  /* Look for the closest DOM root having tooltip and inject styles. */\n  injectStyles() {\n    const { tooltipRef } = this;\n    if (!tooltipRef) {\n      return;\n    }\n\n    let parentNode = tooltipRef.parentNode;\n    while (parentNode.parentNode) {\n      parentNode = parentNode.parentNode;\n    }\n\n    let domRoot;\n\n    switch (parentNode.constructor.name) {\n      case 'Document':\n      case 'HTMLDocument':\n      case undefined:\n        domRoot = parentNode.head;\n        break;\n      case 'ShadowRoot':\n      default:\n        domRoot = parentNode;\n        break;\n    }\n\n    // Prevent styles duplication.\n    if (!domRoot.querySelector('style[data-react-tooltip]')) {\n      const style = document.createElement('style');\n      style.textContent = baseCss;\n      style.setAttribute('data-react-tooltip', 'true');\n\n      domRoot.appendChild(style);\n    }\n  }\n\n  /**\n   * Return if the mouse is on the tooltip.\n   * @returns {boolean} true - mouse is on the tooltip\n   */\n  mouseOnToolTip() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      /* old IE or Firefox work around */\n      if (!this.tooltipRef.matches) {\n        /* old IE work around */\n        if (this.tooltipRef.msMatchesSelector) {\n          this.tooltipRef.matches = this.tooltipRef.msMatchesSelector;\n        } else {\n          /* old Firefox work around */\n          this.tooltipRef.matches = this.tooltipRef.mozMatchesSelector;\n        }\n      }\n      return this.tooltipRef.matches(':hover');\n    }\n    return false;\n  }\n\n  /**\n   * Pick out corresponded target elements\n   */\n  getTargetArray(id) {\n    let targetArray = [];\n    let selector;\n    if (!id) {\n      selector = '[data-tip]:not([data-for])';\n    } else {\n      const escaped = id.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"');\n      selector = `[data-tip][data-for=\"${escaped}\"]`;\n    }\n\n    // Scan document for shadow DOM elements\n    nodeListToArray(document.getElementsByTagName('*'))\n      .filter((element) => element.shadowRoot)\n      .forEach((element) => {\n        targetArray = targetArray.concat(\n          nodeListToArray(element.shadowRoot.querySelectorAll(selector))\n        );\n      });\n    return targetArray.concat(\n      nodeListToArray(document.querySelectorAll(selector))\n    );\n  }\n\n  /**\n   * Bind listener to the target elements\n   * These listeners used to trigger showing or hiding the tooltip\n   */\n  bindListener() {\n    const { id, globalEventOff, isCapture } = this.props;\n    const targetArray = this.getTargetArray(id);\n\n    targetArray.forEach((target) => {\n      if (target.getAttribute('currentItem') === null) {\n        target.setAttribute('currentItem', 'false');\n      }\n      this.unbindBasicListener(target);\n      if (this.isCustomEvent(target)) {\n        this.customUnbindListener(target);\n      }\n    });\n\n    if (this.isBodyMode()) {\n      this.bindBodyListener(targetArray);\n    } else {\n      targetArray.forEach((target) => {\n        const isCaptureMode = this.isCapture(target);\n        const effect = this.getEffect(target);\n        if (this.isCustomEvent(target)) {\n          this.customBindListener(target);\n          return;\n        }\n\n        target.addEventListener('mouseenter', this.showTooltip, isCaptureMode);\n        target.addEventListener('focus', this.showTooltip, isCaptureMode);\n        if (effect === 'float') {\n          target.addEventListener(\n            'mousemove',\n            this.updateTooltip,\n            isCaptureMode\n          );\n        }\n        target.addEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n        target.addEventListener('blur', this.hideTooltip, isCaptureMode);\n      });\n    }\n\n    // Global event to hide tooltip\n    if (globalEventOff) {\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n      window.addEventListener(globalEventOff, this.hideTooltip, isCapture);\n    }\n\n    // Track removal of targetArray elements from DOM\n    this.bindRemovalTracker();\n  }\n\n  /**\n   * Unbind listeners on target elements\n   */\n  unbindListener() {\n    const { id, globalEventOff } = this.props;\n    if (this.isBodyMode()) {\n      this.unbindBodyListener();\n    } else {\n      const targetArray = this.getTargetArray(id);\n      targetArray.forEach((target) => {\n        this.unbindBasicListener(target);\n        if (this.isCustomEvent(target)) this.customUnbindListener(target);\n      });\n    }\n\n    if (globalEventOff)\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n    this.unbindRemovalTracker();\n  }\n\n  /**\n   * Invoke this before bind listener and unmount the component\n   * it is necessary to invoke this even when binding custom event\n   * so that the tooltip can switch between custom and default listener\n   */\n  unbindBasicListener(target) {\n    const isCaptureMode = this.isCapture(target);\n    target.removeEventListener('mouseenter', this.showTooltip, isCaptureMode);\n    target.removeEventListener('mousemove', this.updateTooltip, isCaptureMode);\n    target.removeEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n  }\n\n  getTooltipContent() {\n    const { getContent, children } = this.props;\n\n    // Generate tooltip content\n    let content;\n    if (getContent) {\n      if (Array.isArray(getContent)) {\n        content = getContent[0] && getContent[0](this.state.originTooltip);\n      } else {\n        content = getContent(this.state.originTooltip);\n      }\n    }\n\n    return getTipContent(\n      this.state.originTooltip,\n      children,\n      content,\n      this.state.isMultiline\n    );\n  }\n\n  isEmptyTip(placeholder) {\n    return (\n      (typeof placeholder === 'string' && placeholder === '') ||\n      placeholder === null\n    );\n  }\n\n  /**\n   * When mouse enter, show the tooltip\n   */\n  showTooltip(e, isGlobalCall) {\n    if (!this.tooltipRef) {\n      return;\n    }\n\n    if (isGlobalCall) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement) return;\n    }\n    // Get the tooltip content\n    // calculate in this phrase so that tip width height can be detected\n    const { multiline, getContent } = this.props;\n    const originTooltip = e.currentTarget.getAttribute('data-tip');\n    const isMultiline =\n      e.currentTarget.getAttribute('data-multiline') || multiline || false;\n\n    // If it is focus event or called by ReactTooltip.show, switch to `solid` effect\n    const switchToSolid = e instanceof window.FocusEvent || isGlobalCall;\n\n    // if it needs to skip adding hide listener to scroll\n    let scrollHide = true;\n    if (e.currentTarget.getAttribute('data-scroll-hide')) {\n      scrollHide = e.currentTarget.getAttribute('data-scroll-hide') === 'true';\n    } else if (this.props.scrollHide != null) {\n      scrollHide = this.props.scrollHide;\n    }\n\n    // adding aria-describedby to target to make tooltips read by screen readers\n    if (e && e.currentTarget && e.currentTarget.setAttribute) {\n      e.currentTarget.setAttribute(\n        'aria-describedby',\n        this.props.id || this.state.uuid\n      );\n    }\n\n    // Make sure the correct place is set\n    const desiredPlace =\n      e.currentTarget.getAttribute('data-place') || this.props.place || 'top';\n    const effect =\n      (switchToSolid && 'solid') || this.getEffect(e.currentTarget);\n    const offset =\n      e.currentTarget.getAttribute('data-offset') || this.props.offset || {};\n    const result = getPosition(\n      e,\n      e.currentTarget,\n      this.tooltipRef,\n      desiredPlace.split(',')[0],\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        e,\n        e.currentTarget,\n        this.tooltipRef,\n        desiredPlace,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    const place = result.isNewState\n      ? result.newState.place\n      : desiredPlace.split(',')[0];\n\n    // To prevent previously created timers from triggering\n    this.clearTimer();\n\n    const target = e.currentTarget;\n\n    const reshowDelay = this.state.show\n      ? target.getAttribute('data-delay-update') || this.props.delayUpdate\n      : 0;\n\n    const self = this;\n\n    const updateState = function updateState() {\n      self.setState(\n        {\n          originTooltip: originTooltip,\n          isMultiline: isMultiline,\n          desiredPlace: desiredPlace,\n          place: place,\n          type: target.getAttribute('data-type') || self.props.type || 'dark',\n          customColors: {\n            text:\n              target.getAttribute('data-text-color') ||\n              self.props.textColor ||\n              null,\n            background:\n              target.getAttribute('data-background-color') ||\n              self.props.backgroundColor ||\n              null,\n            border:\n              target.getAttribute('data-border-color') ||\n              self.props.borderColor ||\n              null,\n            arrow:\n              target.getAttribute('data-arrow-color') ||\n              self.props.arrowColor ||\n              null\n          },\n          customRadius: {\n            tooltip:\n              target.getAttribute('data-tooltip-radius') ||\n              self.props.tooltipRadius ||\n              '3',\n            arrow:\n              target.getAttribute('data-arrow-radius') ||\n              self.props.arrowRadius ||\n              '0'\n          },\n          effect: effect,\n          offset: offset,\n          padding: target.getAttribute('data-padding') || self.props.padding,\n          html:\n            (target.getAttribute('data-html')\n              ? target.getAttribute('data-html') === 'true'\n              : self.props.html) || false,\n          delayShow:\n            target.getAttribute('data-delay-show') || self.props.delayShow || 0,\n          delayHide:\n            target.getAttribute('data-delay-hide') || self.props.delayHide || 0,\n          delayUpdate:\n            target.getAttribute('data-delay-update') ||\n            self.props.delayUpdate ||\n            0,\n          border:\n            (target.getAttribute('data-border')\n              ? target.getAttribute('data-border') === 'true'\n              : self.props.border) || false,\n          borderClass:\n            target.getAttribute('data-border-class') ||\n            self.props.borderClass ||\n            'border',\n          extraClass:\n            target.getAttribute('data-class') ||\n            self.props.class ||\n            self.props.className ||\n            '',\n          disable:\n            (target.getAttribute('data-tip-disable')\n              ? target.getAttribute('data-tip-disable') === 'true'\n              : self.props.disable) || false,\n          currentTarget: target\n        },\n        () => {\n          if (scrollHide) {\n            self.addScrollListener(self.state.currentTarget);\n          }\n\n          self.updateTooltip(e);\n\n          if (getContent && Array.isArray(getContent)) {\n            self.intervalUpdateContent = setInterval(() => {\n              if (self.mount) {\n                const { getContent } = self.props;\n                const placeholder = getTipContent(\n                  originTooltip,\n                  '',\n                  getContent[0](),\n                  isMultiline\n                );\n                const isEmptyTip = self.isEmptyTip(placeholder);\n                self.setState({ isEmptyTip });\n                self.updatePosition();\n              }\n            }, getContent[1]);\n          }\n        }\n      );\n    };\n\n    // If there is no delay call immediately, don't allow events to get in first.\n    if (reshowDelay) {\n      this.delayReshow = setTimeout(updateState, reshowDelay);\n    } else {\n      updateState();\n    }\n  }\n\n  /**\n   * When mouse hover, update tool tip\n   */\n  updateTooltip(e) {\n    const { delayShow, disable } = this.state;\n    const { afterShow, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    const eventTarget = e.currentTarget || e.target;\n\n    // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n    if (this.mouseOnToolTip()) {\n      return;\n    }\n\n    // if the tooltip is empty, disable the tooltip\n    if (this.isEmptyTip(placeholder) || disable || disableProp) {\n      return;\n    }\n\n    const delayTime = !this.state.show ? parseInt(delayShow, 10) : 0;\n\n    const updateState = () => {\n      if (\n        (Array.isArray(placeholder) && placeholder.length > 0) ||\n        placeholder\n      ) {\n        const isInvisible = !this.state.show;\n        this.setState(\n          {\n            currentEvent: e,\n            currentTarget: eventTarget,\n            show: true\n          },\n          () => {\n            this.updatePosition(() => {\n              if (isInvisible && afterShow) {\n                afterShow(e);\n              }\n            });\n          }\n        );\n      }\n    };\n\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n    }\n    if (delayTime) {\n      this.delayShowLoop = setTimeout(updateState, delayTime);\n    } else {\n      this.delayShowLoop = null;\n      updateState();\n    }\n  }\n\n  /*\n   * If we're mousing over the tooltip remove it when we leave.\n   */\n  listenForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.addEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  removeListenerForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.removeEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  /**\n   * When mouse leave, hide tooltip\n   */\n  hideTooltip(e, hasTarget, options = { isScroll: false }) {\n    const { disable } = this.state;\n    const { isScroll } = options;\n    const delayHide = isScroll ? 0 : this.state.delayHide;\n    const { afterHide, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    if (!this.mount) return;\n    if (this.isEmptyTip(placeholder) || disable || disableProp) return; // if the tooltip is empty, disable the tooltip\n    if (hasTarget) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement || !this.state.show) return;\n    }\n\n    // clean up aria-describedby when hiding tooltip\n    if (e && e.currentTarget && e.currentTarget.removeAttribute) {\n      e.currentTarget.removeAttribute('aria-describedby');\n    }\n\n    const resetState = () => {\n      const isVisible = this.state.show;\n      // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n      if (this.mouseOnToolTip()) {\n        this.listenForTooltipExit();\n        return;\n      }\n\n      this.removeListenerForTooltipExit();\n\n      this.setState({ show: false }, () => {\n        this.removeScrollListener(this.state.currentTarget);\n        if (isVisible && afterHide) {\n          afterHide(e);\n        }\n      });\n    };\n\n    this.clearTimer();\n    if (delayHide) {\n      this.delayHideLoop = setTimeout(resetState, parseInt(delayHide, 10));\n    } else {\n      resetState();\n    }\n  }\n\n  /**\n   * When scroll, hide tooltip\n   */\n  hideTooltipOnScroll(event, hasTarget) {\n    this.hideTooltip(event, hasTarget, { isScroll: true });\n  }\n\n  /**\n   * Add scroll event listener when tooltip show\n   * automatically hide the tooltip when scrolling\n   */\n  addScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.addEventListener('scroll', this.hideTooltipOnScroll, isCaptureMode);\n  }\n\n  removeScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.removeEventListener(\n      'scroll',\n      this.hideTooltipOnScroll,\n      isCaptureMode\n    );\n  }\n\n  // Calculation the position\n  updatePosition(callbackAfter) {\n    const { currentEvent, currentTarget, place, desiredPlace, effect, offset } =\n      this.state;\n    const node = this.tooltipRef;\n    const result = getPosition(\n      currentEvent,\n      currentTarget,\n      node,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        currentEvent,\n        currentTarget,\n        node,\n        place,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    if (result.isNewState) {\n      // Switch to reverse placement\n      return this.setState(result.newState, () => {\n        this.updatePosition(callbackAfter);\n      });\n    }\n\n    if (callbackAfter && typeof callbackAfter === 'function') {\n      callbackAfter();\n    }\n\n    // Set tooltip position\n    node.style.left = result.position.left + 'px';\n    node.style.top = result.position.top + 'px';\n  }\n\n  /**\n   * CLear all kinds of timeout of interval\n   */\n  clearTimer() {\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n      this.delayShowLoop = null;\n    }\n    if (this.delayHideLoop) {\n      clearTimeout(this.delayHideLoop);\n      this.delayHideLoop = null;\n    }\n    if (this.delayReshow) {\n      clearTimeout(this.delayReshow);\n      this.delayReshow = null;\n    }\n    if (this.intervalUpdateContent) {\n      clearInterval(this.intervalUpdateContent);\n      this.intervalUpdateContent = null;\n    }\n  }\n\n  hasCustomColors() {\n    return Boolean(\n      Object.keys(this.state.customColors).find(\n        (color) => color !== 'border' && this.state.customColors[color]\n      ) ||\n        (this.state.border && this.state.customColors['border'])\n    );\n  }\n\n  render() {\n    const { extraClass, html, ariaProps, disable, uuid } = this.state;\n    const content = this.getTooltipContent();\n    const isEmptyTip = this.isEmptyTip(content);\n    const style = this.props.disableInternalStyle\n      ? ''\n      : generateTooltipStyle(\n          this.state.uuid,\n          this.state.customColors,\n          this.state.type,\n          this.state.border,\n          this.state.padding,\n          this.state.customRadius\n        );\n\n    const tooltipClass =\n      '__react_component_tooltip' +\n      ` ${this.state.uuid}` +\n      (this.state.show && !disable && !isEmptyTip ? ' show' : '') +\n      (this.state.border ? ' ' + this.state.borderClass : '') +\n      ` place-${this.state.place}` + // top, bottom, left, right\n      ` type-${this.hasCustomColors() ? 'custom' : this.state.type}` + // dark, success, warning, error, info, light, custom\n      (this.props.delayUpdate ? ' allow_hover' : '') +\n      (this.props.clickable ? ' allow_click' : '');\n\n    let Wrapper = this.props.wrapper;\n\n    if (ReactTooltip.supportedWrappers.indexOf(Wrapper) < 0) {\n      Wrapper = ReactTooltip.defaultProps.wrapper;\n    }\n\n    const wrapperClassName = [tooltipClass, extraClass]\n      .filter(Boolean)\n      .join(' ');\n\n    if (html) {\n      const htmlContent = `${content}${\n        style ? `\\n<style aria-hidden=\"true\">${style}</style>` : ''\n      }`;\n\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          ref={(ref) => (this.tooltipRef = ref)}\n          {...ariaProps}\n          data-id=\"tooltip\"\n          dangerouslySetInnerHTML={{ __html: htmlContent }}\n        />\n      );\n    } else {\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          {...ariaProps}\n          ref={(ref) => (this.tooltipRef = ref)}\n          data-id=\"tooltip\"\n        >\n          {style && (\n            <style\n              dangerouslySetInnerHTML={{ __html: style }}\n              aria-hidden=\"true\"\n            />\n          )}\n          {content}\n        </Wrapper>\n      );\n    }\n  }\n}\n\nexport default ReactTooltip;\n","/**\n * Tracking target removing from DOM.\n * It's necessary to hide tooltip when it's target disappears.\n * Otherwise, the tooltip would be shown forever until another target\n * is triggered.\n *\n * If MutationObserver is not available, this feature just doesn't work.\n */\n\n// https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\nconst getMutationObserverClass = () => {\n  return (\n    window.MutationObserver ||\n    window.WebKitMutationObserver ||\n    window.MozMutationObserver\n  );\n};\n\nexport default function(target) {\n  target.prototype.bindRemovalTracker = function() {\n    const MutationObserver = getMutationObserverClass();\n    if (MutationObserver == null) return;\n\n    const observer = new MutationObserver(mutations => {\n      for (let m1 = 0; m1 < mutations.length; m1++) {\n        const mutation = mutations[m1];\n        for (let m2 = 0; m2 < mutation.removedNodes.length; m2++) {\n          const element = mutation.removedNodes[m2];\n          if (element === this.state.currentTarget) {\n            this.hideTooltip();\n            return;\n          }\n        }\n      }\n    });\n\n    observer.observe(window.document, { childList: true, subtree: true });\n\n    this.removalTracker = observer;\n  };\n\n  target.prototype.unbindRemovalTracker = function() {\n    if (this.removalTracker) {\n      this.removalTracker.disconnect();\n      this.removalTracker = null;\n    }\n  };\n}\n","/**\n * Events that should be bound to the window\n */\nimport CONSTANT from '../constant';\n\nexport default function(target) {\n  target.prototype.bindWindowEvents = function(resizeHide) {\n    // ReactTooltip.hide\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.addEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide, false);\n\n    // ReactTooltip.rebuild\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.addEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild, false);\n\n    // ReactTooltip.show\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.addEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow, false);\n\n    // Resize\n    if (resizeHide) {\n      window.removeEventListener('resize', this.onWindowResize);\n      window.addEventListener('resize', this.onWindowResize, false);\n    }\n  };\n\n  target.prototype.unbindWindowEvents = function() {\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  /**\n   * invoked by resize event of window\n   */\n  target.prototype.onWindowResize = function() {\n    if (!this.mount) return;\n    this.hideTooltip();\n  };\n}\n","/**\n * Util method to judge if it should follow capture model\n */\n\nexport default function(target) {\n  target.prototype.isCapture = function(currentTarget) {\n    return (\n      (currentTarget &&\n        currentTarget.getAttribute('data-iscapture') === 'true') ||\n      this.props.isCapture ||\n      false\n    );\n  };\n}\n","/**\n * Util method to get effect\n */\n\nexport default function(target) {\n  target.prototype.getEffect = function(currentTarget) {\n    const dataEffect = currentTarget.getAttribute('data-effect');\n    return dataEffect || this.props.effect || 'float';\n  };\n}\n","import { v4 as uuid } from 'uuid';\n\nexport function generateUUID() {\n  return 't' + uuid();\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","class LibraryDetails {\n  constructor(object) {\n    this.repo_id= object.repo_id;\n    this.repo_name = object.repo_name;\n  }\n}\n\nexport default LibraryDetails;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"@gatsbyjs/reach-router\";\nimport { Badge } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  canAddRepo,\n  canGenerateShareLink,\n  canGenerateUploadLink,\n  canInvitePeople,\n  dtableWebServer,\n  enableOCM,\n  enableOCMViaWebdav,\n} from \"../utils/constants\";\nimport { Utils } from \"../utils/utils\";\nimport toaster from \"./toast\";\nimport Group from \"../models/group\";\n//KEEPER\nimport { seafileAPI, keeperAPI } from \"../utils/seafile-api\";\nimport LibraryDetails from \"../models/library-details\";\n\nimport { canViewOrg, isDocs, isPro, customNavItems } from \"../utils/constants\";\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar: false,\n      groupItems: [],\n      libraryDetailsExtended: false,\n      libraryDetailItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n    this.libraryDetailsHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI\n      .listGroups()\n      .then((res) => {\n        let groupList = res.data.map((item) => {\n          let group = new Group(item);\n          return group;\n        });\n\n        this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n        _this.setState({\n          groupItems: groupList.sort((a, b) => {\n            return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (\n      window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100\n    ) {\n      if (\n        !window.confirm(\n          gettext(\n            \"A file is being uploaded. Are you sure you want to leave this page?\"\n          )\n        )\n      ) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? \"active\" : \"\";\n  };\n\n  renderSharedGroups() {\n    let style = { height: 0 };\n    if (this.state.groupsExtended) {\n      style = { height: this.groupsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"groups/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\"groups\")}`}\n            onClick={(e) => this.tabItemClick(e, \"groups\")}\n          >\n            <span className=\"sharp\" aria-hidden=\"true\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"All Groups\")}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map((item) => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link\n                to={siteRoot + \"group/\" + item.id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.name\n                )}`}\n                onClick={(e) => this.tabItemClick(e, item.name, item.id)}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = { height: height };\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-share-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-share-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-share-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-upload-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-upload-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-upload-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column ${\n          this.state.sharedExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link\n              to={siteRoot + \"share-admin-libs/\"}\n              className={`nav-link ellipsis ${this.getActiveClass(\n                \"share-admin-libs\"\n              )}`}\n              title={gettext(\"Libraries\")}\n              onClick={(e) => this.tabItemClick(e, \"share-admin-libs\")}\n            >\n              <span aria-hidden=\"true\" className=\"sharp\">\n                #\n              </span>\n              <span className=\"nav-text\">{gettext(\"Libraries\")}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-folders/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-folders\"\n            )}`}\n            title={gettext(\"Folders\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-folders\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Folders\")}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return customNavItems.map((item, idx) => {\n      return (\n        <li key={idx} className=\"nav-item\">\n          <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n            <span className={item.icon} aria-hidden=\"true\"></span>\n            <span className=\"nav-text\">{item.desc}</span>\n          </a>\n        </li>\n      );\n    });\n  }\n\n  render() {\n    let showActivity = isDocs || isPro;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext(\"Files\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"my-libs/\"}\n                  className={`nav-link ellipsis ${\n                    this.getActiveClass(\"my-libs\") ||\n                    this.getActiveClass(\"deleted\")\n                  }`}\n                  title={gettext(\"My Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"my-libs\")}\n                >\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"My Libraries\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                to={siteRoot + \"shared-libs/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"shared-libs\"\n                )}`}\n                title={gettext(\"Shared with me\")}\n                onClick={(e) => this.tabItemClick(e, \"shared-libs\")}\n              >\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Shared with me\")}</span>\n              </Link>\n            </li>\n            {canViewOrg && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"org\")}\n              >\n                <Link\n                  to={siteRoot + \"org/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\"org\")}`}\n                  title={gettext(\"Shared with all\")}\n                >\n                  <span\n                    className=\"sf2-icon-organization\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">{gettext(\"Shared with all\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Shared with groups\")}\n                onClick={this.grpsExtend}\n              >\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Shared with groups\")}\n                </span>\n                <span\n                  className={`toggle-icon fas ${\n                    this.state.groupsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"shared-with-ocm/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"shared-with-ocm\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"shared-with-ocm\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {enableOCMViaWebdav && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"ocm-via-webdav/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"ocm-via-webdav\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"ocm-via-webdav\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {/* KEEPER lib details button. FEXME! */}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Library Details\")}\n                onClick={this.libdtExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.libraryDetailsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-list-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Library Details\")}</span>\n              </a>\n              {this.renderLibraryDetails()}\n            </li>\n          </ul>\n\n          <h3 className=\"sf-heading\">{gettext(\"Tools\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"starred\"\n                )}`}\n                to={siteRoot + \"starred/\"}\n                title={gettext(\"Favorites\")}\n                onClick={(e) => this.tabItemClick(e, \"starred\")}\n              >\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Favorites\")}</span>\n              </Link>\n            </li>\n            {showActivity && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"dashboard\"\n                  )}`}\n                  to={siteRoot + \"dashboard/\"}\n                  title={gettext(\"Activities\")}\n                  onClick={(e) => this.tabItemClick(e, \"dashboard\")}\n                >\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Activities\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"published\"\n                )}`}\n                to={siteRoot + \"published/\"}\n                title={gettext(\"Published Libraries\")}\n                onClick={(e) => this.tabItemClick(e, \"published\")}\n              >\n                <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Published Libraries\")}\n                </span>\n              </Link>\n            </li>\n            {isDocs && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"drafts\")}\n              >\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"drafts\"\n                  )}`}\n                  to={siteRoot + \"drafts/\"}\n                  title={gettext(\"Drafts\")}\n                >\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Drafts\")}</span>\n                  {this.props.draftCounts > 0 && (\n                    <span id=\"draft-num\">{this.props.draftCounts}</span>\n                  )}\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"linked-devices\"\n                )}`}\n                to={siteRoot + \"linked-devices/\"}\n                title={gettext(\"Linked Devices\")}\n                onClick={(e) => this.tabItemClick(e, \"linked-devices\")}\n              >\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Linked Devices\")}</span>\n              </Link>\n            </li>\n            {canInvitePeople && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"invitations\"\n                  )}`}\n                  to={siteRoot + \"invitations/\"}\n                  title={gettext(\"Invite Guest\")}\n                  onClick={(e) => this.tabItemClick(e, \"invitations\")}\n                >\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Invite Guest\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Share Admin\")}\n                onClick={this.shExtend}\n              >\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Share Admin\")}</span>\n                <span\n                  className={`toggle-icon fas ${\n                    this.state.sharedExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer && (\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span\n              className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\"\n              aria-hidden=\"true\"\n            ></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        )}\n      </div>\n    );\n  }\n  // KEEPER\n  libdtExtend = () => {\n    this.setState({\n      libraryDetailsExtended: !this.state.libraryDetailsExtended,\n    });\n    this.loadLibraryDetails();\n  };\n\n  loadLibraryDetails = () => {\n    let _this = this;\n    keeperAPI\n      .listLibraryDetails()\n      .then((res) => {\n        let libraryDetailsList = res.data.map((item) => {\n          let libraryDetailsItem = new LibraryDetails(item);\n          return libraryDetailsItem;\n        });\n\n        this.libraryDetailsHeight =\n          (libraryDetailsList.length + 1) * _this.listHeight;\n        _this.setState({\n          libraryDetailItems: libraryDetailsList.sort((a, b) => {\n            return a.repo_name.toLowerCase() < b.repo_name.toLowerCase()\n              ? -1\n              : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  renderLibraryDetails() {\n    let style = { height: 0 };\n    if (this.state.libraryDetailsExtended) {\n      style = { height: this.libraryDetailsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {this.state.libraryDetailItems.map((item) => {\n          return (\n            <li key={item.repo_id} className=\"nav-item\">\n              <a\n                href={siteRoot + \"landing-page/libs/\" + item.repo_id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.repo_name\n                )}`}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.repo_name}</span>\n              </a>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport {\n  gettext,\n  lang,\n  mediaUrl,\n  logoPath,\n  logoWidth,\n  logoHeight,\n  siteTitle,\n  seafileVersion,\n  additionalAboutDialogLinks,\n  aboutDialogCustomHtml,\n} from \"../../utils/constants\";\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n  toggle = () => {\n    this.props.onCloseAboutDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}>\n            <span aria-hidden=\"true\"></span>\n          </button>\n          <div className=\"about-content\">\n            <p>\n              <img\n                src={mediaUrl + logoPath}\n                height={logoHeight}\n                width={logoWidth}\n                title={siteTitle}\n                alt=\"logo\"\n              />\n            </p>\n            <p>\n              {gettext(\"Server Version: \")}\n              {seafileVersion}\n              <br /> 2024 {gettext(\"KEEPER\")}\n            </p>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot, enableTC, sideNavFooterCustomHtml, additionalAppBottomLinks } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n      collapsed: true,\n    };\n  }\n\n  onAboutDialogToggle = () => {\n    this.setState({ isAboutDialogShow: !this.state.isAboutDialogShow });\n  };\n\n  onFooterExpandedToggle = () => {\n    this.setState({ collapsed: !this.state.collapsed });\n  };\n\n  render() {\n    const elementBodyStyle = {\n      maxHeight: this.state.collapsed ? '0' : '30rem',\n      borderBottomWidth: this.state.collapsed ? '0' : '1px',\n    };\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer\">\n          <div id=\"footer-header\">\n            <span\n              aria-hidden=\"true\"\n              className={\n                (this.state.collapsed\n                  ? \"keeper-icon-triangle-up\"\n                  : \"keeper-icon-triangle-down\") + \" vam\"\n              }\n              onClick={this.onFooterExpandedToggle}\n            />\n            &nbsp;\n            <a\n              href={siteRoot + 'project-catalog/'}\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext('Project Catalog')}\n            </a>\n            <a\n              href=\"https://mpdl.zendesk.com/hc/en-us/categories/360001234340-Keeper\"\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext('Help / Knowledge Base')}\n            </a>\n            <a\n              className=\"item cursor-pointer last-item\"\n              onClick={this.onAboutDialogToggle}\n            >\n              {gettext('About')}\n            </a>\n          </div>\n\n          <div id=\"footer-body\" style={elementBodyStyle}>\n            <br />\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>What you need to know</h4>\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/d17ecbb967/\"\n                  target=\"_blank\"\n                >\n                  About Keeper\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/1b0bfceac2/\"\n                  target=\"_blank\"\n                >\n                  Cared Data Commitment\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/2206ad0c0a8346cb8f9e/\"\n                  target=\"_blank\"\n                >\n                  Terms of Service\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>Client</h4>\n                <a href=\"/download_client_program/\" target=\"_blank\">\n                  Download the Keeper client for Windows, Linux, Mac, Android\n                  and iPhone\n                </a>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>The software behind Keeper</h4>\n                <a href=\"https://seafile.com/en/home/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"seafile-logo\"\n                    src=\"/media/custom/seafile_logo_footer.png\"\n                  />\n                  &nbsp; 2023 Seafile\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>A service by</h4>\n                <a href=\"https://www.mpdl.mpg.de/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"MPDL-logo\"\n                    src=\"/media/custom/mpdl.png\"\n                  />\n                </a>\n                <br />\n                <br />\n                <a href=\"mailto:keeper@mpdl.mpg.de\" target=\"_blank\">\n                  Contact Keeper Support\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/17e4e9d648/\"\n                  target=\"_blank\"\n                >\n                  Impressum\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/bf2c8a977f70428587eb/\"\n                  target=\"_blank\"\n                >\n                  Privacy Policy\n                </a>\n              </div>\n            </div>\n          </div>\n          {this.state.isAboutDialogShow && (\n            <ModalPortal>\n              <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n            </ModalPortal>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://static.zdassets.com/ekr/snippet.js?key=32977f9b-455d-428b-8dd5-f4c65aad0daa\";\n    script.id = \"ze-snippet\";\n    script.async = true;\n    document.body.appendChild(script);\n  }\n\n  render() {\n    return <div className=\"main-panel\">{this.props.children}</div>;\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n      // item is folder or file\n      if (item.encoded_path !== '/') {\n        item.dirent_view_url = item.dirent_view_url.replace(/\\/+$/, '');\n      }\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n    const linkUrl = data.dirent_view_url;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n    \n  }\n  \n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  }\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  }\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      share_permission_name: item.share_permission_name,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, share_permission_name, is_admin, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditing={true}\n              autoFocus={true}\n              isEditIconShow={this.state.isOpIconShown}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {}, config: {},}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      share_permission_name: this.props.item.share_permission_name,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, share_permission_name, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              isEditing={true}\n              autoFocus={true}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortOptions: PropTypes.array,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = this.props.sortOptions || [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string,\n  children: PropTypes.object\n};\n\nclass TopToolbar extends React.Component {\n\n  render() {\n    const { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {this.props.children}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick} />\n      </div>\n    );\n  }\n}\n\nTopToolbar.propTypes = propTypes;\n\nexport default TopToolbar;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n          {deletedTip}\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n            <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidShareLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n\n    // for mobile\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'time-asc', text: gettext('By expiration ascending')},\n      {value: 'time-desc', text: gettext('By expiration descending')}\n    ];\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n\n      // no default\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    this.listUserShareLinks();\n  }\n\n  listUserShareLinks() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  toggleCleanInvalidShareLinksDialog = () => {\n    this.setState({isCleanInvalidShareLinksDialogOpen: !this.state.isCleanInvalidShareLinksDialogOpen});\n  }\n\n  cleanInvalidShareLinks = () => {\n    seafileAPI.cleanInvalidShareLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid share links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidShareLinksDialog}>{gettext('Clean invalid share links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\">\n                  <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n                </li>\n                {canGenerateUploadLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n                )}\n              </ul>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortOptions={this.sortOptions}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCleanInvalidShareLinksDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clean invalid share links')}\n            message={gettext('Are you sure you want to clean invalid share links?')}\n            executeOperation={this.cleanInvalidShareLinks}\n            confirmBtnText={gettext('Clean')}\n            toggleDialog={this.toggleCleanInvalidShareLinksDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminShareLinks.propTypes = propTypes;\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  item: PropTypes.object.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link>{deletedTip}</td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n          <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidUploadLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    this.listUserUploadLinks();\n  }\n\n  listUserUploadLinks() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCleanInvalidUploadLinksDialog = () => {\n    this.setState({isCleanInvalidUploadLinksDialogOpen: !this.state.isCleanInvalidUploadLinksDialogOpen});\n  }\n\n  cleanInvalidUploadLinks = () => {\n    seafileAPI.cleanInvalidUploadLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid upload links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidUploadLinksDialog}>{gettext('Clean invalid upload links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                {canGenerateShareLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n                )}\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n              </ul>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isCleanInvalidUploadLinksDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Clean invalid upload links')}\n          message={gettext('Are you sure you want to clean invalid upload links?')}\n          executeOperation={this.cleanInvalidUploadLinks}\n          confirmBtnText={gettext('Clean')}\n          toggleDialog={this.toggleCleanInvalidUploadLinksDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminUploadLinks.propTypes = propTypes;\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.monitored = object.monitored;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n    // KEEPER\n    if (object.doi != undefined) {\n      this.doi = object.doi;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../css/icon.css';\n\nconst importAll = (requireContext) => {\n  requireContext.keys().forEach(requireContext);\n};\ntry {\n  importAll(require.context('../assets/icons', true, /\\.svg$/));\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.log(error);\n}\n\nconst Icon = (props) => {\n  const { className, symbol } = props;\n  const iconClass = `seafile-multicolor-icon seafile-multicolor-icon-${symbol} ${className || ''}`;\n  return (\n    <svg className={iconClass}>\n      <use xlinkHref={`#${symbol}`} />\n    </svg>\n  );\n};\n\nIcon.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  className: PropTypes.string,\n};\n\nexport default Icon;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport Icon from '../components/icon';\nimport { gettext } from '../utils/constants';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired\n};\n\nclass RepoMonitoredIcon extends React.Component {\n\n  render() {\n    const { repoID } = this.props;\n    return (\n      <Fragment>\n        <span id={`watching-${repoID}`} className=\"ml-1\">\n          <Icon symbol='monitor' />\n        </span>\n        <UncontrolledTooltip\n          placement=\"bottom\"\n          target={`#watching-${repoID}`}\n        >\n          {gettext('You are watching file changes of this library.')}\n        </UncontrolledTooltip>\n      </Fragment>\n    );\n  }\n}\n\nRepoMonitoredIcon.propTypes = propTypes;\n\nexport default RepoMonitoredIcon;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  freezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                data={item}\n                isDesktop={isDesktop}\n                isItemFreezed={this.state.isItemFreezed}\n                freezeItem={this.freezeItem}\n                onMonitorRepo={this.props.onMonitorRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    }, () => {\n      this.props.freezeItem(this.state.isOpMenuOpen);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        showOpIcon: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        showOpIcon: false\n      });\n    }\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  watchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n\n    // at present, only repo shared with 'r', 'rw' can be monitored.(Fri Feb 10 16:24:49 CST 2023)\n    const enableMonitorRepo = isPro && (data.permission == 'r' || data.permission == 'rw');\n\n    const desktopItem = (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td>\n            <Fragment>\n              <Link to={shareRepoUrl}>{data.repo_name}</Link>\n              {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            </Fragment>\n          </td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n            {enableMonitorRepo &&\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                role=\"button\"\n                tabIndex=\"0\"\n                className={`sf-dropdown-toggle sf2-icon-caret-down${iconVisibility}`}\n                title={gettext('More Operations')}\n                aria-label={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link>\n            {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            <br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) && <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                  {enableMonitorRepo && <DropdownItem className=\"mobile-menu-item\" onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>}\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let items = this.state.items.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({items: items});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onMonitorRepo={this.onMonitorRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares()\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n\t</td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n\t  {item.is_dir ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>\n\t  {this.props.path ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n\tif (index === 0) {\n          nodePath = '/';\n\t} else {\n          nodePath += item + '/';\n\t}\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  }\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you dont receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n  }\n\n  componentDidMount() {\n    this.refs.renameInput.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.refs.renameInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.refs.renameInput.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.onRenameConfirm(e);\n    }\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref=\"renameInput\"\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyPress={this.onKeyPress}\n          onClick={this.onClick}\n        />\n        <button className=\"btn btn-secondary sf2-icon-confirm confirm\" onClick={this.onRenameConfirm}></button>\n        <button className=\"btn btn-secondary sf2-icon-cancel cancel\" onClick={this.onRenameCancel}></button>\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n} from \"reactstrap\";\nimport {\n  gettext,\n  isPro,\n  folderPermEnabled,\n  enableRepoSnapshotLabel,\n  enableResetEncryptedRepoPassword,\n  isEmailConfigured,\n  enableRepoAutoDel,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, \"toggle\");\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === \"Rename\") {\n      this.setState({ isItemMenuShow: !this.state.isItemMenuShow });\n      return;\n    }\n\n    this.setState({ isItemMenuShow: !this.state.isItemMenuShow }, () => {\n      if (this.state.isItemMenuShow) {\n        this.props.onFreezedItem();\n      } else {\n        this.props.onUnfreezedItem();\n      }\n    });\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem =\n      isPro &&\n      repo.encrypted &&\n      enableResetEncryptedRepoPassword &&\n      isEmailConfigured;\n    let operations = [\"Rename\", \"Transfer\"];\n    // KEEPER\n    let showAssignDoiMenuItem = repo.doi && !repo.encrypted;\n    let showArchiveLibraryMenuItem = !repo.encrypted;\n    let showCertifyLibraryMenuItem = !repo.encrypted;\n    let showEditMetadatayMenuItem = !repo.encrypted;\n    if (folderPermEnabled) {\n      operations.push(\"Folder Permission\");\n    }\n    operations.push(\"Share Links Admin\", \"Divider\");\n\n    if (repo.encrypted) {\n      operations.push(\"Change Password\");\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push(\"Reset Password\");\n    }\n\n    if (isPro) {\n      const monitorOp = repo.monitored\n        ? \"Unwatch File Changes\"\n        : \"Watch File Changes\";\n      operations.push(monitorOp);\n    }\n\n    operations.push(\"History Setting\", \"API Token\");\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push(\"Label Current State\");\n    }\n    if (enableRepoAutoDel) {\n      operations.push(\"Old Files Auto Delete\");\n      //KEEPER\n      operations.push(\"Divider\");\n      if (showAssignDoiMenuItem) {\n        operations.push(\"Assign DOI to current state\");\n      }\n      if (showArchiveLibraryMenuItem) {\n        operations.push(\"Archive Library\");\n      }\n      if (showCertifyLibraryMenuItem) {\n        operations.push(\"Certify Library\");\n      }\n      if (showEditMetadatayMenuItem) {\n        operations.push(\"Edit Metadata\");\n      }\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = \"\";\n    switch (item) {\n      case \"Star\":\n        translateResult = gettext(\"Star\");\n        break;\n      case \"Unstar\":\n        translateResult = gettext(\"Unstar\");\n        break;\n      case \"Share\":\n        translateResult = gettext(\"Share\");\n        break;\n      case \"Delete\":\n        translateResult = gettext(\"Delete\");\n        break;\n      case \"Rename\":\n        translateResult = gettext(\"Rename\");\n        break;\n      case \"Transfer\":\n        translateResult = gettext(\"Transfer\");\n        break;\n      case \"History Setting\":\n        translateResult = gettext(\"History Setting\");\n        break;\n      case \"Change Password\":\n        translateResult = gettext(\"Change Password\");\n        break;\n      case \"Reset Password\":\n        translateResult = gettext(\"Reset Password\");\n        break;\n      case \"Watch File Changes\":\n        translateResult = gettext(\"Watch File Changes\");\n        break;\n      case \"Unwatch File Changes\":\n        translateResult = gettext(\"Unwatch File Changes\");\n        break;\n      case \"Folder Permission\":\n        translateResult = gettext(\"Folder Permission\");\n        break;\n      case \"Label Current State\":\n        translateResult = gettext(\"Label Current State\");\n        break;\n      case \"API Token\":\n        translateResult = \"API Token\"; // translation is not needed here\n        break;\n      case \"Share Links Admin\":\n        translateResult = gettext(\"Share Links Admin\");\n        break;\n      case \"Old Files Auto Delete\":\n        translateResult = gettext(\"Auto deletion\");\n        break;\n      //KEEPER\n      case \"Assign DOI to current state\":\n        translateResult = gettext(\"Assign DOI to current state\");\n        break;\n      case \"Archive Library\":\n        translateResult = gettext(\"Archive Library\");\n        break;\n      case \"Certify Library\":\n        translateResult = gettext(\"Certify Library\");\n        break;\n      case \"Edit Metadata\":\n        translateResult = gettext(\"Edit Metadata\");\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown\n          isOpen={this.state.isItemMenuShow}\n          toggle={this.toggleOperationMenu}\n        >\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext(\"More Operations\")}\n            aria-label={gettext(\"More Operations\")}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu>\n            {operations.map((item, index) => {\n              if (item == \"Divider\") {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem\n                    key={index}\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                    onKeyDown={this.onMenuItemKeyDown}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift(\"Delete\");\n    operations.unshift(\"Share\");\n    this.props.isStarred\n      ? operations.unshift(\"Unstar\")\n      : operations.unshift(\"Star\");\n\n    return (\n      <Dropdown\n        isOpen={this.state.isItemMenuShow}\n        toggle={this.toggleOperationMenu}\n      >\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext(\"More Operations\")}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div\n          className={`${this.state.isItemMenuShow ? \"\" : \"d-none\"}`}\n          onClick={this.toggleOperationMenu}\n        >\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != \"Divider\") {\n                return (\n                  <DropdownItem\n                    key={index}\n                    className=\"mobile-menu-item\"\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, NavLink } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport EmptyTip from '../empty-tip';\n\nconst repoShareUploadLinkItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  activeTab: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item.token);\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (this.props.activeTab === 'shareLinks') {\n      if (item.is_dir) {\n        objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n      } else {\n        objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      }\n    }\n\n    if (this.props.activeTab === 'uploadLinks') {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <a href={objUrl} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.obj_name}</a>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoShareUploadLinkItem.propTypes = repoShareUploadLinkItemPropTypes;\n\nconst RepoShareUploadLinksDialogPropTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinksDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 'shareLinks',\n      repoShareUploadLinkList: [],\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems('share-link');\n  }\n\n  getItems = (itemType) => {\n    const repoID = this.props.repo.repo_id;\n    const request = itemType == 'share-link' ?\n      seafileAPI.listRepoShareLinks(repoID) :\n      seafileAPI.listRepoUploadLinks(repoID);\n    request.then((res) => {\n      this.setState({\n        loading: false,\n        repoShareUploadLinkList: res.data,\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  }\n\n  deleteItem = (token) => {\n    const repoID = this.props.repo.repo_id;\n    const request = this.state.activeTab == 'shareLinks' ?\n      seafileAPI.deleteRepoShareLink(repoID, token) :\n      seafileAPI.deleteRepoUploadLink(repoID, token);\n    request.then((res) => {\n      const repoShareUploadLinkList = this.state.repoShareUploadLinkList.filter(item => {\n        return item.token !== token;\n      });\n      this.setState({\n        repoShareUploadLinkList: repoShareUploadLinkList\n      });\n    }).catch(error => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n    if (tab == 'shareLinks') {\n      this.getItems('share-link');\n    }\n    if (tab == 'uploadLinks') {\n      this.getItems('upload-link');\n    }\n  };\n\n  render() {\n\n    const { loading, errorMsg, activeTab, repoShareUploadLinkList } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} Share/Upload Links').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '800px'}}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}}></span>\n        </ModalHeader>\n        <ModalBody className=\"p-0 pb-4\">\n          <div className=\"main-panel-center\">\n            <div className=\"cur-view-container\" role=\"tablist\">\n              <div className=\"cur-view-path share-upload-nav\">\n                <ul className=\"nav\">\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'shareLinks'} aria-controls=\"share-links-panel\">\n                    <NavLink className={activeTab === 'shareLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Share Links')}</NavLink>\n                  </li>\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'uploadLinks'} aria-controls=\"upload-links-panel\">\n                    <NavLink className={activeTab === 'uploadLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Upload Links')}</NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"cur-view-content\" style={{minHeight: '20rem', maxHeight: '20rem'}} role=\"tabpanel\" id={activeTab === 'shareLinks' ? 'share-links-panel' : 'upload-links-panel'}>\n                {loading && <Loading />}\n                {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n                {!loading && !errorMsg && !repoShareUploadLinkList.length &&\n                  <EmptyTip forDialog={true}>\n                    <p className=\"text-secondary\">{activeTab == 'shareLinks' ? gettext('No share links') : gettext('No upload links')}</p>\n                  </EmptyTip>\n                }\n                {!loading && !errorMsg && repoShareUploadLinkList.length > 0 &&\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"22%\">{gettext('Creator')}</th>\n                      <th width=\"20%\">{gettext('Name')}</th>\n                      <th width=\"48%\">{gettext('Link')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.repoShareUploadLinkList.map((item, index) => {\n                      return (\n                        <RepoShareUploadLinkItem\n                          key={index}\n                          item={item}\n                          activeTab={this.state.activeTab}\n                          deleteItem={this.deleteItem}\n                        />\n                      );\n                    })}\n                  </tbody>\n                </table>\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoShareUploadLinksDialog.propTypes = RepoShareUploadLinksDialogPropTypes;\n\nexport default RepoShareUploadLinksDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap'; \nimport { gettext } from '../../utils/constants';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass AssignDoiDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  formSubmit = () => {\n    const {repoID, repoName} = this.props;\n    this.props.toggleDialog();\n    keeperAPI.addDoi(repoID).then((res) => {\n      if (res.data && res.data['msg']) {\n        toaster.success(res.data['msg'], {duration: 3});\n      }\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg, {duration: 3});\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}> <span>{gettext('Assign DOI to {library_name}').replace('{library_name}','')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n        <ModalBody>\n          {gettext(\"Please note: a DOI identifier will be assigned to the current state of the selected library (snapshot). The DOI will persistently reference to the snapshot and not the latest state of the library. A DOI can only be created once per library.\")}\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Assign DOI')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAssignDoiDialog.propTypes = propTypes;\n\nexport default AssignDoiDialog;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\nimport { S as Select } from '../../dist/Select-40119e12.esm.js';\nimport { u as useAsync } from '../../dist/useAsync-fd9b28d9.esm.js';\nimport { u as useStateManager } from '../../dist/useStateManager-7e1e8489.esm.js';\nimport { u as useCreatable } from '../../dist/useCreatable-36230047.esm.js';\nimport '@babel/runtime/helpers/objectSpread2';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/createSuper';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '../../dist/index-a86253bb.esm.js';\nimport '@emotion/react';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@floating-ui/dom';\nimport 'use-isomorphic-layout-effect';\nimport 'memoize-one';\n\nvar AsyncCreatableSelect = /*#__PURE__*/forwardRef(function (props, ref) {\n  var stateManagerProps = useAsync(props);\n  var creatableProps = useStateManager(stateManagerProps);\n  var selectProps = useCreatable(creatableProps);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, selectProps));\n});\n\nexport default AsyncCreatableSelect;\n","import React, {Fragment} from 'react';\nimport Select from 'react-select';\nimport AsyncCreatableSelect from 'react-select/async-creatable';\nimport {Utils} from '../utils/utils';\nimport {gettext,} from '../utils/constants';\nimport {keeperAPI} from '../utils/seafile-api';\nimport toaster from './toast';\nimport {Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Input, Label, Row, Tooltip} from 'reactstrap';\nimport PropTypes from 'prop-types';\n\nimport '../css/toolbar.css';\nimport '../css/search.css';\n\nimport '../css/user-settings.css';\nimport '../css/keeper-archive-metadata-form.css';\n\nlet mpgInstituteOptions = [];\n\nconst defaultResourceType = \"Library\";\nconst resourceTypes = [\"Library\", \"Project\"];\n\nconst defaultAuthors = [{firstName: \"\", lastName: \"\", affs: [\"\"]}];\nconst defaultDirectors = [{firstName: \"\", lastName: \"\"}];\nconst defaultPublisher = gettext(\"MPDL Keeper Service, Max-Planck-Gesellschaft zur Frderung der Wissenschaften e. V.\");\n\nconst defaultMd = {\n  title: \"\",\n  authors: defaultAuthors,\n  publisher: defaultPublisher,\n  description: \"\",\n  year: \"\",\n  institute: \"\",\n  department: \"\",\n  directors: defaultDirectors,\n  resourceType: defaultResourceType,\n  license: \"\",\n  errors: \"\",\n};\n\nconst defaultValidMd = {\n  title: true,\n  authors: [[true, true]],\n  publisher: true,\n  description: true,\n  year: true,\n  institute: true,\n  department: true,\n  directors: [[true, true]],\n  resourceType: true,\n};\n\nconst infoAreaPropTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nclass InfoArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      helpTooltipOpen: false,\n      errorTooltipOpen: false,\n    };\n  }\n\n  toggleHelp = () => {\n    this.setState({\n      helpTooltipOpen: !this.state.helpTooltipOpen,\n    });\n  };\n\n  toggleError = () => {\n    this.setState({\n      errorTooltipOpen: !this.state.errorTooltipOpen,\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"input-tip pt-0\">\n          {this.props.id != \"license\" &&\n          <span style={{color: \"red\", fontWeight: \"900\"}}>*&nbsp;&nbsp;</span>\n          }\n          <i className=\"fas fa-question-circle\" id={this.props.id + \"-help\"}/>\n          <Tooltip\n            toggle={this.toggleHelp}\n            delay={{show: 0, hide: 0}}\n            target={this.props.id + \"-help\"}\n            placement=\"right\"\n            isOpen={this.state.helpTooltipOpen}\n          >\n            {this.props.helpText}\n          </Tooltip>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nInfoArea.propTypes = infoAreaPropTypes;\n\n\nconst keeperArchiveMetadataFormPropTypes = {\n  repoID: PropTypes.string.isRequired,\n};\n\nclass KeeperArchiveMetadataForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...defaultMd,\n      validMd: defaultValidMd,\n      isSaved: true,\n      isButton1Disabled: false,\n      isButton2Disabled: true,\n    };\n\n  }\n\n  componentDidMount() {\n    keeperAPI\n      .getArchiveMetadata(this.props.repoID)\n      .then((res) => {\n        let newState = this.state;\n        if ('data' in res) {\n          Object.keys(defaultMd).map((k) => {\n            newState[k] = k in res.data ? res.data[k] : \"\";\n          });\n          if (!(\"authors\" in newState && newState.authors.length > 0)) {\n            newState.authors = defaultAuthors;\n          }\n          if (!(\"directors\" in newState && newState.directors.length > 0)) {\n            newState.directors = defaultDirectors;\n          }\n          if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n            newState.publisher = defaultPublisher;\n          }\n          if (\n            !(\"resourceType\" in newState && newState.resourceType && newState.resourceType.trim())\n          ) {\n            newState.resourceType = defaultResourceType;\n          }\n        } else {\n          newState = defaultMd;\n        }\n\n        newState.validMd = this.getValidMd(newState);\n\n        this.setState(newState, () => this.setButtons());\n\n        keeperAPI.getMpgInstitutes().then((res2) => {\n          res2.data.map((v) => {\n            mpgInstituteOptions.push({value: v, label: v});\n          });\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  }\n\n  isFieldValid = (key, value) => {\n    if (!key || !value)\n      return false;\n    let isValid = true;\n    if (key == \"title\" || key == \"description\" || key == \"publisher\" || key == \"department\" || key == \"institute\") {\n      isValid = value.trim() != \"\";\n    } else if (key == \"year\") {\n      const reg = new RegExp(\"^\\\\d{4}$\");\n      //const parsed = parseInt(value, 10);\n      //isValid = !isNaN(parsed) && parsed > 0;\n      isValid = reg.test(value);\n    } else if (key == \"author\" || key == \"director\") {\n      isValid = [Boolean(value.firstName && value.firstName.trim()), Boolean(value.lastName && value.lastName.trim())];\n    }\n    return isValid;\n  }\n\n  isFormValid = (validMd) => {\n    let isValid = true;\n    outer: for (let key in validMd) {\n      if (key == \"authors\" || key == \"directors\") {\n        for (let a of validMd[key])\n          if (!a[0] || !a[1]) {\n            isValid = false;\n            break outer;\n          }\n      } else if (!validMd[key]) {\n        isValid = false;\n        break outer;\n      }\n    }\n    return isValid;\n  }\n\n  setButtons = () => {\n    const isValid = this.isFormValid(this.state.validMd);\n    this.setState({\n      isButton1Disabled: this.state.isSaved && isValid,\n      isButton2Disabled: !this.state.isSaved || !isValid,\n    });\n  }\n\n  getValidMd = (md) => {\n    Object.keys(defaultValidMd).map(k => {\n      if (k == \"authors\" || k == \"directors\") {\n        for (let idx in md[k]) {\n          this.state.validMd[k][idx] = this.isFieldValid(k.slice(0, -1), md[k][idx]);\n        }\n      } else {\n        this.state.validMd[k] = this.isFieldValid(k, md[k]);\n      }\n    });\n    return this.state.validMd;\n  }\n\n  onButton1 = e => {\n    e.preventDefault();\n    this.props.onButton1(defaultMd, this.state)\n      .then(res => {\n        res.validMd = this.getValidMd(res);\n        res.isSaved = true;\n        this.setState(res, () => this.setButtons());\n        toaster.success(\n          gettext(\"Success.\") + (this.state.isButton2Disabled ? \"\" : \" \" + gettext(\"Now you can archive.\")),\n          {duration: 3}\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onButton2 = e => {\n    this.props.onButton2()\n      .then(msg => {\n        toaster.success(gettext(msg), {duration: 3});\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  handleInputChange(e, key) {\n    this.state.validMd[key] = this.isFieldValid(key, e.target.value);\n    this.setState({\n      [key]: e.target.value,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  setAuthorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.authors[idx] = this.isFieldValid(\"author\", values[idx]);\n    }\n    this.setState({\n      authors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => {\n      this.setButtons();\n    }\n    );\n  }\n\n  handleAuthorAddFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\", affs: [\"\"]});\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorRemoveFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorInputChange = (idx, e) => {\n    const values = [...this.state.authors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffInputChange = (idx, aidx, e) => {\n    const values = [...this.state.authors];\n    values[idx].affs[aidx] = e.target.value;\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffAddFields = (idx, aidx) => {\n    const values = [...this.state.authors];\n    values[idx].affs.splice(aidx + 1, 0, \"\");\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffRemoveFields = (index, aidx) => {\n    const values = [...this.state.authors];\n    values[index].affs.splice(aidx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  setDirectorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.directors[idx] = this.isFieldValid(\"director\", values[idx]);\n    }\n    this.setState({\n      directors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  handleDirectorAddFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\"});\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorRemoveFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx, 1);\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorInputChange = (idx, e) => {\n    const values = [...this.state.directors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setDirectorInputFields(values);\n  };\n\n  onResourceSelectChange = selectedItem => {\n    this.setState({\n      resourceType: selectedItem.value,\n    });\n  };\n\n  resourceOptions = resourceTypes.map((item) => {\n    return {value: item, label: gettext(item)};\n  });\n\n  filterInstitutes = input => {\n    return mpgInstituteOptions.filter((i) =>\n      i.label.toLowerCase().includes(input.toLowerCase())\n    );\n  };\n\n  promiseOptions = input =>\n    new Promise((resolve) => {\n      resolve(this.filterInstitutes(input));\n    });\n\n  handleInstituteChange = option => {\n    let insName =\n      option == null\n        ? \"\"\n        : !(\"value\" in option) || option.value.trim() === \"\"\n          ? \"\"\n          : option.value;\n    this.state.validMd.institute = this.isFieldValid(\"institute\", insName);\n    this.setState({\n      institute: insName,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  };\n\n  validationProps = key => {\n    return (this.state.validMd[key] ? {valid: true} : {invalid: true});\n  }\n\n  validationInSelects = key => {\n    return (this.state.validMd[key] ? \"is-valid\" : \"is-invalid\");\n  }\n\n  validationInAuthors = (idx, nidx) => {\n    return (this.state.validMd.authors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  validationInDirectors = (idx, nidx) => {\n    return (this.state.validMd.directors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  render() {\n\n    return (\n\n      <Fragment>\n        <Modal isOpen={true}>\n\n          <form method=\"post\">\n\n            <ModalHeader toggle={this.props.hideDialog}>\n              {this.props.header}\n            </ModalHeader>\n            <ModalBody>\n              {this.props.body}\n\n              <div className=\"h-100 d-flex flex-column\">\n                <div className=\"flex-auto d-flex o-hidden\">\n                  <div className=\"main-panel d-flex flex-column\">\n                    <div className=\"content position-relative\" style={{paddingBottom: \"0rem\"}}>\n\n                      {/*Title*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-title\"\n                            sm={1}\n                          >\n                            {gettext(\"Title\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                type=\"textarea\"\n                                className=\"form-control\"\n                                placeholder={gettext(\"Title of your research project\") + \"...\"}\n                                value={this.state.title}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"title\");\n                                }}\n                                {...this.validationProps(\"title\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea id=\"title\"\n                                helpText={gettext(\"Please enter the title of your research project.\")}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Authors*/}\n                      <FormGroup row className=\"md-item\">\n                        {this.state.authors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-authors\"\n                              sm={1}\n                              className=\"pt-3\"\n                              for=\"lbl-authors\"\n                            >\n                              {gettext(\"Author\") +\n                              (this.state.authors.length > 1\n                                ? \" #\" + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <Col sm={4} className=\"form-group md-item\">\n                              <Label for=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 0)}\n                              />\n                            </Col>\n                            <div className=\"form-group col-sm-5 md-item\">\n                              <label htmlFor=\"lastName\">\n                                {gettext('Last Name')}:\n                              </label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 1)}\n                              />\n                            </div>\n                            <div className=\"form-group col-sm-1\">\n                              {this.state.authors.length > 1 && (\n                                <button\n                                  className=\"author-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleAuthorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"author-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleAuthorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </div>\n                            {index == 0 &&\n                            <span className=\"info-area-names\">\n                              <InfoArea\n                                id=\"author\"\n                                className=\"info-area-names\"\n                                helpText={gettext(\"Please enter the authors and affiliation of your research project.\")}\n                              />\n                            </span>\n                            }\n\n                            {inputField.affs.map((_, aidx) => (\n                              <React.Fragment\n                                key={`${inputField}~${index}~${aidx}`}\n                              >\n                                <div className=\"form-group col-sm-11 ml-2\">\n                                  <label\n                                    className=\"offset-sm-1\"\n                                    htmlFor=\"lbl-affiliation\"\n                                  >\n                                    {gettext('Affiliation') +\n                                    (inputField.affs.length > 1\n                                      ? ' #' + (aidx + 1)\n                                      : \"\")}\n                                    :\n                                  </label>\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control  offset-sm-1 col-sm-11\"\n                                    value={inputField.affs[aidx]}\n                                    onChange={(e) =>\n                                      this.handleAuthorAffInputChange(\n                                        index,\n                                        aidx,\n                                        e\n                                      )\n                                    }\n                                  />\n                                </div>\n                                <div className=\"form-group\">\n                                  {inputField.affs.length > 1 && (\n                                    <button\n                                      className=\"affiliation-control btn btn-link\"\n                                      type=\"button\"\n                                      onClick={() =>\n                                        this.handleAuthorAffRemoveFields(\n                                          index,\n                                          aidx\n                                        )\n                                      }\n                                    >\n                                      -\n                                    </button>\n                                  )}\n                                  <button\n                                    className=\"affiliation-control btn btn-link\"\n                                    type=\"button\"\n                                    onClick={() =>\n                                      this.handleAuthorAffAddFields(index, aidx)\n                                    }\n                                  >\n                                    +\n                                  </button>\n                                </div>\n                              </React.Fragment>\n                            ))}\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Publisher*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-publisher\"\n                            sm={1}\n                            htmlFor=\"publisher\"\n                          >\n                            {gettext('Publisher')}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"publisher\"\n                                type=\"textarea\"\n                                style={{height: \"4em\"}}\n                                placeholder={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.publisher}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"publisher\");\n                                }}\n                                {...this.validationProps(\"publisher\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"publisher\"\n                                helpText={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Description*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-description\"\n                            sm={1}\n                            htmlFor=\"description\"\n                          >\n                            {gettext(\"Description\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"description\"\n                                type=\"textarea\"\n                                style={{height: \"6em\"}}\n                                placeholder={gettext(\"Please enter the description of your research project\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.description}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"description\");\n                                }}\n                                {...this.validationProps(\"description\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"description\"\n                                helpText={gettext(\"Please enter the description of your research project\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n\n                      </FormGroup>\n\n                      {/*Year*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-year\"\n                          sm={1}\n                          className=\"pt-0\"\n                          for=\"lbl-year\"\n                        >\n                          {gettext(\"Year\")}:\n                        </Label>\n                        <Col sm={4}>\n                          <Input\n                            className=\"form-control\"\n                            placeholder={gettext(\"Year of project start...\")}\n                            value={this.state.year}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"year\");\n                            }}\n                            {...this.validationProps(\"year\")}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"year\"\n                          helpText={gettext(\"Please enter year of project start.\")}\n                        />\n                      </FormGroup>\n\n                      {/*Institute*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-institute\"\n                          className=\"pt-3\"\n                          sm={1}\n                          for=\"institute\"\n                        >\n                          {gettext('Institute')}:\n                        </Label>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label>{gettext('Institute name')}:</Label>\n                          <AsyncCreatableSelect\n                            id=\"institute\"\n                            className={this.state.validMd.institute ? \"is-valid\" : \"is-invalid\"}\n                            isClearable\n                            cacheOptions\n                            value={{\n                              value: this.state.institute,\n                              label: this.state.institute,\n                            }}\n                            onChange={this.handleInstituteChange}\n                            loadOptions={this.promiseOptions}\n                            {...this.validationProps(\"institute\")}\n                          />\n                        </Col>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label for=\"department\">\n                            {gettext('Department')}:\n                          </Label>\n                          <Input\n                            value={this.state.department}\n                            onChange={(e) =>\n                              this.handleInputChange(e, \"department\")\n                            }\n                            {...this.validationProps(\"department\")}\n                          />\n                        </Col>\n                        <span className=\"info-area-names\">\n                          <InfoArea\n                            id=\"institute\"\n                            helpText={gettext(\"Please enter the related Max Planck Institute for this research project.\")}\n                          />\n                        </span>\n                        {this.state.directors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-directors\"\n                              sm={2}\n                              className=\"form-group offset-sm-1 pt-3\"\n                              for=\"directors\"\n                            >\n                              {gettext('Director or PI') +\n                              (this.state.directors.length > 1\n                                ? ' #' + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label form=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 0)}\n\n                              />\n                            </FormGroup>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label for=\"lastName\">\n                                {gettext('Last Name')}:\n                              </Label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 1)}\n                              />\n                            </FormGroup>\n                            <FormGroup>\n                              {this.state.directors.length > 1 && (\n                                <button\n                                  className=\"director-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleDirectorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"director-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleDirectorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </FormGroup>\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Resource Type*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-resource-type\"\n                          sm={2}\n                          className=\"pt-0\"\n                          for=\"resource-type\"\n                        >\n                          {gettext('Resource Type')}:\n                        </Label>\n                        <Col sm={3}>\n                          <Select\n                            id=\"resource-type\"\n                            value={{\n                              value: this.state.resourceType,\n                              label: gettext(this.state.resourceType)\n                            }}\n                            options={this.resourceOptions}\n                            onChange={this.onResourceSelectChange}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"resource-type\"\n                          helpText={gettext(\"Please enter the resource type of the entity. Allowed values for this field: Library (default), Project.\")}\n                        />\n                      </Row>\n\n                      {/*License*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-license\"\n                          className=\"pt-0\"\n                          sm={1}\n                          for=\"license\"\n                        >\n                          {gettext(\"License\")}:\n                        </Label>\n                        <Col sm={7}>\n                          <Input\n                            id=\"license\"\n                            placeholder={gettext(\"Please enter the license\") + \"...\"}\n                            className=\"form-control\"\n                            value={this.state.license}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"license\");\n                            }}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"license\" helpText={gettext(\"Please enter the license\") + \".\"}\n                        />\n                      </Row>\n                      {/*<br />*/}\n                      {/*<pre>{JSON.stringify(this.state, null, 2)}</pre>*/}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ModalBody>\n            <ModalFooter>\n              {this.props.onButton1 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-1 col-sm-3\"\n                disabled={this.state.isButton1Disabled}\n                onClick={(e) => this.onButton1(e)}>\n                {this.props.button1Label}\n              </button>\n              }\n              {this.props.onButton2 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-9 col-sm-3\"\n                disabled={this.state.isButton2Disabled}\n                onClick={(e) => this.onButton2(e)}>\n                {this.props.button2Label}\n              </button>\n              }\n            </ModalFooter>\n          </form>\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nKeeperArchiveMetadataForm.propTypes = keeperArchiveMetadataFormPropTypes;\n\nexport default KeeperArchiveMetadataForm;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\nimport KeeperArchiveMetadataForm from '../keeper-archive-metadata-form';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass ArchiveLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onUpdateArchiveMetadata = (defaultMd, state) => {\n        let newState = {};\n        Object.keys(defaultMd).map(k => {\n            newState[k] = state[k];\n        });\n        //return promise, not run!\n        return keeperAPI\n            .updateArchiveMetadata(this.props.repoID, newState)\n            .then((res) => {\n                newState = res.data;\n\n                newState.validMd = state.validMd;\n\n                //if publisher is empty, apply defaultPublisher\n                if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n                    newState.publisher = defaultMd.publisher;\n                    newState.validMd.publisher = true;\n                }\n\n                return newState;\n            })\n            .catch((error) => {\n                let errMessage = Utils.getErrorMsg(error);\n                toaster.danger(errMessage);\n            });\n    }\n\n    onArchiveClick = (a, b) => {\n        this.props.hideDialog();\n        //return promise, not run!\n        return keeperAPI.archiveLibrary(this.props.repoID)\n            .then((resp) => {\n                return resp.data.msg;\n        });\n    }\n\n    render() {\n        const archive_info = gettext(\"By archiving this library, the current state of everything contained within \" +\n            \"it will be archived on a dedicated archiving system. For more information, please follow the link: \" +\n            \"{archive_info_link} This library can be archived {quota} more times. Please, fill out the following archive metadata form.\").replace(\"{quota}\",\n            this.props.quota);\n        const split = archive_info.split('{archive_info_link}')\n        return (\n                <KeeperArchiveMetadataForm\n                    hideDialog={this.props.hideDialog}\n                    repoID={this.props.repoID}\n                    header={\n                        <Fragment>\n                            <span>{gettext('Archive {library_name}').replace('{library_name}', '')}</span>\n                            <span style={{color: '#57a5b8'}}>{this.props.repoName}</span>\n                            <span> {gettext('library')}</span>\n                        </Fragment>\n                    }\n                    body={\n                        <Fragment>\n                            {split[0]}\n                            <a href=\"https://mpdl.zendesk.com/hc/en-us/articles/360011432700-Archiving\"\n                                target=\"_blank\">{gettext(\"Information on Archiving\")}</a>.\n                            {split[1]}\n                        </Fragment>\n                    }\n                    onButton1={this.onUpdateArchiveMetadata}\n                    button1Label={gettext(\"Save metadata\")}\n                    onButton2={this.onArchiveClick}\n                    button2Label={gettext(\"Archive\")}\n                />\n        )\n    }\n}\n\nArchiveLibraryDialog.propTypes = propTypes;\n\nexport default ArchiveLibraryDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalHeader, ModalBody, ModalFooter} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass CertifyLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\n    formSubmit = () => {\n        this.props.hideDialog();\n        const {repoID} = this.props;\n        keeperAPI.canCertify(repoID, 'dir', '/').then(() => {\n            this.certifyLibrary()\n        }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        })\n    }\n\n    certifyLibrary = () => {\n        const {repoID, repoName} = this.props;\n        toaster.success(gettext('Your files with the library {repoName} are currently being certified. We will inform you once the task has successfully finished. This may take a while.').replace('{repoName}', repoName), {duration: 3});\n        keeperAPI.certifyOnBloxberg(repoID, '/', 'dir', repoName).then(() => {\n            }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        });\n    }\n\n    render() {\n        return (\n            <Modal isOpen={true} toggle={this.props.hideDialog}>\n                <ModalHeader toggle={this.props.hideDialog}>\n                    <span>{gettext('Certify')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n                <ModalBody>\n                    <span>{gettext('Certify all files within the library via the bloxberg blockchain. A new entry under Library Details on the left sidebar will be created, where you can access the certified version and the file and a proof of certification. Certifying may take some time, depending on the size of the library. Adding metadata is optional, but recommended.')}</span>\n                </ModalBody>\n                <ModalFooter>\n                    <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Certify')}</button>\n                </ModalFooter>\n            </Modal>\n        )\n    }\n}\n\nCertifyLibraryDialog.propTypes = propTypes;\n\nexport default CertifyLibraryDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\n// KEEPER\nimport { keeperAPI, seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../../components/dialog/repo-share-upload-links-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n// KEEPER\nimport AssignDoiDialog from '../../components/dialog/assign-doi-dialog';\nimport ArchiveLibraryDialog from '../../components/dialog/archive-library-dialog';\nimport CertifyLibraryDialog from '../../components/dialog/certify-library-dialog';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\n// KEEPER\nvar handleCanArchiveResponse = (obj, resp) => {\n  const d = resp.data;\n  //alert(JSON.stringify(d));\n  let msg, error;\n  const default_error =\n    'Can not archive library due to unknown reason, please contact support.';\n  if (d.status === 'success') obj.setState({ quota: d.quota });\n  else if (d.status === 'in_processing') msg = d.msg;\n  else if (d.status === 'quota_expired')\n    error = gettext(\n      'Cannot archive, since the maximum number of archives for this library has been reached. Please contact Keeper support.'\n    );\n  else if (d.status === 'snapshot_archived')\n    error = gettext(\n      'Cannot archive, since the library snapshot has already been archived.'\n    );\n  else if (d.status === 'is_too_big')\n    error = gettext('Cannot archive, since the library is too large.');\n  else if (d.status === 'metadata_error') {\n    //pass, error will be handled via archive metadata form\n  } else if (d.status === 'system_error') error = d.msg || default_error;\n  else error = default_error;\n  if (error) toaster.danger(error);\n  else if (msg) toaster.success(msg);\n};\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isAssignDoiDialogShow: false,\n      isArchiveLibraryDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  }\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onToggleStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case 'Assign DOI to current state':\n        this.onAssignDoiToggle();\n        break;\n      case 'Archive Library':\n        this.onArchiveLibraryToggle();\n        break;\n      case 'Certify Library':\n        this.onCertifyLibraryToggle();\n        break;\n      case 'Edit Metadata':\n        this.onEditMetadataToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  }\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  }\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  }\n\n  // KEEPER \n  onAssignDoiToggle = () => {\n    this.setState({ isAssignDoiDialogShow: !this.state.isAssignDoiDialogShow });\n  };\n\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success')\n          this.setState({ isArchiveLibraryDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: 'system_error', msg: errorMsg },\n        });\n      });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success')\n          this.setState({ isEditMetadataDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: 'system_error', msg: errorMsg },\n        });\n      });\n  };\n\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick} onFocus={this.onFocus}>\n        <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Fragment>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </Fragment>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  }\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n        /* KEEPER */  \n        {this.state.isAssignDoiDialogShow && (\n          <ModalPortal>\n            <AssignDoiDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onAssignDoiToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\n// KEEPER\nexport { handleCanArchiveResponse };\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onMonitorRepo={this.props.onMonitorRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onMonitorRepo={this.onMonitorRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../dialog/repo-share-upload-links-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onMonitorRepo: PropTypes.func\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      // no default\n    }\n  }\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Links Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n      if (repo.permission == 'r' || repo.permission == 'rw') {\n        const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n        operations.push(monitorOp);\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      return (\n        <Fragment>\n          {operations.map(item => {\n            switch (item) {\n              case 'Share':\n                return <Fragment key={item}>{shareOperation}</Fragment>;\n              case 'Unshare':\n                return <Fragment key={item}>{unshareOperation}</Fragment>;\n              case 'Watch File Changes':\n              case 'Unwatch File Changes':\n                return (\n                  <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu} key={item}>\n                    <DropdownToggle\n                      className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n                      title={gettext('More Operations')}\n                      data-toggle=\"dropdown\"\n                      aria-expanded={this.state.isItemMenuShow}\n                      aria-haspopup={true}\n                      style={{'minWidth': '0'}}\n                      onClick={this.clickOperationMenuToggle}\n                      onKeyDown={this.onDropdownToggleKeyDown}\n                    />\n                    <DropdownMenu>\n                      {[item].map((item, index) => {\n                        return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              // no default\n            }\n          })}\n        </Fragment>\n      );\n    }\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n\n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n              onMonitorRepo={this.props.onMonitorRepo}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  }\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Detail')} aria-label={gettext('Detail')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFileCancel: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      let isDraft = this.state.isDraft;\n      this.props.onAddFile(path, isDraft);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isDraft: !this.state.isDraft\n        });\n      }\n    }\n\n    if (!this.state.isDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isDraft: !this.state.isdraft\n        });\n      } else {\n        this.setState({\n          isDraft: !this.state.isdraft\n        });\n      }\n    }\n  }\n\n  toggle = () => {\n    this.props.addFileCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.setSelectionRange(0,0);\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={this.newInput}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { Utils } from \"../../utils/utils\";\nimport toaster from \"../toast\";\nimport KeeperArchiveMetadataForm from \"../keeper-archive-metadata-form\";\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n};\n\nclass KeeperEditMetadataDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onUpdateArchiveMetadata = (defaultMd, state) => {\n    this.props.hideDialog();\n    let newState = {};\n    Object.keys(defaultMd).map((k) => {\n      newState[k] = state[k];\n    });\n    //return promise, not run!\n    return keeperAPI\n      .updateArchiveMetadata(this.props.repoID, newState)\n      .then((res) => {\n        newState = res.data;\n        newState.validMd = state.validMd;\n        //if publisher is empty, apply defaultPublisher\n        if (\n          !(\n            \"publisher\" in newState &&\n            newState.publisher &&\n            newState.publisher.trim()\n          )\n        ) {\n          newState.publisher = defaultMd.publisher;\n          newState.validMd.publisher = true;\n        }\n        return newState;\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  render() {\n    const title = gettext(\"Edit Metadata for {library_name} library\") \n    const split = title.split(\"{library_name}\")\n\n    return (\n      <KeeperArchiveMetadataForm\n        hideDialog={this.props.hideDialog}\n        repoID={this.props.repoID}\n        header={\n          <Fragment>\n            {split[0]}\n            <span style={{ color: \"#57a5b8\" }}> {this.props.repoName}</span>\n            {split.length>1 && split[1]}\n          </Fragment>\n        }\n        onButton1={this.onUpdateArchiveMetadata}\n        button1Label={gettext(\"Save metadata\")}\n      />\n    );\n  }\n}\n\nKeeperEditMetadataDialog.propTypes = propTypes;\n\nexport default KeeperEditMetadataDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n// KEEPER\nimport ArchiveLibraryDialog from '../dialog/archive-library-dialog';\nimport CertifyLibraryDialog from '../dialog/certify-library-dialog';\nimport KeeperEditMetadataDialog from '../dialog/keeper-edit-metadata-dialog';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { handleCanArchiveResponse } from '../../pages/my-libs/mylib-repo-list-item';\n\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // KEEPER\n  isRepoOwner: PropTypes.bool.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false,\n      // KEEPER\n      isArchiveLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  }\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  }\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  }\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: !this.state.isUploadMenuShow,\n      isCreateMenuShow: false,\n    });\n  }\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  }\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  }\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: !this.state.isCreateMenuShow,\n      isUploadMenuShow: false,\n    });\n  }\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '',\n    });\n  }\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  }\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  }\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  }\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  // KEEPER\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repoID)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success' || d.status === 'metadata_error')\n          this.setState({\n            isArchiveLibraryDialogShow: true,\n            quota: d.quota,\n          });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    this.setState({ isEditMetadataDialogShow: true });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path == '/' ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    // KEEPER\n    let isArchiveBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isEditMetadataBtnShow =\n      !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isCertifyBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ?\n                <Fragment>\n                  <button className=\"btn btn-secondary operation-item\" onClick={this.onUploadClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"upload-menu\">{gettext('Upload')}</button>\n                  {this.state.isUploadMenuShow && (\n                    <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"upload-menu\">\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFile} role=\"menuitem\">{gettext('Upload Files')}</button>\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFolder} role=\"menuitem\">{gettext('Upload Folder')}</button>\n                    </div>\n                  )}\n                </Fragment>\n                :\n                <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n            </Fragment>\n          )}\n          {canCreate &&\n          <Fragment>\n            <button className=\"btn btn-secondary operation-item\" onClick={this.onCreateClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"new-menu\">{gettext('New')}</button>\n            {this.state.isCreateMenuShow && (\n              <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"new-menu\">\n                <button className=\"dropdown-item\" onClick={this.onCreateFolderToggle} role=\"menuitem\">{gettext('New Folder')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</button>\n                <div className=\"dropdown-divider\"></div>\n                <button className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle} role=\"menuitem\">{gettext('New Markdown File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateExcelToggle} role=\"menuitem\">{gettext('New Excel File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreatePPTToggle} role=\"menuitem\">{gettext('New PowerPoint File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateWordToggle} role=\"menuitem\">{gettext('New Word File')}</button>\n              </div>\n            )}\n          </Fragment>\n          }\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n          <div className=\"dir-operation\">\n            {content}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n        // KEEPER\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <KeeperEditMetadataDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let { dirent } = this.props;\n    this.changeState(dirent);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n\n    let { dirent } = this.props;\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={this.newInput} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport ViewModeToolbar from '../../components/toolbar/view-mode-toolbar';\nimport DirOperationToolBar from '../../components/toolbar/dir-operation-toolbar';\nimport MultipleDirOperationToolbar from '../../components/toolbar/multiple-dir-operation-toolbar';\nimport ViewFileToolbar from '../../components/toolbar/view-file-toolbar';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,  // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n\n  render() {\n\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />\n          </div>\n          <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n          {this.props.isDirentSelected ?\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            /> :\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isRepoOwner={this.props.isRepoOwner}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          }\n        </div>\n        <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile && (\n          <InternalLinkOperation repoID={this.props.repoID} path={this.props.currentPath}/>\n        )}\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  }\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer w-4 h-4 rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  }\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n  }\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  }\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagColor from './tag-color';\nimport TagName from './tag-name';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (userPerm === 'rw') {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" href=\"#\" role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true} autoFocus={false}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ParticipantsList from '../file-view/participants-list';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath, fileParticipantList } = this.props;\n    const { commentsList } = this.state;\n    return (\n      <div className=\"seafile-comment detail-comments h-100\">\n        <div className=\"flex-fill o-auto\">\n          {commentsList.length > 0 ? (\n            <ul className=\"seafile-comment-list\">\n              {commentsList.map((item, index = 0, arr) => {\n                let oldTime = (new Date(item.created_at)).getTime();\n                let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n                return (\n                  <CommentItem\n                    key={item.id}\n                    item={item}\n                    time={time}\n                    deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment}\n                    editComment={this.editComment}\n                  />\n                );\n              })\n              }\n            </ul>) :\n            <p className=\"text-center my-4\">{gettext('No comment yet.')}</p>\n          }\n        </div>\n        <div className=\"seafile-comment-footer flex-shrink-0\">\n          {fileParticipantList &&\n            <ParticipantsList\n              onParticipantsChange={this.props.onParticipantsChange}\n              participants={fileParticipantList}\n              repoID={repoID}\n              filePath={filePath}\n              showIconTip={true}\n            />\n          }\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment...')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <div className=\"comment-submit-container\">\n            <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport ParticipantsList from '../file-view/participants-list';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false\n    };\n  }\n\n  getDirentPostion = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  render() {\n    let { direntType, direntDetail, fileTagList, fileParticipantList } = this.props;\n    let position = this.getDirentPostion();\n    let direntPath = this.getDirentPath();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n          </tbody>\n        </table>\n      );\n    } else {\n      return (\n        <Fragment>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <ul className=\"file-tag-list\">\n                    {fileTagList.map((fileTag) => {\n                      return (\n                        <li key={fileTag.id} className=\"file-tag-item\">\n                          <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                          <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-participants\">\n                <th>{gettext('Participants')}</th>\n                <td>\n                  {fileParticipantList &&\n                    <ParticipantsList\n                      onParticipantsChange={this.props.onParticipantsChange}\n                      participants={fileParticipantList}\n                      repoID={this.props.repoID}\n                      filePath={direntPath}\n                      showIconTip={false}\n                    />\n                  }\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {this.state.isEditFileTagShow &&\n            <ModalPortal>\n              <EditFileTagDialog\n                repoID={this.props.repoID}\n                fileTagList={fileTagList}\n                filePath={direntPath}\n                toggleCancel={this.onEditFileTagToggle}\n                onFileTagChanged={this.onFileTagChanged}\n              />\n            </ModalPortal>\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent, fileTags } = this.props;\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={dirent ? dirent.file_tags : fileTags}\n                onFileTagChanged={this.props.onFileTagChanged}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab} className=\"flex-fill o-auto\">\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file text-center\">\n          <p className=\"text-secondary\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              addFileCancel={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MD5 from \"MD5\";\nimport moment from \"moment\";\nimport { UncontrolledTooltip } from \"reactstrap\";\nimport { Dropdown, DropdownToggle, DropdownItem } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  mediaUrl,\n  username,\n  useGoFileserver,\n  fileServerRoot,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\nimport { seafileAPI } from \"../../utils/seafile-api\";\nimport URLDecorator from \"../../utils/url-decorator\";\nimport ItemDropdownMenu from \"../dropdown-menu/item-dropdown-menu\";\nimport Rename from \"../rename\";\nimport ModalPortal from \"../modal-portal\";\nimport MoveDirentDialog from \"../dialog/move-dirent-dialog\";\nimport CopyDirentDialog from \"../dialog/copy-dirent-dialog\";\nimport ShareDialog from \"../dialog/share-dialog\";\nimport ZipDownloadDialog from \"../dialog/zip-download-dialog\";\nimport EditFileTagDialog from \"../dialog/edit-filetag-dialog\";\nimport LibSubFolderPermissionDialog from \"../dialog/lib-sub-folder-permission-dialog\";\n\nimport \"../../css/dirent-list-item.css\";\nimport toaster from \"../toast\";\n// KEEPER\nimport ReactTooltip from \"react-tooltip\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport bergImage from \"../../assets/berg_icon.png\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(\n      dirent.permission\n    );\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === \"rw\";\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      canDrag: this.canDrag,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false, // for mobile\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.isItemFreezed !== this.props.isItemFreezed &&\n      !nextProps.isItemFreezed\n    ) {\n      this.setState(\n        {\n          highlight: false,\n          isOperationShow: false,\n        },\n        () => {\n          if (\n            nextProps.activeDirent &&\n            nextProps.activeDirent.name === nextProps.dirent.name\n          ) {\n            this.setState({ isOperationShow: true });\n          }\n        }\n      );\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen,\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({ isDragTipShow: false });\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI\n        .unstarItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", false);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", true);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == \"TD\") {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n  // KEEPER\n  onItemCertify = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    keeperAPI\n      .canCertify(repoID, dirent.type, filePath)\n      .then(() => {\n        this.certifyFile();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  certifyFile = () => {\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    toaster.success(gettext(\"Certify the file through bloxberg...\"), {\n      duration: 3,\n    });\n    keeperAPI\n      .certifyOnBloxberg(repoID, filePath, dirent.type, dirent.name)\n      .then(() => {\n        toaster.success(gettext(\"Transaction succeeded\"));\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  closeSharedDialog = () => {\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute(\"data-op\");\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch (operation) {\n      case \"Download\":\n        this.onItemDownload(event);\n        break;\n      case \"Share\":\n        this.onItemShare(event);\n        break;\n      case \"Delete\":\n        this.onItemDelete(event);\n        break;\n      case \"Rename\":\n        this.onItemRenameToggle();\n        break;\n      case \"Move\":\n        this.onItemMoveToggle();\n        break;\n      case \"Copy\":\n        this.onItemCopyToggle();\n        break;\n      case \"Tags\":\n        this.onEditFileTagToggle();\n        break;\n      case \"Permission\":\n        this.onPermissionItem();\n        break;\n      case \"Unlock\":\n        this.onUnlockItem();\n        break;\n      case \"Lock\":\n        this.onLockItem();\n        break;\n      case \"Comment\":\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail(\"comments\");\n        break;\n      case \"History\":\n        this.onHistory();\n        break;\n      case \"Access Log\":\n        this.onAccessLog();\n        break;\n      case \"Open via Client\":\n        this.onOpenViaClient();\n        break;\n      case \"Convert with ONLYOFFICE\":\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow,\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n      canDrag: false,\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({\n      isRenameing: false,\n      canDrag: this.canDrag, // set it back to the initial value\n    });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({ isMoveDialogShow: !this.state.isMoveDialogShow });\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({ isCopyDialogShow: !this.state.isCopyDialogShow });\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen,\n    });\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .lockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", true);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", true);\n        let lockName = username.split(\"@\");\n        this.props.updateDirent(\n          this.props.dirent,\n          \"lock_owner_name\",\n          lockName[0]\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .unlockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", false);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", false);\n        this.props.updateDirent(this.props.dirent, \"lock_owner_name\", \"\");\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"file_revisions\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path =\n      siteRoot +\n      \"repo/file-access/\" +\n      this.props.repoID +\n      \"/?p=\" +\n      encodeURIComponent(filePath);\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"open_via_client\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n\n    seafileAPI\n      .onlyofficeConvert(repoID, filePath)\n      .then((res) => {\n        this.props.loadDirentList(res.data.parent_dir);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === \"dir\") {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true,\n        });\n      } else {\n        seafileAPI\n          .zipDownload(repoID, this.props.path, this.props.dirent.name)\n          .then((res) => {\n            const zipToken = res.data[\"zip_token\"];\n            location.href = `${fileServerRoot}zip/${zipToken}`;\n          })\n          .catch((error) => {\n            let errorMsg = Utils.getErrorMsg(error);\n            this.setState({\n              isLoading: false,\n              errorMsg: errorMsg,\n            });\n          });\n      }\n    } else {\n      let url = URLDecorator.getUrl({\n        type: \"download_file_url\",\n        repoID: repoID,\n        filePath: direntPath,\n      });\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false,\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === \"/\" ? path + dirent.name : path + \"/\" + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ isShowTagTooltip: !this.state.isShowTagTooltip });\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = \"move\";\n    let { selectedDirentList } = this.props;\n    if (\n      selectedDirentList.length > 0 &&\n      selectedDirentList.includes(this.props.dirent)\n    ) {\n      // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList = selectedDirentList.map((item) => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {\n          nodeDirent: item,\n          nodeParentPath: this.props.path,\n          nodeRootPath: nodeRootPath,\n        };\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData(\"applicaiton/drag-item-info\", selectedList);\n      return;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {\n      nodeDirent: this.props.dirent,\n      nodeParentPath: this.props.path,\n      nodeRootPath: nodeRootPath,\n    };\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData(\"applicaiton/drag-item-info\", dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n      this.setState({ isDropTipshow: true });\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === \"copy\") {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = \"move\";\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    }\n    this.setState({ isDropTipshow: false });\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    this.setState({ isDropTipshow: false });\n    if (e.dataTransfer.files.length) {\n      // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData(\n      \"applicaiton/drag-item-info\"\n    );\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) {\n      //move items\n      let direntPaths = dragStartItemData.map((draggedItem) => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(\n        this.props.path,\n        this.props.dirent.name\n      );\n\n      if (\n        direntPaths.some((direntPath) => {\n          return direntPath === selectedPath;\n        })\n      ) {\n        //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === \"dir\" && nodeDirent.type === \"dir\") {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(\n      this.props.currentRepoInfo,\n      nodeDirent,\n      selectedPath,\n      nodeParentPath\n    );\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(\n      currentRepoInfo,\n      dirent.permission,\n      dirent\n    );\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ? (\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        ) : (\n          <Fragment>\n            {this.state.isOperationShow && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = \"\";\n    if (this.props.currentRepoInfo) {\n      dirHref =\n        siteRoot +\n        \"library/\" +\n        this.props.repoID +\n        \"/\" +\n        this.props.currentRepoInfo.repo_name +\n        Utils.encodePath(direntPath);\n    }\n    let fileHref =\n      siteRoot +\n      \"lib/\" +\n      this.props.repoID +\n      \"/file\" +\n      Utils.encodePath(direntPath);\n\n    let toolTipID = \"\";\n    let tagTitle = \"\";\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map((item) => item.name).join(\" \");\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? \"tr-highlight \" : \"\";\n    trClass += this.state.isDropTipshow ? \"tr-drop-effect\" : \"\";\n    trClass +=\n      activeDirent && activeDirent.name === dirent.name ? \"tr-active\" : \"\";\n    trClass += dirent.isSelected ? \"tr-active\" : \"\";\n\n    let lockedInfo = gettext(\"locked by {name}\").replace(\n      \"{name}\",\n      dirent.lock_owner_name\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const { canDrag } = this.state;\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td\n          className={`pl10 ${this.state.isDragTipShow ? \"tr-drag-effect\" : \"\"}`}\n        >\n          <input\n            type=\"checkbox\"\n            className=\"vam\"\n            onChange={this.onItemSelected}\n            checked={dirent.isSelected}\n          />\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined && (\n            <a\n              href=\"#\"\n              role=\"button\"\n              aria-label={dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n              onClick={this.onItemStarred}\n            >\n              <i\n                className={`fa-star ${\n                  dirent.starred ? \"fas\" : \"far star-empty\"\n                }`}\n              ></i>\n            </a>\n          )}\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                ref=\"drag_icon\"\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                onClick={this.onItemClick}\n                alt=\"\"\n              />\n            ) : (\n              <img ref=\"drag_icon\" src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n            <div\n              ref=\"empty_content\"\n              style={{ position: \"absolute\", width: \"1px\", height: \"1px\" }}\n            ></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\" onClick={this.onItemClick}>\n                  {dirent.name}\n                </a>\n              ) : (\n                <a\n                  href={dirent.type === \"dir\" ? dirHref : fileHref}\n                  onClick={this.onItemClick}\n                >\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {dirent.type !== \"dir\" &&\n            dirent.file_tags &&\n            dirent.file_tags.length > 0 && (\n              <Fragment>\n                <div\n                  id={`tag-list-title-${toolTipID}`}\n                  className=\"dirent-item tag-list tag-list-stacked\"\n                >\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span\n                        className=\"file-tag\"\n                        key={fileTag.id}\n                        style={{\n                          zIndex: length - index,\n                          backgroundColor: fileTag.color,\n                        }}\n                      ></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip\n                  target={`tag-list-title-${toolTipID}`}\n                  placement=\"bottom\"\n                >\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td\n          className=\"last-update\"\n          title={moment.unix(dirent.mtime).format(\"llll\")}\n        >\n          {dirent.mtime_relative}\n        </td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                alt=\"\"\n              />\n            ) : (\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\">{dirent.name}</a>\n              ) : (\n                <a href={dirent.type === \"dir\" ? dirHref : fileHref}>\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext(\"More Operations\")}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div\n              className={this.state.isOpMenuOpen ? \"\" : \"d-none\"}\n              onClick={this.toggleOpMenu}\n            >\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined && (\n                  <DropdownItem\n                    className=\"mobile-menu-item\"\n                    onClick={this.onItemStarred}\n                  >\n                    {dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n                  </DropdownItem>\n                )}\n                {this.props\n                  .getDirentItemMenuList(dirent, true)\n                  .map((item, index) => {\n                    if (item != \"Divider\" && item.key != \"Open via Client\") {\n                      return (\n                        <DropdownItem\n                          className=\"mobile-menu-item\"\n                          key={index}\n                          data-op={item.key}\n                          onClick={this.onMobileMenuItemClick}\n                        >\n                          {item.value}\n                        </DropdownItem>\n                      );\n                    } else {\n                      return null;\n                    }\n                  })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditFileTagShow && (\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        )}\n        {this.state.isZipDialogOpen && (\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    hideMenu();\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    hideMenu();\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission; \n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFileCancel={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ? \n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    hideMenu();\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle(currentObject);\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    hideMenu();\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    const { currentNode } = this.props;\n    this.changeState(currentNode);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    const { currentNode } = this.props;\n    let type = currentNode.object.type;\n    this.newInput.current.focus();\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={this.newInput} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onAddFileNode = (filePath, isDraft) => {\n    this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    this.props.onAddFileNode(filePath, isDraft);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  fileTags={this.props.isViewFile ? this.props.fileTags : []}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  deleteFolder: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass DeleteFolderDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedToUserCount: 0,\n      sharedToGroupCount: 0\n    };\n  }\n\n  componentDidMount() {\n    const { repoID, path } = this.props;\n    seafileAPI.getRepoFolderShareInfo(repoID, path).then((res) => {\n      this.setState({\n        sharedToUserCount: res.data['shared_user_emails'].length,\n        sharedToGroupCount: res.data['shared_group_ids'].length\n      });\n    });\n  }\n\n  deleteFolder = () => {\n    this.props.deleteFolder();\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const { sharedToUserCount, sharedToGroupCount } = this.state;\n    const { path, toggleDialog } = this.props;\n    const folderName = Utils.getFileName(path);\n    const opTarget = '<span class=\"op-target\">' + Utils.HTMLescape(folderName) + '</span>';\n    const message = gettext('Are you sure you want to delete %s ?').replace('%s', opTarget);\n\n    let alert_message = '';\n    if (sharedToUserCount > 0 || sharedToGroupCount > 0) {\n      alert_message = gettext('This folder has been shared to {user_amount} user(s) and {group_amount} group(s).')\n        .replace('{user_amount}', sharedToUserCount)\n        .replace('{group_amount}', sharedToGroupCount);\n    }\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Delete Folder')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n          {alert_message && <p className=\"error\">{alert_message}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteFolder}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteFolderDialog.propTypes = propTypes;\n\nexport default DeleteFolderDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\nimport DeleteFolderDialog from '../../components/dialog/delete-folder-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      isDeleteFolderDialogOpen: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  restoreDeletedDirents = (commitID, paths, e) => {\n    const { repoID } = this.props;\n    e.preventDefault();\n    toaster.closeAll();\n    seafileAPI.restoreDirents(repoID, commitID, paths).then(res => {\n      const { success, failed } = res.data;\n      success.forEach(dirent => {\n        let name = Utils.getFileName(dirent.path);\n        let parentPath = Utils.getDirName(dirent.path);\n        if (!dirent.is_dir) {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'file');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'file');\n          }\n        } else {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'dir');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'dir');\n          }\n        }\n      });\n\n      if (success.length) {\n        let msg = success.length > 1 ? gettext('Restored {name} and {n} other items') :\n          gettext('Restored {name}');\n        msg = msg.replace('{name}', success[0].path.split('/').pop())\n          .replace('{n}', success.length - 1);\n        toaster.success(msg);\n      }\n\n      if (failed.length) {\n        let msg = failed.length > 1 ? gettext('Failed to restore {name} and {n} other items') :\n          gettext('Failed to restore {name}');\n        msg = msg.replace('{name}', failed[0].path.split('/').pop())\n          .replace('{n}', failed.length - 1);\n        toaster.danger(msg);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and {n} other items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, direntPaths)}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and {n} other items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  toggleDeleteFolderDialog = () => {\n    this.setState({isDeleteFolderDialogOpen: !this.state.isDeleteFolderDialogOpen});\n  }\n\n  deleteFolder = () => {\n    const { repoID } = this.props;\n    const { folderToDelete: path } = this.state;\n    seafileAPI.deleteDir(repoID, path).then((res) => {\n      this.deleteItemAjaxCallback(path, true);\n      let name = Utils.getFileName(path);\n      var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      this.setState({ folderToDelete: path }, () => {\n        this.toggleDeleteFolderDialog();\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then((res) => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        const successTipWithUndo = (\n          <>\n            <span>{msg}</span>\n            <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n          </>\n        );\n        toaster.success(successTipWithUndo, {duration: 5});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      if (this.state.isViewFile) {\n        this.setState({fileTags: fileTags});\n      } else {\n        this.updateDirent(dirent, 'file_tags', fileTags);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    let mtime = new Date().getTime()/1000;\n    let dirent = new Dirent({name, type, mtime, size, permission});\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow, isDeleteFolderDialogOpen } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <LibContentToolbar\n            isViewFile={this.state.isViewFile}\n            filePermission={this.state.filePermission}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            onFileTagChanged={this.onToolbarFileTagChanged}\n            onSideNavMenuClick={this.props.onMenuClick}\n            repoID={this.props.repoID}\n            path={this.state.path}\n            isDirentSelected={this.state.isDirentSelected}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            onItemRename={this.onMainPanelItemRename}\n            direntList={this.state.direntList}\n            repoName={this.state.repoName}\n            repoEncrypted={this.state.repoEncrypted}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            userPerm={this.state.userPerm}\n            showShareBtn={showShareBtn}\n            enableDirPrivateShare={enableDirPrivateShare}\n            onAddFile={this.onAddFile}\n            onAddFolder={this.onAddFolder}\n            onUploadFile={this.onUploadFile}\n            onUploadFolder={this.onUploadFolder}\n            currentMode={this.state.currentMode}\n            switchViewMode={this.switchViewMode}\n            onSearchedClick={this.onSearchedClick}\n            isRepoOwner={isRepoOwner}\n            currentRepoInfo={this.state.currentRepoInfo}\n            updateDirent={this.updateDirent}\n            onDirentSelected={this.onDirentSelected}\n            showDirentDetail={this.showDirentDetail}\n            unSelectDirent={this.unSelectDirent}\n            onFilesTagChanged={this.onFileTagChanged}\n          />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <LibContentContainer\n            pathPrefix={this.props.pathPrefix}\n            currentMode={this.state.currentMode}\n            path={this.state.path}\n            pathExist={this.state.pathExist}\n            currentRepoInfo={this.state.currentRepoInfo}\n            repoID={this.props.repoID}\n            enableDirPrivateShare={enableDirPrivateShare}\n            userPerm={userPerm}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            onTabNavClick={this.props.onTabNavClick}\n            onMainNavBarClick={this.onMainNavBarClick}\n            isViewFile={this.state.isViewFile}\n            hash={this.state.hash}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            goDraftPage={this.goDraftPage}\n            isFileLoading={this.state.isFileLoading}\n            isFileLoadedErr={this.state.isFileLoadedErr}\n            filePermission={this.state.filePermission}\n            content={this.state.content}\n            lastModified={this.state.lastModified}\n            latestContributor={this.state.latestContributor}\n            onLinkClick={this.onLinkClick}\n            isTreeDataLoading={this.state.isTreeDataLoading}\n            treeData={this.state.treeData}\n            currentNode={this.state.currentNode}\n            onNodeClick={this.onTreeNodeClick}\n            onNodeCollapse={this.onTreeNodeCollapse}\n            onNodeExpanded={this.onTreeNodeExpanded}\n            onAddFolderNode={this.onAddFolder}\n            onAddFileNode={this.onAddFile}\n            onRenameNode={this.onRenameTreeNode}\n            onDeleteNode={this.onDeleteTreeNode}\n            draftCounts={this.state.draftCounts}\n            usedRepoTags={this.state.usedRepoTags}\n            readmeMarkdown={this.state.readmeMarkdown}\n            updateUsedRepoTags={this.updateUsedRepoTags}\n            isDirentListLoading={this.state.isDirentListLoading}\n            direntList={direntItemsList}\n            fullDirentList={this.state.direntList}\n            sortBy={this.state.sortBy}\n            sortOrder={this.state.sortOrder}\n            sortItems={this.sortItems}\n            updateDirent={this.updateDirent}\n            onDirentClick={this.onDirentClick}\n            onItemClick={this.onItemClick}\n            onItemSelected={this.onDirentSelected}\n            onItemDelete={this.onMainPanelItemDelete}\n            onItemRename={this.onMainPanelItemRename}\n            onItemMove={this.onMoveItem}\n            onItemCopy={this.onCopyItem}\n            onAddFolder={this.onAddFolder}\n            onAddFile={this.onAddFile}\n            onFileTagChanged={this.onFileTagChanged}\n            isDirentSelected={this.state.isDirentSelected}\n            isAllDirentSelected={this.state.isAllDirentSelected}\n            onAllDirentSelected={this.onAllDirentSelected}\n            isDirentDetailShow={this.state.isDirentDetailShow}\n            selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            closeDirentDetail={this.closeDirentDetail}\n            showDirentDetail={this.showDirentDetail}\n            direntDetailPanelTab={this.state.direntDetailPanelTab}\n            onDeleteRepoTag={this.onDeleteRepoTag}\n            onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n            updateDetail={this.state.updateDetail}\n            onListContainerScroll={this.onListContainerScroll}\n            loadDirentList={this.loadDirentList}\n          />\n          {canUpload && this.state.pathExist && !this.state.isViewFile && (\n            <FileUploader\n              ref={uploader => this.uploader = uploader}\n              dragAndDrop={true}\n              path={this.state.path}\n              repoID={this.props.repoID}\n              direntList={this.state.direntList}\n              onFileUploadSuccess={this.onFileUploadSuccess}\n              isCustomPermission={isCustomPermission}\n            />\n          )}\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n        {isDeleteFolderDialogOpen && (\n          <DeleteFolderDialog\n            repoID={this.props.repoID}\n            path={this.state.folderToDelete}\n            deleteFolder={this.deleteFolder}\n            toggleDialog={this.toggleDeleteFolderDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, InputGroup, InputGroupText, Input } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false,\n      searchActive: false,\n      keyword: '',\n      membersFound: []\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  searchMembers = (e) => {\n    const { groupMembers } = this.state;\n    const keyword = e.target.value;\n    const value = keyword.trim().toLowerCase();\n    const membersFound = groupMembers.filter(item => item.name.toLowerCase().indexOf(value) > -1);\n    this.setState({ keyword, membersFound });\n  }\n\n  clearSearch = () => {\n    this.setState({\n      keyword: '',\n      membersFound: []\n    });\n  }\n\n  onSearchInputFocus = () => {\n    this.setState({\n      searchActive: true\n    });\n  }\n\n  onSearchInputBlur = () => {\n    this.setState({\n      searchActive: false\n    });\n  }\n\n  render() {\n    const {\n      isLoading, hasNextPage, groupMembers,\n      keyword, membersFound,\n      searchActive\n    } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <InputGroup className={`search-group-members rounded ${searchActive ? 'active' : ''}`}>\n            <InputGroupText>\n              <i className=\"fas fa-search\" aria-hidden={true}></i>\n            </InputGroupText>\n            <Input\n              type=\"text\"\n              className=\"input-group-input px-0\"\n              placeholder={gettext('Search group members')}\n              value={keyword}\n              onChange={this.searchMembers}\n              onFocus={this.onSearchInputFocus}\n              onBlur={this.onSearchInputBlur}\n            />\n            {keyword && (\n              <InputGroupText>\n                <i className=\"sf2-icon-x1\" aria-hidden={true} onClick={this.clearSearch}></i>\n              </InputGroupText>\n            )}\n          </InputGroup>\n        }\n        <div className=\"manage-members\" onScroll={keyword.trim() ? () => {} : this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={keyword.trim() ? membersFound : groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {(!keyword.trim() && hasNextPage) && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  render() {\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>{gettext('Manage group members')}</ModalHeader>\n        <ModalBody className=\"pb-0\">\n          <ListAndAddGroupMembers\n            groupID={groupID}\n            isOwner={isOwner}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 300,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                  onMonitorRepo={this.onMonitorRepo}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n            autoFocus={true}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n            onMonitorRepo={this.onMonitorRepo}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {}, config: {},}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} autoFocus={true} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canPublishRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            {canPublishRepo &&\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n            }\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDom from 'react-dom';\nimport { Router, navigate } from '@gatsbyjs/reach-router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinks path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinks path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDom.render(<App />, document.getElementById('wrapper'));\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} className=\"vam\">\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const name = imageItems[imageIndex].name;\n    const imageTitle = `${name} (${imageIndex + 1}/${imageItemsLength})`;\n\n    return (\n      <Lightbox\n        imageTitle={imageTitle}\n        mainSrc={imageItems[imageIndex].src}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    if (this.reconstructor) {\n      throw new Error(\"got plaintext data when reconstructing a packet\");\n    }\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('../globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'],\n    };\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} autoFocus={true} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  }\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let { repoID, currentPath, usedRepoTags, readmeMarkdown, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (readmeMarkdown === undefined) {\n      readmeMarkdown = null;\n    }\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank' rel=\"noreferrer\">{readmeMarkdown.name}</a>\n            </span>\n          }\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('./xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    } \n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm)\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onContainerClick = (event) => {\n    hideMenu();\n  }\n\n  onNodeClick = (node) => {\n    hideMenu();\n    this.props.onNodeClick(node);\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n        onClick={this.onContainerClick}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid =\n      typeof data.num === \"number\" &&\n      data.num >= 0 &&\n      data.num < buffers.length;\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, its not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSpriteSymbol = factory());\n}(this, (function () { 'use strict';\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nreturn BrowserSpriteSymbol;\n\n})));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSprite = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\n//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar svg$1 = namespaces_1.svg;\nvar xlink$1 = namespaces_1.xlink;\n\nvar defaultConfig = {\n  attrs: ( obj = {\n    style: ['position: absolute', 'width: 0', 'height: 0'].join('; '),\n    'aria-hidden': 'true'\n  }, obj[svg$1.name] = svg$1.uri, obj[xlink$1.name] = xlink$1.uri, obj )\n};\nvar obj;\n\nvar Sprite = function Sprite(config) {\n  this.config = deepmerge(defaultConfig, config || {});\n  this.symbols = [];\n};\n\n/**\n * Add new symbol. If symbol with the same id exists it will be replaced.\n * @param {SpriteSymbol} symbol\n * @return {boolean} `true` - symbol was added, `false` - replaced\n */\nSprite.prototype.add = function add (symbol) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var existing = this.find(symbol.id);\n\n  if (existing) {\n    symbols[symbols.indexOf(existing)] = symbol;\n    return false;\n  }\n\n  symbols.push(symbol);\n  return true;\n};\n\n/**\n * Remove symbol & destroy it\n * @param {string} id\n * @return {boolean} `true` - symbol was found & successfully destroyed, `false` - otherwise\n */\nSprite.prototype.remove = function remove (id) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var symbol = this.find(id);\n\n  if (symbol) {\n    symbols.splice(symbols.indexOf(symbol), 1);\n    symbol.destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * @param {string} id\n * @return {SpriteSymbol|null}\n */\nSprite.prototype.find = function find (id) {\n  return this.symbols.filter(function (s) { return s.id === id; })[0] || null;\n};\n\n/**\n * @param {string} id\n * @return {boolean}\n */\nSprite.prototype.has = function has (id) {\n  return this.find(id) !== null;\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.stringify = function stringify () {\n  var ref = this.config;\n    var attrs = ref.attrs;\n  var stringifiedSymbols = this.symbols.map(function (s) { return s.stringify(); }).join('');\n  return wrapInSvgString(stringifiedSymbols, attrs);\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSprite.prototype.destroy = function destroy () {\n  this.symbols.forEach(function (s) { return s.destroy(); });\n};\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nvar defaultConfig$1 = {\n  /**\n   * Should following options be automatically configured:\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @type {boolean}\n   */\n  autoConfigure: true,\n\n  /**\n   * Default mounting selector\n   * @type {string}\n   */\n  mountTo: 'body',\n\n  /**\n   * Fix disappearing SVG elements when <base href> exists.\n   * Executes when sprite mounted.\n   * @see http://stackoverflow.com/a/18265336/796152\n   * @see https://github.com/everdimension/angular-svg-base-fix\n   * @see https://github.com/angular/angular.js/issues/8934#issuecomment-56568466\n   * @type {boolean}\n   */\n  syncUrlsWithBaseTag: false,\n\n  /**\n   * Should sprite listen custom location change event\n   * @type {boolean}\n   */\n  listenLocationChangeEvent: true,\n\n  /**\n   * Custom window event name which should be emitted to update sprite urls\n   * @type {string}\n   */\n  locationChangeEvent: 'locationChange',\n\n  /**\n   * Emit location change event in Angular automatically\n   * @type {boolean}\n   */\n  locationChangeAngularEmitter: false,\n\n  /**\n   * Selector to find symbols usages when updating sprite urls\n   * @type {string}\n   */\n  usagesToUpdate: 'use[*|href]',\n\n  /**\n   * Fix Firefox bug when gradients and patterns don't work if they are within a symbol.\n   * Executes when sprite is rendered, but not mounted.\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=306674\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=353575\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1235364\n   * @type {boolean}\n   */\n  moveGradientsOutsideSymbol: false\n};\n\n/**\n * @param {*} arrayLike\n * @return {Array}\n */\nvar arrayFrom = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike, 0);\n};\n\nvar browser = {\n  isChrome: function () { return /chrome/i.test(navigator.userAgent); },\n  isFirefox: function () { return /firefox/i.test(navigator.userAgent); },\n\n  // https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx\n  isIE: function () { return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent); },\n  isEdge: function () { return /edge/i.test(navigator.userAgent); }\n};\n\n/**\n * @param {string} name\n * @param {*} data\n */\nvar dispatchEvent = function (name, data) {\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(name, false, false, data);\n  window.dispatchEvent(event);\n};\n\n/**\n * IE doesn't evaluate <style> tags in SVGs that are dynamically added to the page.\n * This trick will trigger IE to read and use any existing SVG <style> tags.\n * @see https://github.com/iconic/SVGInjector/issues/23\n * @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n *\n * @param {Element} node DOM Element to search <style> tags in\n * @return {Array<HTMLStyleElement>}\n */\nvar evalStylesIEWorkaround = function (node) {\n  var updatedNodes = [];\n\n  arrayFrom(node.querySelectorAll('style'))\n    .forEach(function (style) {\n      style.textContent += '';\n      updatedNodes.push(style);\n    });\n\n  return updatedNodes;\n};\n\n/**\n * @param {string} [url] If not provided - current URL will be used\n * @return {string}\n */\nvar getUrlWithoutFragment = function (url) {\n  return (url || window.location.href).split('#')[0];\n};\n\n/* global angular */\n/**\n * @param {string} eventName\n */\nvar locationChangeAngularEmitter = function (eventName) {\n  angular.module('ng').run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$locationChangeSuccess', function (e, newUrl, oldUrl) {\n      dispatchEvent(eventName, { oldUrl: oldUrl, newUrl: newUrl });\n    });\n  }]);\n};\n\nvar defaultSelector = 'linearGradient, radialGradient, pattern, mask, clipPath';\n\n/**\n * @param {Element} svg\n * @param {string} [selector]\n * @return {Element}\n */\nvar moveGradientsOutsideSymbol = function (svg, selector) {\n  if ( selector === void 0 ) selector = defaultSelector;\n\n  arrayFrom(svg.querySelectorAll('symbol')).forEach(function (symbol) {\n    arrayFrom(symbol.querySelectorAll(selector)).forEach(function (node) {\n      symbol.parentNode.insertBefore(node, symbol);\n    });\n  });\n  return svg;\n};\n\n/**\n * @param {NodeList} nodes\n * @param {Function} [matcher]\n * @return {Attr[]}\n */\nfunction selectAttributes(nodes, matcher) {\n  var attrs = arrayFrom(nodes).reduce(function (acc, node) {\n    if (!node.attributes) {\n      return acc;\n    }\n\n    var arrayfied = arrayFrom(node.attributes);\n    var matched = matcher ? arrayfied.filter(matcher) : arrayfied;\n    return acc.concat(matched);\n  }, []);\n\n  return attrs;\n}\n\n/**\n * @param {NodeList|Node} nodes\n * @param {boolean} [clone=true]\n * @return {string}\n */\n\nvar xLinkNS = namespaces_1.xlink.uri;\nvar xLinkAttrName = 'xlink:href';\n\n// eslint-disable-next-line no-useless-escape\nvar specialUrlCharsPattern = /[{}|\\\\\\^\\[\\]`\"<>]/g;\n\nfunction encoder(url) {\n  return url.replace(specialUrlCharsPattern, function (match) {\n    return (\"%\" + (match[0].charCodeAt(0).toString(16).toUpperCase()));\n  });\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * @param {NodeList} nodes\n * @param {string} startsWith\n * @param {string} replaceWith\n * @return {NodeList}\n */\nfunction updateReferences(nodes, startsWith, replaceWith) {\n  arrayFrom(nodes).forEach(function (node) {\n    var href = node.getAttribute(xLinkAttrName);\n    if (href && href.indexOf(startsWith) === 0) {\n      var newUrl = href.replace(startsWith, replaceWith);\n      node.setAttributeNS(xLinkNS, xLinkAttrName, newUrl);\n    }\n  });\n\n  return nodes;\n}\n\n/**\n * List of SVG attributes to update url() target in them\n */\nvar attList = [\n  'clipPath',\n  'colorProfile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'mask',\n  'stroke',\n  'style'\n];\n\nvar attSelector = attList.map(function (attr) { return (\"[\" + attr + \"]\"); }).join(',');\n\n/**\n * Update URLs in svg image (like `fill=\"url(...)\"`) and update referencing elements\n * @param {Element} svg\n * @param {NodeList} references\n * @param {string|RegExp} startsWith\n * @param {string} replaceWith\n * @return {void}\n *\n * @example\n * const sprite = document.querySelector('svg.sprite');\n * const usages = document.querySelectorAll('use');\n * updateUrls(sprite, usages, '#', 'prefix#');\n */\nvar updateUrls = function (svg, references, startsWith, replaceWith) {\n  var startsWithEncoded = encoder(startsWith);\n  var replaceWithEncoded = encoder(replaceWith);\n\n  var nodes = svg.querySelectorAll(attSelector);\n  var attrs = selectAttributes(nodes, function (ref) {\n    var localName = ref.localName;\n    var value = ref.value;\n\n    return attList.indexOf(localName) !== -1 && value.indexOf((\"url(\" + startsWithEncoded)) !== -1;\n  });\n\n  attrs.forEach(function (attr) { return attr.value = attr.value.replace(new RegExp(escapeRegExp(startsWithEncoded), 'g'), replaceWithEncoded); });\n  updateReferences(references, startsWithEncoded, replaceWithEncoded);\n};\n\n/**\n * Internal emitter events\n * @enum\n * @private\n */\nvar Events = {\n  MOUNT: 'mount',\n  SYMBOL_MOUNT: 'symbol_mount'\n};\n\nvar BrowserSprite = (function (Sprite$$1) {\n  function BrowserSprite(cfg) {\n    var this$1 = this;\n    if ( cfg === void 0 ) cfg = {};\n\n    Sprite$$1.call(this, deepmerge(defaultConfig$1, cfg));\n\n    var emitter = mitt();\n    this._emitter = emitter;\n    this.node = null;\n\n    var ref = this;\n    var config = ref.config;\n\n    if (config.autoConfigure) {\n      this._autoConfigure(cfg);\n    }\n\n    if (config.syncUrlsWithBaseTag) {\n      var baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n      emitter.on(Events.MOUNT, function () { return this$1.updateUrls('#', baseUrl); });\n    }\n\n    var handleLocationChange = this._handleLocationChange.bind(this);\n    this._handleLocationChange = handleLocationChange;\n\n    // Provide way to update sprite urls externally via dispatching custom window event\n    if (config.listenLocationChangeEvent) {\n      window.addEventListener(config.locationChangeEvent, handleLocationChange);\n    }\n\n    // Emit location change event in Angular automatically\n    if (config.locationChangeAngularEmitter) {\n      locationChangeAngularEmitter(config.locationChangeEvent);\n    }\n\n    // After sprite mounted\n    emitter.on(Events.MOUNT, function (spriteNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(spriteNode);\n      }\n    });\n\n    // After symbol mounted into sprite\n    emitter.on(Events.SYMBOL_MOUNT, function (symbolNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(symbolNode.parentNode);\n      }\n\n      if (browser.isIE() || browser.isEdge()) {\n        evalStylesIEWorkaround(symbolNode);\n      }\n    });\n  }\n\n  if ( Sprite$$1 ) BrowserSprite.__proto__ = Sprite$$1;\n  BrowserSprite.prototype = Object.create( Sprite$$1 && Sprite$$1.prototype );\n  BrowserSprite.prototype.constructor = BrowserSprite;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  /**\n   * @return {boolean}\n   */\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * Automatically configure following options\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @param {Object} cfg\n   * @private\n   */\n  BrowserSprite.prototype._autoConfigure = function _autoConfigure (cfg) {\n    var ref = this;\n    var config = ref.config;\n\n    if (typeof cfg.syncUrlsWithBaseTag === 'undefined') {\n      config.syncUrlsWithBaseTag = typeof document.getElementsByTagName('base')[0] !== 'undefined';\n    }\n\n    if (typeof cfg.locationChangeAngularEmitter === 'undefined') {\n        config.locationChangeAngularEmitter = typeof window.angular !== 'undefined';\n    }\n\n    if (typeof cfg.moveGradientsOutsideSymbol === 'undefined') {\n      config.moveGradientsOutsideSymbol = browser.isFirefox();\n    }\n  };\n\n  /**\n   * @param {Event} event\n   * @param {Object} event.detail\n   * @param {string} event.detail.oldUrl\n   * @param {string} event.detail.newUrl\n   * @private\n   */\n  BrowserSprite.prototype._handleLocationChange = function _handleLocationChange (event) {\n    var ref = event.detail;\n    var oldUrl = ref.oldUrl;\n    var newUrl = ref.newUrl;\n    this.updateUrls(oldUrl, newUrl);\n  };\n\n  /**\n   * Add new symbol. If symbol with the same id exists it will be replaced.\n   * If sprite already mounted - `symbol.mount(sprite.node)` will be called.\n   * @fires Events#SYMBOL_MOUNT\n   * @param {BrowserSpriteSymbol} symbol\n   * @return {boolean} `true` - symbol was added, `false` - replaced\n   */\n  BrowserSprite.prototype.add = function add (symbol) {\n    var sprite = this;\n    var isNewSymbol = Sprite$$1.prototype.add.call(this, symbol);\n\n    if (this.isMounted && isNewSymbol) {\n      symbol.mount(sprite.node);\n      this._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    }\n\n    return isNewSymbol;\n  };\n\n  /**\n   * Attach to existing DOM node\n   * @param {string|Element} target\n   * @return {Element|null} attached DOM Element. null if node to attach not found.\n   */\n  BrowserSprite.prototype.attach = function attach (target) {\n    var this$1 = this;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    /** @type Element */\n    var node = typeof target === 'string' ? document.querySelector(target) : target;\n    sprite.node = node;\n\n    // Already added symbols needs to be mounted\n    this.symbols.forEach(function (symbol) {\n      symbol.mount(sprite.node);\n      this$1._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    });\n\n    // Create symbols from existing DOM nodes, add and mount them\n    arrayFrom(node.querySelectorAll('symbol'))\n      .forEach(function (symbolNode) {\n        var symbol = BrowserSpriteSymbol.createFromExistingNode(symbolNode);\n        symbol.node = symbolNode; // hack to prevent symbol mounting to sprite when adding\n        sprite.add(symbol);\n      });\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  BrowserSprite.prototype.destroy = function destroy () {\n    var ref = this;\n    var config = ref.config;\n    var symbols = ref.symbols;\n    var _emitter = ref._emitter;\n\n    symbols.forEach(function (s) { return s.destroy(); });\n\n    _emitter.off('*');\n    window.removeEventListener(config.locationChangeEvent, this._handleLocationChange);\n\n    if (this.isMounted) {\n      this.unmount();\n    }\n  };\n\n  /**\n   * @fires Events#MOUNT\n   * @param {string|Element} [target]\n   * @param {boolean} [prepend=false]\n   * @return {Element|null} rendered sprite node. null if mount node not found.\n   */\n  BrowserSprite.prototype.mount = function mount (target, prepend) {\n    if ( target === void 0 ) target = this.config.mountTo;\n    if ( prepend === void 0 ) prepend = false;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    var mountNode = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = sprite.render();\n    this.node = node;\n\n    if (prepend && mountNode.childNodes[0]) {\n      mountNode.insertBefore(node, mountNode.childNodes[0]);\n    } else {\n      mountNode.appendChild(node);\n    }\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSprite.prototype.render = function render () {\n    return parse(this.stringify());\n  };\n\n  /**\n   * Detach sprite from the DOM\n   */\n  BrowserSprite.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  /**\n   * Update URLs in sprite and usage elements\n   * @param {string} oldUrl\n   * @param {string} newUrl\n   * @return {boolean} `true` - URLs was updated, `false` - sprite is not mounted\n   */\n  BrowserSprite.prototype.updateUrls = function updateUrls$1 (oldUrl, newUrl) {\n    if (!this.isMounted) {\n      return false;\n    }\n\n    var usages = document.querySelectorAll(this.config.usagesToUpdate);\n\n    updateUrls(\n      this.node,\n      usages,\n      ((getUrlWithoutFragment(oldUrl)) + \"#\"),\n      ((getUrlWithoutFragment(newUrl)) + \"#\")\n    );\n\n    return true;\n  };\n\n  Object.defineProperties( BrowserSprite.prototype, prototypeAccessors );\n\n  return BrowserSprite;\n}(Sprite));\n\nvar ready$1 = createCommonjsModule(function (module) {\n/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  { module.exports = definition(); }\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);\n\n\n  if (!loaded)\n  { doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener);\n    loaded = 1;\n    while (listener = fns.shift()) { listener(); }\n  }); }\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn);\n  }\n\n});\n});\n\nvar spriteNodeId = '__SVG_SPRITE_NODE__';\nvar spriteGlobalVarName = '__SVG_SPRITE__';\nvar isSpriteExists = !!window[spriteGlobalVarName];\n\n// eslint-disable-next-line import/no-mutable-exports\nvar sprite;\n\nif (isSpriteExists) {\n  sprite = window[spriteGlobalVarName];\n} else {\n  sprite = new BrowserSprite({\n    attrs: {\n      id: spriteNodeId,\n      'aria-hidden': 'true'\n    }\n  });\n  window[spriteGlobalVarName] = sprite;\n}\n\nvar loadSprite = function () {\n  /**\n   * Check for page already contains sprite node\n   * If found - attach to and reuse it's content\n   * If not - render and mount the new sprite\n   */\n  var existing = document.getElementById(spriteNodeId);\n\n  if (existing) {\n    sprite.attach(existing);\n  } else {\n    sprite.mount(document.body, true);\n  }\n};\n\nif (document.body) {\n  loadSprite();\n} else {\n  ready$1(loadSprite);\n}\n\nvar sprite$1 = sprite;\n\nreturn sprite$1;\n\n})));\n"],"sourceRoot":""}