{"version":3,"sources":["components/context-menu/helpers.js","../node_modules/debug/src/browser.js","../node_modules/component-emitter/index.js","../node_modules/engine.io-parser/lib/browser.js","components/dialog/edit-filetag-dialog.js","components/context-menu/globalEventListener.js","components/context-menu/context-menu.js","../node_modules/reactstrap/es/Table.js","assets/icons sync //.svg$","assets/icons/monitor.svg","../node_modules/reactstrap/es/UncontrolledTooltip.js","components/dialog/create-folder-dialog.js","components/dialog/zip-download-dialog.js","components/system-notification.js","models/group.js","models/library-details.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","components/dialog/sort-options.js","components/toolbar/top-toolbar.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","components/icon.js","components/repo-monitored-icon.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","components/rename.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-upload-links-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","components/dialog/assign-doi-dialog.js","../node_modules/react-select/async-creatable/dist/react-select-async-creatable.esm.js","components/keeper-archive-metadata-form.js","components/dialog/archive-library-dialog.js","components/dialog/certify-library-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/dialog/keeper-edit-metadata-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/dialog/list-tag-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/dirent-list-item.js","assets/berg_icon.png","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","components/dialog/delete-folder-dialog.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/v4.js","components/dropdown-menu/item-dropdown-menu.js","../node_modules/parseqs/index.js","../node_modules/component-inherit/index.js","components/dialog/image-dialog.js","../node_modules/socket.io-parser/index.js","../node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/transport.js","components/dialog/create-tag-dialog.js","components/dialog/share-admin-link.js","components/dialog/list-taggedfiles-dialog.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","../node_modules/parseuri/index.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/has-binary2/index.js","../node_modules/yeast/index.js","../node_modules/indexof/index.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/on.js","../node_modules/component-bind/index.js","../node_modules/socket.io-client/lib/index.js","components/wiki-markdown-viewer.js","components/dialog/copy-move-dirent-progress-dialog.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","../node_modules/socket.io-client/lib/url.js","../node_modules/debug/src/debug.js","../node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/after/index.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/to-array/index.js","../node_modules/backo2/index.js","components/context-menu/actions.js","../node_modules/svg-baker-runtime/browser-symbol.js","../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js","../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/function-bind-native.js","../../node_modules/core-js/internals/function-call.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/engine-v8-version.js","../../node_modules/core-js/internals/function-uncurry-this-raw.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/function-uncurry-this.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/is-null-or-undefined.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/document-all.js","../../node_modules/core-js/internals/is-callable.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/object-is-prototype-of.js","../../node_modules/core-js/internals/engine-user-agent.js","../../node_modules/core-js/internals/symbol-constructor-detection.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/is-symbol.js","../../node_modules/core-js/internals/try-to-string.js","../../node_modules/core-js/internals/a-callable.js","../../node_modules/core-js/internals/get-method.js","../../node_modules/core-js/internals/ordinary-to-primitive.js","../../node_modules/core-js/internals/define-global-property.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/to-object.js","../../node_modules/core-js/internals/has-own-property.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/to-property-key.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/v8-prototype-define-bug.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/function-name.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/weak-map-basic-detection.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/make-built-in.js","../../node_modules/core-js/internals/define-built-in.js","../../node_modules/core-js/internals/math-trunc.js","../../node_modules/core-js/internals/to-integer-or-infinity.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/length-of-array-like.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/is-array.js","../../node_modules/core-js/internals/to-string-tag-support.js","../../node_modules/core-js/internals/classof.js","../../node_modules/core-js/internals/is-constructor.js","../../node_modules/core-js/internals/array-species-constructor.js","../../node_modules/core-js/internals/array-species-create.js","../../node_modules/core-js/internals/array-iteration.js","../../node_modules/core-js/internals/object-keys.js","../../node_modules/core-js/internals/object-define-properties.js","../../node_modules/core-js/internals/html.js","../../node_modules/core-js/internals/object-create.js","../../node_modules/core-js/internals/add-to-unscopables.js","../../node_modules/core-js/modules/es.array.find.js","../../src/constant.js","../../src/decorators/staticMethods.js","../../src/decorators/customEvent.js","../../src/decorators/bodyMode.js","../../src/utils/getPosition.js","../../src/utils/getTipContent.js","../../src/utils/aria.js","../../src/utils/nodeListToArray.js","../../src/decorators/defaultStyles.js","../../src/decorators/styler.js","../../src/index.js","../../src/decorators/trackRemoval.js","../../src/decorators/windowListener.js","../../src/decorators/isCapture.js","../../src/decorators/getEffect.js","../../src/utils/uuid.js"],"names":["callIfExists","func","args","hasOwnProp","obj","prop","Object","prototype","hasOwnProperty","call","uniqueId","Math","random","toString","substring","store","canUseDOM","Boolean","window","document","createElement","load","r","exports","storage","debug","e","process","DEBUG","module","require","log","console","Function","apply","arguments","formatArgs","useColors","this","namespace","humanize","diff","c","color","splice","index","lastC","replace","match","save","namespaces","removeItem","type","navigator","userAgent","toLowerCase","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","chrome","local","localStorage","localstorage","colors","formatters","j","v","JSON","stringify","err","message","enable","Emitter","key","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","removeListener","removeAllListeners","removeEventListener","length","cb","callbacks","i","emit","Array","len","slice","listeners","hasListeners","base64encoder","keys","hasBinary","sliceBuffer","after","utf8","ArrayBuffer","isAndroid","test","isPhantomJS","dontSendBlobs","protocol","packets","open","close","ping","pong","upgrade","noop","packetslist","data","Blob","map","ary","each","done","result","next","eachWithIndex","el","error","msg","encodePacket","packet","supportsBinary","utf8encode","callback","undefined","buffer","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","byteLength","encodeArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","base64","encodeBase64Object","encoded","encode","String","strict","b64data","b64","split","readAsDataURL","fromCharCode","typed","basic","btoa","decodePacket","binaryType","utf8decode","charAt","decodeBase64Packet","substr","decode","tryDecode","Number","rest","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","results","join","decodePayload","decodePayloadAsBinary","n","l","chr","encodedPackets","totalLength","reduce","acc","p","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","binaryIdentifier","size","lengthAry","bufferTail","buffers","tailArray","msgLength","total","TagItem","props","onMouseEnter","setState","isTagHighlighted","onMouseLeave","getRepoTagIdList","fileTagList","fileTag","repo_tag_id","onEditFileTag","repoID","repoTag","filePath","repoTagIdList","indexOf","id","seafileAPI","addFileTag","then","onFileTagChanged","catch","errMessage","Utils","getErrorMsg","toaster","danger","deleteFileTag","state","isTagSelected","className","onClick","backgroundColor","name","React","Component","TagList","getRepoTagList","listRepoTags","res","repotagList","repo_tags","item","RepoTag","toggle","toggleCancel","gettext","href","createNewTag","EditFileTagDialog","isCreateRepoTagShow","isListRepoTagShow","onRepoTagCreated","repoTagID","isOpen","autoFocus","onClose","handleShowEvent","show","handleHideEvent","hide","register","showCallback","hideCallback","unregister","MENU_SHOW","MENU_HIDE","ContextMenu","registerHandlers","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","detail","position","x","y","currentObject","menuList","isVisible","onShowMenu","onHideMenu","menu","contains","target","hideMenu","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","onMenuItemClick","stopPropagation","operation","getEventData","onContextMenu","listenId","listener","wrapper","requestAnimationFrame","setTimeout","rtl","opacity","pointerEvents","role","display","ref","menuItem","value","propTypes","PropTypes","string","cssModule","object","bordered","bool","borderless","striped","dark","hover","responsive","oneOfType","tag","tagPropType","responsiveTag","innerRef","Table","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","_extends","responsiveClassName","defaultProps","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","symbol","add","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","omitKeys","UncontrolledTooltip","_Component","_this","defaultOpen","bind","_assertThisInitialized","_inheritsLoose","_proto","render","Tooltip","omit","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectSpread","CreateForder","handleChange","trim","isSubmitBtnActive","childName","handleSubmit","newName","checkDuplicatedName","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","addFolderCancel","for","onKeyPress","onChange","disabled","interval","ZipDownloadDialog","queryZipProgress","zipToken","failed","clearInterval","isLoading","errorMsg","failed_reason","zipProgress","zipped","toFixed","toggleDialog","location","fileServerRoot","cancelZipTask","token","getShareLinkDirentsZipTask","getShareLinkZipTask","zipDownload","setInterval","Content","SystemNotification","isClosed","cookieEnabled","date","Date","cookies","cookie","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","curNoteMsg","dangerouslySetInnerHTML","__html","title","Group","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","LibraryDetails","repo_id","repo_name","MainSideNav","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","listGroups","groupList","groupsHeight","listHeight","groupItems","sort","a","b","tabItemClick","param","uploader","isUploadProgressDialogShow","totalProgress","confirm","onDTableClick","url","dtableWebServer","getActiveClass","tab","currentTab","libdtExtend","libraryDetailsExtended","loadLibraryDetails","keeperAPI","listLibraryDetails","libraryDetailsList","libraryDetailsHeight","libraryDetailItems","closeSideBar","adminHeight","to","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","link","desc","icon","showActivity","isDocs","isPro","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","renderLibraryDetails","draftCounts","canInvitePeople","renderSharedAdmin","renderCustomNavItems","AboutDialog","onCloseAboutDialog","Modal","ModalBody","src","mediaUrl","logoPath","logoHeight","logoWidth","siteTitle","alt","seafileVersion","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","onFooterExpandedToggle","collapsed","elementBodyStyle","maxHeight","borderBottomWidth","SidePanel","isSidePanelClosed","onCloseSidePanel","MainPanel","script","async","body","appendChild","children","DraftsView","moment","locale","lang","DraftListItem","isItemFreezed","isMenuIconShow","highlight","onDropdownToggleClick","toggleOperationMenu","isItemMenuShow","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","origin_repo_id","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","encodeURIComponent","localTime","utc","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","success","publishDraft","getDrafts","isLoadingDraft","Acticity","json","obj_type","commit_id","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","ModalHeader","fileURL","encodePath","serviceURL","fileLink","ModalFooter","Button","app","config","FileActivitiesContent","isDesktop","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","onListCreatedFilesToggle","isListCreatedFiles","op","details","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FilesActivities","mergePublishEvents","events","curPathList","oldPathList","actuallyEvents","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","hasMore","clientHeight","scrollHeight","scrollTop","getMore","isFirstLoading","currentPage","avatarSize","listActivities","onScroll","loading","emptyTip","TableBody","getThumbnails","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","linkUrl","desktopItem","onMouseOver","onMouseOut","onFocus","mobileItem","Starred","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","FormGroup","check","Label","Input","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","device_name","last_login_ip","last_accessed","Fragment","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","share_permission_name","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","find","translateExplanation","explanation","sharePermsExplanation","description","getPermissions","newPermissions","permissions","currentPerm","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","togglePermSelectDialog","isPermSelectDialogOpen","options","user","updateRepoSharePerm","unshare","unshareRepo","unshared","onEditPermission","nativeEvent","stopImmediatePropagation","isShowPermEditor","showAdmin","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","isTextMode","isEditing","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","SortOptions","sortOptions","TopToolbar","onShowSidePanel","onSearchedClick","searchPlaceholder","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","objUrl","deletedTip","obj_id","rel","view_cnt","ShareAdminShareLinks","deleteShareLink","uploadItem","toggleSortOptionsDialog","isSortOptionsDialogOpen","toggleCleanInvalidShareLinksDialog","isCleanInvalidShareLinksDialogOpen","cleanInvalidShareLinks","newItems","listUserShareLinks","ShareLink","confirmBtnText","ShareAdminUploadLinks","deleteUploadLink","toggleCleanInvalidUploadLinksDialog","isCleanInvalidUploadLinksDialogOpen","cleanInvalidUploadLinks","listUserUploadLinks","UploadLink","Repo","size_original","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","monitored","storage_name","doi","LibsMobileThead","requireContext","Icon","iconClass","xlinkHref","RepoMonitoredIcon","placement","freezeItem","freezed","sortBySize","onMonitorRepo","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","watchFileChanges","repo","monitorRepo","unwatchFileChanges","unMonitorRepo","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","enableMonitorRepo","tabIndex","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","server","get","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","currentPath","downloadFile","downloadUrl","shared_by","DirPath","turnPathToLink","pathList","nodePath","pathElem","MainPanelTopbar","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","DirContent","direntList","deleteDirent","fromSystemRepo","Dirent","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","openFileInput","fileInput","current","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","axios","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","createRef","CreateRepoDialog","handleRepoNameChange","handlePassword1Change","password1","handlePassword2Change","password2","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","password","passwd","storages","libraryTemplates","repoPasswordMinLength","Form","defaultValue","label","enableEncryptedLibrary","autoComplete","Alert","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","onDropdownToggleKeyDown","visitDeletedviaKey","onKeyDown","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","nextProps","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","method","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","isMulti","placeholder","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","userFolderPermItems","concat","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","mode","onDirentItemClick","thead","onSelectChange","InputGroup","InputGroupAddon","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","Nav","pills","NavItem","NavLink","TabContent","TabPane","tabId","folderName","maxWidth","Rename","onRenameConfirm","validateInput","isValid","onRenameCancel","renameInput","focus","hasSuffix","endIndex","lastIndexOf","setSelectionRange","MylibRepoMenu","onMenuItemKeyDown","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","operations","showAssignDoiMenuItem","showArchiveLibraryMenuItem","showCertifyLibraryMenuItem","showEditMetadatayMenuItem","folderPermEnabled","monitorOp","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","translateOperations","translateResult","divider","unshift","RepoAPITokenPermissionEditor","onHideSelect","onSelectHandler","optionTranslation","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","addAPIToken","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","duration","renderAPITokenList","minHeight","onRepoAPITokenToggle","RepoShareUploadLinkItem","onDeleteLink","deleteItem","creator_name","RepoShareUploadLinksDialog","getItems","listRepoShareLinks","listRepoUploadLinks","repoShareUploadLinkList","deleteRepoShareLink","deleteRepoUploadLink","forDialog","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","AssignDoiDialog","addDoi","AsyncCreatableSelect","forwardRef","stateManagerProps","useAsync","creatableProps","useStateManager","selectProps","useCreatable","Select","mpgInstituteOptions","defaultResourceType","resourceTypes","defaultAuthors","firstName","lastName","affs","defaultDirectors","defaultPublisher","defaultMd","authors","publisher","year","institute","department","directors","resourceType","license","errors","defaultValidMd","InfoArea","toggleHelp","helpTooltipOpen","toggleError","errorTooltipOpen","fontWeight","delay","helpText","KeeperArchiveMetadataForm","isFieldValid","isFormValid","validMd","outer","setButtons","isButton1Disabled","isSaved","isButton2Disabled","getValidMd","md","k","onButton1","onButton2","handleAuthorAddFields","values","setAuthorInputFields","handleAuthorRemoveFields","handleAuthorInputChange","handleAuthorAffInputChange","aidx","handleAuthorAffAddFields","handleAuthorAffRemoveFields","handleDirectorAddFields","setDirectorInputFields","handleDirectorRemoveFields","handleDirectorInputChange","onResourceSelectChange","resourceOptions","filterInstitutes","input","promiseOptions","Promise","handleInstituteChange","insName","validationProps","valid","invalid","validationInSelects","validationInAuthors","nidx","validationInDirectors","getArchiveMetadata","newState","getMpgInstitutes","res2","hideDialog","header","paddingBottom","row","Col","sm","Row","inputField","_","isClearable","cacheOptions","form","button1Label","button2Label","ArchiveLibraryDialog","onUpdateArchiveMetadata","updateArchiveMetadata","onArchiveClick","archiveLibrary","resp","quota","CertifyLibraryDialog","canCertify","certifyLibrary","certifyOnBloxberg","handleCanArchiveResponse","d","default_error","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareUploadLinksDialog","toggleOldFilesAutoDelDialog","onAssignDoiToggle","onArchiveLibraryToggle","onCertifyLibraryToggle","onEditMetadataToggle","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareUploadLinksDialogOpen","isOldFilesAutoDelDialogOpen","isAssignDoiDialogShow","onArchiveLibraryHide","isArchiveLibraryDialogShow","canArchive","onCertifyLibraryHide","isCertifyLibraryDialogShow","onEditMetadataHide","isEditMetadataDialogShow","renameRepo","onRenameRepo","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","renderMobileUI","query","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","isStaff","username","isRepoOwner","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","collabServer","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","CreateFile","isDuplicated","onAddFile","handleCheck","pos","fileType","isdraft","addFileCancel","onAfterModelOpened","newInput","onOpened","KeeperEditMetadataDialog","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","dirPath","getFolderName","getUserPermission","customPermission","canUpload","canCreate","upload","create","isArchiveBtnShow","isEditMetadataBtnShow","isCertifyBtnShow","content","showShareBtn","isSupportUploadFolder","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","onRename","changeState","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","onOpenViaClient","getDirentPath","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ButtonGroup","tagName","toggleClass","getMenuList","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","isDirentSelected","tabName","tagTitle","pathPrefix","showName","zIndex","TagColor","togglePopover","isPopoverOpen","selectTagColor","newColor","updateRepoTag","tagColor","colorList","Popover","PopoverBody","defaultChecked","TagName","toggleMode","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","deleteTag","onDeleteTag","ListTagDialog","onListTagCancel","onCreateRepoTag","targetTagID","deleteRepoTag","repo_tag","DirTool","onShowListRepoTag","isRepoTagDialogShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onListTaggedFileToggle","currentTag","isFile","isMarkdownFile","trashUrl","updateUsedRepoTags","CurDirPath","onDeleteRepoTag","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","entry","search","highlightedDisplay","focused","oldTime","participants","showIconTip","defaultStyle","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","CommentItem","convertComment","mdFile","processor","html","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","DetailListView","getDirentPostion","repoInfo","isEditFileTagShow","direntType","direntDetail","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","classnames","active","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","isImg","isVideo","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","DirentListItem","canDrag","isDragTipShow","unfreezeItem","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","onItemCertify","certifyFile","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onConvertWithONLYOFFICE","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","getData","parse","isArray","draggedItem","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","isHasPermissionToShare","isSelected","isHandleContextMenuEvent","getDirentItemMenuList","delayHide","effect","preview","activeDirent","dirHref","fileHref","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","unix","DirentsDraggedPreview","handleDragEnd","element","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","DirentListView","prepareImageItem","useThumbnail","isGIF","thumbnailSizeForOriginal","fullDirentList","imageItems","isImagePopupOpen","imageIndex","moveToPrevImage","imageItemsLength","prevState","moveToNextImage","closeImagePopup","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","onAllItemSelected","isAllItemSelected","dragStartPosition","DirListView","isRepoInfoBarShow","readmeMarkdown","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","onAddFileNode","newUrl","parentNode","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","onNodeExpanded","onNodeCollapse","onUnFreezedItem","DirColumnFile","goDraftPage","hash","isFileLoadedErr","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","progress","round","newFileName","isUploading","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","offset","floor","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","bootstrap","firedRetry","resumableObj","getUpdateLink","pop","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","DeleteFolderDialog","deleteFolder","sharedToUserCount","sharedToGroupCount","getRepoFolderShareInfo","opTarget","alert_message","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","getFileDownloadLink","getFileContent","draftID","loadDirData","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","FileTag","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","restoreDeletedDirents","commitID","paths","closeAll","restoreDirents","addDirent","onDeleteItems","deleteMutipleDirents","deleteDirents","successTipWithUndo","createDir","createFile","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","toggleDeleteFolderDialog","isDeleteFolderDialogOpen","folderToDelete","deleteDir","deleteItemAjaxCallback","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","buildTree","oldonpopstate","decodeURIComponent","repoRes","RepoInfo","permissionID","getCustomPermission","permissionRes","custom_permission","lib_need_decrypt","unwatchRepo","queryAsyncOperationProgress","successful","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","onChangeUserRole","setGroupAdmin","deleteGroupMember","translateRole","roles","deleteAuthority","scope","currentRole","onRoleChanged","PureComponent","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","searchMembers","keyword","membersFound","clearSearch","onSearchInputFocus","searchActive","onSearchInputBlur","InputGroupText","toggleManageMembersDialog","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","inputNewName","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","canPublishRepo","GeneralToolbar","MainContentWrapper","WrapperedComponent","FilesActivitiesWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","App","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","contentClassName","ReactDom","getElementById","getRandomValues","crypto","msCrypto","rnds8","rng","byteToHex","bytesToUuid","buf","bth","v4","rnds","ii","ItemDropdownMenu","listenerId","str","qs","qry","pairs","pair","constructor","ImageDialog","imageTitle","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","binary","isBuf","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","bloblessData","deconstruction","deconstructPacket","pack","removeBlobs","encodeAsBinary","start","tryParse","decodeString","takeBinaryData","destroy","finishedReconstruction","binData","reconstructPacket","hasCORS","globalThis","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","self","parser","Transport","hostname","port","secure","timestampParam","timestampRequests","readyState","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","doOpen","doClose","send","write","onOpen","writable","onData","onPacket","CreateTagDialog","selectTagcolor","createTag","createRepoTag","newTag","canSave","ShareAdminLink","copyToClipboard","ListTaggedFilesDialog","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","draftItem","DraftItem","ReadmeDialog","readmeContent","showTOC","scriptSource","RepoInfoBar","onListTaggedFiles","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","re","parts","m","exec","uri","host","authority","ipv6uri","pathNames","regx","queryKey","$0","$2","arr","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","isView","eio","Socket","Backoff","has","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","max","jitter","timeout","connecting","lastPing","encoding","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","cleanup","timer","clearTimeout","onping","onpong","ondata","ondecoded","onerror","onConnecting","processPacketQueue","shift","subsLength","disconnect","reset","onclose","reason","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","poll","pause","doPoll","callbackfn","doWrite","schema","sid","withNativeBlob","withNativeFile","File","toJSON","prev","alphabet","seed","decoded","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","ev","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","sent","emitBuffered","lookup","cache","managers","parsed","forceNew","multiplex","contentClass","WikiMarkdownViewer","getTitlesInfo","titlesInfo","titleDom","querySelectorAll","updateTabTitle","headingList","offsetTop","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","index2","originalPath","pathNormalize","isInternalFileLink","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","links","MarkdownViewer","CopyMoveDirentProgressDialog","progressStyle","lineHeight","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","renderChildren","paddingLeft","hasChildren","hlClass","TreeView","dragStartNodeData","isTreeViewDropTipShow","dropNodeData","parseuri","loc","createDebug","prevTime","enabled","curr","ms","coerce","formatter","val","logFn","abs","selectColor","init","instances","stack","disable","skips","instance","s","h","plural","ceil","isNaN","long","fmtShort","_deconstructPacket","_placeholder","newData","_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","onDrain","probe","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","empty","Request","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","fromError","abort","attachEvent","unloadHandler","arraybuffer","end","bytes","abv","count","err_cb","bail","proxy","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","removeChild","iframe","insertAt","getElementsByTagName","insertBefore","head","area","iframeId","complete","initIframe","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","addEventListeners","onmessage","factor","pow","rand","deviation","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","factory","SpriteSymbol","viewBox","createCommonjsModule","this$1","global","deepmerge","isMergeableObject","emptyTarget","cloneIfNecessary","optionsArgument","defaultArrayMerge","destination","mergeObject","arrayMerge","all","namespaces_1","default","svg","xlink","defaultAttrs","wrapInSvgString","attrsRendered","attrs","attr","objectToAttrsString","BrowserSpriteSymbol","SpriteSymbol$$1","__proto__","prototypeAccessors","isMounted","createFromExistingNode","outerHTML","unmount","mount","mountTarget","querySelector","hasImportNode","importNode","doc","DOMParser","parseFromString","childNodes","svg$1","xlink$1","defaultConfig","Sprite","existing","remove","stringifiedSymbols","defaultConfig$1","autoConfigure","mountTo","syncUrlsWithBaseTag","listenLocationChangeEvent","locationChangeEvent","locationChangeAngularEmitter","usagesToUpdate","moveGradientsOutsideSymbol","arrayFrom","arrayLike","browser","getUrlWithoutFragment","angular","run","$rootScope","$on","oldUrl","selector","xLinkNS","xLinkAttrName","specialUrlCharsPattern","sprite","attList","attSelector","updateUrls","references","replaceWith","startsWithEncoded","replaceWithEncoded","nodes","matcher","arrayfied","matched","selectAttributes","localName","setAttributeNS","updateReferences","Events","BrowserSprite","Sprite$$1","cfg","emitter","handler","evt","_emitter","_autoConfigure","baseUrl","handleLocationChange","_handleLocationChange","spriteNode","symbolNode","updatedNodes","textContent","evalStylesIEWorkaround","isNewSymbol","attach","prepend","mountNode","usages","ready$1","fns","hack","doScroll","domContentLoaded","definition","spriteNodeId","spriteGlobalVarName","loadSprite","it","fails","require$$0","NATIVE_BIND","$propertyIsEnumerable","propertyIsEnumerable","NASHORN_BUG","V","descriptor","bitmap","configurable","FunctionPrototype","uncurryThisWithBind","uncurryThisRaw","stringSlice","classofRaw","require$$1","classof","require$$2","$Object","isNullOrUndefined","$TypeError","TypeError","requireObjectCoercible","IndexedObject","toIndexedObject","documentAll","IS_HTMLDDA","argument","isCallable","aFunction","isPrototypeOf","Deno","versions","v8","V8_VERSION","Symbol","sham","iterator","getBuiltIn","require$$3","$Symbol","$String","tryToString","aCallable","isObject","defineGlobalProperty","SHARED","sharedModule","copyright","toObject","hasOwn","uncurryThis","postfix","uid","shared","NATIVE_SYMBOL","require$$4","USE_SYMBOL_AS_UID","require$$5","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","wellKnownSymbol","isSymbol","getMethod","P","ordinaryToPrimitive","pref","valueOf","TO_PRIMITIVE","toPrimitive","exoticToPrim","toPropertyKey","EXISTS","documentCreateElement","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","require$$6","IE8_DOM_DEFINE","require$$7","$getOwnPropertyDescriptor","O","f","anObject","V8_PROTOTYPE_DEFINE_BUG","$defineProperty","ENUMERABLE","CONFIGURABLE","WRITABLE","Attributes","definePropertyModule","createNonEnumerableProperty","getDescriptor","PROPER","functionToString","inspectSource","WeakMap","sharedKey","NATIVE_WEAK_MAP","hiddenKeys","OBJECT_ALREADY_INITIALIZED","metadata","facade","STATE","enforce","getterFor","TYPE","CONFIGURABLE_FUNCTION_NAME","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","makeBuiltIn","makeBuiltInModule","getter","setter","arity","trunc","toIntegerOrInfinity","number","toLength","lengthOfArrayLike","toAbsoluteIndex","integer","createMethod","IS_INCLUDES","$this","fromIndex","internalObjectKeys","getOwnPropertyNames","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","normalize","POLYFILL","NATIVE","defineBuiltIn","simple","unsafe","nonConfigurable","nonWritable","copyConstructorProperties","exceptions","TO_STRING_TAG_SUPPORT","TO_STRING_TAG","CORRECT_ARGUMENTS","tryGet","callee","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","isConstructor","SPECIES","$Array","arraySpeciesConstructor","originalArray","C","arraySpeciesCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","specificCreate","boundFunction","every","findIndex","filterReject","enumBugKeys","objectKeys","Properties","activeXDocument","definePropertiesModule","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","LT","NullProtoObjectViaActiveX","temp","parentWindow","ActiveXObject","domain","iframeDocument","JS","contentWindow","F","NullProtoObjectViaIFrame","UNSCOPABLES","ArrayPrototype","$","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","$find","addToUnscopables","FIND","SKIPS_HOLES","proto","HIDE","REBUILD","SHOW","initEvent","checkStatus","dataEventOff","isCapture","currentTarget","currentItem","hideTooltip","setUntargetItems","getTargetArray","showTooltip","targetArray","customListeners","bodyListener","forId","lastTarget","respectEffect","customEvent","tip","parentElement","isCustomEvent","isTargetBelongsToTooltip","getEffect","makeProxy","findCustomEvents","dataAttribute","getBody","place","desiredPlace","getDimensions","tipWidth","tipHeight","targetWidth","targetHeight","getCurrentOffset","mouseX","mouseY","defaultOffset","getDefaultPosition","calculateOffset","extraOffsetX","extraOffsetY","windowWidth","windowHeight","getParent","parentTop","parentLeft","getTipOffsetLeft","offsetX","getTipOffsetTop","offsetY","t","outsideRight","getTipOffsetRight","outsideBottom","getTipOffsetBottom","outside","outsideLeft","outsideTop","inside","placeIsInside","right","newPlace","chosen","choose","isNewState","boundingClientRect","targetTop","targetLeft","disToMouse","currentParent","computedStyle","getComputedStyle","getPropertyValue","TipContent","getContent","multiline","regexp","parseAria","ariaObj","fill","defaultColors","background","border","arrow","warning","info","light","DEFAULT_PADDING","DEFAULT_RADIUS","tooltip","generateTooltipStyle","uuid","customColors","hasBorder","radius","textColor","borderColor","arrowColor","arrowRadius","tooltipRadius","generateStyle","getDefaultPopupColors","getPopupColors","ReactTooltip","CONSTANT","rebuild","globalRebuild","unbindListener","bindListener","globalShow","hasTarget","globalHide","staticMethods","bindWindowEvents","resizeHide","onWindowResize","unbindWindowEvents","windowListener","ele","customBindListener","eventOff","dataEvent","customListener","customUnbindListener","bodyMode","isBodyMode","bindBodyListener","possibleCustomEvents","possibleCustomEventsOff","customEvents","customEventsOff","unbindBodyListener","bodyModeListeners","mouseover","mousemove","updateTooltip","mouseout","targetEventOff","borderClass","customRadius","extraClass","delayShow","currentEvent","ariaProps","isEmptyTip","originTooltip","isMultiline","delayShowLoop","delayHideLoop","delayReshow","intervalUpdateContent","methodArray","insecure","disableInternalStyle","injectStyles","clearTimer","removeScrollListener","tooltipRef","domRoot","matches","msMatchesSelector","mozMatchesSelector","escaped","nodeListToArray","shadowRoot","globalEventOff","unbindBasicListener","isCaptureMode","bindRemovalTracker","unbindRemovalTracker","getTipContent","isGlobalCall","switchToSolid","FocusEvent","scrollHide","getPosition","overridePosition","reshowDelay","delayUpdate","updateState","addScrollListener","updatePosition","afterShow","disableProp","getTooltipContent","eventTarget","mouseOnToolTip","delayTime","isInvisible","isScroll","afterHide","isMyElement","resetState","listenForTooltipExit","removeListenerForTooltipExit","hideTooltipOnScroll","callbackAfter","tooltipClass","hasCustomColors","clickable","Wrapper","supportedWrappers","wrapperClassName","htmlContent","any","class","newAriaProps","MutationObserver","WebKitMutationObserver","MozMutationObserver","observer","mutations","m1","mutation","m2","removedNodes","observe","childList","subtree","removalTracker"],"mappings":"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","file":"static/js/app.chunk.js","sourcesContent":["export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} autoFocus={false}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","var map = {\n\t\"./monitor.svg\": 1723\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1722;","import SpriteSymbol from \"../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"monitor\",\n  \"use\": \"monitor-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"monitor\\\"><g><g transform=\\\"translate(1.000000, 1.000000)\\\"><path class=\\\"st0\\\" fill=\\\"currentColor\\\" d=\\\"M25.1,20.8c-0.5-0.2-0.8-0.6-0.9-1.1v-4.7c0-4.4-4.2-7.3-6-8.3c-0.1-0.5-0.4-1.4-1-2\\n\\t\\t\\tc-0.6-0.6-1.4-0.9-2.3-0.8h-0.1c-0.8,0-1.6,0.3-2.3,0.8c-0.7,0.6-0.9,1.5-1,2c-1.8,0.9-6,3.8-6,8.3v4.6c0,0.5-0.4,0.9-0.9,1.1\\n\\t\\t\\tc-1.6,0.7-1.8,2.1-1.4,3.1c0.2,0.5,0.6,1,3.6,1h2.5c0.2,2.6,2.5,4.6,5.4,4.6s5.3-2.1,5.4-4.6h2.6c3,0,3.4-0.5,3.6-1\\n\\t\\t\\tC26.9,22.9,26.7,21.5,25.1,20.8L25.1,20.8z M14.9,27.8c-1.9,0-3.4-1.3-3.6-2.9h7.1C18.3,26.5,16.8,27.8,14.9,27.8L14.9,27.8z\\n\\t\\t\\t M22.9,23.1H7c-0.6,0-1.3,0-1.9-0.1c0-0.3,0.1-0.4,0.5-0.6c1.1-0.5,1.9-1.5,1.9-2.7v-4.7c0-3.9,4.5-6.5,5.3-6.9L13.4,8V7.4\\n\\t\\t\\tc0-0.2,0.1-1.7,1.5-1.7H15c1.4,0,1.5,1.5,1.5,1.7V8L17,8.2c0.8,0.3,5.3,2.9,5.3,6.9v4.7c0,1.2,0.8,2.2,1.9,2.7\\n\\t\\t\\tc0.4,0.2,0.5,0.3,0.5,0.6C24.2,23.1,23.5,23.1,22.9,23.1L22.9,23.1z\\\" /><path class=\\\"st0\\\" d=\\\"M23.9,0.2c0.4,0.3,0.6,0.9,0.3,1.3l-2.1,3.2c-0.3,0.4-0.9,0.6-1.3,0.3s-0.6-0.9-0.3-1.3l2.1-3.2\\n\\t\\t\\tC22.8,0,23.4-0.1,23.9,0.2z M29.9,7.1c0.2,0.5,0,1.1-0.5,1.3L25.9,10c-0.5,0.2-1,0-1.3-0.5c-0.2-0.5,0-1,0.5-1.3l3.5-1.6\\n\\t\\t\\tC29.1,6.4,29.7,6.6,29.9,7.1L29.9,7.1z M0.1,7.1c0.1-0.2,0.3-0.4,0.5-0.5c0.2-0.1,0.5-0.1,0.7,0l3.5,1.6c0.3,0.1,0.5,0.5,0.5,0.8\\n\\t\\t\\tc0,0.3-0.1,0.7-0.4,0.9c-0.3,0.2-0.6,0.2-1,0.1L0.6,8.4C0.1,8.2-0.1,7.6,0.1,7.1L0.1,7.1z M6.1,0.2C6.3,0,6.6,0,6.8,0\\n\\t\\t\\ts0.5,0.2,0.6,0.4l2.1,3.2c0.2,0.3,0.2,0.7,0.1,1S9.1,5.2,8.8,5.2C8.4,5.2,8.1,5,7.9,4.7L5.8,1.5C5.7,1.3,5.6,1,5.7,0.8\\n\\t\\t\\tC5.8,0.5,5.9,0.3,6.1,0.2L6.1,0.2L6.1,0.2z\\\" /></g></g></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from './Tooltip';\nimport { omit } from './utils';\nvar omitKeys = ['defaultOpen'];\n\nvar UncontrolledTooltip = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(UncontrolledTooltip, _Component);\n\n  function UncontrolledTooltip(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this.state = {\n      isOpen: props.defaultOpen || false\n    };\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = UncontrolledTooltip.prototype;\n\n  _proto.toggle = function toggle() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(Tooltip, _extends({\n      isOpen: this.state.isOpen,\n      toggle: this.toggle\n    }, omit(this.props, omitKeys)));\n  };\n\n  return UncontrolledTooltip;\n}(Component);\n\nexport { UncontrolledTooltip as default };\nUncontrolledTooltip.propTypes = _objectSpread({\n  defaultOpen: PropTypes.bool\n}, Tooltip.propTypes);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","class LibraryDetails {\n  constructor(object) {\n    this.repo_id= object.repo_id;\n    this.repo_name = object.repo_name;\n  }\n}\n\nexport default LibraryDetails;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"@gatsbyjs/reach-router\";\nimport { Badge } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  canAddRepo,\n  canGenerateShareLink,\n  canGenerateUploadLink,\n  canInvitePeople,\n  dtableWebServer,\n  enableOCM,\n  enableOCMViaWebdav,\n} from \"../utils/constants\";\nimport { Utils } from \"../utils/utils\";\nimport toaster from \"./toast\";\nimport Group from \"../models/group\";\n//KEEPER\nimport { seafileAPI, keeperAPI } from \"../utils/seafile-api\";\nimport LibraryDetails from \"../models/library-details\";\n\nimport { canViewOrg, isDocs, isPro, customNavItems } from \"../utils/constants\";\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar: false,\n      groupItems: [],\n      libraryDetailsExtended: false,\n      libraryDetailItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n    this.libraryDetailsHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI\n      .listGroups()\n      .then((res) => {\n        let groupList = res.data.map((item) => {\n          let group = new Group(item);\n          return group;\n        });\n\n        this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n        _this.setState({\n          groupItems: groupList.sort((a, b) => {\n            return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (\n      window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100\n    ) {\n      if (\n        !window.confirm(\n          gettext(\n            \"A file is being uploaded. Are you sure you want to leave this page?\"\n          )\n        )\n      ) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? \"active\" : \"\";\n  };\n\n  renderSharedGroups() {\n    let style = { height: 0 };\n    if (this.state.groupsExtended) {\n      style = { height: this.groupsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"groups/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\"groups\")}`}\n            onClick={(e) => this.tabItemClick(e, \"groups\")}\n          >\n            <span className=\"sharp\" aria-hidden=\"true\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"All Groups\")}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map((item) => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link\n                to={siteRoot + \"group/\" + item.id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.name\n                )}`}\n                onClick={(e) => this.tabItemClick(e, item.name, item.id)}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = { height: height };\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-share-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-share-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-share-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-upload-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-upload-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-upload-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column ${\n          this.state.sharedExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link\n              to={siteRoot + \"share-admin-libs/\"}\n              className={`nav-link ellipsis ${this.getActiveClass(\n                \"share-admin-libs\"\n              )}`}\n              title={gettext(\"Libraries\")}\n              onClick={(e) => this.tabItemClick(e, \"share-admin-libs\")}\n            >\n              <span aria-hidden=\"true\" className=\"sharp\">\n                #\n              </span>\n              <span className=\"nav-text\">{gettext(\"Libraries\")}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-folders/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-folders\"\n            )}`}\n            title={gettext(\"Folders\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-folders\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Folders\")}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return customNavItems.map((item, idx) => {\n      return (\n        <li key={idx} className=\"nav-item\">\n          <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n            <span className={item.icon} aria-hidden=\"true\"></span>\n            <span className=\"nav-text\">{item.desc}</span>\n          </a>\n        </li>\n      );\n    });\n  }\n\n  render() {\n    let showActivity = isDocs || isPro;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext(\"Files\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"my-libs/\"}\n                  className={`nav-link ellipsis ${\n                    this.getActiveClass(\"my-libs\") ||\n                    this.getActiveClass(\"deleted\")\n                  }`}\n                  title={gettext(\"My Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"my-libs\")}\n                >\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"My Libraries\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                to={siteRoot + \"shared-libs/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"shared-libs\"\n                )}`}\n                title={gettext(\"Shared with me\")}\n                onClick={(e) => this.tabItemClick(e, \"shared-libs\")}\n              >\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Shared with me\")}</span>\n              </Link>\n            </li>\n            {canViewOrg && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"org\")}\n              >\n                <Link\n                  to={siteRoot + \"org/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\"org\")}`}\n                  title={gettext(\"Shared with all\")}\n                >\n                  <span\n                    className=\"sf2-icon-organization\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">{gettext(\"Shared with all\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Shared with groups\")}\n                onClick={this.grpsExtend}\n              >\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Shared with groups\")}\n                </span>\n                <span\n                  className={`toggle-icon fas ${\n                    this.state.groupsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"shared-with-ocm/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"shared-with-ocm\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"shared-with-ocm\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {enableOCMViaWebdav && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"ocm-via-webdav/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"ocm-via-webdav\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"ocm-via-webdav\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {/* KEEPER lib details button. FEXME! */}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Library Details\")}\n                onClick={this.libdtExtend}\n              >\n                {/* <span */}\n                {/*   className={`toggle-icon float-right fas ${ */}\n                {/*     this.state.libraryDetailsExtended */}\n                {/*       ? \"fa-caret-down\" */}\n                {/*       : \"fa-caret-left\" */}\n                {/*   }`} */}\n                {/*   aria-hidden=\"true\" */}\n                {/* ></span> */}\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Library Details\")}\n                </span>\n                <span\n                  className={`toggle-icon fas ${\n                    this.state.libraryDetailsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                {/* <span className=\"sf2-icon-list-view\" aria-hidden=\"true\"></span> */}\n                {/* <span className=\"nav-text\">{gettext(\"Library Details\")}</span> */}\n              </a>\n              {this.renderLibraryDetails()}\n            </li>\n\n\n          </ul>\n\n          <h3 className=\"sf-heading\">{gettext(\"Tools\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"starred\"\n                )}`}\n                to={siteRoot + \"starred/\"}\n                title={gettext(\"Favorites\")}\n                onClick={(e) => this.tabItemClick(e, \"starred\")}\n              >\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Favorites\")}</span>\n              </Link>\n            </li>\n            {showActivity && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"dashboard\"\n                  )}`}\n                  to={siteRoot + \"dashboard/\"}\n                  title={gettext(\"Activities\")}\n                  onClick={(e) => this.tabItemClick(e, \"dashboard\")}\n                >\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Activities\")}</span>\n                </Link>\n              </li>\n            )}\n            {/* KEEPER */}\n            {/* <li className=\"nav-item\"> */}\n            {/*   <Link */}\n            {/*     className={`nav-link ellipsis ${this.getActiveClass( */}\n            {/*       \"published\" */}\n            {/*     )}`} */}\n            {/*     to={siteRoot + \"published/\"} */}\n            {/*     title={gettext(\"Published Libraries\")} */}\n            {/*     onClick={(e) => this.tabItemClick(e, \"published\")} */}\n            {/*   > */}\n            {/*     <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span> */}\n            {/*     <span className=\"nav-text\"> */}\n            {/*       {gettext(\"Published Libraries\")} */}\n            {/*     </span> */}\n            {/*   </Link> */}\n            {/* </li> */}\n            {isDocs && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"drafts\")}\n              >\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"drafts\"\n                  )}`}\n                  to={siteRoot + \"drafts/\"}\n                  title={gettext(\"Drafts\")}\n                >\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Drafts\")}</span>\n                  {this.props.draftCounts > 0 && (\n                    <span id=\"draft-num\">{this.props.draftCounts}</span>\n                  )}\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"linked-devices\"\n                )}`}\n                to={siteRoot + \"linked-devices/\"}\n                title={gettext(\"Linked Devices\")}\n                onClick={(e) => this.tabItemClick(e, \"linked-devices\")}\n              >\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Linked Devices\")}</span>\n              </Link>\n            </li>\n            {canInvitePeople && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"invitations\"\n                  )}`}\n                  to={siteRoot + \"invitations/\"}\n                  title={gettext(\"Invite Guest\")}\n                  onClick={(e) => this.tabItemClick(e, \"invitations\")}\n                >\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Invite Guest\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Share Admin\")}\n                onClick={this.shExtend}\n              >\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Share Admin\")}</span>\n                <span\n                  className={`toggle-icon fas ${\n                    this.state.sharedExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer && (\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span\n              className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\"\n              aria-hidden=\"true\"\n            ></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        )}\n      </div>\n    );\n  }\n  // KEEPER\n  libdtExtend = () => {\n    this.setState({\n      libraryDetailsExtended: !this.state.libraryDetailsExtended,\n    });\n    this.loadLibraryDetails();\n  };\n\n  loadLibraryDetails = () => {\n    let _this = this;\n    keeperAPI\n      .listLibraryDetails()\n      .then((res) => {\n        let libraryDetailsList = res.data.map((item) => {\n          let libraryDetailsItem = new LibraryDetails(item);\n          return libraryDetailsItem;\n        });\n\n        this.libraryDetailsHeight =\n          (libraryDetailsList.length + 1) * _this.listHeight;\n        _this.setState({\n          libraryDetailItems: libraryDetailsList.sort((a, b) => {\n            return a.repo_name.toLowerCase() < b.repo_name.toLowerCase()\n              ? -1\n              : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  renderLibraryDetails() {\n    let style = { height: 0 };\n    if (this.state.libraryDetailsExtended) {\n      style = { height: this.libraryDetailsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {this.state.libraryDetailItems.map((item) => {\n          return (\n            <li key={item.repo_id} className=\"nav-item\">\n              <a\n                href={siteRoot + \"landing-page/libs/\" + item.repo_id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.repo_name\n                )}`}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.repo_name}</span>\n              </a>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport {\n  gettext,\n  lang,\n  mediaUrl,\n  logoPath,\n  logoWidth,\n  logoHeight,\n  siteTitle,\n  seafileVersion,\n  additionalAboutDialogLinks,\n  aboutDialogCustomHtml,\n} from \"../../utils/constants\";\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n  toggle = () => {\n    this.props.onCloseAboutDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}>\n            <span aria-hidden=\"true\">×</span>\n          </button>\n          <div className=\"about-content\">\n            <p>\n              <img\n                src={mediaUrl + logoPath}\n                height={logoHeight}\n                width={logoWidth}\n                title={siteTitle}\n                alt=\"logo\"\n              />\n            </p>\n            <p>\n              {gettext(\"Server Version: \")}\n              {seafileVersion}\n              <br />© 2024 {gettext(\"KEEPER\")}\n            </p>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from \"react\";\nimport {\n  gettext,\n  siteRoot,\n  enableTC,\n  sideNavFooterCustomHtml,\n  additionalAppBottomLinks,\n} from \"../utils/constants\";\nimport ModalPortal from \"./modal-portal\";\nimport AboutDialog from \"./dialog/about-dialog\";\n\nclass SideNavFooter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n      collapsed: true,\n    };\n  }\n\n  onAboutDialogToggle = () => {\n    this.setState({ isAboutDialogShow: !this.state.isAboutDialogShow });\n  };\n\n  onFooterExpandedToggle = () => {\n    this.setState({ collapsed: !this.state.collapsed });\n  };\n\n  render() {\n    const elementBodyStyle = {\n      maxHeight: this.state.collapsed ? \"0\" : \"30rem\",\n      borderBottomWidth: this.state.collapsed ? \"0\" : \"1px\",\n    };\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer\">\n          <div id=\"footer-header\">\n            <span\n              aria-hidden=\"true\"\n              className={\n                (this.state.collapsed\n                  ? \"keeper-icon-triangle-up\"\n                  : \"keeper-icon-triangle-down\") + \" vam\"\n              }\n              onClick={this.onFooterExpandedToggle}\n            />\n            &nbsp;\n            <a\n              href={siteRoot + \"project-catalog/\"}\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext(\"Project Catalog\")}\n            </a>\n            <a\n              href=\"https://mpdl.zendesk.com/hc/en-us/categories/360001234340-Keeper\"\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext(\"Help / Knowledge Base\")}\n            </a>\n            <a\n              className=\"item cursor-pointer last-item\"\n              onClick={this.onAboutDialogToggle}\n            >\n              {gettext(\"About\")}\n            </a>\n          </div>\n\n          <div id=\"footer-body\" style={elementBodyStyle}>\n            <br />\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>What you need to know</h4>\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/d17ecbb967/\"\n                  target=\"_blank\"\n                >\n                  About Keeper\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/1b0bfceac2/\"\n                  target=\"_blank\"\n                >\n                  Cared Data Commitment\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/2206ad0c0a8346cb8f9e/\"\n                  target=\"_blank\"\n                >\n                  Terms of Service\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>Client</h4>\n                <a href=\"/download_client_program/\" target=\"_blank\">\n                  Download the Keeper client for Windows, Linux, Mac, Android\n                  and iPhone\n                </a>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>The software behind Keeper</h4>\n                <a href=\"https://seafile.com/en/home/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"seafile-logo\"\n                    src=\"/media/custom/seafile_logo_footer.png\"\n                  />\n                  &nbsp;© 2024 Seafile\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>A service by</h4>\n                <a href=\"https://www.mpdl.mpg.de/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"MPDL-logo\"\n                    src=\"/media/custom/mpdl.png\"\n                  />\n                </a>\n                <br />\n                <br />\n                <a href=\"mailto:keeper@mpdl.mpg.de\" target=\"_blank\">\n                  Contact Keeper Support\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/17e4e9d648/\"\n                  target=\"_blank\"\n                >\n                  Impressum\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/bf2c8a977f70428587eb/\"\n                  target=\"_blank\"\n                >\n                  Privacy Policy\n                </a>\n              </div>\n            </div>\n          </div>\n          {this.state.isAboutDialogShow && (\n            <ModalPortal>\n              <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n            </ModalPortal>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://static.zdassets.com/ekr/snippet.js?key=32977f9b-455d-428b-8dd5-f4c65aad0daa\";\n    script.id = \"ze-snippet\";\n    script.async = true;\n    document.body.appendChild(script);\n  }\n\n  render() {\n    return <div className=\"main-panel\">{this.props.children}</div>;\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n      // item is folder or file\n      if (item.encoded_path !== '/') {\n        item.dirent_view_url = item.dirent_view_url.replace(/\\/+$/, '');\n      }\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n    const linkUrl = data.dirent_view_url;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n    \n  }\n  \n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  }\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  }\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      share_permission_name: item.share_permission_name,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, share_permission_name, is_admin, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditing={true}\n              autoFocus={true}\n              isEditIconShow={this.state.isOpIconShown}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      share_permission_name: this.props.item.share_permission_name,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, share_permission_name, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              isEditing={true}\n              autoFocus={true}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortOptions: PropTypes.array,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = this.props.sortOptions || [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string,\n  children: PropTypes.object\n};\n\nclass TopToolbar extends React.Component {\n\n  render() {\n    const { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {this.props.children}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick} />\n      </div>\n    );\n  }\n}\n\nTopToolbar.propTypes = propTypes;\n\nexport default TopToolbar;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n          {deletedTip}\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n            <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidShareLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n\n    // for mobile\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'time-asc', text: gettext('By expiration ascending')},\n      {value: 'time-desc', text: gettext('By expiration descending')}\n    ];\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n\n      // no default\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    this.listUserShareLinks();\n  }\n\n  listUserShareLinks() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  toggleCleanInvalidShareLinksDialog = () => {\n    this.setState({isCleanInvalidShareLinksDialogOpen: !this.state.isCleanInvalidShareLinksDialogOpen});\n  }\n\n  cleanInvalidShareLinks = () => {\n    seafileAPI.cleanInvalidShareLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid share links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidShareLinksDialog}>{gettext('Clean invalid share links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\">\n                  <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n                </li>\n                {canGenerateUploadLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n                )}\n              </ul>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortOptions={this.sortOptions}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCleanInvalidShareLinksDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clean invalid share links')}\n            message={gettext('Are you sure you want to clean invalid share links?')}\n            executeOperation={this.cleanInvalidShareLinks}\n            confirmBtnText={gettext('Clean')}\n            toggleDialog={this.toggleCleanInvalidShareLinksDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminShareLinks.propTypes = propTypes;\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  item: PropTypes.object.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link>{deletedTip}</td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n          <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidUploadLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    this.listUserUploadLinks();\n  }\n\n  listUserUploadLinks() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCleanInvalidUploadLinksDialog = () => {\n    this.setState({isCleanInvalidUploadLinksDialogOpen: !this.state.isCleanInvalidUploadLinksDialogOpen});\n  }\n\n  cleanInvalidUploadLinks = () => {\n    seafileAPI.cleanInvalidUploadLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid upload links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidUploadLinksDialog}>{gettext('Clean invalid upload links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                {canGenerateShareLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n                )}\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n              </ul>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isCleanInvalidUploadLinksDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Clean invalid upload links')}\n          message={gettext('Are you sure you want to clean invalid upload links?')}\n          executeOperation={this.cleanInvalidUploadLinks}\n          confirmBtnText={gettext('Clean')}\n          toggleDialog={this.toggleCleanInvalidUploadLinksDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminUploadLinks.propTypes = propTypes;\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.monitored = object.monitored;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n    // KEEPER\n    if (object.doi != undefined) {\n      this.doi = object.doi;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../css/icon.css';\n\nconst importAll = (requireContext) => {\n  requireContext.keys().forEach(requireContext);\n};\ntry {\n  importAll(require.context('../assets/icons', true, /\\.svg$/));\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.log(error);\n}\n\nconst Icon = (props) => {\n  const { className, symbol } = props;\n  const iconClass = `seafile-multicolor-icon seafile-multicolor-icon-${symbol} ${className || ''}`;\n  return (\n    <svg className={iconClass}>\n      <use xlinkHref={`#${symbol}`} />\n    </svg>\n  );\n};\n\nIcon.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  className: PropTypes.string,\n};\n\nexport default Icon;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport Icon from '../components/icon';\nimport { gettext } from '../utils/constants';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired\n};\n\nclass RepoMonitoredIcon extends React.Component {\n\n  render() {\n    const { repoID } = this.props;\n    return (\n      <Fragment>\n        <span id={`watching-${repoID}`} className=\"ml-1\">\n          <Icon symbol='monitor' />\n        </span>\n        <UncontrolledTooltip\n          placement=\"bottom\"\n          target={`#watching-${repoID}`}\n        >\n          {gettext('You are watching file changes of this library.')}\n        </UncontrolledTooltip>\n      </Fragment>\n    );\n  }\n}\n\nRepoMonitoredIcon.propTypes = propTypes;\n\nexport default RepoMonitoredIcon;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  freezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                data={item}\n                isDesktop={isDesktop}\n                isItemFreezed={this.state.isItemFreezed}\n                freezeItem={this.freezeItem}\n                onMonitorRepo={this.props.onMonitorRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    }, () => {\n      this.props.freezeItem(this.state.isOpMenuOpen);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        showOpIcon: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        showOpIcon: false\n      });\n    }\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  watchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n\n    // at present, only repo shared with 'r', 'rw' can be monitored.(Fri Feb 10 16:24:49 CST 2023)\n    const enableMonitorRepo = isPro && (data.permission == 'r' || data.permission == 'rw');\n\n    const desktopItem = (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td>\n            <Fragment>\n              <Link to={shareRepoUrl}>{data.repo_name}</Link>\n              {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            </Fragment>\n          </td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n            {enableMonitorRepo &&\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                role=\"button\"\n                tabIndex=\"0\"\n                className={`sf-dropdown-toggle sf2-icon-caret-down${iconVisibility}`}\n                title={gettext('More Operations')}\n                aria-label={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link>\n            {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            <br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) && <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                  {enableMonitorRepo && <DropdownItem className=\"mobile-menu-item\" onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>}\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let items = this.state.items.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({items: items});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onMonitorRepo={this.onMonitorRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares()\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n\t</td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n\t  {item.is_dir ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>\n\t  {this.props.path ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n\tif (index === 0) {\n          nodePath = '/';\n\t} else {\n          nodePath += item + '/';\n\t}\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  }\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you don’t receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n  }\n\n  componentDidMount() {\n    this.refs.renameInput.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.refs.renameInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.refs.renameInput.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.onRenameConfirm(e);\n    }\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref=\"renameInput\"\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyPress={this.onKeyPress}\n          onClick={this.onClick}\n        />\n        <button className=\"btn btn-secondary sf2-icon-confirm confirm\" onClick={this.onRenameConfirm}></button>\n        <button className=\"btn btn-secondary sf2-icon-cancel cancel\" onClick={this.onRenameCancel}></button>\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n} from \"reactstrap\";\nimport {\n  gettext,\n  isPro,\n  folderPermEnabled,\n  enableRepoSnapshotLabel,\n  enableResetEncryptedRepoPassword,\n  isEmailConfigured,\n  enableRepoAutoDel,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, \"toggle\");\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === \"Rename\") {\n      this.setState({ isItemMenuShow: !this.state.isItemMenuShow });\n      return;\n    }\n\n    this.setState({ isItemMenuShow: !this.state.isItemMenuShow }, () => {\n      if (this.state.isItemMenuShow) {\n        this.props.onFreezedItem();\n      } else {\n        this.props.onUnfreezedItem();\n      }\n    });\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem =\n      isPro &&\n      repo.encrypted &&\n      enableResetEncryptedRepoPassword &&\n      isEmailConfigured;\n    let operations = [\"Rename\", \"Transfer\"];\n    // KEEPER\n    let showAssignDoiMenuItem = repo.doi && !repo.encrypted;\n    let showArchiveLibraryMenuItem = !repo.encrypted;\n    let showCertifyLibraryMenuItem = !repo.encrypted;\n    let showEditMetadatayMenuItem = !repo.encrypted;\n    if (folderPermEnabled) {\n      operations.push(\"Folder Permission\");\n    }\n    operations.push(\"Share Links Admin\", \"Divider\");\n\n    if (repo.encrypted) {\n      operations.push(\"Change Password\");\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push(\"Reset Password\");\n    }\n\n    if (isPro) {\n      const monitorOp = repo.monitored\n        ? \"Unwatch File Changes\"\n        : \"Watch File Changes\";\n      operations.push(monitorOp);\n    }\n\n    operations.push(\"History Setting\", \"API Token\");\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push(\"Label Current State\");\n    }\n    if (enableRepoAutoDel) {\n      operations.push(\"Old Files Auto Delete\");\n    }  \n    //KEEPER\n    operations.push(\"Divider\");\n    if (showAssignDoiMenuItem) {\n      operations.push(\"Assign DOI to current state\");\n    }\n    if (showArchiveLibraryMenuItem) {\n      operations.push(\"Archive Library\");\n    }\n    if (showCertifyLibraryMenuItem) {\n      operations.push(\"Certify Library\");\n    }\n    if (showEditMetadatayMenuItem) {\n      operations.push(\"Edit Metadata\");\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = \"\";\n    switch (item) {\n      case \"Star\":\n        translateResult = gettext(\"Star\");\n        break;\n      case \"Unstar\":\n        translateResult = gettext(\"Unstar\");\n        break;\n      case \"Share\":\n        translateResult = gettext(\"Share\");\n        break;\n      case \"Delete\":\n        translateResult = gettext(\"Delete\");\n        break;\n      case \"Rename\":\n        translateResult = gettext(\"Rename\");\n        break;\n      case \"Transfer\":\n        translateResult = gettext(\"Transfer\");\n        break;\n      case \"History Setting\":\n        translateResult = gettext(\"History Setting\");\n        break;\n      case \"Change Password\":\n        translateResult = gettext(\"Change Password\");\n        break;\n      case \"Reset Password\":\n        translateResult = gettext(\"Reset Password\");\n        break;\n      case \"Watch File Changes\":\n        translateResult = gettext(\"Watch File Changes\");\n        break;\n      case \"Unwatch File Changes\":\n        translateResult = gettext(\"Unwatch File Changes\");\n        break;\n      case \"Folder Permission\":\n        translateResult = gettext(\"Folder Permission\");\n        break;\n      case \"Label Current State\":\n        translateResult = gettext(\"Label Current State\");\n        break;\n      case \"API Token\":\n        translateResult = \"API Token\"; // translation is not needed here\n        break;\n      case \"Share Links Admin\":\n        translateResult = gettext(\"Share Links Admin\");\n        break;\n      case \"Old Files Auto Delete\":\n        translateResult = gettext(\"Auto deletion\");\n        break;\n      //KEEPER\n      case \"Assign DOI to current state\":\n        translateResult = gettext(\"Assign DOI to current state\");\n        break;\n      case \"Archive Library\":\n        translateResult = gettext(\"Archive Library\");\n        break;\n      case \"Certify Library\":\n        translateResult = gettext(\"Certify Library\");\n        break;\n      case \"Edit Metadata\":\n        translateResult = gettext(\"Edit Metadata\");\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown\n          isOpen={this.state.isItemMenuShow}\n          toggle={this.toggleOperationMenu}\n        >\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext(\"More Operations\")}\n            aria-label={gettext(\"More Operations\")}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu>\n            {operations.map((item, index) => {\n              if (item == \"Divider\") {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem\n                    key={index}\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                    onKeyDown={this.onMenuItemKeyDown}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift(\"Delete\");\n    operations.unshift(\"Share\");\n    this.props.isStarred\n      ? operations.unshift(\"Unstar\")\n      : operations.unshift(\"Star\");\n\n    return (\n      <Dropdown\n        isOpen={this.state.isItemMenuShow}\n        toggle={this.toggleOperationMenu}\n      >\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext(\"More Operations\")}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div\n          className={`${this.state.isItemMenuShow ? \"\" : \"d-none\"}`}\n          onClick={this.toggleOperationMenu}\n        >\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != \"Divider\") {\n                return (\n                  <DropdownItem\n                    key={index}\n                    className=\"mobile-menu-item\"\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, NavLink } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport EmptyTip from '../empty-tip';\n\nconst repoShareUploadLinkItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  activeTab: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item.token);\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (this.props.activeTab === 'shareLinks') {\n      if (item.is_dir) {\n        objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n      } else {\n        objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      }\n    }\n\n    if (this.props.activeTab === 'uploadLinks') {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <a href={objUrl} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.obj_name}</a>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoShareUploadLinkItem.propTypes = repoShareUploadLinkItemPropTypes;\n\nconst RepoShareUploadLinksDialogPropTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinksDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 'shareLinks',\n      repoShareUploadLinkList: [],\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems('share-link');\n  }\n\n  getItems = (itemType) => {\n    const repoID = this.props.repo.repo_id;\n    const request = itemType == 'share-link' ?\n      seafileAPI.listRepoShareLinks(repoID) :\n      seafileAPI.listRepoUploadLinks(repoID);\n    request.then((res) => {\n      this.setState({\n        loading: false,\n        repoShareUploadLinkList: res.data,\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  }\n\n  deleteItem = (token) => {\n    const repoID = this.props.repo.repo_id;\n    const request = this.state.activeTab == 'shareLinks' ?\n      seafileAPI.deleteRepoShareLink(repoID, token) :\n      seafileAPI.deleteRepoUploadLink(repoID, token);\n    request.then((res) => {\n      const repoShareUploadLinkList = this.state.repoShareUploadLinkList.filter(item => {\n        return item.token !== token;\n      });\n      this.setState({\n        repoShareUploadLinkList: repoShareUploadLinkList\n      });\n    }).catch(error => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n    if (tab == 'shareLinks') {\n      this.getItems('share-link');\n    }\n    if (tab == 'uploadLinks') {\n      this.getItems('upload-link');\n    }\n  };\n\n  render() {\n\n    const { loading, errorMsg, activeTab, repoShareUploadLinkList } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} Share/Upload Links').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '800px'}}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}}></span>\n        </ModalHeader>\n        <ModalBody className=\"p-0 pb-4\">\n          <div className=\"main-panel-center\">\n            <div className=\"cur-view-container\" role=\"tablist\">\n              <div className=\"cur-view-path share-upload-nav\">\n                <ul className=\"nav\">\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'shareLinks'} aria-controls=\"share-links-panel\">\n                    <NavLink className={activeTab === 'shareLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Share Links')}</NavLink>\n                  </li>\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'uploadLinks'} aria-controls=\"upload-links-panel\">\n                    <NavLink className={activeTab === 'uploadLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Upload Links')}</NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"cur-view-content\" style={{minHeight: '20rem', maxHeight: '20rem'}} role=\"tabpanel\" id={activeTab === 'shareLinks' ? 'share-links-panel' : 'upload-links-panel'}>\n                {loading && <Loading />}\n                {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n                {!loading && !errorMsg && !repoShareUploadLinkList.length &&\n                  <EmptyTip forDialog={true}>\n                    <p className=\"text-secondary\">{activeTab == 'shareLinks' ? gettext('No share links') : gettext('No upload links')}</p>\n                  </EmptyTip>\n                }\n                {!loading && !errorMsg && repoShareUploadLinkList.length > 0 &&\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"22%\">{gettext('Creator')}</th>\n                      <th width=\"20%\">{gettext('Name')}</th>\n                      <th width=\"48%\">{gettext('Link')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.repoShareUploadLinkList.map((item, index) => {\n                      return (\n                        <RepoShareUploadLinkItem\n                          key={index}\n                          item={item}\n                          activeTab={this.state.activeTab}\n                          deleteItem={this.deleteItem}\n                        />\n                      );\n                    })}\n                  </tbody>\n                </table>\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoShareUploadLinksDialog.propTypes = RepoShareUploadLinksDialogPropTypes;\n\nexport default RepoShareUploadLinksDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap'; \nimport { gettext } from '../../utils/constants';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass AssignDoiDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  formSubmit = () => {\n    const {repoID, repoName} = this.props;\n    this.props.toggleDialog();\n    keeperAPI.addDoi(repoID).then((res) => {\n      if (res.data && res.data['msg']) {\n        toaster.success(res.data['msg'], {duration: 3});\n      }\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg, {duration: 3});\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}> <span>{gettext('Assign DOI to {library_name}').replace('{library_name}','')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n        <ModalBody>\n          {gettext(\"Please note: a DOI identifier will be assigned to the current state of the selected library (snapshot). The DOI will persistently reference to the snapshot and not the latest state of the library. A DOI can only be created once per library.\")}\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Assign DOI')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAssignDoiDialog.propTypes = propTypes;\n\nexport default AssignDoiDialog;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\nimport { S as Select } from '../../dist/Select-40119e12.esm.js';\nimport { u as useAsync } from '../../dist/useAsync-fd9b28d9.esm.js';\nimport { u as useStateManager } from '../../dist/useStateManager-7e1e8489.esm.js';\nimport { u as useCreatable } from '../../dist/useCreatable-36230047.esm.js';\nimport '@babel/runtime/helpers/objectSpread2';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/createSuper';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '../../dist/index-a86253bb.esm.js';\nimport '@emotion/react';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@floating-ui/dom';\nimport 'use-isomorphic-layout-effect';\nimport 'memoize-one';\n\nvar AsyncCreatableSelect = /*#__PURE__*/forwardRef(function (props, ref) {\n  var stateManagerProps = useAsync(props);\n  var creatableProps = useStateManager(stateManagerProps);\n  var selectProps = useCreatable(creatableProps);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, selectProps));\n});\n\nexport default AsyncCreatableSelect;\n","import React, {Fragment} from 'react';\nimport Select from 'react-select';\nimport AsyncCreatableSelect from 'react-select/async-creatable';\nimport {Utils} from '../utils/utils';\nimport {gettext,} from '../utils/constants';\nimport {keeperAPI} from '../utils/seafile-api';\nimport toaster from './toast';\nimport {Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Input, Label, Row, Tooltip} from 'reactstrap';\nimport PropTypes from 'prop-types';\n\nimport '../css/toolbar.css';\nimport '../css/search.css';\n\nimport '../css/user-settings.css';\nimport '../css/keeper-archive-metadata-form.css';\n\nlet mpgInstituteOptions = [];\n\nconst defaultResourceType = \"Library\";\nconst resourceTypes = [\"Library\", \"Project\"];\n\nconst defaultAuthors = [{firstName: \"\", lastName: \"\", affs: [\"\"]}];\nconst defaultDirectors = [{firstName: \"\", lastName: \"\"}];\nconst defaultPublisher = gettext(\"MPDL Keeper Service, Max-Planck-Gesellschaft zur Förderung der Wissenschaften e. V.\");\n\nconst defaultMd = {\n  title: \"\",\n  authors: defaultAuthors,\n  publisher: defaultPublisher,\n  description: \"\",\n  year: \"\",\n  institute: \"\",\n  department: \"\",\n  directors: defaultDirectors,\n  resourceType: defaultResourceType,\n  license: \"\",\n  errors: \"\",\n};\n\nconst defaultValidMd = {\n  title: true,\n  authors: [[true, true]],\n  publisher: true,\n  description: true,\n  year: true,\n  institute: true,\n  department: true,\n  directors: [[true, true]],\n  resourceType: true,\n};\n\nconst infoAreaPropTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nclass InfoArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      helpTooltipOpen: false,\n      errorTooltipOpen: false,\n    };\n  }\n\n  toggleHelp = () => {\n    this.setState({\n      helpTooltipOpen: !this.state.helpTooltipOpen,\n    });\n  };\n\n  toggleError = () => {\n    this.setState({\n      errorTooltipOpen: !this.state.errorTooltipOpen,\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"input-tip pt-0\">\n          {this.props.id != \"license\" &&\n          <span style={{color: \"red\", fontWeight: \"900\"}}>*&nbsp;&nbsp;</span>\n          }\n          <i className=\"fas fa-question-circle\" id={this.props.id + \"-help\"}/>\n          <Tooltip\n            toggle={this.toggleHelp}\n            delay={{show: 0, hide: 0}}\n            target={this.props.id + \"-help\"}\n            placement=\"right\"\n            isOpen={this.state.helpTooltipOpen}\n          >\n            {this.props.helpText}\n          </Tooltip>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nInfoArea.propTypes = infoAreaPropTypes;\n\n\nconst keeperArchiveMetadataFormPropTypes = {\n  repoID: PropTypes.string.isRequired,\n};\n\nclass KeeperArchiveMetadataForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...defaultMd,\n      validMd: defaultValidMd,\n      isSaved: true,\n      isButton1Disabled: false,\n      isButton2Disabled: true,\n    };\n\n  }\n\n  componentDidMount() {\n    keeperAPI\n      .getArchiveMetadata(this.props.repoID)\n      .then((res) => {\n        let newState = this.state;\n        if ('data' in res) {\n          Object.keys(defaultMd).map((k) => {\n            newState[k] = k in res.data ? res.data[k] : \"\";\n          });\n          if (!(\"authors\" in newState && newState.authors.length > 0)) {\n            newState.authors = defaultAuthors;\n          }\n          if (!(\"directors\" in newState && newState.directors.length > 0)) {\n            newState.directors = defaultDirectors;\n          }\n          if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n            newState.publisher = defaultPublisher;\n          }\n          if (\n            !(\"resourceType\" in newState && newState.resourceType && newState.resourceType.trim())\n          ) {\n            newState.resourceType = defaultResourceType;\n          }\n        } else {\n          newState = defaultMd;\n        }\n\n        newState.validMd = this.getValidMd(newState);\n\n        this.setState(newState, () => this.setButtons());\n\n        keeperAPI.getMpgInstitutes().then((res2) => {\n          res2.data.map((v) => {\n            mpgInstituteOptions.push({value: v, label: v});\n          });\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  }\n\n  isFieldValid = (key, value) => {\n    if (!key || !value)\n      return false;\n    let isValid = true;\n    if (key == \"title\" || key == \"description\" || key == \"publisher\" || key == \"department\" || key == \"institute\") {\n      isValid = value.trim() != \"\";\n    } else if (key == \"year\") {\n      const reg = new RegExp(\"^\\\\d{4}$\");\n      //const parsed = parseInt(value, 10);\n      //isValid = !isNaN(parsed) && parsed > 0;\n      isValid = reg.test(value);\n    } else if (key == \"author\" || key == \"director\") {\n      isValid = [Boolean(value.firstName && value.firstName.trim()), Boolean(value.lastName && value.lastName.trim())];\n    }\n    return isValid;\n  }\n\n  isFormValid = (validMd) => {\n    let isValid = true;\n    outer: for (let key in validMd) {\n      if (key == \"authors\" || key == \"directors\") {\n        for (let a of validMd[key])\n          if (!a[0] || !a[1]) {\n            isValid = false;\n            break outer;\n          }\n      } else if (!validMd[key]) {\n        isValid = false;\n        break outer;\n      }\n    }\n    return isValid;\n  }\n\n  setButtons = () => {\n    const isValid = this.isFormValid(this.state.validMd);\n    this.setState({\n      isButton1Disabled: this.state.isSaved && isValid,\n      isButton2Disabled: !this.state.isSaved || !isValid,\n    });\n  }\n\n  getValidMd = (md) => {\n    Object.keys(defaultValidMd).map(k => {\n      if (k == \"authors\" || k == \"directors\") {\n        for (let idx in md[k]) {\n          this.state.validMd[k][idx] = this.isFieldValid(k.slice(0, -1), md[k][idx]);\n        }\n      } else {\n        this.state.validMd[k] = this.isFieldValid(k, md[k]);\n      }\n    });\n    return this.state.validMd;\n  }\n\n  onButton1 = e => {\n    e.preventDefault();\n    this.props.onButton1(defaultMd, this.state)\n      .then(res => {\n        res.validMd = this.getValidMd(res);\n        res.isSaved = true;\n        this.setState(res, () => this.setButtons());\n        toaster.success(\n          gettext(\"Success.\") + (this.state.isButton2Disabled ? \"\" : \" \" + gettext(\"Now you can archive.\")),\n          {duration: 3}\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onButton2 = e => {\n    this.props.onButton2()\n      .then(msg => {\n        toaster.success(gettext(msg), {duration: 3});\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  handleInputChange(e, key) {\n    this.state.validMd[key] = this.isFieldValid(key, e.target.value);\n    this.setState({\n      [key]: e.target.value,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  setAuthorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.authors[idx] = this.isFieldValid(\"author\", values[idx]);\n    }\n    this.setState({\n      authors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => {\n      this.setButtons();\n    }\n    );\n  }\n\n  handleAuthorAddFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\", affs: [\"\"]});\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorRemoveFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorInputChange = (idx, e) => {\n    const values = [...this.state.authors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffInputChange = (idx, aidx, e) => {\n    const values = [...this.state.authors];\n    values[idx].affs[aidx] = e.target.value;\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffAddFields = (idx, aidx) => {\n    const values = [...this.state.authors];\n    values[idx].affs.splice(aidx + 1, 0, \"\");\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffRemoveFields = (index, aidx) => {\n    const values = [...this.state.authors];\n    values[index].affs.splice(aidx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  setDirectorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.directors[idx] = this.isFieldValid(\"director\", values[idx]);\n    }\n    this.setState({\n      directors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  handleDirectorAddFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\"});\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorRemoveFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx, 1);\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorInputChange = (idx, e) => {\n    const values = [...this.state.directors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setDirectorInputFields(values);\n  };\n\n  onResourceSelectChange = selectedItem => {\n    this.setState({\n      resourceType: selectedItem.value,\n    });\n  };\n\n  resourceOptions = resourceTypes.map((item) => {\n    return {value: item, label: gettext(item)};\n  });\n\n  filterInstitutes = input => {\n    return mpgInstituteOptions.filter((i) =>\n      i.label.toLowerCase().includes(input.toLowerCase())\n    );\n  };\n\n  promiseOptions = input =>\n    new Promise((resolve) => {\n      resolve(this.filterInstitutes(input));\n    });\n\n  handleInstituteChange = option => {\n    let insName =\n      option == null\n        ? \"\"\n        : !(\"value\" in option) || option.value.trim() === \"\"\n          ? \"\"\n          : option.value;\n    this.state.validMd.institute = this.isFieldValid(\"institute\", insName);\n    this.setState({\n      institute: insName,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  };\n\n  validationProps = key => {\n    return (this.state.validMd[key] ? {valid: true} : {invalid: true});\n  }\n\n  validationInSelects = key => {\n    return (this.state.validMd[key] ? \"is-valid\" : \"is-invalid\");\n  }\n\n  validationInAuthors = (idx, nidx) => {\n    return (this.state.validMd.authors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  validationInDirectors = (idx, nidx) => {\n    return (this.state.validMd.directors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  render() {\n\n    return (\n\n      <Fragment>\n        <Modal isOpen={true}>\n\n          <form method=\"post\">\n\n            <ModalHeader toggle={this.props.hideDialog}>\n              {this.props.header}\n            </ModalHeader>\n            <ModalBody>\n              {this.props.body}\n\n              <div className=\"h-100 d-flex flex-column\">\n                <div className=\"flex-auto d-flex o-hidden\">\n                  <div className=\"main-panel d-flex flex-column\">\n                    <div className=\"content position-relative\" style={{paddingBottom: \"0rem\"}}>\n\n                      {/*Title*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-title\"\n                            sm={1}\n                          >\n                            {gettext(\"Title\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                type=\"textarea\"\n                                className=\"form-control\"\n                                placeholder={gettext(\"Title of your research project\") + \"...\"}\n                                value={this.state.title}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"title\");\n                                }}\n                                {...this.validationProps(\"title\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea id=\"title\"\n                                helpText={gettext(\"Please enter the title of your research project.\")}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Authors*/}\n                      <FormGroup row className=\"md-item\">\n                        {this.state.authors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-authors\"\n                              sm={1}\n                              className=\"pt-3\"\n                              for=\"lbl-authors\"\n                            >\n                              {gettext(\"Author\") +\n                              (this.state.authors.length > 1\n                                ? \" #\" + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <Col sm={4} className=\"form-group md-item\">\n                              <Label for=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 0)}\n                              />\n                            </Col>\n                            <div className=\"form-group col-sm-5 md-item\">\n                              <label htmlFor=\"lastName\">\n                                {gettext('Last Name')}:\n                              </label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 1)}\n                              />\n                            </div>\n                            <div className=\"form-group col-sm-1\">\n                              {this.state.authors.length > 1 && (\n                                <button\n                                  className=\"author-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleAuthorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"author-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleAuthorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </div>\n                            {index == 0 &&\n                            <span className=\"info-area-names\">\n                              <InfoArea\n                                id=\"author\"\n                                className=\"info-area-names\"\n                                helpText={gettext(\"Please enter the authors and affiliation of your research project.\")}\n                              />\n                            </span>\n                            }\n\n                            {inputField.affs.map((_, aidx) => (\n                              <React.Fragment\n                                key={`${inputField}~${index}~${aidx}`}\n                              >\n                                <div className=\"form-group col-sm-11 ml-2\">\n                                  <label\n                                    className=\"offset-sm-1\"\n                                    htmlFor=\"lbl-affiliation\"\n                                  >\n                                    {gettext('Affiliation') +\n                                    (inputField.affs.length > 1\n                                      ? ' #' + (aidx + 1)\n                                      : \"\")}\n                                    :\n                                  </label>\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control  offset-sm-1 col-sm-11\"\n                                    value={inputField.affs[aidx]}\n                                    onChange={(e) =>\n                                      this.handleAuthorAffInputChange(\n                                        index,\n                                        aidx,\n                                        e\n                                      )\n                                    }\n                                  />\n                                </div>\n                                <div className=\"form-group\">\n                                  {inputField.affs.length > 1 && (\n                                    <button\n                                      className=\"affiliation-control btn btn-link\"\n                                      type=\"button\"\n                                      onClick={() =>\n                                        this.handleAuthorAffRemoveFields(\n                                          index,\n                                          aidx\n                                        )\n                                      }\n                                    >\n                                      -\n                                    </button>\n                                  )}\n                                  <button\n                                    className=\"affiliation-control btn btn-link\"\n                                    type=\"button\"\n                                    onClick={() =>\n                                      this.handleAuthorAffAddFields(index, aidx)\n                                    }\n                                  >\n                                    +\n                                  </button>\n                                </div>\n                              </React.Fragment>\n                            ))}\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Publisher*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-publisher\"\n                            sm={1}\n                            htmlFor=\"publisher\"\n                          >\n                            {gettext('Publisher')}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"publisher\"\n                                type=\"textarea\"\n                                style={{height: \"4em\"}}\n                                placeholder={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.publisher}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"publisher\");\n                                }}\n                                {...this.validationProps(\"publisher\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"publisher\"\n                                helpText={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Description*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-description\"\n                            sm={1}\n                            htmlFor=\"description\"\n                          >\n                            {gettext(\"Description\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"description\"\n                                type=\"textarea\"\n                                style={{height: \"6em\"}}\n                                placeholder={gettext(\"Please enter the description of your research project\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.description}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"description\");\n                                }}\n                                {...this.validationProps(\"description\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"description\"\n                                helpText={gettext(\"Please enter the description of your research project\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n\n                      </FormGroup>\n\n                      {/*Year*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-year\"\n                          sm={1}\n                          className=\"pt-0\"\n                          for=\"lbl-year\"\n                        >\n                          {gettext(\"Year\")}:\n                        </Label>\n                        <Col sm={4}>\n                          <Input\n                            className=\"form-control\"\n                            placeholder={gettext(\"Year of project start...\")}\n                            value={this.state.year}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"year\");\n                            }}\n                            {...this.validationProps(\"year\")}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"year\"\n                          helpText={gettext(\"Please enter year of project start.\")}\n                        />\n                      </FormGroup>\n\n                      {/*Institute*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-institute\"\n                          className=\"pt-3\"\n                          sm={1}\n                          for=\"institute\"\n                        >\n                          {gettext('Institute')}:\n                        </Label>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label>{gettext('Institute name')}:</Label>\n                          <AsyncCreatableSelect\n                            id=\"institute\"\n                            className={this.state.validMd.institute ? \"is-valid\" : \"is-invalid\"}\n                            isClearable\n                            cacheOptions\n                            value={{\n                              value: this.state.institute,\n                              label: this.state.institute,\n                            }}\n                            onChange={this.handleInstituteChange}\n                            loadOptions={this.promiseOptions}\n                            {...this.validationProps(\"institute\")}\n                          />\n                        </Col>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label for=\"department\">\n                            {gettext('Department')}:\n                          </Label>\n                          <Input\n                            value={this.state.department}\n                            onChange={(e) =>\n                              this.handleInputChange(e, \"department\")\n                            }\n                            {...this.validationProps(\"department\")}\n                          />\n                        </Col>\n                        <span className=\"info-area-names\">\n                          <InfoArea\n                            id=\"institute\"\n                            helpText={gettext(\"Please enter the related Max Planck Institute for this research project.\")}\n                          />\n                        </span>\n                        {this.state.directors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-directors\"\n                              sm={2}\n                              className=\"form-group offset-sm-1 pt-3\"\n                              for=\"directors\"\n                            >\n                              {gettext('Director or PI') +\n                              (this.state.directors.length > 1\n                                ? ' #' + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label form=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 0)}\n\n                              />\n                            </FormGroup>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label for=\"lastName\">\n                                {gettext('Last Name')}:\n                              </Label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 1)}\n                              />\n                            </FormGroup>\n                            <FormGroup>\n                              {this.state.directors.length > 1 && (\n                                <button\n                                  className=\"director-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleDirectorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"director-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleDirectorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </FormGroup>\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Resource Type*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-resource-type\"\n                          sm={2}\n                          className=\"pt-0\"\n                          for=\"resource-type\"\n                        >\n                          {gettext('Resource Type')}:\n                        </Label>\n                        <Col sm={3}>\n                          <Select\n                            id=\"resource-type\"\n                            value={{\n                              value: this.state.resourceType,\n                              label: gettext(this.state.resourceType)\n                            }}\n                            options={this.resourceOptions}\n                            onChange={this.onResourceSelectChange}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"resource-type\"\n                          helpText={gettext(\"Please enter the resource type of the entity. Allowed values for this field: Library (default), Project.\")}\n                        />\n                      </Row>\n\n                      {/*License*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-license\"\n                          className=\"pt-0\"\n                          sm={1}\n                          for=\"license\"\n                        >\n                          {gettext(\"License\")}:\n                        </Label>\n                        <Col sm={7}>\n                          <Input\n                            id=\"license\"\n                            placeholder={gettext(\"Please enter the license\") + \"...\"}\n                            className=\"form-control\"\n                            value={this.state.license}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"license\");\n                            }}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"license\" helpText={gettext(\"Please enter the license\") + \".\"}\n                        />\n                      </Row>\n                      {/*<br />*/}\n                      {/*<pre>{JSON.stringify(this.state, null, 2)}</pre>*/}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ModalBody>\n            <ModalFooter>\n              {this.props.onButton1 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-1 col-sm-3\"\n                disabled={this.state.isButton1Disabled}\n                onClick={(e) => this.onButton1(e)}>\n                {this.props.button1Label}\n              </button>\n              }\n              {this.props.onButton2 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-9 col-sm-3\"\n                disabled={this.state.isButton2Disabled}\n                onClick={(e) => this.onButton2(e)}>\n                {this.props.button2Label}\n              </button>\n              }\n            </ModalFooter>\n          </form>\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nKeeperArchiveMetadataForm.propTypes = keeperArchiveMetadataFormPropTypes;\n\nexport default KeeperArchiveMetadataForm;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\nimport KeeperArchiveMetadataForm from '../keeper-archive-metadata-form';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass ArchiveLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onUpdateArchiveMetadata = (defaultMd, state) => {\n        let newState = {};\n        Object.keys(defaultMd).map(k => {\n            newState[k] = state[k];\n        });\n        //return promise, not run!\n        return keeperAPI\n            .updateArchiveMetadata(this.props.repoID, newState)\n            .then((res) => {\n                newState = res.data;\n\n                newState.validMd = state.validMd;\n\n                //if publisher is empty, apply defaultPublisher\n                if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n                    newState.publisher = defaultMd.publisher;\n                    newState.validMd.publisher = true;\n                }\n\n                return newState;\n            })\n            .catch((error) => {\n                let errMessage = Utils.getErrorMsg(error);\n                toaster.danger(errMessage);\n            });\n    }\n\n    onArchiveClick = (a, b) => {\n        this.props.hideDialog();\n        //return promise, not run!\n        return keeperAPI.archiveLibrary(this.props.repoID)\n            .then((resp) => {\n                return resp.data.msg;\n        });\n    }\n\n    render() {\n        const archive_info = gettext(\"By archiving this library, the current state of everything contained within \" +\n            \"it will be archived on a dedicated archiving system. For more information, please follow the link: \" +\n            \"{archive_info_link} This library can be archived {quota} more times. Please, fill out the following archive metadata form.\").replace(\"{quota}\",\n            this.props.quota);\n        const split = archive_info.split('{archive_info_link}')\n        return (\n                <KeeperArchiveMetadataForm\n                    hideDialog={this.props.hideDialog}\n                    repoID={this.props.repoID}\n                    header={\n                        <Fragment>\n                            <span>{gettext('Archive {library_name}').replace('{library_name}', '')}</span>\n                            <span style={{color: '#57a5b8'}}>{this.props.repoName}</span>\n                            <span> {gettext('library')}</span>\n                        </Fragment>\n                    }\n                    body={\n                        <Fragment>\n                            {split[0]}\n                            <a href=\"https://mpdl.zendesk.com/hc/en-us/articles/360011432700-Archiving\"\n                                target=\"_blank\">{gettext(\"Information on Archiving\")}</a>.\n                            {split[1]}\n                        </Fragment>\n                    }\n                    onButton1={this.onUpdateArchiveMetadata}\n                    button1Label={gettext(\"Save metadata\")}\n                    onButton2={this.onArchiveClick}\n                    button2Label={gettext(\"Archive\")}\n                />\n        )\n    }\n}\n\nArchiveLibraryDialog.propTypes = propTypes;\n\nexport default ArchiveLibraryDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalHeader, ModalBody, ModalFooter} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass CertifyLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\n    formSubmit = () => {\n        this.props.hideDialog();\n        const {repoID} = this.props;\n        keeperAPI.canCertify(repoID, 'dir', '/').then(() => {\n            this.certifyLibrary()\n        }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        })\n    }\n\n    certifyLibrary = () => {\n        const {repoID, repoName} = this.props;\n        toaster.success(gettext('Your files with the library {repoName} are currently being certified. We will inform you once the task has successfully finished. This may take a while.').replace('{repoName}', repoName), {duration: 3});\n        keeperAPI.certifyOnBloxberg(repoID, '/', 'dir', repoName).then(() => {\n            }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        });\n    }\n\n    render() {\n        return (\n            <Modal isOpen={true} toggle={this.props.hideDialog}>\n                <ModalHeader toggle={this.props.hideDialog}>\n                    <span>{gettext('Certify')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n                <ModalBody>\n                    <span>{gettext('Certify all files within the library via the bloxberg blockchain. A new entry under “Library Details” on the left sidebar will be created, where you can access the certified version and the file and a proof of certification. Certifying may take some time, depending on the size of the library. Adding metadata is optional, but recommended.')}</span>\n                </ModalBody>\n                <ModalFooter>\n                    <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Certify')}</button>\n                </ModalFooter>\n            </Modal>\n        )\n    }\n}\n\nCertifyLibraryDialog.propTypes = propTypes;\n\nexport default CertifyLibraryDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\n// KEEPER\nimport { keeperAPI, seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../../components/dialog/repo-share-upload-links-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n// KEEPER\nimport AssignDoiDialog from '../../components/dialog/assign-doi-dialog';\nimport ArchiveLibraryDialog from '../../components/dialog/archive-library-dialog';\nimport CertifyLibraryDialog from '../../components/dialog/certify-library-dialog';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\n// KEEPER\nvar handleCanArchiveResponse = (obj, resp) => {\n  const d = resp.data;\n  //alert(JSON.stringify(d));\n  let msg, error;\n  const default_error =\n    'Can not archive library due to unknown reason, please contact support.';\n  if (d.status === 'success') obj.setState({ quota: d.quota });\n  else if (d.status === 'in_processing') msg = d.msg;\n  else if (d.status === 'quota_expired')\n    error = gettext(\n      'Cannot archive, since the maximum number of archives for this library has been reached. Please contact Keeper support.'\n    );\n  else if (d.status === 'snapshot_archived')\n    error = gettext(\n      'Cannot archive, since the library snapshot has already been archived.'\n    );\n  else if (d.status === 'is_too_big')\n    error = gettext('Cannot archive, since the library is too large.');\n  else if (d.status === 'metadata_error') {\n    //pass, error will be handled via archive metadata form\n  } else if (d.status === 'system_error') error = d.msg || default_error;\n  else error = default_error;\n  if (error) toaster.danger(error);\n  else if (msg) toaster.success(msg);\n};\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isAssignDoiDialogShow: false,\n      isArchiveLibraryDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  }\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onToggleStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case 'Assign DOI to current state':\n        this.onAssignDoiToggle();\n        break;\n      case 'Archive Library':\n        this.onArchiveLibraryToggle();\n        break;\n      case 'Certify Library':\n        this.onCertifyLibraryToggle();\n        break;\n      case 'Edit Metadata':\n        this.onEditMetadataToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  }\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  }\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  }\n\n  // KEEPER \n  onAssignDoiToggle = () => {\n    this.setState({ isAssignDoiDialogShow: !this.state.isAssignDoiDialogShow });\n  };\n\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success')\n          this.setState({ isArchiveLibraryDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: 'system_error', msg: errorMsg },\n        });\n      });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success')\n          this.setState({ isEditMetadataDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: 'system_error', msg: errorMsg },\n        });\n      });\n  };\n\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick} onFocus={this.onFocus}>\n        <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Fragment>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </Fragment>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  }\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n        {/* KEEPER */}\n        {this.state.isAssignDoiDialogShow && (\n          <ModalPortal>\n            <AssignDoiDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onAssignDoiToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\n// KEEPER\nexport { handleCanArchiveResponse };\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onMonitorRepo={this.props.onMonitorRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onMonitorRepo={this.onMonitorRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../dialog/repo-share-upload-links-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onMonitorRepo: PropTypes.func\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      // no default\n    }\n  }\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Links Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n      if (repo.permission == 'r' || repo.permission == 'rw') {\n        const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n        operations.push(monitorOp);\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      return (\n        <Fragment>\n          {operations.map(item => {\n            switch (item) {\n              case 'Share':\n                return <Fragment key={item}>{shareOperation}</Fragment>;\n              case 'Unshare':\n                return <Fragment key={item}>{unshareOperation}</Fragment>;\n              case 'Watch File Changes':\n              case 'Unwatch File Changes':\n                return (\n                  <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu} key={item}>\n                    <DropdownToggle\n                      className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n                      title={gettext('More Operations')}\n                      data-toggle=\"dropdown\"\n                      aria-expanded={this.state.isItemMenuShow}\n                      aria-haspopup={true}\n                      style={{'minWidth': '0'}}\n                      onClick={this.clickOperationMenuToggle}\n                      onKeyDown={this.onDropdownToggleKeyDown}\n                    />\n                    <DropdownMenu>\n                      {[item].map((item, index) => {\n                        return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              // no default\n            }\n          })}\n        </Fragment>\n      );\n    }\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n\n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n              onMonitorRepo={this.props.onMonitorRepo}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  }\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Detail')} aria-label={gettext('Detail')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFileCancel: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      let isDraft = this.state.isDraft;\n      this.props.onAddFile(path, isDraft);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isDraft: !this.state.isDraft\n        });\n      }\n    }\n\n    if (!this.state.isDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isDraft: !this.state.isdraft\n        });\n      } else {\n        this.setState({\n          isDraft: !this.state.isdraft\n        });\n      }\n    }\n  }\n\n  toggle = () => {\n    this.props.addFileCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.setSelectionRange(0,0);\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={this.newInput}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { Utils } from \"../../utils/utils\";\nimport toaster from \"../toast\";\nimport KeeperArchiveMetadataForm from \"../keeper-archive-metadata-form\";\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n};\n\nclass KeeperEditMetadataDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onUpdateArchiveMetadata = (defaultMd, state) => {\n    this.props.hideDialog();\n    let newState = {};\n    Object.keys(defaultMd).map((k) => {\n      newState[k] = state[k];\n    });\n    //return promise, not run!\n    return keeperAPI\n      .updateArchiveMetadata(this.props.repoID, newState)\n      .then((res) => {\n        newState = res.data;\n        newState.validMd = state.validMd;\n        //if publisher is empty, apply defaultPublisher\n        if (\n          !(\n            \"publisher\" in newState &&\n            newState.publisher &&\n            newState.publisher.trim()\n          )\n        ) {\n          newState.publisher = defaultMd.publisher;\n          newState.validMd.publisher = true;\n        }\n        return newState;\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  render() {\n    const title = gettext(\"Edit Metadata for {library_name} library\") \n    const split = title.split(\"{library_name}\")\n\n    return (\n      <KeeperArchiveMetadataForm\n        hideDialog={this.props.hideDialog}\n        repoID={this.props.repoID}\n        header={\n          <Fragment>\n            {split[0]}\n            <span style={{ color: \"#57a5b8\" }}> {this.props.repoName}</span>\n            {split.length>1 && split[1]}\n          </Fragment>\n        }\n        onButton1={this.onUpdateArchiveMetadata}\n        button1Label={gettext(\"Save metadata\")}\n      />\n    );\n  }\n}\n\nKeeperEditMetadataDialog.propTypes = propTypes;\n\nexport default KeeperEditMetadataDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n// KEEPER\nimport ArchiveLibraryDialog from '../dialog/archive-library-dialog';\nimport CertifyLibraryDialog from '../dialog/certify-library-dialog';\nimport KeeperEditMetadataDialog from '../dialog/keeper-edit-metadata-dialog';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { handleCanArchiveResponse } from '../../pages/my-libs/mylib-repo-list-item';\n\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // KEEPER\n  isRepoOwner: PropTypes.bool.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false,\n      // KEEPER\n      isArchiveLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  }\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  }\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  }\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: !this.state.isUploadMenuShow,\n      isCreateMenuShow: false,\n    });\n  }\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  }\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  }\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: !this.state.isCreateMenuShow,\n      isUploadMenuShow: false,\n    });\n  }\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '',\n    });\n  }\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  }\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  }\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  }\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  // KEEPER\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repoID)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success' || d.status === 'metadata_error')\n          this.setState({\n            isArchiveLibraryDialogShow: true,\n            quota: d.quota,\n          });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    this.setState({ isEditMetadataDialogShow: true });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path == '/' ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    // KEEPER\n    let isArchiveBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isEditMetadataBtnShow =\n      !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isCertifyBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ?\n                <Fragment>\n                  <button className=\"btn btn-secondary operation-item\" onClick={this.onUploadClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"upload-menu\">{gettext('Upload')}</button>\n                  {this.state.isUploadMenuShow && (\n                    <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"upload-menu\">\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFile} role=\"menuitem\">{gettext('Upload Files')}</button>\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFolder} role=\"menuitem\">{gettext('Upload Folder')}</button>\n                    </div>\n                  )}\n                </Fragment>\n                :\n                <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n            </Fragment>\n          )}\n          {canCreate &&\n          <Fragment>\n            <button className=\"btn btn-secondary operation-item\" onClick={this.onCreateClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"new-menu\">{gettext('New')}</button>\n            {this.state.isCreateMenuShow && (\n              <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"new-menu\">\n                <button className=\"dropdown-item\" onClick={this.onCreateFolderToggle} role=\"menuitem\">{gettext('New Folder')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</button>\n                <div className=\"dropdown-divider\"></div>\n                <button className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle} role=\"menuitem\">{gettext('New Markdown File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateExcelToggle} role=\"menuitem\">{gettext('New Excel File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreatePPTToggle} role=\"menuitem\">{gettext('New PowerPoint File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateWordToggle} role=\"menuitem\">{gettext('New Word File')}</button>\n              </div>\n            )}\n          </Fragment>\n          }\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n          {/* KEEPER */}\n          {isArchiveBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext('Archive')}\n              onClick={this.onArchiveLibraryToggle}\n            >\n              {gettext('Archive')}\n            </button>\n          )}\n          {isCertifyBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext('Certify')}\n              onClick={this.onCertifyLibraryToggle}\n            >\n              {gettext('Certify')}\n            </button>\n          )}\n          {isEditMetadataBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext('Metadata')}\n              onClick={this.onEditMetadataToggle}\n            >\n              {gettext('Metadata')}\n            </button>\n          )}  \n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n          <div className=\"dir-operation\">\n            {content}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n        {/* KEEPER */}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <KeeperEditMetadataDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let { dirent } = this.props;\n    this.changeState(dirent);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n\n    let { dirent } = this.props;\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={this.newInput} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport ViewModeToolbar from '../../components/toolbar/view-mode-toolbar';\nimport DirOperationToolBar from '../../components/toolbar/dir-operation-toolbar';\nimport MultipleDirOperationToolbar from '../../components/toolbar/multiple-dir-operation-toolbar';\nimport ViewFileToolbar from '../../components/toolbar/view-file-toolbar';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,  // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n\n  render() {\n\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />\n          </div>\n          <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n          {this.props.isDirentSelected ?\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            /> :\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isRepoOwner={this.props.isRepoOwner}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          }\n        </div>\n        <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile && (\n          <InternalLinkOperation repoID={this.props.repoID} path={this.props.currentPath}/>\n        )}\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  }\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer w-4 h-4 rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  }\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n  }\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  }\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagColor from './tag-color';\nimport TagName from './tag-name';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (userPerm === 'rw') {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" href=\"#\" role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true} autoFocus={false}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ParticipantsList from '../file-view/participants-list';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath, fileParticipantList } = this.props;\n    const { commentsList } = this.state;\n    return (\n      <div className=\"seafile-comment detail-comments h-100\">\n        <div className=\"flex-fill o-auto\">\n          {commentsList.length > 0 ? (\n            <ul className=\"seafile-comment-list\">\n              {commentsList.map((item, index = 0, arr) => {\n                let oldTime = (new Date(item.created_at)).getTime();\n                let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n                return (\n                  <CommentItem\n                    key={item.id}\n                    item={item}\n                    time={time}\n                    deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment}\n                    editComment={this.editComment}\n                  />\n                );\n              })\n              }\n            </ul>) :\n            <p className=\"text-center my-4\">{gettext('No comment yet.')}</p>\n          }\n        </div>\n        <div className=\"seafile-comment-footer flex-shrink-0\">\n          {fileParticipantList &&\n            <ParticipantsList\n              onParticipantsChange={this.props.onParticipantsChange}\n              participants={fileParticipantList}\n              repoID={repoID}\n              filePath={filePath}\n              showIconTip={true}\n            />\n          }\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment...')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <div className=\"comment-submit-container\">\n            <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport ParticipantsList from '../file-view/participants-list';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false\n    };\n  }\n\n  getDirentPostion = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  render() {\n    let { direntType, direntDetail, fileTagList, fileParticipantList } = this.props;\n    let position = this.getDirentPostion();\n    let direntPath = this.getDirentPath();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n          </tbody>\n        </table>\n      );\n    } else {\n      return (\n        <Fragment>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <ul className=\"file-tag-list\">\n                    {fileTagList.map((fileTag) => {\n                      return (\n                        <li key={fileTag.id} className=\"file-tag-item\">\n                          <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                          <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-participants\">\n                <th>{gettext('Participants')}</th>\n                <td>\n                  {fileParticipantList &&\n                    <ParticipantsList\n                      onParticipantsChange={this.props.onParticipantsChange}\n                      participants={fileParticipantList}\n                      repoID={this.props.repoID}\n                      filePath={direntPath}\n                      showIconTip={false}\n                    />\n                  }\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {this.state.isEditFileTagShow &&\n            <ModalPortal>\n              <EditFileTagDialog\n                repoID={this.props.repoID}\n                fileTagList={fileTagList}\n                filePath={direntPath}\n                toggleCancel={this.onEditFileTagToggle}\n                onFileTagChanged={this.onFileTagChanged}\n              />\n            </ModalPortal>\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent, fileTags } = this.props;\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={dirent ? dirent.file_tags : fileTags}\n                onFileTagChanged={this.props.onFileTagChanged}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab} className=\"flex-fill o-auto\">\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file text-center\">\n          <p className=\"text-secondary\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              addFileCancel={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MD5 from \"MD5\";\nimport moment from \"moment\";\nimport { UncontrolledTooltip } from \"reactstrap\";\nimport { Dropdown, DropdownToggle, DropdownItem } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  mediaUrl,\n  username,\n  useGoFileserver,\n  fileServerRoot,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\nimport { seafileAPI } from \"../../utils/seafile-api\";\nimport URLDecorator from \"../../utils/url-decorator\";\nimport ItemDropdownMenu from \"../dropdown-menu/item-dropdown-menu\";\nimport Rename from \"../rename\";\nimport ModalPortal from \"../modal-portal\";\nimport MoveDirentDialog from \"../dialog/move-dirent-dialog\";\nimport CopyDirentDialog from \"../dialog/copy-dirent-dialog\";\nimport ShareDialog from \"../dialog/share-dialog\";\nimport ZipDownloadDialog from \"../dialog/zip-download-dialog\";\nimport EditFileTagDialog from \"../dialog/edit-filetag-dialog\";\nimport LibSubFolderPermissionDialog from \"../dialog/lib-sub-folder-permission-dialog\";\n\nimport \"../../css/dirent-list-item.css\";\nimport toaster from \"../toast\";\n// KEEPER\nimport ReactTooltip from \"react-tooltip\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport bergImage from \"../../assets/berg_icon.png\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(\n      dirent.permission\n    );\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === \"rw\";\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      canDrag: this.canDrag,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false, // for mobile\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.isItemFreezed !== this.props.isItemFreezed &&\n      !nextProps.isItemFreezed\n    ) {\n      this.setState(\n        {\n          highlight: false,\n          isOperationShow: false,\n        },\n        () => {\n          if (\n            nextProps.activeDirent &&\n            nextProps.activeDirent.name === nextProps.dirent.name\n          ) {\n            this.setState({ isOperationShow: true });\n          }\n        }\n      );\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen,\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({ isDragTipShow: false });\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI\n        .unstarItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", false);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", true);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == \"TD\") {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n  // KEEPER\n  onItemCertify = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    keeperAPI\n      .canCertify(repoID, dirent.type, filePath)\n      .then(() => {\n        this.certifyFile();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  certifyFile = () => {\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    toaster.success(gettext(\"Certify the file through bloxberg...\"), {\n      duration: 3,\n    });\n    keeperAPI\n      .certifyOnBloxberg(repoID, filePath, dirent.type, dirent.name)\n      .then(() => {\n        toaster.success(gettext(\"Transaction succeeded\"));\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  closeSharedDialog = () => {\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute(\"data-op\");\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch (operation) {\n      case \"Download\":\n        this.onItemDownload(event);\n        break;\n      case \"Share\":\n        this.onItemShare(event);\n        break;\n      case \"Delete\":\n        this.onItemDelete(event);\n        break;\n      case \"Rename\":\n        this.onItemRenameToggle();\n        break;\n      case \"Move\":\n        this.onItemMoveToggle();\n        break;\n      case \"Copy\":\n        this.onItemCopyToggle();\n        break;\n      case \"Tags\":\n        this.onEditFileTagToggle();\n        break;\n      case \"Permission\":\n        this.onPermissionItem();\n        break;\n      case \"Unlock\":\n        this.onUnlockItem();\n        break;\n      case \"Lock\":\n        this.onLockItem();\n        break;\n      case \"Comment\":\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail(\"comments\");\n        break;\n      case \"History\":\n        this.onHistory();\n        break;\n      case \"Access Log\":\n        this.onAccessLog();\n        break;\n      case \"Open via Client\":\n        this.onOpenViaClient();\n        break;\n      case \"Convert with ONLYOFFICE\":\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow,\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n      canDrag: false,\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({\n      isRenameing: false,\n      canDrag: this.canDrag, // set it back to the initial value\n    });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({ isMoveDialogShow: !this.state.isMoveDialogShow });\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({ isCopyDialogShow: !this.state.isCopyDialogShow });\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen,\n    });\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .lockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", true);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", true);\n        let lockName = username.split(\"@\");\n        this.props.updateDirent(\n          this.props.dirent,\n          \"lock_owner_name\",\n          lockName[0]\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .unlockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", false);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", false);\n        this.props.updateDirent(this.props.dirent, \"lock_owner_name\", \"\");\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"file_revisions\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path =\n      siteRoot +\n      \"repo/file-access/\" +\n      this.props.repoID +\n      \"/?p=\" +\n      encodeURIComponent(filePath);\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"open_via_client\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n\n    seafileAPI\n      .onlyofficeConvert(repoID, filePath)\n      .then((res) => {\n        this.props.loadDirentList(res.data.parent_dir);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === \"dir\") {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true,\n        });\n      } else {\n        seafileAPI\n          .zipDownload(repoID, this.props.path, this.props.dirent.name)\n          .then((res) => {\n            const zipToken = res.data[\"zip_token\"];\n            location.href = `${fileServerRoot}zip/${zipToken}`;\n          })\n          .catch((error) => {\n            let errorMsg = Utils.getErrorMsg(error);\n            this.setState({\n              isLoading: false,\n              errorMsg: errorMsg,\n            });\n          });\n      }\n    } else {\n      let url = URLDecorator.getUrl({\n        type: \"download_file_url\",\n        repoID: repoID,\n        filePath: direntPath,\n      });\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false,\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === \"/\" ? path + dirent.name : path + \"/\" + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ isShowTagTooltip: !this.state.isShowTagTooltip });\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = \"move\";\n    let { selectedDirentList } = this.props;\n    if (\n      selectedDirentList.length > 0 &&\n      selectedDirentList.includes(this.props.dirent)\n    ) {\n      // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList = selectedDirentList.map((item) => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {\n          nodeDirent: item,\n          nodeParentPath: this.props.path,\n          nodeRootPath: nodeRootPath,\n        };\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData(\"applicaiton/drag-item-info\", selectedList);\n      return;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {\n      nodeDirent: this.props.dirent,\n      nodeParentPath: this.props.path,\n      nodeRootPath: nodeRootPath,\n    };\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData(\"applicaiton/drag-item-info\", dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n      this.setState({ isDropTipshow: true });\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === \"copy\") {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = \"move\";\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    }\n    this.setState({ isDropTipshow: false });\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    this.setState({ isDropTipshow: false });\n    if (e.dataTransfer.files.length) {\n      // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData(\n      \"applicaiton/drag-item-info\"\n    );\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) {\n      //move items\n      let direntPaths = dragStartItemData.map((draggedItem) => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(\n        this.props.path,\n        this.props.dirent.name\n      );\n\n      if (\n        direntPaths.some((direntPath) => {\n          return direntPath === selectedPath;\n        })\n      ) {\n        //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === \"dir\" && nodeDirent.type === \"dir\") {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(\n      this.props.currentRepoInfo,\n      nodeDirent,\n      selectedPath,\n      nodeParentPath\n    );\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(\n      currentRepoInfo,\n      dirent.permission,\n      dirent\n    );\n                // {this.props.isRepoOwner &&\n                //   dirent.permission === \"rw\" &&\n    //   dirent.type === \"file\" && (\n    //   isRepoOwner\n    console.log(this.props.isRepoOwner);    \n    console.log(dirent.permission);    \n    console.log(dirent.type);    \n \n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ? (\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        ) : (\n          <Fragment>\n            {this.state.isOperationShow && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                {/* KEEPER bxb button */}                                                                                                         \n                {this.props.isRepoOwner &&\n                  dirent.permission === \"rw\" &&\n                  dirent.type === \"file\" && (\n                    <a className=\"op-icon\" data-tip data-for=\"bloxberg\">\n                      <img\n                        className=\"small-icon\"\n                        src={bergImage}\n                        onClick={this.onItemCertify}\n                      />\n                      <ReactTooltip\n                        className=\"hover-keep\"\n                        id=\"bloxberg\"\n                        delayHide={1000}\n                        effect=\"solid\"\n                      >\n                        <span className=\"tooltip-bold\">\n                          {gettext(\n                            \"Certify your file via the bloxberg blockchain.\"\n                          )}\n                        </span>\n                      </ReactTooltip>\n                    </a>\n                )}\n                                    \n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = \"\";\n    if (this.props.currentRepoInfo) {\n      dirHref =\n        siteRoot +\n        \"library/\" +\n        this.props.repoID +\n        \"/\" +\n        this.props.currentRepoInfo.repo_name +\n        Utils.encodePath(direntPath);\n    }\n    let fileHref =\n      siteRoot +\n      \"lib/\" +\n      this.props.repoID +\n      \"/file\" +\n      Utils.encodePath(direntPath);\n\n    let toolTipID = \"\";\n    let tagTitle = \"\";\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map((item) => item.name).join(\" \");\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? \"tr-highlight \" : \"\";\n    trClass += this.state.isDropTipshow ? \"tr-drop-effect\" : \"\";\n    trClass +=\n      activeDirent && activeDirent.name === dirent.name ? \"tr-active\" : \"\";\n    trClass += dirent.isSelected ? \"tr-active\" : \"\";\n\n    let lockedInfo = gettext(\"locked by {name}\").replace(\n      \"{name}\",\n      dirent.lock_owner_name\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const { canDrag } = this.state;\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td\n          className={`pl10 ${this.state.isDragTipShow ? \"tr-drag-effect\" : \"\"}`}\n        >\n          <input\n            type=\"checkbox\"\n            className=\"vam\"\n            onChange={this.onItemSelected}\n            checked={dirent.isSelected}\n          />\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined && (\n            <a\n              href=\"#\"\n              role=\"button\"\n              aria-label={dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n              onClick={this.onItemStarred}\n            >\n              <i\n                className={`fa-star ${\n                  dirent.starred ? \"fas\" : \"far star-empty\"\n                }`}\n              ></i>\n            </a>\n          )}\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                ref=\"drag_icon\"\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                onClick={this.onItemClick}\n                alt=\"\"\n              />\n            ) : (\n              <img ref=\"drag_icon\" src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n            <div\n              ref=\"empty_content\"\n              style={{ position: \"absolute\", width: \"1px\", height: \"1px\" }}\n            ></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\" onClick={this.onItemClick}>\n                  {dirent.name}\n                </a>\n              ) : (\n                <a\n                  href={dirent.type === \"dir\" ? dirHref : fileHref}\n                  onClick={this.onItemClick}\n                >\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {dirent.type !== \"dir\" &&\n            dirent.file_tags &&\n            dirent.file_tags.length > 0 && (\n              <Fragment>\n                <div\n                  id={`tag-list-title-${toolTipID}`}\n                  className=\"dirent-item tag-list tag-list-stacked\"\n                >\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span\n                        className=\"file-tag\"\n                        key={fileTag.id}\n                        style={{\n                          zIndex: length - index,\n                          backgroundColor: fileTag.color,\n                        }}\n                      ></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip\n                  target={`tag-list-title-${toolTipID}`}\n                  placement=\"bottom\"\n                >\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td\n          className=\"last-update\"\n          title={moment.unix(dirent.mtime).format(\"llll\")}\n        >\n          {dirent.mtime_relative}\n        </td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                alt=\"\"\n              />\n            ) : (\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\">{dirent.name}</a>\n              ) : (\n                <a href={dirent.type === \"dir\" ? dirHref : fileHref}>\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext(\"More Operations\")}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div\n              className={this.state.isOpMenuOpen ? \"\" : \"d-none\"}\n              onClick={this.toggleOpMenu}\n            >\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined && (\n                  <DropdownItem\n                    className=\"mobile-menu-item\"\n                    onClick={this.onItemStarred}\n                  >\n                    {dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n                  </DropdownItem>\n                )}\n                {this.props\n                  .getDirentItemMenuList(dirent, true)\n                  .map((item, index) => {\n                    if (item != \"Divider\" && item.key != \"Open via Client\") {\n                      return (\n                        <DropdownItem\n                          className=\"mobile-menu-item\"\n                          key={index}\n                          data-op={item.key}\n                          onClick={this.onMobileMenuItemClick}\n                        >\n                          {item.value}\n                        </DropdownItem>\n                      );\n                    } else {\n                      return null;\n                    }\n                  })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditFileTagShow && (\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        )}\n        {this.state.isZipDialogOpen && (\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAFECAMAAAFqkvmEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIyQzlCRTQzMzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIyQzlCRTQ0MzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjJDOUJFNDEzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjJDOUJFNDIzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zgL64AAABgFBMVEWt0daNvsTL4ua01dphpa1xrrXd7O7F3+NSm6bP5eiJvMKlzdG52N0xhZzG4OShytCdyM5EkqN2sbh+tby82t1VnaeFusGYxcqaxszW6OuDub9qqrGoz9RdoqnS5uk4ip7h7vDO5OeTwsjZ6uzZ6u3V6OrN4+c1iJ6RwMdZoKmy1Nl4srlyq7vU5+qSwceBt76Mu8jA3OBLl6Rkp6/Y6exYnK9ko7Tb6+2DtsN9s8HK4uY9jZ9Mlamdx9CRv8q21tuHucWx0tlAj6N5sb/K4OXc6+6VwsyIu8LX6Ou319trqLiu0dfD3uK+29+KvMar0NWmzNTC3eHC3eJNmKXA2uBfoLJoprZdoa7H3uSYw82jytKbxs/S5Oily9Nbn7CYxM1uq7fJ4eXK4uXT5+rI4OTR5el8tLt7tLuVw8l0sLbI4eTI4eWgyc9vrbRtrLNsq7Joqa9nqa+v09dfpKvf7e9RmKt2r73M4edgo658s7yjy9BnqLFrqbSfyNFXn6cAAAA2nrm/AAAAgHRSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ADgFS2cAABqTSURBVHjarNU/SwNBEIbxDYZ4KQYJylkIYiEeBuxuC4lNmpRaBCzsjGnsU4Y3Xz2Z9bzcTXb2jzjdwvx4ii3G7HLH/JOgKlcAmYKASZ4AAhHjTwBFjgBCEaMkdGK0BGBTxexXIFW0AMTPOiqWR8ERiosO4Mio/ooI9GZHUWH7gu4OYhwUfYAXJ2xAkBDlM4tVQAiwLQdOkCpk4rIcvLI4V4UA3wdx7QQpgnxiwWKtCAFunLhwovIKkVg24oPFyitEYtiINyfePUIkZq2Ys3jwCJF4bMXZJ4vpiRAJ6ogrFuMTAb3xI26FqEQiLhBvPPXERCaiAimNuiMK8ReKsEeBtMZ9K8RyoQpqhEVqY9QIpAtygjLExgnkiOoP13kvAKv1roMgDAVgWEzQQTEydHCxXoIOmkBcMDExxs3JODk4GfUBvI7w6nJABEqh5xj3fjlNm/Rv5U85J9ecHHNObjk55Sa55OSQM3LHHSzgP1fcxAEz0/D8nZc1HBa7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\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs。\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    hideMenu();\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    hideMenu();\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission; \n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFileCancel={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ? \n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    hideMenu();\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle(currentObject);\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    hideMenu();\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    const { currentNode } = this.props;\n    this.changeState(currentNode);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    const { currentNode } = this.props;\n    let type = currentNode.object.type;\n    this.newInput.current.focus();\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={this.newInput} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onAddFileNode = (filePath, isDraft) => {\n    this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    this.props.onAddFileNode(filePath, isDraft);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  fileTags={this.props.isViewFile ? this.props.fileTags : []}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file；\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  deleteFolder: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass DeleteFolderDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedToUserCount: 0,\n      sharedToGroupCount: 0\n    };\n  }\n\n  componentDidMount() {\n    const { repoID, path } = this.props;\n    seafileAPI.getRepoFolderShareInfo(repoID, path).then((res) => {\n      this.setState({\n        sharedToUserCount: res.data['shared_user_emails'].length,\n        sharedToGroupCount: res.data['shared_group_ids'].length\n      });\n    });\n  }\n\n  deleteFolder = () => {\n    this.props.deleteFolder();\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const { sharedToUserCount, sharedToGroupCount } = this.state;\n    const { path, toggleDialog } = this.props;\n    const folderName = Utils.getFileName(path);\n    const opTarget = '<span class=\"op-target\">' + Utils.HTMLescape(folderName) + '</span>';\n    const message = gettext('Are you sure you want to delete %s ?').replace('%s', opTarget);\n\n    let alert_message = '';\n    if (sharedToUserCount > 0 || sharedToGroupCount > 0) {\n      alert_message = gettext('This folder has been shared to {user_amount} user(s) and {group_amount} group(s).')\n        .replace('{user_amount}', sharedToUserCount)\n        .replace('{group_amount}', sharedToGroupCount);\n    }\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Delete Folder')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n          {alert_message && <p className=\"error\">{alert_message}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteFolder}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteFolderDialog.propTypes = propTypes;\n\nexport default DeleteFolderDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\nimport DeleteFolderDialog from '../../components/dialog/delete-folder-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      isDeleteFolderDialogOpen: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  restoreDeletedDirents = (commitID, paths, e) => {\n    const { repoID } = this.props;\n    e.preventDefault();\n    toaster.closeAll();\n    seafileAPI.restoreDirents(repoID, commitID, paths).then(res => {\n      const { success, failed } = res.data;\n      success.forEach(dirent => {\n        let name = Utils.getFileName(dirent.path);\n        let parentPath = Utils.getDirName(dirent.path);\n        if (!dirent.is_dir) {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'file');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'file');\n          }\n        } else {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'dir');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'dir');\n          }\n        }\n      });\n\n      if (success.length) {\n        let msg = success.length > 1 ? gettext('Restored {name} and {n} other items') :\n          gettext('Restored {name}');\n        msg = msg.replace('{name}', success[0].path.split('/').pop())\n          .replace('{n}', success.length - 1);\n        toaster.success(msg);\n      }\n\n      if (failed.length) {\n        let msg = failed.length > 1 ? gettext('Failed to restore {name} and {n} other items') :\n          gettext('Failed to restore {name}');\n        msg = msg.replace('{name}', failed[0].path.split('/').pop())\n          .replace('{n}', failed.length - 1);\n        toaster.danger(msg);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and {n} other items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, direntPaths)}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and {n} other items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  toggleDeleteFolderDialog = () => {\n    this.setState({isDeleteFolderDialogOpen: !this.state.isDeleteFolderDialogOpen});\n  }\n\n  deleteFolder = () => {\n    const { repoID } = this.props;\n    const { folderToDelete: path } = this.state;\n    seafileAPI.deleteDir(repoID, path).then((res) => {\n      this.deleteItemAjaxCallback(path, true);\n      let name = Utils.getFileName(path);\n      var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      this.setState({ folderToDelete: path }, () => {\n        this.toggleDeleteFolderDialog();\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then((res) => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        const successTipWithUndo = (\n          <>\n            <span>{msg}</span>\n            <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n          </>\n        );\n        toaster.success(successTipWithUndo, {duration: 5});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      if (this.state.isViewFile) {\n        this.setState({fileTags: fileTags});\n      } else {\n        this.updateDirent(dirent, 'file_tags', fileTags);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    let mtime = new Date().getTime()/1000;\n    let dirent = new Dirent({name, type, mtime, size, permission});\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow, isDeleteFolderDialogOpen } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <LibContentToolbar\n            isViewFile={this.state.isViewFile}\n            filePermission={this.state.filePermission}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            onFileTagChanged={this.onToolbarFileTagChanged}\n            onSideNavMenuClick={this.props.onMenuClick}\n            repoID={this.props.repoID}\n            path={this.state.path}\n            isDirentSelected={this.state.isDirentSelected}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            onItemRename={this.onMainPanelItemRename}\n            direntList={this.state.direntList}\n            repoName={this.state.repoName}\n            repoEncrypted={this.state.repoEncrypted}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            userPerm={this.state.userPerm}\n            showShareBtn={showShareBtn}\n            enableDirPrivateShare={enableDirPrivateShare}\n            onAddFile={this.onAddFile}\n            onAddFolder={this.onAddFolder}\n            onUploadFile={this.onUploadFile}\n            onUploadFolder={this.onUploadFolder}\n            currentMode={this.state.currentMode}\n            switchViewMode={this.switchViewMode}\n            onSearchedClick={this.onSearchedClick}\n            isRepoOwner={isRepoOwner}\n            currentRepoInfo={this.state.currentRepoInfo}\n            updateDirent={this.updateDirent}\n            onDirentSelected={this.onDirentSelected}\n            showDirentDetail={this.showDirentDetail}\n            unSelectDirent={this.unSelectDirent}\n            onFilesTagChanged={this.onFileTagChanged}\n          />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <LibContentContainer\n            pathPrefix={this.props.pathPrefix}\n            currentMode={this.state.currentMode}\n            path={this.state.path}\n            pathExist={this.state.pathExist}\n            currentRepoInfo={this.state.currentRepoInfo}\n            repoID={this.props.repoID}\n            enableDirPrivateShare={enableDirPrivateShare}\n            userPerm={userPerm}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            onTabNavClick={this.props.onTabNavClick}\n            onMainNavBarClick={this.onMainNavBarClick}\n            isViewFile={this.state.isViewFile}\n            hash={this.state.hash}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            goDraftPage={this.goDraftPage}\n            isFileLoading={this.state.isFileLoading}\n            isFileLoadedErr={this.state.isFileLoadedErr}\n            filePermission={this.state.filePermission}\n            content={this.state.content}\n            lastModified={this.state.lastModified}\n            latestContributor={this.state.latestContributor}\n            onLinkClick={this.onLinkClick}\n            isTreeDataLoading={this.state.isTreeDataLoading}\n            treeData={this.state.treeData}\n            currentNode={this.state.currentNode}\n            onNodeClick={this.onTreeNodeClick}\n            onNodeCollapse={this.onTreeNodeCollapse}\n            onNodeExpanded={this.onTreeNodeExpanded}\n            onAddFolderNode={this.onAddFolder}\n            onAddFileNode={this.onAddFile}\n            onRenameNode={this.onRenameTreeNode}\n            onDeleteNode={this.onDeleteTreeNode}\n            draftCounts={this.state.draftCounts}\n            usedRepoTags={this.state.usedRepoTags}\n            readmeMarkdown={this.state.readmeMarkdown}\n            updateUsedRepoTags={this.updateUsedRepoTags}\n            isDirentListLoading={this.state.isDirentListLoading}\n            direntList={direntItemsList}\n            fullDirentList={this.state.direntList}\n            sortBy={this.state.sortBy}\n            sortOrder={this.state.sortOrder}\n            sortItems={this.sortItems}\n            updateDirent={this.updateDirent}\n            onDirentClick={this.onDirentClick}\n            onItemClick={this.onItemClick}\n            onItemSelected={this.onDirentSelected}\n            onItemDelete={this.onMainPanelItemDelete}\n            onItemRename={this.onMainPanelItemRename}\n            onItemMove={this.onMoveItem}\n            onItemCopy={this.onCopyItem}\n            onAddFolder={this.onAddFolder}\n            onAddFile={this.onAddFile}\n            onFileTagChanged={this.onFileTagChanged}\n            isDirentSelected={this.state.isDirentSelected}\n            isAllDirentSelected={this.state.isAllDirentSelected}\n            onAllDirentSelected={this.onAllDirentSelected}\n            isDirentDetailShow={this.state.isDirentDetailShow}\n            selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            closeDirentDetail={this.closeDirentDetail}\n            showDirentDetail={this.showDirentDetail}\n            direntDetailPanelTab={this.state.direntDetailPanelTab}\n            onDeleteRepoTag={this.onDeleteRepoTag}\n            onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n            updateDetail={this.state.updateDetail}\n            onListContainerScroll={this.onListContainerScroll}\n            loadDirentList={this.loadDirentList}\n          />\n          {canUpload && this.state.pathExist && !this.state.isViewFile && (\n            <FileUploader\n              ref={uploader => this.uploader = uploader}\n              dragAndDrop={true}\n              path={this.state.path}\n              repoID={this.props.repoID}\n              direntList={this.state.direntList}\n              onFileUploadSuccess={this.onFileUploadSuccess}\n              isCustomPermission={isCustomPermission}\n            />\n          )}\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n        {isDeleteFolderDialogOpen && (\n          <DeleteFolderDialog\n            repoID={this.props.repoID}\n            path={this.state.folderToDelete}\n            deleteFolder={this.deleteFolder}\n            toggleDialog={this.toggleDeleteFolderDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, InputGroup, InputGroupText, Input } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false,\n      searchActive: false,\n      keyword: '',\n      membersFound: []\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  searchMembers = (e) => {\n    const { groupMembers } = this.state;\n    const keyword = e.target.value;\n    const value = keyword.trim().toLowerCase();\n    const membersFound = groupMembers.filter(item => item.name.toLowerCase().indexOf(value) > -1);\n    this.setState({ keyword, membersFound });\n  }\n\n  clearSearch = () => {\n    this.setState({\n      keyword: '',\n      membersFound: []\n    });\n  }\n\n  onSearchInputFocus = () => {\n    this.setState({\n      searchActive: true\n    });\n  }\n\n  onSearchInputBlur = () => {\n    this.setState({\n      searchActive: false\n    });\n  }\n\n  render() {\n    const {\n      isLoading, hasNextPage, groupMembers,\n      keyword, membersFound,\n      searchActive\n    } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <InputGroup className={`search-group-members rounded ${searchActive ? 'active' : ''}`}>\n            <InputGroupText>\n              <i className=\"fas fa-search\" aria-hidden={true}></i>\n            </InputGroupText>\n            <Input\n              type=\"text\"\n              className=\"input-group-input px-0\"\n              placeholder={gettext('Search group members')}\n              value={keyword}\n              onChange={this.searchMembers}\n              onFocus={this.onSearchInputFocus}\n              onBlur={this.onSearchInputBlur}\n            />\n            {keyword && (\n              <InputGroupText>\n                <i className=\"sf2-icon-x1\" aria-hidden={true} onClick={this.clearSearch}></i>\n              </InputGroupText>\n            )}\n          </InputGroup>\n        }\n        <div className=\"manage-members\" onScroll={keyword.trim() ? () => {} : this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={keyword.trim() ? membersFound : groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {(!keyword.trim() && hasNextPage) && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  render() {\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>{gettext('Manage group members')}</ModalHeader>\n        <ModalBody className=\"pb-0\">\n          <ListAndAddGroupMembers\n            groupID={groupID}\n            isOwner={isOwner}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 300,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                  onMonitorRepo={this.onMonitorRepo}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n            autoFocus={true}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n            onMonitorRepo={this.onMonitorRepo}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} autoFocus={true} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canPublishRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            {canPublishRepo &&\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n            }\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDom from 'react-dom';\nimport { Router, navigate } from '@gatsbyjs/reach-router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinks path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinks path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDom.render(<App />, document.getElementById('wrapper'));\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} className=\"vam\">\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const name = imageItems[imageIndex].name;\n    const imageTitle = `${name} (${imageIndex + 1}/${imageItemsLength})`;\n\n    return (\n      <Lightbox\n        imageTitle={imageTitle}\n        mainSrc={imageItems[imageIndex].src}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    if (this.reconstructor) {\n      throw new Error(\"got plaintext data when reconstructing a packet\");\n    }\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('../globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'],\n    };\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} autoFocus={true} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  }\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let { repoID, currentPath, usedRepoTags, readmeMarkdown, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (readmeMarkdown === undefined) {\n      readmeMarkdown = null;\n    }\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank' rel=\"noreferrer\">{readmeMarkdown.name}</a>\n            </span>\n          }\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('./xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    } \n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm)\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onContainerClick = (event) => {\n    hideMenu();\n  }\n\n  onNodeClick = (node) => {\n    hideMenu();\n    this.props.onNodeClick(node);\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n        onClick={this.onContainerClick}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid =\n      typeof data.num === \"number\" &&\n      data.num >= 0 &&\n      data.num < buffers.length;\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, it’s not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSpriteSymbol = factory());\n}(this, (function () { 'use strict';\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nreturn BrowserSpriteSymbol;\n\n})));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSprite = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\n//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar svg$1 = namespaces_1.svg;\nvar xlink$1 = namespaces_1.xlink;\n\nvar defaultConfig = {\n  attrs: ( obj = {\n    style: ['position: absolute', 'width: 0', 'height: 0'].join('; '),\n    'aria-hidden': 'true'\n  }, obj[svg$1.name] = svg$1.uri, obj[xlink$1.name] = xlink$1.uri, obj )\n};\nvar obj;\n\nvar Sprite = function Sprite(config) {\n  this.config = deepmerge(defaultConfig, config || {});\n  this.symbols = [];\n};\n\n/**\n * Add new symbol. If symbol with the same id exists it will be replaced.\n * @param {SpriteSymbol} symbol\n * @return {boolean} `true` - symbol was added, `false` - replaced\n */\nSprite.prototype.add = function add (symbol) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var existing = this.find(symbol.id);\n\n  if (existing) {\n    symbols[symbols.indexOf(existing)] = symbol;\n    return false;\n  }\n\n  symbols.push(symbol);\n  return true;\n};\n\n/**\n * Remove symbol & destroy it\n * @param {string} id\n * @return {boolean} `true` - symbol was found & successfully destroyed, `false` - otherwise\n */\nSprite.prototype.remove = function remove (id) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var symbol = this.find(id);\n\n  if (symbol) {\n    symbols.splice(symbols.indexOf(symbol), 1);\n    symbol.destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * @param {string} id\n * @return {SpriteSymbol|null}\n */\nSprite.prototype.find = function find (id) {\n  return this.symbols.filter(function (s) { return s.id === id; })[0] || null;\n};\n\n/**\n * @param {string} id\n * @return {boolean}\n */\nSprite.prototype.has = function has (id) {\n  return this.find(id) !== null;\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.stringify = function stringify () {\n  var ref = this.config;\n    var attrs = ref.attrs;\n  var stringifiedSymbols = this.symbols.map(function (s) { return s.stringify(); }).join('');\n  return wrapInSvgString(stringifiedSymbols, attrs);\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSprite.prototype.destroy = function destroy () {\n  this.symbols.forEach(function (s) { return s.destroy(); });\n};\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nvar defaultConfig$1 = {\n  /**\n   * Should following options be automatically configured:\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @type {boolean}\n   */\n  autoConfigure: true,\n\n  /**\n   * Default mounting selector\n   * @type {string}\n   */\n  mountTo: 'body',\n\n  /**\n   * Fix disappearing SVG elements when <base href> exists.\n   * Executes when sprite mounted.\n   * @see http://stackoverflow.com/a/18265336/796152\n   * @see https://github.com/everdimension/angular-svg-base-fix\n   * @see https://github.com/angular/angular.js/issues/8934#issuecomment-56568466\n   * @type {boolean}\n   */\n  syncUrlsWithBaseTag: false,\n\n  /**\n   * Should sprite listen custom location change event\n   * @type {boolean}\n   */\n  listenLocationChangeEvent: true,\n\n  /**\n   * Custom window event name which should be emitted to update sprite urls\n   * @type {string}\n   */\n  locationChangeEvent: 'locationChange',\n\n  /**\n   * Emit location change event in Angular automatically\n   * @type {boolean}\n   */\n  locationChangeAngularEmitter: false,\n\n  /**\n   * Selector to find symbols usages when updating sprite urls\n   * @type {string}\n   */\n  usagesToUpdate: 'use[*|href]',\n\n  /**\n   * Fix Firefox bug when gradients and patterns don't work if they are within a symbol.\n   * Executes when sprite is rendered, but not mounted.\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=306674\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=353575\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1235364\n   * @type {boolean}\n   */\n  moveGradientsOutsideSymbol: false\n};\n\n/**\n * @param {*} arrayLike\n * @return {Array}\n */\nvar arrayFrom = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike, 0);\n};\n\nvar browser = {\n  isChrome: function () { return /chrome/i.test(navigator.userAgent); },\n  isFirefox: function () { return /firefox/i.test(navigator.userAgent); },\n\n  // https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx\n  isIE: function () { return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent); },\n  isEdge: function () { return /edge/i.test(navigator.userAgent); }\n};\n\n/**\n * @param {string} name\n * @param {*} data\n */\nvar dispatchEvent = function (name, data) {\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(name, false, false, data);\n  window.dispatchEvent(event);\n};\n\n/**\n * IE doesn't evaluate <style> tags in SVGs that are dynamically added to the page.\n * This trick will trigger IE to read and use any existing SVG <style> tags.\n * @see https://github.com/iconic/SVGInjector/issues/23\n * @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n *\n * @param {Element} node DOM Element to search <style> tags in\n * @return {Array<HTMLStyleElement>}\n */\nvar evalStylesIEWorkaround = function (node) {\n  var updatedNodes = [];\n\n  arrayFrom(node.querySelectorAll('style'))\n    .forEach(function (style) {\n      style.textContent += '';\n      updatedNodes.push(style);\n    });\n\n  return updatedNodes;\n};\n\n/**\n * @param {string} [url] If not provided - current URL will be used\n * @return {string}\n */\nvar getUrlWithoutFragment = function (url) {\n  return (url || window.location.href).split('#')[0];\n};\n\n/* global angular */\n/**\n * @param {string} eventName\n */\nvar locationChangeAngularEmitter = function (eventName) {\n  angular.module('ng').run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$locationChangeSuccess', function (e, newUrl, oldUrl) {\n      dispatchEvent(eventName, { oldUrl: oldUrl, newUrl: newUrl });\n    });\n  }]);\n};\n\nvar defaultSelector = 'linearGradient, radialGradient, pattern, mask, clipPath';\n\n/**\n * @param {Element} svg\n * @param {string} [selector]\n * @return {Element}\n */\nvar moveGradientsOutsideSymbol = function (svg, selector) {\n  if ( selector === void 0 ) selector = defaultSelector;\n\n  arrayFrom(svg.querySelectorAll('symbol')).forEach(function (symbol) {\n    arrayFrom(symbol.querySelectorAll(selector)).forEach(function (node) {\n      symbol.parentNode.insertBefore(node, symbol);\n    });\n  });\n  return svg;\n};\n\n/**\n * @param {NodeList} nodes\n * @param {Function} [matcher]\n * @return {Attr[]}\n */\nfunction selectAttributes(nodes, matcher) {\n  var attrs = arrayFrom(nodes).reduce(function (acc, node) {\n    if (!node.attributes) {\n      return acc;\n    }\n\n    var arrayfied = arrayFrom(node.attributes);\n    var matched = matcher ? arrayfied.filter(matcher) : arrayfied;\n    return acc.concat(matched);\n  }, []);\n\n  return attrs;\n}\n\n/**\n * @param {NodeList|Node} nodes\n * @param {boolean} [clone=true]\n * @return {string}\n */\n\nvar xLinkNS = namespaces_1.xlink.uri;\nvar xLinkAttrName = 'xlink:href';\n\n// eslint-disable-next-line no-useless-escape\nvar specialUrlCharsPattern = /[{}|\\\\\\^\\[\\]`\"<>]/g;\n\nfunction encoder(url) {\n  return url.replace(specialUrlCharsPattern, function (match) {\n    return (\"%\" + (match[0].charCodeAt(0).toString(16).toUpperCase()));\n  });\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * @param {NodeList} nodes\n * @param {string} startsWith\n * @param {string} replaceWith\n * @return {NodeList}\n */\nfunction updateReferences(nodes, startsWith, replaceWith) {\n  arrayFrom(nodes).forEach(function (node) {\n    var href = node.getAttribute(xLinkAttrName);\n    if (href && href.indexOf(startsWith) === 0) {\n      var newUrl = href.replace(startsWith, replaceWith);\n      node.setAttributeNS(xLinkNS, xLinkAttrName, newUrl);\n    }\n  });\n\n  return nodes;\n}\n\n/**\n * List of SVG attributes to update url() target in them\n */\nvar attList = [\n  'clipPath',\n  'colorProfile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'mask',\n  'stroke',\n  'style'\n];\n\nvar attSelector = attList.map(function (attr) { return (\"[\" + attr + \"]\"); }).join(',');\n\n/**\n * Update URLs in svg image (like `fill=\"url(...)\"`) and update referencing elements\n * @param {Element} svg\n * @param {NodeList} references\n * @param {string|RegExp} startsWith\n * @param {string} replaceWith\n * @return {void}\n *\n * @example\n * const sprite = document.querySelector('svg.sprite');\n * const usages = document.querySelectorAll('use');\n * updateUrls(sprite, usages, '#', 'prefix#');\n */\nvar updateUrls = function (svg, references, startsWith, replaceWith) {\n  var startsWithEncoded = encoder(startsWith);\n  var replaceWithEncoded = encoder(replaceWith);\n\n  var nodes = svg.querySelectorAll(attSelector);\n  var attrs = selectAttributes(nodes, function (ref) {\n    var localName = ref.localName;\n    var value = ref.value;\n\n    return attList.indexOf(localName) !== -1 && value.indexOf((\"url(\" + startsWithEncoded)) !== -1;\n  });\n\n  attrs.forEach(function (attr) { return attr.value = attr.value.replace(new RegExp(escapeRegExp(startsWithEncoded), 'g'), replaceWithEncoded); });\n  updateReferences(references, startsWithEncoded, replaceWithEncoded);\n};\n\n/**\n * Internal emitter events\n * @enum\n * @private\n */\nvar Events = {\n  MOUNT: 'mount',\n  SYMBOL_MOUNT: 'symbol_mount'\n};\n\nvar BrowserSprite = (function (Sprite$$1) {\n  function BrowserSprite(cfg) {\n    var this$1 = this;\n    if ( cfg === void 0 ) cfg = {};\n\n    Sprite$$1.call(this, deepmerge(defaultConfig$1, cfg));\n\n    var emitter = mitt();\n    this._emitter = emitter;\n    this.node = null;\n\n    var ref = this;\n    var config = ref.config;\n\n    if (config.autoConfigure) {\n      this._autoConfigure(cfg);\n    }\n\n    if (config.syncUrlsWithBaseTag) {\n      var baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n      emitter.on(Events.MOUNT, function () { return this$1.updateUrls('#', baseUrl); });\n    }\n\n    var handleLocationChange = this._handleLocationChange.bind(this);\n    this._handleLocationChange = handleLocationChange;\n\n    // Provide way to update sprite urls externally via dispatching custom window event\n    if (config.listenLocationChangeEvent) {\n      window.addEventListener(config.locationChangeEvent, handleLocationChange);\n    }\n\n    // Emit location change event in Angular automatically\n    if (config.locationChangeAngularEmitter) {\n      locationChangeAngularEmitter(config.locationChangeEvent);\n    }\n\n    // After sprite mounted\n    emitter.on(Events.MOUNT, function (spriteNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(spriteNode);\n      }\n    });\n\n    // After symbol mounted into sprite\n    emitter.on(Events.SYMBOL_MOUNT, function (symbolNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(symbolNode.parentNode);\n      }\n\n      if (browser.isIE() || browser.isEdge()) {\n        evalStylesIEWorkaround(symbolNode);\n      }\n    });\n  }\n\n  if ( Sprite$$1 ) BrowserSprite.__proto__ = Sprite$$1;\n  BrowserSprite.prototype = Object.create( Sprite$$1 && Sprite$$1.prototype );\n  BrowserSprite.prototype.constructor = BrowserSprite;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  /**\n   * @return {boolean}\n   */\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * Automatically configure following options\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @param {Object} cfg\n   * @private\n   */\n  BrowserSprite.prototype._autoConfigure = function _autoConfigure (cfg) {\n    var ref = this;\n    var config = ref.config;\n\n    if (typeof cfg.syncUrlsWithBaseTag === 'undefined') {\n      config.syncUrlsWithBaseTag = typeof document.getElementsByTagName('base')[0] !== 'undefined';\n    }\n\n    if (typeof cfg.locationChangeAngularEmitter === 'undefined') {\n        config.locationChangeAngularEmitter = typeof window.angular !== 'undefined';\n    }\n\n    if (typeof cfg.moveGradientsOutsideSymbol === 'undefined') {\n      config.moveGradientsOutsideSymbol = browser.isFirefox();\n    }\n  };\n\n  /**\n   * @param {Event} event\n   * @param {Object} event.detail\n   * @param {string} event.detail.oldUrl\n   * @param {string} event.detail.newUrl\n   * @private\n   */\n  BrowserSprite.prototype._handleLocationChange = function _handleLocationChange (event) {\n    var ref = event.detail;\n    var oldUrl = ref.oldUrl;\n    var newUrl = ref.newUrl;\n    this.updateUrls(oldUrl, newUrl);\n  };\n\n  /**\n   * Add new symbol. If symbol with the same id exists it will be replaced.\n   * If sprite already mounted - `symbol.mount(sprite.node)` will be called.\n   * @fires Events#SYMBOL_MOUNT\n   * @param {BrowserSpriteSymbol} symbol\n   * @return {boolean} `true` - symbol was added, `false` - replaced\n   */\n  BrowserSprite.prototype.add = function add (symbol) {\n    var sprite = this;\n    var isNewSymbol = Sprite$$1.prototype.add.call(this, symbol);\n\n    if (this.isMounted && isNewSymbol) {\n      symbol.mount(sprite.node);\n      this._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    }\n\n    return isNewSymbol;\n  };\n\n  /**\n   * Attach to existing DOM node\n   * @param {string|Element} target\n   * @return {Element|null} attached DOM Element. null if node to attach not found.\n   */\n  BrowserSprite.prototype.attach = function attach (target) {\n    var this$1 = this;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    /** @type Element */\n    var node = typeof target === 'string' ? document.querySelector(target) : target;\n    sprite.node = node;\n\n    // Already added symbols needs to be mounted\n    this.symbols.forEach(function (symbol) {\n      symbol.mount(sprite.node);\n      this$1._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    });\n\n    // Create symbols from existing DOM nodes, add and mount them\n    arrayFrom(node.querySelectorAll('symbol'))\n      .forEach(function (symbolNode) {\n        var symbol = BrowserSpriteSymbol.createFromExistingNode(symbolNode);\n        symbol.node = symbolNode; // hack to prevent symbol mounting to sprite when adding\n        sprite.add(symbol);\n      });\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  BrowserSprite.prototype.destroy = function destroy () {\n    var ref = this;\n    var config = ref.config;\n    var symbols = ref.symbols;\n    var _emitter = ref._emitter;\n\n    symbols.forEach(function (s) { return s.destroy(); });\n\n    _emitter.off('*');\n    window.removeEventListener(config.locationChangeEvent, this._handleLocationChange);\n\n    if (this.isMounted) {\n      this.unmount();\n    }\n  };\n\n  /**\n   * @fires Events#MOUNT\n   * @param {string|Element} [target]\n   * @param {boolean} [prepend=false]\n   * @return {Element|null} rendered sprite node. null if mount node not found.\n   */\n  BrowserSprite.prototype.mount = function mount (target, prepend) {\n    if ( target === void 0 ) target = this.config.mountTo;\n    if ( prepend === void 0 ) prepend = false;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    var mountNode = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = sprite.render();\n    this.node = node;\n\n    if (prepend && mountNode.childNodes[0]) {\n      mountNode.insertBefore(node, mountNode.childNodes[0]);\n    } else {\n      mountNode.appendChild(node);\n    }\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSprite.prototype.render = function render () {\n    return parse(this.stringify());\n  };\n\n  /**\n   * Detach sprite from the DOM\n   */\n  BrowserSprite.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  /**\n   * Update URLs in sprite and usage elements\n   * @param {string} oldUrl\n   * @param {string} newUrl\n   * @return {boolean} `true` - URLs was updated, `false` - sprite is not mounted\n   */\n  BrowserSprite.prototype.updateUrls = function updateUrls$1 (oldUrl, newUrl) {\n    if (!this.isMounted) {\n      return false;\n    }\n\n    var usages = document.querySelectorAll(this.config.usagesToUpdate);\n\n    updateUrls(\n      this.node,\n      usages,\n      ((getUrlWithoutFragment(oldUrl)) + \"#\"),\n      ((getUrlWithoutFragment(newUrl)) + \"#\")\n    );\n\n    return true;\n  };\n\n  Object.defineProperties( BrowserSprite.prototype, prototypeAccessors );\n\n  return BrowserSprite;\n}(Sprite));\n\nvar ready$1 = createCommonjsModule(function (module) {\n/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  { module.exports = definition(); }\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);\n\n\n  if (!loaded)\n  { doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener);\n    loaded = 1;\n    while (listener = fns.shift()) { listener(); }\n  }); }\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn);\n  }\n\n});\n});\n\nvar spriteNodeId = '__SVG_SPRITE_NODE__';\nvar spriteGlobalVarName = '__SVG_SPRITE__';\nvar isSpriteExists = !!window[spriteGlobalVarName];\n\n// eslint-disable-next-line import/no-mutable-exports\nvar sprite;\n\nif (isSpriteExists) {\n  sprite = window[spriteGlobalVarName];\n} else {\n  sprite = new BrowserSprite({\n    attrs: {\n      id: spriteNodeId,\n      'aria-hidden': 'true'\n    }\n  });\n  window[spriteGlobalVarName] = sprite;\n}\n\nvar loadSprite = function () {\n  /**\n   * Check for page already contains sprite node\n   * If found - attach to and reuse it's content\n   * If not - render and mount the new sprite\n   */\n  var existing = document.getElementById(spriteNodeId);\n\n  if (existing) {\n    sprite.attach(existing);\n  } else {\n    sprite.mount(document.body, true);\n  }\n};\n\nif (document.body) {\n  loadSprite();\n} else {\n  ready$1(loadSprite);\n}\n\nvar sprite$1 = sprite;\n\nreturn sprite$1;\n\n})));\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = function (fn) {\n  return NATIVE_BIND ? uncurryThisWithBind(fn) : function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nvar toString = uncurryThisRaw({}.toString);\nvar stringSlice = uncurryThisRaw(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var classofRaw = require('../internals/classof-raw');\nvar uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThisRaw(fn);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.25.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","var isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export default {\n  GLOBAL: {\n    HIDE: '__react_tooltip_hide_event',\n    REBUILD: '__react_tooltip_rebuild_event',\n    SHOW: '__react_tooltip_show_event'\n  }\n};\n","/**\n * Static methods for react-tooltip\n */\nimport CONSTANT from '../constant';\n\nconst dispatchGlobalEvent = (eventName, opts) => {\n  // Compatible with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent(eventName, false, true, opts);\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport default function(target) {\n  /**\n   * Hide all tooltip\n   * @trigger ReactTooltip.hide()\n   */\n  target.hide = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.HIDE, { target });\n  };\n\n  /**\n   * Rebuild all tooltip\n   * @trigger ReactTooltip.rebuild()\n   */\n  target.rebuild = () => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.REBUILD);\n  };\n\n  /**\n   * Show specific tooltip\n   * @trigger ReactTooltip.show()\n   */\n  target.show = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.SHOW, { target });\n  };\n\n  target.prototype.globalRebuild = function() {\n    if (this.mount) {\n      this.unbindListener();\n      this.bindListener();\n    }\n  };\n\n  target.prototype.globalShow = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      // Create a fake event, specific show will limit the type to `solid`\n      // only `float` type cares e.clientX e.clientY\n      this.showTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        true\n      );\n    }\n  };\n\n  target.prototype.globalHide = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      this.hideTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        hasTarget\n      );\n    }\n  };\n}\n","/**\n * Custom events to control showing and hiding of tooltip\n *\n * @attributes\n * - `event` {String}\n * - `eventOff` {String}\n */\n\nexport const checkStatus = function(dataEventOff, e) {\n  const { show } = this.state;\n  const { id } = this.props;\n  const isCapture = this.isCapture(e.currentTarget);\n  const currentItem = e.currentTarget.getAttribute('currentItem');\n\n  if (!isCapture) e.stopPropagation();\n  if (show && currentItem === 'true') {\n    if (!dataEventOff) this.hideTooltip(e);\n  } else {\n    e.currentTarget.setAttribute('currentItem', 'true');\n    setUntargetItems(e.currentTarget, this.getTargetArray(id));\n    this.showTooltip(e);\n  }\n};\n\nconst setUntargetItems = function(currentTarget, targetArray) {\n  for (let i = 0; i < targetArray.length; i++) {\n    if (currentTarget !== targetArray[i]) {\n      targetArray[i].setAttribute('currentItem', 'false');\n    } else {\n      targetArray[i].setAttribute('currentItem', 'true');\n    }\n  }\n};\n\nconst customListeners = {\n  id: '9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf',\n  set(target, event, listener) {\n    if (this.id in target) {\n      const map = target[this.id];\n      map[event] = listener;\n    } else {\n      // this is workaround for WeakMap, which is not supported in older browsers, such as IE\n      Object.defineProperty(target, this.id, {\n        configurable: true,\n        value: { [event]: listener }\n      });\n    }\n  },\n  get(target, event) {\n    const map = target[this.id];\n    if (map !== undefined) {\n      return map[event];\n    }\n  }\n};\n\nexport default function(target) {\n  target.prototype.isCustomEvent = function(ele) {\n    const { event } = this.state;\n    return event || !!ele.getAttribute('data-event');\n  };\n\n  /* Bind listener for custom event */\n  target.prototype.customBindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = ele.getAttribute('data-event') || event;\n    const dataEventOff = ele.getAttribute('data-event-off') || eventOff;\n\n    dataEvent.split(' ').forEach(event => {\n      ele.removeEventListener(event, customListeners.get(ele, event));\n      const customListener = checkStatus.bind(this, dataEventOff);\n      customListeners.set(ele, event, customListener);\n      ele.addEventListener(event, customListener, false);\n    });\n    if (dataEventOff) {\n      dataEventOff.split(' ').forEach(event => {\n        ele.removeEventListener(event, this.hideTooltip);\n        ele.addEventListener(event, this.hideTooltip, false);\n      });\n    }\n  };\n\n  /* Unbind listener for custom event */\n  target.prototype.customUnbindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = event || ele.getAttribute('data-event');\n    const dataEventOff = eventOff || ele.getAttribute('data-event-off');\n\n    ele.removeEventListener(dataEvent, customListeners.get(ele, event));\n    if (dataEventOff) ele.removeEventListener(dataEventOff, this.hideTooltip);\n  };\n}\n","/**\n * Util method to get effect\n */\nimport { checkStatus } from './customEvent';\n\nconst makeProxy = (e) => {\n  const proxy = {};\n  for (const key in e) {\n    if (typeof e[key] === 'function') {\n      proxy[key] = e[key].bind(e);\n    } else {\n      proxy[key] = e[key];\n    }\n  }\n  return proxy;\n};\n\nconst bodyListener = function (callback, options, e) {\n  const { respectEffect = false, customEvent = false } = options;\n  const { id } = this.props;\n\n  let tip = null;\n  let forId;\n  let target = e.target;\n  let lastTarget;\n  // walk up parent chain until tip is found\n  // there is no match if parent visible area is matched by mouse position, so some corner cases might not work as expected\n  while (tip === null && target !== null) {\n    lastTarget = target;\n    tip = target.getAttribute('data-tip') || null;\n    forId = target.getAttribute('data-for') || null;\n    target = target.parentElement;\n  }\n\n  target = lastTarget || e.target;\n\n  if (this.isCustomEvent(target) && !customEvent) {\n    return;\n  }\n\n  const isTargetBelongsToTooltip =\n    (id == null && forId == null) || forId === id;\n\n  if (\n    tip != null &&\n    (!respectEffect || this.getEffect(target) === 'float') &&\n    isTargetBelongsToTooltip\n  ) {\n    const proxy = makeProxy(e);\n    proxy.currentTarget = target;\n    callback(proxy);\n  }\n};\n\nconst findCustomEvents = (targetArray, dataAttribute) => {\n  const events = {};\n  targetArray.forEach((target) => {\n    const event = target.getAttribute(dataAttribute);\n    if (event) event.split(' ').forEach((event) => (events[event] = true));\n  });\n\n  return events;\n};\n\nconst getBody = () => document.getElementsByTagName('body')[0];\n\nexport default function (target) {\n  target.prototype.isBodyMode = function () {\n    return !!this.props.bodyMode;\n  };\n\n  target.prototype.bindBodyListener = function (targetArray) {\n    const { event, eventOff, possibleCustomEvents, possibleCustomEventsOff } =\n      this.state;\n    const body = getBody();\n\n    const customEvents = findCustomEvents(targetArray, 'data-event');\n    const customEventsOff = findCustomEvents(targetArray, 'data-event-off');\n\n    if (event != null) customEvents[event] = true;\n    if (eventOff != null) customEventsOff[eventOff] = true;\n    possibleCustomEvents\n      .split(' ')\n      .forEach((event) => (customEvents[event] = true));\n    possibleCustomEventsOff\n      .split(' ')\n      .forEach((event) => (customEventsOff[event] = true));\n\n    this.unbindBodyListener(body);\n\n    const listeners = (this.bodyModeListeners = {});\n    if (event == null) {\n      listeners.mouseover = bodyListener.bind(this, this.showTooltip, {});\n      listeners.mousemove = bodyListener.bind(this, this.updateTooltip, {\n        respectEffect: true\n      });\n      listeners.mouseout = bodyListener.bind(this, this.hideTooltip, {});\n    }\n\n    for (const event in customEvents) {\n      listeners[event] = bodyListener.bind(\n        this,\n        (e) => {\n          const targetEventOff =\n            e.currentTarget.getAttribute('data-event-off') || eventOff;\n          checkStatus.call(this, targetEventOff, e);\n        },\n        { customEvent: true }\n      );\n    }\n    for (const event in customEventsOff) {\n      listeners[event] = bodyListener.bind(this, this.hideTooltip, {\n        customEvent: true\n      });\n    }\n    for (const event in listeners) {\n      body.addEventListener(event, listeners[event]);\n    }\n  };\n\n  target.prototype.unbindBodyListener = function (body) {\n    body = body || getBody();\n\n    const listeners = this.bodyModeListeners;\n    for (const event in listeners) {\n      body.removeEventListener(event, listeners[event]);\n    }\n  };\n}\n","/**\n * Calculate the position of tooltip\n *\n * @params\n * - `e` {Event} the event of current mouse\n * - `target` {Element} the currentTarget of the event\n * - `node` {DOM} the react-tooltip object\n * - `place` {String} top / right / bottom / left\n * - `effect` {String} float / solid\n * - `offset` {Object} the offset to default position\n *\n * @return {Object}\n * - `isNewState` {Bool} required\n * - `newState` {Object}\n * - `position` {Object} {left: {Number}, top: {Number}}\n */\nexport default function (e, target, node, place, desiredPlace, effect, offset) {\n  const { width: tipWidth, height: tipHeight } = getDimensions(node);\n\n  const { width: targetWidth, height: targetHeight } = getDimensions(target);\n\n  const { mouseX, mouseY } = getCurrentOffset(e, target, effect);\n  const defaultOffset = getDefaultPosition(\n    effect,\n    targetWidth,\n    targetHeight,\n    tipWidth,\n    tipHeight\n  );\n  const { extraOffsetX, extraOffsetY } = calculateOffset(offset);\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  const { parentTop, parentLeft } = getParent(node);\n\n  // Get the edge offset of the tooltip\n  const getTipOffsetLeft = (place) => {\n    const offsetX = defaultOffset[place].l;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetRight = (place) => {\n    const offsetX = defaultOffset[place].r;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetTop = (place) => {\n    const offsetY = defaultOffset[place].t;\n    return mouseY + offsetY + extraOffsetY;\n  };\n  const getTipOffsetBottom = (place) => {\n    const offsetY = defaultOffset[place].b;\n    return mouseY + offsetY + extraOffsetY;\n  };\n\n  //\n  // Functions to test whether the tooltip's sides are inside\n  // the client window for a given orientation p\n  //\n  //  _____________\n  // |             | <-- Right side\n  // | p = 'left'  |\\\n  // |             |/  |\\\n  // |_____________|   |_\\  <-- Mouse\n  //      / \\           |\n  //       |\n  //       |\n  //  Bottom side\n  //\n  const outsideLeft = (p) => getTipOffsetLeft(p) < 0;\n  const outsideRight = (p) => getTipOffsetRight(p) > windowWidth;\n  const outsideTop = (p) => getTipOffsetTop(p) < 0;\n  const outsideBottom = (p) => getTipOffsetBottom(p) > windowHeight;\n\n  // Check whether the tooltip with orientation p is completely inside the client window\n  const outside = (p) =>\n    outsideLeft(p) || outsideRight(p) || outsideTop(p) || outsideBottom(p);\n  const inside = (p) => !outside(p);\n\n  const placeIsInside = {\n    top: inside('top'),\n    bottom: inside('bottom'),\n    left: inside('left'),\n    right: inside('right')\n  };\n\n  function choose() {\n    const allPlaces = desiredPlace\n      .split(',')\n      .concat(place, ['top', 'bottom', 'left', 'right']);\n    for (const d of allPlaces) {\n      if (placeIsInside[d]) return d;\n    }\n    // if nothing is inside, just use the old place.\n    return place;\n  }\n\n  const chosen = choose();\n\n  let isNewState = false;\n  let newPlace;\n  if (chosen && chosen !== place) {\n    isNewState = true;\n    newPlace = chosen;\n  }\n\n  if (isNewState) {\n    return {\n      isNewState: true,\n      newState: { place: newPlace }\n    };\n  }\n\n  return {\n    isNewState: false,\n    position: {\n      left: parseInt(getTipOffsetLeft(place) - parentLeft, 10),\n      top: parseInt(getTipOffsetTop(place) - parentTop, 10)\n    }\n  };\n}\n\nconst getDimensions = (node) => {\n  const { height, width } = node.getBoundingClientRect();\n  return {\n    height: parseInt(height, 10),\n    width: parseInt(width, 10)\n  };\n};\n\n// Get current mouse offset\nconst getCurrentOffset = (e, currentTarget, effect) => {\n  const boundingClientRect = currentTarget.getBoundingClientRect();\n  const targetTop = boundingClientRect.top;\n  const targetLeft = boundingClientRect.left;\n  const { width: targetWidth, height: targetHeight } =\n    getDimensions(currentTarget);\n\n  if (effect === 'float') {\n    return {\n      mouseX: e.clientX,\n      mouseY: e.clientY\n    };\n  }\n  return {\n    mouseX: targetLeft + targetWidth / 2,\n    mouseY: targetTop + targetHeight / 2\n  };\n};\n\n// List all possibility of tooltip final offset\n// This is useful in judging if it is necessary for tooltip to switch position when out of window\nconst getDefaultPosition = (\n  effect,\n  targetWidth,\n  targetHeight,\n  tipWidth,\n  tipHeight\n) => {\n  let top;\n  let right;\n  let bottom;\n  let left;\n  const disToMouse = 3;\n  const triangleHeight = 2;\n  const cursorHeight = 12; // Optimize for float bottom only, cause the cursor will hide the tooltip\n\n  if (effect === 'float') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(tipHeight + disToMouse + triangleHeight),\n      b: -disToMouse\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: disToMouse + cursorHeight,\n      b: tipHeight + disToMouse + triangleHeight + cursorHeight\n    };\n    left = {\n      l: -(tipWidth + disToMouse + triangleHeight),\n      r: -disToMouse,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: disToMouse,\n      r: tipWidth + disToMouse + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  } else if (effect === 'solid') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(targetHeight / 2 + tipHeight + triangleHeight),\n      b: -(targetHeight / 2)\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: targetHeight / 2,\n      b: targetHeight / 2 + tipHeight + triangleHeight\n    };\n    left = {\n      l: -(tipWidth + targetWidth / 2 + triangleHeight),\n      r: -(targetWidth / 2),\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: targetWidth / 2,\n      r: tipWidth + targetWidth / 2 + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  }\n\n  return { top, bottom, left, right };\n};\n\n// Consider additional offset into position calculation\nconst calculateOffset = (offset) => {\n  let extraOffsetX = 0;\n  let extraOffsetY = 0;\n\n  if (Object.prototype.toString.apply(offset) === '[object String]') {\n    offset = JSON.parse(offset.toString().replace(/'/g, '\"'));\n  }\n  for (const key in offset) {\n    if (key === 'top') {\n      extraOffsetY -= parseInt(offset[key], 10);\n    } else if (key === 'bottom') {\n      extraOffsetY += parseInt(offset[key], 10);\n    } else if (key === 'left') {\n      extraOffsetX -= parseInt(offset[key], 10);\n    } else if (key === 'right') {\n      extraOffsetX += parseInt(offset[key], 10);\n    }\n  }\n\n  return { extraOffsetX, extraOffsetY };\n};\n\n// Get the offset of the parent elements\nconst getParent = (currentTarget) => {\n  let currentParent = currentTarget;\n  while (currentParent) {\n    const computedStyle = window.getComputedStyle(currentParent);\n    // transform and will-change: transform change the containing block\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_Block\n    if (\n      computedStyle.getPropertyValue('transform') !== 'none' ||\n      computedStyle.getPropertyValue('will-change') === 'transform'\n    )\n      break;\n    currentParent = currentParent.parentElement;\n  }\n\n  const parentTop =\n    (currentParent && currentParent.getBoundingClientRect().top) || 0;\n  const parentLeft =\n    (currentParent && currentParent.getBoundingClientRect().left) || 0;\n\n  return { parentTop, parentLeft };\n};\n","/**\n * To get the tooltip content\n * it may comes from data-tip or this.props.children\n * it should support multiline\n *\n * @params\n * - `tip` {String} value of data-tip\n * - `children` {ReactElement} this.props.children\n * - `multiline` {Any} could be Bool(true/false) or String('true'/'false')\n *\n * @return\n * - String or react component\n */\nimport React from 'react';\n\nexport default function TipContent(tip, children, getContent, multiline) {\n  if (children) return children;\n  if (getContent !== undefined && getContent !== null) return getContent; // getContent can be 0, '', etc.\n  if (getContent === null) return null; // Tip not exist and children is null or undefined\n\n  const regexp = /<br\\s*\\/?>/;\n  if (!multiline || multiline === 'false' || !regexp.test(tip)) {\n    // No trim(), so that user can keep their input\n    return tip;\n  }\n\n  // Multiline tooltip content\n  return tip.split(regexp).map((d, i) => {\n    return (\n      <span key={i} className=\"multi-line\">\n        {d}\n      </span>\n    );\n  });\n}\n","/**\n * Support aria- and role in ReactTooltip\n *\n * @params props {Object}\n * @return {Object}\n */\nexport function parseAria(props) {\n  const ariaObj = {};\n  Object.keys(props)\n    .filter(prop => {\n      // aria-xxx and role is acceptable\n      return /(^aria-\\w+$|^role$)/.test(prop);\n    })\n    .forEach(prop => {\n      ariaObj[prop] = props[prop];\n    });\n\n  return ariaObj;\n}\n","/**\n * Convert nodelist to array\n * @see https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/core/createArrayFromMixed.js#L24\n * NodeLists are functions in Safari\n */\n\nexport default function(nodeList) {\n  const length = nodeList.length;\n  if (nodeList.hasOwnProperty) {\n    return Array.prototype.slice.call(nodeList);\n  }\n  return new Array(length).fill().map(index => nodeList[index]);\n}\n","/**\n * Default pop-up style values (text color, background color).\n */\nconst defaultColors = {\n  dark: {\n    text: '#fff',\n    background: '#222',\n    border: 'transparent',\n    arrow: '#222'\n  },\n  success: {\n    text: '#fff',\n    background: '#8DC572',\n    border: 'transparent',\n    arrow: '#8DC572'\n  },\n  warning: {\n    text: '#fff',\n    background: '#F0AD4E',\n    border: 'transparent',\n    arrow: '#F0AD4E'\n  },\n  error: {\n    text: '#fff',\n    background: '#BE6464',\n    border: 'transparent',\n    arrow: '#BE6464'\n  },\n  info: {\n    text: '#fff',\n    background: '#337AB7',\n    border: 'transparent',\n    arrow: '#337AB7'\n  },\n  light: {\n    text: '#222',\n    background: '#fff',\n    border: 'transparent',\n    arrow: '#fff'\n  }\n};\n\nexport function getDefaultPopupColors(type) {\n  return defaultColors[type] ? { ...defaultColors[type] } : undefined;\n}\n\nexport const DEFAULT_PADDING = '8px 21px';\n\nexport const DEFAULT_RADIUS = {\n  tooltip: 3,\n  arrow: 0\n};\n","import {\n  getDefaultPopupColors,\n  DEFAULT_PADDING,\n  DEFAULT_RADIUS\n} from './defaultStyles';\n\n/**\n * Generates the specific tooltip style for use on render.\n */\nexport function generateTooltipStyle(\n  uuid,\n  customColors,\n  type,\n  hasBorder,\n  padding,\n  radius\n) {\n  return generateStyle(\n    uuid,\n    getPopupColors(customColors, type, hasBorder),\n    padding,\n    radius\n  );\n}\n\n/**\n * Generates the tooltip style rules based on the element-specified \"data-type\" property.\n */\nfunction generateStyle(\n  uuid,\n  colors,\n  padding = DEFAULT_PADDING,\n  radius = DEFAULT_RADIUS\n) {\n  const textColor = colors.text;\n  const backgroundColor = colors.background;\n  const borderColor = colors.border;\n  const arrowColor = colors.arrow;\n  const arrowRadius = radius.arrow;\n  const tooltipRadius = radius.tooltip;\n\n  return `\n  \t.${uuid} {\n\t    color: ${textColor};\n\t    background: ${backgroundColor};\n\t    border: 1px solid ${borderColor};\n\t    border-radius: ${tooltipRadius}px;\n\t    padding: ${padding};\n  \t}\n\n  \t.${uuid}.place-top {\n        margin-top: -10px;\n    }\n    .${uuid}.place-top::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: 2;\n        width: 20px;\n        height: 12px;\n    }\n    .${uuid}.place-top::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(135deg);\n    }\n\n    .${uuid}.place-bottom {\n        margin-top: 10px;\n    }\n    .${uuid}.place-bottom::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 18px;\n        height: 10px;\n    }\n    .${uuid}.place-bottom::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        top: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-left {\n        margin-left: -10px;\n    }\n    .${uuid}.place-left::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-left::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        right: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-right {\n        margin-left: 10px;\n    }\n    .${uuid}.place-right::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-right::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        left: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(-135deg);\n    }\n  `;\n}\n\nfunction getPopupColors(customColors, type, hasBorder) {\n  const textColor = customColors.text;\n  const backgroundColor = customColors.background;\n  const borderColor = customColors.border;\n  const arrowColor = customColors.arrow\n    ? customColors.arrow\n    : customColors.background;\n\n  const colors = getDefaultPopupColors(type);\n\n  if (textColor) {\n    colors.text = textColor;\n  }\n\n  if (backgroundColor) {\n    colors.background = backgroundColor;\n  }\n\n  if (hasBorder) {\n    if (borderColor) {\n      colors.border = borderColor;\n    } else {\n      colors.border = type === 'light' ? 'black' : 'white';\n    }\n  }\n\n  if (arrowColor) {\n    colors.arrow = arrowColor;\n  }\n\n  return colors;\n}\n","/* eslint-disable no-unused-vars, dot-notation */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/* Decorators */\nimport staticMethods from './decorators/staticMethods';\nimport windowListener from './decorators/windowListener';\nimport customEvent from './decorators/customEvent';\nimport isCapture from './decorators/isCapture';\nimport getEffect from './decorators/getEffect';\nimport bodyMode from './decorators/bodyMode';\nimport trackRemoval from './decorators/trackRemoval';\n\n/* Utils */\nimport getPosition from './utils/getPosition';\nimport getTipContent from './utils/getTipContent';\nimport { parseAria } from './utils/aria';\nimport nodeListToArray from './utils/nodeListToArray';\nimport { generateUUID } from './utils/uuid';\n\n/* CSS */\nimport baseCss from './index.scss';\nimport { generateTooltipStyle } from './decorators/styler';\n\n/* Polyfill */\nimport 'core-js/modules/es.array.find';\n\n@staticMethods\n@windowListener\n@customEvent\n@isCapture\n@getEffect\n@bodyMode\n@trackRemoval\nclass ReactTooltip extends React.Component {\n  static get propTypes() {\n    return {\n      uuid: PropTypes.string,\n      children: PropTypes.any,\n      place: PropTypes.string,\n      type: PropTypes.string,\n      effect: PropTypes.string,\n      offset: PropTypes.object,\n      padding: PropTypes.string,\n      multiline: PropTypes.bool,\n      border: PropTypes.bool,\n      borderClass: PropTypes.string,\n      textColor: PropTypes.string,\n      backgroundColor: PropTypes.string,\n      borderColor: PropTypes.string,\n      arrowColor: PropTypes.string,\n      arrowRadius: PropTypes.string,\n      tooltipRadius: PropTypes.string,\n      insecure: PropTypes.bool,\n      class: PropTypes.string,\n      className: PropTypes.string,\n      id: PropTypes.string,\n      html: PropTypes.bool,\n      delayHide: PropTypes.number,\n      delayUpdate: PropTypes.number,\n      delayShow: PropTypes.number,\n      event: PropTypes.string,\n      eventOff: PropTypes.string,\n      isCapture: PropTypes.bool,\n      globalEventOff: PropTypes.string,\n      getContent: PropTypes.any,\n      afterShow: PropTypes.func,\n      afterHide: PropTypes.func,\n      overridePosition: PropTypes.func,\n      disable: PropTypes.bool,\n      scrollHide: PropTypes.bool,\n      resizeHide: PropTypes.bool,\n      wrapper: PropTypes.string,\n      bodyMode: PropTypes.bool,\n      possibleCustomEvents: PropTypes.string,\n      possibleCustomEventsOff: PropTypes.string,\n      clickable: PropTypes.bool,\n      disableInternalStyle: PropTypes.bool\n    };\n  }\n\n  static defaultProps = {\n    insecure: true,\n    resizeHide: true,\n    wrapper: 'div',\n    clickable: false\n  };\n\n  static supportedWrappers = ['div', 'span'];\n\n  static displayName = 'ReactTooltip';\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uuid: props.uuid || generateUUID(),\n      place: props.place || 'top', // Direction of tooltip\n      desiredPlace: props.place || 'top',\n      type: props.type || 'dark', // Color theme of tooltip\n      effect: props.effect || 'float', // float or fixed\n      show: false,\n      border: false,\n      borderClass: 'border',\n      customColors: {},\n      customRadius: {},\n      offset: {},\n      padding: props.padding,\n      extraClass: '',\n      html: false,\n      delayHide: 0,\n      delayShow: 0,\n      event: props.event || null,\n      eventOff: props.eventOff || null,\n      currentEvent: null, // Current mouse event\n      currentTarget: null, // Current target of mouse event\n      ariaProps: parseAria(props), // aria- and role attributes\n      isEmptyTip: false,\n      disable: false,\n      possibleCustomEvents: props.possibleCustomEvents || '',\n      possibleCustomEventsOff: props.possibleCustomEventsOff || '',\n      originTooltip: null,\n      isMultiline: false\n    };\n\n    this.bind([\n      'showTooltip',\n      'updateTooltip',\n      'hideTooltip',\n      'hideTooltipOnScroll',\n      'getTooltipContent',\n      'globalRebuild',\n      'globalShow',\n      'globalHide',\n      'onWindowResize',\n      'mouseOnToolTip'\n    ]);\n\n    this.mount = true;\n    this.delayShowLoop = null;\n    this.delayHideLoop = null;\n    this.delayReshow = null;\n    this.intervalUpdateContent = null;\n  }\n\n  /**\n   * For unify the bind and unbind listener\n   */\n  bind(methodArray) {\n    methodArray.forEach((method) => {\n      this[method] = this[method].bind(this);\n    });\n  }\n\n  componentDidMount() {\n    const { insecure, resizeHide, disableInternalStyle } = this.props;\n    this.mount = true;\n\n    this.bindListener(); // Bind listener for tooltip\n    this.bindWindowEvents(resizeHide); // Bind global event for static method\n\n    if (!disableInternalStyle) {\n      this.injectStyles(); // Inject styles for each DOM root having tooltip.\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { ariaProps } = prevState;\n    const newAriaProps = parseAria(nextProps);\n    const isChanged = Object.keys(newAriaProps).some((props) => {\n      return newAriaProps[props] !== ariaProps[props];\n    });\n    if (!isChanged) {\n      return null;\n    }\n    return {\n      ...prevState,\n      ariaProps: newAriaProps\n    };\n  }\n\n  componentWillUnmount() {\n    this.mount = false;\n\n    this.clearTimer();\n\n    this.unbindListener();\n    this.removeScrollListener(this.state.currentTarget);\n    this.unbindWindowEvents();\n  }\n\n  /* Look for the closest DOM root having tooltip and inject styles. */\n  injectStyles() {\n    const { tooltipRef } = this;\n    if (!tooltipRef) {\n      return;\n    }\n\n    let parentNode = tooltipRef.parentNode;\n    while (parentNode.parentNode) {\n      parentNode = parentNode.parentNode;\n    }\n\n    let domRoot;\n\n    switch (parentNode.constructor.name) {\n      case 'Document':\n      case 'HTMLDocument':\n      case undefined:\n        domRoot = parentNode.head;\n        break;\n      case 'ShadowRoot':\n      default:\n        domRoot = parentNode;\n        break;\n    }\n\n    // Prevent styles duplication.\n    if (!domRoot.querySelector('style[data-react-tooltip]')) {\n      const style = document.createElement('style');\n      style.textContent = baseCss;\n      style.setAttribute('data-react-tooltip', 'true');\n\n      domRoot.appendChild(style);\n    }\n  }\n\n  /**\n   * Return if the mouse is on the tooltip.\n   * @returns {boolean} true - mouse is on the tooltip\n   */\n  mouseOnToolTip() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      /* old IE or Firefox work around */\n      if (!this.tooltipRef.matches) {\n        /* old IE work around */\n        if (this.tooltipRef.msMatchesSelector) {\n          this.tooltipRef.matches = this.tooltipRef.msMatchesSelector;\n        } else {\n          /* old Firefox work around */\n          this.tooltipRef.matches = this.tooltipRef.mozMatchesSelector;\n        }\n      }\n      return this.tooltipRef.matches(':hover');\n    }\n    return false;\n  }\n\n  /**\n   * Pick out corresponded target elements\n   */\n  getTargetArray(id) {\n    let targetArray = [];\n    let selector;\n    if (!id) {\n      selector = '[data-tip]:not([data-for])';\n    } else {\n      const escaped = id.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"');\n      selector = `[data-tip][data-for=\"${escaped}\"]`;\n    }\n\n    // Scan document for shadow DOM elements\n    nodeListToArray(document.getElementsByTagName('*'))\n      .filter((element) => element.shadowRoot)\n      .forEach((element) => {\n        targetArray = targetArray.concat(\n          nodeListToArray(element.shadowRoot.querySelectorAll(selector))\n        );\n      });\n    return targetArray.concat(\n      nodeListToArray(document.querySelectorAll(selector))\n    );\n  }\n\n  /**\n   * Bind listener to the target elements\n   * These listeners used to trigger showing or hiding the tooltip\n   */\n  bindListener() {\n    const { id, globalEventOff, isCapture } = this.props;\n    const targetArray = this.getTargetArray(id);\n\n    targetArray.forEach((target) => {\n      if (target.getAttribute('currentItem') === null) {\n        target.setAttribute('currentItem', 'false');\n      }\n      this.unbindBasicListener(target);\n      if (this.isCustomEvent(target)) {\n        this.customUnbindListener(target);\n      }\n    });\n\n    if (this.isBodyMode()) {\n      this.bindBodyListener(targetArray);\n    } else {\n      targetArray.forEach((target) => {\n        const isCaptureMode = this.isCapture(target);\n        const effect = this.getEffect(target);\n        if (this.isCustomEvent(target)) {\n          this.customBindListener(target);\n          return;\n        }\n\n        target.addEventListener('mouseenter', this.showTooltip, isCaptureMode);\n        target.addEventListener('focus', this.showTooltip, isCaptureMode);\n        if (effect === 'float') {\n          target.addEventListener(\n            'mousemove',\n            this.updateTooltip,\n            isCaptureMode\n          );\n        }\n        target.addEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n        target.addEventListener('blur', this.hideTooltip, isCaptureMode);\n      });\n    }\n\n    // Global event to hide tooltip\n    if (globalEventOff) {\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n      window.addEventListener(globalEventOff, this.hideTooltip, isCapture);\n    }\n\n    // Track removal of targetArray elements from DOM\n    this.bindRemovalTracker();\n  }\n\n  /**\n   * Unbind listeners on target elements\n   */\n  unbindListener() {\n    const { id, globalEventOff } = this.props;\n    if (this.isBodyMode()) {\n      this.unbindBodyListener();\n    } else {\n      const targetArray = this.getTargetArray(id);\n      targetArray.forEach((target) => {\n        this.unbindBasicListener(target);\n        if (this.isCustomEvent(target)) this.customUnbindListener(target);\n      });\n    }\n\n    if (globalEventOff)\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n    this.unbindRemovalTracker();\n  }\n\n  /**\n   * Invoke this before bind listener and unmount the component\n   * it is necessary to invoke this even when binding custom event\n   * so that the tooltip can switch between custom and default listener\n   */\n  unbindBasicListener(target) {\n    const isCaptureMode = this.isCapture(target);\n    target.removeEventListener('mouseenter', this.showTooltip, isCaptureMode);\n    target.removeEventListener('mousemove', this.updateTooltip, isCaptureMode);\n    target.removeEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n  }\n\n  getTooltipContent() {\n    const { getContent, children } = this.props;\n\n    // Generate tooltip content\n    let content;\n    if (getContent) {\n      if (Array.isArray(getContent)) {\n        content = getContent[0] && getContent[0](this.state.originTooltip);\n      } else {\n        content = getContent(this.state.originTooltip);\n      }\n    }\n\n    return getTipContent(\n      this.state.originTooltip,\n      children,\n      content,\n      this.state.isMultiline\n    );\n  }\n\n  isEmptyTip(placeholder) {\n    return (\n      (typeof placeholder === 'string' && placeholder === '') ||\n      placeholder === null\n    );\n  }\n\n  /**\n   * When mouse enter, show the tooltip\n   */\n  showTooltip(e, isGlobalCall) {\n    if (!this.tooltipRef) {\n      return;\n    }\n\n    if (isGlobalCall) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement) return;\n    }\n    // Get the tooltip content\n    // calculate in this phrase so that tip width height can be detected\n    const { multiline, getContent } = this.props;\n    const originTooltip = e.currentTarget.getAttribute('data-tip');\n    const isMultiline =\n      e.currentTarget.getAttribute('data-multiline') || multiline || false;\n\n    // If it is focus event or called by ReactTooltip.show, switch to `solid` effect\n    const switchToSolid = e instanceof window.FocusEvent || isGlobalCall;\n\n    // if it needs to skip adding hide listener to scroll\n    let scrollHide = true;\n    if (e.currentTarget.getAttribute('data-scroll-hide')) {\n      scrollHide = e.currentTarget.getAttribute('data-scroll-hide') === 'true';\n    } else if (this.props.scrollHide != null) {\n      scrollHide = this.props.scrollHide;\n    }\n\n    // adding aria-describedby to target to make tooltips read by screen readers\n    if (e && e.currentTarget && e.currentTarget.setAttribute) {\n      e.currentTarget.setAttribute(\n        'aria-describedby',\n        this.props.id || this.state.uuid\n      );\n    }\n\n    // Make sure the correct place is set\n    const desiredPlace =\n      e.currentTarget.getAttribute('data-place') || this.props.place || 'top';\n    const effect =\n      (switchToSolid && 'solid') || this.getEffect(e.currentTarget);\n    const offset =\n      e.currentTarget.getAttribute('data-offset') || this.props.offset || {};\n    const result = getPosition(\n      e,\n      e.currentTarget,\n      this.tooltipRef,\n      desiredPlace.split(',')[0],\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        e,\n        e.currentTarget,\n        this.tooltipRef,\n        desiredPlace,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    const place = result.isNewState\n      ? result.newState.place\n      : desiredPlace.split(',')[0];\n\n    // To prevent previously created timers from triggering\n    this.clearTimer();\n\n    const target = e.currentTarget;\n\n    const reshowDelay = this.state.show\n      ? target.getAttribute('data-delay-update') || this.props.delayUpdate\n      : 0;\n\n    const self = this;\n\n    const updateState = function updateState() {\n      self.setState(\n        {\n          originTooltip: originTooltip,\n          isMultiline: isMultiline,\n          desiredPlace: desiredPlace,\n          place: place,\n          type: target.getAttribute('data-type') || self.props.type || 'dark',\n          customColors: {\n            text:\n              target.getAttribute('data-text-color') ||\n              self.props.textColor ||\n              null,\n            background:\n              target.getAttribute('data-background-color') ||\n              self.props.backgroundColor ||\n              null,\n            border:\n              target.getAttribute('data-border-color') ||\n              self.props.borderColor ||\n              null,\n            arrow:\n              target.getAttribute('data-arrow-color') ||\n              self.props.arrowColor ||\n              null\n          },\n          customRadius: {\n            tooltip:\n              target.getAttribute('data-tooltip-radius') ||\n              self.props.tooltipRadius ||\n              '3',\n            arrow:\n              target.getAttribute('data-arrow-radius') ||\n              self.props.arrowRadius ||\n              '0'\n          },\n          effect: effect,\n          offset: offset,\n          padding: target.getAttribute('data-padding') || self.props.padding,\n          html:\n            (target.getAttribute('data-html')\n              ? target.getAttribute('data-html') === 'true'\n              : self.props.html) || false,\n          delayShow:\n            target.getAttribute('data-delay-show') || self.props.delayShow || 0,\n          delayHide:\n            target.getAttribute('data-delay-hide') || self.props.delayHide || 0,\n          delayUpdate:\n            target.getAttribute('data-delay-update') ||\n            self.props.delayUpdate ||\n            0,\n          border:\n            (target.getAttribute('data-border')\n              ? target.getAttribute('data-border') === 'true'\n              : self.props.border) || false,\n          borderClass:\n            target.getAttribute('data-border-class') ||\n            self.props.borderClass ||\n            'border',\n          extraClass:\n            target.getAttribute('data-class') ||\n            self.props.class ||\n            self.props.className ||\n            '',\n          disable:\n            (target.getAttribute('data-tip-disable')\n              ? target.getAttribute('data-tip-disable') === 'true'\n              : self.props.disable) || false,\n          currentTarget: target\n        },\n        () => {\n          if (scrollHide) {\n            self.addScrollListener(self.state.currentTarget);\n          }\n\n          self.updateTooltip(e);\n\n          if (getContent && Array.isArray(getContent)) {\n            self.intervalUpdateContent = setInterval(() => {\n              if (self.mount) {\n                const { getContent } = self.props;\n                const placeholder = getTipContent(\n                  originTooltip,\n                  '',\n                  getContent[0](),\n                  isMultiline\n                );\n                const isEmptyTip = self.isEmptyTip(placeholder);\n                self.setState({ isEmptyTip });\n                self.updatePosition();\n              }\n            }, getContent[1]);\n          }\n        }\n      );\n    };\n\n    // If there is no delay call immediately, don't allow events to get in first.\n    if (reshowDelay) {\n      this.delayReshow = setTimeout(updateState, reshowDelay);\n    } else {\n      updateState();\n    }\n  }\n\n  /**\n   * When mouse hover, update tool tip\n   */\n  updateTooltip(e) {\n    const { delayShow, disable } = this.state;\n    const { afterShow, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    const eventTarget = e.currentTarget || e.target;\n\n    // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n    if (this.mouseOnToolTip()) {\n      return;\n    }\n\n    // if the tooltip is empty, disable the tooltip\n    if (this.isEmptyTip(placeholder) || disable || disableProp) {\n      return;\n    }\n\n    const delayTime = !this.state.show ? parseInt(delayShow, 10) : 0;\n\n    const updateState = () => {\n      if (\n        (Array.isArray(placeholder) && placeholder.length > 0) ||\n        placeholder\n      ) {\n        const isInvisible = !this.state.show;\n        this.setState(\n          {\n            currentEvent: e,\n            currentTarget: eventTarget,\n            show: true\n          },\n          () => {\n            this.updatePosition(() => {\n              if (isInvisible && afterShow) {\n                afterShow(e);\n              }\n            });\n          }\n        );\n      }\n    };\n\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n    }\n    if (delayTime) {\n      this.delayShowLoop = setTimeout(updateState, delayTime);\n    } else {\n      this.delayShowLoop = null;\n      updateState();\n    }\n  }\n\n  /*\n   * If we're mousing over the tooltip remove it when we leave.\n   */\n  listenForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.addEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  removeListenerForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.removeEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  /**\n   * When mouse leave, hide tooltip\n   */\n  hideTooltip(e, hasTarget, options = { isScroll: false }) {\n    const { disable } = this.state;\n    const { isScroll } = options;\n    const delayHide = isScroll ? 0 : this.state.delayHide;\n    const { afterHide, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    if (!this.mount) return;\n    if (this.isEmptyTip(placeholder) || disable || disableProp) return; // if the tooltip is empty, disable the tooltip\n    if (hasTarget) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement || !this.state.show) return;\n    }\n\n    // clean up aria-describedby when hiding tooltip\n    if (e && e.currentTarget && e.currentTarget.removeAttribute) {\n      e.currentTarget.removeAttribute('aria-describedby');\n    }\n\n    const resetState = () => {\n      const isVisible = this.state.show;\n      // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n      if (this.mouseOnToolTip()) {\n        this.listenForTooltipExit();\n        return;\n      }\n\n      this.removeListenerForTooltipExit();\n\n      this.setState({ show: false }, () => {\n        this.removeScrollListener(this.state.currentTarget);\n        if (isVisible && afterHide) {\n          afterHide(e);\n        }\n      });\n    };\n\n    this.clearTimer();\n    if (delayHide) {\n      this.delayHideLoop = setTimeout(resetState, parseInt(delayHide, 10));\n    } else {\n      resetState();\n    }\n  }\n\n  /**\n   * When scroll, hide tooltip\n   */\n  hideTooltipOnScroll(event, hasTarget) {\n    this.hideTooltip(event, hasTarget, { isScroll: true });\n  }\n\n  /**\n   * Add scroll event listener when tooltip show\n   * automatically hide the tooltip when scrolling\n   */\n  addScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.addEventListener('scroll', this.hideTooltipOnScroll, isCaptureMode);\n  }\n\n  removeScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.removeEventListener(\n      'scroll',\n      this.hideTooltipOnScroll,\n      isCaptureMode\n    );\n  }\n\n  // Calculation the position\n  updatePosition(callbackAfter) {\n    const { currentEvent, currentTarget, place, desiredPlace, effect, offset } =\n      this.state;\n    const node = this.tooltipRef;\n    const result = getPosition(\n      currentEvent,\n      currentTarget,\n      node,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        currentEvent,\n        currentTarget,\n        node,\n        place,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    if (result.isNewState) {\n      // Switch to reverse placement\n      return this.setState(result.newState, () => {\n        this.updatePosition(callbackAfter);\n      });\n    }\n\n    if (callbackAfter && typeof callbackAfter === 'function') {\n      callbackAfter();\n    }\n\n    // Set tooltip position\n    node.style.left = result.position.left + 'px';\n    node.style.top = result.position.top + 'px';\n  }\n\n  /**\n   * CLear all kinds of timeout of interval\n   */\n  clearTimer() {\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n      this.delayShowLoop = null;\n    }\n    if (this.delayHideLoop) {\n      clearTimeout(this.delayHideLoop);\n      this.delayHideLoop = null;\n    }\n    if (this.delayReshow) {\n      clearTimeout(this.delayReshow);\n      this.delayReshow = null;\n    }\n    if (this.intervalUpdateContent) {\n      clearInterval(this.intervalUpdateContent);\n      this.intervalUpdateContent = null;\n    }\n  }\n\n  hasCustomColors() {\n    return Boolean(\n      Object.keys(this.state.customColors).find(\n        (color) => color !== 'border' && this.state.customColors[color]\n      ) ||\n        (this.state.border && this.state.customColors['border'])\n    );\n  }\n\n  render() {\n    const { extraClass, html, ariaProps, disable, uuid } = this.state;\n    const content = this.getTooltipContent();\n    const isEmptyTip = this.isEmptyTip(content);\n    const style = this.props.disableInternalStyle\n      ? ''\n      : generateTooltipStyle(\n          this.state.uuid,\n          this.state.customColors,\n          this.state.type,\n          this.state.border,\n          this.state.padding,\n          this.state.customRadius\n        );\n\n    const tooltipClass =\n      '__react_component_tooltip' +\n      ` ${this.state.uuid}` +\n      (this.state.show && !disable && !isEmptyTip ? ' show' : '') +\n      (this.state.border ? ' ' + this.state.borderClass : '') +\n      ` place-${this.state.place}` + // top, bottom, left, right\n      ` type-${this.hasCustomColors() ? 'custom' : this.state.type}` + // dark, success, warning, error, info, light, custom\n      (this.props.delayUpdate ? ' allow_hover' : '') +\n      (this.props.clickable ? ' allow_click' : '');\n\n    let Wrapper = this.props.wrapper;\n\n    if (ReactTooltip.supportedWrappers.indexOf(Wrapper) < 0) {\n      Wrapper = ReactTooltip.defaultProps.wrapper;\n    }\n\n    const wrapperClassName = [tooltipClass, extraClass]\n      .filter(Boolean)\n      .join(' ');\n\n    if (html) {\n      const htmlContent = `${content}${\n        style ? `\\n<style aria-hidden=\"true\">${style}</style>` : ''\n      }`;\n\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          ref={(ref) => (this.tooltipRef = ref)}\n          {...ariaProps}\n          data-id=\"tooltip\"\n          dangerouslySetInnerHTML={{ __html: htmlContent }}\n        />\n      );\n    } else {\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          {...ariaProps}\n          ref={(ref) => (this.tooltipRef = ref)}\n          data-id=\"tooltip\"\n        >\n          {style && (\n            <style\n              dangerouslySetInnerHTML={{ __html: style }}\n              aria-hidden=\"true\"\n            />\n          )}\n          {content}\n        </Wrapper>\n      );\n    }\n  }\n}\n\nexport default ReactTooltip;\n","/**\n * Tracking target removing from DOM.\n * It's necessary to hide tooltip when it's target disappears.\n * Otherwise, the tooltip would be shown forever until another target\n * is triggered.\n *\n * If MutationObserver is not available, this feature just doesn't work.\n */\n\n// https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\nconst getMutationObserverClass = () => {\n  return (\n    window.MutationObserver ||\n    window.WebKitMutationObserver ||\n    window.MozMutationObserver\n  );\n};\n\nexport default function(target) {\n  target.prototype.bindRemovalTracker = function() {\n    const MutationObserver = getMutationObserverClass();\n    if (MutationObserver == null) return;\n\n    const observer = new MutationObserver(mutations => {\n      for (let m1 = 0; m1 < mutations.length; m1++) {\n        const mutation = mutations[m1];\n        for (let m2 = 0; m2 < mutation.removedNodes.length; m2++) {\n          const element = mutation.removedNodes[m2];\n          if (element === this.state.currentTarget) {\n            this.hideTooltip();\n            return;\n          }\n        }\n      }\n    });\n\n    observer.observe(window.document, { childList: true, subtree: true });\n\n    this.removalTracker = observer;\n  };\n\n  target.prototype.unbindRemovalTracker = function() {\n    if (this.removalTracker) {\n      this.removalTracker.disconnect();\n      this.removalTracker = null;\n    }\n  };\n}\n","/**\n * Events that should be bound to the window\n */\nimport CONSTANT from '../constant';\n\nexport default function(target) {\n  target.prototype.bindWindowEvents = function(resizeHide) {\n    // ReactTooltip.hide\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.addEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide, false);\n\n    // ReactTooltip.rebuild\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.addEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild, false);\n\n    // ReactTooltip.show\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.addEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow, false);\n\n    // Resize\n    if (resizeHide) {\n      window.removeEventListener('resize', this.onWindowResize);\n      window.addEventListener('resize', this.onWindowResize, false);\n    }\n  };\n\n  target.prototype.unbindWindowEvents = function() {\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  /**\n   * invoked by resize event of window\n   */\n  target.prototype.onWindowResize = function() {\n    if (!this.mount) return;\n    this.hideTooltip();\n  };\n}\n","/**\n * Util method to judge if it should follow capture model\n */\n\nexport default function(target) {\n  target.prototype.isCapture = function(currentTarget) {\n    return (\n      (currentTarget &&\n        currentTarget.getAttribute('data-iscapture') === 'true') ||\n      this.props.isCapture ||\n      false\n    );\n  };\n}\n","/**\n * Util method to get effect\n */\n\nexport default function(target) {\n  target.prototype.getEffect = function(currentTarget) {\n    const dataEffect = currentTarget.getAttribute('data-effect');\n    return dataEffect || this.props.effect || 'float';\n  };\n}\n","import { v4 as uuid } from 'uuid';\n\nexport function generateUUID() {\n  return 't' + uuid();\n}\n"],"sourceRoot":""}