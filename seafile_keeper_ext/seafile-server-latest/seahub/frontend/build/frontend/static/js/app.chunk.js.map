{"version":3,"sources":["../node_modules/component-emitter/index.js","../node_modules/engine.io-parser/lib/browser.js","components/dialog/edit-filetag-dialog.js","components/context-menu/globalEventListener.js","components/context-menu/context-menu.js","components/dialog/create-folder-dialog.js","components/dialog/zip-download-dialog.js","components/dropdown-menu/item-dropdown-menu.js","../node_modules/parseqs/index.js","../node_modules/component-inherit/index.js","components/dialog/image-dialog.js","components/system-notification.js","models/group.js","models/library-details.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/dialog/sort-options.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","components/rename.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-upload-links-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","components/dialog/assign-doi-dialog.js","components/keeper-archive-metadata-form.js","components/dialog/archive-library-dialog.js","components/dialog/certify-library-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/dialog/keeper-edit-metadata-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/dialog/list-tag-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/dirent-list-item.js","assets/berg_icon.png","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/search-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/socket.io-parser/index.js","../node_modules/engine.io-client/lib/xmlhttprequest.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/transport.js","components/dialog/create-tag-dialog.js","components/dialog/share-admin-link.js","components/dialog/list-taggedfiles-dialog.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","../node_modules/parseuri/index.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/has-binary2/index.js","../node_modules/yeast/index.js","../node_modules/indexof/index.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/on.js","../node_modules/component-bind/index.js","../node_modules/socket.io-client/lib/index.js","components/wiki-markdown-viewer.js","../node_modules/@seafile/react-image-lightbox/dist/index.es.js","components/dialog/copy-move-dirent-progress-dialog.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","../node_modules/socket.io-client/lib/url.js","../node_modules/debug/src/debug.js","../node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/after/index.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/to-array/index.js","../node_modules/backo2/index.js","components/context-menu/actions.js","components/context-menu/helpers.js","../node_modules/debug/src/browser.js","../node_modules/react-select/lib/AsyncCreatable.js","../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/function-bind-native.js","../../node_modules/core-js/internals/function-call.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/engine-v8-version.js","../../node_modules/core-js/internals/function-uncurry-this-raw.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/function-uncurry-this.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/is-null-or-undefined.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/document-all.js","../../node_modules/core-js/internals/is-callable.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/object-is-prototype-of.js","../../node_modules/core-js/internals/engine-user-agent.js","../../node_modules/core-js/internals/symbol-constructor-detection.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/is-symbol.js","../../node_modules/core-js/internals/try-to-string.js","../../node_modules/core-js/internals/a-callable.js","../../node_modules/core-js/internals/get-method.js","../../node_modules/core-js/internals/ordinary-to-primitive.js","../../node_modules/core-js/internals/define-global-property.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/to-object.js","../../node_modules/core-js/internals/has-own-property.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/to-property-key.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/v8-prototype-define-bug.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/function-name.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/weak-map-basic-detection.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/make-built-in.js","../../node_modules/core-js/internals/define-built-in.js","../../node_modules/core-js/internals/math-trunc.js","../../node_modules/core-js/internals/to-integer-or-infinity.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/length-of-array-like.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/is-array.js","../../node_modules/core-js/internals/to-string-tag-support.js","../../node_modules/core-js/internals/classof.js","../../node_modules/core-js/internals/is-constructor.js","../../node_modules/core-js/internals/array-species-constructor.js","../../node_modules/core-js/internals/array-species-create.js","../../node_modules/core-js/internals/array-iteration.js","../../node_modules/core-js/internals/object-keys.js","../../node_modules/core-js/internals/object-define-properties.js","../../node_modules/core-js/internals/html.js","../../node_modules/core-js/internals/object-create.js","../../node_modules/core-js/internals/add-to-unscopables.js","../../node_modules/core-js/modules/es.array.find.js","../../src/constant.js","../../src/decorators/staticMethods.js","../../src/decorators/customEvent.js","../../src/decorators/bodyMode.js","../../src/utils/getPosition.js","../../src/utils/getTipContent.js","../../src/utils/aria.js","../../src/utils/nodeListToArray.js","../../src/decorators/defaultStyles.js","../../src/decorators/styler.js","../../src/index.js","../../src/decorators/trackRemoval.js","../../src/decorators/windowListener.js","../../src/decorators/isCapture.js","../../src/decorators/getEffect.js","../../src/utils/uuid.js"],"names":["Emitter","obj","key","prototype","mixin","module","exports","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","length","cb","callbacks","i","splice","emit","args","Array","len","slice","listeners","hasListeners","base64encoder","keys","require","hasBinary","sliceBuffer","after","utf8","ArrayBuffer","isAndroid","navigator","test","userAgent","isPhantomJS","dontSendBlobs","protocol","packets","open","close","ping","pong","message","upgrade","noop","packetslist","err","type","data","Blob","map","ary","each","done","result","next","eachWithIndex","el","error","msg","encodePacket","packet","supportsBinary","utf8encode","callback","undefined","buffer","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","byteLength","encodeArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","base64","encodeBase64Object","encoded","encode","String","strict","b64data","b64","split","readAsDataURL","fromCharCode","e","typed","basic","btoa","decodePacket","binaryType","utf8decode","charAt","decodeBase64Packet","substr","decode","tryDecode","Number","substring","rest","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","results","join","decodePayload","decodePayloadAsBinary","n","l","chr","encodedPackets","totalLength","reduce","acc","p","toString","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","parseInt","binaryIdentifier","size","lengthAry","bufferTail","buffers","tailArray","msgLength","total","TagItem","props","onMouseEnter","setState","isTagHighlighted","onMouseLeave","getRepoTagIdList","fileTagList","fileTag","repo_tag_id","onEditFileTag","repoID","repoTag","filePath","repoTagIdList","indexOf","id","seafileAPI","addFileTag","then","onFileTagChanged","catch","errMessage","Utils","getErrorMsg","toaster","danger","deleteFileTag","state","isTagSelected","className","onClick","style","backgroundColor","color","name","React","Component","TagList","getRepoTagList","listRepoTags","res","repotagList","repo_tags","item","RepoTag","toggle","toggleCancel","gettext","href","createNewTag","EditFileTagDialog","isCreateRepoTagShow","isListRepoTagShow","onRepoTagCreated","repoTagID","isOpen","onClose","handleShowEvent","hasOwnProp","show","handleHideEvent","hide","register","showCallback","hideCallback","uniqueId","unregister","canUseDOM","window","MENU_SHOW","MENU_HIDE","ContextMenu","registerHandlers","document","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","detail","isVisible","position","x","y","currentObject","menuList","callIfExists","onShowMenu","onHideMenu","menu","contains","target","hideMenu","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","onMenuItemClick","stopPropagation","operation","getEventData","onContextMenu","listenId","listener","wrapper","requestAnimationFrame","setTimeout","rtl","opacity","pointerEvents","role","display","ref","menuItem","index","data-operation","value","CreateForder","handleChange","trim","isSubmitBtnActive","childName","handleSubmit","newName","checkDuplicatedName","replace","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","addFolderCancel","newInput","createRef","focus","setSelectionRange","for","innerRef","input","onKeyPress","onChange","disabled","interval","ZipDownloadDialog","queryZipProgress","zipToken","failed","clearInterval","isLoading","errorMsg","failed_reason","zipProgress","zipped","toFixed","toggleDialog","location","fileServerRoot","cancelZipTask","token","getShareLinkDirentsZipTask","getShareLinkZipTask","zipDownload","setInterval","Content","ItemDropdownMenu","isItemMenuShow","unfreezeItem","onDropdownToggleKeyDown","onDropdownToggleClick","toggleOperationMenu","freezeItem","onMenuItemKeyDown","isHandleContextMenuEvent","listenerId","getMenuList","nextProps","toggleClass","tagName","data-toggle","title","aria-label","aria-expanded","onKeyDown","divider","tag","tabIndex","defaultProps","str","hasOwnProperty","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","a","b","constructor","ImageDialog","imageItems","imageIndex","imageItemsLength","imageCaption","url","mainSrc","src","imageTitle","nextSrc","prevSrc","onCloseRequest","closeImagePopup","onMovePrevRequest","moveToPrevImage","onMoveNextRequest","moveToNextImage","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","SystemNotification","isClosed","cookieEnabled","date","Date","cookies","cookie","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","curNoteMsg","dangerouslySetInnerHTML","__html","Group","object","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","LibraryDetails","repo_id","repo_name","MainSideNav","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","_this","listGroups","groupList","groupsHeight","listHeight","groupItems","sort","toLowerCase","tabItemClick","param","uploader","isUploadProgressDialogShow","totalProgress","confirm","onDTableClick","dtableWebServer","getActiveClass","tab","currentTab","libdtExtend","libraryDetailsExtended","loadLibraryDetails","keeperAPI","listLibraryDetails","libraryDetailsList","libraryDetailsHeight","libraryDetailItems","closeSideBar","adminHeight","to","aria-hidden","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","link","desc","icon","showActivity","isDocs","isPro","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","renderLibraryDetails","canPublishRepo","draftCounts","pill","canInvitePeople","renderSharedAdmin","renderCustomNavItems","AboutDialog","onCloseAboutDialog","mediaUrl","logoPath","logoHeight","logoWidth","siteTitle","alt","seafileVersion","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","onFooterExpandedToggle","collapsed","elementBodyStyle","maxHeight","borderBottomWidth","SidePanel","isSidePanelClosed","onCloseSidePanel","MainPanel","script","createElement","async","body","appendChild","children","DraftsView","moment","locale","lang","DraftListItem","isItemFreezed","isMenuIconShow","highlight","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","origin_repo_id","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","localTime","utc","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","success","publishDraft","getDrafts","isLoadingDraft","Acticity","json","obj_type","commit_id","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","fileURL","encodePath","serviceURL","fileLink","bind","app","config","FileActivitiesContent","isDesktop","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","onListCreatedFilesToggle","isListCreatedFiles","op","details","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FilesActivities","mergePublishEvents","events","curPathList","oldPathList","actuallyEvents","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","hasMore","clientHeight","scrollHeight","scrollTop","getMore","isFirstLoading","currentPage","avatarSize","listActivities","onScroll","loading","emptyTip","TableBody","getThumbnails","filter","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","desktopItem","onMouseOver","onMouseOut","onFocus","mobileItem","Starred","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","check","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","device_name","last_login_ip","last_accessed","Fragment","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","find","translateExplanation","explanation","sharePermsExplanation","description","getPermissions","newPermissions","permissions","currentPerm","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","table","togglePermSelectDialog","isPermSelectDialogOpen","options","user","updateRepoSharePerm","unshare","unshareRepo","unshared","showAdmin","Object","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","isTextMode","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","JSON","stringify","objUrl","view_cnt","ShareAdminShareLinks","deleteShareLink","uploadItem","listUserShareLinks","ShareLink","ShareAdminUploadLinks","deleteUploadLink","listUserUploadLinks","UploadLink","Repo","size_original","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","storage_name","doi","LibsMobileThead","_slicedToArray","arr","isArray","Symbol","iterator","_arr","_n","_d","_e","_s","_i","unsupportedIterableToArray","TypeError","SortOptions","sortOptions","sortBySize","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","save","toggleSortOptionsDialog","isSortOptionsDialogOpen","load","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","server","req","get","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","currentPath","downloadFile","downloadUrl","shared_by","DirPath","turnPathToLink","pathList","nodePath","data-path","pathElem","MainPanelTopbar","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","DirContent","direntList","deleteDirent","fromSystemRepo","Dirent","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","openFileInput","fileInput","current","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","CreateRepoDialog","handleRepoNameChange","handlePassword1Change","password1","handlePassword2Change","password2","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","password","repo","passwd","storages","libraryTemplates","repoPasswordMinLength","defaultValue","label","enableEncryptedLibrary","autoComplete","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","visitDeletedviaKey","onShowSidePanel","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","method","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","isMulti","placeholder","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","userFolderPermItems","concat","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","mode","onDirentItemClick","thead","onSelectChange","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","pills","aria-selected","aria-controls","tabId","folderName","maxWidth","Rename","nativeEvent","stopImmediatePropagation","onRenameConfirm","validateInput","isValid","onRenameCancel","renameInput","hasSuffix","endIndex","lastIndexOf","MylibRepoMenu","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","showAssignDoiMenuItem","showArchiveLibraryMenuItem","showCertifyLibraryMenuItem","showEditMetadatayMenuItem","operations","folderPermEnabled","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","translateOperations","translateResult","unshift","RepoAPITokenPermissionEditor","onHideSelect","isEditing","onEditPermission","onSelectHandler","optionTranslation","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","addAPIToken","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","duration","renderAPITokenList","minHeight","onRepoAPITokenToggle","RepoShareUploadLinkItem","onDeleteLink","deleteItem","creator_name","rel","RepoShareUploadLinksDialog","getItems","listRepoShareLinks","listRepoUploadLinks","repoShareUploadLinkList","deleteRepoShareLink","deleteRepoUploadLink","forDialog","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","AssignDoiDialog","addDoi","mpgInstituteOptions","defaultResourceType","resourceTypes","defaultAuthors","firstName","lastName","affs","defaultDirectors","defaultPublisher","defaultMd","authors","publisher","year","institute","department","directors","resourceType","license","errors","defaultValidMd","InfoArea","toggleHelp","helpTooltipOpen","toggleError","errorTooltipOpen","fontWeight","delay","placement","helpText","KeeperArchiveMetadataForm","isFieldValid","RegExp","Boolean","isFormValid","validMd","outer","setButtons","isButton1Disabled","isSaved","isButton2Disabled","getValidMd","md","k","onButton1","onButton2","handleAuthorAddFields","values","setAuthorInputFields","handleAuthorRemoveFields","handleAuthorInputChange","handleAuthorAffInputChange","aidx","handleAuthorAffAddFields","handleAuthorAffRemoveFields","handleDirectorAddFields","setDirectorInputFields","handleDirectorRemoveFields","handleDirectorInputChange","onResourceSelectChange","resourceOptions","filterInstitutes","promiseOptions","Promise","resolve","handleInstituteChange","insName","validationProps","valid","invalid","validationInSelects","validationInAuthors","nidx","validationInDirectors","getArchiveMetadata","newState","getMpgInstitutes","res2","v","hideDialog","header","paddingBottom","row","sm","inputField","_","isClearable","cacheOptions","form","button1Label","button2Label","ArchiveLibraryDialog","onUpdateArchiveMetadata","updateArchiveMetadata","onArchiveClick","archiveLibrary","resp","quota","CertifyLibraryDialog","canCertify","certifyLibrary","certifyOnBloxberg","handleCanArchiveResponse","d","default_error","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareUploadLinksDialog","toggleOldFilesAutoDelDialog","onAssignDoiToggle","onArchiveLibraryToggle","onCertifyLibraryToggle","onEditMetadataToggle","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareUploadLinksDialogOpen","isOldFilesAutoDelDialogOpen","isAssignDoiDialogShow","onArchiveLibraryHide","isArchiveLibraryDialogShow","canArchive","onCertifyLibraryHide","isCertifyLibraryDialogShow","onEditMetadataHide","isEditMetadataDialogShow","renameRepo","onRenameRepo","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","renderMobileUI","query","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","onSearchedClick","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","isStaff","username","isRepoOwner","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","aria-haspopup","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","collabServer","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","CreateFile","isDuplicated","onAddFile","handleCheck","pos","fileType","isdraft","addFileCancel","KeeperEditMetadataDialog","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","dirPath","getFolderName","getUserPermission","customPermission","canUpload","canCreate","upload","create","isArchiveBtnShow","isEditMetadataBtnShow","isCertifyBtnShow","content","showShareBtn","isSupportUploadFolder","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","onRename","changeState","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","onOpenViaClient","getDirentPath","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","searchPlaceholder","isDirentSelected","tabName","tagTitle","pathPrefix","showName","zIndex","TagColor","togglePopover","isPopoverOpen","selectTagColor","newColor","updateRepoTag","tagColor","colorList","defaultChecked","TagName","toggleMode","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","deleteTag","onDeleteTag","ListTagDialog","onListTagCancel","onCreateRepoTag","targetTagID","deleteRepoTag","repo_tag","DirTool","onShowListRepoTag","isRepoTagDialogShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onListTaggedFileToggle","currentTag","isFile","isMarkdownFile","trashUrl","updateUsedRepoTags","CurDirPath","onDeleteRepoTag","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","entry","search","highlightedDisplay","focused","oldTime","participants","showIconTip","defaultStyle","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","CommentItem","convertComment","mdFile","processor","process","html","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","DetailListView","getDirentPostion","repoInfo","isEditFileTagShow","direntType","direntDetail","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","classnames","active","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","isImg","isVideo","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","DirentListItem","canDrag","isDragTipShow","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","onItemCertify","certifyFile","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onConvertWithONLYOFFICE","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","getData","parse","draggedItem","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","isHasPermissionToShare","isSelected","getDirentItemMenuList","data-tip","data-for","delayHide","effect","preview","activeDirent","dirHref","fileHref","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","unix","data-op","DirentsDraggedPreview","handleDragEnd","element","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","documentElement","DirentListView","prepareImageItem","useThumbnail","isGIF","thumbnailSizeForOriginal","fullDirentList","isImagePopupOpen","prevState","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","onAllItemSelected","isAllItemSelected","dragStartPosition","DirListView","isRepoInfoBarShow","readmeMarkdown","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","onAddFileNode","newUrl","parentNode","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","onNodeExpanded","onNodeCollapse","onUnFreezedItem","DirColumnFile","goDraftPage","hash","isFileLoadedErr","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","c","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","progress","Math","round","newFileName","isUploading","aria-valuenow","aria-valuemin","aria-valuemax","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","offset","floor","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","bootstrap","firedRetry","resumableObj","getUpdateLink","pop","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","getFileDownloadLink","getFileContent","draftID","loadDirData","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","FileTag","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","onDeleteItems","deleteMutipleDirents","deleteDirents","createDir","addDirent","createFile","paths","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","buildTree","oldonpopstate","repoRes","RepoInfo","permissionID","getCustomPermission","permissionRes","custom_permission","lib_need_decrypt","unwatchRepo","queryAsyncOperationProgress","successful","deleteDir","deleteItemAjaxCallback","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","onChangeUserRole","setGroupAdmin","deleteGroupMember","translateRole","roles","deleteAuthority","scope","currentRole","onRoleChanged","PureComponent","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","changeMode","SearchGroupMembers","q","searchGroupMember","isInit","MANAGEMENT_MODE","toggleManageMembersDialog","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","inputNewName","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","GeneralToolbar","MainContentWrapper","WrapperedComponent","FilesActivitiesWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","ShareAdminShareLinksWrapper","ShareAdminUploadLinksWrapper","App","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","contentClassName","ReactDOM","render","getElementById","getRandomValues","crypto","msCrypto","rnds8","rng","Error","byteToHex","bytesToUuid","buf","bth","v4","rnds","random","ii","debug","binary","isBuf","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","bloblessData","deconstruction","deconstructPacket","pack","removeBlobs","encodeAsBinary","add","start","tryParse","decodeString","takeBinaryData","destroy","finishedReconstruction","binData","reconstructPacket","hasCORS","globalThis","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","self","Function","parser","Transport","hostname","port","secure","timestampParam","timestampRequests","readyState","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","doOpen","doClose","send","write","onOpen","writable","onData","onPacket","CreateTagDialog","selectTagcolor","createTag","createRepoTag","newTag","canSave","ShareAdminLink","copyToClipboard","ListTaggedFilesDialog","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","draftItem","DraftItem","ReadmeDialog","readmeContent","showTOC","scriptSource","RepoInfoBar","onListTaggedFiles","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","re","parts","m","exec","uri","source","host","authority","ipv6uri","pathNames","regx","queryKey","$0","$1","$2","call","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","isView","eio","Socket","Backoff","has","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","max","jitter","timeout","connecting","lastPing","encoding","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","cleanup","timer","clearTimeout","onping","onpong","ondata","ondecoded","onerror","onConnecting","processPacketQueue","shift","subsLength","disconnect","reset","onclose","reason","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","poll","pause","doPoll","callbackfn","doWrite","schema","sid","withNativeBlob","withNativeFile","File","toJSON","prev","alphabet","seed","decoded","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","ev","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","sent","emitBuffered","lookup","cache","managers","parsed","forceNew","multiplex","contentClass","WikiMarkdownViewer","getTitlesInfo","titlesInfo","titleDom","querySelectorAll","updateTabTitle","headingList","offsetTop","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","index2","originalPath","pathNormalize","isInternalFileLink","match","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","links","MarkdownViewer","_defineProperties","descriptor","enumerable","configurable","defineProperty","_createClass","Constructor","protoProps","staticProps","_defineProperty","_extends","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_assertThisInitialized","ReferenceError","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_toConsumableArray","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","translate","replaceStrings","translated","getWindowWidth","global","getHighestSafeWindowContext","referrer","getOrigin","parent","MAX_ZOOM_LEVEL","KEYS","ReactImageLightbox","_Component","instance","_classCallCheck","_possibleConstructorReturn","isClosing","animationDisabled","shouldAnimate","zoomLevel","offsetX","offsetY","loadErrorStatus","outerEl","zoomInBtn","zoomOutBtn","caption","closeIfClickInner","handleImageDoubleClick","handleImageMouseWheel","handleKeyInput","handleMouseUp","handleMouseDown","handleMouseMove","handleOuterMousewheel","handleTouchStart","handleTouchMove","handleTouchEnd","handlePointerEvent","handleCaptionMousewheel","handleWindowResize","handleZoomInButtonClick","handleZoomOutButtonClick","requestClose","requestMoveNext","requestMovePrev","subClass","superClass","_inherits","mouseEvent","touchPointer","identifier","pointerEvent","pointerId","_ref","_ref$x","_ref$y","_ref$zoom","zoom","targetWidth","nextX","windowWidth","scaleFactor","transform","timeouts","currentAction","eventsSource","pointerList","preventInnerClose","preventInnerCloseTimeout","keyPressed","imageCache","lastKeyDownTime","resizeTimeout","wheelActionTimeout","resetScrollTimeout","scrollX","scrollY","moveStartX","moveStartY","moveStartOffsetX","moveStartOffsetY","swipeStartX","swipeStartY","swipeEndX","swipeEndY","pinchTouchList","pinchDistance","keyCounter","moveRequested","_this2","windowContext","resize","mouseup","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","handleWheel","passive","loadAllImages","_this3","sourcesChanged","prevSrcDict","nextSrcDict","getSrcTypes","srcType","_this4","didUnmount","tid","_setTimeout","_x","_x2","func","_this5","_this6","imageSrc","fitSizes","isImageLoaded","getFitSizes","targetHeight","stretch","boxSize","getLightboxRect","currentImageInfo","getBestImageForType","maxX","minX","maxY","minY","zoomMultiplier","getZoomMultiplier","keyEnding","pow","right","_clearTimeout","_x3","enableZoom","nextZoomLevel","imageBaseSize","currentZoomMultiplier","nextZoomMultiplier","boxRect","pointerX","pointerY","currentImageOffsetX","currentImageOffsetY","nextImageRealOffsetX","nextImageRealOffsetY","nextOffsetX","nextOffsetY","maxOffsets","getMaxOffsets","isAnimating","which","keyRepeatLimit","keyRepeatKeyupBonus","_this7","deltaY","abs","deltaX","changeZoom","newOffsetY","newOffsetX","filterPointersBySource","pointer","_ref2","_this8","_ref3","shouldHandleEvent","isTargetMatchImage","addPointer","parseMouseEvent","multiPointerStart","multiPointerMove","removePointer","multiPointerEnd","parsePointerEvent","_this9","changedTouches","eventTouch","parseTouchPointer","_this10","touch","handleSwipeStart","handleMoveStart","handleEnd","decideMoveOrSwipe","handlePinchStart","handleMove","handleSwipe","handlePinch","setPreventInnerClose","handleMoveEnd","handleSwipeEnd","handlePinchEnd","_ref4","_ref5","_this11","animationDuration","_ref6","_ref7","xDiff","xDiffAbs","yDiffAbs","_ref8","_ref9","sqrt","_ref10","_ref11","_ref12","calculatePinchDistance","oldPointer","newDistance","_this$calculatePinchC","calculatePinchCenter","forceUpdate","_this$caption$current2","_this12","inMemoryImage","Image","imageCrossOrigin","crossOrigin","errorEvent","onImageLoadError","onImageLoad","_this13","generateLoadDoneCallback","loadImage","_this14","closeLightbox","animationOnKeyInput","direction","_this15","requestMove","_this16","_this$props","clickOutsideToClose","discourageDownloads","toolbarButtons","reactModalStyle","_onAfterOpen","onAfterOpen","reactModalProps","_this$state","transitionStyle","transition","keyEndings","_ref13","images","addImage","imageClass","transforms","bestImageInfo","imageStyle","getTransform","cursor","backgroundImage","onDoubleClick","onWheel","loadingIcon","modalStyle","overlay","border","borderRadius","Modal","onRequestClose","contentLabel","appElement","wrapperClassName","animationDirection","onTouchStart","onTouchMove","onKeyUp","propTypes","PropTypes","string","isRequired","mainSrcThumbnail","prevSrcThumbnail","nextSrcThumbnail","bool","number","arrayOf","shape","CopyMoveDirentProgressDialog","progressStyle","lineHeight","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","renderChildren","paddingLeft","hasChildren","hlClass","TreeView","dragStartNodeData","isTreeViewDropTipShow","dropNodeData","parseuri","loc","createDebug","namespace","prevTime","enabled","curr","ms","diff","coerce","formatter","formatters","val","formatArgs","logFn","log","console","useColors","colors","selectColor","init","instances","stack","disable","enable","namespaces","skips","humanize","s","h","plural","ceil","isNaN","long","fmtShort","_deconstructPacket","_placeholder","newData","_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","onDrain","probe","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","code","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","j","empty","Request","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","fromError","abort","attachEvent","unloadHandler","arraybuffer","end","bytes","abv","count","err_cb","bail","proxy","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","removeChild","iframe","insertAt","getElementsByTagName","insertBefore","head","area","iframeId","complete","initIframe","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","addEventListeners","onmessage","factor","rand","deviation","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","store","prop","r","storage","DEBUG","lastC","removeItem","WebkitAppearance","firebug","exception","chrome","local","localStorage","localstorage","default","_Async","_Creatable","_stateManager","_interopRequireDefault","_Select","__esModule","SelectCreatable","makeCreatableSelect","SelectCreatableState","_default","makeAsyncSelect","it","fails","require$$0","NATIVE_BIND","$propertyIsEnumerable","propertyIsEnumerable","NASHORN_BUG","1","V","bitmap","FunctionPrototype","uncurryThisWithBind","uncurryThisRaw","stringSlice","classofRaw","require$$1","classof","require$$2","$Object","isNullOrUndefined","$TypeError","requireObjectCoercible","IndexedObject","toIndexedObject","documentAll","all","IS_HTMLDDA","argument","isCallable","aFunction","isPrototypeOf","Deno","versions","v8","V8_VERSION","sham","getBuiltIn","require$$3","$Symbol","$String","tryToString","aCallable","isObject","defineGlobalProperty","SHARED","sharedModule","copyright","toObject","hasOwn","uncurryThis","postfix","uid","shared","NATIVE_SYMBOL","require$$4","USE_SYMBOL_AS_UID","require$$5","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","wellKnownSymbol","isSymbol","getMethod","P","ordinaryToPrimitive","pref","valueOf","TO_PRIMITIVE","toPrimitive","exoticToPrim","toPropertyKey","EXISTS","documentCreateElement","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","require$$6","IE8_DOM_DEFINE","require$$7","$getOwnPropertyDescriptor","O","f","anObject","V8_PROTOTYPE_DEFINE_BUG","$defineProperty","ENUMERABLE","CONFIGURABLE","WRITABLE","Attributes","definePropertyModule","createNonEnumerableProperty","getDescriptor","PROPER","functionToString","inspectSource","WeakMap","sharedKey","NATIVE_WEAK_MAP","hiddenKeys","OBJECT_ALREADY_INITIALIZED","metadata","facade","STATE","enforce","getterFor","TYPE","CONFIGURABLE_FUNCTION_NAME","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","makeBuiltIn","makeBuiltInModule","getter","setter","arity","trunc","toIntegerOrInfinity","toLength","lengthOfArrayLike","toAbsoluteIndex","integer","createMethod","IS_INCLUDES","$this","fromIndex","internalObjectKeys","getOwnPropertyNames","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","normalize","POLYFILL","NATIVE","defineBuiltIn","simple","unsafe","nonConfigurable","nonWritable","copyConstructorProperties","exceptions","TO_STRING_TAG_SUPPORT","TO_STRING_TAG","CORRECT_ARGUMENTS","tryGet","callee","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","isConstructor","SPECIES","$Array","arraySpeciesConstructor","originalArray","C","arraySpeciesCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","specificCreate","boundFunction","every","findIndex","filterReject","enumBugKeys","objectKeys","Properties","activeXDocument","definePropertiesModule","IE_PROTO","EmptyConstructor","scriptTag","LT","NullProtoObjectViaActiveX","temp","parentWindow","ActiveXObject","domain","iframeDocument","contentWindow","F","NullProtoObjectViaIFrame","UNSCOPABLES","ArrayPrototype","$","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","$find","addToUnscopables","FIND","SKIPS_HOLES","proto","HIDE","REBUILD","SHOW","initEvent","checkStatus","dataEventOff","isCapture","currentTarget","currentItem","hideTooltip","setUntargetItems","getTargetArray","showTooltip","targetArray","customListeners","bodyListener","forId","lastTarget","respectEffect","customEvent","tip","parentElement","isCustomEvent","isTargetBelongsToTooltip","getEffect","makeProxy","findCustomEvents","dataAttribute","getBody","place","desiredPlace","getDimensions","tipWidth","tipHeight","getCurrentOffset","mouseX","mouseY","defaultOffset","getDefaultPosition","calculateOffset","extraOffsetX","extraOffsetY","windowHeight","getParent","parentTop","parentLeft","getTipOffsetLeft","getTipOffsetTop","t","outsideRight","getTipOffsetRight","outsideBottom","getTipOffsetBottom","outside","outsideLeft","outsideTop","inside","placeIsInside","newPlace","chosen","choose","isNewState","boundingClientRect","targetTop","targetLeft","disToMouse","currentParent","computedStyle","getComputedStyle","getPropertyValue","TipContent","getContent","multiline","regexp","parseAria","ariaObj","fill","defaultColors","dark","background","arrow","warning","info","light","DEFAULT_PADDING","DEFAULT_RADIUS","tooltip","generateTooltipStyle","uuid","customColors","hasBorder","radius","textColor","borderColor","arrowColor","arrowRadius","tooltipRadius","generateStyle","getDefaultPopupColors","getPopupColors","ReactTooltip","CONSTANT","rebuild","globalRebuild","mount","unbindListener","bindListener","globalShow","hasTarget","globalHide","staticMethods","bindWindowEvents","resizeHide","onWindowResize","unbindWindowEvents","windowListener","ele","customBindListener","eventOff","dataEvent","customListener","customUnbindListener","bodyMode","isBodyMode","bindBodyListener","possibleCustomEvents","possibleCustomEventsOff","customEvents","customEventsOff","unbindBodyListener","bodyModeListeners","mouseover","mousemove","updateTooltip","mouseout","targetEventOff","borderClass","customRadius","extraClass","delayShow","currentEvent","ariaProps","isEmptyTip","originTooltip","isMultiline","delayShowLoop","delayHideLoop","delayReshow","intervalUpdateContent","any","insecure","class","delayUpdate","globalEventOff","afterShow","afterHide","overridePosition","scrollHide","clickable","disableInternalStyle","newAriaProps","methodArray","injectStyles","clearTimer","removeScrollListener","tooltipRef","domRoot","querySelector","textContent","matches","msMatchesSelector","mozMatchesSelector","selector","escaped","nodeListToArray","shadowRoot","unbindBasicListener","isCaptureMode","bindRemovalTracker","unbindRemovalTracker","getTipContent","isGlobalCall","switchToSolid","FocusEvent","getPosition","reshowDelay","updateState","addScrollListener","updatePosition","disableProp","getTooltipContent","eventTarget","mouseOnToolTip","delayTime","isInvisible","isScroll","isMyElement","resetState","listenForTooltipExit","removeListenerForTooltipExit","hideTooltipOnScroll","callbackAfter","tooltipClass","hasCustomColors","Wrapper","supportedWrappers","htmlContent","data-id","MutationObserver","WebKitMutationObserver","MozMutationObserver","observer","mutations","m1","mutation","m2","removedNodes","observe","childList","subtree","removalTracker"],"mappings":"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","file":"static/js/app.chunk.js","sourcesContent":["\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id || this.state.isVisible) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                innerRef={input => {this.newInput = input;}}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const imageCaption = imageItemsLength && (\n      <Fragment>\n        <span>{gettext('%curr% of %total%').replace('%curr%', imageIndex + 1).replace('%total%', imageItemsLength)}</span>\n        <br />\n        <a href={imageItems[imageIndex].url} target=\"_blank\">{gettext('Open in New Tab')}</a>\n      </Fragment>\n    );\n\n    return (\n      <Lightbox\n        mainSrc={imageItems[imageIndex].src}\n        imageTitle={imageItems[imageIndex].name}\n        imageCaption={imageCaption}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","class LibraryDetails {\n  constructor(object) {\n    this.repo_id= object.repo_id;\n    this.repo_name = object.repo_name;\n  }\n}\n\nexport default LibraryDetails;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"@reach/router\";\nimport { Badge } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  canPublishRepo,\n  canAddRepo,\n  canGenerateShareLink,\n  canGenerateUploadLink,\n  canInvitePeople,\n  dtableWebServer,\n  enableOCM,\n  enableOCMViaWebdav,\n} from \"../utils/constants\";\nimport { seafileAPI, keeperAPI } from \"../utils/seafile-api\";\nimport { Utils } from \"../utils/utils\";\nimport toaster from \"./toast\";\nimport Group from \"../models/group\";\nimport LibraryDetails from \"../models/library-details\";\n\nimport { canViewOrg, isDocs, isPro, customNavItems } from \"../utils/constants\";\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar: false,\n      groupItems: [],\n      libraryDetailsExtended: false,\n      libraryDetailItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n    this.libraryDetailsHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI\n      .listGroups()\n      .then((res) => {\n        let groupList = res.data.map((item) => {\n          let group = new Group(item);\n          return group;\n        });\n\n        this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n        _this.setState({\n          groupItems: groupList.sort((a, b) => {\n            return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (\n      window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100\n    ) {\n      if (\n        !window.confirm(\n          gettext(\n            \"A file is being uploaded. Are you sure you want to leave this page?\"\n          )\n        )\n      ) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? \"active\" : \"\";\n  };\n\n  renderSharedGroups() {\n    let style = { height: 0 };\n    if (this.state.groupsExtended) {\n      style = { height: this.groupsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"groups/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\"groups\")}`}\n            onClick={(e) => this.tabItemClick(e, \"groups\")}\n          >\n            <span className=\"sharp\" aria-hidden=\"true\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"All Groups\")}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map((item) => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link\n                to={siteRoot + \"group/\" + item.id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.name\n                )}`}\n                onClick={(e) => this.tabItemClick(e, item.name, item.id)}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = { height: height };\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-share-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-share-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-share-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-upload-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-upload-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-upload-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column ${\n          this.state.sharedExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link\n              to={siteRoot + \"share-admin-libs/\"}\n              className={`nav-link ellipsis ${this.getActiveClass(\n                \"share-admin-libs\"\n              )}`}\n              title={gettext(\"Libraries\")}\n              onClick={(e) => this.tabItemClick(e, \"share-admin-libs\")}\n            >\n              <span aria-hidden=\"true\" className=\"sharp\">\n                #\n              </span>\n              <span className=\"nav-text\">{gettext(\"Libraries\")}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-folders/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-folders\"\n            )}`}\n            title={gettext(\"Folders\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-folders\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Folders\")}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return customNavItems.map((item, idx) => {\n      return (\n        <li key={idx} className=\"nav-item\">\n          <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n            <span className={item.icon} aria-hidden=\"true\"></span>\n            <span className=\"nav-text\">{item.desc}</span>\n          </a>\n        </li>\n      );\n    });\n  }\n\n  render() {\n    let showActivity = isDocs || isPro;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext(\"Files\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"my-libs/\"}\n                  className={`nav-link ellipsis ${\n                    this.getActiveClass(\"my-libs\") ||\n                    this.getActiveClass(\"deleted\")\n                  }`}\n                  title={gettext(\"My Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"my-libs\")}\n                >\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"My Libraries\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                to={siteRoot + \"shared-libs/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"shared-libs\"\n                )}`}\n                title={gettext(\"Shared with me\")}\n                onClick={(e) => this.tabItemClick(e, \"shared-libs\")}\n              >\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Shared with me\")}</span>\n              </Link>\n            </li>\n            {canViewOrg && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"org\")}\n              >\n                <Link\n                  to={siteRoot + \"org/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\"org\")}`}\n                  title={gettext(\"Shared with all\")}\n                >\n                  <span\n                    className=\"sf2-icon-organization\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">{gettext(\"Shared with all\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Shared with groups\")}\n                onClick={this.grpsExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.groupsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Shared with groups\")}\n                </span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"shared-with-ocm/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"shared-with-ocm\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"shared-with-ocm\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {enableOCMViaWebdav && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"ocm-via-webdav/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"ocm-via-webdav\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"ocm-via-webdav\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {/* KEEPER lib details button. FEXME! */}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Library Details\")}\n                onClick={this.libdtExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.libraryDetailsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-list-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Library Details\")}</span>\n              </a>\n              {this.renderLibraryDetails()}\n            </li>\n          </ul>\n\n          <h3 className=\"sf-heading\">{gettext(\"Tools\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"starred\"\n                )}`}\n                to={siteRoot + \"starred/\"}\n                title={gettext(\"Favorites\")}\n                onClick={(e) => this.tabItemClick(e, \"starred\")}\n              >\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Favorites\")}</span>\n              </Link>\n            </li>\n            {showActivity && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"dashboard\"\n                  )}`}\n                  to={siteRoot + \"dashboard/\"}\n                  title={gettext(\"Activities\")}\n                  onClick={(e) => this.tabItemClick(e, \"dashboard\")}\n                >\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Activities\")}</span>\n                </Link>\n              </li>\n            )}\n            {canPublishRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"published\"\n                  )}`}\n                  to={siteRoot + \"published/\"}\n                  title={gettext(\"Published Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"published\")}\n                >\n                  <span\n                    className=\"sf2-icon-wiki-view\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Published Libraries\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {isDocs && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"drafts\")}\n              >\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"drafts\"\n                  )}`}\n                  to={siteRoot + \"drafts/\"}\n                  title={gettext(\"Drafts\")}\n                >\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"draft-info nav-text\">\n                    {gettext(\"Drafts\")}\n                    {this.props.draftCounts === 0 ? (\n                      \"\"\n                    ) : (\n                      <Badge color=\"info\" pill>\n                        {this.props.draftCounts}\n                      </Badge>\n                    )}\n                  </span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"linked-devices\"\n                )}`}\n                to={siteRoot + \"linked-devices/\"}\n                title={gettext(\"Linked Devices\")}\n                onClick={(e) => this.tabItemClick(e, \"linked-devices\")}\n              >\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Linked Devices\")}</span>\n              </Link>\n            </li>\n            {canInvitePeople && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"invitations\"\n                  )}`}\n                  to={siteRoot + \"invitations/\"}\n                  title={gettext(\"Invite Guest\")}\n                  onClick={(e) => this.tabItemClick(e, \"invitations\")}\n                >\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Invite Guest\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Share Admin\")}\n                onClick={this.shExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.sharedExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Share Admin\")}</span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer && (\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span\n              className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\"\n              aria-hidden=\"true\"\n            ></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        )}\n      </div>\n    );\n  }\n  // KEEPER\n  libdtExtend = () => {\n    this.setState({\n      libraryDetailsExtended: !this.state.libraryDetailsExtended,\n    });\n    this.loadLibraryDetails();\n  };\n\n  loadLibraryDetails = () => {\n    let _this = this;\n    keeperAPI\n      .listLibraryDetails()\n      .then((res) => {\n        let libraryDetailsList = res.data.map((item) => {\n          let libraryDetailsItem = new LibraryDetails(item);\n          return libraryDetailsItem;\n        });\n\n        this.libraryDetailsHeight =\n          (libraryDetailsList.length + 1) * _this.listHeight;\n        _this.setState({\n          libraryDetailItems: libraryDetailsList.sort((a, b) => {\n            return a.repo_name.toLowerCase() < b.repo_name.toLowerCase()\n              ? -1\n              : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  renderLibraryDetails() {\n    let style = { height: 0 };\n    if (this.state.libraryDetailsExtended) {\n      style = { height: this.libraryDetailsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {this.state.libraryDetailItems.map((item) => {\n          return (\n            <li key={item.repo_id} className=\"nav-item\">\n              <a\n                href={siteRoot + \"landing-page/libs/\" + item.repo_id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.repo_name\n                )}`}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.repo_name}</span>\n              </a>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport {\n  gettext,\n  mediaUrl,\n  logoPath,\n  logoWidth,\n  logoHeight,\n  siteTitle,\n  seafileVersion,\n} from \"../../utils/constants\";\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n  toggle = () => {\n    this.props.onCloseAboutDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}>\n            <span aria-hidden=\"true\">×</span>\n          </button>\n          <div className=\"about-content\">\n            <p>\n              <img\n                src={mediaUrl + logoPath}\n                height={logoHeight}\n                width={logoWidth}\n                title={siteTitle}\n                alt=\"logo\"\n              />\n            </p>\n            <p>\n              {gettext(\"Server Version: \")}\n              {seafileVersion}\n              <br />© 2023 {gettext(\"KEEPER\")}\n            </p>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from \"react\";\nimport { gettext, siteRoot } from \"../utils/constants\";\nimport ModalPortal from \"./modal-portal\";\nimport AboutDialog from \"./dialog/about-dialog\";\n\nclass SideNavFooter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n      collapsed: true,\n    };\n  }\n\n  onAboutDialogToggle = () => {\n    this.setState({ isAboutDialogShow: !this.state.isAboutDialogShow });\n  };\n\n  onFooterExpandedToggle = () => {\n    this.setState({ collapsed: !this.state.collapsed });\n  };\n\n  render() {\n    const elementBodyStyle = {\n      maxHeight: this.state.collapsed ? \"0\" : \"30rem\",\n      borderBottomWidth: this.state.collapsed ? \"0\" : \"1px\",\n    };\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer\">\n          <div id=\"footer-header\">\n            <span\n              aria-hidden=\"true\"\n              className={\n                (this.state.collapsed\n                  ? \"keeper-icon-triangle-up\"\n                  : \"keeper-icon-triangle-down\") + \" vam\"\n              }\n              onClick={this.onFooterExpandedToggle}\n            />\n            &nbsp;\n            <a\n              href={siteRoot + \"project-catalog/\"}\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext(\"Project Catalog\")}\n            </a>\n            <a\n              href=\"https://mpdl.zendesk.com/hc/en-us/categories/360001234340-Keeper\"\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext(\"Help / Knowledge Base\")}\n            </a>\n            <a\n              className=\"item cursor-pointer last-item\"\n              onClick={this.onAboutDialogToggle}\n            >\n              {gettext(\"About\")}\n            </a>\n          </div>\n\n          <div id=\"footer-body\" style={elementBodyStyle}>\n            <br />\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>What you need to know</h4>\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/d17ecbb967/\"\n                  target=\"_blank\"\n                >\n                  About Keeper\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/1b0bfceac2/\"\n                  target=\"_blank\"\n                >\n                  Cared Data Commitment\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/2206ad0c0a8346cb8f9e/\"\n                  target=\"_blank\"\n                >\n                  Terms of Service\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>Client</h4>\n                <a href=\"/download_client_program/\" target=\"_blank\">\n                  Download the Keeper client for Windows, Linux, Mac, Android\n                  and iPhone\n                </a>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>The software behind Keeper</h4>\n                <a href=\"https://seafile.com/en/home/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"seafile-logo\"\n                    src=\"/media/custom/seafile_logo_footer.png\"\n                  />\n                  &nbsp;© 2023 Seafile\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>A service by</h4>\n                <a href=\"https://www.mpdl.mpg.de/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"MPDL-logo\"\n                    src=\"/media/custom/mpdl.png\"\n                  />\n                </a>\n                <br />\n                <br />\n                <a href=\"mailto:keeper@mpdl.mpg.de\" target=\"_blank\">\n                  Contact Keeper Support\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/17e4e9d648/\"\n                  target=\"_blank\"\n                >\n                  Impressum\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/bf2c8a977f70428587eb/\"\n                  target=\"_blank\"\n                >\n                  Privacy Policy\n                </a>\n              </div>\n            </div>\n          </div>\n          {this.state.isAboutDialogShow && (\n            <ModalPortal>\n              <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n            </ModalPortal>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://static.zdassets.com/ekr/snippet.js?key=32977f9b-455d-428b-8dd5-f4c65aad0daa\";\n    script.id = \"ze-snippet\";\n    script.async = true;\n    document.body.appendChild(script);\n  }\n\n  render() {\n    return <div className=\"main-panel o-hidden\">{this.props.children}</div>;\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n    \n  }\n  \n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  }\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  }\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, is_admin, isOpIconShown, isPermSelectDialogOpen } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            isEditIconShow={this.state.isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, isOpIconShown, isPermSelectDialogOpen } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            isEditIconShow={isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n          }\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n            <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n              </li>\n              {canGenerateUploadLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n              )}\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n          <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              {canGenerateShareLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n              )}\n              <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from \"../utils/utils\";\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n    if (object.doi != undefined) {\n      this.doi = object.doi;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@reach/router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n    const desktopItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td><Link to={shareRepoUrl}>{data.repo_name}</Link></td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link><br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) &&\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>\n                  }\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares()\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n\t</td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n\t  {item.is_dir ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>\n\t  {this.props.path ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n\tif (index === 0) {\n          nodePath = '/';\n\t} else {\n          nodePath += item + '/';\n\t}\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { post } from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  }\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you don’t receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport makeAnimated from 'react-select/lib/animated';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n  }\n\n  componentDidMount() {\n    this.refs.renameInput.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.refs.renameInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.refs.renameInput.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.onRenameConfirm(e);\n    }\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref=\"renameInput\"\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyPress={this.onKeyPress}\n          onClick={this.onClick}\n        />\n        <button className=\"btn btn-secondary sf2-icon-confirm confirm\" onClick={this.onRenameConfirm}></button>\n        <button className=\"btn btn-secondary sf2-icon-cancel cancel\" onClick={this.onRenameCancel}></button>\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n} from \"reactstrap\";\nimport {\n  gettext,\n  isPro,\n  folderPermEnabled,\n  enableRepoSnapshotLabel,\n  enableResetEncryptedRepoPassword,\n  isEmailConfigured,\n  enableRepoAutoDel,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, \"toggle\");\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === \"Rename\") {\n      this.setState({ isItemMenuShow: !this.state.isItemMenuShow });\n      return;\n    }\n\n    this.setState({ isItemMenuShow: !this.state.isItemMenuShow }, () => {\n      if (this.state.isItemMenuShow) {\n        this.props.onFreezedItem();\n      } else {\n        this.props.onUnfreezedItem();\n      }\n    });\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem =\n      isPro &&\n      repo.encrypted &&\n      enableResetEncryptedRepoPassword &&\n      isEmailConfigured;\n    // KEEPER\n    let showAssignDoiMenuItem = repo.doi && !repo.encrypted;\n    let showArchiveLibraryMenuItem = !repo.encrypted;\n    let showCertifyLibraryMenuItem = !repo.encrypted;\n    let showEditMetadatayMenuItem = !repo.encrypted;\n    let operations = [\"Rename\", \"Transfer\"];\n    if (folderPermEnabled) {\n      operations.push(\"Folder Permission\");\n    }\n    operations.push(\"Share Links Admin\", \"Divider\");\n    if (repo.encrypted) {\n      operations.push(\"Change Password\");\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push(\"Reset Password\");\n    }\n    operations.push(\"History Setting\", \"API Token\");\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push(\"Label Current State\");\n    }\n    if (enableRepoAutoDel) {\n      operations.push(\"Old Files Auto Delete\");\n    }\n    //KEEPER\n    operations.push(\"Divider\");\n    if (showAssignDoiMenuItem) {\n      operations.push(\"Assign DOI to current state\");\n    }\n    if (showArchiveLibraryMenuItem) {\n      operations.push(\"Archive Library\");\n    }\n    if (showCertifyLibraryMenuItem) {\n      operations.push(\"Certify Library\");\n    }\n    if (showEditMetadatayMenuItem) {\n      operations.push(\"Edit Metadata\");\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = \"\";\n    switch (item) {\n      case \"Star\":\n        translateResult = gettext(\"Star\");\n        break;\n      case \"Unstar\":\n        translateResult = gettext(\"Unstar\");\n        break;\n      case \"Share\":\n        translateResult = gettext(\"Share\");\n        break;\n      case \"Delete\":\n        translateResult = gettext(\"Delete\");\n        break;\n      case \"Rename\":\n        translateResult = gettext(\"Rename\");\n        break;\n      case \"Transfer\":\n        translateResult = gettext(\"Transfer\");\n        break;\n      case \"History Setting\":\n        translateResult = gettext(\"History Setting\");\n        break;\n      case \"Change Password\":\n        translateResult = gettext(\"Change Password\");\n        break;\n      case \"Reset Password\":\n        translateResult = gettext(\"Reset Password\");\n        break;\n      case \"Folder Permission\":\n        translateResult = gettext(\"Folder Permission\");\n        break;\n      case \"Label Current State\":\n        translateResult = gettext(\"Label Current State\");\n        break;\n      case \"API Token\":\n        translateResult = \"API Token\"; // translation is not needed here\n        break;\n      case \"Share Links Admin\":\n        translateResult = gettext(\"Share Links Admin\");\n        break;\n      case \"Old Files Auto Delete\":\n        translateResult = gettext(\"Auto deletion\");\n        break;\n      //KEEPER\n      case \"Assign DOI to current state\":\n        translateResult = gettext(\"Assign DOI to current state\");\n        break;\n      case \"Archive Library\":\n        translateResult = gettext(\"Archive Library\");\n        break;\n      case \"Certify Library\":\n        translateResult = gettext(\"Certify Library\");\n        break;\n      case \"Edit Metadata\":\n        translateResult = gettext(\"Edit Metadata\");\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown\n          isOpen={this.state.isItemMenuShow}\n          toggle={this.toggleOperationMenu}\n        >\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext(\"More Operations\")}\n            aria-label={gettext(\"More Operations\")}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu>\n            {operations.map((item, index) => {\n              if (item == \"Divider\") {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem\n                    key={index}\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                    onKeyDown={this.onMenuItemKeyDown}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift(\"Delete\");\n    operations.unshift(\"Share\");\n    this.props.isStarred\n      ? operations.unshift(\"Unstar\")\n      : operations.unshift(\"Star\");\n\n    return (\n      <Dropdown\n        isOpen={this.state.isItemMenuShow}\n        toggle={this.toggleOperationMenu}\n      >\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext(\"More Operations\")}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div\n          className={`${this.state.isItemMenuShow ? \"\" : \"d-none\"}`}\n          onClick={this.toggleOperationMenu}\n        >\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != \"Divider\") {\n                return (\n                  <DropdownItem\n                    key={index}\n                    className=\"mobile-menu-item\"\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, NavLink } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport EmptyTip from '../empty-tip';\n\nconst repoShareUploadLinkItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  activeTab: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item.token);\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (this.props.activeTab === 'shareLinks') {\n      if (item.is_dir) {\n        objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n      } else {\n        objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      }\n    }\n\n    if (this.props.activeTab === 'uploadLinks') {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <a href={objUrl} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.obj_name}</a>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoShareUploadLinkItem.propTypes = repoShareUploadLinkItemPropTypes;\n\nconst RepoShareUploadLinksDialogPropTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinksDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 'shareLinks',\n      repoShareUploadLinkList: [],\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems('share-link');\n  }\n\n  getItems = (itemType) => {\n    const repoID = this.props.repo.repo_id;\n    const request = itemType == 'share-link' ?\n      seafileAPI.listRepoShareLinks(repoID) :\n      seafileAPI.listRepoUploadLinks(repoID);\n    request.then((res) => {\n      this.setState({\n        loading: false,\n        repoShareUploadLinkList: res.data,\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  }\n\n  deleteItem = (token) => {\n    const repoID = this.props.repo.repo_id;\n    const request = this.state.activeTab == 'shareLinks' ?\n      seafileAPI.deleteRepoShareLink(repoID, token) :\n      seafileAPI.deleteRepoUploadLink(repoID, token);\n    request.then((res) => {\n      const repoShareUploadLinkList = this.state.repoShareUploadLinkList.filter(item => {\n        return item.token !== token;\n      });\n      this.setState({\n        repoShareUploadLinkList: repoShareUploadLinkList\n      });\n    }).catch(error => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n    if (tab == 'shareLinks') {\n      this.getItems('share-link');\n    }\n    if (tab == 'uploadLinks') {\n      this.getItems('upload-link');\n    }\n  };\n\n  render() {\n\n    const { loading, errorMsg, activeTab, repoShareUploadLinkList } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} Share/Upload Links').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '800px'}}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}}></span>\n        </ModalHeader>\n        <ModalBody className=\"p-0 pb-4\">\n          <div className=\"main-panel-center\">\n            <div className=\"cur-view-container\" role=\"tablist\">\n              <div className=\"cur-view-path share-upload-nav\">\n                <ul className=\"nav\">\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'shareLinks'} aria-controls=\"share-links-panel\">\n                    <NavLink className={activeTab === 'shareLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Share Links')}</NavLink>\n                  </li>\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'uploadLinks'} aria-controls=\"upload-links-panel\">\n                    <NavLink className={activeTab === 'uploadLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Upload Links')}</NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"cur-view-content\" style={{minHeight: '20rem', maxHeight: '20rem'}} role=\"tabpanel\" id={activeTab === 'shareLinks' ? 'share-links-panel' : 'upload-links-panel'}>\n                {loading && <Loading />}\n                {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n                {!loading && !errorMsg && !repoShareUploadLinkList.length &&\n                  <EmptyTip forDialog={true}>\n                    <p className=\"text-secondary\">{activeTab == 'shareLinks' ? gettext('No share links') : gettext('No upload links')}</p>\n                  </EmptyTip>\n                }\n                {!loading && !errorMsg && repoShareUploadLinkList.length > 0 &&\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"22%\">{gettext('Creator')}</th>\n                      <th width=\"20%\">{gettext('Name')}</th>\n                      <th width=\"48%\">{gettext('Link')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.repoShareUploadLinkList.map((item, index) => {\n                      return (\n                        <RepoShareUploadLinkItem\n                          key={index}\n                          item={item}\n                          activeTab={this.state.activeTab}\n                          deleteItem={this.deleteItem}\n                        />\n                      );\n                    })}\n                  </tbody>\n                </table>\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoShareUploadLinksDialog.propTypes = RepoShareUploadLinksDialogPropTypes;\n\nexport default RepoShareUploadLinksDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap'; \nimport { gettext } from '../../utils/constants';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass AssignDoiDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  formSubmit = () => {\n    const {repoID, repoName} = this.props;\n    this.props.toggleDialog();\n    keeperAPI.addDoi(repoID).then((res) => {\n      if (res.data && res.data['msg']) {\n        toaster.success(res.data['msg'], {duration: 3});\n      }\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg, {duration: 3});\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}> <span>{gettext('Assign DOI to {library_name}').replace('{library_name}','')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n        <ModalBody>\n          {gettext(\"Please note: a DOI identifier will be assigned to the current state of the selected library (snapshot). The DOI will persistently reference to the snapshot and not the latest state of the library. A DOI can only be created once per library.\")}\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Assign DOI')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAssignDoiDialog.propTypes = propTypes;\n\nexport default AssignDoiDialog;\n","import React, {Fragment} from 'react';\nimport Select from 'react-select';\nimport AsyncCreatableSelect from 'react-select/lib/AsyncCreatable';\nimport {Utils} from '../utils/utils';\nimport {gettext,} from '../utils/constants';\nimport {keeperAPI} from '../utils/seafile-api';\nimport toaster from './toast';\nimport {Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Input, Label, Row, Tooltip} from 'reactstrap';\nimport PropTypes from 'prop-types';\n\nimport '../css/toolbar.css';\nimport '../css/search.css';\n\nimport '../css/user-settings.css';\nimport '../css/keeper-archive-metadata-form.css';\n\nlet mpgInstituteOptions = [];\n\nconst defaultResourceType = \"Library\";\nconst resourceTypes = [\"Library\", \"Project\"];\n\nconst defaultAuthors = [{firstName: \"\", lastName: \"\", affs: [\"\"]}];\nconst defaultDirectors = [{firstName: \"\", lastName: \"\"}];\nconst defaultPublisher = gettext(\"MPDL Keeper Service, Max-Planck-Gesellschaft zur Förderung der Wissenschaften e. V.\");\n\nconst defaultMd = {\n  title: \"\",\n  authors: defaultAuthors,\n  publisher: defaultPublisher,\n  description: \"\",\n  year: \"\",\n  institute: \"\",\n  department: \"\",\n  directors: defaultDirectors,\n  resourceType: defaultResourceType,\n  license: \"\",\n  errors: \"\",\n};\n\nconst defaultValidMd = {\n  title: true,\n  authors: [[true, true]],\n  publisher: true,\n  description: true,\n  year: true,\n  institute: true,\n  department: true,\n  directors: [[true, true]],\n  resourceType: true,\n};\n\nconst infoAreaPropTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nclass InfoArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      helpTooltipOpen: false,\n      errorTooltipOpen: false,\n    };\n  }\n\n  toggleHelp = () => {\n    this.setState({\n      helpTooltipOpen: !this.state.helpTooltipOpen,\n    });\n  };\n\n  toggleError = () => {\n    this.setState({\n      errorTooltipOpen: !this.state.errorTooltipOpen,\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"input-tip pt-0\">\n          {this.props.id != \"license\" &&\n          <span style={{color: \"red\", fontWeight: \"900\"}}>*&nbsp;&nbsp;</span>\n          }\n          <i className=\"fas fa-question-circle\" id={this.props.id + \"-help\"}/>\n          <Tooltip\n            toggle={this.toggleHelp}\n            delay={{show: 0, hide: 0}}\n            target={this.props.id + \"-help\"}\n            placement=\"right\"\n            isOpen={this.state.helpTooltipOpen}\n          >\n            {this.props.helpText}\n          </Tooltip>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nInfoArea.propTypes = infoAreaPropTypes;\n\n\nconst keeperArchiveMetadataFormPropTypes = {\n  repoID: PropTypes.string.isRequired,\n};\n\nclass KeeperArchiveMetadataForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...defaultMd,\n      validMd: defaultValidMd,\n      isSaved: true,\n      isButton1Disabled: false,\n      isButton2Disabled: true,\n    };\n\n  }\n\n  componentDidMount() {\n    keeperAPI\n      .getArchiveMetadata(this.props.repoID)\n      .then((res) => {\n        let newState = this.state;\n        if ('data' in res) {\n          Object.keys(defaultMd).map((k) => {\n            newState[k] = k in res.data ? res.data[k] : \"\";\n          });\n          if (!(\"authors\" in newState && newState.authors.length > 0)) {\n            newState.authors = defaultAuthors;\n          }\n          if (!(\"directors\" in newState && newState.directors.length > 0)) {\n            newState.directors = defaultDirectors;\n          }\n          if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n            newState.publisher = defaultPublisher;\n          }\n          if (\n            !(\"resourceType\" in newState && newState.resourceType && newState.resourceType.trim())\n          ) {\n            newState.resourceType = defaultResourceType;\n          }\n        } else {\n          newState = defaultMd;\n        }\n\n        newState.validMd = this.getValidMd(newState);\n\n        this.setState(newState, () => this.setButtons());\n\n        keeperAPI.getMpgInstitutes().then((res2) => {\n          res2.data.map((v) => {\n            mpgInstituteOptions.push({value: v, label: v});\n          });\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  }\n\n  isFieldValid = (key, value) => {\n    if (!key || !value)\n      return false;\n    let isValid = true;\n    if (key == \"title\" || key == \"description\" || key == \"publisher\" || key == \"department\" || key == \"institute\") {\n      isValid = value.trim() != \"\";\n    } else if (key == \"year\") {\n      const reg = new RegExp(\"^\\\\d{4}$\");\n      //const parsed = parseInt(value, 10);\n      //isValid = !isNaN(parsed) && parsed > 0;\n      isValid = reg.test(value);\n    } else if (key == \"author\" || key == \"director\") {\n      isValid = [Boolean(value.firstName && value.firstName.trim()), Boolean(value.lastName && value.lastName.trim())];\n    }\n    return isValid;\n  }\n\n  isFormValid = (validMd) => {\n    let isValid = true;\n    outer: for (let key in validMd) {\n      if (key == \"authors\" || key == \"directors\") {\n        for (let a of validMd[key])\n          if (!a[0] || !a[1]) {\n            isValid = false;\n            break outer;\n          }\n      } else if (!validMd[key]) {\n        isValid = false;\n        break outer;\n      }\n    }\n    return isValid;\n  }\n\n  setButtons = () => {\n    const isValid = this.isFormValid(this.state.validMd);\n    this.setState({\n      isButton1Disabled: this.state.isSaved && isValid,\n      isButton2Disabled: !this.state.isSaved || !isValid,\n    });\n  }\n\n  getValidMd = (md) => {\n    Object.keys(defaultValidMd).map(k => {\n      if (k == \"authors\" || k == \"directors\") {\n        for (let idx in md[k]) {\n          this.state.validMd[k][idx] = this.isFieldValid(k.slice(0, -1), md[k][idx]);\n        }\n      } else {\n        this.state.validMd[k] = this.isFieldValid(k, md[k]);\n      }\n    });\n    return this.state.validMd;\n  }\n\n  onButton1 = e => {\n    e.preventDefault();\n    this.props.onButton1(defaultMd, this.state)\n      .then(res => {\n        res.validMd = this.getValidMd(res);\n        res.isSaved = true;\n        this.setState(res, () => this.setButtons());\n        toaster.success(\n          gettext(\"Success.\") + (this.state.isButton2Disabled ? \"\" : \" \" + gettext(\"Now you can archive.\")),\n          {duration: 3}\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onButton2 = e => {\n    this.props.onButton2()\n      .then(msg => {\n        toaster.success(gettext(msg), {duration: 3});\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  handleInputChange(e, key) {\n    this.state.validMd[key] = this.isFieldValid(key, e.target.value);\n    this.setState({\n      [key]: e.target.value,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  setAuthorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.authors[idx] = this.isFieldValid(\"author\", values[idx]);\n    }\n    this.setState({\n      authors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => {\n      this.setButtons();\n    }\n    );\n  }\n\n  handleAuthorAddFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\", affs: [\"\"]});\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorRemoveFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorInputChange = (idx, e) => {\n    const values = [...this.state.authors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffInputChange = (idx, aidx, e) => {\n    const values = [...this.state.authors];\n    values[idx].affs[aidx] = e.target.value;\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffAddFields = (idx, aidx) => {\n    const values = [...this.state.authors];\n    values[idx].affs.splice(aidx + 1, 0, \"\");\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffRemoveFields = (index, aidx) => {\n    const values = [...this.state.authors];\n    values[index].affs.splice(aidx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  setDirectorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.directors[idx] = this.isFieldValid(\"director\", values[idx]);\n    }\n    this.setState({\n      directors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  handleDirectorAddFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\"});\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorRemoveFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx, 1);\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorInputChange = (idx, e) => {\n    const values = [...this.state.directors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setDirectorInputFields(values);\n  };\n\n  onResourceSelectChange = selectedItem => {\n    this.setState({\n      resourceType: selectedItem.value,\n    });\n  };\n\n  resourceOptions = resourceTypes.map((item) => {\n    return {value: item, label: gettext(item)};\n  });\n\n  filterInstitutes = input => {\n    return mpgInstituteOptions.filter((i) =>\n      i.label.toLowerCase().includes(input.toLowerCase())\n    );\n  };\n\n  promiseOptions = input =>\n    new Promise((resolve) => {\n      resolve(this.filterInstitutes(input));\n    });\n\n  handleInstituteChange = option => {\n    let insName =\n      option == null\n        ? \"\"\n        : !(\"value\" in option) || option.value.trim() === \"\"\n          ? \"\"\n          : option.value;\n    this.state.validMd.institute = this.isFieldValid(\"institute\", insName);\n    this.setState({\n      institute: insName,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  };\n\n  validationProps = key => {\n    return (this.state.validMd[key] ? {valid: true} : {invalid: true});\n  }\n\n  validationInSelects = key => {\n    return (this.state.validMd[key] ? \"is-valid\" : \"is-invalid\");\n  }\n\n  validationInAuthors = (idx, nidx) => {\n    return (this.state.validMd.authors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  validationInDirectors = (idx, nidx) => {\n    return (this.state.validMd.directors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  render() {\n\n    return (\n\n      <Fragment>\n        <Modal isOpen={true}>\n\n          <form method=\"post\">\n\n            <ModalHeader toggle={this.props.hideDialog}>\n              {this.props.header}\n            </ModalHeader>\n            <ModalBody>\n              {this.props.body}\n\n              <div className=\"h-100 d-flex flex-column\">\n                <div className=\"flex-auto d-flex o-hidden\">\n                  <div className=\"main-panel d-flex flex-column\">\n                    <div className=\"content position-relative\" style={{paddingBottom: \"0rem\"}}>\n\n                      {/*Title*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-title\"\n                            sm={1}\n                          >\n                            {gettext(\"Title\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                type=\"textarea\"\n                                className=\"form-control\"\n                                placeholder={gettext(\"Title of your research project\") + \"...\"}\n                                value={this.state.title}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"title\");\n                                }}\n                                {...this.validationProps(\"title\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea id=\"title\"\n                                helpText={gettext(\"Please enter the title of your research project.\")}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Authors*/}\n                      <FormGroup row className=\"md-item\">\n                        {this.state.authors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-authors\"\n                              sm={1}\n                              className=\"pt-3\"\n                              for=\"lbl-authors\"\n                            >\n                              {gettext(\"Author\") +\n                              (this.state.authors.length > 1\n                                ? \" #\" + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <Col sm={4} className=\"form-group md-item\">\n                              <Label for=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 0)}\n                              />\n                            </Col>\n                            <div className=\"form-group col-sm-5 md-item\">\n                              <label htmlFor=\"lastName\">\n                                {gettext('Last Name')}:\n                              </label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 1)}\n                              />\n                            </div>\n                            <div className=\"form-group col-sm-1\">\n                              {this.state.authors.length > 1 && (\n                                <button\n                                  className=\"author-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleAuthorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"author-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleAuthorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </div>\n                            {index == 0 &&\n                            <span className=\"info-area-names\">\n                              <InfoArea\n                                id=\"author\"\n                                className=\"info-area-names\"\n                                helpText={gettext(\"Please enter the authors and affiliation of your research project.\")}\n                              />\n                            </span>\n                            }\n\n                            {inputField.affs.map((_, aidx) => (\n                              <React.Fragment\n                                key={`${inputField}~${index}~${aidx}`}\n                              >\n                                <div className=\"form-group col-sm-11 ml-2\">\n                                  <label\n                                    className=\"offset-sm-1\"\n                                    htmlFor=\"lbl-affiliation\"\n                                  >\n                                    {gettext('Affiliation') +\n                                    (inputField.affs.length > 1\n                                      ? ' #' + (aidx + 1)\n                                      : \"\")}\n                                    :\n                                  </label>\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control  offset-sm-1 col-sm-11\"\n                                    value={inputField.affs[aidx]}\n                                    onChange={(e) =>\n                                      this.handleAuthorAffInputChange(\n                                        index,\n                                        aidx,\n                                        e\n                                      )\n                                    }\n                                  />\n                                </div>\n                                <div className=\"form-group\">\n                                  {inputField.affs.length > 1 && (\n                                    <button\n                                      className=\"affiliation-control btn btn-link\"\n                                      type=\"button\"\n                                      onClick={() =>\n                                        this.handleAuthorAffRemoveFields(\n                                          index,\n                                          aidx\n                                        )\n                                      }\n                                    >\n                                      -\n                                    </button>\n                                  )}\n                                  <button\n                                    className=\"affiliation-control btn btn-link\"\n                                    type=\"button\"\n                                    onClick={() =>\n                                      this.handleAuthorAffAddFields(index, aidx)\n                                    }\n                                  >\n                                    +\n                                  </button>\n                                </div>\n                              </React.Fragment>\n                            ))}\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Publisher*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-publisher\"\n                            sm={1}\n                            htmlFor=\"publisher\"\n                          >\n                            {gettext('Publisher')}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"publisher\"\n                                type=\"textarea\"\n                                style={{height: \"4em\"}}\n                                placeholder={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.publisher}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"publisher\");\n                                }}\n                                {...this.validationProps(\"publisher\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"publisher\"\n                                helpText={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Description*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-description\"\n                            sm={1}\n                            htmlFor=\"description\"\n                          >\n                            {gettext(\"Description\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"description\"\n                                type=\"textarea\"\n                                style={{height: \"6em\"}}\n                                placeholder={gettext(\"Please enter the description of your research project\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.description}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"description\");\n                                }}\n                                {...this.validationProps(\"description\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"description\"\n                                helpText={gettext(\"Please enter the description of your research project\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n\n                      </FormGroup>\n\n                      {/*Year*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-year\"\n                          sm={1}\n                          className=\"pt-0\"\n                          for=\"lbl-year\"\n                        >\n                          {gettext(\"Year\")}:\n                        </Label>\n                        <Col sm={4}>\n                          <Input\n                            className=\"form-control\"\n                            placeholder={gettext(\"Year of project start...\")}\n                            value={this.state.year}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"year\");\n                            }}\n                            {...this.validationProps(\"year\")}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"year\"\n                          helpText={gettext(\"Please enter year of project start.\")}\n                        />\n                      </FormGroup>\n\n                      {/*Institute*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-institute\"\n                          className=\"pt-3\"\n                          sm={1}\n                          for=\"institute\"\n                        >\n                          {gettext('Institute')}:\n                        </Label>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label>{gettext('Institute name')}:</Label>\n                          <AsyncCreatableSelect\n                            id=\"institute\"\n                            className={this.state.validMd.institute ? \"is-valid\" : \"is-invalid\"}\n                            isClearable\n                            cacheOptions\n                            value={{\n                              value: this.state.institute,\n                              label: this.state.institute,\n                            }}\n                            onChange={this.handleInstituteChange}\n                            loadOptions={this.promiseOptions}\n                            {...this.validationProps(\"institute\")}\n                          />\n                        </Col>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label for=\"department\">\n                            {gettext('Department')}:\n                          </Label>\n                          <Input\n                            value={this.state.department}\n                            onChange={(e) =>\n                              this.handleInputChange(e, \"department\")\n                            }\n                            {...this.validationProps(\"department\")}\n                          />\n                        </Col>\n                        <span className=\"info-area-names\">\n                          <InfoArea\n                            id=\"institute\"\n                            helpText={gettext(\"Please enter the related Max Planck Institute for this research project.\")}\n                          />\n                        </span>\n                        {this.state.directors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-directors\"\n                              sm={2}\n                              className=\"form-group offset-sm-1 pt-3\"\n                              for=\"directors\"\n                            >\n                              {gettext('Director or PI') +\n                              (this.state.directors.length > 1\n                                ? ' #' + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label form=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 0)}\n\n                              />\n                            </FormGroup>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label for=\"lastName\">\n                                {gettext('Last Name')}:\n                              </Label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 1)}\n                              />\n                            </FormGroup>\n                            <FormGroup>\n                              {this.state.directors.length > 1 && (\n                                <button\n                                  className=\"director-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleDirectorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"director-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleDirectorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </FormGroup>\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Resource Type*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-resource-type\"\n                          sm={2}\n                          className=\"pt-0\"\n                          for=\"resource-type\"\n                        >\n                          {gettext('Resource Type')}:\n                        </Label>\n                        <Col sm={3}>\n                          <Select\n                            id=\"resource-type\"\n                            value={{\n                              value: this.state.resourceType,\n                              label: gettext(this.state.resourceType)\n                            }}\n                            options={this.resourceOptions}\n                            onChange={this.onResourceSelectChange}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"resource-type\"\n                          helpText={gettext(\"Please enter the resource type of the entity. Allowed values for this field: Library (default), Project.\")}\n                        />\n                      </Row>\n\n                      {/*License*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-license\"\n                          className=\"pt-0\"\n                          sm={1}\n                          for=\"license\"\n                        >\n                          {gettext(\"License\")}:\n                        </Label>\n                        <Col sm={7}>\n                          <Input\n                            id=\"license\"\n                            placeholder={gettext(\"Please enter the license\") + \"...\"}\n                            className=\"form-control\"\n                            value={this.state.license}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"license\");\n                            }}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"license\" helpText={gettext(\"Please enter the license\") + \".\"}\n                        />\n                      </Row>\n                      {/*<br />*/}\n                      {/*<pre>{JSON.stringify(this.state, null, 2)}</pre>*/}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ModalBody>\n            <ModalFooter>\n              {this.props.onButton1 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-1 col-sm-3\"\n                disabled={this.state.isButton1Disabled}\n                onClick={(e) => this.onButton1(e)}>\n                {this.props.button1Label}\n              </button>\n              }\n              {this.props.onButton2 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-9 col-sm-3\"\n                disabled={this.state.isButton2Disabled}\n                onClick={(e) => this.onButton2(e)}>\n                {this.props.button2Label}\n              </button>\n              }\n            </ModalFooter>\n          </form>\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nKeeperArchiveMetadataForm.propTypes = keeperArchiveMetadataFormPropTypes;\n\nexport default KeeperArchiveMetadataForm;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\nimport KeeperArchiveMetadataForm from '../keeper-archive-metadata-form';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass ArchiveLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onUpdateArchiveMetadata = (defaultMd, state) => {\n        let newState = {};\n        Object.keys(defaultMd).map(k => {\n            newState[k] = state[k];\n        });\n        //return promise, not run!\n        return keeperAPI\n            .updateArchiveMetadata(this.props.repoID, newState)\n            .then((res) => {\n                newState = res.data;\n\n                newState.validMd = state.validMd;\n\n                //if publisher is empty, apply defaultPublisher\n                if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n                    newState.publisher = defaultMd.publisher;\n                    newState.validMd.publisher = true;\n                }\n\n                return newState;\n            })\n            .catch((error) => {\n                let errMessage = Utils.getErrorMsg(error);\n                toaster.danger(errMessage);\n            });\n    }\n\n    onArchiveClick = (a, b) => {\n        this.props.hideDialog();\n        //return promise, not run!\n        return keeperAPI.archiveLibrary(this.props.repoID)\n            .then((resp) => {\n                return resp.data.msg;\n        });\n    }\n\n    render() {\n        const archive_info = gettext(\"By archiving this library, the current state of everything contained within \" +\n            \"it will be archived on a dedicated archiving system. For more information, please follow the link: \" +\n            \"{archive_info_link} This library can be archived {quota} more times. Please, fill out the following archive metadata form.\").replace(\"{quota}\",\n            this.props.quota);\n        const split = archive_info.split('{archive_info_link}')\n        return (\n                <KeeperArchiveMetadataForm\n                    hideDialog={this.props.hideDialog}\n                    repoID={this.props.repoID}\n                    header={\n                        <Fragment>\n                            <span>{gettext('Archive {library_name}').replace('{library_name}', '')}</span>\n                            <span style={{color: '#57a5b8'}}>{this.props.repoName}</span>\n                            <span> {gettext('library')}</span>\n                        </Fragment>\n                    }\n                    body={\n                        <Fragment>\n                            {split[0]}\n                            <a href=\"https://mpdl.zendesk.com/hc/en-us/articles/360011432700-Archiving\"\n                                target=\"_blank\">{gettext(\"Information on Archiving\")}</a>.\n                            {split[1]}\n                        </Fragment>\n                    }\n                    onButton1={this.onUpdateArchiveMetadata}\n                    button1Label={gettext(\"Save metadata\")}\n                    onButton2={this.onArchiveClick}\n                    button2Label={gettext(\"Archive\")}\n                />\n        )\n    }\n}\n\nArchiveLibraryDialog.propTypes = propTypes;\n\nexport default ArchiveLibraryDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalHeader, ModalBody, ModalFooter} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass CertifyLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\n    formSubmit = () => {\n        this.props.hideDialog();\n        const {repoID} = this.props;\n        keeperAPI.canCertify(repoID, 'dir', '/').then(() => {\n            this.certifyLibrary()\n        }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        })\n    }\n\n    certifyLibrary = () => {\n        const {repoID, repoName} = this.props;\n        toaster.success(gettext('Your files with the library {repoName} are currently being certified. We will inform you once the task has successfully finished. This may take a while.').replace('{repoName}', repoName), {duration: 3});\n        keeperAPI.certifyOnBloxberg(repoID, '/', 'dir', repoName).then(() => {\n            }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        });\n    }\n\n    render() {\n        return (\n            <Modal isOpen={true} toggle={this.props.hideDialog}>\n                <ModalHeader toggle={this.props.hideDialog}>\n                    <span>{gettext('Certify')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n                <ModalBody>\n                    <span>{gettext('Certify all files within the library via the bloxberg blockchain. A new entry under “Library Details” on the left sidebar will be created, where you can access the certified version and the file and a proof of certification. Certifying may take some time, depending on the size of the library. Adding metadata is optional, but recommended.')}</span>\n                </ModalBody>\n                <ModalFooter>\n                    <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Certify')}</button>\n                </ModalFooter>\n            </Modal>\n        )\n    }\n}\n\nCertifyLibraryDialog.propTypes = propTypes;\n\nexport default CertifyLibraryDialog;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MediaQuery from \"react-responsive\";\nimport moment from \"moment\";\nimport { Link, navigate } from \"@reach/router\";\nimport { Utils } from \"../../utils/utils\";\nimport { keeperAPI, seafileAPI } from \"../../utils/seafile-api\";\nimport { gettext, siteRoot, storages } from \"../../utils/constants\";\nimport ModalPortal from \"../../components/modal-portal\";\nimport ShareDialog from \"../../components/dialog/share-dialog\";\nimport toaster from \"../../components/toast\";\nimport DeleteRepoDialog from \"../../components/dialog/delete-repo-dialog\";\nimport TransferDialog from \"../../components/dialog/transfer-dialog\";\nimport LibHistorySettingDialog from \"../../components/dialog/lib-history-setting-dialog\";\nimport ChangeRepoPasswordDialog from \"../../components/dialog/change-repo-password-dialog\";\nimport ResetEncryptedRepoPasswordDialog from \"../../components/dialog/reset-encrypted-repo-password-dialog\";\nimport LabelRepoStateDialog from \"../../components/dialog/label-repo-state-dialog\";\nimport LibSubFolderPermissionDialog from \"../../components/dialog/lib-sub-folder-permission-dialog\";\nimport Rename from \"../../components/rename\";\nimport MylibRepoMenu from \"./mylib-repo-menu\";\nimport RepoAPITokenDialog from \"../../components/dialog/repo-api-token-dialog\";\nimport RepoShareUploadLinksDialog from \"../../components/dialog/repo-share-upload-links-dialog\";\nimport LibOldFilesAutoDelDialog from \"../../components/dialog/lib-old-files-auto-del-dialog\";\nimport AssignDoiDialog from \"../../components/dialog/assign-doi-dialog\";\nimport ArchiveLibraryDialog from \"../../components/dialog/archive-library-dialog\";\nimport CertifyLibraryDialog from \"../../components/dialog/certify-library-dialog\";\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nvar handleCanArchiveResponse = (obj, resp) => {\n  const d = resp.data;\n  //alert(JSON.stringify(d));\n  let msg, error;\n  const default_error =\n    \"Can not archive library due to unknown reason, please contact support.\";\n  if (d.status === \"success\") obj.setState({ quota: d.quota });\n  else if (d.status === \"in_processing\") msg = d.msg;\n  else if (d.status === \"quota_expired\")\n    error = gettext(\n      \"Cannot archive, since the maximum number of archives for this library has been reached. Please contact Keeper support.\"\n    );\n  else if (d.status === \"snapshot_archived\")\n    error = gettext(\n      \"Cannot archive, since the library snapshot has already been archived.\"\n    );\n  else if (d.status === \"is_too_big\")\n    error = gettext(\"Cannot archive, since the library is too large.\");\n  else if (d.status === \"metadata_error\") {\n    //pass, error will be handled via archive metadata form\n  } else if (d.status === \"system_error\") error = d.msg || default_error;\n  else error = default_error;\n  if (error) toaster.danger(error);\n  else if (msg) toaster.success(msg);\n};\n\nclass MylibRepoListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isAssignDoiDialogShow: false,\n      isArchiveLibraryDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n      });\n    }\n  };\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false,\n      });\n    }\n  };\n\n  onMenuItemClick = (item) => {\n    switch (item) {\n      case \"Star\":\n      case \"Unstar\":\n        this.onToggleStarRepo();\n        break;\n      case \"Share\":\n        this.onShareToggle();\n        break;\n      case \"Delete\":\n        this.onDeleteToggle();\n        break;\n      case \"Rename\":\n        this.onRenameToggle();\n        break;\n      case \"Transfer\":\n        this.onTransferToggle();\n        break;\n      case \"History Setting\":\n        this.onHistorySettingToggle();\n        break;\n      case \"Change Password\":\n        this.onChangePasswordToggle();\n        break;\n      case \"Reset Password\":\n        this.onResetPasswordToggle();\n        break;\n      case \"Folder Permission\":\n        this.onFolderPermissionToggle();\n        break;\n      case \"Label Current State\":\n        this.onLabelToggle();\n        break;\n      case \"API Token\":\n        this.onAPITokenToggle();\n        break;\n      case \"Share Links Admin\":\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case \"Old Files Auto Delete\":\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case \"Assign DOI to current state\":\n        this.onAssignDoiToggle();\n        break;\n      case \"Archive Library\":\n        this.onArchiveLibraryToggle();\n        break;\n      case \"Certify Library\":\n        this.onCertifyLibraryToggle();\n        break;\n      case \"Edit Metadata\":\n        this.onEditMetadataToggle();\n        break;\n      default:\n        break;\n    }\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  };\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI\n        .unstarItem(this.props.repo.repo_id, \"/\")\n        .then(() => {\n          this.setState({ isStarred: !this.state.isStarred });\n          const msg = gettext(\n            \"Successfully unstarred {library_name_placeholder}.\"\n          ).replace(\"{library_name_placeholder}\", repoName);\n          toaster.success(msg);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(this.props.repo.repo_id, \"/\")\n        .then(() => {\n          this.setState({ isStarred: !this.state.isStarred });\n          const msg = gettext(\n            \"Successfully starred {library_name_placeholder}.\"\n          ).replace(\"{library_name_placeholder}\", repoName);\n          toaster.success(msg);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({ isDeleteDialogShow: !this.state.isDeleteDialogShow });\n  };\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({ isRenaming: !this.state.isRenaming });\n  };\n\n  onTransferToggle = () => {\n    this.setState({ isTransferDialogShow: !this.state.isTransferDialogShow });\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({\n      isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow,\n    });\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({\n      isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow,\n    });\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({\n      isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow,\n    });\n  };\n\n  onLabelToggle = () => {\n    this.setState({\n      isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen,\n    });\n  };\n\n  onFolderPermissionToggle = () => {\n    this.setState({\n      isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow,\n    });\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({ isAPITokenDialogShow: !this.state.isAPITokenDialogShow });\n  };\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({\n      isRepoShareUploadLinksDialogOpen:\n        !this.state.isRepoShareUploadLinksDialogOpen,\n    });\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({\n      isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen,\n    });\n  };\n\n  onAssignDoiToggle = () => {\n    this.setState({ isAssignDoiDialogShow: !this.state.isAssignDoiDialogShow });\n  };\n\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\")\n          this.setState({ isArchiveLibraryDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\")\n          this.setState({ isEditMetadataDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI\n      .renameRepo(repoID, newName)\n      .then(() => {\n        this.props.onRenameRepo(repo, newName);\n        this.onRenameCancel();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({ isRenaming: !this.state.isRenaming });\n  };\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI\n      .transferRepo(repoID, user.email)\n      .then((res) => {\n        this.props.onTransferRepo(repoID);\n        let message = gettext(\"Successfully transferred the library.\");\n        toaster.success(message);\n      })\n      .catch((error) => {\n        if (error.response) {\n          toaster.danger(error.response.data.error_msg || gettext(\"Error\"), {\n            duration: 3,\n          });\n        } else {\n          toaster.danger(gettext(\"Failed. Please check the network.\"), {\n            duration: 3,\n          });\n        }\n      });\n    this.onTransferToggle();\n  };\n\n  onDeleteRepo = (repo) => {\n    seafileAPI\n      .deleteRepo(repo.repo_id)\n      .then((res) => {\n        this.setState({\n          isRepoDeleted: true,\n          isDeleteDialogShow: false,\n        });\n\n        this.props.onDeleteRepo(repo);\n        let name = repo.repo_name;\n        var msg = gettext(\"Successfully deleted {name}.\").replace(\n          \"{name}\",\n          name\n        );\n        toaster.success(msg);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext(\"Error\")) {\n          let name = repo.repo_name;\n          errMessage = gettext(\"Failed to delete {name}.\").replace(\n            \"{name}\",\n            name\n          );\n        }\n        toaster.danger(errMessage);\n\n        this.setState({ isRepoDeleted: false });\n      });\n  };\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(\n      repo.repo_name\n    )}/`;\n    return (\n      <tr\n        className={this.state.highlight ? \"tr-highlight\" : \"\"}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onRepoClick}\n        onFocus={this.onFocus}\n      >\n        <td className=\"text-center\">\n          <a\n            href=\"#\"\n            role=\"button\"\n            aria-label={\n              this.state.isStarred ? gettext(\"Unstar\") : gettext(\"Star\")\n            }\n            onClick={this.onToggleStarRepo}\n          >\n            <i\n              className={`fa-star ${\n                this.state.isStarred ? \"fas\" : \"far star-empty\"\n              }`}\n            ></i>\n          </a>\n        </td>\n        <td>\n          <img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" />\n        </td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Link to={repoURL}>{repo.repo_name}</Link>\n          )}\n          {!this.state.isRenaming &&\n            !repo.repo_name &&\n            gettext(\n              \"Broken (please contact your administrator to fix this library)\"\n            )}\n        </td>\n        <td>\n          {repo.repo_name && this.state.isOpIconShow && (\n            <div>\n              <a\n                href=\"#\"\n                className=\"op-icon sf2-icon-share\"\n                title={gettext(\"Share\")}\n                role=\"button\"\n                aria-label={gettext(\"Share\")}\n                onClick={this.onShareToggle}\n              ></a>\n              <a\n                href=\"#\"\n                className=\"op-icon sf2-icon-delete\"\n                title={gettext(\"Delete\")}\n                role=\"button\"\n                aria-label={gettext(\"Delete\")}\n                onClick={this.onDeleteToggle}\n              ></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format(\"llll\")}>\n          {moment(repo.last_modified).fromNow()}\n        </td>\n      </tr>\n    );\n  };\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = (this.repoURL = `${siteRoot}library/${\n      repo.repo_id\n    }/${Utils.encodePath(repo.repo_name)}/`);\n\n    return (\n      <tr\n        className={this.state.highlight ? \"tr-highlight\" : \"\"}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onRepoClick}\n      >\n        <td onClick={this.visitRepo}>\n          <img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" />\n        </td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name && (\n            <div>\n              (gettext('Broken (please contact your administrator to fix this\n              library)'))\n            </div>\n          )}\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span\n            className=\"item-meta-info\"\n            title={moment(repo.last_modified).format(\"llll\")}\n          >\n            {moment(repo.last_modified).fromNow()}\n          </span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">{this.renderPCUI()}</MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={\"library\"}\n              itemName={repo.repo_name}\n              itemPath={\"/\"}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAssignDoiDialogShow && (\n          <ModalPortal>\n            <AssignDoiDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onAssignDoiToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\nexport { handleCanArchiveResponse };\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../dialog/repo-share-upload-links-dialog';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Links Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      // scene one: (Share, Delete, itemToggle and other operations);\n      // scene two: (Share, Unshare), (Share), (Unshare)\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      if (operations.length == 2) {\n        return (\n          <Fragment>\n            {shareOperation}\n            {unshareOperation}\n          </Fragment>\n        );\n      }\n      if (operations.length == 1 && operations[0] === 'Share') {\n        return shareOperation;\n      }\n\n      if (operations.length == 1 && operations[0] === 'Unshare') {\n        return unshareOperation;\n      }\n    }\n    return null;\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n  \n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  }\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Detail')} aria-label={gettext('Detail')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFileCancel: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      let isDraft = this.state.isDraft;\n      this.props.onAddFile(path, isDraft);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isDraft: !this.state.isDraft\n        });\n      }\n    }\n\n    if (!this.state.isDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isDraft: !this.state.isdraft\n        });\n      } else {\n        this.setState({\n          isDraft: !this.state.isdraft\n        });\n      }\n    }\n  }\n\n  toggle = () => {\n    this.props.addFileCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { Utils } from \"../../utils/utils\";\nimport toaster from \"../toast\";\nimport KeeperArchiveMetadataForm from \"../keeper-archive-metadata-form\";\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n};\n\nclass KeeperEditMetadataDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onUpdateArchiveMetadata = (defaultMd, state) => {\n    this.props.hideDialog();\n    let newState = {};\n    Object.keys(defaultMd).map((k) => {\n      newState[k] = state[k];\n    });\n    //return promise, not run!\n    return keeperAPI\n      .updateArchiveMetadata(this.props.repoID, newState)\n      .then((res) => {\n        newState = res.data;\n        newState.validMd = state.validMd;\n        //if publisher is empty, apply defaultPublisher\n        if (\n          !(\n            \"publisher\" in newState &&\n            newState.publisher &&\n            newState.publisher.trim()\n          )\n        ) {\n          newState.publisher = defaultMd.publisher;\n          newState.validMd.publisher = true;\n        }\n        return newState;\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  render() {\n    const title = gettext(\"Edit Metadata for {library_name} library\") \n    const split = title.split(\"{library_name}\")\n\n    return (\n      <KeeperArchiveMetadataForm\n        hideDialog={this.props.hideDialog}\n        repoID={this.props.repoID}\n        header={\n          <Fragment>\n            {split[0]}\n            <span style={{ color: \"#57a5b8\" }}> {this.props.repoName}</span>\n            {split.length>1 && split[1]}\n          </Fragment>\n        }\n        onButton1={this.onUpdateArchiveMetadata}\n        button1Label={gettext(\"Save metadata\")}\n      />\n    );\n  }\n}\n\nKeeperEditMetadataDialog.propTypes = propTypes;\n\nexport default KeeperEditMetadataDialog;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from \"reactstrap\";\nimport { Utils } from \"../../utils/utils\";\nimport { gettext } from \"../../utils/constants\";\nimport ModalPortal from \"../modal-portal\";\nimport CreateFolder from \"../../components/dialog/create-folder-dialog\";\nimport CreateFile from \"../../components/dialog/create-file-dialog\";\nimport ShareDialog from \"../../components/dialog/share-dialog\";\nimport ViewModeToolbar from \"./view-mode-toolbar\";\nimport ArchiveLibraryDialog from \"../dialog/archive-library-dialog\";\nimport CertifyLibraryDialog from \"../dialog/certify-library-dialog\";\nimport KeeperEditMetadataDialog from \"../dialog/keeper-edit-metadata-dialog\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { handleCanArchiveResponse } from \"../../pages/my-libs/mylib-repo-list-item\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: \".md\",\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: \"\",\n      isMobileOpMenuOpen: false,\n      isArchiveLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({ isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen });\n  };\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  };\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top = targetRect.bottom;\n    let style = { position: \"fixed\", display: \"block\", left: left, top: top };\n    this.setState({ operationMenuStyle: style });\n  };\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: true,\n      isCreateMenuShow: false,\n    });\n  };\n\n  onUploadFile = (e) => {\n    this.setState({ isUploadMenuShow: false });\n    this.props.onUploadFile(e);\n  };\n\n  onUploadFolder = (e) => {\n    this.setState({ isUploadMenuShow: false });\n    this.props.onUploadFolder(e);\n  };\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: true,\n      isUploadMenuShow: false,\n    });\n  };\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow,\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  };\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \"\",\n    });\n  };\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".md\",\n    });\n  };\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".xlsx\",\n    });\n  };\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".pptx\",\n    });\n  };\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".docx\",\n    });\n  };\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({ isCreateFileDialogShow: false });\n    this.props.onAddFile(filePath, isDraft);\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({ isCreateFolderDialogShow: false });\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some((object) => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  // KEEPER\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repoID)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\" || d.status === \"metadata_error\")\n          this.setState({\n            isArchiveLibraryDialogShow: true,\n            quota: d.quota,\n          });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    this.setState({ isEditMetadataDialogShow: true });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === \"/\" ? \"library\" : \"dir\";\n    let itemName = path == \"/\" ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } =\n      Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    let isArchiveBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isEditMetadataBtnShow =\n      !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isCertifyBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ? (\n                <Fragment>\n                  <button\n                    className=\"btn btn-secondary operation-item\"\n                    onClick={this.onUploadClick}\n                    aria-haspopup=\"true\"\n                    aria-expanded={this.state.isUploadMenuShow}\n                    aria-controls=\"upload-menu\"\n                  >\n                    {gettext(\"Upload\")}\n                  </button>\n                  {this.state.isUploadMenuShow && (\n                    <div\n                      className=\"menu dropdown-menu\"\n                      style={this.state.operationMenuStyle}\n                      role=\"menu\"\n                      id=\"upload-menu\"\n                    >\n                      <button\n                        type=\"button\"\n                        className=\"dropdown-item\"\n                        onClick={this.onUploadFile}\n                        role=\"menuitem\"\n                      >\n                        {gettext(\"Upload Files\")}\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"dropdown-item\"\n                        onClick={this.onUploadFolder}\n                        role=\"menuitem\"\n                      >\n                        {gettext(\"Upload Folder\")}\n                      </button>\n                    </div>\n                  )}\n                </Fragment>\n              ) : (\n                <button\n                  className=\"btn btn-secondary operation-item\"\n                  title={gettext(\"Upload\")}\n                  onClick={this.onUploadFile}\n                >\n                  {gettext(\"Upload\")}\n                </button>\n              )}\n            </Fragment>\n          )}\n          {canCreate && (\n            <Fragment>\n              <button\n                className=\"btn btn-secondary operation-item\"\n                onClick={this.onCreateClick}\n                aria-haspopup=\"true\"\n                aria-expanded={this.state.isUploadMenuShow}\n                aria-controls=\"new-menu\"\n              >\n                {gettext(\"New\")}\n              </button>\n              {this.state.isCreateMenuShow && (\n                <div\n                  className=\"menu dropdown-menu\"\n                  style={this.state.operationMenuStyle}\n                  role=\"menu\"\n                  id=\"new-menu\"\n                >\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateFolderToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Folder\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateFileToggle}\n                  >\n                    {gettext(\"New File\")}\n                  </button>\n                  <div className=\"dropdown-divider\"></div>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateMarkdownToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Markdown File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateExcelToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Excel File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreatePPTToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New PowerPoint File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateWordToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Word File\")}\n                  </button>\n                </div>\n              )}\n            </Fragment>\n          )}\n          {showShareBtn && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Share\")}\n              onClick={this.onShareClick}\n            >\n              {gettext(\"Share\")}\n            </button>\n          )}\n          {/* KEEPER */}\n          {isArchiveBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Archive\")}\n              onClick={this.onArchiveLibraryToggle}\n            >\n              {gettext(\"Archive\")}\n            </button>\n          )}\n          {isCertifyBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Certify\")}\n              onClick={this.onCertifyLibraryToggle}\n            >\n              {gettext(\"Certify\")}\n            </button>\n          )}\n          {isEditMetadataBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Metadata\")}\n              onClick={this.onEditMetadataToggle}\n            >\n              {gettext(\"Metadata\")}\n            </button>\n          )}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown\n          isOpen={this.state.isMobileOpMenuOpen}\n          toggle={this.toggleMobileOpMenu}\n        >\n          <DropdownToggle\n            tag=\"span\"\n            className=\"sf2-icon-plus mobile-toolbar-icon\"\n          />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>\n                {gettext(\"Upload\")}\n              </DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>\n                  {gettext(\"New Folder\")}\n                </DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>\n                  {gettext(\"New File\")}\n                </DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === \"rw\" || userPerm === \"admin\" || isCustomPermission) && (\n          <div className=\"dir-operation\">{content}</div>\n        )}\n        {Utils.isDesktop() && (\n          <ViewModeToolbar\n            currentMode={this.props.currentMode}\n            switchViewMode={this.props.switchViewMode}\n            isCustomPermission={isCustomPermission}\n          />\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <KeeperEditMetadataDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let {dirent} = this.props;\n    this.changeState(dirent);\n    this.newInput.focus();\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport CommonToolbar from \"../../components/toolbar/common-toolbar\";\nimport ViewModeToolbar from \"../../components/toolbar/view-mode-toolbar\";\nimport DirOperationToolBar from \"../../components/toolbar/dir-operation-toolbar\";\nimport MultipleDirOperationToolbar from \"../../components/toolbar/multiple-dir-operation-toolbar\";\nimport ViewFileToolbar from \"../../components/toolbar/view-file-toolbar\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired, // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n  render() {\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span\n              className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\"\n              title={gettext(\"Side Nav Menu\")}\n              onClick={this.props.onSideNavMenuClick}\n            ></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n              isCustomPermission={isCustomPermission}\n            />\n          </div>\n          <CommonToolbar\n            isLibView={true}\n            repoID={this.props.repoID}\n            repoName={this.props.repoName}\n            onSearchedClick={this.props.onSearchedClick}\n            searchPlaceholder={gettext(\"Search files in this library\")}\n          />\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\"\n            title={gettext(\"Side Nav Menu\")}\n            onClick={this.props.onSideNavMenuClick}\n          ></span>\n          {this.props.isDirentSelected ? (\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          ) : (\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isRepoOwner={this.props.isRepoOwner}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          )}\n        </div>\n        <CommonToolbar\n          isLibView={true}\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          onSearchedClick={this.props.onSearchedClick}\n          searchPlaceholder={gettext(\"Search files in this library\")}\n        />\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport InternalLinkDialog from '../dialog/internal-link-dialog';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile &&\n          <InternalLinkDialog\n            repoID={this.props.repoID}\n            path={this.props.currentPath}\n          />\n        }\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  }\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer w-4 h-4 rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  }\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n  }\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  }\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagColor from './tag-color';\nimport TagName from './tag-name';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (userPerm === 'rw') {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" href=\"#\" role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ParticipantsList from '../file-view/participants-list';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath, fileParticipantList } = this.props;\n    const { commentsList } = this.state;\n    return (\n      <div className=\"seafile-comment detail-comments h-100\">\n        <div className=\"flex-fill o-auto\">\n          {commentsList.length > 0 ? (\n            <ul className=\"seafile-comment-list\">\n              {commentsList.map((item, index = 0, arr) => {\n                let oldTime = (new Date(item.created_at)).getTime();\n                let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n                return (\n                  <CommentItem\n                    key={item.id}\n                    item={item}\n                    time={time}\n                    deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment}\n                    editComment={this.editComment}\n                  />\n                );\n              })\n              }\n            </ul>) :\n            <p className=\"text-center my-4\">{gettext('No comment yet.')}</p>\n          }\n        </div>\n        <div className=\"seafile-comment-footer flex-shrink-0\">\n          {fileParticipantList &&\n            <ParticipantsList\n              onParticipantsChange={this.props.onParticipantsChange}\n              participants={fileParticipantList}\n              repoID={repoID}\n              filePath={filePath}\n              showIconTip={true}\n            />\n          }\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment...')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <div className=\"comment-submit-container\">\n            <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport ParticipantsList from '../file-view/participants-list';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false\n    };\n  }\n\n  getDirentPostion = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  render() {\n    let { direntType, direntDetail, fileTagList, fileParticipantList } = this.props;\n    let position = this.getDirentPostion();\n    let direntPath = this.getDirentPath();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n          </tbody>\n        </table>\n      );\n    } else {\n      return (\n        <Fragment>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <ul className=\"file-tag-list\">\n                    {fileTagList.map((fileTag) => {\n                      return (\n                        <li key={fileTag.id} className=\"file-tag-item\">\n                          <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                          <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-participants\">\n                <th>{gettext('Participants')}</th>\n                <td>\n                  {fileParticipantList &&\n                    <ParticipantsList\n                      onParticipantsChange={this.props.onParticipantsChange}\n                      participants={fileParticipantList}\n                      repoID={this.props.repoID}\n                      filePath={direntPath}\n                      showIconTip={false}\n                    />\n                  }\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {this.state.isEditFileTagShow &&\n            <ModalPortal>\n              <EditFileTagDialog\n                repoID={this.props.repoID}\n                fileTagList={fileTagList}\n                filePath={direntPath}\n                toggleCancel={this.onEditFileTagToggle}\n                onFileTagChanged={this.onFileTagChanged}\n              />\n            </ModalPortal>\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent } = this.props;\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={dirent ? dirent.file_tags : []}\n                onFileTagChanged={this.props.onFileTagChanged}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab} className=\"flex-fill o-auto\">\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file text-center\">\n          <p className=\"text-secondary\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              addFileCancel={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MD5 from \"MD5\";\nimport moment from \"moment\";\nimport { UncontrolledTooltip } from \"reactstrap\";\nimport { Dropdown, DropdownToggle, DropdownItem } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  mediaUrl,\n  username,\n  useGoFileserver,\n  fileServerRoot,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\nimport { seafileAPI } from \"../../utils/seafile-api\";\nimport URLDecorator from \"../../utils/url-decorator\";\nimport ItemDropdownMenu from \"../dropdown-menu/item-dropdown-menu\";\nimport Rename from \"../rename\";\nimport ModalPortal from \"../modal-portal\";\nimport MoveDirentDialog from \"../dialog/move-dirent-dialog\";\nimport CopyDirentDialog from \"../dialog/copy-dirent-dialog\";\nimport ShareDialog from \"../dialog/share-dialog\";\nimport ZipDownloadDialog from \"../dialog/zip-download-dialog\";\nimport EditFileTagDialog from \"../dialog/edit-filetag-dialog\";\nimport LibSubFolderPermissionDialog from \"../dialog/lib-sub-folder-permission-dialog\";\n\nimport \"../../css/dirent-list-item.css\";\nimport toaster from \"../toast\";\n\n// KEEPER\nimport ReactTooltip from \"react-tooltip\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport bergImage from \"../../assets/berg_icon.png\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false, // for mobile\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(\n      dirent.permission\n    );\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === \"rw\";\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.isItemFreezed !== this.props.isItemFreezed &&\n      !nextProps.isItemFreezed\n    ) {\n      this.setState(\n        {\n          highlight: false,\n          isOperationShow: false,\n        },\n        () => {\n          if (\n            nextProps.activeDirent &&\n            nextProps.activeDirent.name === nextProps.dirent.name\n          ) {\n            this.setState({ isOperationShow: true });\n          }\n        }\n      );\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen,\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({ isDragTipShow: false });\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI\n        .unstarItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", false);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", true);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == \"TD\") {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n\n  // KEEPER\n  onItemCertify = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    keeperAPI\n      .canCertify(repoID, dirent.type, filePath)\n      .then(() => {\n        this.certifyFile();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  certifyFile = () => {\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    toaster.success(gettext(\"Certify the file through bloxberg...\"), {\n      duration: 3,\n    });\n    keeperAPI\n      .certifyOnBloxberg(repoID, filePath, dirent.type, dirent.name)\n      .then(() => {\n        toaster.success(gettext(\"Transaction succeeded\"));\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  closeSharedDialog = () => {\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute(\"data-op\");\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch (operation) {\n      case \"Download\":\n        this.onItemDownload(event);\n        break;\n      case \"Share\":\n        this.onItemShare(event);\n        break;\n      case \"Delete\":\n        this.onItemDelete(event);\n        break;\n      case \"Rename\":\n        this.onItemRenameToggle();\n        break;\n      case \"Move\":\n        this.onItemMoveToggle();\n        break;\n      case \"Copy\":\n        this.onItemCopyToggle();\n        break;\n      case \"Tags\":\n        this.onEditFileTagToggle();\n        break;\n      case \"Permission\":\n        this.onPermissionItem();\n        break;\n      case \"Unlock\":\n        this.onUnlockItem();\n        break;\n      case \"Lock\":\n        this.onLockItem();\n        break;\n      case \"Comment\":\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail(\"comments\");\n        break;\n      case \"History\":\n        this.onHistory();\n        break;\n      case \"Access Log\":\n        this.onAccessLog();\n        break;\n      case \"Open via Client\":\n        this.onOpenViaClient();\n        break;\n      case \"Convert with ONLYOFFICE\":\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow,\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({ isRenameing: false });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({ isMoveDialogShow: !this.state.isMoveDialogShow });\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({ isCopyDialogShow: !this.state.isCopyDialogShow });\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen,\n    });\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .lockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", true);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", true);\n        let lockName = username.split(\"@\");\n        this.props.updateDirent(\n          this.props.dirent,\n          \"lock_owner_name\",\n          lockName[0]\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .unlockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", false);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", false);\n        this.props.updateDirent(this.props.dirent, \"lock_owner_name\", \"\");\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"file_revisions\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path =\n      siteRoot +\n      \"repo/file-access/\" +\n      this.props.repoID +\n      \"/?p=\" +\n      encodeURIComponent(filePath);\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"open_via_client\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n\n    seafileAPI\n      .onlyofficeConvert(repoID, filePath)\n      .then((res) => {\n        this.props.loadDirentList(res.data.parent_dir);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === \"dir\") {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true,\n        });\n      } else {\n        seafileAPI\n          .zipDownload(repoID, this.props.path, this.props.dirent.name)\n          .then((res) => {\n            const zipToken = res.data[\"zip_token\"];\n            location.href = `${fileServerRoot}zip/${zipToken}`;\n          })\n          .catch((error) => {\n            let errorMsg = Utils.getErrorMsg(error);\n            this.setState({\n              isLoading: false,\n              errorMsg: errorMsg,\n            });\n          });\n      }\n    } else {\n      let url = URLDecorator.getUrl({\n        type: \"download_file_url\",\n        repoID: repoID,\n        filePath: direntPath,\n      });\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false,\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === \"/\" ? path + dirent.name : path + \"/\" + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ isShowTagTooltip: !this.state.isShowTagTooltip });\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = \"move\";\n    let { selectedDirentList } = this.props;\n    if (\n      selectedDirentList.length > 0 &&\n      selectedDirentList.includes(this.props.dirent)\n    ) {\n      // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList = selectedDirentList.map((item) => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {\n          nodeDirent: item,\n          nodeParentPath: this.props.path,\n          nodeRootPath: nodeRootPath,\n        };\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData(\"applicaiton/drag-item-info\", selectedList);\n      return;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {\n      nodeDirent: this.props.dirent,\n      nodeParentPath: this.props.path,\n      nodeRootPath: nodeRootPath,\n    };\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData(\"applicaiton/drag-item-info\", dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n      this.setState({ isDropTipshow: true });\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === \"copy\") {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = \"move\";\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    }\n    this.setState({ isDropTipshow: false });\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({ isDropTipshow: false });\n    if (e.dataTransfer.files.length) {\n      // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData(\n      \"applicaiton/drag-item-info\"\n    );\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) {\n      //move items\n      let direntPaths = dragStartItemData.map((draggedItem) => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(\n        this.props.path,\n        this.props.dirent.name\n      );\n\n      if (\n        direntPaths.some((direntPath) => {\n          return direntPath === selectedPath;\n        })\n      ) {\n        //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === \"dir\" && nodeDirent.type === \"dir\") {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(\n      this.props.currentRepoInfo,\n      nodeDirent,\n      selectedPath,\n      nodeParentPath\n    );\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(\n      currentRepoInfo,\n      dirent.permission,\n      dirent\n    );\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ? (\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        ) : (\n          <Fragment>\n            {this.state.isOperationShow && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                {/* KEEPER bxb button */}\n                {this.props.isRepoOwner &&\n                  dirent.permission === \"rw\" &&\n                  dirent.type === \"file\" && (\n                    <a className=\"op-icon\" data-tip data-for=\"bloxberg\">\n                      <img\n                        className=\"small-icon\"\n                        src={bergImage}\n                        onClick={this.onItemCertify}\n                      />\n                      <ReactTooltip\n                        className=\"hover-keep\"\n                        id=\"bloxberg\"\n                        delayHide={1000}\n                        effect=\"solid\"\n                      >\n                        <span className=\"tooltip-bold\">\n                          {gettext(\n                            \"Certify your file via the bloxberg blockchain.\"\n                          )}\n                        </span>\n                      </ReactTooltip>\n                    </a>\n                  )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = \"\";\n    if (this.props.currentRepoInfo) {\n      dirHref =\n        siteRoot +\n        \"library/\" +\n        this.props.repoID +\n        \"/\" +\n        this.props.currentRepoInfo.repo_name +\n        Utils.encodePath(direntPath);\n    }\n    let fileHref =\n      siteRoot +\n      \"lib/\" +\n      this.props.repoID +\n      \"/file\" +\n      Utils.encodePath(direntPath);\n\n    let toolTipID = \"\";\n    let tagTitle = \"\";\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map((item) => item.name).join(\" \");\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? \"tr-highlight \" : \"\";\n    trClass += this.state.isDropTipshow ? \"tr-drop-effect\" : \"\";\n    trClass +=\n      activeDirent && activeDirent.name === dirent.name ? \"tr-active\" : \"\";\n    trClass += dirent.isSelected ? \"tr-active\" : \"\";\n\n    let lockedInfo = gettext(\"locked by {name}\").replace(\n      \"{name}\",\n      dirent.lock_owner_name\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={this.canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td\n          className={`pl10 ${this.state.isDragTipShow ? \"tr-drag-effect\" : \"\"}`}\n        >\n          <input\n            type=\"checkbox\"\n            className=\"vam\"\n            onChange={this.onItemSelected}\n            checked={dirent.isSelected}\n          />\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined && (\n            <a\n              href=\"#\"\n              role=\"button\"\n              aria-label={dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n              onClick={this.onItemStarred}\n            >\n              <i\n                className={`fa-star ${\n                  dirent.starred ? \"fas\" : \"far star-empty\"\n                }`}\n              ></i>\n            </a>\n          )}\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                ref=\"drag_icon\"\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                onClick={this.onItemClick}\n                alt=\"\"\n              />\n            ) : (\n              <img ref=\"drag_icon\" src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n            <div\n              ref=\"empty_content\"\n              style={{ position: \"absolute\", width: \"1px\", height: \"1px\" }}\n            ></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\" onClick={this.onItemClick}>\n                  {dirent.name}\n                </a>\n              ) : (\n                <a\n                  href={dirent.type === \"dir\" ? dirHref : fileHref}\n                  onClick={this.onItemClick}\n                >\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {dirent.type !== \"dir\" &&\n            dirent.file_tags &&\n            dirent.file_tags.length > 0 && (\n              <Fragment>\n                <div\n                  id={`tag-list-title-${toolTipID}`}\n                  className=\"dirent-item tag-list tag-list-stacked\"\n                >\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span\n                        className=\"file-tag\"\n                        key={fileTag.id}\n                        style={{\n                          zIndex: length - index,\n                          backgroundColor: fileTag.color,\n                        }}\n                      ></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip\n                  target={`tag-list-title-${toolTipID}`}\n                  placement=\"bottom\"\n                >\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td\n          className=\"last-update\"\n          title={moment.unix(dirent.mtime).format(\"llll\")}\n        >\n          {dirent.mtime_relative}\n        </td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                alt=\"\"\n              />\n            ) : (\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\">{dirent.name}</a>\n              ) : (\n                <a href={dirent.type === \"dir\" ? dirHref : fileHref}>\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext(\"More Operations\")}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div\n              className={this.state.isOpMenuOpen ? \"\" : \"d-none\"}\n              onClick={this.toggleOpMenu}\n            >\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined && (\n                  <DropdownItem\n                    className=\"mobile-menu-item\"\n                    onClick={this.onItemStarred}\n                  >\n                    {dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n                  </DropdownItem>\n                )}\n                {this.props\n                  .getDirentItemMenuList(dirent, true)\n                  .map((item, index) => {\n                    if (item != \"Divider\" && item.key != \"Open via Client\") {\n                      return (\n                        <DropdownItem\n                          className=\"mobile-menu-item\"\n                          key={index}\n                          data-op={item.key}\n                          onClick={this.onMobileMenuItemClick}\n                        >\n                          {item.value}\n                        </DropdownItem>\n                      );\n                    } else {\n                      return null;\n                    }\n                  })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditFileTagShow && (\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        )}\n        {this.state.isZipDialogOpen && (\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAFECAMAAAFqkvmEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIyQzlCRTQzMzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIyQzlCRTQ0MzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjJDOUJFNDEzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjJDOUJFNDIzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zgL64AAABgFBMVEWt0daNvsTL4ua01dphpa1xrrXd7O7F3+NSm6bP5eiJvMKlzdG52N0xhZzG4OShytCdyM5EkqN2sbh+tby82t1VnaeFusGYxcqaxszW6OuDub9qqrGoz9RdoqnS5uk4ip7h7vDO5OeTwsjZ6uzZ6u3V6OrN4+c1iJ6RwMdZoKmy1Nl4srlyq7vU5+qSwceBt76Mu8jA3OBLl6Rkp6/Y6exYnK9ko7Tb6+2DtsN9s8HK4uY9jZ9Mlamdx9CRv8q21tuHucWx0tlAj6N5sb/K4OXc6+6VwsyIu8LX6Ou319trqLiu0dfD3uK+29+KvMar0NWmzNTC3eHC3eJNmKXA2uBfoLJoprZdoa7H3uSYw82jytKbxs/S5Oily9Nbn7CYxM1uq7fJ4eXK4uXT5+rI4OTR5el8tLt7tLuVw8l0sLbI4eTI4eWgyc9vrbRtrLNsq7Joqa9nqa+v09dfpKvf7e9RmKt2r73M4edgo658s7yjy9BnqLFrqbSfyNFXn6cAAAA2nrm/AAAAgHRSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ADgFS2cAABqTSURBVHjarNU/SwNBEIbxDYZ4KQYJylkIYiEeBuxuC4lNmpRaBCzsjGnsU4Y3Xz2Z9bzcTXb2jzjdwvx4ii3G7HLH/JOgKlcAmYKASZ4AAhHjTwBFjgBCEaMkdGK0BGBTxexXIFW0AMTPOiqWR8ERiosO4Mio/ooI9GZHUWH7gu4OYhwUfYAXJ2xAkBDlM4tVQAiwLQdOkCpk4rIcvLI4V4UA3wdx7QQpgnxiwWKtCAFunLhwovIKkVg24oPFyitEYtiINyfePUIkZq2Ys3jwCJF4bMXZJ4vpiRAJ6ogrFuMTAb3xI26FqEQiLhBvPPXERCaiAimNuiMK8ReKsEeBtMZ9K8RyoQpqhEVqY9QIpAtygjLExgnkiOoP13kvAKv1roMgDAVgWEzQQTEydHCxXoIOmkBcMDExxs3JODk4GfUBvI7w6nJABEqh5xj3fjlNm/Rv5U85J9ecHHNObjk55Sa55OSQM3LHHSzgP1fcxAEz0/D8nZc1HBa7lgKwTMF9QwWc7EPlP1yrSwn4GoBTAoSn0HsBGOHzvddCsEDX29bmAM7YeOu2NggBtt2TACwBtHDp1gG0Q2Bgys0icABwxIT7GoFGCJ7qbpsx2AJAZPseg1sVwEpV7XECNgD6ymgnoFkHUBWA+C1Igx2AiyrZOXDKAJ4rtgJ4iAmdFJgJRyQHTmmuJWD4BUy45CLAP2DqISe48lazYhClmnvoCbWSUsuBEQBDtqEi0KOX/S0ALfaykzAQBWA4BEWIHbVRMEZCUZHGKBFIyyXeEhaagJG4cCGsBFy4VMGdfXaLpdPbMHNOaWfbZL40aTPnH/woEKdQJzEL2UWKxiVUs7R24xG67qCOQ5C9zR69oPiO+8gF4jvuIxf8hyWJWggGAIlWYBUGAY3pQIGdMHTfpkZWFNiAeeZYj1NN7ZSsJCwDDKswpnNhrK4gLAf+J+2iJRQ6oQUeYMZ0yRYyjZCCAMg9PNqCM06hBD6gXuYSiTtbGPVDCCoXILtz4XhgC5MaWlD4wLkl7N/YwsYWUpD5wIct7LxSYYISBMC6I2wPqfCGENJ84NAtbA6oMAILWf5X9OkV+nkqlKsgocXd3+is+YWvHhXKOkDQ+YD8HRSSSSocKULhig+kz1iCJFEhQwQC/0c2p1q2sFejwjvhCgJgfhnGFp4doUAQV/ThhDH8gp4190OEigpMfO+qw9+hcjCDJL7BaDWwoLXFiW8Eb4cxwsmvKPGNYM7ihJLET3wjEORooal5BDCAEFIplwAHUMKUCggAJxQXAkEtpSNfz/SXRvfip916ur0fDvK9pFRjCybxJwCz9vfaRBDEATxWpWlwCqsN2Ki5FtIG5CppatpCMGlSBBFrxQehD2maJy2KT2kEodd/3Vx+zKWXu53Z3Rswr4H7MMndbvb7jfh5+r8CpI/rIA3kZeOA8G6uigJF2bhh+jg25QBfOM6YrydKCmgIxyXRglgXz2NE4pjFFT0vnveANFCsSedJmcdJS8dcXzqvyjiuSjigqEwBCJwSNxpQaTmSZN4WXXbPNW6LVzsxASqbMnneHDiqbLrFeakxw/SyMAZ2ZPLC6dc8DAFwAdJjjPCyMAHKMnlkuP9vTYGqNeBrf9ffVWfAmkzeqe625sCNJXCjP/43Edj1JfJUVdpFYGQF6MPIoFE4RWBF2QD6AbxS4fNXBPoWABHCHJQKD44RGHhZA/BsDLzJIdA2BogBribACQKrYAoQgfb3CfCjh8CqIUAMcD0DahEAZoA+ioSnM+B5H4F1I4AY4DECrQiALPNyBH71EfhpABA54e8F4CICgA/U9QMsAn9vERiwAf0A+RdpQDebvB/uAy97CKwwASJIPYgBXyKgwQJq+gG8OJA7RyBh58kZ7zOPloBcBIwYgB+YAq87CGwrGiD2mVcJwMMBAu9IQP8MB/UkoN1GYJuqQ8iQMxF4so7APgF4VN+SCGycIbAGLoXO+N1kYP8TAmWXPqfIAcAeCN+lgbJbX8QA0usiqllmAntOfRQHSPvHKbXTs4Edq74rH/CBbjKgOE0FC/jg0KfxgMMkQL/Te0bAW9+6r2MCrWWgyPqEuEBFmfWBXmAKdGIAsdPXjYEjsOwb2cCfe8DHgLFKmAHvwa7P5AOLdaYK2C8DAKz6UgMgqku9QGSCIdj0sSbAcF7Hcu8gYwA4ADgA07rXsE9uhn3y5eG3q9Hp8UmtdXHbO++0z1KArnzd+08A6u7+p2kgjAN4BzI23COcvCgydwM3G7BomYwNR1Yc0ZjIS0RAEA3hLWo0JuqGxoT+7Vpe9tZr1/a5a9f7bb/tk7bX+972bcX/ATykAiXsAurt1/PuEQDooxBmARizyyjshVYAV9MjqCEVQH1DFJRQCqD55/l8CAXQkvOAhE4AbUHVBwJfAZgWuUBDJQDGKl34vY2nAJhJWzRBEg0QTuAnAMuWgQyhEIDNVoFQguQDQNcpdLtAtQfoegm6W6B03pIm0M2CvIM9dXEEySeAOAJeQMDhThOzx12pqUELKDjeLIuZCbXM/IISrADAxX5fe3hWdwqZ+fGV7SAFrgDtBOWsYAiyai04gUuAQWic9vnl6KUge06CEoCsux5wXccie9VrwfEMDUbgBVDP/zRZbQhSmxCEAKjuaVzkf9hKNwtSPeC/AEq6x/E/PMNpulUQj4PfAiC65wFQTZsED8FfAQagw9kKQ+CRIAUBGBswCCZBD/gngBwGcG9sILKyyBAcgV8CiHn//qPwxBBEFosMwSH4I8ABhi8FkWKRITiR/RB0SpT2y9Pha8Hj5WWGoL8iXFBGAeRPDcHU+jpD0E8EC1RAXMM5+qhZ8DmiMgT9S6pIgYIBkNLtVsGdqfK8WXBrWxEnyKMA5Eu74O5BOWsW3FLyogQEAyi97TMLhvZfxs2Ck2UiRoAC0FgfS/BtaO+ZWfD1gIoQUAxAnv7OFgwO7q+aBYcS8BcABgDvJqwEf2+eb5oFhyPAW4AD3JiwESTfr5kFR7vAV4AD/PlhK9j4mDALehyutp12xGXUEXjaQSAlNYbAGcFhR5yiAJ0FPzc0hsARQRIP+OVEMPNaYwgmgY/Ae6Y3APedCXqfawyBA4KTEjrBxIFppwKtV2MIJvEVbiRAdy5IaAmGIC5jBRhAzHh/gHPBSGKNIYhXcAJMps8Z9xA3gpG1OYbgtIYRYCIxubiHuBLMza0yBKkF1bMAkyjJ5RTsTvCGKUgpHivcKEDlagrmIkgV814EKgZQqj/kjYvguEzcC85QeaY+g3ESzA5StwJUppcbMxgvwazmssKNyvTNMxg3QXbXXYUbBWi+fvgJxk9dVLgpNwBPwSvmQ58l/oDWj1wFLILEPVHqIgUPwImAK4C3INP5nTKcAdwFmc4dcRkVB8QLCp064pQvQICgINsJMJE4xjz9BAheVKwFGEDO4i1kAgTRmpUAkyiJxfUjRBDdUZkCFMDq+hEjiC4yKtyoSFyyPP0ECarlvEmAAVDroydKUE2SNgEm08s2p58wQXWLtggwiVK2O3riBOnfTRVuFMD+6AkUpD/UK9xGEzScY8mH510LH/8EYO9uf9q2ojCAO0Qtacft6g53RctmaLumpZlEocmSmgSaqKHAeBkMttKxdN2YtqrTpokwqRLZvz5ejeMc2/f6nHMdS/Q7Un86H+Ak5z7PpeBSMLCCpbQLbJF2gUj/O30r7YJcV6Q+aSDlWQk59seYvILTD5wsTVEJLAKL/S0mr8D9yExP2AO94OKi1hHpFHg+tUxn4ob3JljPEMgTN+xuujNDer8BNUX6BL4PXtOXeuL/DlfHEJhTT/hDT2gF/d9CT4t0CYAPv9OVPAMdAvAPweAdQbqyc+BLgFyKBAFfQKQn/Sfom3QrPYLA8p+U5BcFHzNYaRFYycQX0eUXCbmIhwEWWAkFMFEJIi5iOPdNPRlSzsCnYEXe9IitwRZUIs/CBj3HS+Ksim/ppxDIHDgPdhKZ1F0V29KvLYlskLPUJA+r4H1zaQAEskfm8L4pBkAgfdsG/ZUtfhGJCxzpE+FN4D/buFdOPM9O4bywfwji/r2nImGByqF/39Jf7xwJmkkn8qncF/qHIL4+EoyJRAVqh/K+ffNg+0QwX0pUoHYh2btviqsngi9FggLVtwo9QyhXzwQtM0GB6omkdwhi/0yA+51g6BxB11uKUKq7grydmED9SvVi6Rf7ruALkZAg1oOX86XfzHsEkyIRQby3s+f7phj3CPYKiQhiPtk53Tft73oET5LI1oz7+rchTkfQI7jWSEAQ+9XU8RDOszVdwb/600Hjv18+3jcL4z7BREe7APFsSphuOuiF4IHufFPMC2xTNMb7BXFXnWTyTZuAQHNCK+oNudk4uA8IDoo6BbgRLLgZs17BkM6MWdQjcmd24XZzAhDEW3WSyJi9vXC9WQUEb/Wl5KJGYJeOBAvVDUDQNnUJsDG/C9cz1Sog+FlXzi/qHXzh+xNBpjoHCNZtTQJsUPGxoFIBBL/qSSrGjWDmTPCw8hwQPBdaBBZmBJ+4ggoguKEjaxmXBvHGFdytLAOCOaFBgMpa/u1CcJwW3SfQkBaNy6i84hH8Pr8LCL4VzAJUNNZ04bFXkFkFBMOzzAJcSOWtHsGnq68BwQ3BKsDlXduPewUPM5BgizWxGxezecsnuJN5BQgUh6AmWMJGjvsEd+tjgKDImDmOG8EffYI79deAQG0ISgJUwJpjAoJ2aw8QzLOlpuN2yyuA4GarDQjeCSYBLjV9ExTcbD0ABG2m3HfcCP4EBR+32oBAZdXRlvueCxC8bz8DBIbNIcDslpb4K0DwoV0DBApDMPSMQDwKFHyobQCCUY7sfdQIPgsUfFQ7BARvC+QC3GLzeYhg/XAFEGzQtwcg1vuc+DtEkH+/AwiGGsQCZHtAqCC/MwIIyPsPUIvNTLhgdx0QDHVeUQqQDRQRgrX1EUBA3OCACr6eiRTkIUG5QifAVlBECZbzc4CAsIMCtd6bjoRgbQ0SSH2ro6WDIlrwz1oWEExQtWig1nvHkRIsL0MCmVVHS4uGhGByOQsIiHpASrj4dEnB5OQzQFAzKQS4ETySFGQn5wABSZMJagQFU1qQzb4DBM9tvICgyURKsJgdAQTX8F0suAT4aQXB4uIwIIi8nTKYR6AgGFkcBQToNhkb2yKgIBgdHQYEUccKnG0yufM2GWnBCiDYw/XhCHSNgIpgZWUYEERco0YJNjGLTVdZsAEJOlPxBfgRqAmegILwIRhs672n0QcrKB/EFVAUCagJvgEFoUNg6yQyHUJBsxxPgNstu4SCsBcKBtMInAapYCpWLxTJCIgEX4kYgim6XigCwWGMZivcet8lFgQPganZyiQXzNmqAsxu6a00oRIEvlrj6eaaZhD8oNguhl1s6AVjBSVBh6oejVCwp9SPhu355BCMNRQEJm0/GpHgqULDG2YE072/yikF4KrD0PBmsQnkO+ow672/2odUUC7KCcg76sgE0i17mN3SYRVUSzIC+pY9OoFkTyBiBO5iwyWoz0YLGHoCCQVSTYeI3RJouKIW7JpRAo6mQ0pBZFdjnbriilwwYocLqEdAL/BVNfoFU1SLDaPA9xjboFvvrcC2SVrBCydEUCRbbDgFL0WwgL7wk0MQ0vhZIvyrmlNwVQQJCBcbXoF31TF4dktmgXcIWjpL6QXbRUhg0v5JxyrwDMEgGoGjWXCx6hhE631Xs2Bf9AtQxbemdkHd9AsEzwjYBO4QSJpvbTMBQd7uFWBGYIX9LJvgfAhaunt5BL3tw2wjYBSMF3oEmPbhzYQEP3r6kzG7ZS58fIyC8YYrmGJsOC7YTqNhmrOznU7pp62t8vb20pviQbNarVTmVzP1VqtdO9xZP0IcGUbh+6JAwQu3AbqW1gJo8d9ld+8g/PtfgPbu/qmJIwzg+BNQSCyLnhIVjVyikCiGmkQiZA4DQsUiEIIUp8IwFJVWW1tbmzBtLdd/vRdQDJCX5+5279m93I7yu/MZzO7zzd6p/y8ICIIVEAQEHi5r35AOCIgFmCdvQA0Imn7nj+maHw1AIQGj9lhXVg0IKAUODLSAgGLl2ee05z8DUEXgaCJrGegBgddritVXpZzPDFQg0NjxruczA1BP4MCABQTeLZ2dbtthPxmAAgK5RqHFPwagpICvDCQnYKzZ1zuivjEA2QXCzbu7TwxAVQHLIOUPA1BW4NCgGBCIFWjz7ZqaQSYgIBSofZnPBwYgr0AK8w0zXf2YKSlBBilQe1Wo6gaguMCBwYOAQICAjetvhuJBWUaCNLN3AVHxqA9SCti8f6h2zJSPYJ3ZvwGqtIF0BHnm5A6uygYgn4Cjy4cKR33JCDTm9PqnukEZfCKgcFAGvwioayATge5KQNmYCVIJuHn5uLIG8hAw1wKKxkyQSGDNNDvRAOQRCJtmRxqAvwRUjPogi0DUNPkZZAICQgHLwEZQfirBaAmkEEhxFDgMyqjXT/6XZ3l6A/ChADrq51nxVpl8tEROkBEggIz6GisO3xpfoDYAegHdFLAQQVljW8MWwfg08RaKmKAgSABhoLOtiQOCwe9TrHMJ0sIE2kZ9nfVNfCIgNgBiAcM0BRpoLfYAAxNHBCO7s6wzCfJCBVoasFSyp45gJEJoAKQCs6Yp2MBoKnCMYORVlXUeQd5loHER9dnscOUkgWWQ6TACzQOBJlG/JnCaYOgBkQH4WqBhUGbVSqURgWWQ7iAC3SMB01w7YZBh1XgTgt05EgPwucDJoJxhz+NNCYb2KL4fDEQCOdOkMEjXBJoTREoEBhQEzFOB+piZZoV4S4LIDJvqAAJ+kdKuwfqhQCuCxLbnAQE6QOBzUM6zYrwtQWTTawPoBIFDA43NxxEEyS2PAwJ4LxA1TRqDuTiKILnorQF0hkCNYH2vjCNIdns6vAaPBVJEAoz9MLe3t40jSA54aQCdInDxybm5vblNHEHXgMH8SJAhE7AOZxcvPzl3rjB3aNCeoKvXu4AAXgroJpFA6sfLNYLQpblCEUfw0jsDzwjSZAI5lvr72iFBaLJQM8AQvNyZYv4iSAuOlK0E9EvXPhOErlkGPTgCyyDjIwI6Ac0SuPeFIHS5MFl6jCN4ve6JgTcEeUKB2Uv36glCM5MHBhgCyyDtE4K8h3ngtMAJgtulycmZQRxBf9oDAy8IpggFpi6dIvg6ZP0eDOIIetPiA4IHBBqZgMGmfmxAcPP25ExpCEfQOyncAHwtUP2pIcHN2zMzpSSOwDLQFCfQyQR0Vr3bhODNzZlSqQtH0PtCsAGIF8hRCeTvNiV486ZUyqziCHq3xQ6vwacC0VRNoDnBlTelTOgZjqB/RaiBWAJGKPDXxZYEV65kQsVnOAKxBiBYIEwn0Ibg6tVQsdiHI+gXGXHAlwKM3X/bnuBq0TLAEfT3iTMAHwqEGfv4FkNwoVic78YR9C8LG16DSAGyQPPxLI7gwvz8fDeO4PWSKAPwncAaY/+exRK8swxGcQQ/LwkKCCBMgChS5ljq+lk8wfkX8y8AR/CLoIgjhiBDKfD+VzsE5zdfbC8iCXaE3MQBfwloTL/+mz2Cfza3N1eQBDsibuKAGAGiTKwx4/p7uwT/PNx8GEMS7Ai4iSOAIE0q4IDgq3cP92NIgpd73A1AhABZpNSuOyL46vz+fnkXR/CS+00c7gTrZAIGm/3dIUFsY3+jvIsj6JrhbMCbIE8ooP3hmCBW3tiIRXAEloEmMUGeMNBo910QWAZb5QSOoIvvLRC+BBqhwNp9VwQrsa1yLIkjSG7yHF6DLwSiKZa775JgZaUci+3gCLjeAgGfCITPuCaAFevnaxyBZcAkJCAL9VFmCXAgWFy0fu7gCJLfcQsIwFMgRyUQPcOF4MOHlZXFJRxBcpmXATcCskwctgT+5EXwyPpVWMIRJHY4BQTgJ7BGJXDnT24Eo6OLi49WcQS8DICbAE2kzDFm3uBJ0L34aHQVR5DY4fIoL1BdIGXe4EvQ/Wi0O4sjSCSqHF47DpwEyAKNeYc3wbT1N4skSHC4BQIqC2hMj97hT7Bg/c0iCSIPWIGegDKRmaYIgr7p6YUskiDy1G1AAJUFajNZIQR9Cwt9WSRBZI89JSWgy8Szh1NxMQQD1p8skiBScBcQwLUAUaQ0PnUJQQTWWs4iCXYzrgzcERQIBT7NowQSLK8iCXZLbgKCKwK6UK8fTQSFESwvL2eXkARD+y4MwJ2AQS0gkCCbzT5bQhJYBjoBAVkmjqbqpuKSEAyNOjYANwKzVAJ1M1mRBKs2CIa6nUYccCFAFmjqp+JCCZZsEAw9cxgQnBJolInMlJJgaMmZASgmED45k5WI4FXCUUBwRqATCpw4i8tE4MwAlBLInZ7JSkUwNuYg4oAzgRyRwOl5lGQEY/ZvgTggIAv1WqOJoGwEY7ZvgYATgTCRQKNpiHQEI3ZvgYDiAhISjNh8HwuoI9B4GiIhweAcWxdHQJaJZ5vNo2QkGLR1CwTUEDCazqOkJBjMsKoYArJIaTQ/h8hJ8K2NR3mBCgJ6i5OgpATjG2gDPAFZqI+2EpCWYLyMDQhgQ4AmUh4LNAoRjC8gDbAEaUKBlmdxeQnG+3ARB9ACRJGy3TREYoLxb1ABAaQXaHMSlJngFsoARUAW6sPtz+JSE9waQwQEwAnIEmhUIxhGGCAIpiQKNMoRDA+3jTjtCTQ6Acw5RHqC4XYRB6QV0HAnQfkJJp63NmhHoNMJ4M4hChBYBmnnBDpdpESeBFUgmCi0MgBZBbC7YCUIHre6BQJShnoDfw5Rg+BxsbkByBgpDRufP4oQWAaafQIyAd3ODkAVgp5yMwNQXEAdAsvAsEdA+IZ0W7tgdQh6phsHBJBPwN4OQCGCnoGGBiBXJrYtoBRBT8NbICBXJrb/VCOlCHoSDQxAJoGwgx2AWgSVhMEQBGSh3omAagSV4VMBAeQJ9WFHOwDVCCoTGmtDQJaJc872YMoRVConIs5JgnU6AWefPwoSVI5HHJAk1GtOdwAqEsSPRRyQI9Rrjj9/lCSI10cckCRSOt4BqEkQr4s4IIeA8//9FCWIf4k4IIGA4ebzR1WC+FHE+UJQZcHyeGkcn9YbLNrnlAYrIFB8/Q+YBTdUjX9zJQAAAABJRU5ErkJggg==\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs。\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission; \n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFileCancel={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ? \n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle(currentObject);\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    let currentNode = this.props.currentNode;\n    this.changeState(currentNode);\n    this.newInput.focus();\n    let type = currentNode.object.type;\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onAddFileNode = (filePath, isDraft) => {\n    this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    this.props.onAddFileNode(filePath, isDraft);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file；\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@reach/router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and other {n} items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and other {n} items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.deleteDir(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n      this.updateDirent(dirent, 'file_tags', fileTags);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    let mtime = new Date().getTime()/1000;\n    let dirent = new Dirent({name, type, mtime, size, permission});\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      )\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel o-hidden\">\n          <div className=\"main-panel-north border-left-show\">\n            <LibContentToolbar\n              isViewFile={this.state.isViewFile}\n              filePermission={this.state.filePermission}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              onFileTagChanged={this.onToolbarFileTagChanged}\n              onSideNavMenuClick={this.props.onMenuClick}\n              repoID={this.props.repoID}\n              path={this.state.path}\n              isDirentSelected={this.state.isDirentSelected}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              onItemRename={this.onMainPanelItemRename}\n              direntList={this.state.direntList}\n              repoName={this.state.repoName}\n              repoEncrypted={this.state.repoEncrypted}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              userPerm={this.state.userPerm}\n              showShareBtn={showShareBtn}\n              enableDirPrivateShare={enableDirPrivateShare}\n              onAddFile={this.onAddFile}\n              onAddFolder={this.onAddFolder}\n              onUploadFile={this.onUploadFile}\n              onUploadFolder={this.onUploadFolder}\n              currentMode={this.state.currentMode}\n              switchViewMode={this.switchViewMode}\n              onSearchedClick={this.onSearchedClick}\n              isRepoOwner={isRepoOwner}\n              currentRepoInfo={this.state.currentRepoInfo}\n              updateDirent={this.updateDirent}\n              onDirentSelected={this.onDirentSelected}\n              showDirentDetail={this.showDirentDetail}\n              unSelectDirent={this.unSelectDirent}\n              onFilesTagChanged={this.onFileTagChanged}\n            />\n          </div>\n          <div className=\"main-panel-center flex-row\">\n            <LibContentContainer\n              pathPrefix={this.props.pathPrefix}\n              currentMode={this.state.currentMode}\n              path={this.state.path}\n              pathExist={this.state.pathExist}\n              currentRepoInfo={this.state.currentRepoInfo}\n              repoID={this.props.repoID}\n              enableDirPrivateShare={enableDirPrivateShare}\n              userPerm={userPerm}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              onTabNavClick={this.props.onTabNavClick}\n              onMainNavBarClick={this.onMainNavBarClick}\n              isViewFile={this.state.isViewFile}\n              hash={this.state.hash}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              goDraftPage={this.goDraftPage}\n              isFileLoading={this.state.isFileLoading}\n              isFileLoadedErr={this.state.isFileLoadedErr}\n              filePermission={this.state.filePermission}\n              content={this.state.content}\n              lastModified={this.state.lastModified}\n              latestContributor={this.state.latestContributor}\n              onLinkClick={this.onLinkClick}\n              isTreeDataLoading={this.state.isTreeDataLoading}\n              treeData={this.state.treeData}\n              currentNode={this.state.currentNode}\n              onNodeClick={this.onTreeNodeClick}\n              onNodeCollapse={this.onTreeNodeCollapse}\n              onNodeExpanded={this.onTreeNodeExpanded}\n              onAddFolderNode={this.onAddFolder}\n              onAddFileNode={this.onAddFile}\n              onRenameNode={this.onRenameTreeNode}\n              onDeleteNode={this.onDeleteTreeNode}\n              draftCounts={this.state.draftCounts}\n              usedRepoTags={this.state.usedRepoTags}\n              readmeMarkdown={this.state.readmeMarkdown}\n              updateUsedRepoTags={this.updateUsedRepoTags}\n              isDirentListLoading={this.state.isDirentListLoading}\n              direntList={direntItemsList}\n              fullDirentList={this.state.direntList}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              updateDirent={this.updateDirent}\n              onDirentClick={this.onDirentClick}\n              onItemClick={this.onItemClick}\n              onItemSelected={this.onDirentSelected}\n              onItemDelete={this.onMainPanelItemDelete}\n              onItemRename={this.onMainPanelItemRename}\n              onItemMove={this.onMoveItem}\n              onItemCopy={this.onCopyItem}\n              onAddFolder={this.onAddFolder}\n              onAddFile={this.onAddFile}\n              onFileTagChanged={this.onFileTagChanged}\n              isDirentSelected={this.state.isDirentSelected}\n              isAllDirentSelected={this.state.isAllDirentSelected}\n              onAllDirentSelected={this.onAllDirentSelected}\n              isDirentDetailShow={this.state.isDirentDetailShow}\n              selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              closeDirentDetail={this.closeDirentDetail}\n              showDirentDetail={this.showDirentDetail}\n              direntDetailPanelTab={this.state.direntDetailPanelTab}\n              onDeleteRepoTag={this.onDeleteRepoTag}\n              onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n              updateDetail={this.state.updateDetail}\n              onListContainerScroll={this.onListContainerScroll}\n              loadDirentList={this.loadDirentList}\n            />\n            {canUpload && this.state.pathExist && !this.state.isViewFile && (\n              <FileUploader\n                ref={uploader => this.uploader = uploader}\n                dragAndDrop={true}\n                path={this.state.path}\n                repoID={this.props.repoID}\n                direntList={this.state.direntList}\n                onFileUploadSuccess={this.onFileUploadSuccess}\n                isCustomPermission={isCustomPermission}\n              />\n            )}\n          </div>\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount = () => {\n    this.newInput.focus();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fileInputRef = React.createRef();\n    this.state = {\n      errorMsg: ''\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  changeMode: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  render() {\n    const { isLoading, hasNextPage, groupMembers } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <button className=\"btn btn-secondary btn-block search-group-members-btn text-left border-0\" onClick={this.props.changeMode}>\n            <i className=\"fas fa-search mr-1\" aria-hidden={true}></i>\n            {gettext('Search group members')}\n          </button>\n        }\n        <div className=\"manage-members\" onScroll={this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {hasNextPage && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass SearchGroupMembers extends React.Component {\n\n  // pagination is not needed\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      q: '', // query\n      groupMembers: [],\n      errMessage: [],\n      isItemFreezed: false\n    };\n    this.isInit = true;\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  submit = () => {\n    let { q } = this.state;\n    q = q.trim();\n    if (!q) {\n      return;\n    }\n    this.setState({\n      isLoading: true\n    });\n    seafileAPI.searchGroupMember(this.props.groupID, q).then((res) => {\n      this.isInit = false;\n      this.setState({\n        isLoading: false,\n        groupMembers: res.data,\n        errorMsg: ''\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errMessage\n      });\n    });\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      q: e.target.value\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.submit();\n    }\n  }\n\n  render() {\n    const { isLoading, q, errorMsg, groupMembers } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex justifiy-content-between\">\n          <Input\n            type=\"text\"\n            id=\"search-member\"\n            className=\"form-control search-members-input mr-2\"\n            value={q}\n            onChange={this.onInputChange}\n            onKeyDown={this.onInputKeyDown}\n          />\n          <Button type=\"button\" color=\"secondary\" className=\"flex-shrink-0\" onClick={this.submit} disabled={!q.trim()}>{gettext('Submit')}</Button>\n        </div>\n        {errorMsg && <p className=\"error\">{errorMsg}</p>}\n        <div className=\"manage-members\">\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              {groupMembers.length === 0 && !this.isInit && <div className=\"mx-2 my-4\">{gettext('No members')}</div>}\n              {groupMembers.length > 0 && (\n                <GroupMembers\n                  groupMembers={groupMembers}\n                  changeMember={this.changeMember}\n                  deleteMember={this.deleteMember}\n                  groupID={this.props.groupID}\n                  isOwner={this.props.isOwner}\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                />\n              )}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSearchGroupMembers.propTypes = propTypes;\n\nexport default SearchGroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\nimport SearchGroupMembers from '../search-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nconst MANAGEMENT_MODE= {\n  LIST_AND_ADD: 'list_and_add',\n  SEARCH: 'search'\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: MANAGEMENT_MODE.LIST_AND_ADD\n    };\n  }\n\n  changeMode = () => {\n    this.setState({\n      currentMode: this.state.currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n        MANAGEMENT_MODE.SEARCH : MANAGEMENT_MODE.LIST_AND_ADD\n    });\n  }\n\n  render() {\n    const { currentMode } = this.state;\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>\n          {currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n            gettext('Manage group members') : (\n              <Fragment>\n                <button className=\"fa fa-arrow-left back-icon border-0 bg-transparent mr-2 p-0\" onClick={this.changeMode} title={gettext('Back')} aria-label={gettext('Back')}></button>\n                <span>{gettext('Search group members')}</span>\n              </Fragment>\n            )\n          }\n        </ModalHeader>\n        <ModalBody className=\"pb-0\">\n          {currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n            <ListAndAddGroupMembers\n              groupID={groupID}\n              isOwner={isOwner}\n              changeMode={this.changeMode}\n            /> :\n            <SearchGroupMembers groupID={groupID} isOwner={isOwner} />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 50,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            innerRef={input => {this.newInput = input;}}\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n    this.newName = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newName.focus();\n    this.newName.setSelectionRange(0, -1);\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newName = input;}} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, navigate } from '@reach/router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\nconst ShareAdminShareLinksWrapper = MainContentWrapper(ShareAdminShareLinks);\nconst ShareAdminUploadLinksWrapper = MainContentWrapper(ShareAdminUploadLinks);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinksWrapper path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinksWrapper path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('wrapper')\n);\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('./globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'],\n    };\n    this.newInput = React.createRef();\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  }\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let { repoID, currentPath, usedRepoTags, readmeMarkdown, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (readmeMarkdown === undefined) {\n      readmeMarkdown = null;\n    }\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank' rel=\"noreferrer\">{readmeMarkdown.name}</a>\n            </span>\n          }\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'react-modal';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n/**\n * Placeholder for future translate functionality\n */\nfunction translate(str) {\n  var replaceStrings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!str) {\n    return '';\n  }\n\n  var translated = str;\n\n  if (replaceStrings) {\n    Object.keys(replaceStrings).forEach(function (placeholder) {\n      translated = translated.replace(placeholder, replaceStrings[placeholder]);\n    });\n  }\n\n  return translated;\n}\nfunction getWindowWidth() {\n  return typeof global.window !== 'undefined' ? global.window.innerWidth : 0;\n}\nfunction getWindowHeight() {\n  return typeof global.window !== 'undefined' ? global.window.innerHeight : 0;\n} // Get the highest window context that isn't cross-origin\n// (When in an iframe)\n\nfunction getHighestSafeWindowContext() {\n  var self = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : global.window.self;\n  var referrer = self.document.referrer; // If we reached the top level, return self\n\n  if (self === global.window.top || !referrer) {\n    return self;\n  }\n\n  var getOrigin = function getOrigin(href) {\n    return href.match(/(.*\\/\\/.*?)(\\/|$)/)[1];\n  }; // If parent is the same origin, we can move up one context\n  // Reference: https://stackoverflow.com/a/21965342/1601953\n\n\n  if (getOrigin(self.location.href) === getOrigin(referrer)) {\n    return getHighestSafeWindowContext(self.parent);\n  } // If a different origin, we consider the current level\n  // as the top reachable one\n\n\n  return self;\n}\n\n// Min image zoom level\nvar MIN_ZOOM_LEVEL = 0; // Max image zoom level\n\nvar MAX_ZOOM_LEVEL = 300; // Size ratio between previous and next zoom levels\n\nvar ZOOM_RATIO = 1.007; // How much to increase/decrease the zoom level when the zoom buttons are clicked\n\nvar ZOOM_BUTTON_INCREMENT_SIZE = 100; // Used to judge the amount of horizontal scroll needed to initiate a image move\n\nvar WHEEL_MOVE_Y_THRESHOLD = 1;\nvar KEYS = {\n  ESC: 27,\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39\n}; // Actions\n\nvar ACTION_NONE = 0;\nvar ACTION_MOVE = 1;\nvar ACTION_SWIPE = 2;\nvar ACTION_PINCH = 3;\n\nvar SOURCE_ANY = 0;\nvar SOURCE_MOUSE = 1;\nvar SOURCE_TOUCH = 2;\nvar SOURCE_POINTER = 3; // Minimal swipe distance\n\nvar MIN_SWIPE_DISTANCE = 200;\n\nvar ReactImageLightbox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ReactImageLightbox, _Component);\n\n  _createClass(ReactImageLightbox, null, [{\n    key: \"isTargetMatchImage\",\n    value: function isTargetMatchImage(target) {\n      return target && /ril-image-current/.test(target.className);\n    }\n  }, {\n    key: \"parseMouseEvent\",\n    value: function parseMouseEvent(mouseEvent) {\n      return {\n        id: 'mouse',\n        source: SOURCE_MOUSE,\n        x: parseInt(mouseEvent.clientX, 10),\n        y: parseInt(mouseEvent.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parseTouchPointer\",\n    value: function parseTouchPointer(touchPointer) {\n      return {\n        id: touchPointer.identifier,\n        source: SOURCE_TOUCH,\n        x: parseInt(touchPointer.clientX, 10),\n        y: parseInt(touchPointer.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parsePointerEvent\",\n    value: function parsePointerEvent(pointerEvent) {\n      return {\n        id: pointerEvent.pointerId,\n        source: SOURCE_POINTER,\n        x: parseInt(pointerEvent.clientX, 10),\n        y: parseInt(pointerEvent.clientY, 10)\n      };\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"getTransform\",\n    value: function getTransform(_ref) {\n      var _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$zoom = _ref.zoom,\n          zoom = _ref$zoom === void 0 ? 1 : _ref$zoom,\n          width = _ref.width,\n          targetWidth = _ref.targetWidth;\n      var nextX = x;\n      var windowWidth = getWindowWidth();\n\n      if (width > windowWidth) {\n        nextX += (windowWidth - width) / 2;\n      }\n\n      var scaleFactor = zoom * (targetWidth / width);\n      return {\n        transform: \"translate3d(\".concat(nextX, \"px,\").concat(y, \"px,0) scale3d(\").concat(scaleFactor, \",\").concat(scaleFactor, \",1)\")\n      };\n    }\n  }]);\n\n  function ReactImageLightbox(props) {\n    var _this;\n\n    _classCallCheck(this, ReactImageLightbox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactImageLightbox).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheel\", function (event) {\n      event.preventDefault();\n    });\n\n    _this.state = {\n      //-----------------------------\n      // Animation\n      //-----------------------------\n      // Lightbox is closing\n      // When Lightbox is mounted, if animation is enabled it will open with the reverse of the closing animation\n      isClosing: !props.animationDisabled,\n      // Component parts should animate (e.g., when images are moving, or image is being zoomed)\n      shouldAnimate: false,\n      //-----------------------------\n      // Zoom settings\n      //-----------------------------\n      // Zoom level of image\n      zoomLevel: MIN_ZOOM_LEVEL,\n      //-----------------------------\n      // Image position settings\n      //-----------------------------\n      // Horizontal offset from center\n      offsetX: 0,\n      // Vertical offset from center\n      offsetY: 0,\n      // image load error for srcType\n      loadErrorStatus: {}\n    }; // Refs\n\n    _this.outerEl = React.createRef();\n    _this.zoomInBtn = React.createRef();\n    _this.zoomOutBtn = React.createRef();\n    _this.caption = React.createRef();\n    _this.closeIfClickInner = _this.closeIfClickInner.bind(_assertThisInitialized(_this));\n    _this.handleImageDoubleClick = _this.handleImageDoubleClick.bind(_assertThisInitialized(_this));\n    _this.handleImageMouseWheel = _this.handleImageMouseWheel.bind(_assertThisInitialized(_this));\n    _this.handleKeyInput = _this.handleKeyInput.bind(_assertThisInitialized(_this));\n    _this.handleMouseUp = _this.handleMouseUp.bind(_assertThisInitialized(_this));\n    _this.handleMouseDown = _this.handleMouseDown.bind(_assertThisInitialized(_this));\n    _this.handleMouseMove = _this.handleMouseMove.bind(_assertThisInitialized(_this));\n    _this.handleOuterMousewheel = _this.handleOuterMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleTouchStart = _this.handleTouchStart.bind(_assertThisInitialized(_this));\n    _this.handleTouchMove = _this.handleTouchMove.bind(_assertThisInitialized(_this));\n    _this.handleTouchEnd = _this.handleTouchEnd.bind(_assertThisInitialized(_this));\n    _this.handlePointerEvent = _this.handlePointerEvent.bind(_assertThisInitialized(_this));\n    _this.handleCaptionMousewheel = _this.handleCaptionMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleWindowResize = _this.handleWindowResize.bind(_assertThisInitialized(_this));\n    _this.handleZoomInButtonClick = _this.handleZoomInButtonClick.bind(_assertThisInitialized(_this));\n    _this.handleZoomOutButtonClick = _this.handleZoomOutButtonClick.bind(_assertThisInitialized(_this));\n    _this.requestClose = _this.requestClose.bind(_assertThisInitialized(_this));\n    _this.requestMoveNext = _this.requestMoveNext.bind(_assertThisInitialized(_this));\n    _this.requestMovePrev = _this.requestMovePrev.bind(_assertThisInitialized(_this));\n    return _this;\n  } // eslint-disable-next-line camelcase\n\n\n  _createClass(ReactImageLightbox, [{\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      // Timeouts - always clear it before umount\n      this.timeouts = []; // Current action\n\n      this.currentAction = ACTION_NONE; // Events source\n\n      this.eventsSource = SOURCE_ANY; // Empty pointers list\n\n      this.pointerList = []; // Prevent inner close\n\n      this.preventInnerClose = false;\n      this.preventInnerCloseTimeout = null; // Used to disable animation when changing props.mainSrc|nextSrc|prevSrc\n\n      this.keyPressed = false; // Used to store load state / dimensions of images\n\n      this.imageCache = {}; // Time the last keydown event was called (used in keyboard action rate limiting)\n\n      this.lastKeyDownTime = 0; // Used for debouncing window resize event\n\n      this.resizeTimeout = null; // Used to determine when actions are triggered by the scroll wheel\n\n      this.wheelActionTimeout = null;\n      this.resetScrollTimeout = null;\n      this.scrollX = 0;\n      this.scrollY = 0; // Used in panning zoomed images\n\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Used to swipe\n\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0; // Used to pinch\n\n      this.pinchTouchList = null;\n      this.pinchDistance = 0; // Used to differentiate between images with identical src\n\n      this.keyCounter = 0; // Used to detect a move when all src's remain unchanged (four or more of the same image in a row)\n\n      this.moveRequested = false;\n\n      if (!this.props.animationDisabled) {\n        // Make opening animation play\n        this.setState({\n          isClosing: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Prevents cross-origin errors when using a cross-origin iframe\n      this.windowContext = getHighestSafeWindowContext();\n      this.listeners = {\n        resize: this.handleWindowResize,\n        mouseup: this.handleMouseUp,\n        touchend: this.handleTouchEnd,\n        touchcancel: this.handleTouchEnd,\n        pointerdown: this.handlePointerEvent,\n        pointermove: this.handlePointerEvent,\n        pointerup: this.handlePointerEvent,\n        pointercancel: this.handlePointerEvent\n      };\n      Object.keys(this.listeners).forEach(function (type) {\n        _this2.windowContext.addEventListener(type, _this2.listeners[type]);\n      });\n      document.addEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.loadAllImages();\n    } // eslint-disable-next-line camelcase\n\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n\n      // Iterate through the source types for prevProps and nextProps to\n      //  determine if any of the sources changed\n      var sourcesChanged = false;\n      var prevSrcDict = {};\n      var nextSrcDict = {};\n      this.getSrcTypes().forEach(function (srcType) {\n        if (_this3.props[srcType.name] !== nextProps[srcType.name]) {\n          sourcesChanged = true;\n          prevSrcDict[_this3.props[srcType.name]] = true;\n          nextSrcDict[nextProps[srcType.name]] = true;\n        }\n      });\n\n      if (sourcesChanged || this.moveRequested) {\n        // Reset the loaded state for images not rendered next\n        Object.keys(prevSrcDict).forEach(function (prevSrc) {\n          if (!(prevSrc in nextSrcDict) && prevSrc in _this3.imageCache) {\n            _this3.imageCache[prevSrc].loaded = false;\n          }\n        });\n        this.moveRequested = false; // Load any new images\n\n        this.loadAllImages(nextProps);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate() {\n      // Wait for move...\n      return !this.moveRequested;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this4 = this;\n\n      this.didUnmount = true;\n      Object.keys(this.listeners).forEach(function (type) {\n        _this4.windowContext.removeEventListener(type, _this4.listeners[type]);\n      });\n      document.removeEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.timeouts.forEach(function (tid) {\n        return clearTimeout(tid);\n      });\n    }\n  }, {\n    key: \"setTimeout\",\n    value: function (_setTimeout) {\n      function setTimeout(_x, _x2) {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function (func, time) {\n      var _this5 = this;\n\n      var id = setTimeout(function () {\n        _this5.timeouts = _this5.timeouts.filter(function (tid) {\n          return tid !== id;\n        });\n        func();\n      }, time);\n      this.timeouts.push(id);\n      return id;\n    })\n  }, {\n    key: \"setPreventInnerClose\",\n    value: function setPreventInnerClose() {\n      var _this6 = this;\n\n      if (this.preventInnerCloseTimeout) {\n        this.clearTimeout(this.preventInnerCloseTimeout);\n      }\n\n      this.preventInnerClose = true;\n      this.preventInnerCloseTimeout = this.setTimeout(function () {\n        _this6.preventInnerClose = false;\n        _this6.preventInnerCloseTimeout = null;\n      }, 100);\n    } // Get info for the best suited image to display with the given srcType\n\n  }, {\n    key: \"getBestImageForType\",\n    value: function getBestImageForType(srcType) {\n      var imageSrc = this.props[srcType];\n      var fitSizes = {};\n\n      if (this.isImageLoaded(imageSrc)) {\n        // Use full-size image if available\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height);\n      } else if (this.isImageLoaded(this.props[\"\".concat(srcType, \"Thumbnail\")])) {\n        // Fall back to using thumbnail if the image has not been loaded\n        imageSrc = this.props[\"\".concat(srcType, \"Thumbnail\")];\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height, true);\n      } else {\n        return null;\n      }\n\n      return {\n        src: imageSrc,\n        height: this.imageCache[imageSrc].height,\n        width: this.imageCache[imageSrc].width,\n        targetHeight: fitSizes.height,\n        targetWidth: fitSizes.width\n      };\n    } // Get sizing for when an image is larger than the window\n\n  }, {\n    key: \"getFitSizes\",\n    value: function getFitSizes(width, height, stretch) {\n      var boxSize = this.getLightboxRect();\n      var maxHeight = boxSize.height - this.props.imagePadding * 2;\n      var maxWidth = boxSize.width - this.props.imagePadding * 2;\n\n      if (!stretch) {\n        maxHeight = Math.min(maxHeight, height);\n        maxWidth = Math.min(maxWidth, width);\n      }\n\n      var maxRatio = maxWidth / maxHeight;\n      var srcRatio = width / height;\n\n      if (maxRatio > srcRatio) {\n        // height is the constraining dimension of the photo\n        return {\n          width: width * maxHeight / height,\n          height: maxHeight\n        };\n      }\n\n      return {\n        width: maxWidth,\n        height: height * maxWidth / width\n      };\n    }\n  }, {\n    key: \"getMaxOffsets\",\n    value: function getMaxOffsets() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      var currentImageInfo = this.getBestImageForType('mainSrc');\n\n      if (currentImageInfo === null) {\n        return {\n          maxX: 0,\n          minX: 0,\n          maxY: 0,\n          minY: 0\n        };\n      }\n\n      var boxSize = this.getLightboxRect();\n      var zoomMultiplier = this.getZoomMultiplier(zoomLevel);\n      var maxX = 0;\n\n      if (zoomMultiplier * currentImageInfo.width - boxSize.width < 0) {\n        // if there is still blank space in the X dimension, don't limit except to the opposite edge\n        maxX = (boxSize.width - zoomMultiplier * currentImageInfo.width) / 2;\n      } else {\n        maxX = (zoomMultiplier * currentImageInfo.width - boxSize.width) / 2;\n      }\n\n      var maxY = 0;\n\n      if (zoomMultiplier * currentImageInfo.height - boxSize.height < 0) {\n        // if there is still blank space in the Y dimension, don't limit except to the opposite edge\n        maxY = (boxSize.height - zoomMultiplier * currentImageInfo.height) / 2;\n      } else {\n        maxY = (zoomMultiplier * currentImageInfo.height - boxSize.height) / 2;\n      }\n\n      return {\n        maxX: maxX,\n        maxY: maxY,\n        minX: -1 * maxX,\n        minY: -1 * maxY\n      };\n    } // Get image src types\n\n  }, {\n    key: \"getSrcTypes\",\n    value: function getSrcTypes() {\n      return [{\n        name: 'mainSrc',\n        keyEnding: \"i\".concat(this.keyCounter)\n      }, {\n        name: 'mainSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter)\n      }, {\n        name: 'nextSrc',\n        keyEnding: \"i\".concat(this.keyCounter + 1)\n      }, {\n        name: 'nextSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter + 1)\n      }, {\n        name: 'prevSrc',\n        keyEnding: \"i\".concat(this.keyCounter - 1)\n      }, {\n        name: 'prevSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter - 1)\n      }];\n    }\n    /**\n     * Get sizing when the image is scaled\n     */\n\n  }, {\n    key: \"getZoomMultiplier\",\n    value: function getZoomMultiplier() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      return Math.pow(ZOOM_RATIO, zoomLevel);\n    }\n    /**\n     * Get the size of the lightbox in pixels\n     */\n\n  }, {\n    key: \"getLightboxRect\",\n    value: function getLightboxRect() {\n      if (this.outerEl.current) {\n        return this.outerEl.current.getBoundingClientRect();\n      }\n\n      return {\n        width: getWindowWidth(),\n        height: getWindowHeight(),\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n    }\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x3) {\n        return _clearTimeout.apply(this, arguments);\n      }\n\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n\n      return clearTimeout;\n    }(function (id) {\n      this.timeouts = this.timeouts.filter(function (tid) {\n        return tid !== id;\n      });\n      clearTimeout(id);\n    }) // Change zoom level\n\n  }, {\n    key: \"changeZoom\",\n    value: function changeZoom(zoomLevel, clientX, clientY) {\n      // Ignore if zoom disabled\n      if (!this.props.enableZoom) {\n        return;\n      } // Constrain zoom level to the set bounds\n\n\n      var nextZoomLevel = Math.max(MIN_ZOOM_LEVEL, Math.min(MAX_ZOOM_LEVEL, zoomLevel)); // Ignore requests that don't change the zoom level\n\n      if (nextZoomLevel === this.state.zoomLevel) {\n        return;\n      }\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        // Snap back to center if zoomed all the way out\n        this.setState({\n          zoomLevel: nextZoomLevel,\n          offsetX: 0,\n          offsetY: 0\n        });\n        return;\n      }\n\n      var imageBaseSize = this.getBestImageForType('mainSrc');\n\n      if (imageBaseSize === null) {\n        return;\n      }\n\n      var currentZoomMultiplier = this.getZoomMultiplier();\n      var nextZoomMultiplier = this.getZoomMultiplier(nextZoomLevel); // Default to the center of the image to zoom when no mouse position specified\n\n      var boxRect = this.getLightboxRect();\n      var pointerX = typeof clientX !== 'undefined' ? clientX - boxRect.left : boxRect.width / 2;\n      var pointerY = typeof clientY !== 'undefined' ? clientY - boxRect.top : boxRect.height / 2;\n      var currentImageOffsetX = (boxRect.width - imageBaseSize.width * currentZoomMultiplier) / 2;\n      var currentImageOffsetY = (boxRect.height - imageBaseSize.height * currentZoomMultiplier) / 2;\n      var currentImageRealOffsetX = currentImageOffsetX - this.state.offsetX;\n      var currentImageRealOffsetY = currentImageOffsetY - this.state.offsetY;\n      var currentPointerXRelativeToImage = (pointerX - currentImageRealOffsetX) / currentZoomMultiplier;\n      var currentPointerYRelativeToImage = (pointerY - currentImageRealOffsetY) / currentZoomMultiplier;\n      var nextImageRealOffsetX = pointerX - currentPointerXRelativeToImage * nextZoomMultiplier;\n      var nextImageRealOffsetY = pointerY - currentPointerYRelativeToImage * nextZoomMultiplier;\n      var nextImageOffsetX = (boxRect.width - imageBaseSize.width * nextZoomMultiplier) / 2;\n      var nextImageOffsetY = (boxRect.height - imageBaseSize.height * nextZoomMultiplier) / 2;\n      var nextOffsetX = nextImageOffsetX - nextImageRealOffsetX;\n      var nextOffsetY = nextImageOffsetY - nextImageRealOffsetY; // When zooming out, limit the offset so things don't get left askew\n\n      if (this.currentAction !== ACTION_PINCH) {\n        var maxOffsets = this.getMaxOffsets();\n\n        if (this.state.zoomLevel > nextZoomLevel) {\n          nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, nextOffsetX));\n          nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, nextOffsetY));\n        }\n      }\n\n      this.setState({\n        zoomLevel: nextZoomLevel,\n        offsetX: nextOffsetX,\n        offsetY: nextOffsetY\n      });\n    }\n  }, {\n    key: \"closeIfClickInner\",\n    value: function closeIfClickInner(event) {\n      if (!this.preventInnerClose && event.target.className.search(/\\bril-inner\\b/) > -1) {\n        this.requestClose(event);\n      }\n    }\n    /**\n     * Handle user keyboard actions\n     */\n\n  }, {\n    key: \"handleKeyInput\",\n    value: function handleKeyInput(event) {\n      event.stopPropagation(); // Ignore key input during animations\n\n      if (this.isAnimating()) {\n        return;\n      } // Allow slightly faster navigation through the images when user presses keys repeatedly\n\n\n      if (event.type === 'keyup') {\n        this.lastKeyDownTime -= this.props.keyRepeatKeyupBonus;\n        return;\n      }\n\n      var keyCode = event.which || event.keyCode; // Ignore key presses that happen too close to each other (when rapid fire key pressing or holding down the key)\n      // But allow it if it's a lightbox closing action\n\n      var currentTime = new Date();\n\n      if (currentTime.getTime() - this.lastKeyDownTime < this.props.keyRepeatLimit && keyCode !== KEYS.ESC) {\n        return;\n      }\n\n      this.lastKeyDownTime = currentTime.getTime();\n\n      switch (keyCode) {\n        // ESC key closes the lightbox\n        case KEYS.ESC:\n          event.preventDefault();\n          this.requestClose(event);\n          break;\n        // Left arrow key moves to previous image\n\n        case KEYS.LEFT_ARROW:\n          if (!this.props.prevSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMovePrev(event);\n          break;\n        // Right arrow key moves to next image\n\n        case KEYS.RIGHT_ARROW:\n          if (!this.props.nextSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMoveNext(event);\n          break;\n      }\n    }\n    /**\n     * Handle a mouse wheel event over the lightbox container\n     */\n\n  }, {\n    key: \"handleOuterMousewheel\",\n    value: function handleOuterMousewheel(event) {\n      var _this7 = this;\n\n      // Prevent scrolling of the background\n      event.stopPropagation();\n      this.clearTimeout(this.resetScrollTimeout);\n      this.resetScrollTimeout = this.setTimeout(function () {\n        _this7.scrollX = 0;\n        _this7.scrollY = 0;\n      }, 300);\n    }\n  }, {\n    key: \"handleImageMouseWheel\",\n    value: function handleImageMouseWheel(event) {\n      // when gesture move up/down/left/right, event.deltaY is integer, move image\n      if (parseInt(event.deltaY) === parseFloat(event.deltaY)) {\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n          var newOffsetY = this.state.offsetY + event.deltaY;\n          this.setState({\n            offsetY: newOffsetY\n          });\n        } else {\n          var newOffsetX = this.state.offsetX + event.deltaX;\n          this.setState({\n            offsetX: newOffsetX\n          });\n        }\n\n        return;\n      } // when gesture zoom in or zoom out, event.deltaY is decimal, zoom image\n\n\n      var yThreshold = WHEEL_MOVE_Y_THRESHOLD;\n\n      if (Math.abs(event.deltaY) >= Math.abs(event.deltaX)) {\n        event.stopPropagation(); // If the vertical scroll amount was large enough, perform a zoom\n\n        if (Math.abs(event.deltaY) < yThreshold) {\n          return;\n        }\n\n        this.scrollX = 0;\n        this.scrollY += event.deltaY;\n        this.changeZoom(this.state.zoomLevel - event.deltaY, event.clientX, event.clientY);\n      }\n    }\n    /**\n     * Handle a double click on the current image\n     */\n\n  }, {\n    key: \"handleImageDoubleClick\",\n    value: function handleImageDoubleClick(event) {\n      if (this.state.zoomLevel > MIN_ZOOM_LEVEL) {\n        // A double click when zoomed in zooms all the way out\n        this.changeZoom(MIN_ZOOM_LEVEL, event.clientX, event.clientY);\n      } else {\n        // A double click when zoomed all the way out zooms in\n        this.changeZoom(this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE, event.clientX, event.clientY);\n      }\n    }\n  }, {\n    key: \"shouldHandleEvent\",\n    value: function shouldHandleEvent(source) {\n      if (this.eventsSource === source) {\n        return true;\n      }\n\n      if (this.eventsSource === SOURCE_ANY) {\n        this.eventsSource = source;\n        return true;\n      }\n\n      switch (source) {\n        case SOURCE_MOUSE:\n          return false;\n\n        case SOURCE_TOUCH:\n          this.eventsSource = SOURCE_TOUCH;\n          this.filterPointersBySource();\n          return true;\n\n        case SOURCE_POINTER:\n          if (this.eventsSource === SOURCE_MOUSE) {\n            this.eventsSource = SOURCE_POINTER;\n            this.filterPointersBySource();\n            return true;\n          }\n\n          return false;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"addPointer\",\n    value: function addPointer(pointer) {\n      this.pointerList.push(pointer);\n    }\n  }, {\n    key: \"removePointer\",\n    value: function removePointer(pointer) {\n      this.pointerList = this.pointerList.filter(function (_ref2) {\n        var id = _ref2.id;\n        return id !== pointer.id;\n      });\n    }\n  }, {\n    key: \"filterPointersBySource\",\n    value: function filterPointersBySource() {\n      var _this8 = this;\n\n      this.pointerList = this.pointerList.filter(function (_ref3) {\n        var source = _ref3.source;\n        return source === _this8.eventsSource;\n      });\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        this.addPointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.multiPointerMove(event, [ReactImageLightbox.parseMouseEvent(event)]);\n      }\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.removePointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"handlePointerEvent\",\n    value: function handlePointerEvent(event) {\n      if (this.shouldHandleEvent(SOURCE_POINTER)) {\n        switch (event.type) {\n          case 'pointerdown':\n            if (ReactImageLightbox.isTargetMatchImage(event.target)) {\n              this.addPointer(ReactImageLightbox.parsePointerEvent(event));\n              this.multiPointerStart(event);\n            }\n\n            break;\n\n          case 'pointermove':\n            this.multiPointerMove(event, [ReactImageLightbox.parsePointerEvent(event)]);\n            break;\n\n          case 'pointerup':\n          case 'pointercancel':\n            this.removePointer(ReactImageLightbox.parsePointerEvent(event));\n            this.multiPointerEnd(event);\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"handleTouchStart\",\n    value: function handleTouchStart(event) {\n      var _this9 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        [].forEach.call(event.changedTouches, function (eventTouch) {\n          return _this9.addPointer(ReactImageLightbox.parseTouchPointer(eventTouch));\n        });\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleTouchMove\",\n    value: function handleTouchMove(event) {\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        this.multiPointerMove(event, [].map.call(event.changedTouches, function (eventTouch) {\n          return ReactImageLightbox.parseTouchPointer(eventTouch);\n        }));\n      }\n    }\n  }, {\n    key: \"handleTouchEnd\",\n    value: function handleTouchEnd(event) {\n      var _this10 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        [].map.call(event.changedTouches, function (touch) {\n          return _this10.removePointer(ReactImageLightbox.parseTouchPointer(touch));\n        });\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"decideMoveOrSwipe\",\n    value: function decideMoveOrSwipe(pointer) {\n      if (this.state.zoomLevel <= MIN_ZOOM_LEVEL) {\n        this.handleSwipeStart(pointer);\n      } else {\n        this.handleMoveStart(pointer);\n      }\n    }\n  }, {\n    key: \"multiPointerStart\",\n    value: function multiPointerStart(event) {\n      this.handleEnd(null);\n\n      switch (this.pointerList.length) {\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerMove\",\n    value: function multiPointerMove(event, pointerList) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          {\n            event.preventDefault();\n            this.handleMove(pointerList[0]);\n            break;\n          }\n\n        case ACTION_SWIPE:\n          {\n            event.preventDefault();\n            this.handleSwipe(pointerList[0]);\n            break;\n          }\n\n        case ACTION_PINCH:\n          {\n            event.preventDefault();\n            this.handlePinch(pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerEnd\",\n    value: function multiPointerEnd(event) {\n      if (this.currentAction !== ACTION_NONE) {\n        this.setPreventInnerClose();\n        this.handleEnd(event);\n      }\n\n      switch (this.pointerList.length) {\n        case 0:\n          {\n            this.eventsSource = SOURCE_ANY;\n            break;\n          }\n\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(event) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          this.handleMoveEnd(event);\n          break;\n\n        case ACTION_SWIPE:\n          this.handleSwipeEnd(event);\n          break;\n\n        case ACTION_PINCH:\n          this.handlePinchEnd(event);\n          break;\n      }\n    } // Handle move start over the lightbox container\n    // This happens:\n    // - On a mouseDown event\n    // - On a touchstart event\n\n  }, {\n    key: \"handleMoveStart\",\n    value: function handleMoveStart(_ref4) {\n      var clientX = _ref4.x,\n          clientY = _ref4.y;\n\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_MOVE;\n      this.moveStartX = clientX;\n      this.moveStartY = clientY;\n      this.moveStartOffsetX = this.state.offsetX;\n      this.moveStartOffsetY = this.state.offsetY;\n    } // Handle dragging over the lightbox container\n    // This happens:\n    // - After a mouseDown and before a mouseUp event\n    // - After a touchstart and before a touchend event\n\n  }, {\n    key: \"handleMove\",\n    value: function handleMove(_ref5) {\n      var clientX = _ref5.x,\n          clientY = _ref5.y;\n      var newOffsetX = this.moveStartX - clientX + this.moveStartOffsetX;\n      var newOffsetY = this.moveStartY - clientY + this.moveStartOffsetY;\n\n      if (this.state.offsetX !== newOffsetX || this.state.offsetY !== newOffsetY) {\n        this.setState({\n          offsetX: newOffsetX,\n          offsetY: newOffsetY\n        });\n      }\n    }\n  }, {\n    key: \"handleMoveEnd\",\n    value: function handleMoveEnd() {\n      var _this11 = this;\n\n      this.currentAction = ACTION_NONE;\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Snap image back into frame if outside max offset range\n\n      var maxOffsets = this.getMaxOffsets();\n      var nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, this.state.offsetX));\n      var nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, this.state.offsetY));\n\n      if (nextOffsetX !== this.state.offsetX || nextOffsetY !== this.state.offsetY) {\n        this.setState({\n          offsetX: nextOffsetX,\n          offsetY: nextOffsetY,\n          shouldAnimate: true\n        });\n        this.setTimeout(function () {\n          _this11.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n    }\n  }, {\n    key: \"handleSwipeStart\",\n    value: function handleSwipeStart(_ref6) {\n      var clientX = _ref6.x,\n          clientY = _ref6.y;\n      this.currentAction = ACTION_SWIPE;\n      this.swipeStartX = clientX;\n      this.swipeStartY = clientY;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipe\",\n    value: function handleSwipe(_ref7) {\n      var clientX = _ref7.x,\n          clientY = _ref7.y;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipeEnd\",\n    value: function handleSwipeEnd(event) {\n      var xDiff = this.swipeEndX - this.swipeStartX;\n      var xDiffAbs = Math.abs(xDiff);\n      var yDiffAbs = Math.abs(this.swipeEndY - this.swipeStartY);\n      this.currentAction = ACTION_NONE;\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0;\n\n      if (!event || this.isAnimating() || xDiffAbs < yDiffAbs * 1.5) {\n        return;\n      }\n\n      if (xDiffAbs < MIN_SWIPE_DISTANCE) {\n        var boxRect = this.getLightboxRect();\n\n        if (xDiffAbs < boxRect.width / 4) {\n          return;\n        }\n      }\n\n      if (xDiff > 0 && this.props.prevSrc) {\n        event.preventDefault();\n        this.requestMovePrev();\n      } else if (xDiff < 0 && this.props.nextSrc) {\n        event.preventDefault();\n        this.requestMoveNext();\n      }\n    }\n  }, {\n    key: \"calculatePinchDistance\",\n    value: function calculatePinchDistance() {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref9 = _slicedToArray(_ref8, 2),\n          a = _ref9[0],\n          b = _ref9[1];\n\n      return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n    }\n  }, {\n    key: \"calculatePinchCenter\",\n    value: function calculatePinchCenter() {\n      var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref11 = _slicedToArray(_ref10, 2),\n          a = _ref11[0],\n          b = _ref11[1];\n\n      return {\n        x: a.x - (a.x - b.x) / 2,\n        y: a.y - (a.y - b.y) / 2\n      };\n    }\n  }, {\n    key: \"handlePinchStart\",\n    value: function handlePinchStart(pointerList) {\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_PINCH;\n      this.pinchTouchList = pointerList.map(function (_ref12) {\n        var id = _ref12.id,\n            x = _ref12.x,\n            y = _ref12.y;\n        return {\n          id: id,\n          x: x,\n          y: y\n        };\n      });\n      this.pinchDistance = this.calculatePinchDistance();\n    }\n  }, {\n    key: \"handlePinch\",\n    value: function handlePinch(pointerList) {\n      this.pinchTouchList = this.pinchTouchList.map(function (oldPointer) {\n        for (var i = 0; i < pointerList.length; i += 1) {\n          if (pointerList[i].id === oldPointer.id) {\n            return pointerList[i];\n          }\n        }\n\n        return oldPointer;\n      });\n      var newDistance = this.calculatePinchDistance();\n      var zoomLevel = this.state.zoomLevel + newDistance - this.pinchDistance;\n      this.pinchDistance = newDistance;\n\n      var _this$calculatePinchC = this.calculatePinchCenter(this.pinchTouchList),\n          clientX = _this$calculatePinchC.x,\n          clientY = _this$calculatePinchC.y;\n\n      this.changeZoom(zoomLevel, clientX, clientY);\n    }\n  }, {\n    key: \"handlePinchEnd\",\n    value: function handlePinchEnd() {\n      this.currentAction = ACTION_NONE;\n      this.pinchTouchList = null;\n      this.pinchDistance = 0;\n    } // Handle the window resize event\n\n  }, {\n    key: \"handleWindowResize\",\n    value: function handleWindowResize() {\n      this.clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = this.setTimeout(this.forceUpdate.bind(this), 100);\n    }\n  }, {\n    key: \"handleZoomInButtonClick\",\n    value: function handleZoomInButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MAX_ZOOM_LEVEL) {\n        this.zoomOutBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleZoomOutButtonClick\",\n    value: function handleZoomOutButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel - ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        this.zoomInBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleCaptionMousewheel\",\n    value: function handleCaptionMousewheel(event) {\n      event.stopPropagation();\n\n      if (!this.caption.current) {\n        return;\n      }\n\n      var _this$caption$current = this.caption.current.getBoundingClientRect(),\n          height = _this$caption$current.height;\n\n      var _this$caption$current2 = this.caption.current,\n          scrollHeight = _this$caption$current2.scrollHeight,\n          scrollTop = _this$caption$current2.scrollTop;\n\n      if (event.deltaY > 0 && height + scrollTop >= scrollHeight || event.deltaY < 0 && scrollTop <= 0) {\n        event.preventDefault();\n      }\n    } // Detach key and mouse input events\n\n  }, {\n    key: \"isAnimating\",\n    value: function isAnimating() {\n      return this.state.shouldAnimate || this.state.isClosing;\n    } // Check if image is loaded\n\n  }, {\n    key: \"isImageLoaded\",\n    value: function isImageLoaded(imageSrc) {\n      return imageSrc && imageSrc in this.imageCache && this.imageCache[imageSrc].loaded;\n    } // Load image from src and call callback with image width and height on load\n\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(srcType, imageSrc, done) {\n      var _this12 = this;\n\n      // Return the image info if it is already cached\n      if (this.isImageLoaded(imageSrc)) {\n        this.setTimeout(function () {\n          done();\n        }, 1);\n        return;\n      }\n\n      var inMemoryImage = new global.Image();\n\n      if (this.props.imageCrossOrigin) {\n        inMemoryImage.crossOrigin = this.props.imageCrossOrigin;\n      }\n\n      inMemoryImage.onerror = function (errorEvent) {\n        _this12.props.onImageLoadError(imageSrc, srcType, errorEvent); // failed to load so set the state loadErrorStatus\n\n\n        _this12.setState(function (prevState) {\n          return {\n            loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, srcType, true))\n          };\n        });\n\n        done(errorEvent);\n      };\n\n      inMemoryImage.onload = function () {\n        _this12.props.onImageLoad(imageSrc, srcType, inMemoryImage);\n\n        _this12.imageCache[imageSrc] = {\n          loaded: true,\n          width: inMemoryImage.width,\n          height: inMemoryImage.height\n        };\n        done();\n      };\n\n      inMemoryImage.src = imageSrc;\n    } // Load all images and their thumbnails\n\n  }, {\n    key: \"loadAllImages\",\n    value: function loadAllImages() {\n      var _this13 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n\n      var generateLoadDoneCallback = function generateLoadDoneCallback(srcType, imageSrc) {\n        return function (err) {\n          // Give up showing image on error\n          if (err) {\n            return;\n          } // Don't rerender if the src is not the same as when the load started\n          // or if the component has unmounted\n\n\n          if (_this13.props[srcType] !== imageSrc || _this13.didUnmount) {\n            return;\n          } // Force rerender with the new image\n\n\n          _this13.forceUpdate();\n        };\n      }; // Load the images\n\n\n      this.getSrcTypes().forEach(function (srcType) {\n        var type = srcType.name; // there is no error when we try to load it initially\n\n        if (props[type] && _this13.state.loadErrorStatus[type]) {\n          _this13.setState(function (prevState) {\n            return {\n              loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, type, false))\n            };\n          });\n        } // Load unloaded images\n\n\n        if (props[type] && !_this13.isImageLoaded(props[type])) {\n          _this13.loadImage(type, props[type], generateLoadDoneCallback(type, props[type]));\n        }\n      });\n    } // Request that the lightbox be closed\n\n  }, {\n    key: \"requestClose\",\n    value: function requestClose(event) {\n      var _this14 = this;\n\n      // Call the parent close request\n      var closeLightbox = function closeLightbox() {\n        return _this14.props.onCloseRequest(event);\n      };\n\n      if (this.props.animationDisabled || event.type === 'keydown' && !this.props.animationOnKeyInput) {\n        // No animation\n        closeLightbox();\n        return;\n      } // With animation\n      // Start closing animation\n\n\n      this.setState({\n        isClosing: true\n      }); // Perform the actual closing at the end of the animation\n\n      this.setTimeout(closeLightbox, this.props.animationDuration);\n    }\n  }, {\n    key: \"requestMove\",\n    value: function requestMove(direction, event) {\n      var _this15 = this;\n\n      // Reset the zoom level on image move\n      var nextState = {\n        zoomLevel: MIN_ZOOM_LEVEL,\n        offsetX: 0,\n        offsetY: 0\n      }; // Enable animated states\n\n      if (!this.props.animationDisabled && (!this.keyPressed || this.props.animationOnKeyInput)) {\n        nextState.shouldAnimate = true;\n        this.setTimeout(function () {\n          return _this15.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n\n      this.keyPressed = false;\n      this.moveRequested = true;\n\n      if (direction === 'prev') {\n        this.keyCounter -= 1;\n        this.setState(nextState);\n        this.props.onMovePrevRequest(event);\n      } else {\n        this.keyCounter += 1;\n        this.setState(nextState);\n        this.props.onMoveNextRequest(event);\n      }\n    } // Request to transition to the next image\n\n  }, {\n    key: \"requestMoveNext\",\n    value: function requestMoveNext(event) {\n      this.requestMove('next', event);\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"requestMovePrev\",\n    value: function requestMovePrev(event) {\n      this.requestMove('prev', event);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this16 = this;\n\n      var _this$props = this.props,\n          animationDisabled = _this$props.animationDisabled,\n          animationDuration = _this$props.animationDuration,\n          clickOutsideToClose = _this$props.clickOutsideToClose,\n          discourageDownloads = _this$props.discourageDownloads,\n          enableZoom = _this$props.enableZoom,\n          imageTitle = _this$props.imageTitle,\n          nextSrc = _this$props.nextSrc,\n          prevSrc = _this$props.prevSrc,\n          toolbarButtons = _this$props.toolbarButtons,\n          reactModalStyle = _this$props.reactModalStyle,\n          _onAfterOpen = _this$props.onAfterOpen,\n          imageCrossOrigin = _this$props.imageCrossOrigin,\n          reactModalProps = _this$props.reactModalProps;\n      var _this$state = this.state,\n          zoomLevel = _this$state.zoomLevel,\n          offsetX = _this$state.offsetX,\n          offsetY = _this$state.offsetY,\n          isClosing = _this$state.isClosing,\n          loadErrorStatus = _this$state.loadErrorStatus;\n      var boxSize = this.getLightboxRect();\n      var transitionStyle = {}; // Transition settings for sliding animations\n\n      if (!animationDisabled && this.isAnimating()) {\n        transitionStyle = _objectSpread2({}, transitionStyle, {\n          transition: \"transform \".concat(animationDuration, \"ms\")\n        });\n      } // Key endings to differentiate between images with the same src\n\n\n      var keyEndings = {};\n      this.getSrcTypes().forEach(function (_ref13) {\n        var name = _ref13.name,\n            keyEnding = _ref13.keyEnding;\n        keyEndings[name] = keyEnding;\n      }); // Images to be displayed\n\n      var images = [];\n\n      var addImage = function addImage(srcType, imageClass, transforms) {\n        // Ignore types that have no source defined for their full size image\n        if (!_this16.props[srcType]) {\n          return;\n        }\n\n        var bestImageInfo = _this16.getBestImageForType(srcType);\n\n        var imageStyle = _objectSpread2({}, transitionStyle, {}, ReactImageLightbox.getTransform(_objectSpread2({}, transforms, {}, bestImageInfo)));\n\n        if (zoomLevel > MIN_ZOOM_LEVEL) {\n          imageStyle.cursor = 'move';\n        } // support IE 9 and 11\n\n\n        var hasTrueValue = function hasTrueValue(object) {\n          return Object.keys(object).some(function (key) {\n            return object[key];\n          });\n        }; // when error on one of the loads then push custom error stuff\n\n\n        if (bestImageInfo === null && hasTrueValue(loadErrorStatus)) {\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-errored\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__errorContainer\"\n          }, _this16.props.imageLoadErrorMessage)));\n          return;\n        }\n\n        if (bestImageInfo === null) {\n          var loadingIcon = React.createElement(\"div\", {\n            className: \"ril-loading-circle ril__loadingCircle ril__loadingContainer__icon\"\n          }, _toConsumableArray(new Array(12)).map(function (_, index) {\n            return React.createElement(\"div\", {\n              // eslint-disable-next-line react/no-array-index-key\n              key: index,\n              className: \"ril-loading-circle-point ril__loadingCirclePoint\"\n            });\n          })); // Fall back to loading icon if the thumbnail has not been loaded\n\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-not-loaded\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__loadingContainer\"\n          }, loadingIcon)));\n          return;\n        }\n\n        var imageSrc = bestImageInfo.src;\n\n        if (discourageDownloads) {\n          imageStyle.backgroundImage = \"url('\".concat(imageSrc, \"')\");\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril__imageDiscourager\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            style: imageStyle,\n            key: imageSrc + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril-download-blocker ril__downloadBlocker\"\n          })));\n        } else {\n          images.push(React.createElement(\"img\", _extends({}, imageCrossOrigin ? {\n            crossOrigin: imageCrossOrigin\n          } : {}, {\n            className: \"\".concat(imageClass, \" ril__image\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            onDragStart: function onDragStart(e) {\n              return e.preventDefault();\n            },\n            style: imageStyle,\n            src: imageSrc,\n            key: imageSrc + keyEndings[srcType],\n            alt: typeof imageTitle === 'string' ? imageTitle : translate('Image'),\n            draggable: false\n          })));\n        }\n      };\n\n      var zoomMultiplier = this.getZoomMultiplier(); // Next Image (displayed on the right)\n\n      addImage('nextSrc', 'ril-image-next ril__imageNext', {\n        x: boxSize.width\n      }); // Main Image\n\n      addImage('mainSrc', 'ril-image-current', {\n        x: -1 * offsetX,\n        y: -1 * offsetY,\n        zoom: zoomMultiplier\n      }); // Previous Image (displayed on the left)\n\n      addImage('prevSrc', 'ril-image-prev ril__imagePrev', {\n        x: -1 * boxSize.width\n      });\n      var modalStyle = {\n        overlay: _objectSpread2({\n          zIndex: 1000,\n          backgroundColor: 'transparent'\n        }, reactModalStyle.overlay),\n        content: _objectSpread2({\n          backgroundColor: 'transparent',\n          overflow: 'hidden',\n          // Needed, otherwise keyboard shortcuts scroll the page\n          border: 'none',\n          borderRadius: 0,\n          padding: 0,\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }, reactModalStyle.content)\n      };\n      return React.createElement(Modal, _extends({\n        isOpen: true,\n        onRequestClose: clickOutsideToClose ? this.requestClose : undefined,\n        onAfterOpen: function onAfterOpen() {\n          // Focus on the div with key handlers\n          if (_this16.outerEl.current) {\n            _this16.outerEl.current.focus();\n          }\n\n          _onAfterOpen();\n        },\n        style: modalStyle,\n        contentLabel: translate('Lightbox'),\n        appElement: typeof global.window !== 'undefined' ? global.window.document.body : undefined\n      }, reactModalProps), React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions\n        // Floating modal with closing animations\n        className: \"ril-outer ril__outer ril__outerAnimating \".concat(this.props.wrapperClassName, \" \").concat(isClosing ? 'ril-closing ril__outerClosing' : ''),\n        style: {\n          transition: \"opacity \".concat(animationDuration, \"ms\"),\n          animationDuration: \"\".concat(animationDuration, \"ms\"),\n          animationDirection: isClosing ? 'normal' : 'reverse'\n        },\n        ref: this.outerEl,\n        onWheel: this.handleOuterMousewheel,\n        onMouseMove: this.handleMouseMove,\n        onMouseDown: this.handleMouseDown,\n        onTouchStart: this.handleTouchStart,\n        onTouchMove: this.handleTouchMove,\n        tabIndex: \"-1\" // Enables key handlers on div\n        ,\n        onKeyDown: this.handleKeyInput,\n        onKeyUp: this.handleKeyInput\n      }, React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events\n        // Image holder\n        className: \"ril-inner ril__inner\",\n        onClick: clickOutsideToClose ? this.closeIfClickInner : undefined\n      }, images), prevSrc && React.createElement(\"button\", {\n        // Move to previous image button\n        type: \"button\",\n        className: \"ril-prev-button ril__navButtons ril__navButtonPrev\",\n        key: \"prev\",\n        \"aria-label\": this.props.prevLabel,\n        onClick: !this.isAnimating() ? this.requestMovePrev : undefined // Ignore clicks during animation\n\n      }), nextSrc && React.createElement(\"button\", {\n        // Move to next image button\n        type: \"button\",\n        className: \"ril-next-button ril__navButtons ril__navButtonNext\",\n        key: \"next\",\n        \"aria-label\": this.props.nextLabel,\n        onClick: !this.isAnimating() ? this.requestMoveNext : undefined // Ignore clicks during animation\n\n      }), React.createElement(\"div\", {\n        // Lightbox toolbar\n        className: \"ril-toolbar ril__toolbar\"\n      }, React.createElement(\"ul\", {\n        className: \"ril-toolbar-left ril__toolbarSide ril__toolbarLeftSide\"\n      }, React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"span\", {\n        className: \"ril-toolbar__item__child ril__toolbarItemChild\"\n      }, imageTitle))), React.createElement(\"ul\", {\n        className: \"ril-toolbar-right ril__toolbarSide ril__toolbarRightSide\"\n      }, toolbarButtons && toolbarButtons.map(function (button, i) {\n        return React.createElement(\"li\", {\n          key: \"button_\".concat(i + 1),\n          className: \"ril-toolbar__item ril__toolbarItem\"\n        }, button);\n      }), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom in button\n        type: \"button\",\n        key: \"zoom-in\",\n        \"aria-label\": this.props.zoomInLabel,\n        className: ['ril-zoom-in', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomInButton'].concat(_toConsumableArray(zoomLevel === MAX_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomInBtn,\n        disabled: this.isAnimating() || zoomLevel === MAX_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MAX_ZOOM_LEVEL ? this.handleZoomInButtonClick : undefined\n      })), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom out button\n        type: \"button\",\n        key: \"zoom-out\",\n        \"aria-label\": this.props.zoomOutLabel,\n        className: ['ril-zoom-out', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomOutButton'].concat(_toConsumableArray(zoomLevel === MIN_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomOutBtn,\n        disabled: this.isAnimating() || zoomLevel === MIN_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MIN_ZOOM_LEVEL ? this.handleZoomOutButtonClick : undefined\n      })), React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox close button\n        type: \"button\",\n        key: \"close\",\n        \"aria-label\": this.props.closeLabel,\n        className: \"ril-close ril-toolbar__item__child ril__toolbarItemChild ril__builtinButton ril__closeButton\",\n        onClick: !this.isAnimating() ? this.requestClose : undefined // Ignore clicks during animation\n\n      })))), this.props.imageCaption && // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      React.createElement(\"div\", {\n        // Image caption\n        onWheel: this.handleCaptionMousewheel,\n        onMouseDown: function onMouseDown(event) {\n          return event.stopPropagation();\n        },\n        className: \"ril-caption ril__caption\",\n        ref: this.caption\n      }, React.createElement(\"div\", {\n        className: \"ril-caption-content ril__captionContent\"\n      }, this.props.imageCaption))));\n    }\n  }]);\n\n  return ReactImageLightbox;\n}(Component);\n\nReactImageLightbox.propTypes = {\n  //-----------------------------\n  // Image sources\n  //-----------------------------\n  // Main display image url\n  mainSrc: PropTypes.string.isRequired,\n  // eslint-disable-line react/no-unused-prop-types\n  // Previous display image url (displayed to the left)\n  // If left undefined, movePrev actions will not be performed, and the button not displayed\n  prevSrc: PropTypes.string,\n  // Next display image url (displayed to the right)\n  // If left undefined, moveNext actions will not be performed, and the button not displayed\n  nextSrc: PropTypes.string,\n  //-----------------------------\n  // Image thumbnail sources\n  //-----------------------------\n  // Thumbnail image url corresponding to props.mainSrc\n  mainSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.prevSrc\n  prevSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.nextSrc\n  nextSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  //-----------------------------\n  // Event Handlers\n  //-----------------------------\n  // Close window event\n  // Should change the parent state such that the lightbox is not rendered\n  onCloseRequest: PropTypes.func.isRequired,\n  // Move to previous image event\n  // Should change the parent state such that props.prevSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.nextSrc, etc.\n  onMovePrevRequest: PropTypes.func,\n  // Move to next image event\n  // Should change the parent state such that props.nextSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.prevSrc, etc.\n  onMoveNextRequest: PropTypes.func,\n  // Called when an image fails to load\n  // (imageSrc: string, srcType: string, errorEvent: object): void\n  onImageLoadError: PropTypes.func,\n  // Called when image successfully loads\n  onImageLoad: PropTypes.func,\n  // Open window event\n  onAfterOpen: PropTypes.func,\n  //-----------------------------\n  // Download discouragement settings\n  //-----------------------------\n  // Enable download discouragement (prevents [right-click -> Save Image As...])\n  discourageDownloads: PropTypes.bool,\n  //-----------------------------\n  // Animation settings\n  //-----------------------------\n  // Disable all animation\n  animationDisabled: PropTypes.bool,\n  // Disable animation on actions performed with keyboard shortcuts\n  animationOnKeyInput: PropTypes.bool,\n  // Animation duration (ms)\n  animationDuration: PropTypes.number,\n  //-----------------------------\n  // Keyboard shortcut settings\n  //-----------------------------\n  // Required interval of time (ms) between key actions\n  // (prevents excessively fast navigation of images)\n  keyRepeatLimit: PropTypes.number,\n  // Amount of time (ms) restored after each keyup\n  // (makes rapid key presses slightly faster than holding down the key to navigate images)\n  keyRepeatKeyupBonus: PropTypes.number,\n  //-----------------------------\n  // Image info\n  //-----------------------------\n  // Image title\n  imageTitle: PropTypes.node,\n  // Image caption\n  imageCaption: PropTypes.node,\n  // Optional crossOrigin attribute\n  imageCrossOrigin: PropTypes.string,\n  //-----------------------------\n  // Lightbox style\n  //-----------------------------\n  // Set z-index style, etc., for the parent react-modal (format: https://github.com/reactjs/react-modal#styles )\n  reactModalStyle: PropTypes.object,\n  // Padding (px) between the edge of the window and the lightbox\n  imagePadding: PropTypes.number,\n  wrapperClassName: PropTypes.string,\n  //-----------------------------\n  // Other\n  //-----------------------------\n  // Array of custom toolbar buttons\n  toolbarButtons: PropTypes.arrayOf(PropTypes.node),\n  // When true, clicks outside of the image close the lightbox\n  clickOutsideToClose: PropTypes.bool,\n  // Set to false to disable zoom functionality and hide zoom buttons\n  enableZoom: PropTypes.bool,\n  // Override props set on react-modal (https://github.com/reactjs/react-modal)\n  reactModalProps: PropTypes.shape({}),\n  // Aria-labels\n  nextLabel: PropTypes.string,\n  prevLabel: PropTypes.string,\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  closeLabel: PropTypes.string,\n  imageLoadErrorMessage: PropTypes.node\n};\nReactImageLightbox.defaultProps = {\n  imageTitle: null,\n  imageCaption: null,\n  toolbarButtons: null,\n  reactModalProps: {},\n  animationDisabled: false,\n  animationDuration: 300,\n  animationOnKeyInput: false,\n  clickOutsideToClose: true,\n  closeLabel: 'Close lightbox',\n  discourageDownloads: false,\n  enableZoom: true,\n  imagePadding: 10,\n  imageCrossOrigin: null,\n  keyRepeatKeyupBonus: 40,\n  keyRepeatLimit: 180,\n  mainSrcThumbnail: null,\n  nextLabel: 'Next image',\n  nextSrc: null,\n  nextSrcThumbnail: null,\n  onAfterOpen: function onAfterOpen() {},\n  onImageLoadError: function onImageLoadError() {},\n  onImageLoad: function onImageLoad() {},\n  onMoveNextRequest: function onMoveNextRequest() {},\n  onMovePrevRequest: function onMovePrevRequest() {},\n  prevLabel: 'Previous image',\n  prevSrc: null,\n  prevSrcThumbnail: null,\n  reactModalStyle: {},\n  wrapperClassName: '',\n  zoomInLabel: 'Zoom in',\n  zoomOutLabel: 'Zoom out',\n  imageLoadErrorMessage: 'This image failed to load'\n};\n\nexport default ReactImageLightbox;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    } \n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm)\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.props.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, it’s not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Async = require(\"./Async\");\n\nvar _Creatable = require(\"./Creatable\");\n\nvar _stateManager = _interopRequireDefault(require(\"./stateManager\"));\n\nvar _Select = _interopRequireDefault(require(\"./Select\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SelectCreatable = (0, _Creatable.makeCreatableSelect)(_Select.default);\nvar SelectCreatableState = (0, _stateManager.default)(SelectCreatable);\n\nvar _default = (0, _Async.makeAsyncSelect)(SelectCreatableState);\n\nexports.default = _default;","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = function (fn) {\n  return NATIVE_BIND ? uncurryThisWithBind(fn) : function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nvar toString = uncurryThisRaw({}.toString);\nvar stringSlice = uncurryThisRaw(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var classofRaw = require('../internals/classof-raw');\nvar uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThisRaw(fn);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.25.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","var isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export default {\n  GLOBAL: {\n    HIDE: '__react_tooltip_hide_event',\n    REBUILD: '__react_tooltip_rebuild_event',\n    SHOW: '__react_tooltip_show_event'\n  }\n};\n","/**\n * Static methods for react-tooltip\n */\nimport CONSTANT from '../constant';\n\nconst dispatchGlobalEvent = (eventName, opts) => {\n  // Compatible with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent(eventName, false, true, opts);\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport default function(target) {\n  /**\n   * Hide all tooltip\n   * @trigger ReactTooltip.hide()\n   */\n  target.hide = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.HIDE, { target });\n  };\n\n  /**\n   * Rebuild all tooltip\n   * @trigger ReactTooltip.rebuild()\n   */\n  target.rebuild = () => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.REBUILD);\n  };\n\n  /**\n   * Show specific tooltip\n   * @trigger ReactTooltip.show()\n   */\n  target.show = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.SHOW, { target });\n  };\n\n  target.prototype.globalRebuild = function() {\n    if (this.mount) {\n      this.unbindListener();\n      this.bindListener();\n    }\n  };\n\n  target.prototype.globalShow = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      // Create a fake event, specific show will limit the type to `solid`\n      // only `float` type cares e.clientX e.clientY\n      this.showTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        true\n      );\n    }\n  };\n\n  target.prototype.globalHide = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      this.hideTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        hasTarget\n      );\n    }\n  };\n}\n","/**\n * Custom events to control showing and hiding of tooltip\n *\n * @attributes\n * - `event` {String}\n * - `eventOff` {String}\n */\n\nexport const checkStatus = function(dataEventOff, e) {\n  const { show } = this.state;\n  const { id } = this.props;\n  const isCapture = this.isCapture(e.currentTarget);\n  const currentItem = e.currentTarget.getAttribute('currentItem');\n\n  if (!isCapture) e.stopPropagation();\n  if (show && currentItem === 'true') {\n    if (!dataEventOff) this.hideTooltip(e);\n  } else {\n    e.currentTarget.setAttribute('currentItem', 'true');\n    setUntargetItems(e.currentTarget, this.getTargetArray(id));\n    this.showTooltip(e);\n  }\n};\n\nconst setUntargetItems = function(currentTarget, targetArray) {\n  for (let i = 0; i < targetArray.length; i++) {\n    if (currentTarget !== targetArray[i]) {\n      targetArray[i].setAttribute('currentItem', 'false');\n    } else {\n      targetArray[i].setAttribute('currentItem', 'true');\n    }\n  }\n};\n\nconst customListeners = {\n  id: '9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf',\n  set(target, event, listener) {\n    if (this.id in target) {\n      const map = target[this.id];\n      map[event] = listener;\n    } else {\n      // this is workaround for WeakMap, which is not supported in older browsers, such as IE\n      Object.defineProperty(target, this.id, {\n        configurable: true,\n        value: { [event]: listener }\n      });\n    }\n  },\n  get(target, event) {\n    const map = target[this.id];\n    if (map !== undefined) {\n      return map[event];\n    }\n  }\n};\n\nexport default function(target) {\n  target.prototype.isCustomEvent = function(ele) {\n    const { event } = this.state;\n    return event || !!ele.getAttribute('data-event');\n  };\n\n  /* Bind listener for custom event */\n  target.prototype.customBindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = ele.getAttribute('data-event') || event;\n    const dataEventOff = ele.getAttribute('data-event-off') || eventOff;\n\n    dataEvent.split(' ').forEach(event => {\n      ele.removeEventListener(event, customListeners.get(ele, event));\n      const customListener = checkStatus.bind(this, dataEventOff);\n      customListeners.set(ele, event, customListener);\n      ele.addEventListener(event, customListener, false);\n    });\n    if (dataEventOff) {\n      dataEventOff.split(' ').forEach(event => {\n        ele.removeEventListener(event, this.hideTooltip);\n        ele.addEventListener(event, this.hideTooltip, false);\n      });\n    }\n  };\n\n  /* Unbind listener for custom event */\n  target.prototype.customUnbindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = event || ele.getAttribute('data-event');\n    const dataEventOff = eventOff || ele.getAttribute('data-event-off');\n\n    ele.removeEventListener(dataEvent, customListeners.get(ele, event));\n    if (dataEventOff) ele.removeEventListener(dataEventOff, this.hideTooltip);\n  };\n}\n","/**\n * Util method to get effect\n */\nimport { checkStatus } from './customEvent';\n\nconst makeProxy = (e) => {\n  const proxy = {};\n  for (const key in e) {\n    if (typeof e[key] === 'function') {\n      proxy[key] = e[key].bind(e);\n    } else {\n      proxy[key] = e[key];\n    }\n  }\n  return proxy;\n};\n\nconst bodyListener = function (callback, options, e) {\n  const { respectEffect = false, customEvent = false } = options;\n  const { id } = this.props;\n\n  let tip = null;\n  let forId;\n  let target = e.target;\n  let lastTarget;\n  // walk up parent chain until tip is found\n  // there is no match if parent visible area is matched by mouse position, so some corner cases might not work as expected\n  while (tip === null && target !== null) {\n    lastTarget = target;\n    tip = target.getAttribute('data-tip') || null;\n    forId = target.getAttribute('data-for') || null;\n    target = target.parentElement;\n  }\n\n  target = lastTarget || e.target;\n\n  if (this.isCustomEvent(target) && !customEvent) {\n    return;\n  }\n\n  const isTargetBelongsToTooltip =\n    (id == null && forId == null) || forId === id;\n\n  if (\n    tip != null &&\n    (!respectEffect || this.getEffect(target) === 'float') &&\n    isTargetBelongsToTooltip\n  ) {\n    const proxy = makeProxy(e);\n    proxy.currentTarget = target;\n    callback(proxy);\n  }\n};\n\nconst findCustomEvents = (targetArray, dataAttribute) => {\n  const events = {};\n  targetArray.forEach((target) => {\n    const event = target.getAttribute(dataAttribute);\n    if (event) event.split(' ').forEach((event) => (events[event] = true));\n  });\n\n  return events;\n};\n\nconst getBody = () => document.getElementsByTagName('body')[0];\n\nexport default function (target) {\n  target.prototype.isBodyMode = function () {\n    return !!this.props.bodyMode;\n  };\n\n  target.prototype.bindBodyListener = function (targetArray) {\n    const { event, eventOff, possibleCustomEvents, possibleCustomEventsOff } =\n      this.state;\n    const body = getBody();\n\n    const customEvents = findCustomEvents(targetArray, 'data-event');\n    const customEventsOff = findCustomEvents(targetArray, 'data-event-off');\n\n    if (event != null) customEvents[event] = true;\n    if (eventOff != null) customEventsOff[eventOff] = true;\n    possibleCustomEvents\n      .split(' ')\n      .forEach((event) => (customEvents[event] = true));\n    possibleCustomEventsOff\n      .split(' ')\n      .forEach((event) => (customEventsOff[event] = true));\n\n    this.unbindBodyListener(body);\n\n    const listeners = (this.bodyModeListeners = {});\n    if (event == null) {\n      listeners.mouseover = bodyListener.bind(this, this.showTooltip, {});\n      listeners.mousemove = bodyListener.bind(this, this.updateTooltip, {\n        respectEffect: true\n      });\n      listeners.mouseout = bodyListener.bind(this, this.hideTooltip, {});\n    }\n\n    for (const event in customEvents) {\n      listeners[event] = bodyListener.bind(\n        this,\n        (e) => {\n          const targetEventOff =\n            e.currentTarget.getAttribute('data-event-off') || eventOff;\n          checkStatus.call(this, targetEventOff, e);\n        },\n        { customEvent: true }\n      );\n    }\n    for (const event in customEventsOff) {\n      listeners[event] = bodyListener.bind(this, this.hideTooltip, {\n        customEvent: true\n      });\n    }\n    for (const event in listeners) {\n      body.addEventListener(event, listeners[event]);\n    }\n  };\n\n  target.prototype.unbindBodyListener = function (body) {\n    body = body || getBody();\n\n    const listeners = this.bodyModeListeners;\n    for (const event in listeners) {\n      body.removeEventListener(event, listeners[event]);\n    }\n  };\n}\n","/**\n * Calculate the position of tooltip\n *\n * @params\n * - `e` {Event} the event of current mouse\n * - `target` {Element} the currentTarget of the event\n * - `node` {DOM} the react-tooltip object\n * - `place` {String} top / right / bottom / left\n * - `effect` {String} float / solid\n * - `offset` {Object} the offset to default position\n *\n * @return {Object}\n * - `isNewState` {Bool} required\n * - `newState` {Object}\n * - `position` {Object} {left: {Number}, top: {Number}}\n */\nexport default function (e, target, node, place, desiredPlace, effect, offset) {\n  const { width: tipWidth, height: tipHeight } = getDimensions(node);\n\n  const { width: targetWidth, height: targetHeight } = getDimensions(target);\n\n  const { mouseX, mouseY } = getCurrentOffset(e, target, effect);\n  const defaultOffset = getDefaultPosition(\n    effect,\n    targetWidth,\n    targetHeight,\n    tipWidth,\n    tipHeight\n  );\n  const { extraOffsetX, extraOffsetY } = calculateOffset(offset);\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  const { parentTop, parentLeft } = getParent(node);\n\n  // Get the edge offset of the tooltip\n  const getTipOffsetLeft = (place) => {\n    const offsetX = defaultOffset[place].l;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetRight = (place) => {\n    const offsetX = defaultOffset[place].r;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetTop = (place) => {\n    const offsetY = defaultOffset[place].t;\n    return mouseY + offsetY + extraOffsetY;\n  };\n  const getTipOffsetBottom = (place) => {\n    const offsetY = defaultOffset[place].b;\n    return mouseY + offsetY + extraOffsetY;\n  };\n\n  //\n  // Functions to test whether the tooltip's sides are inside\n  // the client window for a given orientation p\n  //\n  //  _____________\n  // |             | <-- Right side\n  // | p = 'left'  |\\\n  // |             |/  |\\\n  // |_____________|   |_\\  <-- Mouse\n  //      / \\           |\n  //       |\n  //       |\n  //  Bottom side\n  //\n  const outsideLeft = (p) => getTipOffsetLeft(p) < 0;\n  const outsideRight = (p) => getTipOffsetRight(p) > windowWidth;\n  const outsideTop = (p) => getTipOffsetTop(p) < 0;\n  const outsideBottom = (p) => getTipOffsetBottom(p) > windowHeight;\n\n  // Check whether the tooltip with orientation p is completely inside the client window\n  const outside = (p) =>\n    outsideLeft(p) || outsideRight(p) || outsideTop(p) || outsideBottom(p);\n  const inside = (p) => !outside(p);\n\n  const placeIsInside = {\n    top: inside('top'),\n    bottom: inside('bottom'),\n    left: inside('left'),\n    right: inside('right')\n  };\n\n  function choose() {\n    const allPlaces = desiredPlace\n      .split(',')\n      .concat(place, ['top', 'bottom', 'left', 'right']);\n    for (const d of allPlaces) {\n      if (placeIsInside[d]) return d;\n    }\n    // if nothing is inside, just use the old place.\n    return place;\n  }\n\n  const chosen = choose();\n\n  let isNewState = false;\n  let newPlace;\n  if (chosen && chosen !== place) {\n    isNewState = true;\n    newPlace = chosen;\n  }\n\n  if (isNewState) {\n    return {\n      isNewState: true,\n      newState: { place: newPlace }\n    };\n  }\n\n  return {\n    isNewState: false,\n    position: {\n      left: parseInt(getTipOffsetLeft(place) - parentLeft, 10),\n      top: parseInt(getTipOffsetTop(place) - parentTop, 10)\n    }\n  };\n}\n\nconst getDimensions = (node) => {\n  const { height, width } = node.getBoundingClientRect();\n  return {\n    height: parseInt(height, 10),\n    width: parseInt(width, 10)\n  };\n};\n\n// Get current mouse offset\nconst getCurrentOffset = (e, currentTarget, effect) => {\n  const boundingClientRect = currentTarget.getBoundingClientRect();\n  const targetTop = boundingClientRect.top;\n  const targetLeft = boundingClientRect.left;\n  const { width: targetWidth, height: targetHeight } =\n    getDimensions(currentTarget);\n\n  if (effect === 'float') {\n    return {\n      mouseX: e.clientX,\n      mouseY: e.clientY\n    };\n  }\n  return {\n    mouseX: targetLeft + targetWidth / 2,\n    mouseY: targetTop + targetHeight / 2\n  };\n};\n\n// List all possibility of tooltip final offset\n// This is useful in judging if it is necessary for tooltip to switch position when out of window\nconst getDefaultPosition = (\n  effect,\n  targetWidth,\n  targetHeight,\n  tipWidth,\n  tipHeight\n) => {\n  let top;\n  let right;\n  let bottom;\n  let left;\n  const disToMouse = 3;\n  const triangleHeight = 2;\n  const cursorHeight = 12; // Optimize for float bottom only, cause the cursor will hide the tooltip\n\n  if (effect === 'float') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(tipHeight + disToMouse + triangleHeight),\n      b: -disToMouse\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: disToMouse + cursorHeight,\n      b: tipHeight + disToMouse + triangleHeight + cursorHeight\n    };\n    left = {\n      l: -(tipWidth + disToMouse + triangleHeight),\n      r: -disToMouse,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: disToMouse,\n      r: tipWidth + disToMouse + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  } else if (effect === 'solid') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(targetHeight / 2 + tipHeight + triangleHeight),\n      b: -(targetHeight / 2)\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: targetHeight / 2,\n      b: targetHeight / 2 + tipHeight + triangleHeight\n    };\n    left = {\n      l: -(tipWidth + targetWidth / 2 + triangleHeight),\n      r: -(targetWidth / 2),\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: targetWidth / 2,\n      r: tipWidth + targetWidth / 2 + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  }\n\n  return { top, bottom, left, right };\n};\n\n// Consider additional offset into position calculation\nconst calculateOffset = (offset) => {\n  let extraOffsetX = 0;\n  let extraOffsetY = 0;\n\n  if (Object.prototype.toString.apply(offset) === '[object String]') {\n    offset = JSON.parse(offset.toString().replace(/'/g, '\"'));\n  }\n  for (const key in offset) {\n    if (key === 'top') {\n      extraOffsetY -= parseInt(offset[key], 10);\n    } else if (key === 'bottom') {\n      extraOffsetY += parseInt(offset[key], 10);\n    } else if (key === 'left') {\n      extraOffsetX -= parseInt(offset[key], 10);\n    } else if (key === 'right') {\n      extraOffsetX += parseInt(offset[key], 10);\n    }\n  }\n\n  return { extraOffsetX, extraOffsetY };\n};\n\n// Get the offset of the parent elements\nconst getParent = (currentTarget) => {\n  let currentParent = currentTarget;\n  while (currentParent) {\n    const computedStyle = window.getComputedStyle(currentParent);\n    // transform and will-change: transform change the containing block\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_Block\n    if (\n      computedStyle.getPropertyValue('transform') !== 'none' ||\n      computedStyle.getPropertyValue('will-change') === 'transform'\n    )\n      break;\n    currentParent = currentParent.parentElement;\n  }\n\n  const parentTop =\n    (currentParent && currentParent.getBoundingClientRect().top) || 0;\n  const parentLeft =\n    (currentParent && currentParent.getBoundingClientRect().left) || 0;\n\n  return { parentTop, parentLeft };\n};\n","/**\n * To get the tooltip content\n * it may comes from data-tip or this.props.children\n * it should support multiline\n *\n * @params\n * - `tip` {String} value of data-tip\n * - `children` {ReactElement} this.props.children\n * - `multiline` {Any} could be Bool(true/false) or String('true'/'false')\n *\n * @return\n * - String or react component\n */\nimport React from 'react';\n\nexport default function TipContent(tip, children, getContent, multiline) {\n  if (children) return children;\n  if (getContent !== undefined && getContent !== null) return getContent; // getContent can be 0, '', etc.\n  if (getContent === null) return null; // Tip not exist and children is null or undefined\n\n  const regexp = /<br\\s*\\/?>/;\n  if (!multiline || multiline === 'false' || !regexp.test(tip)) {\n    // No trim(), so that user can keep their input\n    return tip;\n  }\n\n  // Multiline tooltip content\n  return tip.split(regexp).map((d, i) => {\n    return (\n      <span key={i} className=\"multi-line\">\n        {d}\n      </span>\n    );\n  });\n}\n","/**\n * Support aria- and role in ReactTooltip\n *\n * @params props {Object}\n * @return {Object}\n */\nexport function parseAria(props) {\n  const ariaObj = {};\n  Object.keys(props)\n    .filter(prop => {\n      // aria-xxx and role is acceptable\n      return /(^aria-\\w+$|^role$)/.test(prop);\n    })\n    .forEach(prop => {\n      ariaObj[prop] = props[prop];\n    });\n\n  return ariaObj;\n}\n","/**\n * Convert nodelist to array\n * @see https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/core/createArrayFromMixed.js#L24\n * NodeLists are functions in Safari\n */\n\nexport default function(nodeList) {\n  const length = nodeList.length;\n  if (nodeList.hasOwnProperty) {\n    return Array.prototype.slice.call(nodeList);\n  }\n  return new Array(length).fill().map(index => nodeList[index]);\n}\n","/**\n * Default pop-up style values (text color, background color).\n */\nconst defaultColors = {\n  dark: {\n    text: '#fff',\n    background: '#222',\n    border: 'transparent',\n    arrow: '#222'\n  },\n  success: {\n    text: '#fff',\n    background: '#8DC572',\n    border: 'transparent',\n    arrow: '#8DC572'\n  },\n  warning: {\n    text: '#fff',\n    background: '#F0AD4E',\n    border: 'transparent',\n    arrow: '#F0AD4E'\n  },\n  error: {\n    text: '#fff',\n    background: '#BE6464',\n    border: 'transparent',\n    arrow: '#BE6464'\n  },\n  info: {\n    text: '#fff',\n    background: '#337AB7',\n    border: 'transparent',\n    arrow: '#337AB7'\n  },\n  light: {\n    text: '#222',\n    background: '#fff',\n    border: 'transparent',\n    arrow: '#fff'\n  }\n};\n\nexport function getDefaultPopupColors(type) {\n  return defaultColors[type] ? { ...defaultColors[type] } : undefined;\n}\n\nexport const DEFAULT_PADDING = '8px 21px';\n\nexport const DEFAULT_RADIUS = {\n  tooltip: 3,\n  arrow: 0\n};\n","import {\n  getDefaultPopupColors,\n  DEFAULT_PADDING,\n  DEFAULT_RADIUS\n} from './defaultStyles';\n\n/**\n * Generates the specific tooltip style for use on render.\n */\nexport function generateTooltipStyle(\n  uuid,\n  customColors,\n  type,\n  hasBorder,\n  padding,\n  radius\n) {\n  return generateStyle(\n    uuid,\n    getPopupColors(customColors, type, hasBorder),\n    padding,\n    radius\n  );\n}\n\n/**\n * Generates the tooltip style rules based on the element-specified \"data-type\" property.\n */\nfunction generateStyle(\n  uuid,\n  colors,\n  padding = DEFAULT_PADDING,\n  radius = DEFAULT_RADIUS\n) {\n  const textColor = colors.text;\n  const backgroundColor = colors.background;\n  const borderColor = colors.border;\n  const arrowColor = colors.arrow;\n  const arrowRadius = radius.arrow;\n  const tooltipRadius = radius.tooltip;\n\n  return `\n  \t.${uuid} {\n\t    color: ${textColor};\n\t    background: ${backgroundColor};\n\t    border: 1px solid ${borderColor};\n\t    border-radius: ${tooltipRadius}px;\n\t    padding: ${padding};\n  \t}\n\n  \t.${uuid}.place-top {\n        margin-top: -10px;\n    }\n    .${uuid}.place-top::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: 2;\n        width: 20px;\n        height: 12px;\n    }\n    .${uuid}.place-top::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(135deg);\n    }\n\n    .${uuid}.place-bottom {\n        margin-top: 10px;\n    }\n    .${uuid}.place-bottom::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 18px;\n        height: 10px;\n    }\n    .${uuid}.place-bottom::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        top: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-left {\n        margin-left: -10px;\n    }\n    .${uuid}.place-left::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-left::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        right: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-right {\n        margin-left: 10px;\n    }\n    .${uuid}.place-right::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-right::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        left: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(-135deg);\n    }\n  `;\n}\n\nfunction getPopupColors(customColors, type, hasBorder) {\n  const textColor = customColors.text;\n  const backgroundColor = customColors.background;\n  const borderColor = customColors.border;\n  const arrowColor = customColors.arrow\n    ? customColors.arrow\n    : customColors.background;\n\n  const colors = getDefaultPopupColors(type);\n\n  if (textColor) {\n    colors.text = textColor;\n  }\n\n  if (backgroundColor) {\n    colors.background = backgroundColor;\n  }\n\n  if (hasBorder) {\n    if (borderColor) {\n      colors.border = borderColor;\n    } else {\n      colors.border = type === 'light' ? 'black' : 'white';\n    }\n  }\n\n  if (arrowColor) {\n    colors.arrow = arrowColor;\n  }\n\n  return colors;\n}\n","/* eslint-disable no-unused-vars, dot-notation */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/* Decorators */\nimport staticMethods from './decorators/staticMethods';\nimport windowListener from './decorators/windowListener';\nimport customEvent from './decorators/customEvent';\nimport isCapture from './decorators/isCapture';\nimport getEffect from './decorators/getEffect';\nimport bodyMode from './decorators/bodyMode';\nimport trackRemoval from './decorators/trackRemoval';\n\n/* Utils */\nimport getPosition from './utils/getPosition';\nimport getTipContent from './utils/getTipContent';\nimport { parseAria } from './utils/aria';\nimport nodeListToArray from './utils/nodeListToArray';\nimport { generateUUID } from './utils/uuid';\n\n/* CSS */\nimport baseCss from './index.scss';\nimport { generateTooltipStyle } from './decorators/styler';\n\n/* Polyfill */\nimport 'core-js/modules/es.array.find';\n\n@staticMethods\n@windowListener\n@customEvent\n@isCapture\n@getEffect\n@bodyMode\n@trackRemoval\nclass ReactTooltip extends React.Component {\n  static get propTypes() {\n    return {\n      uuid: PropTypes.string,\n      children: PropTypes.any,\n      place: PropTypes.string,\n      type: PropTypes.string,\n      effect: PropTypes.string,\n      offset: PropTypes.object,\n      padding: PropTypes.string,\n      multiline: PropTypes.bool,\n      border: PropTypes.bool,\n      borderClass: PropTypes.string,\n      textColor: PropTypes.string,\n      backgroundColor: PropTypes.string,\n      borderColor: PropTypes.string,\n      arrowColor: PropTypes.string,\n      arrowRadius: PropTypes.string,\n      tooltipRadius: PropTypes.string,\n      insecure: PropTypes.bool,\n      class: PropTypes.string,\n      className: PropTypes.string,\n      id: PropTypes.string,\n      html: PropTypes.bool,\n      delayHide: PropTypes.number,\n      delayUpdate: PropTypes.number,\n      delayShow: PropTypes.number,\n      event: PropTypes.string,\n      eventOff: PropTypes.string,\n      isCapture: PropTypes.bool,\n      globalEventOff: PropTypes.string,\n      getContent: PropTypes.any,\n      afterShow: PropTypes.func,\n      afterHide: PropTypes.func,\n      overridePosition: PropTypes.func,\n      disable: PropTypes.bool,\n      scrollHide: PropTypes.bool,\n      resizeHide: PropTypes.bool,\n      wrapper: PropTypes.string,\n      bodyMode: PropTypes.bool,\n      possibleCustomEvents: PropTypes.string,\n      possibleCustomEventsOff: PropTypes.string,\n      clickable: PropTypes.bool,\n      disableInternalStyle: PropTypes.bool\n    };\n  }\n\n  static defaultProps = {\n    insecure: true,\n    resizeHide: true,\n    wrapper: 'div',\n    clickable: false\n  };\n\n  static supportedWrappers = ['div', 'span'];\n\n  static displayName = 'ReactTooltip';\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uuid: props.uuid || generateUUID(),\n      place: props.place || 'top', // Direction of tooltip\n      desiredPlace: props.place || 'top',\n      type: props.type || 'dark', // Color theme of tooltip\n      effect: props.effect || 'float', // float or fixed\n      show: false,\n      border: false,\n      borderClass: 'border',\n      customColors: {},\n      customRadius: {},\n      offset: {},\n      padding: props.padding,\n      extraClass: '',\n      html: false,\n      delayHide: 0,\n      delayShow: 0,\n      event: props.event || null,\n      eventOff: props.eventOff || null,\n      currentEvent: null, // Current mouse event\n      currentTarget: null, // Current target of mouse event\n      ariaProps: parseAria(props), // aria- and role attributes\n      isEmptyTip: false,\n      disable: false,\n      possibleCustomEvents: props.possibleCustomEvents || '',\n      possibleCustomEventsOff: props.possibleCustomEventsOff || '',\n      originTooltip: null,\n      isMultiline: false\n    };\n\n    this.bind([\n      'showTooltip',\n      'updateTooltip',\n      'hideTooltip',\n      'hideTooltipOnScroll',\n      'getTooltipContent',\n      'globalRebuild',\n      'globalShow',\n      'globalHide',\n      'onWindowResize',\n      'mouseOnToolTip'\n    ]);\n\n    this.mount = true;\n    this.delayShowLoop = null;\n    this.delayHideLoop = null;\n    this.delayReshow = null;\n    this.intervalUpdateContent = null;\n  }\n\n  /**\n   * For unify the bind and unbind listener\n   */\n  bind(methodArray) {\n    methodArray.forEach((method) => {\n      this[method] = this[method].bind(this);\n    });\n  }\n\n  componentDidMount() {\n    const { insecure, resizeHide, disableInternalStyle } = this.props;\n    this.mount = true;\n\n    this.bindListener(); // Bind listener for tooltip\n    this.bindWindowEvents(resizeHide); // Bind global event for static method\n\n    if (!disableInternalStyle) {\n      this.injectStyles(); // Inject styles for each DOM root having tooltip.\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { ariaProps } = prevState;\n    const newAriaProps = parseAria(nextProps);\n    const isChanged = Object.keys(newAriaProps).some((props) => {\n      return newAriaProps[props] !== ariaProps[props];\n    });\n    if (!isChanged) {\n      return null;\n    }\n    return {\n      ...prevState,\n      ariaProps: newAriaProps\n    };\n  }\n\n  componentWillUnmount() {\n    this.mount = false;\n\n    this.clearTimer();\n\n    this.unbindListener();\n    this.removeScrollListener(this.state.currentTarget);\n    this.unbindWindowEvents();\n  }\n\n  /* Look for the closest DOM root having tooltip and inject styles. */\n  injectStyles() {\n    const { tooltipRef } = this;\n    if (!tooltipRef) {\n      return;\n    }\n\n    let parentNode = tooltipRef.parentNode;\n    while (parentNode.parentNode) {\n      parentNode = parentNode.parentNode;\n    }\n\n    let domRoot;\n\n    switch (parentNode.constructor.name) {\n      case 'Document':\n      case 'HTMLDocument':\n      case undefined:\n        domRoot = parentNode.head;\n        break;\n      case 'ShadowRoot':\n      default:\n        domRoot = parentNode;\n        break;\n    }\n\n    // Prevent styles duplication.\n    if (!domRoot.querySelector('style[data-react-tooltip]')) {\n      const style = document.createElement('style');\n      style.textContent = baseCss;\n      style.setAttribute('data-react-tooltip', 'true');\n\n      domRoot.appendChild(style);\n    }\n  }\n\n  /**\n   * Return if the mouse is on the tooltip.\n   * @returns {boolean} true - mouse is on the tooltip\n   */\n  mouseOnToolTip() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      /* old IE or Firefox work around */\n      if (!this.tooltipRef.matches) {\n        /* old IE work around */\n        if (this.tooltipRef.msMatchesSelector) {\n          this.tooltipRef.matches = this.tooltipRef.msMatchesSelector;\n        } else {\n          /* old Firefox work around */\n          this.tooltipRef.matches = this.tooltipRef.mozMatchesSelector;\n        }\n      }\n      return this.tooltipRef.matches(':hover');\n    }\n    return false;\n  }\n\n  /**\n   * Pick out corresponded target elements\n   */\n  getTargetArray(id) {\n    let targetArray = [];\n    let selector;\n    if (!id) {\n      selector = '[data-tip]:not([data-for])';\n    } else {\n      const escaped = id.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"');\n      selector = `[data-tip][data-for=\"${escaped}\"]`;\n    }\n\n    // Scan document for shadow DOM elements\n    nodeListToArray(document.getElementsByTagName('*'))\n      .filter((element) => element.shadowRoot)\n      .forEach((element) => {\n        targetArray = targetArray.concat(\n          nodeListToArray(element.shadowRoot.querySelectorAll(selector))\n        );\n      });\n    return targetArray.concat(\n      nodeListToArray(document.querySelectorAll(selector))\n    );\n  }\n\n  /**\n   * Bind listener to the target elements\n   * These listeners used to trigger showing or hiding the tooltip\n   */\n  bindListener() {\n    const { id, globalEventOff, isCapture } = this.props;\n    const targetArray = this.getTargetArray(id);\n\n    targetArray.forEach((target) => {\n      if (target.getAttribute('currentItem') === null) {\n        target.setAttribute('currentItem', 'false');\n      }\n      this.unbindBasicListener(target);\n      if (this.isCustomEvent(target)) {\n        this.customUnbindListener(target);\n      }\n    });\n\n    if (this.isBodyMode()) {\n      this.bindBodyListener(targetArray);\n    } else {\n      targetArray.forEach((target) => {\n        const isCaptureMode = this.isCapture(target);\n        const effect = this.getEffect(target);\n        if (this.isCustomEvent(target)) {\n          this.customBindListener(target);\n          return;\n        }\n\n        target.addEventListener('mouseenter', this.showTooltip, isCaptureMode);\n        target.addEventListener('focus', this.showTooltip, isCaptureMode);\n        if (effect === 'float') {\n          target.addEventListener(\n            'mousemove',\n            this.updateTooltip,\n            isCaptureMode\n          );\n        }\n        target.addEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n        target.addEventListener('blur', this.hideTooltip, isCaptureMode);\n      });\n    }\n\n    // Global event to hide tooltip\n    if (globalEventOff) {\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n      window.addEventListener(globalEventOff, this.hideTooltip, isCapture);\n    }\n\n    // Track removal of targetArray elements from DOM\n    this.bindRemovalTracker();\n  }\n\n  /**\n   * Unbind listeners on target elements\n   */\n  unbindListener() {\n    const { id, globalEventOff } = this.props;\n    if (this.isBodyMode()) {\n      this.unbindBodyListener();\n    } else {\n      const targetArray = this.getTargetArray(id);\n      targetArray.forEach((target) => {\n        this.unbindBasicListener(target);\n        if (this.isCustomEvent(target)) this.customUnbindListener(target);\n      });\n    }\n\n    if (globalEventOff)\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n    this.unbindRemovalTracker();\n  }\n\n  /**\n   * Invoke this before bind listener and unmount the component\n   * it is necessary to invoke this even when binding custom event\n   * so that the tooltip can switch between custom and default listener\n   */\n  unbindBasicListener(target) {\n    const isCaptureMode = this.isCapture(target);\n    target.removeEventListener('mouseenter', this.showTooltip, isCaptureMode);\n    target.removeEventListener('mousemove', this.updateTooltip, isCaptureMode);\n    target.removeEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n  }\n\n  getTooltipContent() {\n    const { getContent, children } = this.props;\n\n    // Generate tooltip content\n    let content;\n    if (getContent) {\n      if (Array.isArray(getContent)) {\n        content = getContent[0] && getContent[0](this.state.originTooltip);\n      } else {\n        content = getContent(this.state.originTooltip);\n      }\n    }\n\n    return getTipContent(\n      this.state.originTooltip,\n      children,\n      content,\n      this.state.isMultiline\n    );\n  }\n\n  isEmptyTip(placeholder) {\n    return (\n      (typeof placeholder === 'string' && placeholder === '') ||\n      placeholder === null\n    );\n  }\n\n  /**\n   * When mouse enter, show the tooltip\n   */\n  showTooltip(e, isGlobalCall) {\n    if (!this.tooltipRef) {\n      return;\n    }\n\n    if (isGlobalCall) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement) return;\n    }\n    // Get the tooltip content\n    // calculate in this phrase so that tip width height can be detected\n    const { multiline, getContent } = this.props;\n    const originTooltip = e.currentTarget.getAttribute('data-tip');\n    const isMultiline =\n      e.currentTarget.getAttribute('data-multiline') || multiline || false;\n\n    // If it is focus event or called by ReactTooltip.show, switch to `solid` effect\n    const switchToSolid = e instanceof window.FocusEvent || isGlobalCall;\n\n    // if it needs to skip adding hide listener to scroll\n    let scrollHide = true;\n    if (e.currentTarget.getAttribute('data-scroll-hide')) {\n      scrollHide = e.currentTarget.getAttribute('data-scroll-hide') === 'true';\n    } else if (this.props.scrollHide != null) {\n      scrollHide = this.props.scrollHide;\n    }\n\n    // adding aria-describedby to target to make tooltips read by screen readers\n    if (e && e.currentTarget && e.currentTarget.setAttribute) {\n      e.currentTarget.setAttribute(\n        'aria-describedby',\n        this.props.id || this.state.uuid\n      );\n    }\n\n    // Make sure the correct place is set\n    const desiredPlace =\n      e.currentTarget.getAttribute('data-place') || this.props.place || 'top';\n    const effect =\n      (switchToSolid && 'solid') || this.getEffect(e.currentTarget);\n    const offset =\n      e.currentTarget.getAttribute('data-offset') || this.props.offset || {};\n    const result = getPosition(\n      e,\n      e.currentTarget,\n      this.tooltipRef,\n      desiredPlace.split(',')[0],\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        e,\n        e.currentTarget,\n        this.tooltipRef,\n        desiredPlace,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    const place = result.isNewState\n      ? result.newState.place\n      : desiredPlace.split(',')[0];\n\n    // To prevent previously created timers from triggering\n    this.clearTimer();\n\n    const target = e.currentTarget;\n\n    const reshowDelay = this.state.show\n      ? target.getAttribute('data-delay-update') || this.props.delayUpdate\n      : 0;\n\n    const self = this;\n\n    const updateState = function updateState() {\n      self.setState(\n        {\n          originTooltip: originTooltip,\n          isMultiline: isMultiline,\n          desiredPlace: desiredPlace,\n          place: place,\n          type: target.getAttribute('data-type') || self.props.type || 'dark',\n          customColors: {\n            text:\n              target.getAttribute('data-text-color') ||\n              self.props.textColor ||\n              null,\n            background:\n              target.getAttribute('data-background-color') ||\n              self.props.backgroundColor ||\n              null,\n            border:\n              target.getAttribute('data-border-color') ||\n              self.props.borderColor ||\n              null,\n            arrow:\n              target.getAttribute('data-arrow-color') ||\n              self.props.arrowColor ||\n              null\n          },\n          customRadius: {\n            tooltip:\n              target.getAttribute('data-tooltip-radius') ||\n              self.props.tooltipRadius ||\n              '3',\n            arrow:\n              target.getAttribute('data-arrow-radius') ||\n              self.props.arrowRadius ||\n              '0'\n          },\n          effect: effect,\n          offset: offset,\n          padding: target.getAttribute('data-padding') || self.props.padding,\n          html:\n            (target.getAttribute('data-html')\n              ? target.getAttribute('data-html') === 'true'\n              : self.props.html) || false,\n          delayShow:\n            target.getAttribute('data-delay-show') || self.props.delayShow || 0,\n          delayHide:\n            target.getAttribute('data-delay-hide') || self.props.delayHide || 0,\n          delayUpdate:\n            target.getAttribute('data-delay-update') ||\n            self.props.delayUpdate ||\n            0,\n          border:\n            (target.getAttribute('data-border')\n              ? target.getAttribute('data-border') === 'true'\n              : self.props.border) || false,\n          borderClass:\n            target.getAttribute('data-border-class') ||\n            self.props.borderClass ||\n            'border',\n          extraClass:\n            target.getAttribute('data-class') ||\n            self.props.class ||\n            self.props.className ||\n            '',\n          disable:\n            (target.getAttribute('data-tip-disable')\n              ? target.getAttribute('data-tip-disable') === 'true'\n              : self.props.disable) || false,\n          currentTarget: target\n        },\n        () => {\n          if (scrollHide) {\n            self.addScrollListener(self.state.currentTarget);\n          }\n\n          self.updateTooltip(e);\n\n          if (getContent && Array.isArray(getContent)) {\n            self.intervalUpdateContent = setInterval(() => {\n              if (self.mount) {\n                const { getContent } = self.props;\n                const placeholder = getTipContent(\n                  originTooltip,\n                  '',\n                  getContent[0](),\n                  isMultiline\n                );\n                const isEmptyTip = self.isEmptyTip(placeholder);\n                self.setState({ isEmptyTip });\n                self.updatePosition();\n              }\n            }, getContent[1]);\n          }\n        }\n      );\n    };\n\n    // If there is no delay call immediately, don't allow events to get in first.\n    if (reshowDelay) {\n      this.delayReshow = setTimeout(updateState, reshowDelay);\n    } else {\n      updateState();\n    }\n  }\n\n  /**\n   * When mouse hover, update tool tip\n   */\n  updateTooltip(e) {\n    const { delayShow, disable } = this.state;\n    const { afterShow, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    const eventTarget = e.currentTarget || e.target;\n\n    // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n    if (this.mouseOnToolTip()) {\n      return;\n    }\n\n    // if the tooltip is empty, disable the tooltip\n    if (this.isEmptyTip(placeholder) || disable || disableProp) {\n      return;\n    }\n\n    const delayTime = !this.state.show ? parseInt(delayShow, 10) : 0;\n\n    const updateState = () => {\n      if (\n        (Array.isArray(placeholder) && placeholder.length > 0) ||\n        placeholder\n      ) {\n        const isInvisible = !this.state.show;\n        this.setState(\n          {\n            currentEvent: e,\n            currentTarget: eventTarget,\n            show: true\n          },\n          () => {\n            this.updatePosition(() => {\n              if (isInvisible && afterShow) {\n                afterShow(e);\n              }\n            });\n          }\n        );\n      }\n    };\n\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n    }\n    if (delayTime) {\n      this.delayShowLoop = setTimeout(updateState, delayTime);\n    } else {\n      this.delayShowLoop = null;\n      updateState();\n    }\n  }\n\n  /*\n   * If we're mousing over the tooltip remove it when we leave.\n   */\n  listenForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.addEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  removeListenerForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.removeEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  /**\n   * When mouse leave, hide tooltip\n   */\n  hideTooltip(e, hasTarget, options = { isScroll: false }) {\n    const { disable } = this.state;\n    const { isScroll } = options;\n    const delayHide = isScroll ? 0 : this.state.delayHide;\n    const { afterHide, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    if (!this.mount) return;\n    if (this.isEmptyTip(placeholder) || disable || disableProp) return; // if the tooltip is empty, disable the tooltip\n    if (hasTarget) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement || !this.state.show) return;\n    }\n\n    // clean up aria-describedby when hiding tooltip\n    if (e && e.currentTarget && e.currentTarget.removeAttribute) {\n      e.currentTarget.removeAttribute('aria-describedby');\n    }\n\n    const resetState = () => {\n      const isVisible = this.state.show;\n      // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n      if (this.mouseOnToolTip()) {\n        this.listenForTooltipExit();\n        return;\n      }\n\n      this.removeListenerForTooltipExit();\n\n      this.setState({ show: false }, () => {\n        this.removeScrollListener(this.state.currentTarget);\n        if (isVisible && afterHide) {\n          afterHide(e);\n        }\n      });\n    };\n\n    this.clearTimer();\n    if (delayHide) {\n      this.delayHideLoop = setTimeout(resetState, parseInt(delayHide, 10));\n    } else {\n      resetState();\n    }\n  }\n\n  /**\n   * When scroll, hide tooltip\n   */\n  hideTooltipOnScroll(event, hasTarget) {\n    this.hideTooltip(event, hasTarget, { isScroll: true });\n  }\n\n  /**\n   * Add scroll event listener when tooltip show\n   * automatically hide the tooltip when scrolling\n   */\n  addScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.addEventListener('scroll', this.hideTooltipOnScroll, isCaptureMode);\n  }\n\n  removeScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.removeEventListener(\n      'scroll',\n      this.hideTooltipOnScroll,\n      isCaptureMode\n    );\n  }\n\n  // Calculation the position\n  updatePosition(callbackAfter) {\n    const { currentEvent, currentTarget, place, desiredPlace, effect, offset } =\n      this.state;\n    const node = this.tooltipRef;\n    const result = getPosition(\n      currentEvent,\n      currentTarget,\n      node,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        currentEvent,\n        currentTarget,\n        node,\n        place,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    if (result.isNewState) {\n      // Switch to reverse placement\n      return this.setState(result.newState, () => {\n        this.updatePosition(callbackAfter);\n      });\n    }\n\n    if (callbackAfter && typeof callbackAfter === 'function') {\n      callbackAfter();\n    }\n\n    // Set tooltip position\n    node.style.left = result.position.left + 'px';\n    node.style.top = result.position.top + 'px';\n  }\n\n  /**\n   * CLear all kinds of timeout of interval\n   */\n  clearTimer() {\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n      this.delayShowLoop = null;\n    }\n    if (this.delayHideLoop) {\n      clearTimeout(this.delayHideLoop);\n      this.delayHideLoop = null;\n    }\n    if (this.delayReshow) {\n      clearTimeout(this.delayReshow);\n      this.delayReshow = null;\n    }\n    if (this.intervalUpdateContent) {\n      clearInterval(this.intervalUpdateContent);\n      this.intervalUpdateContent = null;\n    }\n  }\n\n  hasCustomColors() {\n    return Boolean(\n      Object.keys(this.state.customColors).find(\n        (color) => color !== 'border' && this.state.customColors[color]\n      ) ||\n        (this.state.border && this.state.customColors['border'])\n    );\n  }\n\n  render() {\n    const { extraClass, html, ariaProps, disable, uuid } = this.state;\n    const content = this.getTooltipContent();\n    const isEmptyTip = this.isEmptyTip(content);\n    const style = this.props.disableInternalStyle\n      ? ''\n      : generateTooltipStyle(\n          this.state.uuid,\n          this.state.customColors,\n          this.state.type,\n          this.state.border,\n          this.state.padding,\n          this.state.customRadius\n        );\n\n    const tooltipClass =\n      '__react_component_tooltip' +\n      ` ${this.state.uuid}` +\n      (this.state.show && !disable && !isEmptyTip ? ' show' : '') +\n      (this.state.border ? ' ' + this.state.borderClass : '') +\n      ` place-${this.state.place}` + // top, bottom, left, right\n      ` type-${this.hasCustomColors() ? 'custom' : this.state.type}` + // dark, success, warning, error, info, light, custom\n      (this.props.delayUpdate ? ' allow_hover' : '') +\n      (this.props.clickable ? ' allow_click' : '');\n\n    let Wrapper = this.props.wrapper;\n\n    if (ReactTooltip.supportedWrappers.indexOf(Wrapper) < 0) {\n      Wrapper = ReactTooltip.defaultProps.wrapper;\n    }\n\n    const wrapperClassName = [tooltipClass, extraClass]\n      .filter(Boolean)\n      .join(' ');\n\n    if (html) {\n      const htmlContent = `${content}${\n        style ? `\\n<style aria-hidden=\"true\">${style}</style>` : ''\n      }`;\n\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          ref={(ref) => (this.tooltipRef = ref)}\n          {...ariaProps}\n          data-id=\"tooltip\"\n          dangerouslySetInnerHTML={{ __html: htmlContent }}\n        />\n      );\n    } else {\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          {...ariaProps}\n          ref={(ref) => (this.tooltipRef = ref)}\n          data-id=\"tooltip\"\n        >\n          {style && (\n            <style\n              dangerouslySetInnerHTML={{ __html: style }}\n              aria-hidden=\"true\"\n            />\n          )}\n          {content}\n        </Wrapper>\n      );\n    }\n  }\n}\n\nexport default ReactTooltip;\n","/**\n * Tracking target removing from DOM.\n * It's necessary to hide tooltip when it's target disappears.\n * Otherwise, the tooltip would be shown forever until another target\n * is triggered.\n *\n * If MutationObserver is not available, this feature just doesn't work.\n */\n\n// https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\nconst getMutationObserverClass = () => {\n  return (\n    window.MutationObserver ||\n    window.WebKitMutationObserver ||\n    window.MozMutationObserver\n  );\n};\n\nexport default function(target) {\n  target.prototype.bindRemovalTracker = function() {\n    const MutationObserver = getMutationObserverClass();\n    if (MutationObserver == null) return;\n\n    const observer = new MutationObserver(mutations => {\n      for (let m1 = 0; m1 < mutations.length; m1++) {\n        const mutation = mutations[m1];\n        for (let m2 = 0; m2 < mutation.removedNodes.length; m2++) {\n          const element = mutation.removedNodes[m2];\n          if (element === this.state.currentTarget) {\n            this.hideTooltip();\n            return;\n          }\n        }\n      }\n    });\n\n    observer.observe(window.document, { childList: true, subtree: true });\n\n    this.removalTracker = observer;\n  };\n\n  target.prototype.unbindRemovalTracker = function() {\n    if (this.removalTracker) {\n      this.removalTracker.disconnect();\n      this.removalTracker = null;\n    }\n  };\n}\n","/**\n * Events that should be bound to the window\n */\nimport CONSTANT from '../constant';\n\nexport default function(target) {\n  target.prototype.bindWindowEvents = function(resizeHide) {\n    // ReactTooltip.hide\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.addEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide, false);\n\n    // ReactTooltip.rebuild\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.addEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild, false);\n\n    // ReactTooltip.show\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.addEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow, false);\n\n    // Resize\n    if (resizeHide) {\n      window.removeEventListener('resize', this.onWindowResize);\n      window.addEventListener('resize', this.onWindowResize, false);\n    }\n  };\n\n  target.prototype.unbindWindowEvents = function() {\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  /**\n   * invoked by resize event of window\n   */\n  target.prototype.onWindowResize = function() {\n    if (!this.mount) return;\n    this.hideTooltip();\n  };\n}\n","/**\n * Util method to judge if it should follow capture model\n */\n\nexport default function(target) {\n  target.prototype.isCapture = function(currentTarget) {\n    return (\n      (currentTarget &&\n        currentTarget.getAttribute('data-iscapture') === 'true') ||\n      this.props.isCapture ||\n      false\n    );\n  };\n}\n","/**\n * Util method to get effect\n */\n\nexport default function(target) {\n  target.prototype.getEffect = function(currentTarget) {\n    const dataEffect = currentTarget.getAttribute('data-effect');\n    return dataEffect || this.props.effect || 'float';\n  };\n}\n","import { v4 as uuid } from 'uuid';\n\nexport function generateUUID() {\n  return 't' + uuid();\n}\n"],"sourceRoot":""}